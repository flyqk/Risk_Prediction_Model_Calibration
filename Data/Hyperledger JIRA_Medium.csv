Summary,Issue key,Issue id,Issue Type,Status,Project key,Project name,Project type,Project lead,Project description,Project url,Priority,Resolution,Assignee,Reporter,Creator,Created,Updated,Last Viewed,Resolved,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Fix Version/s,Fix Version/s,Fix Version/s,Component/s,Component/s,Component/s,Due Date,Votes,Labels,Labels,Labels,Labels,Labels,Labels,Labels,Labels,Description,Environment,Log Work,Log Work,Original Estimate,Remaining Estimate,Time Spent,Work Ratio,Σ Original Estimate,Σ Remaining Estimate,Σ Time Spent,Security Level,Outward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Cloners),Outward issue link (Cloners),Outward issue link (Duplicate),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Custom field (Epic Link),Custom field (Rank),Custom field (Root Cause Analysis),Sprint,Sprint,Sprint,Sprint,Sprint,Sprint,Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Workaround),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitCommitsReferenced),Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment
Relative paths in Kafka.TLS not evaluated properly,FAB-9716,29707,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,kchristidis,kchristidis,25/Apr/18 10:21 PM,25/Apr/18 10:21 PM,26/Apr/18 6:50 AM,,v1.1,,,,,,v1.2,,,fabric-orderer,,,,0,kafka,,,,,,,,"What happens today: If you:

# Use relative paths as values for the {{File}} keys in {{orderer.yaml}}, and
# Invoke the orderer process from a different path than the one that {{orderer.yaml}} resides in

...then those files will not be loaded by the configuration.

The reason for this is that the {{stringFromFile}} and {{pemBlocksFromFile}} decode hooks, — responsible for resolving the file paths and loading the corresponding files — are called before {{completeInitialization}}, so they do {{current working directory}} + {{relative path}} in order to resolve the absolute path.

See {{Load}} in {{orderer/common/localconfig/config.go}} and notice how {{viperutil.EnhancedExactUnmarshal}} is called before {{completeInitialization}}.

Perhaps there is some wizardry that we can come up with in those decode hooks in order to make them resolve the right path ({{config dir}} + {{relative path}}), but my vote is to remove these hooks altogether, as well as the {{File:}} option.

Instead, {{Kafka.TLS}} should be _identical_ to {{General.TLS}}.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02gh9:,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Tree cloning skips data field,FAB-9715,29706,Bug,In Review,FAB,Fabric,software,ChristopherFerris,,,Medium,,yacovm,yacovm,yacovm,25/Apr/18 10:19 PM,25/Apr/18 10:39 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-common,,,,0,,,,,,,,,"When cloning a tree, the data field is not copied as well.

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02gh1:,,,,,,,,yacovm,,,,,,,,,,,,,,25/Apr/18 10:39 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/21029/,,,,,,,,,,,,,,,,,,,,,,,
Config parsing logic for Kafka TLS should just read the files,FAB-9713,29703,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,kchristidis,kchristidis,25/Apr/18 9:16 PM,25/Apr/18 10:22 PM,26/Apr/18 6:50 AM,,v1.1,,,,,,v1.2,,,fabric-orderer,,,,0,kafka,,,,,,,,"What happens today: If you set the {{Kafka.TLS}} part of the configuration in {{orderer.yaml}} by using the {{File:}} keys (i.e. by pointing to where the certs are stored), then for each of those values, the config parsing mechanism:
 # reads the file
 # decodes its contents into a {{pem.Block}}
 # encodes the PEM block as {{[]byte}} in memory
 # converts this encoding into a string

(See {{pemBlocksFromFileDecodeHook}} in {{viperutil/config_util.go}}.)

This series of steps is redundant.

What we need ultimately is a TLS certificate (type {{tls.Certificate}}) for the client's key pair, and X509 certificates (type {{x509.Certificate}}) for the certificates of the root CAs.

It should be sufficient then to just read the files in the config parsing logic (think {{ioutil.ReadFile()}}), then parse those byte slices accordingly in {{newBrokerConfig)) in \{\{kafka/config.go}}.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02ggl:,,,,,,,,kchristidis,,,,,,,,,,,,,,25/Apr/18 10:22 PM;kchristidis;My suggestion in FAB-9716 is to just remove these decode hooks altogether and have {{Kafka.TLS}} works _exactly_ like {{General.TLS}}.,,,,,,,,,,,,,,,,,,,,,,,
Chaincode container down if peer container goes down,FAB-9704,29690,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,aviralwal,aviralwal,25/Apr/18 5:54 PM,25/Apr/18 5:54 PM,26/Apr/18 6:50 AM,,,,,,,,,,,,,,,0,,,,,,,,," 

I had 6 peer containers running, 3 for each organisation. Out of 2 , 1 was admin and 2 were user containers. Now I had deployed a chaincode on it and the deployment was successful.

Now once the chaincode was successfully deployed, after some time, the peer through which the chaincode was deployed went down. This caused the chaincode to also go down. 

Since the chaincode was deployed using composer, I tried redeploying it but the peer was giving the error :- The chaincode already exists. The chaincode was present inside the peer in /var/hyperledger/production/chaincode

Also if I tried to bring up the chaincode container up manually, the peer did not allow it and gave error that chaincode cannot be invoked externally(it can be done in dev mode).

This behaviour is not good because If the peer somehow goes down, the chaincode wont be invoked automatically. This should happen automatically.

If any more information is required, Kindly inform me. ","Fabric v1.1 with kafka consensus mechanism.

Production environment",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02gdp:,,,,,,,,aviralwal,AyushyaChitransh,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
getAllLedgerIDs doesn't release the iterator ,FAB-9703,29689,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,yacovm,yacovm,25/Apr/18 4:59 PM,26/Apr/18 12:05 AM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-ledger,,,,0,,,,,,,,,"The function [getAllLedgerIDs|https://github.com/hyperledger/fabric/blob/13447bf5ead693f07285ce63a1903c5d0d25f096/core/ledger/kvledger/kv_ledger_provider.go#L291] doesn't release the iterator after acquiring it.

 Judging by the API comment: ""The iterator should be released after the use.""

it needs to be released.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02gdh:,,,,,,,,manish-sethi,yacovm,,,,,,,,,master,,,true,25/Apr/18 7:28 PM;yacovm;[~denyeart] [~manish-sethi],25/Apr/18 7:41 PM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/21015/,,,,,,,,,,,,,,,,,,,,,,
error starting orderer using sampleconfig,FAB-9702,29688,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,muralisr,muralisr,25/Apr/18 4:45 PM,25/Apr/18 5:38 PM,26/Apr/18 6:50 AM,25/Apr/18 5:38 PM,,,,,,,,,,fabric-orderer,,,,0,,,,,,,,,"Starting orderer thus

ORDERER_GENERAL_GENESISPROFILE=SampleSingleMSPSolo orderer

 

causes the following error

 
{code:java}
2018-04-25 12:40:41.823 EDT [common/tools/configtxgen/localconfig] Load -> INFO 003 Loaded configuration: /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/sampleconfig/configtx.yaml
2018-04-25 12:40:41.825 EDT [fsblkstorage] newBlockfileMgr -> INFO 004 Getting block information from block storage
2018-04-25 12:40:41.834 EDT [orderer/commmon/multichannel] newLedgerResources -> CRIT 005 Error creating channelconfig bundle: initializing configtx manager failed: bad channel ID: channel ID 'test_system_channel_name' contains illegal characters
panic: Error creating channelconfig bundle: initializing configtx manager failed: bad channel ID: channel ID 'test_system_channel_name' contains illegal characters
goroutine 1 [running]:
github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panicf(0xc42026b9e0, 0x48c0e8b, 0x27, 0xc420abf980, 0x1, 0x1)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:194 +0x126
github.com/hyperledger/fabric/orderer/common/multichannel.(*Registrar).newLedgerResources(0xc42028b2d0, 0xc420aa6090, 0xc420aa6090)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/orderer/common/multichannel/registrar.go:253 +0x389
github.com/hyperledger/fabric/orderer/common/multichannel.NewRegistrar(0x4949840, 0xc42018a080, 0xc420909d10, 0x4941440, 0x4da3ef0, 0xc420170ad8, 0x1, 0x1, 0x0)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/orderer/common/multichannel/registrar.go:144 +0x327
github.com/hyperledger/fabric/orderer/common/server.initializeMultichannelRegistrar(0xc4202a7400, 0x4941440, 0x4da3ef0, 0xc420170ad8, 0x1, 0x1, 0xc420363ed0)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/orderer/common/server/main.go:259 +0x250
github.com/hyperledger/fabric/orderer/common/server.Start(0x48a4e84, 0x5, 0xc4202a7400)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/orderer/common/server/main.go:100 +0x1d3
github.com/hyperledger/fabric/orderer/common/server.Main()
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/orderer/common/server/main.go:79 +0x204
main.main()
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/orderer/main.go:15 +0x20
{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02gd9:,,,,,,,,jyellick,muralisr,,,,,,,,,master,,,true,25/Apr/18 4:53 PM;jyellick;In review via: https://gerrit.hyperledger.org/r/c/21003/,,,,,,,,,,,,,,,,,,,,,,,
CI tests fail in fabric-chaincode-java-merge job due to shim error.(`Execution failed for task ( ':fabric-chaincode-shim:publishShimJarPublicationToHyperledger-snapshotsRepository'` ),FAB-9701,29671,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,sanchezl,sambhavdutt,sambhavdutt,25/Apr/18 1:52 PM,25/Apr/18 1:52 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-chaincode-java,,,,0,ci_failure,,,,,,,,"The following errors were observed in the CI job for fabric-chaincode-java-merge, 

{code:java}
SNAPSHOT/fabric-chaincode-shim-1.2.0-20180425.131125-10.pom'
13:11:25 :fabric-chaincode-shim:publishShimJarPublicationToHyperledger-snapshotsRepository FAILED
13:11:25 
13:11:25 FAILURE: Build failed with an exception.
13:11:25 
13:11:25 * What went wrong:
13:11:25 Execution failed for task ':fabric-chaincode-shim:publishShimJarPublicationToHyperledger-snapshotsRepository'.
13:11:25 > Failed to publish publication 'shimJar' to repository 'hyperledger-snapshots'
13:11:25    > Could not write to resource 'https://nexus.hyperledger.org/content/repositories/snapshots/org/hyperledger/fabric/fabric-chaincode-shim/1.2.0-SNAPSHOT/fabric-chaincode-shim-1.2.0-20180425.131125-10.jar'.
13:11:25       > Could not PUT 'https://nexus.hyperledger.org/content/repositories/snapshots/org/hyperledger/fabric/fabric-chaincode-shim/1.2.0-SNAPSHOT/fabric-chaincode-shim-1.2.0-20180425.131125-10.jar'. Received status code 401 from server: Unauthorized
13:11:25 
13:11:25 * Try:
13:11:25 Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.
13:11:25 
13:11:25 * Get more help at https://help.gradle.org
13:11:25 
13:11:25 BUILD FAILED in 3s
13:11:25 10 actionable tasks: 2 executed, 8 up-to-date
13:11:25 Build step 'Execute shell' marked build as failure
{code}


*Build Log*
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-java-merge-x86_64/35/_build-enviroment-variables.log.gz",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02g9x:,,,,,,,,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fix toc rendering bug,FAB-9698,29664,Bug,In Progress,FAB,Fabric,software,ChristopherFerris,,,Medium,,,ChristopherFerris,ChristopherFerris,25/Apr/18 10:35 AM,25/Apr/18 10:35 AM,26/Apr/18 6:50 AM,,v1.1,,,,,,,,,fabric-docs,,,,0,,,,,,,,,commands ref should start with # not ##,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02g8l:,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CouchDB runner test fails,FAB-9693,29657,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sykesm,kchristidis,kchristidis,24/Apr/18 7:48 PM,25/Apr/18 8:53 PM,26/Apr/18 6:50 AM,25/Apr/18 8:53 PM,,,,,,,v1.2,,,,,,,0,flakes,,,,,,,,"
{code:java}
CouchDB Runner
 unit-tests_1 | /opt/gopath/src/github.com/hyperledger/fabric/integration/runner/couchdb_test.go:26
 unit-tests_1 | starts and stops a docker container with the specified image [It]
 unit-tests_1 | /opt/gopath/src/github.com/hyperledger/fabric/integration/runner/couchdb_test.go:158
 unit-tests_1 | 
 unit-tests_1 | Expected an error, got nil
 unit-tests_1 | 
 unit-tests_1 | /opt/gopath/src/github.com/hyperledger/fabric/integration/runner/couchdb_test.go:199
 unit-tests_1 | ------------------------------
 unit-tests_1 | ••••••••••••••••
 unit-tests_1 | 
 unit-tests_1 | Summarizing 1 Failure:
 unit-tests_1 | 
 unit-tests_1 | [Fail] CouchDB Runner [It] starts and stops a docker container with the specified image 
 unit-tests_1 | /opt/gopath/src/github.com/hyperledger/fabric/integration/runner/couchdb_test.go:199
 unit-tests_1 | 
 unit-tests_1 | Ran 17 of 17 Specs in 7.014 seconds
 unit-tests_1 | FAIL! – 16 Passed | 1 Failed | 0 Pending | 0 Skipped — FAIL: TestRunner (7.01s)
 unit-tests_1 | FAIL
{code}


 Cannot produce locally, so it's probably intermittent.

Associated with this part of the test:


{code:java}
By(""terminating the container"")
 process.Signal(syscall.SIGTERM)
 Eventually(process.Wait()).Should(Receive(BeNil()))
 process = nil

_, err = client.InspectContainer(""container-name"")
 Expect(err).To(MatchError(""No such container: container-name""))
{code}


CI logs: [https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/1197/consoleText]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02g71:,,,,,,,,kchristidis,sykesm,,,,,,,,,master,,,true,25/Apr/18 1:06 PM;sykesm;https://gerrit.hyperledger.org/r/20997,,,,,,,,,,,,,,,,,,,,,,,
[Build] - Installing golint not working while building images for v1.1.0 ,FAB-9690,29652,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mrshah-ibm,mrshah-ibm,mrshah-ibm,24/Apr/18 5:26 PM,24/Apr/18 5:45 PM,26/Apr/18 6:50 AM,24/Apr/18 5:45 PM,v1.1.0-rc1,,,,,,v1.1.1,,,fabric-build,,,,0,,,,,,,,,"[Build] - Installing golint not working while building images
{code:java}
$ go get -u golang.org/x/lint/golint package golang.org/x/lint/golint: unrecognized import path ""golang.org/x/lint/golint"" (parse https://golang.org/x/lint/golint?go-get=1: no go-import meta tags ())
{code}
The issue is open in golint repo

[https://github.com/golang/lint/issues/397]

 

This affects v1.1.0 (GA) build.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02g5x:,,,,,,,,mrshah-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Different versions of the same system chaincode cannot exist simultaneously,FAB-9686,29648,Bug,In Progress,FAB,Fabric,software,ChristopherFerris,,,Medium,,jyellick,jyellick,jyellick,24/Apr/18 4:13 PM,24/Apr/18 8:19 PM,26/Apr/18 6:50 AM,,,,,,,,v1.3,,,fabric-peer,,,,0,,,,,,,,,The peer codebase currently assumes that all system chaincodes are at the version of the current peer binary.  This makes backwards compatibility very difficult and generally breaks the idea of versioning system chaincode.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-8724,0|i02g51:,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE not handling IBP Enterprise data structures,FAB-9665,29619,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,dongming,holocron,holocron,23/Apr/18 8:34 PM,24/Apr/18 2:24 PM,26/Apr/18 6:50 AM,24/Apr/18 2:24 PM,,,,,,,,,,fabric-tools,,,,0,,,,,,,,,"PTE is not handling the data structures as defined by the IBP Enterprise offering, specifically, the peer names (keys) are not ""peer"" but instead something like ""fabric-peer-org1-20399c"".

 

This leads to problems like:


{{info: [PTE 0 main]: request_install: \{""targets"":[],""chaincodePath"":""github.com/hyperledger/fabric-sdk-node/test/fixtures/src/github.com/sample_cc"",""chaincodeId"":""sample_cc_ch"",""chaincodeType"":""golang"",""chaincodeVersion"":""v0""}}}
{{error: [Client.js]: installChaincode error Missing peer objects in install chaincode request}}
{{error: [PTE 0 main]: Failed to enroll user 'admin'. Error: Missing peer objects in install chaincode request}}

 

I have a fix that I intend to create a CR for, essential doing a change all on

{{key.indexOf('peer') === 0}}

to

{{key.includes('peer')}}

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,0|i02fzh:,,,,,,,,holocron,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Cleanup endorser ProcessProposal log message,FAB-9653,29606,Bug,In Review,FAB,Fabric,software,ChristopherFerris,,,Medium,,wlahti,wlahti,wlahti,23/Apr/18 3:46 PM,23/Apr/18 4:03 PM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-endorser,,,,0,,,,,,,,,"The endorser currently logs the following message when it completes processing a proposal: 
{code:java}
2018-04-23 15:43:21.382 UTC [endorser] ProcessProposal -> DEBU 6ae Exit: request from%!(EXTRA string=172.22.0.14:59776){code}
This should be cleaned up to read: 
{code:java}
2018-04-23 15:43:21.382 UTC [endorser] ProcessProposal -> DEBU 6ae Exit: request from 172.22.0.14:59776{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02fxp:,,,,,,,,wlahti,,,,,,,,,,,,,,23/Apr/18 4:03 PM;wlahti;https://gerrit.hyperledger.org/r/c/20895/,,,,,,,,,,,,,,,,,,,,,,,
Return an error if collection isn't found,FAB-9643,29586,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,22/Apr/18 1:18 PM,23/Apr/18 2:35 AM,26/Apr/18 6:50 AM,23/Apr/18 2:35 AM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"The simpleCollectionStore implementation returns nil, nil in case the collection isn't found when calling RetrieveCollection .
{code:java}
func (c *simpleCollectionStore) retrieveSimpleCollection(cc common.CollectionCriteria) (*SimpleCollection, error) {
    collections, err := c.retrieveCollectionConfigPackage(cc)
    if err != nil {
        return nil, err
    }
    if collections == nil {
        return nil, nil
    }{code}
Gossip checks for the error and assumes that if error is nil then the collection has been retrieved, though it isn't so.

However, it's safe to omit this ""if collections == nil"" check because the function retrieveCollectionConfigPackage never actually returns nil, nil:
{code:java}
func (c *simpleCollectionStore) retrieveCollectionConfigPackage(cc common.CollectionCriteria) (*common.CollectionConfigPackage, error) {
    qe, err := c.s.GetQueryExecutorForLedger(cc.Channel)
    if err != nil {
        return nil, errors.WithMessage(err, fmt.Sprintf(""could not retrieve query executor for collection criteria %#v"", cc))
    }
    defer qe.Done()

    cb, err := qe.GetState(""lscc"", c.s.GetCollectionKVSKey(cc))
    if err != nil {
        return nil, errors.WithMessage(err, fmt.Sprintf(""error while retrieving collection for collection criteria %#v"", cc))
    }
    if cb == nil {
        return nil, NoSuchCollectionError(cc)
    }

    collections := &common.CollectionConfigPackage{}
    err = proto.Unmarshal(cb, collections)
    if err != nil {
        return nil, errors.Wrapf(err, ""invalid configuration for collection criteria %#v"", cc)
    }

    return collections, nil
}{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02fu5:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
deduplicate -> ERRO 008 Principal deserialization failure (the supplied identity is not valid: x509: certificate signed by unknown authority,FAB-9635,29578,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,abdulrashid,abdulrashid,21/Apr/18 1:00 PM,21/Apr/18 1:02 PM,26/Apr/18 6:50 AM,,,,,,,,,,,,,,,0,,,,,,,,,"Error is shown in the attachment name: Screen Shot 2018-04-21 at 3.52.38 PM.png

Steps to Reproduce the error

Step 1: Create a Folder called *bigproject* and Download and Extract *project1 and 2.zip*

Step 2: change your working directory to bigproject/project1

Step 3: run the command `docker-compose -f docker-compose-cli.yaml up`

Step 4: open another terminal run the following commands

_*export IMAGE_TAG=latest*_

_*docker start cli*_

_*docker exec -it cli bash*_

 

_Now you should get the error as shown in the attached *Screen Shot 2018-04-21 at 3.52.38 PM.png*_

 

 

Project 2 is the working example. WHich is literally same as *Project 1*, except *Project 2* has two Organization peer, *Project 1* has one organization peer.","Error is shown in the attachment name: Screen Shot 2018-04-21 at 3.52.38 PM.png

Steps to Reproduce the error

Step 1: Create a Folder called *bigproject* and Download and Extract *project1 and 2.zip*

Step 2: change your working directory to bigproject/project1

Step 3: run the command `docker-compose -f docker-compose-cli.yaml up`

Step 4: open another terminal run the following commands

_*export IMAGE_TAG=latest*_

_*docker start cli*_

_*docker exec -it cli bash*_

 

_Now you should get the error as shown in the attached *Screen Shot 2018-04-21 at 3.52.38 PM.png*_

 

 

Project 2 is the working example. WHich is literally same as *Project 1*, except *Project 2* has two Organization peer, *Project 1* has one organization peer.",,,,,,,,,,,,,,,,,,,21/Apr/18 12:54 PM;abdulrashid;Screen Shot 2018-04-21 at 3.52.38 PM.png;https://jira.hyperledger.org/secure/attachment/14906/Screen+Shot+2018-04-21+at+3.52.38+PM.png,21/Apr/18 12:53 PM;abdulrashid;project1 and 2.zip;https://jira.hyperledger.org/secure/attachment/14905/project1+and+2.zip,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02fsd:,,,,,,,,abdulrashid,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"""src"" is appending to ""channelTX"" directory when ""gopath"" is not defined ",FAB-9612,29545,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,dongming,rameshthoomu,rameshthoomu,20/Apr/18 12:46 PM,25/Apr/18 7:45 PM,26/Apr/18 6:50 AM,25/Apr/18 7:45 PM,,,,,,,v1.2,,,fabric-quality,,,,0,,,,,,,,,"While executing Fabric multihost tests through ATD (Ansible Test Driver), observed the below error.
{code:java}
info: [PTE 0 main]: [createOneChannel] channelTX:  /opt/gopath/src/var/hyperledger/fabric/artifacts/testorgschannel1.tx
fs.js:646
  return binding.open(pathModule._makeLong(path), stringToFlags(flags), mode);
                 ^
Error: ENOENT: no such file or directory, open '/opt/gopath/src/var/hyperledger/fabric/artifacts/testorgschannel1.tx'
    at Object.fs.openSync (fs.js:646:18)
    at Object.fs.readFileSync (fs.js:551:33)
    at createOneChannel (/opt/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/test/PTE/pte-main.js:696:25){code}
PTE Config:

[https://github.com/hyperledger/fabric-test/blob/59542e63b52e485bbd7baad1171bff155780f62d/tools/PTE/pte-main.js#L693]

ATD Config:

https://github.com/hyperledger/fabric-test/blob/master/tools/ATD/roles/tool_pte/ptesetup/templates/samplecc-chan-create-TLS.j2#L15",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,0|i02flh:,,,,,,,,dongming,rameshthoomu,,,,,,,,,master,,,true,25/Apr/18 5:41 PM;dongming;https://gerrit.hyperledger.org/r/#/c/21005/,,,,,,,,,,,,,,,,,,,,,,,
Unsupported chaincode fields appear supported,FAB-9610,29542,Bug,In Review,FAB,Fabric,software,ChristopherFerris,,,Medium,,jyellick,jyellick,jyellick,20/Apr/18 5:21 AM,20/Apr/18 5:32 AM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-peer,,,,0,hygiene,quality,,,,,,,"There are two notable chaincode proto fields which have no actual affect and are in fact a bit nonsensical in v1.0, but we continue to appear to support.  These fields are:

ChaincodeDeploymentSpec
    // Controls when the chaincode becomes executable.
    google.protobuf.Timestamp effective_date = 2;

ChaincodeInvocationSpec
    string id_generation_alg = 2;

The latter is especially troublesome, as the peer CLI still exposes it as an option, with no actual effect.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-8724,0|i02fl1:,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Dead code paths in chaincode container service,FAB-9603,29529,Bug,In Review,FAB,Fabric,software,ChristopherFerris,,,Medium,,jyellick,jyellick,jyellick,19/Apr/18 6:43 PM,19/Apr/18 6:44 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-peer,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02fi5:,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
System trust store loaded per request,FAB-9601,29527,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,divyank,divyank,divyank,19/Apr/18 6:22 PM,24/Apr/18 6:25 PM,26/Apr/18 6:50 AM,20/Apr/18 7:43 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,This is extremely slow on a system with many certificates in the system trust store.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02fhp:,,,,,,,,divyank,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Channel membership is refreshed even when channel config does not change,FAB-9598,29523,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,divyank,divyank,divyank,19/Apr/18 5:07 PM,19/Apr/18 7:19 PM,26/Apr/18 6:50 AM,19/Apr/18 7:19 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02fh1:,,,,,,,,divyank,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Retry: DefaultChClientOptions inconsistent with DefaultResMgmtOptions,FAB-9596,29521,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sandrav,sandrav,sandrav,19/Apr/18 4:22 PM,20/Apr/18 2:54 PM,26/Apr/18 6:50 AM,20/Apr/18 2:54 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,retry.DefaultChClientOptions inconsistent with retry.DefaultResMgmtOptions,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02fgl:,,,,,,,,sandrav,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Peer is not able to recognize PKCS11 Docker Environment Variable,FAB-9595,29520,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,rhegde,rhegde,19/Apr/18 3:53 PM,20/Apr/18 10:24 PM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,"Release -  Fabric v1.0.4

I have a peer running on PKCS11. PKCS11 is enabled using core.yaml file. I am trying now to replace the core.yaml with corresponding docker environment variable. However Peer fails to starts with following message
{code:java}
2018-03-15 18:27:35.783 UTC [main] main -> ERRO 001 Cannot run peer because error when setting up MSP from directory /etc/hyperledger/fabric/msp: err Could not initialize BCCSP Factories [Failed initializing SW.BCCSP [Could not initialize BCCSP SW [Failed to initialize software key store: An invalid KeyStore path provided. Path cannot be an empty string.]] Could not find default `PKCS11` BCCSP] {code}
 

I have set the following compose variable.

 
{code:java}
- CORE_PEER_BCCSP_DEFAULT=PKCS11

- CORE_PEER_BCCSP_PKCS11_LABEL=...

- CORE_PEER_BCCSP_PKCS11_LIBRARY=...

- CORE_PEER_BCCSP_PKCS11_PIN=...
{code}
{{Need to also check for Orderer.}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02fgd:,,,,,,,,jyellick,rhegde,,,,,,,,,,,,,"19/Apr/18 5:14 PM;jyellick;I believe this config is not under peer, so the variables you are looking for would actually be {{CORE_BCCSP_PKCS11_PIN}} etc.","20/Apr/18 10:24 PM;rhegde;I am able to use the following 3 flags
{code:java}
- CORE_PEER_BCCSP_PKCS11_LABEL=...
- CORE_PEER_BCCSP_PKCS11_LIBRARY=...
- CORE_PEER_BCCSP_PKCS11_PIN=...{code}
 

However setting - CORE_PEER_BCCSP_DEFAULT=PKCS11 makes PEER unhappy and crashes with the above message. To make peer understand that it is running in PKSC11 - the only option is to update PKCS11 in a core.yaml.

I tried using - CORE_BCCSP_DEFAULT=PKCS11 but that does not work and gives (looks like it is set to SW - which is the default)
{code:java}
2018-04-20 22:10:49.362 UTC [main] main -> ERRO 001 Cannot run peer because error when setting up MSP from directory /etc/hyperledger/fabric/msp: err KeyMaterial not found in SigningIdentityInfo{code}",,,,,,,,,,,,,,,,,,,,,,
docker install for fabric environment,FAB-9586,29506,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,YanKun,YanKun,19/Apr/18 8:32 AM,19/Apr/18 8:32 AM,26/Apr/18 6:50 AM,,,,,,,,,,,,,,,0,,,,,,,,,Just add a script from docker to install docker.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02fd9:,,,,,,,,YanKun,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix warnings emitted during e2e,FAB-9584,29504,Bug,In Review,FAB,Fabric,software,ChristopherFerris,,,Medium,,jyellick,jyellick,jyellick,19/Apr/18 5:11 AM,19/Apr/18 5:11 AM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-peer,,,,0,,,,,,,,,"Because of some changes to configtxgen deprecating certain function, there are now warnings in the e2e.  These should be fixed up so as to set a good example for others.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02fct:,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Panic when discovering local peers,FAB-9578,29490,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,bstasyszyn,bstasyszyn,18/Apr/18 7:43 PM,19/Apr/18 11:47 AM,26/Apr/18 6:50 AM,19/Apr/18 8:42 AM,,,,,,,,,,fabric-gossip,,,,0,,,,,,,,,"Sending a discovery request with a local peers query causes a panic on the peer:

req := discclient.NewRequest().AddLocalPeersQuery()
client.Send(ctx, req, target)

... results in the following panic:

org1peer1_1      | 2018-04-18 19:19:11.690 UTC [discovery/acl] ConfigSequence -> CRIT 0c8 Failed obtaining channel config for channel 
org1peer1_1      | panic: Failed obtaining channel config for channel
org1peer1_1      | 
org1peer1_1      | goroutine 723 [running]:
org1peer1_1      | github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panic(0xc4202c8090, 0xc4223b72e0, 0x2, 0x2)
org1peer1_1      | 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:188 +0xbd
org1peer1_1      | github.com/hyperledger/fabric/discovery/support/acl.(*DiscoverySupport).ConfigSequence(0xc42198cf60, 0x0, 0x0, 0x46)
org1peer1_1      | 	/opt/gopath/src/github.com/hyperledger/fabric/discovery/support/acl/support.go:79 +0x288
org1peer1_1      | github.com/hyperledger/fabric/discovery.(*accessCache).EligibleForService(0xc42003f7c0, 0xc421e56700, 0x34e, 0x34e, 0xc421e56a80, 0x322, 0x322, 0xc421e1c5a0, 0x46, 0x46, ...)
org1peer1_1      | 	/opt/gopath/src/github.com/hyperledger/fabric/discovery/authcache.go:104 +0x1e4
org1peer1_1      | github.com/hyperledger/fabric/discovery.(*authCache).EligibleForService(0xc4202f3980, 0x0, 0x0, 0xc421e56700, 0x34e, 0x34e, 0xc421e56a80, 0x322, 0x322, 0xc421e1c5a0, ...)
org1peer1_1      | 	/opt/gopath/src/github.com/hyperledger/fabric/discovery/authcache.go:79 +0xe0
org1peer1_1      | github.com/hyperledger/fabric/discovery.(*service).processQuery(0xc4202f39c0, 0xc4223b71a0, 0xc421e19170, 0xc421e56a80, 0x322, 0x322, 0xc421e4a130, 0x10, 0x0)
org1peer1_1      | 	/opt/gopath/src/github.com/hyperledger/fabric/discovery/service.go:96 +0x148
org1peer1_1      | github.com/hyperledger/fabric/discovery.(*service).Discover(0xc4202f39c0, 0xfc48a0, 0xc421e190b0, 0xc421e19170, 0xc4202f39c0, 0xc421e19150, 0xc421feca70)
org1peer1_1      | 	/opt/gopath/src/github.com/hyperledger/fabric/discovery/service.go:84 +0x193
org1peer1_1      | github.com/hyperledger/fabric/protos/discovery._Discovery_Discover_Handler(0xea63e0, 0xc4202f39c0, 0xfc48a0, 0xc421e190b0, 0xc421e3e1c0, 0x0, 0x0, 0x0, 0x20, 0x0)
org1peer1_1      | 	/opt/gopath/src/github.com/hyperledger/fabric/protos/discovery/protocol.pb.go:902 +0x241
org1peer1_1      | github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC(0xc4201ea000, 0xfc7ee0, 0xc421971e00, 0xc421e8c000, 0xc42198d380, 0x165ee10, 0xc421e19140, 0x0, 0x0)
org1peer1_1      | 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:920 +0x848
org1peer1_1      | github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc4201ea000, 0xfc7ee0, 0xc421971e00, 0xc421e8c000, 0xc421e19140)
org1peer1_1      | 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1142 +0x1318
org1peer1_1      | github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc42199f080, 0xc4201ea000, 0xfc7ee0, 0xc421971e00, 0xc421e8c000)
org1peer1_1      | 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:637 +0x9f
org1peer1_1      | created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1
org1peer1_1      | 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:635 +0xa1
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-8779,0|i02f9x:,,,,,,,,bstasyszyn,yacovm,,,,,,,,,master,,,true,18/Apr/18 8:02 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/20739/,"18/Apr/18 8:16 PM;yacovm;Totally forgot about that config sequence check... sorry about that :) 
That's what happens when you're too eager to deliver.

I tested this change set locally with my own hacky discovery CLI and it works:
{code}
root@9bc7a33f30a1:/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com# ./discli --cert msp/signcerts/Admin\@org1.example.com-cert.pem --channel mychannel --endpoint peer0.org1.example.com:7051 --key msp/keystore/04d2fdbc711524c7a4f9a0586a4b30803b0f33f2613050e046ceaa0bc38ecc5f_sk --msp Org1MSP --tlsCA tls/ca.crt --tlsCert tls/client.crt --tlsKey tls/client.key 
2018-04-18 20:15:20.540 UTC [bccsp] GetDefault -> WARN 001 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2018-04-18 20:15:20.541 UTC [bccsp] GetDefault -> WARN 002 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
Org1MSP peer0.org1.example.com:7051
Org1MSP peer1.org1.example.com:7051
Org2MSP peer1.org2.example.com:7051
Org2MSP peer0.org2.example.com:7051

{code}","19/Apr/18 8:42 AM;yacovm;Setting this to done, as I tested it locally, but feel free to re-open this JIRA if you check and see it isn't fixed.",19/Apr/18 11:47 AM;bstasyszyn;I tested the fix and it works for me. Thx.,,,,,,,,,,,,,,,,,,,,
Timezone import error when using python2.7 ,FAB-9566,29467,Bug,Invalid,FAB,Fabric,software,ChristopherFerris,,,Medium,,bjlhe,bjlhe,bjlhe,18/Apr/18 2:47 AM,18/Apr/18 8:08 AM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-sdk-py,,,,0,,,,,,,,,"For test module 'test/uni/block_decoder_test.py'

from datetime import timezone

Import error happens with : cannot import name timezone.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02cuo:,,,,,,,,bjlhe,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wrong Flag Name in Commands Reference,FAB-9564,29465,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ynamiki,ynamiki,ynamiki,18/Apr/18 12:39 AM,21/Apr/18 11:57 AM,26/Apr/18 6:50 AM,21/Apr/18 11:56 AM,,,,,,,Abandoned,,,fabric-docs,,,,0,,,,,,,,,"In the Command Reference, `peer channel` command has `--clientuth` flag, which is wrong; it should be `--clientauth`.

http://hyperledger-fabric.readthedocs.io/en/master/commands/peerchannel.html?highlight=clientuth
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02f4t:,,,,,,,,ynamiki,,,,,,,,,,,,,,18/Apr/18 12:46 AM;ynamiki;https://gerrit.hyperledger.org/r/20701,,,,,,,,,,,,,,,,,,,,,,,
Typo in fabric/msp-identity-validity-rules,FAB-9562,29463,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,nnao,nnao,17/Apr/18 10:24 PM,20/Apr/18 5:02 PM,26/Apr/18 6:50 AM,20/Apr/18 5:02 PM,v1.1,,,,,,v1.1.1,v1.2,,fabric-docs,,,,0,Documentation,,,,,,,,"{color:#000000}I found a {color}{color:#000000}typo{color}{color:#000000} at line 29 in {color}{color:#212121}fabric/msp-identity-validity-rules{color}{color:#000000}.rst.{color}
{color:#000000}It seems to be ""and"" instead of ""an"".{color}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02f4d:,,,,,,,,mastersingh24,nnao,,,,,,,,,release-1.1,master,,true,17/Apr/18 10:51 PM;nnao;https://gerrit.hyperledger.org/r/c/20697/,20/Apr/18 4:21 PM;mastersingh24;https://gerrit.hyperledger.org/r/20823   cherrypick to release-1.1,,,,,,,,,,,,,,,,,,,,,,
Runtime not working in Vagrant environments,FAB-9553,29450,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,denyeart,denyeart,denyeart,17/Apr/18 5:12 PM,19/Apr/18 5:25 PM,26/Apr/18 6:50 AM,19/Apr/18 5:25 PM,,,,,,,v1.2,,,fabric-devenv,,,,0,,,,,,,,,"Recent changes have broken runtime in Vagrant environments:
 * binaries directory has changed from /build/bin directory to /.build/bin directory
 * /fabric/sampleconfig directory no longer picked up by default, must specify FABRIC_CFG_PATH env variable.

The change fixes Vagrant environment accordingly.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzygi:bc,,,,,,,,denyeart,,,,,,,,,,master,,,true,17/Apr/18 5:14 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/20677/,,,,,,,,,,,,,,,,,,,,,,,
"Curl command is in google, not accessable in China",FAB-9547,29444,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,luomin,negupta,negupta,17/Apr/18 12:46 PM,18/Apr/18 2:01 AM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-docs,,,,0,Documentation,,,,,,,,"[https://hyperledger-fabric.readthedocs.io/en/latest/install.html]

On this page the binaries and samples are accessible via a google curl, which is not accessible in china.

curl -sSL https://goo.gl/6wtTN5 | bash -s 1.1.0",,,,144000,144000,,0%,144000,144000,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyge:i,,,,,,,,luomin,negupta,,,,,,,,,,,,,17/Apr/18 12:48 PM;negupta;[~ChristopherFerris],"18/Apr/18 1:59 AM;luomin;I confirmed the access from the mainland China just now,

goo.gl service is NOT available,

alternative (oversea URL shortener) service that works in mainland China includes:

[https://bit.ly|https://bit.ly/]

[https://tinyurl.com/]  <-  very slow

 

e.g. [https://bit.ly/2ByjiYZ]  works",,,,,,,,,,,,,,,,,,,,,,
Remove ephemeral from config,FAB-9543,29436,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sandrav,sandrav,sandrav,16/Apr/18 8:46 PM,19/Apr/18 5:35 PM,26/Apr/18 6:50 AM,19/Apr/18 5:35 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,Remove ephemeral from config.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02ez1:,,,,,,,,sandrav,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
[CI] release-1.0 - No rule to make target 'basic-checks',FAB-9542,29435,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,sanchezl,sanchezl,16/Apr/18 8:39 PM,16/Apr/18 9:37 PM,26/Apr/18 6:50 AM,,,,,,,,v1.0.7,,,fabric-build,,,,0,,,,,,,,,"From https://gerrit.hyperledger.org/r/c/20633/:
{code:java}
16:57:55 -------> Perform make basic-checks (license spelling linter)
16:57:59 make: *** No rule to make target 'basic-checks'.  Stop.
16:57:59 ------> make linter FAILED
16:58:00 Build step 'Execute shell' marked build as failure{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02eyt:,,,,,,,,sanchezl,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Orderer broadcast thread can panic on malformed message,FAB-9536,29428,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,16/Apr/18 4:39 PM,16/Apr/18 9:30 PM,26/Apr/18 6:50 AM,16/Apr/18 9:30 PM,v1.1,,,,,,v1.1.1,v1.2,,fabric-orderer,,,,0,,,,,,,,,"The orderer attempts to log the channel ID on broadcast failures.  If the message is malformed, the channel header may not be set, and the logging could produce a panic.  Although this is a handled panic, it should be fixed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02ex9:,,,,,,,,jyellick,kchristidis,,,,,,,,,release-1.1,master,,true,"16/Apr/18 5:55 PM;kchristidis;1.1.x branch: [https://gerrit.hyperledger.org/r/c/20631]

master branch: [https://gerrit.hyperledger.org/r/c/20629/]

 ",,,,,,,,,,,,,,,,,,,,,,,
Chaincode launch timeout is hardcoded for cc2cc,FAB-9535,29427,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,jyellick,jyellick,16/Apr/18 4:02 PM,16/Apr/18 4:02 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-peer,,,,0,,,,,,,,,"https://github.com/hyperledger/fabric/blob/release-1.1/core/chaincode/handler.go#L1372-L1373

There is a TODO in handler.go which uses a hardcoded timeout rather than basing it on the configured chaincode startup timeout, this should be fixed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02ex1:,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Correct Misspellings in Document,FAB-9517,29401,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ynamiki,ynamiki,ynamiki,14/Apr/18 11:22 AM,16/Apr/18 6:28 AM,26/Apr/18 6:50 AM,14/Apr/18 12:08 PM,,,,,,,,,,fabric-docs,,,,0,,,,,,,,,Check for misspellings in the document and correct it.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02es5:,,,,,,,,odowdaibm,ynamiki,,,,,,,,,master,,,true,14/Apr/18 11:34 AM;ynamiki;https://gerrit.hyperledger.org/r/20567,"14/Apr/18 12:50 PM;ynamiki;[~odowdaibm], The document has both American and British spelling (organization/organisation, etc.). Since labels in configuration file (configtx.yaml), standard configuration directory (crypto-config/peerOrganizations) and many identifiers in source codes use American spelling, can I replace British spelling in the docuement?",15/Apr/18 11:26 AM;ynamiki;I opened a new issue for American/British spelling: FAB-9523.,16/Apr/18 6:28 AM;odowdaibm;Feel free – I'd argue about your title though;) Thanks!,,,,,,,,,,,,,,,,,,,,
Generating yaml configtx file from localconfig errors on MaxMessageSize,FAB-9510,29391,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,latitiah,latitiah,latitiah,13/Apr/18 6:21 PM,17/Apr/18 5:47 PM,26/Apr/18 6:50 AM,17/Apr/18 5:47 PM,,,,,,,,,,fabric-tools,,,,0,,,,,,,,,"When generating configtx from the localconfig, and then attempting to use the result with the configtxgen tool there is an error: 
""has invalid keys: MaxMessageSize""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02eqd:,,,,,,,,latitiah,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
JoinChannel: genesis block retrieval failed,FAB-9509,29390,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sandrav,sandrav,sandrav,13/Apr/18 6:02 PM,13/Apr/18 8:47 PM,26/Apr/18 6:50 AM,13/Apr/18 8:47 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,Org peers failed to JoinChannel: genesis block retrieval failed: error from orderer: deliver failed: rpc error: code = DeadlineExceeded desc = context deadline exceeded,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02eq5:,,,,,,,,sandrav,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Peer upgrade fails while Upgrading HLF network from v1.0.6 to v1.1.0,FAB-9503,29380,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,mghasletwala,mghasletwala,13/Apr/18 1:35 PM,20/Apr/18 7:38 AM,26/Apr/18 6:50 AM,,v1.1,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"# We have two organizations in HLF 1.0.6 network (3 Zookeeper, 4 Kafka, 2 Orderer, 4 Peer (2 in each org), 4 Couchdb and 2 CA).
 # Zookeeper, Kafka and Couchdb upgraded successfully to v1.1.0-preview.
 # All orderer upgraded successfully to v1.1.0
 # Peer0.org1.example.com and Peer0.org2.example.com are leader peer.
 # Peer1.org1.example.com and Peer1.org2.example.com are non leader peer.
 # Installed chaincode on all peers.
 # Issued transaction using peer0.org1 and peer1.org1 as endorsing peer and successfully done.

Scenario: upgrading the peer0.org1.example.com (leader peer of org1):
Steps:
 # Stopped the chaincode container ""dev-peer0.org1.example.com"".
 ** Removed the chaincode container ""dev-peer0.org1.example.com"".
 # Stopped the peer container ""peer0.org1.example.com"".
 ** Rename the container ""peer0.org1.example.com"" to ""peer0.org1.example.com.old""
 # Executed the ""docker run"" with ""hyperledger/fabric-peer:x86_64-1.1.0"" to start the peer as ""peer0.org1.example.com"" and using the old ledger volume
 # Issued transaction using peer0.org2 and peer1.org2 as endorsing peer and peer0.org1 received the new block.
 # Installed chaincode on peer0.org1.example.com .
 # Issued transaction using peer0.org1 and peer1.org1 as endorsing peer but peer0.org1 failed to endorse while peer1.org1 successfully endorsed.

Result:
 # Below message found in log of peer0.org1.example.com. and chaincode container (dev-peer0.org1.example.com) status found ""Exited""
 ""premature execution - chaincode (mycc:v0) launched and waiting for registration""
 # After some time chaincode container found removed and log received in peer0.org1.example.com is as below.
 ""stopping due to error while launching: timeout expired while starting chaincode mycc:v0(networkid:dev,peerid:peer0.org1.example.com,tx:d3037fe6d77d604629b847507abd0a0a5567ed29c9b11823f7f6d4a7f1ce53df)""

Log file Attached:
 * a. peer0.org1.example.com_v1.1.0.log
 * b. peer0.org1.example.com_v1.0.6.log",,,,,,,,,,,,,,,,,,,,13/Apr/18 1:35 PM;mghasletwala;peerUpgradev1.0.6-v1.1.0.zip;https://jira.hyperledger.org/secure/attachment/14892/peerUpgradev1.0.6-v1.1.0.zip,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02eo5:,,,,,,,,mastersingh24,mghasletwala,,,,,,,,,,,,,14/Apr/18 9:59 AM;mastersingh24;[~mghasletwala] - Did you vendor the shim package (github.com/hyperledger/fabric/core/chaincode/shim) with your chaincode?,16/Apr/18 5:22 AM;mghasletwala;No. Our 1.0.6 chaincode does not include shim package.,"20/Apr/18 7:36 AM;mghasletwala;To work around the problem. We
 * deleted the Docker Container as well as Docker Image of the chain code.
 * installed chaincode
 * issued transaction.

Peer created the chaincode container and endorsed the transaction.

Thus we could successfully upgrade the network.

Not sure if these are expected steps to follow or the issue needs investigation.",,,,,,,,,,,,,,,,,,,,,
Add missing setCryptoKeyStore function to typescript type,FAB-9500,29377,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,zhaochy,Superjo149,Superjo149,13/Apr/18 12:27 PM,20/Apr/18 3:31 AM,26/Apr/18 6:50 AM,20/Apr/18 3:30 AM,,,,,,,v1.1,,,fabric-sdk-node,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02enh:,,,,,,,,Superjo149,zhaochy,,,,,,,,,release-1.1,master,,true,16/Apr/18 7:41 AM;zhaochy;master : https://gerrit.hyperledger.org/r/#/c/20611/,20/Apr/18 3:30 AM;zhaochy;for release 1.1 https://gerrit.hyperledger.org/r/#/c/20613/,,,,,,,,,,,,,,,,,,,,,,
Can't get a specific version of fabric docker images,FAB-9495,29368,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,nnao,nnao,12/Apr/18 10:11 PM,20/Apr/18 4:09 PM,26/Apr/18 6:50 AM,20/Apr/18 4:09 PM,v1.1,,,,,,v1.2,,,fabric-tools,,,,0,,,,,,,,,"I tried to get a specific version of fabric docker images by using bootstrap.sh which is listed on http://hyperledger-fabric.readthedocs.io/en/latest/install.html.
However, I couldn’t get the specific version of images. The latest version of fabric images was downloaded. Also, the script can't skip getting fabric-samples by using -s option.

{code:java}
vagrant@ubuntu-xenial:/opt/gopath/src/github.com/hyperledger$ curl -sSL https://goo.gl/6wtTN5 | bash -s 1.0.5
 
Installing hyperledger/fabric-samples repo
 
===> Checking out v1.1.0 branch of hyperledger/fabric-samples
HEAD is now at 1252c7a... [FAB-8920] Pin fabric-samples to node.js ""~1.1.0""
...
===> Pulling fabric Images
==> FABRIC IMAGE: peer
 
x86_64-1.1.0: Pulling from hyperledger/fabric-peer
Digest: sha256:57417699ddf50c5ebd47a9a2cc74c0324fbba0281eb1104b9ddd05a67776b01f
Status: Image is up to date for hyperledger/fabric-peer:x86_64-1.1.0
{code}","Linux ubuntu-xenial 4.4.0-119-generic
bash GNU bash, version 4.3.48(1)-release (x86_64-pc-linux-gnu)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02elh:,,,,,,,,nnao,,,,,,,,,,master,,,true,13/Apr/18 3:59 AM;nnao;https://gerrit.hyperledger.org/r/c/20525/,,,,,,,,,,,,,,,,,,,,,,,
Some tests that read config fail when running go test ./... ,FAB-9494,29367,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sykesm,wlahti,wlahti,12/Apr/18 8:45 PM,17/Apr/18 1:44 PM,26/Apr/18 6:50 AM,17/Apr/18 1:44 PM,,,,,,,,,,fabric-common,,,,0,,,,,,,,,"When running ""go test ./..."" after FAB-9466 was merged, some tests that relied on the fallback dev config path fail with messages such as:
{code:java}
--- FAIL: TestInitConfig (0.00s)

    --- FAIL: TestInitConfig/Good_command_root (0.00s)

    common_test.go:51: InitConfig() error = error when reading core config file: Unsupported Config Type """", wantErr false

--- FAIL: TestSetLogLevelFromViper (0.00s)

    --- FAIL: TestSetLogLevelFromViper/Valid_module_name (0.00s)

    common_test.go:171: SetLogLevelFromViper() args = {cauthdsl} error = invalid log level provided - , wantErr false

    --- FAIL: TestSetLogLevelFromViper/Valid_module_name#01 (0.00s)

    common_test.go:171: SetLogLevelFromViper() args = {level} error = invalid log level provided - , wantErr false

    --- FAIL: TestSetLogLevelFromViper/Valid_module_name#02 (0.00s)

    common_test.go:171: SetLogLevelFromViper() args = {gossip} error = invalid log level provided - , wantErr false

    --- FAIL: TestSetLogLevelFromViper/Valid_module_name#03 (0.00s)

    common_test.go:171: SetLogLevelFromViper() args = {grpc} error = invalid log level provided - , wantErr false

    --- FAIL: TestSetLogLevelFromViper/Valid_module_name#04 (0.00s)

    common_test.go:171: SetLogLevelFromViper() args = {msp} error = invalid log level provided - , wantErr false

    --- FAIL: TestSetLogLevelFromViper/Valid_module_name#05 (0.00s)

    common_test.go:171: SetLogLevelFromViper() args = {ledger} error = invalid log level provided - , wantErr false

    --- FAIL: TestSetLogLevelFromViper/Valid_module_name#06 (0.00s)

    common_test.go:171: SetLogLevelFromViper() args = {policies} error = invalid log level provided - , wantErr false

    --- FAIL: TestSetLogLevelFromViper/Valid_module_name#07 (0.00s)

    common_test.go:171: SetLogLevelFromViper() args = {peer.gossip} error = invalid log level provided - , wantErr false

FAIL

FAIL	github.com/hyperledger/fabric/peer/common	6.066s{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02el9:,,,,,,,,kchristidis,sykesm,wlahti,,,,,,,,master,,,true,"16/Apr/18 1:06 PM;sykesm;This is due to the confluence of several issues.

First, the container we're running unit tests in is setup with a working fabric configuration in two ways. We explicitly add the sample configuration to /etc/hyperledger/fabric and we set FABRIC_CFG_PATH as one of the environment variables in the container. This _hides_ dependencies on global configuration, sets up a hybrid production/test environment, and, IMO, is a problem that needs to be resolved separately.

https://github.com/hyperledger/fabric/blob/a8cc2c46d8cec1ad199741c0630a46ccb24084ac/images/testenv/Dockerfile.in#L8

[https://github.com/hyperledger/fabric/blob/a8cc2c46d8cec1ad199741c0630a46ccb24084ac/Makefile#L263-L266]

Second, our CI runs containers while developers want to be able to run tests natively, outside of a container. We should choose which we want and stick with it.

Finally, the configuration, in general, is inconsistent. In some cases (like localconfig), a separate instance of the viper configuration object is instantiated while in most other cases we use the global singleton config object. In either scenario, we use process level state (env vars, default paths) to load the configuration. We don't seem to have adopted a pattern when we use explicit configuration files next to our tests and load them directly for execution. Much of this (again IMO) is because our configuration system isn't well structure.

After this immediate issue is resolved, I think a larger discussion is needed about how we want configuration to be managed in tests and by users. We've had a number of issues with the configuration while attempting to write integration tests as well...",16/Apr/18 9:52 PM;sykesm; https://gerrit.hyperledger.org/r/20651,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - add test for multiple chaincode registration,FAB-9493,29366,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,12/Apr/18 7:26 PM,25/Apr/18 5:13 PM,26/Apr/18 6:50 AM,25/Apr/18 5:13 PM,,,,,,,v1.2,,,fabric-sdk-node,,,,0,,,,,,,,,Add test for multiple chaincode registration for both the EventHub and ChannelEventHub,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02el1:,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,master,,,true,12/Apr/18 7:39 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/20509/,,,,,,,,,,,,,,,,,,,,,,,
auth cache test failure ,FAB-9492,29364,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,12/Apr/18 6:38 PM,14/Apr/18 12:24 PM,26/Apr/18 6:50 AM,14/Apr/18 12:24 PM,,,,,,,,,,,,,,0,,,,,,,,,"18:34:46 unit-tests_1  | --- FAIL: TestCachePurgeCache (0.00s)
18:34:46 unit-tests_1  | 	assertions.go:247: 
                          
	Error Trace:	authcache_test.go:200
18:34:46 unit-tests_1  | 		
	Error:      	Should be true
18:34:46 unit-tests_1  | 		
	Test:       	TestCachePurgeCache
18:34:46 unit-tests_1  | 2018-04-12 18:34:46.822 UTC [bccs",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02ekl:,,,,,,,,yacovm,,,,,,,,,,master,,,true,13/Apr/18 9:33 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/20555/,,,,,,,,,,,,,,,,,,,,,,,
Integration Test: Use require instead of assert,FAB-9490,29362,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sandrav,sandrav,sandrav,12/Apr/18 6:13 PM,13/Apr/18 8:47 PM,26/Apr/18 6:50 AM,13/Apr/18 8:47 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,Package require implements the same assertions as the `assert` package but stops test execution when a test fails.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02ekd:,,,,,,,,sandrav,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Race condition in Discovery Client Send,FAB-9488,29359,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,bstasyszyn,bstasyszyn,12/Apr/18 4:27 PM,16/Apr/18 6:18 PM,26/Apr/18 6:50 AM,16/Apr/18 6:18 PM,,,,,,,,,,fabric-gossip,,,,0,,,,,,,,,"The following race condition was reported when attempting to call discovery.Client.Send concurrently on multiple peers using the same request:

WARNING: DATA RACE
Write at 0x00c42000c0e0 by goroutine 11:
  github.com/hyperledger/fabric-sdk-go/internal/github.com/hyperledger/fabric/discovery/client.(*client).Send()
      /Users/bob.stasyszyn/go/src/github.com/hyperledger/fabric-sdk-go/internal/github.com/hyperledger/fabric/discovery/client/client.go:117 +0xa7
  github.com/hyperledger/fabric-sdk-go/pkg/fab/discover.(*processor).Process()
      github.com/hyperledger/fabric-sdk-go/pkg/fab/discover/_test/_obj_test/discover.go:161 +0x4e1
  github.com/hyperledger/fabric-sdk-go/pkg/fab/discover.(*Client).Send.func1()
      github.com/hyperledger/fabric-sdk-go/pkg/fab/discover/_test/_obj_test/discover.go:73 +0xf7

Previous write at 0x00c42000c0e0 by goroutine 10:
  github.com/hyperledger/fabric-sdk-go/internal/github.com/hyperledger/fabric/discovery/client.(*client).Send()
      /Users/bob.stasyszyn/go/src/github.com/hyperledger/fabric-sdk-go/internal/github.com/hyperledger/fabric/discovery/client/client.go:117 +0xa7
  github.com/hyperledger/fabric-sdk-go/pkg/fab/discover.(*processor).Process()
      github.com/hyperledger/fabric-sdk-go/pkg/fab/discover/_test/_obj_test/discover.go:161 +0x4e1
  github.com/hyperledger/fabric-sdk-go/pkg/fab/discover.(*Client).Send.func1()
      github.com/hyperledger/fabric-sdk-go/pkg/fab/discover/_test/_obj_test/discover.go:73 +0xf7

Looks like Send is modifying the request.
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-8779,0|i02ejp:,,,,,,,,bstasyszyn,yacovm,,,,,,,,,master,,,true,12/Apr/18 5:56 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/20499/2/discovery/client/client.go,,,,,,,,,,,,,,,,,,,,,,,
end-2-end daily jobs are failing due to CI script error,FAB-9486,29354,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,sambhavdutt,sambhavdutt,12/Apr/18 2:29 PM,13/Apr/18 3:16 PM,26/Apr/18 6:50 AM,13/Apr/18 3:15 PM,,,,,,,v1.2,,,fabric-ci,,,,0,ci_failure,,,,,,,,The end-2-end daily tests are not executing due to the CI script. This issue has been addressed and will be fixed soon.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02eil:,,,,,,,,rameshthoomu,sambhavdutt,,,,,,,,,,,,,13/Apr/18 3:06 PM;sambhavdutt;The end to end daily tests are running fine for the day. ,13/Apr/18 3:16 PM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/20443/,,,,,,,,,,,,,,,,,,,,,,
"Close gzip reader, javaCC build cmd",FAB-9481,29347,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,12/Apr/18 12:58 PM,16/Apr/18 2:46 PM,26/Apr/18 6:50 AM,16/Apr/18 2:46 PM,,,,,,,v1.2,,,fabric-peer,,,,0,hygiene,,,,,,,,"While code of {{java/platoform.go}} reads the archive to determine building system:

{code}
func getBuildCmd(codePackage []byte) (string, error) {

	is := bytes.NewReader(codePackage)
	gr, err := gzip.NewReader(is)
	if err != nil {
		return """", fmt.Errorf(""failure opening gzip stream: %s"", err)
	}
	tr := tar.NewReader(gr)

	for {
		header, err := tr.Next()
		if err != nil {
			return """", errors.New(""build file not found"")
		}

		if cmd, ok := buildCmds[header.Name]; ok == true {
			return cmd, nil
		}
	}
}
{code}

it doesn't take care to close the gzip stream.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-8063,0|i02eh1:,,,,,,,,C0rWin,,,,,,,,,,master,,,true,12/Apr/18 1:01 PM;C0rWin;https://gerrit.hyperledger.org/r/20483,,,,,,,,,,,,,,,,,,,,,,,
WithTargets opt should check for nil targets,FAB-9476,29340,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sandrav,sandrav,sandrav,11/Apr/18 8:53 PM,13/Apr/18 8:47 PM,26/Apr/18 6:50 AM,13/Apr/18 8:47 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"WithTargets() option should check for nil targets and return error.

Affected clients: channel, ledger, resource management.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02efh:,,,,,,,,sandrav,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Dead link in fabric-samples/README,FAB-9475,29339,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,nnao,nnao,11/Apr/18 8:19 PM,18/Apr/18 7:24 AM,26/Apr/18 6:50 AM,18/Apr/18 7:24 AM,v1.1,,,,,,v1.2,,,fabric-docs,fabric-samples,,,0,Documentation,,,,,,,,"I found a dead link in fabric-samples/README.md.
I think the link should be ""install.html"" instead of ""samples.html"".",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02ef9:,,,,,,,,nnao,,,,,,,,,,master,,,true,11/Apr/18 8:57 PM;nnao;https://gerrit.hyperledger.org/r/c/20467/,,,,,,,,,,,,,,,,,,,,,,,
Typo in fabric-test/README,FAB-9468,29332,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,nnao,nnao,11/Apr/18 5:45 PM,11/Apr/18 10:22 PM,26/Apr/18 6:50 AM,11/Apr/18 10:22 PM,v1.1,,,,,,v1.2,,,fabric-docs,fabric-quality,,,0,Documentation,,,,,,,,"I found a typo in fabric-test/README.md. It seems to be ""make pre-setup"" instead of ""make pre_setup"" ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02edp:,,,,,,,,nnao,,,,,,,,,,master,,,true,11/Apr/18 8:11 PM;nnao;https://gerrit.hyperledger.org/r/c/20465/,,,,,,,,,,,,,,,,,,,,,,,
get-docker-images.sh failed to pull third party images,FAB-9462,29323,Bug,In Review,FAB,Fabric,software,ChristopherFerris,,,Medium,,TiantianGao,TiantianGao,TiantianGao,11/Apr/18 1:29 PM,15/Apr/18 4:58 AM,26/Apr/18 6:50 AM,,,,,,,,,,,,,,,0,,,,,,,,,"Currently we recommend developers to use [scripts/bootstrap.sh|https://github.com/hyperledger/fabric/blob/master/scripts/bootstrap.sh] to pull docker images in this [document|http://hyperledger-fabric.readthedocs.io/en/latest/install.html], while we still maintain a get-docker-images.sh script in release tar file, get-docker-images.sh does't work because the fabric docker image tags are not the same as third party docker images.

 The output of running get-docker-images.sh:
{code:java}
$ ./get-docker-images.sh
Pulling hyperledger/fabric-peer:x86_64-1.1.0
x86_64-1.1.0: Pulling from hyperledger/fabric-peer
Digest: sha256:57417699ddf50c5ebd47a9a2cc74c0324fbba0281eb1104b9ddd05a67776b01f
Status: Image is up to date for hyperledger/fabric-peer:x86_64-1.1.0
Pulling hyperledger/fabric-orderer:x86_64-1.1.0
x86_64-1.1.0: Pulling from hyperledger/fabric-orderer
Digest: sha256:0c3a3b5ecfd24b513da22bbb77da7b3f5bca9c121cc0ac5c46ba04c97c163654
Status: Image is up to date for hyperledger/fabric-orderer:x86_64-1.1.0
Pulling hyperledger/fabric-ccenv:x86_64-1.1.0
x86_64-1.1.0: Pulling from hyperledger/fabric-ccenv
Digest: sha256:07818367dc6d4264472d24b21819f9dc4e16e890d81ddfacee0341a22d72050b
Status: Image is up to date for hyperledger/fabric-ccenv:x86_64-1.1.0
Pulling hyperledger/fabric-javaenv:x86_64-1.1.0
x86_64-1.1.0: Pulling from hyperledger/fabric-javaenv
Digest: sha256:d2588c0556b6fc79131f638b02a7a77337363e2c2f38a9c47798a6d99bd2f20e
Status: Image is up to date for hyperledger/fabric-javaenv:x86_64-1.1.0
Pulling hyperledger/fabric-kafka:x86_64-1.1.0
Error response from daemon: manifest for hyperledger/fabric-kafka:x86_64-1.1.0 not found{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02ecd:,,,,,,,,TiantianGao,,,,,,,,,,,,,,15/Apr/18 4:58 AM;TiantianGao;https://gerrit.hyperledger.org/r/#/c/20441/,,,,,,,,,,,,,,,,,,,,,,,
Building go chaincode with CID requires specific vendoring for Fabric component,FAB-9458,29316,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,fredbi,fredbi,11/Apr/18 6:29 AM,11/Apr/18 6:29 AM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-installers,,,,0,,,,,,,,,"I am building a go chaincode using Fabric 1.1 and the client identity chaincode library [core/chaincode/lib/cib].

 

In order to avoid dependency conflicts, I'm used to remove the whole fabric tree from chaincode vendoring.

 

When installing the chaincode, the build fails: the lib/cid is missing from the building image in Fabric Release 1.1.

 

Temporary workaround: adapted chaincode building toolchain to specifically add this dependency to the chaincode vendoring dir.

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02eb9:,,,,,,,,fredbi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric protos have drifted,FAB-9448,29305,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,10/Apr/18 3:47 PM,11/Apr/18 2:37 PM,26/Apr/18 6:50 AM,11/Apr/18 2:37 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,The fabric protos have drifted out of sync with the proto version.  Running `make protos` against master produces changes in the proto files.  This will make reviewing CRs which modify protos more difficult.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02e9h:,,,,,,,,jyellick,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Behave feature tests failing in fabric-smoke-test-daily.,FAB-9441,29297,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,latitiah,sambhavdutt,sambhavdutt,09/Apr/18 8:34 PM,16/Apr/18 2:22 PM,26/Apr/18 6:50 AM,16/Apr/18 2:15 PM,,,,,,,v1.2,,,fabric-quality,,,,0,ci_failure,,,,,,,,"Observed the following error in fabric-smoke-test-daily,


{code:java}
00:09:39.845 ========== Behave feature and system tests...
00:09:40.751 ParserError: Failed to parse ""/w/workspace/fabric-smoke-test-daily-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/orderer.feature"": Malformed table at line 112 
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02e7x:,,,,,,,,latitiah,sambhavdutt,,,,,,,,,master,,,true,09/Apr/18 8:46 PM;latitiah;https://gerrit.hyperledger.org/r/#/c/20353/,16/Apr/18 2:22 PM;sambhavdutt;The Behave feature and system tests are & have been passing.,,,,,,,,,,,,,,,,,,,,,,
"error doing ""make protos""",FAB-9438,29293,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,muralisr,muralisr,09/Apr/18 5:08 PM,10/Apr/18 8:20 AM,26/Apr/18 6:50 AM,10/Apr/18 8:20 AM,,,,,,,,,,fabric-tools,,,,0,,,,,,,,,"doing make protos on latest master on Ubuntu errors out


{code:java}
make protos
Building docker buildenv-image
docker build  -t hyperledger/fabric-buildenv .build/image/buildenv
Sending build context to Docker daemon  26.04MB
Step 1/4 : FROM hyperledger/fabric-baseimage:x86_64-0.4.7
 ---> 390ac2e95bc7
Step 2/4 : COPY payload/protoc-gen-go /usr/local/bin/
 ---> Using cache
 ---> 05e6b4b39ef8
Step 3/4 : ADD payload/gotools.tar.bz2 /usr/local/bin/
 ---> Using cache
 ---> 65d10e6c354e
Step 4/4 : LABEL org.hyperledger.fabric.version=1.2.0-snapshot-9853d8e8       org.hyperledger.fabric.base.version=0.4.7
 ---> Using cache
 ---> d0fb28cc3256
Successfully built d0fb28cc3256
Successfully tagged hyperledger/fabric-buildenv:latest
docker tag hyperledger/fabric-buildenv hyperledger/fabric-buildenv:x86_64-1.2.0-snapshot-9853d8e8
docker tag hyperledger/fabric-buildenv hyperledger/fabric-buildenv:x86_64-latest
++ find . -name .protoroot -exec readlink -f '{}' ';'
+ PROTO_ROOT_FILES=/opt/gopath/src/github.com/hyperledger/fabric/protos/.protoroot
++ dirname /opt/gopath/src/github.com/hyperledger/fabric/protos/.protoroot
+ PROTO_ROOT_DIRS=/opt/gopath/src/github.com/hyperledger/fabric/protos
+++ for dir in '$PROTO_ROOT_DIRS'
+++ echo '-path /opt/gopath/src/github.com/hyperledger/fabric/protos -prune -o '
++ find /opt/gopath/src/github.com/hyperledger/fabric -path /opt/gopath/src/github.com/hyperledger/fabric/protos -prune -o -path /opt/gopath/src/github.com/hyperledger/fabric/vendor -prune -o -path /opt/gopath/src/github.com/hyperledger/fabric/build -prune -o -path /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim/java -prune -o -name '*.proto' -exec readlink -f '{}' ';'
+ ROOTLESS_PROTO_FILES='/opt/gopath/src/github.com/hyperledger/fabric/.build/docker/gotools/obj/src/github.com/golang/dep/gps/internal/pb/source_cache.proto
/opt/gopath/src/github.com/hyperledger/fabric/core/comm/testdata/grpc/test.proto
/opt/gopath/src/github.com/hyperledger/fabric/common/tools/protolator/testprotos/sample.proto'
++ dirname /opt/gopath/src/github.com/hyperledger/fabric/.build/docker/gotools/obj/src/github.com/golang/dep/gps/internal/pb/source_cache.proto /opt/gopath/src/github.com/hyperledger/fabric/core/comm/testdata/grpc/test.proto /opt/gopath/src/github.com/hyperledger/fabric/common/tools/protolator/testprotos/sample.proto
++ sort
++ uniq
+ ROOTLESS_PROTO_DIRS='/opt/gopath/src/github.com/hyperledger/fabric/.build/docker/gotools/obj/src/github.com/golang/dep/gps/internal/pb
/opt/gopath/src/github.com/hyperledger/fabric/common/tools/protolator/testprotos
/opt/gopath/src/github.com/hyperledger/fabric/core/comm/testdata/grpc'
+ for dir in '$ROOTLESS_PROTO_DIRS' '$PROTO_ROOT_DIRS'
+ echo Working on dir /opt/gopath/src/github.com/hyperledger/fabric/.build/docker/gotools/obj/src/github.com/golang/dep/gps/internal/pb
Working on dir /opt/gopath/src/github.com/hyperledger/fabric/.build/docker/gotools/obj/src/github.com/golang/dep/gps/internal/pb
++ find /opt/gopath/src/github.com/hyperledger/fabric/.build/docker/gotools/obj/src/github.com/golang/dep/gps/internal/pb -name '*.proto' -exec dirname '{}' ';'
++ sort
++ uniq
+ for protos in '$(find ""$dir"" -name '\''*.proto'\'' -exec dirname {} \; | sort | uniq)'
+ protoc --proto_path=/opt/gopath/src/github.com/hyperledger/fabric/.build/docker/gotools/obj/src/github.com/golang/dep/gps/internal/pb --go_out=plugins=grpc:/opt/gopath/src /opt/gopath/src/github.com/hyperledger/fabric/.build/docker/gotools/obj/src/github.com/golang/dep/gps/internal/pb/source_cache.proto
/opt/gopath/src/source_cache.pb.go: Permission deniedMakefile:404: recipe for target 'protos' failed
make: *** [protos] Error 1
{code}

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02e71:,,,,,,,,jyellick,muralisr,,,,,,,,,master,,,true,09/Apr/18 5:09 PM;jyellick;In review via:  https://gerrit.hyperledger.org/r/20343,,,,,,,,,,,,,,,,,,,,,,,
Code Coverage builds are failing in master with FAB-9363 change,FAB-9419,29271,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,09/Apr/18 1:15 AM,15/Apr/18 3:24 PM,26/Apr/18 6:50 AM,15/Apr/18 3:23 PM,,,,,,,v1.2,,,fabric-build,,,,0,ci_failure,,,,,,,,"After the merge of FAB-9363, observed code coverage builds are failing in master branch. See the below Jenkins build log.
{code:java}
[chaincode-platform] func1 -> ERRO 391 Failed to generate platform-specific docker build: Failed to pull hyperledger/fabric-ccenv:x86_64-latest: API error (404): {""message"":""manifest for hyperledger/fabric-ccenv:x86_64-latest not found""}
{code}
 

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-master-x86_64/15/console.log.gz",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00tqd:i,,,,,,,,rameshthoomu,sambhavdutt,,,,,,,,,master,,,true,"10/Apr/18 1:45 PM;sambhavdutt;Code Coverage is still failing in master branch due to the following error


{code:java}
00:08:27 unit-tests_1  | 2018-04-10 00:08:20.175 UTC [chaincode-platform] func1 -> ERRO 391 Failed to generate platform-specific docker build: Failed to pull hyperledger/fabric-ccenv:x86_64-latest: API error (404): {""message"":""manifest for hyperledger/fabric-ccenv:x86_64-latest not found""}
00:08:27 unit-tests_1  | 2018-04-10 00:08:20.175 UTC [dockercontroller] deployImage -> ERRO 392 Error building images: Failed to generate platform-specific docker build: Failed to pull hyperledger/fabric-ccenv:x86_64-latest: API error (404): {""message"":""manifest for hyperledger/fabric-ccenv:x86_64-latest not found""}
{code}

*Build Log*
https://jenkins.hyperledger.org/view/Daily/job/fabric-unit-test-coverage-daily-master-x86_64/17/consoleFull
",15/Apr/18 3:24 PM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/20547/,15/Apr/18 3:24 PM;rameshthoomu;Added `make ccenv` make target in unit-test code coverage master build,,,,,,,,,,,,,,,,,,,,,
Fabric Peer does not return RW Set as part of Block Event Transaction (Event Hub),FAB-9408,29260,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,rhegde,rhegde,08/Apr/18 1:54 PM,11/Apr/18 10:54 PM,26/Apr/18 6:50 AM,11/Apr/18 10:54 PM,,,,,,,WON'T FIX,,,,,,,0,,,,,,,,,"It is found HFC using Java Fabric SDK API always returns Zero Write Set Records found for the received Block Event Transaction from Committing Peer even though there exist write-set for that committed and valid ledger transaction.

 

Below is the method written using Fabric SDK API but *kvRWSet.getWritesCount()* always returns *0* irrespective*,* even though chain-code has some write set*.*

 
{code:java}
private boolean checkIfWriteSetExistInTransaction(TransactionActionInfo transactionActionInfo) throws InvalidProtocolBufferException
{
  	boolean ifWriteSetExist = true; 
	TxReadWriteSetInfo readWriteSetInfo = transactionActionInfo.getTxReadWriteSet(); 
 
	Iterable<NsRwsetInfo> itrRWSetInfo = readWriteSetInfo.getNsRwsetInfos();
 	for (NsRwsetInfo nsRwsetInfo : itrRWSetInfo) {
  		KvRwset.KVRWSet kvRWSet = nsRwsetInfo.getRwset();
  		if(kvRWSet.getWritesCount()==0) {
   			ifWriteSetExist=false;
   			logger.error(""There is no WriteSet Available for chancode,Skipping Post processing ""); 
  		} 
 	}
 	return ifWriteSetExist;
}
{code}
 

After discussion with [~rickr] and his comments
{code:java}
Are you getting this block via the EventHub ? That does not include the rw/set in the block. If you have a block that's from the EventHub you would need to query the block by it's block number and then parse that block for the rw/set. {code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02e11:,,,,,,,,rhegde,sanchezl,yacovm,,,,,,,,,,,,"11/Apr/18 6:09 PM;sanchezl;EventHub will never be able to return the R/W set (as designed).

In 1.1 you can use the new Deliver API to retrieve the R/W set.",,,,,,,,,,,,,,,,,,,,,,,
Typo in byfn.sh,FAB-9406,29258,Bug,In Review,FAB,Fabric,software,ChristopherFerris,,,Medium,,foolcage,foolcage,foolcage,08/Apr/18 9:37 AM,11/Apr/18 4:44 PM,26/Apr/18 6:50 AM,,,,,,,,v1.1.1,v1.2,,fabric-examples,,,,0,,,,,,,,,"I found ""depete"" in first-network/byfn.sh.

Maybe it should be ""delete"".",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02e0l:,,,,,,,,foolcage,mastersingh24,,,,,,,,,release-1.1,master,,true,08/Apr/18 10:10 AM;foolcage;https://gerrit.hyperledger.org/r/20301,11/Apr/18 4:44 PM;mastersingh24;[https://gerrit.hyperledger.org/r/20447]   - cherry pick to 1.1,,,,,,,,,,,,,,,,,,,,,,
Fabric CouchDB image should use a better approach to run as non-root user,FAB-9400,29239,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,rhegde,rhegde,06/Apr/18 7:23 PM,06/Apr/18 7:23 PM,26/Apr/18 6:50 AM,,,,,,,,,,,,,,,0,,,,,,,,,"Fabric Release - 1.0.6

Hyperledger Fabric provided Couch DB image is build in a way that it executes the ENTRYPOINT as root user and then it drops the privileges to username:groupname (couchdb:couchdb) to run CMD. couchdb:couchdb is created as part of the dockerfile and this maps (almost always) to an host UID:GID (1000:999).

Couch db process running inside the container are run as 1000:999 and this causes all its data persistence files to be created on the host mounted volume by that UID:GID identity. 
 Now - in our LDAP infrastructure, 1000:999 is already mapped to some user and hence this becomes a security issueo.

These are suggestion that can be explored -
 * By refactoring the couch db dockerfile so that it can seamlessly allow uses of `--user` option to be used during `docker run`. This is on the same line where hyperledger peer or orderer can be run using non-root user.

This was the security finding on this subject
{code:java}
Typically, the user ID of a process running within a Docker container is the same as if it were outside the container. Should one of these processes be able to break out of the container onto the host, it would be running as the root user and would have complete control over the host.{code}
 * Enhance the hyperledger fabric couch db image such that it supports accepting UID:GID as a docker environment variable. This will allow passing the preferred host UID:GID rather currently assigned 1000:999.
 There is similar patch added to apache maintained couchdb dockerfile for similar reason via [https://github.com/apache/couchdb-docker/issues/53]

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02dwd:,,,,,,,,rhegde,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode containers should support running as non-root user,FAB-9394,29233,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,rhegde,rhegde,06/Apr/18 6:25 PM,07/Apr/18 1:00 PM,26/Apr/18 6:50 AM,,,,,,,,,,,,,,,0,,,,,,,,,"Fabric-Release 1.0.6

Hyperledger Fabric Peer Docker Image can be run as a non-root user. However the chaincode container created by non-root running peer container is with root privileges.

This is logged as a security finding:
{code:java}
Typically, the user ID of a process running within a Docker container is the same as if it were outside the container. Should one of these processes be able to break out of the container onto the host, it would be running as the root user and would have complete control over the host.{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02dv1:,,,,,,,,mastersingh24,rhegde,,,,,,,,,,,,,"07/Apr/18 1:00 PM;mastersingh24;[~rhegde] - For v1.0.x release, there's not much we can do within the code itself as it would require changes too deep for a fix pack.  With v1.2 (next release) we can make some modifications to directly support this from the peer.

For v1.0.x, the best thing to do will be to create your own container for Go chaincode image and then set CORE_CHAINCODE_GOLANG_RUNTIME (or chaincode.golang.runtime in core.yaml) to that image.

 

[~sanchezl]",,,,,,,,,,,,,,,,,,,,,,,
peer deliver client crashes when it is started and stopped immediately after,FAB-9389,29208,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,06/Apr/18 11:08 AM,07/Apr/18 9:09 AM,26/Apr/18 6:50 AM,07/Apr/18 9:09 AM,,,,,,,v1.1.1,v1.2,,fabric-peer,,,,0,,,,,,,,,"A user posted on rocket chat the following stack trace:

{code}
2018-04-06 09:45:37.662 UTC [deliveryClient] StopDeliverForChannel -> DEBU 1ea19 This peer will stop pass blocks from orderer service to other peers
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x20 pc=0xaeb2db]

`goroutine 121267 [running]:
github.com/hyperledger/fabric/core/deliverservice.(*deliverServiceImpl).StartDeliverForChannel.func1(0xc4357724e0, 0xc4256a4ba0, 0x8, 0xc42434a3a0)
/opt/gopath/src/github.com/hyperledger/fabric/core/deliverservice/deliveryclient.go:162 +0x5b
created by github.com/hyperledger/fabric/core/deliverservice.(*deliverServiceImpl).StartDeliverForChannel
/opt/gopath/src/github.com/hyperledger/fabric/core/deliverservice/deliveryclient.go:161 +0x672`

{code}


From looking at the code, this could happen if the deliver client is started and immediately afterwards - stopped. The goroutine not only doesn't lock, but also may hit a nil pointer. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02dq5:,,,,,,,,yacovm,,,,,,,,,,release-1.1,master,,true,"06/Apr/18 11:44 AM;yacovm; 
||master|release-1.1.x|
|[https://gerrit.hyperledger.org/r/#/c/20237/]|[https://gerrit.hyperledger.org/r/#/c/20239/]|

Should I cherry pick to 1.0.x ? [~mastersingh24] ",,,,,,,,,,,,,,,,,,,,,,,
Marbles sample chaincode needs to remove references to Fauxton ,FAB-9386,29205,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,pandrejko,pandrejko,05/Apr/18 8:52 PM,05/Apr/18 9:12 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-samples,,,,0,,,,,,,,,"[https://github.com/hyperledger/fabric-samples/blob/master/chaincode/marbles02/go/marbles_chaincode.go]

According to [~AdnanChoudhury], we need to remove all references to the 'data.' wrapper from the Marbles sample code as this is no longer required.

This would involve:

remove the 'data.'  prefix (wrapper) in the sample queries for example on line 79, 82, 89, 92 change:
|// Example curl command line to define index in the CouchDB channel_chaincode database|
|// curl -i -X POST -H ""Content-Type: application/json"" -d ""\{\""index\"":\{\""fields\"":[\""*data*.docType\"",\""*data*.owner\""]},\""name\"":\""indexOwner\"",\""ddoc\"":\""indexOwnerDoc\"",\""type\"":\""json\""}"" [http://hostname:port/myc1_marbles/_index|http://hostnameport/]|

to
|// Example curl command line to define index in the CouchDB channel_chaincode database|
|// curl -i -X POST -H ""Content-Type: application/json"" -d ""\{\""index\"":\{\""fields\"":[\""docType\"",\""owner\""]},\""name\"":\""indexOwner\"",\""ddoc\"":\""indexOwnerDoc\"",\""type\"":\""json\""}"" [http://hostname:port/myc1_marbles/_index|http://hostnameport/]|

//

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02dph:,,,,,,,,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
GRPC connection shouldn't be closed in discovery client,FAB-9385,29204,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,bstasyszyn,bstasyszyn,bstasyszyn,05/Apr/18 6:25 PM,06/Apr/18 2:59 PM,26/Apr/18 6:50 AM,06/Apr/18 2:59 PM,,,,,,,,,,fabric-gossip,,,,0,,,,,,,,,"The service discovery client currently closes the GRPC connection provided by the caller. This makes it impossible to implement connection caching. Since the caller provides the connection, the caller should be responsible for closing the connection.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-8779,0|i02dp9:,,,,,,,,bstasyszyn,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Resolve licensing issues discovered by Fossology scan,FAB-9383,29201,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,tkuhrt,tkuhrt,05/Apr/18 4:32 PM,05/Apr/18 4:35 PM,26/Apr/18 6:50 AM,,,,,,,,,,,,,,,0,,,,,,,,,"h1. Context

Hyperledger Fabric source files (from April 3, 2018) were scanned by The Linux Foundation utilizing Fossology to determine license for files contained in the following repositories:
 * [https://gerrit.hyperledger.org/r/fabric]

 * [https://gerrit.hyperledger.org/r/fabric-baseimage]

 * [https://gerrit.hyperledger.org/r/fabric-ca]

 * [https://gerrit.hyperledger.org/r/fabric-chaincode-evm]

 * [https://gerrit.hyperledger.org/r/fabric-chaincode-java]

 * [https://gerrit.hyperledger.org/r/fabric-chaincode-node]

 * [https://gerrit.hyperledger.org/r/fabric-chaintool]

 * [https://gerrit.hyperledger.org/r/fabric-docs]

 * [https://gerrit.hyperledger.org/r/fabric-samples]

 * [https://gerrit.hyperledger.org/r/fabric-sdk-go]

 * [https://gerrit.hyperledger.org/r/fabric-sdk-java]

 * [https://gerrit.hyperledger.org/r/fabric-sdk-node]

 * [https://gerrit.hyperledger.org/r/fabric-sdk-py]

 * [https://gerrit.hyperledger.org/r/fabric-sdk-rest]

 * [https://gerrit.hyperledger.org/r/fabric-test]

 * [https://gerrit.hyperledger.org/r/fabric-test-resources]

 * [https://gerrit.hyperledger.org/r/homebrew-fabric]

 

 

 

From the Hyperledger Charter ([https://www.hyperledger.org/about/charter]) Section 13, all files that are included in Hyperledger projects should either be licensed with the Apache License, Version 2.0 for source code or Creative Commons Attribution 4.0 International License for documentation.
h1. Expected Behavior

All files should have license text included either directly or via a LICENSE file in the directory for files that cannot be modified to include a comment with the license text (think binary files).
h1. Actual Behavior

See attached results of the scan.
h1. To Fix

There are now three subdirectories in /fabric/vendor/[github.com/docker/docker/contrib/|http://github.com/docker/docker/contrib/] that contain LICENSE files with copies of the GPL-2.0. These directories don't contain any other code, so I'm not clear why the GPL licenses are being included, but these should be removed promptly if possible. 
 * Note that these appear to be present in the master branch (see [https://github.com/hyperledger/fabric/tree/master/vendor/github.com/docker/docker/contrib/selinux-fedora-24/docker-engine-selinux] for example) but not in the release-1.1 branch.

The package metadata files (generally bower.json / package.json for NPM) incorrectly describe the Hyperledger Fabric as licensed under ISC, rather than Apache. NPM's default is ISC so this is a common mistake. I've highlighted these instances in the attached reports. These files should be changed from ISC to Apache-2.0.

For new files with Attribution license, ideally, we would replace those with Apache 2.0 files and dependencies; otherwise, we will need to go to the Hyperledger Governing board for an exception.

There is one file that contains incomplete license text. We should either expand that to contain the whole license text or use the SPDX Identifier.

For _ALL_ files that do not have a license included, the first step is to check with the contributor to ensure that the file can be released as Apache 2.0 or CC-BY-4.0. If the contributor agrees, the file should be modified to include the license. You can utilize [SPDX Identifiers |https://spdx.org/]to represent the correct license.

For those non-modifiable files, you will need to include a LICENSE file in the directory containing the license that the files are covered by. Here are a few examples of how this might be done:
* [OPNFV Apex|https://github.com/opnfv/apex/blob/master/LICENSE.rst] -- this is an example of explicitly calling out Apache 2.0 for source code and CC-BY-4.0 for docs. 
* [containerd|https://github.com/containerd/containerd/blob/master/README.md] -- see notice at bottom. This also calls out the separate Apache / CC-BY-4.0 docs, and explicitly references the ""docs"" directory.
h1. *Before closing this bug, please let me know that you have made the above changes. I will then run the code through Fossology again* *to ensure the changes.*",,,,,,,,,,,,,,,,,,,,05/Apr/18 4:32 PM;tkuhrt;fabric-2018-04.xlsx;https://jira.hyperledger.org/secure/attachment/14856/fabric-2018-04.xlsx,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02dot:,,,,,,,,tkuhrt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NodeChaincode - handle large data,FAB-9382,29197,Bug,Duplicate,FAB,Fabric,software,ChristopherFerris,,,Medium,,,harrisob@us.ibm.com,harrisob@us.ibm.com,05/Apr/18 3:56 PM,05/Apr/18 4:04 PM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-chaincode-node,,,,0,,,,,,,,,"Need to tell GRPC to allow for large data by setting

grpc.max_send_message_length
grpc.max_receive_message_length

Will set to unlimited by default",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02dnx:,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,,,,,05/Apr/18 4:03 PM;harrisob@us.ibm.com;dup of FAB-9378,,,,,,,,,,,,,,,,,,,,,,,
Segmentation violation error while installing chaincode,FAB-9379,29194,Bug,Monitor / On Hold,FAB,Fabric,software,ChristopherFerris,,,Medium,,,rameshthoomu,rameshthoomu,05/Apr/18 3:35 PM,22/Apr/18 2:11 PM,26/Apr/18 6:50 AM,,v1.2,,,,,,v1.2,,,fabric-build,,,,0,ci_failure,,,,,,,,"segmentation violation error observed while installing chaincode. This issue is reproducing only in go 1.10 version.
{code:java}
fatal error: unexpected signal during runtime execution
00:09:43.455 [signal SIGSEGV: segmentation violation code=0x1 addr=0xe5 pc=0x7f82f41123f8]
{code}
 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02dn9:,,,,,,,,ChristopherFerris,denyeart,jyellick,rameshthoomu,,,,,,,,,,,"05/Apr/18 4:18 PM;rameshthoomu;Tested byfn and efyn tests on on baseimage 0.4.6 (Go Version 1.9.2) and 0.4.7 (Go Version 1.10). Below are the observations

- failed to install on 0.4.7 (go version 1.10) but the same worked on 0.4.6","05/Apr/18 7:33 PM;jyellick;I'm also observing this failure in the e2e with the latest master.


{noformat}
2018-04-05 19:31:57.833 UTC [golang-platform] func1 -> DEBU 041 vendoring src/github.com/hyperledger/fabric/examples/chaincode/go/example02/chaincode.go -> src/github.com/hyperledger/fabric/examples/chaincode/go/example02/cmd/vendor/github.com/hyperledger/fabric/examples/chaincode/go/example02/chaincode.go
2018-04-05 19:31:57.833 UTC [container] WriteFileToPackage -> DEBU 042 Writing file to tarball: src/github.com/hyperledger/fabric/examples/chaincode/go/example02/cmd/main.go
2018-04-05 19:31:57.835 UTC [container] WriteFileToPackage -> DEBU 043 Writing file to tarball: src/github.com/hyperledger/fabric/examples/chaincode/go/example02/cmd/vendor/github.com/hyperledger/fabric/examples/chaincode/go/example02/chaincode.go
fatal error: unexpected signal during runtime execution
[signal SIGSEGV: segmentation violation code=0x1 addr=0xe5 pc=0x7f770f5fa3f8]

runtime stack:
runtime.throw(0xf46ef8, 0x2a)
	/opt/go/src/runtime/panic.go:619 +0x81
runtime.sigpanic()
	/opt/go/src/runtime/signal_unix.go:372 +0x28e

goroutine 1 [syscall]:
runtime.cgocall(0xbdc520, 0xc4201eea98, 0xf4547c)
	/opt/go/src/runtime/cgocall.go:128 +0x64 fp=0xc4201eea50 sp=0xc4201eea18 pc=0x4021a4
os/user._Cfunc_mygetpwuid_r(0x3e8, 0xc4202a8030, 0x2623e80, 0x400, 0xc420428010, 0x0)
	_cgo_gotypes.go:170 +0x4d fp=0xc4201eea98 sp=0xc4201eea50 pc=0x905abd
os/user.lookupUnixUid.func1.1(0x7f77000003e8, 0xc4202a8030, 0x2623e80, 0x400, 0xc420428010, 0xc4201eeb28)
	/opt/go/src/os/user/cgo_lookup_unix.go:100 +0x13f fp=0xc4201eead8 sp=0xc4201eea98 pc=0x90769f
os/user.lookupUnixUid.func1(0x10)
	/opt/go/src/os/user/cgo_lookup_unix.go:100 +0x50 fp=0xc4201eeb18 sp=0xc4201eead8 pc=0x907740
os/user.retryWithBuffer(0xc42036a150, 0xc4201eec08, 0xc42036a150, 0xe8e880)
	/opt/go/src/os/user/cgo_lookup_unix.go:253 +0x3b fp=0xc4201eeb78 sp=0xc4201eeb18 pc=0x906b6b
os/user.lookupUnixUid(0x3e8, 0x0, 0x0, 0x0)
	/opt/go/src/os/user/cgo_lookup_unix.go:96 +0x130 fp=0xc4201eec40 sp=0xc4201eeb78 pc=0x905ff0
os/user.lookupUserId(0xc42040c060, 0x4, 0x0, 0x46bfc4, 0x3e8)
	/opt/go/src/os/user/cgo_lookup_unix.go:86 +0x73 fp=0xc4201eec78 sp=0xc4201eec40 pc=0x905e83
os/user.LookupId(0xc42040c060, 0x4, 0x4, 0x0, 0x0)
	/opt/go/src/os/user/lookup.go:41 +0x51 fp=0xc4201eecc8 sp=0xc4201eec78 pc=0x905481
archive/tar.statUnix(0xff8b20, 0xc4202d8000, 0xc4204980e0, 0x16f6860, 0xc420000180)
	/opt/go/src/archive/tar/stat_unix.go:39 +0x4c1 fp=0xc4201eed48 sp=0xc4201eecc8 pc=0x9111b1
archive/tar.FileInfoHeader(0xff8b20, 0xc4202d8000, 0xc420474240, 0x5a, 0x0, 0x0, 0x7f771e246c90)
	/opt/go/src/archive/tar/common.go:699 +0x491 fp=0xc4201eeec8 sp=0xc4201eed48 pc=0x90a681
github.com/hyperledger/fabric/core/container/util.WriteStreamToPackage(0xfe19c0, 0xc42029c000, 0xc420474240, 0x5a, 0xc4204681e0, 0x97, 0xc42046e380, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/container/util/writer.go:181 +0x18b fp=0xc4201ef080 sp=0xc4201eeec8 pc=0x9512eb
github.com/hyperledger/fabric/core/container/util.WriteFileToPackage(0xc420474240, 0x5a, 0xc4204681e0, 0x97, 0xc42046e380, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/container/util/writer.go:171 +0x3aa fp=0xc4201ef198 sp=0xc4201ef080 pc=0x9510ba
github.com/hyperledger/fabric/core/chaincode/platforms/golang.(*Platform).GetDeploymentPayload(0x171ae58, 0xc420341ce0, 0x0, 0x0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:469 +0x1346 fp=0xc4201ef9b8 sp=0xc4201ef198 pc=0x9595d6
github.com/hyperledger/fabric/core/chaincode/platforms.GetDeploymentPayload(0xc420341ce0, 0x0, 0x0, 0xf241ec, 0xe, 0xc4202909c0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/platforms/platforms.go:88 +0x89 fp=0xc4201efa00 sp=0xc4201ef9b8 pc=0x95eb19
github.com/hyperledger/fabric/core/container.GetChaincodePackageBytes(0xc420341ce0, 0x0, 0x0, 0xc4203b88c6, 0x6, 0xc42012b31c)
	/opt/gopath/src/github.com/hyperledger/fabric/core/container/vm.go:100 +0x96 fp=0xc4201efa48 sp=0xc4201efa00 pc=0xb6a956
github.com/hyperledger/fabric/peer/chaincode.getChaincodeDeploymentSpec(0xc420341ce0, 0xc420341c01, 0x0, 0x0, 0xf1f000)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/common.go:57 +0x115 fp=0xc4201efab8 sp=0xc4201efa48 pc=0xb83c45
...
{noformat}
","08/Apr/18 3:08 AM;rameshthoomu;Observed the same error in fabric-chaincode-node integration tests. see thebuild logs here [https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-node-verify-x86_64/171/console.log.gz]

[~sanchezl]","08/Apr/18 10:25 PM;denyeart;[~rameshthoomu] [~jyellick] Does the problem always happen, or intermittent?

I'm wondering why we're not seeing the problem in the smoke tests?

 ",16/Apr/18 3:18 PM;rameshthoomu;Not seeing this issue now..,22/Apr/18 2:11 PM;ChristopherFerris;has this been resolved?,,,,,,,,,,,,,,,,,,
Error running make dist-clean all on new system,FAB-9372,29187,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,sheehan,sheehan,05/Apr/18 2:10 PM,10/Apr/18 12:23 PM,26/Apr/18 6:50 AM,,v1.1,,,,,,v1.2,,,fabric-build,,,,0,,,,,,,,,"OS: Ubuntu

Commit: b70b560f9b47dc1a2a6158926472b562b20a9044

Notes: This was a brand new system. I followed the docs, installed Go, cloned Fabric

 

Steps:

Run

make dist-clean all

 

Expected: Build should be succcessful

 

Actual: Failed with 
{code:java}
make dist-clean all
Installing chaintool
curl -fL https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/hyperledger-fabric/chaintool-1.1.0/hyperledger-fabric-chaintool-1.1.0.jar > .build/bin/chaintool
% Total % Received % Xferd Average Speed Time Time Time Current
Dload Upload Total Spent Left Speed
100 16.4M 100 16.4M 0 0 5616k 0 0:00:03 0:00:03 --:--:-- 5253k
chmod +x .build/bin/chaintool
Creating .build/goshim.tar.bz2
mkdir -p .build/image/ccenv/payload
cp .build/docker/gotools/bin/protoc-gen-go .build/bin/chaintool .build/goshim.tar.bz2 .build/image/ccenv/payload
cp: cannot stat '.build/docker/gotools/bin/protoc-gen-go': No such file or directory
Makefile:277: recipe for target '.build/image/ccenv/payload' failed
make: *** [.build/image/ccenv/payload] Error 1
{code}
I ran again and it failed with the same error. I backed up to commit c4c87ee7130649e419f942fd94fdc02ae92e0cb4 thinking that maybe commit 0f5b1850ea8d6080ceac523adf8a530ac3720929 was the cause. The build was successful. I moved back to commit b70b560f9b47dc1a2a6158926472b562b20a9044 and the build now succeeds, even after a `make clean-all` and deleting the .build directory. 

 

[~sykesm] - could you take a quick look at the error to see if it's potentially related to your gotool changes?",,,,,,,,,,,,,,,,,,,,10/Apr/18 12:22 PM;sykesm;build.log;https://jira.hyperledger.org/secure/attachment/14874/build.log,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02dlp:,,,,,,,,sheehan,sykesm,,,,,,,,,,,,,"10/Apr/18 12:23 PM;sykesm;I'm not seeing an issue on current master. Build log attached.

 ",,,,,,,,,,,,,,,,,,,,,,,
Permission denied error while creating .cache/go-build directory,FAB-9369,29184,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,rameshthoomu,rameshthoomu,05/Apr/18 2:07 PM,10/Apr/18 2:27 PM,26/Apr/18 6:50 AM,,v1.2,,,,,,v1.2,,,fabric-build,,,,0,ci_failure,,,,,,,,"Observed Permission denied error while creating .cache/go-build directory in jenkins jobs
 go: disabling cache (/.cache/go-build) due to initialization failure: mkdir /.cache: permission denied
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02dl1:,,,,,,,,rameshthoomu,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Typescript compiling in Fabric-SDK-Node,FAB-9364,29176,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,zhaochy,Paperman,Paperman,05/Apr/18 10:09 AM,13/Apr/18 1:49 AM,26/Apr/18 6:50 AM,13/Apr/18 1:49 AM,,,,,,,,,,fabric-sdk-node,,,,0,v1.1,,,,,,,,"There is an issue with the fabric-client node sdk. When you compile the project with a typescript compiler. The app dosen't recognize the class names of the objects. For example:

let peer:Peer = new Peer();

console.log(peer.constructor.name) == """" --> So we got an empty string

The problem is the declaration of the class Peer:

{color:#cc7832}var {color}Peer = {color:#cc7832}class {color}{color:#cc7832}extends {color}Remote

need to be changed into:

{color:#cc7832}var {color}Peer = {color:#cc7832}class {color}Peer {color:#cc7832}extends {color}Remote

Otherwise the compiler dosen't understand the syntax and the class name will be empty.",We builded the hole environement with the fabric 1.1 release. Everything else works as expected.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02dj9:,,,,,,,,Paperman,zhaochy,,,,,,,,,release-1.1,master,,true,"12/Apr/18 1:55 AM;zhaochy;https://gerrit.hyperledger.org/r/#/c/20299/ for master
https://gerrit.hyperledger.org/r/#/c/20361/ for release 1.1",,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - connection should use legacy grpc setting,FAB-9337,29147,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,04/Apr/18 4:35 PM,13/Apr/18 1:48 AM,26/Apr/18 6:50 AM,13/Apr/18 1:48 AM,,,,,,,v1.1.1,v1.2,,"fabric-ca, fabric-sdk-node",,,,0,,,,,,,,,"When user tries to set the GRPC settings by using grpc-max-receive-message-length or grpc-max-send-message-length settings they will not be taken and the NodeSDK default settings from the default.json will be used.

grpc.max_receive_message_length: -1

grpc.max_send_message_length: -1

The Remote.js should be modified to use the legacy settings from 1.0 first then use the real grpc names for the settings to be fully backwards compatible.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02dd1:,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,master,,,true,07/Apr/18 8:12 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/20293/,,,,,,,,,,,,,,,,,,,,,,,
'chaintool build -p' doesnt work for system chaincode,FAB-9327,29120,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,greg.haskins,greg.haskins,greg.haskins,03/Apr/18 9:02 PM,22/Apr/18 1:50 PM,26/Apr/18 6:50 AM,21/Apr/18 11:42 AM,,,,,,,,,,fabric-chaintool,,,,0,,,,,,,,,There is a 'FIXME' in the code noting that a limitation exists w.r.t. running 'chaintool build' for system chaincode outside the CWD of the SCC.  We should fix this to respect the -p flag.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02d7h:,,,,,,,,greg.haskins,,,,,,,,,,master,,,true,03/Apr/18 9:03 PM;greg.haskins;https://github.com/hyperledger/fabric-chaintool/blob/f10d88fc05b3ae60be2cda596778979072b9c14f/src/chaintool/platforms/golang/system.clj#L25,03/Apr/18 9:07 PM;greg.haskins;https://gerrit.hyperledger.org/r/#/c/20129/,,,,,,,,,,,,,,,,,,,,,,
Panic when DialContext called on closed caching connector,FAB-9321,29114,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,bstasyszyn,bstasyszyn,bstasyszyn,03/Apr/18 6:06 PM,03/Apr/18 9:07 PM,26/Apr/18 6:50 AM,03/Apr/18 9:07 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"A panic 'send on closed channel' results when DialContext is called after the CachingConnector has been closed:

 
panic(0x4610dc0, 0x4750a60)
    /usr/local/go/src/runtime/panic.go:491 +0x283
github.com/hyperledger/fabric-sdk-go/pkg/fab/comm.(*CachingConnector).updateJanitor(0xc4201e2230, 0xc4201d2190)
    /Users/bob.stasyszyn/go/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/comm/connector.go:276 +0x1a0
github.com/hyperledger/fabric-sdk-go/pkg/fab/comm.(*CachingConnector).shutdownConn(0xc4201e2230, 0xc4201d2190)
    /Users/bob.stasyszyn/go/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/comm/connector.go:244 +0x1aa
github.com/hyperledger/fabric-sdk-go/pkg/fab/comm.(*CachingConnector).loadConn(0xc4201e2230, 0xc420019090, 0xf, 0xc4201d82b0, 0x1)
    /Users/bob.stasyszyn/go/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/comm/connector.go:162 +0x1fc
github.com/hyperledger/fabric-sdk-go/pkg/fab/comm.(*CachingConnector).DialContext(0xc4201e2230, 0x4a55a40, 0xc4201e00c0, 0xc420019090, 0xf, 0xc420189ee8, 0x1, 0x1, 0x1, 0x1, ...)
    /Users/bob.stasyszyn/go/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/comm/connector.go:106 +0x115
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02d65:,,,,,,,,bstasyszyn,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
core/chaincode test failures in CI,FAB-9311,29104,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,sykesm,sykesm,03/Apr/18 4:00 PM,03/Apr/18 4:00 PM,26/Apr/18 6:50 AM,,,,,,,,,,,,,,,0,flakes,,,,,,,,"Test failure in build: FAIL github.com/hyperledger/fabric/core/chaincode

Hard to say what the root cause is. May be
{code:java}
ExecuteWithErrorFilter shimTestCC error: timeout expired while executing transaction{code}
 [https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/718/consoleFull]

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02d3x:,,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Endorsement Policy Ignored If No Writeset for Transaction,FAB-9295,29088,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,rhegde,rhegde,02/Apr/18 5:58 PM,12/Apr/18 11:32 AM,26/Apr/18 6:50 AM,12/Apr/18 11:32 AM,v1.0.6,,,,,,v1.2,,,fabric-peer,,,,0,,,,,,,,,"Fabric Release 1.0.4.

It is observed a transaction that does not have write-set is committed to the ledger by the Peer as a valid transaction even though it does not meet the Endorsement Policy.

 

This can result in an attack if the client is loosely coded like for below scenario:

Rogue Participant on the channel can manipulate proposal data and send a query operation to its peer for Endorsement and then push it to the orderer to be accepted on the block chain for that channel. A HFC client relying only on proposal data (manipulated in this case) + ledger valid flag (transaction accepted by Peer) will perform unwarranted operations in it own/client data store.

 

This needs to be fixed in Peer for transaction that does not have write-set + does not meet the Endorsement Policy.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02d1h:,,,,,,,,ales,mastersingh24,rhegde,yacovm,,,,,,,,,,,"08/Apr/18 3:52 PM;mastersingh24;[~rhegde] I looked through the code and did not find any path which would result in a transaction being marked as valid if it does not satisfy the endorsement policy.  Note that all transactions will still be included in the block but you can check the status of the transaction in the block metadata.

[~jyellick] [~ales] Can you guys take a look and make sure I did not miss anything?","09/Apr/18 10:22 AM;ales;The validator code indeed only verifies endorsement policies for a chaincode if that chaincode is being written to. In particular
 # namespaces that are being written to are collected here ([https://github.com/hyperledger/fabric/blob/release-1.1/core/committer/txvalidator/validator.go#L680-L682])
 # for each of those, the appropriate VSCC is called ([https://github.com/hyperledger/fabric/blob/release-1.1/core/committer/txvalidator/validator.go#L757-L784])

If a transaction contains a read-write set for a namespaces, and that read-write set only contains read dependencies (and no writes), then the VSCC for that namespace isn't called. As an example, think of LSCC: every transaction contains a read dependency on a KVS key belonging to the LSCC namespace, but only transactions that write to the LSCC namespace are validated against the custom VSCC for LSCC.

[~rhegde] could you please clarify what attack you have in mind? So far I can see how a peer that doesn't comply with a chaincode's endorsement policy may respond to queries on that chaincode. If this is the attack, I'm tempted to say this is WAD, since a peer is free to respond to chaincode queries to any clients it trusts, free of any fabric security mechanisms (unless encryption or SideDB are employed to protect confidentiality). I'm probably missing something, could you elaborate in more details pls?","10/Apr/18 4:16 PM;rhegde;Currently the read-write set records are not passed by the committing peer to the client (FAB-9408). So HFC Client in our case 1.0.x passes a JSON information during Endorsement Proposal processing that will help client to understand the action to be taken whenever a ledger transaction is marked as valid.

Rogue Client can now manipulate JSON information and can send to a chaincode business invoke API (apart from query, we use some business invoke API for relaying the information across joined participant to the channel) that does not produces write-set. Client upon receiving this endorsement proposal response will broadcast to the orderer to be delivered to the peer. Peer will not enforce endorsement policy validation for the channel and hence the transaction will be marked as valid. This block transaction will be evented out to every joined participant for that channel to perform action on the (falsely) marked valid ledger transaction using the manipulated JSON information that is passed by rogue client. There is no damage done to the fabric ledger but to the client store across participants joined to that channel.

There are other FABs like -FAB-6816- which is worsening this problem.",11/Apr/18 11:05 AM;mastersingh24;[~rhegde] - do clients include this JSON parameter in query requests as well?,11/Apr/18 4:01 PM;rhegde;yes Gari. Client will send the JSON request object where chaincode as recipient will parse only the expected JSON object (and ignore rest) and return a response to it.,,,,,,,,,,,,,,,,,,,
add config to .gitignore,FAB-9291,29081,Bug,Invalid,FAB,Fabric,software,ChristopherFerris,,,Medium,,ChristopherFerris,ChristopherFerris,ChristopherFerris,02/Apr/18 1:35 PM,02/Apr/18 1:37 PM,26/Apr/18 6:50 AM,,v1.1,,,,,,,,,fabric-samples,,,,0,,,,,,,,,config directory downloaded is not in .gitignore - should be,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02d05:,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make fails with missing copyright for .gitiginore,FAB-9289,29078,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,sykesm,sykesm,02/Apr/18 9:35 AM,02/Apr/18 3:40 PM,26/Apr/18 6:50 AM,02/Apr/18 3:40 PM,,,,,,,,,,,,,,0,,,,,,,,,"The following files are missing SPDX-License-Identifier headers:
.gitreview

Please replace the Apache license header comment text with:
SPDX-License-Identifier: Apache-2.0

Checking committed files for traditional Apache License headers ...
The following files are missing traditional Apache 2.0 headers:
.gitreview
Fatal Error - All files must have a license header
make: *** [license] Error 1",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02czh:,,,,,,,,sykesm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"WIth new gotools.mk, docs saying add ~/go/bin to PATH are now wrong.",FAB-9288,29077,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,rpjday,rpjday,02/Apr/18 9:12 AM,03/Apr/18 9:05 PM,26/Apr/18 6:50 AM,03/Apr/18 9:05 PM,,,,,,,v1.2,,,fabric-build,,,,0,,,,,,,,,"Until recently, ""make gotools"" automatically installed the eight executables in $(GOPATH)/bin, which is why the documentation instructed the user to make sure that directory was on their search path.

With the recent introduction of ""gotools.mk"", those executables are now simply placed in ./.build/gotools/bin, which I'm fairly sure is not part of the user's search path, suggesting that anything that required those to be on the search path will now fail.

As a perfect example:

*$ make spelling*
*Checking changed go files for spelling errors ...*
*xargs: misspell: No such file or directory*
*spell checker passed*

So what's the resolution for this?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02cz9:,,,,,,,,rpjday,sykesm,,,,,,,,,master,,,true,02/Apr/18 12:23 PM;sykesm;https://gerrit.hyperledger.org/r/20071,"02/Apr/18 12:24 PM;sykesm;The install/copy to $GOPATH/bin that was in the gotools-install target was unintentionally changed. Even though the previous mechanism made broken assumptions, the current behavior is just as (if not more) disruptive.

Adding ~/go/bin to the path is not always the right thing so if that's what the docs are saying, they're making assumptions.

Barring any bikeshedding over names (that will eventually result in a change), you can indicate where to install local go tools by setting the GOTOOLS_BINDIR variable when building.
{code:java}
make gotools GOTOOLS_BINDIR=$HOME/bin{code}",,,,,,,,,,,,,,,,,,,,,,
Index out of range error may happen on msp.ProviderTypeToString,FAB-9286,29075,Bug,In Review,FAB,Fabric,software,ChristopherFerris,,,Medium,,niuzhenguo,niuzhenguo,niuzhenguo,02/Apr/18 8:49 AM,02/Apr/18 4:15 PM,26/Apr/18 6:50 AM,,,,,,,,,,,,,,,0,,,,,,,,,"When call ProviderTypeToString with an id equal to the length of mspTypeStrings, it will raise index out of range error. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02cyt:,,,,,,,,ChristopherFerris,niuzhenguo,,,,,,,,,,,,,02/Apr/18 4:15 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/c/20065/,,,,,,,,,,,,,,,,,,,,,,,
[Node-SDK] Loss of custom event,FAB-9284,29072,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,zhaochy,jyg,jyg,01/Apr/18 7:07 PM,04/Apr/18 1:12 AM,26/Apr/18 6:50 AM,04/Apr/18 1:12 AM,v1.1,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"I happened to lose some custom events (SetEvent) when running a multi-user concurrency test. As the blocklistener was catching the event, I investigated the issue in EventHub.js.

In _{color:#59afe1}processChainCodeOnEvents(block){color} , I modified the following piece of code:

 if (!cbtable) \{ 
                        return; 
                    } 
  cbtable.forEach(function(cbe) \{ 
          if (cbe.eventNameFilter.test(ccEvent.event_name)) \{ 
                         cbe.onEvent(ccEvent); 
                  } 
     });

The return occured and exited the block and consequently, the rest of events could not be processed.   That is why I could not get the events in my code.     ccEvent.chaincode_id was apparently undefined when this happens.

I replaced the code by the following to make it work:

if (cbtable) \{
           cbtable.forEach(function(cbe) \{
             if (cbe.eventNameFilter.test(ccEvent.event_name)) \{
               cbe.onEvent(ccEvent);
             }
      });
 }

not sure if this is correct behavior.  But at least, the rest of events in the block can be properly processed. 

 Would appreciate expert point of view on this.

 

 ","Hyperledger Fabric 1.1

Fabric node-sdk 1.1",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02cy5:,,,,,,,,jyg,zhaochy,,,,,,,,,master,,,true,"02/Apr/18 2:29 AM;zhaochy;[~harrisob@us.ibm.com]
seems we need to change 

{code:javascript}
if (!cbtable) {
	return;
}
{code}

to

{code:javascript}
if (!cbtable) {
	continue;
}
{code}
",02/Apr/18 2:40 AM;zhaochy;https://gerrit.hyperledger.org/r/20059,,,,,,,,,,,,,,,,,,,,,,
"check_license.sh should now exclude ""^.build/"", not ""^build/"".",FAB-9281,29069,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rpjday,rpjday,rpjday,01/Apr/18 9:18 AM,01/Apr/18 9:51 PM,26/Apr/18 6:50 AM,01/Apr/18 9:51 PM,,,,,,,v1.2,,,fabric-build,,,,0,,,,,,,,,"Given recent renaming of ""build/"" to "".build/"", check_license.sh should be updated.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02cxh:,,,,,,,,rpjday,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Private data modified if in json format,FAB-9276,29064,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,ericmvaughn,ericmvaughn,31/Mar/18 5:25 PM,16/Apr/18 9:20 PM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-ledger,,,,0,,,,,,,,,"If you store a file in the private DB that is in json format, it gets modified if couchDB is being used. 
 
for example
\{""test"": ""json""}

7b 22 74 65 73 74 22 3a {color:#ff0000}20{color} 22 6a 73 6f 6e 22 7d
 
gets changed to
\{""test"":""json""}

 7b 22 74 65 73 74 22 3a 22 6a 73 6f 6e 22 7d
 
configuratio: 2 peers, 2 couchdbs, 1 ca, and 1 orderer",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-8718,0|i02cwd:,,,,,,,,ericmvaughn,mastersingh24,,,,,,,,,,,,,14/Apr/18 10:08 AM;mastersingh24;[~ericmvaughn] - Why exactly is this a problem?   The above are equivalent in terms of JSON,16/Apr/18 9:20 PM;ericmvaughn;[~mastersingh24]   Our code is hashing the private data before saving it and expecting to retrieve it unchanged.  This is usually the case except when we happened to store a file that was in JSON format.  I agree they are equivalent in terms of JSON but we are just storing the data without knowledge of its format.,,,,,,,,,,,,,,,,,,,,,,
The 'DEFAULT' MSPID is extremely misleading and confusing,FAB-9256,29034,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,30/Mar/18 3:39 PM,01/Apr/18 12:47 PM,26/Apr/18 6:50 AM,01/Apr/18 12:47 PM,,,,,,,v1.2,,,fabric-orderer,fabric-peer,fabric-tools,,0,,,,,,,,,"For some reason, the sample MSP provided in the configurations is given an ID of 'DEFAULT'.  Since these sample configuration files get shipped in our images, when customers forget to override the MSP ID, they get error messages complaining about how the 'DEFAULT' MSP id is not valid.  This is very confusing, because users assume the defaults are valid.  This would be much more clear, and be a much more obvious that it should be changed if it were renamed to ""SampleOrg"" to reflect that it is part of the sample configuration and not a valid default.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02cp9:,,,,,,,,jyellick,,,,,,,,,,master,,,true,30/Mar/18 3:43 PM;jyellick;In review via: https://gerrit.hyperledger.org/r/c/19969/,,,,,,,,,,,,,,,,,,,,,,,
Documentation error - fabric setup,FAB-9230,28988,Bug,Unverified,FAB,Fabric,software,ChristopherFerris,,,Medium,,,Sharadw,Sharadw,29/Mar/18 2:24 PM,08/Apr/18 4:57 PM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-docs,,,,0,,,,,,,,,"Hi

On page [http://hyperledger-fabric.readthedocs.io/en/latest/samples.html] command for download of platform specific binaries does not work. This is because [bootstrap.sh|http://bootstrap.sh/] has been moved to a new location: [https://raw.githubusercontent.com/hyperledger/fabric/master/scripts/bootstrap.sh]

Documentation needs to be updated.

 

Regards",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02ch1:,,,,,,,,Sharadw,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure in fabric/discovery,FAB-9223,28980,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,sykesm,sykesm,29/Mar/18 1:09 PM,29/Mar/18 1:09 PM,26/Apr/18 6:50 AM,,,,,,,,,,,,,,,0,flakes,,,,,,,,"{code:java}
12:47:58 unit-tests_1  | --- FAIL: TestCachePurgeCache (0.00s)
12:47:58 unit-tests_1  | 	assertions.go:247: 
                          
	Error Trace:	authcache_test.go:200
12:47:58 unit-tests_1  | 		
	Error:      	Should be true
12:47:58 unit-tests_1  | 		
	Test:       	TestCachePurgeCache{code}
https://jenkins.hyperledger.org/job/fabric-verify-x86_64/21960/consoleFull",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02cfh:,,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test failure historydb/historyleveldb - panic: Error while trying to open DB,FAB-9222,28979,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,sykesm,sykesm,29/Mar/18 1:04 PM,07/Apr/18 10:08 AM,26/Apr/18 6:50 AM,01/Apr/18 9:59 PM,,,,,,,v1.2,,,,,,,0,flakes,,,,,,,,"{code:java}
12:47:50 unit-tests_1  | --- FAIL: TestHistoryForInvalidTran (0.03s)
12:47:50 unit-tests_1  | panic: Error while trying to open DB: open /tmp/fabric/ledgertests/kvledger/history/historydb/historyleveldb/ledgersData/stateLeveldb: no such file or directory [recovered]
12:47:50 unit-tests_1  | 	panic: Error while trying to open DB: open /tmp/fabric/ledgertests/kvledger/history/historydb/historyleveldb/ledgersData/stateLeveldb: no such file or directory
12:47:50 unit-tests_1  | 
12:47:50 unit-tests_1  | goroutine 24 [running]:
12:47:50 unit-tests_1  | testing.tRunner.func1(0xc4200980f0)
12:47:50 unit-tests_1  | 	/opt/go/src/testing/testing.go:711 +0x2d2
12:47:50 unit-tests_1  | panic(0xee51c0, 0xc42139e020)
12:47:50 unit-tests_1  | 	/opt/go/src/runtime/panic.go:491 +0x283
12:47:50 unit-tests_1  | github.com/hyperledger/fabric/common/ledger/util/leveldbhelper.(*DB).Open(0xc4213c45c0)
12:47:50 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/common/ledger/util/leveldbhelper/leveldb_helper.go:88 +0x27f
12:47:50 unit-tests_1  | github.com/hyperledger/fabric/common/ledger/util/leveldbhelper.NewProvider(0xc420d4a680, 0xc420d4a680)
12:47:50 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/common/ledger/util/leveldbhelper/leveldb_provider.go:40 +0xe8
12:47:50 unit-tests_1  | github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/stateleveldb.NewVersionedDBProvider(0x0)
12:47:50 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/stateleveldb/stateleveldb.go:35 +0x114
12:47:50 unit-tests_1  | github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate.NewCommonStorageDBProvider(0x16382e0, 0xc4200980f0, 0xee51c0, 0x1098440)
12:47:50 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate/common_storage_db.go:42 +0x10a
12:47:50 unit-tests_1  | github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate.(*LevelDBCommonStorageTestEnv).Init(0xc420d50260, 0x16382e0, 0xc4200980f0)
12:47:50 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate/test_exports.go:45 +0x72
12:47:50 unit-tests_1  | github.com/hyperledger/fabric/core/ledger/kvledger/history/historydb/historyleveldb.newTestHistoryEnv(0xc4200980f0, 0x1)
12:47:50 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/history/historydb/historyleveldb/pkg_test.go:55 +0xb5
12:47:50 unit-tests_1  | github.com/hyperledger/fabric/core/ledger/kvledger/history/historydb/historyleveldb.TestHistoryForInvalidTran(0xc4200980f0)
12:47:50 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/history/historydb/historyleveldb/historyleveldb_test.go:204 +0x40
12:47:50 unit-tests_1  | testing.tRunner(0xc4200980f0, 0x1041490)
12:47:50 unit-tests_1  | 	/opt/go/src/testing/testing.go:746 +0xd0
12:47:50 unit-tests_1  | created by testing.(*T).Run
12:47:50 unit-tests_1  | 	/opt/go/src/testing/testing.go:789 +0x2de
12:47:50 unit-tests_1  | FAIL	github.com/hyperledger/fabric/core/ledger/kvledger/history/historydb/historyleveldb	0.543s{code}
https://jenkins.hyperledger.org/job/fabric-verify-x86_64/21960/consoleFull",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02cf9:,,,,,,,,mastersingh24,sykesm,,,,,,,,,master,,,true,01/Apr/18 1:13 PM;mastersingh24;https://gerrit.hyperledger.org/r/20051,,,,,,,,,,,,,,,,,,,,,,,
Test flake in fabric/core/deliverservice TestDeliverServiceShutdown,FAB-9221,28978,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,nirro,sykesm,sykesm,29/Mar/18 1:00 PM,12/Apr/18 11:41 AM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,,,,,0,flakes,,,,,,,,"{code:java}
Receive error: Client is closing
12:47:28 unit-tests_1  | --- FAIL: TestDeliverServiceShutdown (2.50s)
12:47:28 unit-tests_1  | 	assertions.go:247: 
                          
	Error Trace:	deliveryclient_test.go:473
12:47:28 unit-tests_1  | 		
	Error:      	Disseminated a block after shutting down the delivery service
12:47:28 unit-tests_1  | 		
	Test:       	TestDeliverServiceShutdown
12:47:28 unit-tests_1  | 2018-03-29 12:47:00.956 UTC [ConnProducer] NewConnection -> ERRO 08f Failed connecting to localhost:5615 , error: context deadline exceeded
12:47:28 unit-tests_1  | 2018-03-29 12:47:02.959 UTC [deliveryClient] try -> WARN 090 Got error: rpc error: code = Unavailable desc = transport is closing , at 1 attempt. Retrying in 1s
12:47:28 unit-tests_1  | 2018-03-29 12:47:03.960 UTC [deliveryClient] try -> WARN 091 Got error: rpc error: code = Canceled desc = context canceled , at 1 attempt. Retrying in 1s
12:47:28 unit-tests_1  | 2018-03-29 12:47:03.960 UTC [blocksProvider] DeliverBlocks -> WARN 092 [TEST_CHAINID] Receive error: Client is closing
12:47:28 unit-tests_1  | FAIL
12:47:28 unit-tests_1  | coverage: 91.9% of statements
12:47:28 unit-tests_1  | FAIL	github.com/hyperledger/fabric/core/deliverservice	56.494s{code}
https://jenkins.hyperledger.org/job/fabric-verify-x86_64/21960/consoleFull",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02cf1:,,,,,,,,nirro,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
FAB-9167 broke `make gotools`,FAB-9209,28960,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sykesm,sykesm,sykesm,28/Mar/18 5:28 PM,31/Mar/18 8:21 PM,26/Apr/18 6:50 AM,31/Mar/18 8:21 PM,,,,,,,v1.2,,,,,,,0,,,,,,,,,,"{code:java}
$ make gotools
mkdir -p build/bin
cd gotools && make install BINDIR=/home/rpjday/go/bin
make[1]: Entering directory
'/home/rpjday/go/src/github.com/hyperledger/fabric/gotools'
make[2]: Entering directory
'/home/rpjday/go/src/github.com/hyperledger/fabric/gotools'
Getting dep 0.4.1
/bin/sh: line 0: cd: too many arguments
make[2]: *** [Makefile:56: gotool.dep] Error 1


 pretty sure the problem is in this latest patch to gotools/Makefile:

+# Lock to a versioned dep
+gotool.dep: DEP_VERSION ?= ""0.4.1""
+gotool.dep:
+       @echo ""Getting dep $(DEP_VERSION)""
+       @GOPATH=$(abspath $(TMP_GOPATH)) go get -d github.com/golang/dep
+       @cd $(abspath $(TMP_GOPATH)) git checkout $(DEP_VERSION)  <--
...{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02cc5:,,,,,,,,rpjday,sykesm,,,,,,,,,master,,,true,"28/Mar/18 7:40 PM;rpjday;Can you enhance the ""clean:"" target to remove all the generated gotools?","28/Mar/18 10:58 PM;sykesm;Something like that should be done in a separate issue. The fact that there's a ""gotools-clean"" target that's not part of ""clean"" has bitten me as well.

IMO, the whole build process needs a good rethink.","28/Mar/18 11:00 PM;sykesm;Look at all these clean targets
{code:java}
# - docker[-clean] - ensures all docker images are available[/cleaned]
# - peer-docker[-clean] - ensures the peer container is available[/cleaned]
# - orderer-docker[-clean] - ensures the orderer container is available[/cleaned]
# - tools-docker[-clean] - ensures the tools container is available[/cleaned]
# - clean - cleans the build area
# - clean-all - superset of 'clean' that also removes persistent state
# - dist-clean - clean release packages for all target platforms
# - unit-test-clean - cleans unit test state (particularly from docker)
{code}","29/Mar/18 9:23 AM;rpjday;Trust me, I had noticed all that. I've been working with Fabric for less than two weeks, and already I want to rewrite the whole build system.","29/Mar/18 10:04 AM;sykesm;Not for nothing, but, you're not alone. I started with the code base in December and ended up doing a ""new contributor experience"" presentation to maintainers to highlight some of the areas that need improvement.

In general, we need to push for a much better experience when getting started; you shouldn't be afraid to open issues.","29/Mar/18 5:19 PM;rpjday;Any ETA on this fix, I have a couple things I can build on top of it when it works again.","29/Mar/18 6:45 PM;sykesm;Been awaiting reviews and integration since about an hour after being reported. 

https://gerrit.hyperledger.org/r/c/19861",29/Mar/18 7:18 PM;rpjday;Seems like that reverify failed again.,29/Mar/18 9:37 PM;sykesm;Yes. Some recent CRs require a dozen reverify attempts to go green. There are a handful of bugs with the 'flakes' label that are recurring often enough to warrant some attention.,,,,,,,,,,,,,,,
Bootstrap test failed as chaincode is not working as expected in 'fabric-test-daily-x86_64',FAB-9207,28956,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,latitiah,sambhavdutt,sambhavdutt,28/Mar/18 1:39 PM,06/Apr/18 4:01 PM,26/Apr/18 6:50 AM,06/Apr/18 3:56 PM,,,,,,,,,,fabric-quality,,,,0,ci_failure,,,,,,,,"Bootstrapping error as expected chaincode container is not running,


{code:java}
Error Message

The expected chaincode container cc8c7d7f323e11e89a53fa163e999718-peer0.org1.exa...

Stacktrace


Failing step: And a user deploys chaincode ... failed in 353.300s
Location: bootstrap.feature:95
Assertion Failed: The expected chaincode container cc8c7d7f323e11e89a53fa163e999718-peer0.org1.example.com-mycc-0 is not running
.
.
2018-03-28 04:17:57.047 UTC [grpc] Printf -> DEBU 014 pickfirstBalancer: HandleSubConnStateChange: 0xc42011c710, READY
Error: got unexpected status: SERVICE_UNAVAILABLE -- will not enqueue, consenter for this channel hasn't started yet
{code}



{code:java}
2018-03-28 04:22:29.266 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 00c Using default escc
2018-03-28 04:22:29.266 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 00d Using default vscc
2018-03-28 04:22:29.266 UTC [chaincodeCmd] getChaincodeSpec -> DEBU 00e java chaincode enabled
2018-03-28 04:22:29.285 UTC [msp/identity] Sign -> DEBU 00f Sign: plaintext: 0AB4070A6B08031A0C0885B1ECD50510...30300A000A04657363630A0476736363 
2018-03-28 04:22:29.285 UTC [msp/identity] Sign -> DEBU 010 Sign: digest: C1343DCBDC8BBE87AB9EDB4A5F7AEA6CF47DE423346F4AB5AA631142734AE1D6 
Error: Error endorsing chaincode: rpc error: code = Unknown desc = access denied: channel [behavesystest] creator org [org1.example.com]
{code}
https://jenkins.hyperledger.org/view/Daily/job/fabric-test-daily-x86_64/303/testReport/bootstrap/Bootstrapping%20Hyperledger%20Fabric/FAB_4776_FAB_4777__Bring_up_a_kafka_based_network_and_check_peers_____1_1_/
*Build Log*
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02cbh:,,,,,,,,sambhavdutt,,,,,,,,,,,,,,"29/Mar/18 1:53 PM;sambhavdutt;The Bootstrap is working as expected now. It has passed in the last build #304, for
*fabric-test-daily-x86_64*

",06/Apr/18 4:01 PM;sambhavdutt;This issue has been fixed. A bootstrap test retrigger fixed this issue.,,,,,,,,,,,,,,,,,,,,,,
fabric-ca golang 1.8 dependency breaks postgres driver,FAB-9197,28944,Bug,In Review,FAB,Fabric,software,ChristopherFerris,,,Medium,,,rennman,rennman,27/Mar/18 8:07 PM,28/Mar/18 8:37 PM,26/Apr/18 6:50 AM,,v1.0.0,,,,,,v1.2,,,fabric-ca,,,,0,,,,,,,,,"The go postgres driver 
[https://github.com/lib/pq]
was recently updated to require goloang>=1.8.  This essentially breaks fabric-ca 1.0, since go1.7.2 is in the baseimage.

To compensate, it requires 'locking' in a previous commit of pq that does not require go1.8.
To effect this, the Dockerfile will be updated to eliminate the 'go get' command that installs pq and manually clone, checkout, build and install the pq driver.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9n6o,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Third-party images should use BASE_DOCKER_NS,FAB-9192,28939,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,greg.haskins,greg.haskins,greg.haskins,27/Mar/18 6:32 PM,07/Apr/18 7:50 PM,26/Apr/18 6:50 AM,01/Apr/18 12:51 PM,,,,,,,v1.1.1,,,fabric-build,,,,0,,,,,,,,,"Images such as couchdb, zookeeper, and kafka were moved to the fabric-baseimage repo.  However, the ""make docker-thirdparty"" target still utilizes DOCKER_NS rather than BASE_DOCKER_NS.  This works fine with defaults, but breaks if the user tries to work with hyperledger using non-standard namespaces.

The solution is that docker-thirdparty should use BASE_DOCKER_NS so that they correctly track the rest of baseimage base images.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02c85:,,,,,,,,greg.haskins,,,,,,,,,,release-1.1,master,,true,,,,,,,,,,,,,,,,,,,,,,,,
fabric-samples .gitignore needs /config,FAB-9185,28925,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,ChristopherFerris,ChristopherFerris,27/Mar/18 12:35 PM,28/Mar/18 11:24 PM,26/Apr/18 6:50 AM,28/Mar/18 11:24 PM,v1.1,,,,,,,,,fabric-samples,,,,0,,,,,,,,,"since we have added /config to the d/l of binaries, we should add it to .gitignore for developers that want to submit patches.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02c5h:,,,,,,,,ChristopherFerris,,,,,,,,,,master,,,true,27/Mar/18 12:37 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/19807,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca-client IdentityService did not specify caName ,FAB-9175,28905,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,zhaochy,zhaochy,zhaochy,27/Mar/18 3:38 AM,29/Mar/18 1:30 AM,26/Apr/18 6:50 AM,29/Mar/18 1:30 AM,,,,,,,v1.2,,,fabric-sdk-node,,,,0,,,,,,,,,fabric-ca-client IdentityService did not specify caName and therefore it fails in multi ca setup.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02c11:,,,,,,,,zhaochy,,,,,,,,,,master,,,true,27/Mar/18 3:43 AM;zhaochy;https://gerrit.hyperledger.org/r/19791,,,,,,,,,,,,,,,,,,,,,,,
Build fails due to missing license header in Gopkg.toml,FAB-9171,28901,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sheehan,sheehan,sheehan,26/Mar/18 8:19 PM,28/Mar/18 8:06 PM,26/Apr/18 6:50 AM,28/Mar/18 8:05 PM,,,,,,,v1.2,,,fabric-build,,,,0,,,,,,,,,"Run

`make dist-clean all`

 

Expected:

Build succeeds

 

Actual:

Fails with

The following files are missing SPDX-License-Identifier headers:
Gopkg.toml

Please replace the Apache license header comment text with:
SPDX-License-Identifier: Apache-2.0

Checking committed files for traditional Apache License headers ...
The following files are missing traditional Apache 2.0 headers:
Gopkg.toml
Fatal Error - All files must have a license header
make: *** [license] Error 1",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02c0d:,,,,,,,,kchristidis,sheehan,,,,,,,,,,,,,26/Mar/18 9:19 PM;kchristidis;https://gerrit.hyperledger.org/r/c/19783/,28/Mar/18 8:06 PM;sheehan;Changes were merged in FAB-9167,,,,,,,,,,,,,,,,,,,,,,
Chaincode error sets incorrect status code group,FAB-9094,28816,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,divyank,divyank,divyank,23/Mar/18 9:31 PM,26/Mar/18 1:53 PM,26/Apr/18 6:50 AM,26/Mar/18 1:53 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02bit:,,,,,,,,divyank,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
ProposalResponse payload comparison does not return status code,FAB-9092,28814,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,divyank,divyank,divyank,23/Mar/18 8:51 PM,23/Mar/18 9:52 PM,26/Apr/18 6:50 AM,23/Mar/18 9:52 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02bil:,,,,,,,,divyank,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Transaction Flow text updates,FAB-9082,28801,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,pandrejko,pandrejko,pandrejko,23/Mar/18 2:47 PM,25/Mar/18 2:24 AM,26/Apr/18 6:50 AM,25/Mar/18 2:24 AM,,,,,,,v1.2,,,fabric-docs,,,,0,,,,,,,,,"[http://pamstaging-fabric.readthedocs.io/en/latest/txflow.html?highlight=transaction%20flow]

Corrections to this topic:

1. Edit this section in italic and change to a note:

_Change:_

_\{The MSP is a peer component that allows them to verify transaction requests arriving from clients and to sign transaction results(endorsements). The Writing policy is defined at channel creation time, and determines which user is entitled to submit a transaction to that channel.}_

_to (a real note block)_

Note: The MSP is a peer component that allows a peer to verify transaction requests arriving from clients and to sign transaction results (endorsements). The writing policy is defined at channel creation time, and determines which users are entitled to submit a transaction to that channel.

 

2. Remove this line at the bottom or properly reformat this into a real note block and link it to the swimlane diagram it refers to. Not sure where that is.

*Note*: See the swimlane diagram to better understand the server side flow and the protobuffers.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02bh9:,,,,,,,,pandrejko,,,,,,,,,,master,,,true,23/Mar/18 3:54 PM;pandrejko;https://gerrit.hyperledger.org/r/#/c/19681/,,,,,,,,,,,,,,,,,,,,,,,
Client Identity Chaincode Library not provided by Docker image,FAB-9081,28799,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,ga25waq,ga25waq,23/Mar/18 2:45 PM,16/Apr/18 5:54 PM,26/Apr/18 6:50 AM,,,,,,,,,,,,,,,0,,,,,,,,,"The new Client Identity Chaincode Library introduced with Fabric 1.1 seems not to be included in the respective Docker image(s).

When chaincode is instantiated and built, the following errors occurs:
> error starting container: Failed to generate platform-specific docker build:
>   Error returned from build: 1 ""chaincode/input/src/github.com/my_example_cc/main.go:4:2:
>     cannot find package ""github.com/hyperledger/fabric/core/chaincode/lib/cid"" in any of:
>       [...]

I'm using the latest fabric-ccenv Docker image.

Several other people have the same problem, see also:
- https://github.com/yeasy/docker-hyperledger-fabric/issues/4
- https://github.com/yacovm/fabricDeployment/issues/8
- https://lists.hyperledger.org/pipermail/hyperledger-fabric/2017-December/002441.html",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzygf:,,,,,,,,davidkhala,Ed.Curran,ga25waq,,,,,,,,,,,,06/Apr/18 7:50 AM;davidkhala;Witness same problem .,"09/Apr/18 9:56 AM;ga25waq;Is there a chance that this issue will be fixed soon? Otherwise, the Client Identity Chaincode Library is not really usable, except for vendoring it manually, but I guess that's not the intended way to do it.","12/Apr/18 5:13 PM;Ed.Curran;I'm also keen to see a fix for this. If you use docker run to look inside the fabric-ccenv image and go to ""/opt/gopath/src/github.com/hyperledger/fabric/core/"" you can see the shim directory is there but lib is not. If anyone has suggestions for a workaround that would be great.

 

 ","16/Apr/18 5:54 PM;ga25waq;[~Ed.Curran], you can vendor the library manually. But this is not very comfortable, and I don't think this is a recommended way to use it, since there can occur version conflicts etc.",,,,,,,,,,,,,,,,,,,,
MSP initialization debug logging for peer is not possible,FAB-9074,28792,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,smithbk,smithbk,23/Mar/18 2:01 PM,23/Mar/18 2:02 PM,26/Apr/18 6:50 AM,,,,,,,,v1.1.1,v1.2,,fabric-peer,,,,0,,,,,,,,,"The peer/main.go initializes MSP before the cobra command Execute method is called which initializes logging; therefore, even if debug logging level is set, we are unable to see any debug logging for MSP initialization errors which happen as a result of calling ""common.InitCrypto"".

You can test this for example by improperly configuring the BCCSP section of core.yaml.  This is particularly important when debugging HSM initialization.

Also change the following from a debug to a warning in fabric/msp/mspimpl.go:

               mspLogger.Debugf(""Could not find SKI [%s], trying KeyMaterial field: %+v\n"", hex.EncodeToString(pubKey.SKI()), err)
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02bfh:,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
increase eventServiceIdle duration in the configs,FAB-9058,28773,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Baha-sk,Baha-sk,Baha-sk,22/Mar/18 6:53 PM,22/Mar/18 8:56 PM,26/Apr/18 6:50 AM,22/Mar/18 8:56 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"currently some unit test configs have a duration of 500ms, increase it to 2m


also add missing global cache fields in all the configs",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02bbh:,,,,,,,,Baha-sk,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
InstallCC errors ignored,FAB-9051,28765,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,divyank,divyank,divyank,22/Mar/18 3:05 PM,22/Mar/18 5:40 PM,26/Apr/18 6:50 AM,22/Mar/18 5:40 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02ba5:,,,,,,,,divyank,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Wrong tag for couchdb's Docker image (?),FAB-9038,28751,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,troyronda,ga25waq,ga25waq,21/Mar/18 9:49 PM,22/Mar/18 7:51 PM,26/Apr/18 6:50 AM,22/Mar/18 7:51 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"In
> ./test/fixtures/dockerenv/.env
(as well as in prerelease-env.sh) the variable
> FABRIC_COUCHDB_FIXTURE_TAG
is set to
> 1.1.0

However, there is no such tag on the Docker hub. Instead, there are tags for the different architectures based on version 0.4.6.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02b7h:,,,,,,,,ga25waq,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
fix test source path,FAB-9029,28736,Bug,In Review,FAB,Fabric,software,ChristopherFerris,,,Medium,,sanchezl,sanchezl,sanchezl,21/Mar/18 2:55 PM,21/Mar/18 2:58 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-chaincode-java,,,,0,,,,,,,,,Source path for java tests should be src/java/test,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02b45:,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode key not valid PKCS#8 format,FAB-9028,28733,Bug,In Review,FAB,Fabric,software,ChristopherFerris,,,Medium,,sanchezl,sanchezl,sanchezl,21/Mar/18 2:12 PM,20/Apr/18 9:40 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-crypto,,,,0,,,,,,,,,"The client.key injected into the chaincode container for mutual tls with the peer is not PKCS#8 compliant.

As currently generated, neither the built-in Java or third party BouncyCastle security providers can read the key, even with an attempt at conversion to PKCS#8 format using openssl tools.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzygi:0wm,,,,,,,,kchristidis,sanchezl,,,,,,,,,,,,,20/Apr/18 9:40 PM;kchristidis;https://gerrit.hyperledger.org/r/c/19587/,,,,,,,,,,,,,,,,,,,,,,,
stale chaintool README in fabric-chaintool samples,FAB-9019,28722,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,ghaskins,muralisr,muralisr,21/Mar/18 2:37 AM,21/Mar/18 2:39 AM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-chaintool,,,,0,,,,,,,,,README under https://github.com/hyperledger/fabric-chaintool/tree/master/examples/example02 appears to be stale.  Probably other samples under https://github.com/hyperledger/fabric-chaintool/tree/master/examples are stale too.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02b19:,,,,,,,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ChaincodeEvents not behaving as expected,FAB-9018,28720,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,harrisob@us.ibm.com,zonkedhazmat,zonkedhazmat,21/Mar/18 12:53 AM,16/Apr/18 3:39 AM,26/Apr/18 6:50 AM,,,,,,,,v1.1.0-rc1,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"When more than one event is created during a block only the first event is received by the node-sdk on block confirmation, and this same event is received n number of times where n is the number of events in the block. ",Ubuntu 16.04,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02b0t:,,,,,,,,harrisob@us.ibm.com,zonkedhazmat,,,,,,,,,,,,,"26/Mar/18 5:33 PM;harrisob@us.ibm.com;Is this with the new Channel Event Services using Filtered blocks or Full blocks, or is this with the legacy Event Hub ?",05/Apr/18 5:14 AM;zonkedhazmat;is was on the legacy event hub. ,"06/Apr/18 5:57 AM;zonkedhazmat;Also with the channel event services using registerChaincodeEvents, I haven't been able to catch the events being emitted from the chaincode at all.","12/Apr/18 7:38 PM;harrisob@us.ibm.com;I am not able to recreate this. I was able to confirm that if my chaincode tried to SetEvent() more then once, only the last one was seen, meaning that only one chaincode event is allowed. Would you provide the registrations and chaincode ?, maybe a debug trace of NodeSDK.","12/Apr/18 11:46 PM;zonkedhazmat;Ill provide the appropriate summary pieces of code below

The chaincode implementation
{code:java}
objectType := ""product""
product := `{""objectType"":""` + objectType + `"",""id"":""` + args[0] + `"",""data"":` + args[1]  + `}`
err = APIstub.SetEvent(eventType, eventAsBytes)
if err != nil {
   shim.Error(""Could not set event for: "" + event)
}
{code}
The Node SDK Legacy eventhub Implementation 

 
{code:java}

const eventRegId = this.event_hub.registerChaincodeEvent(request.chaincodeId, ""product"", event => { 
    console.log(""Event received :"" + event.payload);
    em.emit(eventPayload);
    this.event_hub.unregisterChaincodeEvent(eventRegId);
});{code}
The channeleventhub Node SDK 
{code:java}
let event_hubs = channel.getChannelEventHubsForOrg();
     const profileRegId = this.channel_event_hub.registerChaincodeEvent(request.chaincodeId, ""product"", event => {
     em.emit(event.payload);
     this.channel_event_hub.unregisterChaincodeEvent(profileRegId);
});
{code}
I don't have access to my work pc at the moment so I am unable to get the trace. If I have time later I'll try grab it for you.

 ","16/Apr/18 3:38 AM;zonkedhazmat;I have finally resolved this issue. 

As there are limited examples I was implementing register chaincode events within the invoke function, this lead to errors and bugs occuring where only the latest invoke in a block was registered. 

When bringing the the registration out of the invoke it is able to listen to events raised in the chaincode when not unregistering. This fixes the issues I was having with it.",,,,,,,,,,,,,,,,,,
Typo in readwrite.rst document ,FAB-9011,28713,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wjzheng,wjzheng,wjzheng,20/Mar/18 6:37 PM,20/Mar/18 10:23 PM,26/Apr/18 6:50 AM,20/Mar/18 10:23 PM,,,,,,,v1.1.0-rc1,,,fabric-docs,,,,0,Documentation,,,,,,,,change documents to document,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02azh:,,,,,,,,wjzheng,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Event client should respect channel config,FAB-8995,28696,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,bstasyszyn,bstasyszyn,bstasyszyn,20/Mar/18 5:36 PM,20/Mar/18 6:31 PM,26/Apr/18 6:50 AM,20/Mar/18 6:31 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"The event client does not respect the eventSource config under section, 'channels'. If eventSource is set to false then the event client should not attempt to connect to that peer.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02avx:,,,,,,,,bstasyszyn,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
pkg/client/... metalinter,FAB-8985,28684,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,troyronda,troyronda,troyronda,20/Mar/18 3:46 PM,20/Mar/18 6:37 PM,26/Apr/18 6:50 AM,20/Mar/18 6:37 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"Resolve metalinter warnings.

First commit resolves all but:

$ gometalinter pkg/client/...
pkg/client/resmgmt/resmgmt.go:525::warning: cyclomatic complexity 22 of function (*Client).sendCCProposal() is high (> 10) (gocyclo)
pkg/client/msp/client_test.go:34::warning: cyclomatic complexity 18 of function TestMSP() is high (> 10) (gocyclo)
pkg/client/resmgmt/resmgmt.go:672::warning: cyclomatic complexity 16 of function (*Client).SaveChannel() is high (> 10) (gocyclo)
pkg/client/resmgmt/resmgmt.go:301::warning: cyclomatic complexity 14 of function (*Client).InstallCC() is high (> 10) (gocyclo)
pkg/client/channel/invoke/txnhandler_test.go:167::warning: cyclomatic complexity 13 of function TestProposalProcessorHandler() is high (> 10) (gocyclo)
pkg/client/common/selection/dynamicselection/ccpolicyprovider_test.go:17::warning: cyclomatic complexity 11 of function TestCCPolicyProvider() is high (> 10) (gocyclo)
pkg/client/common/selection/dynamicselection/pgresolver/pgresolverimpl.go:185::warning: cyclomatic complexity 11 of function (*signaturePolicyCompiler).compile() is high (> 10) (gocyclo)
pkg/client/resmgmt/lscc.go:73::warning: declaration of ""err"" shadows declaration at pkg/client/resmgmt/lscc.go:57 (vetshadow)
pkg/client/resmgmt/resmgmt.go:138::warning: declaration of ""err"" shadows declaration at pkg/client/resmgmt/resmgmt.go:128 (vetshadow)
pkg/client/resmgmt/resmgmt.go:350::warning: declaration of ""err"" shadows declaration at pkg/client/resmgmt/resmgmt.go:306 (vetshadow)
pkg/client/resmgmt/resmgmt.go:462::warning: declaration of ""err"" shadows declaration at pkg/client/resmgmt/resmgmt.go:452 (vetshadow)
pkg/client/resmgmt/resmgmt.go:596::warning: declaration of ""err"" shadows declaration at pkg/client/resmgmt/resmgmt.go:532 (vetshadow)
pkg/client/resmgmt/resmgmt.go:680::warning: declaration of ""err"" shadows declaration at pkg/client/resmgmt/resmgmt.go:674 (vetshadow)
pkg/client/resmgmt/resmgmt.go:728::warning: declaration of ""err"" shadows declaration at pkg/client/resmgmt/resmgmt.go:674 (vetshadow)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02ath:,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"Rejecting broadcast of message from x.x.x.x:x with SERVICE_UNAVAILABLE: rejected by Consenter: will not enqueue, consenter for this channel hasn't started yet",FAB-8984,28683,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,zamrokk,zamrokk,20/Mar/18 2:52 PM,03/Apr/18 1:40 PM,26/Apr/18 6:50 AM,03/Apr/18 1:40 PM,,,,,,,v1.1.0-preview,,,fabric-orderer,,,,0,kafka,,,,,,,,"I have split the blockchain network into 2 machines :

- 158.177.114.211 : 

2 zookeepers

2 kafka

1 ca

1 peer

- 92.103.147.67 : 

1 zookeeper

2 kafka

1 peer

 

When I try to initialize a channel on the network, the Java SDK receive this error from the orderer : 
{quote}org.hyperledger.fabric.sdk.exception.TransactionException: Channel channel1 update error timed out after 15215 ms. Status value 503. Status SERVICE_UNAVAILABLE. will not enqueue, consenter for this channel hasn't started yet
 at org.hyperledger.fabric.sdk.Channel.sendUpdateChannel(Channel.java:495) [fabric-sdk-java-1.1.0-alpha.jar:na]
 at org.hyperledger.fabric.sdk.Channel.<init>(Channel.java:216) [fabric-sdk-java-1.1.0-alpha.jar:na]
 at org.hyperledger.fabric.sdk.Channel.createNewInstance(Channel.java:308) [fabric-sdk-java-1.1.0-alpha.jar:na]
 at org.hyperledger.fabric.sdk.HFClient.newChannel(HFClient.java:206) [fabric-sdk-java-1.1.0-alpha.jar:na]
 at com.ibm.controller.MyController.constructChannel(MyController.java:761) [classes/:na]
 at com.ibm.controller.MyController.initialize(MyController.java:505) [classes/:na]
{quote}
 

Here is what we can see on the first machine log :
{quote}orderer0.byomc.com    | 2018-03-20 14:10:14.747 UTC [orderer/common/broadcast] Handle -> WARN 28a [channel: channel1] Rejecting broadcast of message from 90.63.249.102:64030 with SERVICE_UNAVAILABLE: rejected by Consenter: will not enqueue, consenter for this channel hasn't started yet
{quote}
 

 

ps : If I gather all my components on the same machine it works well

pps: I added my project on attached files. I split compose files to start first zookeeper+kafka on a first step , then launching the rest .  To run it on each machine :

machine fr
 * ./fabric.sh up kafka-fr
 * ./fabric.sh up fr+ca+orderer

machine sn
 * ./fabric.sh up kafka-sn
 * ./fabric.sh up sn

 

[^network-compose.zip]",,,,,,,,,,,,,,,,,,,,20/Mar/18 2:45 PM;zamrokk;network-compose.zip;https://jira.hyperledger.org/secure/attachment/14802/network-compose.zip,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02at9:,,,,,,,,zamrokk,,,,,,,,,,,,,,"20/Mar/18 5:00 PM;zamrokk;output of commands gives :

/opt/kafka/bin/kafka-con --zookeeper zookeeper1:2181
{quote}testchainid
{quote}
 

/opt/kafka/bin/kafka-console-consumer.sh --zookeeper zookeeper0:2181 --topic testchainid --from-beginning

 
{quote}[2018-03-20 16:57:15,265] WARN [console-consumer-18129_aa5d7f63504d-1521565033953-3fb20755-leader-finder-thread], Failed to add leader for partitions testchainid-0; will retry (kafka.consumer.ConsumerFetcherManager$LeaderFinderThread)

java.nio.channels.ClosedChannelException

 at kafka.network.BlockingChannel.send(BlockingChannel.scala:110)

 at kafka.consumer.SimpleConsumer.liftedTree1$1(SimpleConsumer.scala:98)

 at kafka.consumer.SimpleConsumer.kafka$consumer$SimpleConsumer$$sendRequest(SimpleConsumer.scala:83)

 at kafka.consumer.SimpleConsumer.getOffsetsBefore(SimpleConsumer.scala:149)

 at kafka.consumer.SimpleConsumer.earliestOrLatestOffset(SimpleConsumer.scala:188)

 at kafka.consumer.ConsumerFetcherThread.handleOffsetOutOfRange(ConsumerFetcherThread.scala:87)

 at kafka.server.AbstractFetcherThread$$anonfun$6.apply(AbstractFetcherThread.scala:210)

 at kafka.server.AbstractFetcherThread$$anonfun$6.apply(AbstractFetcherThread.scala:208)

 at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)

 at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)

 at scala.collection.immutable.Map$Map1.foreach(Map.scala:116)

 at scala.collection.TraversableLike$class.map(TraversableLike.scala:234)

 at scala.collection.AbstractTraversable.map(Traversable.scala:104)

 at kafka.server.AbstractFetcherThread.addPartitions(AbstractFetcherThread.scala:208)

 at kafka.server.AbstractFetcherManager$$anonfun$addFetcherForPartitions$2.apply(AbstractFetcherManager.scala:88)

 at kafka.server.AbstractFetcherManager$$anonfun$addFetcherForPartitions$2.apply(AbstractFetcherManager.scala:78)

 at scala.collection.TraversableLike$WithFilter$$anonfun$foreach$1.apply(TraversableLike.scala:733)

 at scala.collection.immutable.Map$Map1.foreach(Map.scala:116)

 at scala.collection.TraversableLike$WithFilter.foreach(TraversableLike.scala:732)

 at kafka.server.AbstractFetcherManager.addFetcherForPartitions(AbstractFetcherManager.scala:78)

 at kafka.consumer.ConsumerFetcherManager$LeaderFinderThread.doWork(ConsumerFetcherManager.scala:97)

 at kafka.utils.ShutdownableThread.run(ShutdownableThread.scala:63)
{quote}","20/Mar/18 5:06 PM;zamrokk;/opt/kafka/bin/kafka-topics.sh --describe --zookeeper zookeeper0:2181 --topic testchainid

 
{quote}Topic:testchainid PartitionCount:1 ReplicationFactor:3 Configs:

 Topic: testchainid Partition: 0 Leader: 2 Replicas: 2,0,1 Isr: 2,0,1
{quote}",21/Mar/18 8:46 AM;zamrokk;it sounds like a hostname / IP issue working with Kafka ...,"26/Mar/18 9:28 AM;zamrokk;I have configured static IP on the kafka configuration 

 

+Example of configuration for the orderer on first host pointing to second host IP:+

orderer1.byomc.com:

- CONFIGTX_ORDERER_KAFKA_BROKERS=[kafka0:9092,kafka1:9092,*92.103.147.67*:9092,*92.103.147.67*:9093]

 

+Resolution of kafka3 IP that is on second host from orderer1 logs :+

*orderer1.byomc.com_1  |* 2018-03-26 08:36:03.572 UTC [orderer/consensus/kafka/sarama] func1 -> DEBU 119 Failed to connect to broker kafka3:9192: dial tcp: *{color:#ff0000}lookup kafka3 on 127.0.0.11:53: no such host{color}*

 

{color:#d04437}*It seems the loop up is searching for a local address but my 2 hosts are on 2 different networks and machines.*{color}

 

{color:#333333}on the second host, orderer2 is still looping{color}

*orderer2.byomc.com_1*  | 2018-03-26 08:47:01.718 UTC [orderer/consensus/kafka/sarama] tryRefreshMetadata -> DEBU 1c8 client/metadata found some partitions to be *{color:#d04437}leaderless{color}*

{color:#333333} {color}

 ",29/Mar/18 8:04 AM;zamrokk;maybe it should on same network. I will have a look at overlay on 2 hosts ...,"03/Apr/18 1:40 PM;zamrokk;resolved : playing with fixed IP + ""extra_hosts"" feature + opening all ports on the NAT ",,,,,,,,,,,,,,,,,,
Remove binary output in debug log,FAB-8982,28681,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,troyronda,troyronda,20/Mar/18 2:25 PM,20/Mar/18 5:42 PM,26/Apr/18 6:50 AM,20/Mar/18 5:42 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02at1:,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
EventURL is no longer required,FAB-8979,28678,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,troyronda,troyronda,troyronda,20/Mar/18 1:42 PM,20/Mar/18 2:25 PM,26/Apr/18 6:50 AM,20/Mar/18 2:25 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02asl:,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
reST format mistake in channel_update_tutorial.rst,FAB-8972,28667,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,nnao,nnao,20/Mar/18 12:02 AM,05/Apr/18 5:46 PM,26/Apr/18 6:50 AM,05/Apr/18 5:46 PM,v1.1,,,,,,v1.1.1,,,fabric-docs,,,,0,Documentation,,,,,,,,"I found that a reST format is broken in /docs/source/commands/channel_update_tutorial.rst
 
{code:java}
.. note:: This configuration must be the same for all new peers added to the
channel.
{code}

Maybe it needs to be formatted like the below.

{code:java}
.. note:: This configuration must be the same for all new peers added to the
          channel.
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02aqt:,,,,,,,,nnao,,,,,,,,,,master,,,true,20/Mar/18 1:48 AM;nnao;https://gerrit.hyperledger.org/r/#/c/19421/,,,,,,,,,,,,,,,,,,,,,,,
Log warning instead of panic when GRPC closing fails,FAB-8964,28657,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,biljana.lukovic,biljana.lukovic,19/Mar/18 4:55 PM,20/Mar/18 11:58 AM,26/Apr/18 6:50 AM,20/Mar/18 11:58 AM,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02aot:,,,,,,,,biljana.lukovic,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Instantiate and Upgrade default timeouts,FAB-8963,28656,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,troyronda,troyronda,19/Mar/18 3:57 PM,19/Mar/18 8:26 PM,26/Apr/18 6:50 AM,19/Mar/18 8:26 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02aol:,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"Environment clean up commands need to be specified in ""Adding an org to a channel""",FAB-8958,28647,Bug,In Review,FAB,Fabric,software,ChristopherFerris,,,Medium,,salmanbaset,salmanbaset,salmanbaset,19/Mar/18 3:42 AM,22/Apr/18 2:15 PM,26/Apr/18 6:50 AM,,v1.1,,,,,,v1.2,,,fabric-samples,,,,0,,,,,,,,,"When running the sample ""Adding an Org to a Channel"", then upon clean up, ./eyfn.sh -m down script must be run before ./byfn.sh -m down; otherwise, org3 containers and volumes and containers do not get cleaned properly.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzygi:0rc,,,,,,,,mastersingh24,salmanbaset,,,,,,,,,master,,,true,23/Mar/18 2:46 PM;mastersingh24;[~salmanbaset] - Can you provide more detail(s) on the actual issue here?,"23/Mar/18 3:30 PM;salmanbaset;[~mastersingh24] the issue seems to be that when running the sample of ""Adding a New Node"" multiple times (on a Mac OS X (Sierra) or Ubuntu Trusty), volumes get created. When running `./byfn -m down`, these volumes do not always get deleted. Hence explicit cleaning of orphans is needed.

Arguably, a clean fix is to put the volume clean up commands in byfn.sh -f down. I can submit a patch there.","26/Mar/18 2:23 PM;salmanbaset;[~mastersingh24] here is the new patch for fabric-samples.
https://gerrit.hyperledger.org/r/#/c/19757/",,,,,,,,,,,,,,,,,,,,,
Cache refresh intevals reference wrong config section,FAB-8956,28645,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,divyank,divyank,divyank,19/Mar/18 2:23 AM,19/Mar/18 4:08 AM,26/Apr/18 6:50 AM,19/Mar/18 4:08 AM,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02am5:,,,,,,,,divyank,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK parse instantiate transaction response not correctly,FAB-8955,28644,Bug,Returned,FAB,Fabric,software,ChristopherFerris,,,Medium,,zhangtailin,grapebaba,grapebaba,19/Mar/18 1:48 AM,26/Mar/18 5:37 PM,26/Apr/18 6:50 AM,,,,,,,,v1.1.1,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,NodeSDK parse instantiate transaction response not correctly,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02alx:,,,,,,,,grapebaba,harrisob@us.ibm.com,,,,,,,,,,,,,"26/Mar/18 5:36 PM;harrisob@us.ibm.com;Could I get more information on this issue, what is not being parsed. Would you provide a debug trace,  ?",,,,,,,,,,,,,,,,,,,,,,,
Dynamic selection expiring reference bug,FAB-8946,28633,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,bstasyszyn,bstasyszyn,bstasyszyn,17/Mar/18 3:45 PM,17/Mar/18 11:33 PM,26/Apr/18 6:50 AM,17/Mar/18 11:33 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,The dynamic selection PG resolver cache should be a cache of lazy references but instead is retrieving the value from the reference and is caching the value.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02ajh:,,,,,,,,bstasyszyn,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Type information is broken in fabric-client/fabric-ca-client,FAB-8942,28623,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,zhaochy,shimos,shimos,17/Mar/18 12:15 AM,23/Mar/18 10:45 AM,26/Apr/18 6:50 AM,23/Mar/18 10:45 AM,v1.1,,,,,,v1.2,,,fabric-sdk-node,,,,0,,,,,,,,,"Type information in v.1.1.0 is broken and not compilable with tsc.

With the following test files,

*package.json:*
{code:java}
{
  ""dependencies"": {
    ""fabric-ca-client"": ""^1.1.0"",
    ""fabric-client"": ""^1.1.0""
  },
  ""devDependencies"": {
    ""@types/bytebuffer"": ""^5.0.36"",
    ""@types/node"": ""^9.4.7""
  }
}
{code}
*test.ts:*
{code:java}
import Client = require(""fabric-client"");

const client = Client.loadFromConfig(""profile.yaml"");
{code}
The following errors are produced:
{noformat}
$ tsc --version
Version 2.7.2

$ tsc test.ts
node_modules/fabric-ca-client/index.d.ts(17,10): error TS2305: Module '""/home/testuser/tstest/node_modules/fabric-client/index""' has no exported member 'BaseClient'.
node_modules/fabric-ca-client/index.d.ts(17,22): error TS2305: Module '""/home/testuser/tstest/node_modules/fabric-client/index""' has no exported member 'ICryptoSuite'.
node_modules/fabric-ca-client/index.d.ts(17,36): error TS2305: Module '""/home/testuser/tstest/node_modules/fabric-client/index""' has no exported member 'User'.
node_modules/fabric-ca-client/index.d.ts(17,48): error TS2497: Module '""/home/testuser/tstest/node_modules/fabric-client/index""' resolves to a non-module entity and cannot be imported using this construct.
node_modules/fabric-ca-client/index.d.ts(153,5): error TS2666: Exports and export assignments are not permitted in module augmentations.
node_modules/fabric-client/index.d.ts(17,10): error TS2305: Module '""/home/testuser/tstest/node_modules/fabric-ca-client/index""' has no exported member 'FabricCAServices'.
node_modules/fabric-client/index.d.ts(17,34): error TS2497: Module '""/home/testuser/tstest/node_modules/fabric-ca-client/index""' resolves to a non-module entity and cannot be imported using this construct.
node_modules/fabric-client/index.d.ts(461,3): error TS2666: Exports and export assignments are not permitted in module augmentations.
{noformat}
With the version of some days before v1.1.0 (using 1.1.0-snapshot.95), it worked:
{noformat}
$ tsc test.ts
$ cat test.js
""use strict"";
exports.__esModule = true;
var Client = require(""fabric-client"");
var client = Client.loadFromConfig(""profile.yaml"");
{noformat}
This may be due to the new type definition for fabric-ca-client in -FAB-8879-, and it seems that definitions in both fabric-client and fabric-ca-client should be fixed.",fabric-sdk-node v1.1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02ah9:,,,,,,,,shimos,zhaochy,,,,,,,,,release-1.1,master,,true,19/Mar/18 8:57 AM;zhaochy;https://gerrit.hyperledger.org/r/19377,,,,,,,,,,,,,,,,,,,,,,,
Save viper lookup variable when obtaining reference to local MSP,FAB-8918,28590,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,angelo.decaro,yacovm,yacovm,16/Mar/18 8:34 AM,22/Mar/18 2:09 PM,26/Apr/18 6:50 AM,22/Mar/18 2:09 PM,,,,,,,,,,fabric-crypto,fabric-peer,,,0,,,,,,,,,"The [viper lookup|https://github.com/hyperledger/fabric/blob/master/msp/mgmt/mgmt.go#L159] below takes about hundred micro-seconds to complete.

{code}
		mspType := viper.GetString(""peer.localMspType"")
		if mspType == """" {
			mspType = msp.ProviderTypeToString(msp.FABRIC)
}
{code}

This is invoked each time the local MSP reference is fetched for the sake of other services in the peer such as gossip.


An alternative way of removing the viper lookup from the critical path, is to move the lookup into the block that is protected by the lock, so that it is only performed once.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02ab1:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
issue test,FAB-8915,28587,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,eramitg,eramitg,16/Mar/18 7:04 AM,21/Mar/18 5:36 PM,26/Apr/18 6:50 AM,21/Mar/18 5:36 PM,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02aad:,,,,,,,,eramitg,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CI Failure: Accessing the default test channel instead of specified,FAB-8911,28580,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,latitiah,latitiah,latitiah,15/Mar/18 10:12 PM,17/Apr/18 5:48 PM,26/Apr/18 6:50 AM,17/Apr/18 5:48 PM,v1.1,,,,,,v1.2,,,fabric-quality,,,,0,,,,,,,,,"The following failed in CI:

[https://jenkins.hyperledger.org/view/Daily/job/fabric-test-daily-x86_64/288/consoleFull]
Assertion Failed: Expected response to be of length 1048576; received length 88; Result: Error: 2 UNKNOWN: access denied: channel [behavesystest] creator org [org1.example.com]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02a8t:,,,,,,,,davidkhala,latitiah,,,,,,,,,master,,,true,21/Mar/18 8:14 AM;davidkhala;I saw similar error,,,,,,,,,,,,,,,,,,,,,,,
Chaincode events should deliver payload for non-filtered events,FAB-8910,28579,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,bstasyszyn,bstasyszyn,15/Mar/18 9:21 PM,19/Mar/18 8:28 PM,26/Apr/18 6:50 AM,19/Mar/18 8:28 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02a8l:,,,,,,,,bstasyszyn,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Documentation: several dead/404 links,FAB-8908,28576,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,AdnanChoudhury,AdnanChoudhury,15/Mar/18 8:39 PM,24/Mar/18 1:20 PM,26/Apr/18 6:50 AM,24/Mar/18 1:20 PM,,,,,,,v1.1.1,v1.2,,fabric-docs,,,,0,,,,,,,,,"From the Fabric readme page ([http://hyperledger-fabric.readthedocs.io/)] there are several links that land in 404 pages. Testing with a dead link checking tool finds 167 dead links, and about 12 (or more) of them are in the actual doc content.

The results from the link-checker tool ([https://www.deadlinkchecker.com/website-dead-link-checker.asp)] are attached, the file contains necessary details to find the dead-link areas.",,,,,,,,,,,,,,,,,,,,15/Mar/18 8:39 PM;AdnanChoudhury;dead link checker.pdf;https://jira.hyperledger.org/secure/attachment/14782/dead+link+checker.pdf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02a7x:,,,,,,,,AdnanChoudhury,ChristopherFerris,denyeart,joe-alewine,,,,,,,release-1.1,master,,true,"16/Mar/18 12:57 PM;joe-alewine;[~denyeart] [~ChristopherFerris]{{}}

{{Looks like the release-1.0 tag is broken – that's the main source of broken links here. Thoughts?}}",16/Mar/18 3:42 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/19293,20/Mar/18 6:49 PM;denyeart;[~ChristopherFerris] This should also go to release-1.1 docs right?  I've cherry picked to release-1.1 using  [https://gerrit.hyperledger.org/r/#/c/19491/] .,,,,,,,,,,,,,,,,,,,,,
peer1.org1.example.com does not exist,FAB-8876,28542,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,zhaochy,zhaochy,zhaochy,15/Mar/18 6:21 AM,17/Mar/18 12:04 AM,26/Apr/18 6:50 AM,17/Mar/18 12:04 AM,,,,,,,v1.2,,,fabric-sdk-node,,,,0,,,,,,,,,"peer1.org1.example.com in fabric-sdk-node test/fixtures/network.yaml
this peer does not exist, shoud be removed",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02a0l:,,,,,,,,zhaochy,,,,,,,,,,master,,,true,15/Mar/18 6:25 AM;zhaochy;https://gerrit.hyperledger.org/r/19207,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca key type and size configuration not working properly,FAB-8868,28533,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,rennman,rennman,14/Mar/18 6:52 PM,29/Mar/18 1:33 AM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-ca,,,,0,,,,,,,,,"This is a symptom of a more systematic issue, but for the immediate purpose:
 We document under ""Algorithms and key sizes"", that ""The CSR can be customized"" and provide an example:
{code:java}
csr:
  key:
    algo: ecdsa
    size: 256
{code}
However, {{'key'}} is incorrect. It should read {{'keyrequest'}}

Furthermore when initializing or starting server, the environment variables have no effect (regardless of which version I use):
    {{FABRIC_CA_SERVER_CSR_KEYREQUEST_ALGO=ecdsa}}
    {{FABRIC_CA_SERVER_CSR_KEYREQUEST_SIZE=512}}
This still results in fabric-ca server using the default values of {{'ecdsa'}} and {{'256'}}

*However –*  if I actually include the above csr: key block configuration in my server's yaml file, we *do* honor the environment variables (which operationally is not very useful).

So the general issue: we do not honor environment variables for configuration elements which are not explicitly written to the config file. Since the default elements in {{cmd/fabric-ca-server/config.go}} are somewhat arbitrary, it turns out that we *cannot easily customize certain config options*. Key type and size are only one example – but it is a particularly thorny one for automation – once the server is initialized and the key is created, we cannot change it without:
 * artificially deleting the key and cert
 * adding the relevant config to the yaml file (with arbitrary, or even no values)
 * optionally setting the ENV variables
 * restarting the server

One solution would be to add all supported configuration elements to the generated server config file in {{cmd/fabric-ca-server/config.go}}

As an additional benefit, the user would have a ready, explicit, visual reference which documents our selected default values without resorting to <**gasp**> reading the documentation.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9n5zq,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"update ""make docker-fabric-ca"" in fabric-ca release-1.0 branch",FAB-8867,28532,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,14/Mar/18 6:51 PM,27/Mar/18 4:44 PM,26/Apr/18 6:50 AM,27/Mar/18 4:44 PM,,,,,,,v1.0.7,,,fabric-ca-build,,,,0,,,,,,,,,"update ""make docker-fabric-ca"" in fabric-ca release-1.0 branch",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i029yt:,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Broken links in doc page for fabric ca commands,FAB-8854,28506,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,denyeart,denyeart,14/Mar/18 4:44 AM,14/Mar/18 11:29 PM,26/Apr/18 6:50 AM,14/Mar/18 11:29 PM,,,,,,,v1.1,v1.2,,fabric-docs,,,,0,,,,,,,,,"Links at
http://hyperledger-fabric.readthedocs.io/en/latest/commands/fabric-ca-commands.html
point to fabric-ca rtd *release-1.1.x*, which will not exist.  The final version in rtd to link to is *release-1.1*.  
Note that we could also link to *latest*, although since there is intent to move all docs to a common repository in 1.2 timeframe, I think using *release-1.1* is the better solution for now.

Needs to be addressed in fabric branches *release-1.1* and *master*.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9n41,,,,,,,,denyeart,skarim,,,,,,,,,release-1.1,master,,true,14/Mar/18 4:41 PM;skarim;https://gerrit.hyperledger.org/r/#/c/19159/,14/Mar/18 5:01 PM;denyeart;release-1.1: https://gerrit.hyperledger.org/r/#/c/19161/,,,,,,,,,,,,,,,,,,,,,,
unable to install the golint package in fabric-ca s390x build nodes,FAB-8849,28501,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,rameshthoomu,rameshthoomu,13/Mar/18 8:55 PM,19/Mar/18 1:52 AM,26/Apr/18 6:50 AM,19/Mar/18 1:52 AM,,,,,,,v1.2,,,fabric-ca-build,,,,0,,,,,,,,,"*unable to install the golint package in s390x build nodes. See the below log from one of the jenkins s390x builds*
{code:java}
00:03:09.478 Installing golint ...
00:03:10.058 package golang.org/x/lint: remote origin not found
00:03:10.059 Running lint ...
00:03:10.060 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.061 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.061 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.061 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.062 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.062 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.063 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.064 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.084 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.084 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.085 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.085 No lint errors were found{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i029u5:,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
segmentation fault out of deRegisterTxid in chaincode handler,FAB-8848,28500,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,muralisr,sykesm,sykesm,13/Mar/18 8:45 PM,15/Mar/18 9:02 PM,26/Apr/18 6:50 AM,,v1.2,,,,,,v1.2,,,fabric-peer,,,,0,flakes,,,,,,,,"When `deregisterTxid` gets called with a nil `serialSendMsg`, it panics while logging:
{code:java}
unit-tests_1  |       panic: runtime error: invalid memory address or nil pointer dereference

unit-tests_1  | [signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0x107dcd4]

unit-tests_1  |

unit-tests_1  | goroutine 499 [running]:

unit-tests_1  | github.com/hyperledger/fabric/core/chaincode.(*Handler).deRegisterTxid(0xc423634000, 0xc42377efc0, 0x0, 0xc42376ba00)

unit-tests_1  |       github.com/hyperledger/fabric/core/chaincode/_test/_obj_test/handler.go:624 +0x1a4

unit-tests_1  | github.com/hyperledger/fabric/core/chaincode.(*Handler).handleModState.func1.1(0xc423634000, 0xc42377efc0, 0xc42376bd68)

unit-tests_1  |       github.com/hyperledger/fabric/core/chaincode/_test/_obj_test/handler.go:1282 +0x51

unit-tests_1  | panic(0x1176600, 0xc4236f4d50)

unit-tests_1  |       /opt/go/src/runtime/panic.go:491 +0x283{code}
This line
{code:java}
chaincodeLogger.Debugf(""[%s]send %s(serial-%t)"", shorttxid(serialSendMsg.Txid), serialSendMsg.Type, serial)
{code}
dereferences the nil message.

This seems to happen occasionally out of the chaincode unit tests after the recent refactors.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i029tx:,,,,,,,,muralisr,sykesm,,,,,,,,,,,,,"15/Mar/18 9:02 PM;muralisr;[~sykesm] I tried to recreate this a few times but couldn't. It seems good to add a ""check for nil"" regardless but also would like to know what causes the nil message in the first place. Can you attach logs next time you see it (will keep retrying too) ?",,,,,,,,,,,,,,,,,,,,,,,
Gossip unit consistently fail out of make unit-tests,FAB-8843,28494,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,nirro,sykesm,sykesm,13/Mar/18 4:30 PM,12/Apr/18 11:38 AM,26/Apr/18 6:50 AM,,v1.2,,,,,,v1.2,,,fabric-gossip,,,,0,flakes,gossip,,,,,,,"-FAB-8067- made some changes related to port allocation. As part of that work, gossip packages were removed from the ""serial_packages"" collection in unit-test/run.sh. Since then, the unit tests have failed 3 out of 4 times when run via `make unit-test` on a local workstation.

Example:
{code:java}
unit-tests_1  | --- FAIL: TestDissemination (185.44s)

unit-tests_1  |       gossip_test.go:702: Membership establishment took 3.0046563s

        Error Trace:    sertions.go:221:

        Error:          Didn't stop within a timely manner

unit-tests_1  |               

        Error Trace:    gossip_test.go:1564

                        gossip_test.go:709

        Error:          Timeout expired!

unit-tests_1  |               

unit-tests_1  |       gossip_test.go:710: Block dissemination took 3m0.0086017s

unit-tests_1  |       gossip_test.go:713: Metadata dissemination took 1.7075ms

        Error Trace:    gossip_test.go:716

        Error:          Not equal: 10 (expected)

unit-tests_1  |                               != 4 (actual)

unit-tests_1  |               

unit-tests_1  |       gossip_test.go:742: Leadership message dissemination took 404.2449ms

unit-tests_1  |       gossip_test.go:748: Stopping peers

unit-tests_1  |       gossip_test.go:756: Stop took 2.0080214s

unit-tests_1  |       gossip_test.go:757: Took 3m5.4371263s

unit-tests_1  | FAIL
{code}
accompanied by thousands of lines of additional noise.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i029st:,,,,,,,,C0rWin,nirro,sykesm,,,,,,,,,,,,"13/Mar/18 4:41 PM;sykesm;Another example:
{code:java}
unit-tests_1  | 2018-03-13 16:39:29.323 UTC [gossip/gossip#p8] handleMessage -> WARN 348 Message GossipMessage: tag:EMPTY alive_msg:<membership:<endpoint:""1.2.3.4:28620"" pki_id:""localhost:28620"" > timestamp:<inc_num:1520959158287783600 seq_num:21 > > , Envelope: 52 bytes, Signature: 52 bytes Secret payload: 17 bytes, Secret Signature: 17 bytes isn't valid

unit-tests_1  | --- FAIL: TestConfidentiality (0.00s)

unit-tests_1  | panic: listen tcp :42610: bind: address already in use [recovered]

unit-tests_1  |       panic: listen tcp :42610: bind: address already in use

unit-tests_1  |

unit-tests_1  | goroutine 273 [running]:

unit-tests_1  | testing.tRunner.func1(0xc4201f51d0)

unit-tests_1  |       /opt/go/src/testing/testing.go:711 +0x2d2

unit-tests_1  | panic(0xde11c0, 0xc422866b40)

unit-tests_1  |       /opt/go/src/runtime/panic.go:491 +0x283

unit-tests_1  | github.com/hyperledger/fabric/gossip/comm.createGRPCLayer(0xa672, 0xec2458, 0xc4202fb618, 0xc4202fb608, 0x815cbe, 0xc42657b940)

unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:683 +0x767

unit-tests_1  | github.com/hyperledger/fabric/gossip/comm.NewCommInstanceWithServer(0xa672, 0x143eb00, 0xc42657b920, 0xc426b0a7e0, 0xf, 0x10, 0x0, 0x0, 0x0, 0x0, ...)

unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:63 +0xb00

unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.createCommWithServer(0xa672, 0x143eb00, 0xc42657b920, 0xc426b0a7e0, 0xf, 0x10, 0x0, 0xc42657b920, 0x87328b, 0xc422e69a80, ...)

unit-tests_1  |       github.com/hyperledger/fabric/gossip/gossip/_test/_obj_test/gossip_impl.go:184 +0xa5

unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.NewGossipService(0xc4222eafd0, 0x0, 0x1430700, 0xc4256f2ba8, 0x143e9e0, 0xc4256f2ba8, 0xc426b0a7e0, 0xf, 0x10, 0x0, ...)

unit-tests_1  |       github.com/hyperledger/fabric/gossip/gossip/_test/_obj_test/gossip_impl.go:94 +0x113f

unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.NewGossipServiceWithServer(0xc4222eafd0, 0x1430700, 0xc4256f2ba8, 0x143e9e0, 0xc4256f2ba8, 0xc426b0a7e0, 0xf, 0x10, 0x0, 0xc421352630, ...)

unit-tests_1  |       github.com/hyperledger/fabric/gossip/gossip/_test/_obj_test/gossip_impl.go:178 +0xa7

unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.newGossipInstanceWithExternalEndpoint(0xa672, 0x0, 0xc4256f2ba8, 0xc426b0a7b0, 0xf, 0x0, 0x0, 0x0, 0x518f2a70205edb94, 0x4c1538aacec57a38)

unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/orgs_test.go:116 +0x3ae

unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.TestConfidentiality(0xc4201f51d0)

unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/orgs_test.go:335 +0x650

unit-tests_1  | testing.tRunner(0xc4201f51d0, 0xec0d20)

unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0xd0

unit-tests_1  | created by testing.(*T).Run

unit-tests_1  |       /opt/go/src/testing/testing.go:789 +0x2de

unit-tests_1  | FAIL  github.com/hyperledger/fabric/gossip/gossip     41.750s{code}","13/Mar/18 4:46 PM;sykesm;Another example:
{code:java}
unit-tests_1  | 2018-03-13 16:45:43.232 UTC [gossip/discovery#localhost:12611] expireDeadMembers -> WARN 148 Exiting

unit-tests_1  | --- FAIL: TestMsgStoreExpiration (38.13s)

        Error Trace:    discovery_test.go:1303

                        discovery_test.go:936

        Error:          Received unexpected error ""context deadline exceeded""

        Messages:       Timeout expired!{code}","13/Mar/18 4:46 PM;sykesm;Another example:
{code:java}
unit-tests_1  | 2018-03-13 16:46:01.739 UTC [gossip/gossip#p1] UpdateLedgerHeight -> WARN 013 No such channel [99 104 97 110 66]

unit-tests_1  | panic: listen tcp :32611: bind: address already in use

unit-tests_1  |

unit-tests_1  | goroutine 402 [running]:

unit-tests_1  | github.com/hyperledger/fabric/gossip/comm.createGRPCLayer(0x7f63, 0x100c170, 0xc420514948, 0xc420514938, 0x8a0f0e, 0xc42039a680)

unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:683 +0x767

unit-tests_1  | github.com/hyperledger/fabric/gossip/comm.NewCommInstanceWithServer(0x7f63, 0x15e9b80, 0xc42039a660, 0xc420372280, 0xf, 0x10, 0x0, 0x0, 0x0, 0x0, ...)

unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:63 +0xb00

unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.createCommWithServer(0x7f63, 0x15e9b80, 0xc42039a660, 0xc420372280, 0xf, 0x10, 0x0, 0xc42039a660, 0x8ff92b, 0xc4201ea040, ...)

unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:174 +0x9b

unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.NewGossipService(0xc42036e160, 0x0, 0x15da040, 0x163bd38, 0x15e9be0, 0x163bd38, 0xc420372280, 0xf, 0x10, 0x0, ...)

unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:97 +0x10c9

unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.NewGossipServiceWithServer(0xc42036e160, 0x15da040, 0x163bd38, 0x15e9be0, 0x163bd38, 0xc420372280, 0xf, 0x10, 0x0, 0x0, ...)

unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:169 +0x9d

unit-tests_1  | github.com/hyperledger/fabric/gossip/service.newGossipInstance(0x7f63, 0x0, 0x64, 0xc420337770, 0x6, 0x6, 0xc4201460c0, 0x20070328)

unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/service/gossip_service_test.go:656 +0x4c5

unit-tests_1  | github.com/hyperledger/fabric/gossip/service.startPeers.func1(0xc42000c2e0, 0x2, 0x2, 0x7f63, 0xc420372190, 0x0)

unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/service/gossip_service_test.go:625 +0x83

unit-tests_1  | created by github.com/hyperledger/fabric/gossip/service.startPeers

unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/service/gossip_service_test.go:623 +0xed

unit-tests_1  | FAIL  github.com/hyperledger/fabric/gossip/service    8.112s{code}",,,,,,,,,,,,,,,,,,,,,
Make command failed in couchdb2.0.0 due to  the url not exists,FAB-8835,28468,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,bjwswang,bjwswang,bjwswang,13/Mar/18 10:08 AM,13/Mar/18 10:10 AM,26/Apr/18 6:50 AM,13/Mar/18 10:10 AM,,,,,,,,,,fabric-build,,,,0,,,,,,,,,"I tried to run ""make all"" command in fabric 1.1-rc1 . But failed in making couchdb image .The tar file not exist  in this url ""https://dist.apache.org/repos/dist/release/couchdb/source/2.0.0"". Only couchdb2.1.1 and couchdb1.7.1 in there.  ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i029nx:,,,,,,,,bjwswang,,,,,,,,,,,,,,13/Mar/18 10:10 AM;bjwswang;Modify the Dockerfile in [https://github.com/hyperledger/fabric/blob/release-1.0/images/couchdb/Dockerfile.in] . Change COUCHDB_VERSION from 2.0.0 to 2.1.1 would work. ,,,,,,,,,,,,,,,,,,,,,,,
deprecated cloudant@1.10.0,FAB-8826,28457,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,rameshthoomu,rameshthoomu,13/Mar/18 1:13 AM,14/Mar/18 2:09 AM,26/Apr/18 6:50 AM,14/Mar/18 2:09 AM,,,,,,,v1.0.6,v1.1,,"fabric-ca, fabric-sdk-node",,,,0,ci_failure,fabric-sdk-node,,,,,,,"It seems cloudant@1.10.0 package is now deprecated and moved to a new name @cloudant/cloudant.
{code:java}
00:05:21.229 node version =======>
00:05:21.231 v6.9.5
00:05:21.993 npm WARN deprecated cloudant@1.10.0: This package is now scoped. The new name is @cloudant/cloudant
00:05:22.459 npm ERR! Linux 4.4.0-112-generic
00:05:22.459 npm ERR! argv ""/home/jenkins/.nvm/versions/node/v6.9.5/bin/node"" ""/home/jenkins/.nvm/versions/node/v6.9.5/bin/npm"" ""install""
00:05:22.477 npm ERR! node v6.9.5
00:05:22.478 npm ERR! npm  v3.10.10
00:05:22.478 npm ERR! code EREADFILE
00:05:22.478 
00:05:22.478 npm ERR! Error extracting /home/jenkins/.npm/cloudant/1.9.0/package.tgz archive: ENOENT: no such file or directory, open '/home/jenkins/.npm/cloudant/1.9.0/package.tgz'{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i029lh:,,,,,,,,harrisob@us.ibm.com,rameshthoomu,,,,,,,,,release-1.0,master,,true,13/Mar/18 6:02 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/19125/,13/Mar/18 9:03 PM;harrisob@us.ibm.com;For V1.0 https://gerrit.hyperledger.org/r/#/c/19137/,,,,,,,,,,,,,,,,,,,,,,
Documentation corrections in lazyref/lazycache/futurevalue,FAB-8821,28452,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,bstasyszyn,bstasyszyn,12/Mar/18 10:39 PM,13/Mar/18 12:31 AM,26/Apr/18 6:50 AM,13/Mar/18 12:31 AM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i029k5:,,,,,,,,bstasyszyn,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"Fabric docs showing multiple TOC, titles very small",FAB-8798,28424,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,joe-alewine,joe-alewine,12/Mar/18 2:47 PM,29/Mar/18 6:51 PM,26/Apr/18 6:50 AM,29/Mar/18 6:51 PM,,,,,,,v1.2,,,fabric-docs,,,,0,,,,,,,,,"http://hyperledger-fabric.readthedocs.io/en/latest/index.html

The new reconfiguration of the docs is confusing and hard to read. The left nav now shows up twice, and the titles of docs are small enough to be hard to read.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzygi:0iv,,,,,,,,denyeart,joe-alewine,markparz,,,,,,,,,,,,"13/Mar/18 12:43 PM;denyeart;I think the recent refactor of the top level TOC does improve navigation, but the fact that the TOC appears twice is problematic.  Any ideas on that [~joe-alewine] [~odowdaibm] [~ChristopherFerris] ?",13/Mar/18 1:44 PM;joe-alewine;[~markparz],"13/Mar/18 4:17 PM;markparz;Agree, the duplication is problematic. The formatting is also bad as the words shrink more and more, getting to a point of being hard to read. ",29/Mar/18 6:51 PM;joe-alewine;Fixed in master branch.,,,,,,,,,,,,,,,,,,,,
Getting slower and slower when shout down nodes and getting SERVICE_UNAVAILABLE response,FAB-8789,28412,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,kungyc,kungyc,12/Mar/18 7:07 AM,26/Mar/18 6:43 PM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"After testing, SDK will be stacked and use more and more time when using ""sendTransaction"" in Channel.js when peers was shut down.

 

Testing scenario:

1. Create and join channel.

 2. Shut down peers in orgs

3. Send endorse proposal to peers.

4. Get SERVICE_UNAVAILABLE response.

3. Send endorse proposal to peers.

4. Get SERVICE_UNAVAILABLE response for 4s later.

......

The more times I loop, the more time the function will take.

 

This situation not just happen on peer, when I send the request to a crashed orderer, it will happen either.",,,,,,,,,,,,,,,,,,,,15/Mar/18 9:43 AM;kungyc;debug.log;https://jira.hyperledger.org/secure/attachment/14779/debug.log,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i029bp:,,,,,,,,denyeart,harrisob@us.ibm.com,kungyc,zhaochy,,,,,,,,,,,13/Mar/18 12:45 PM;denyeart;[~harrisob@us.ibm.com] Any idea?,"14/Mar/18 9:02 PM;harrisob@us.ibm.com;I am unable to recreate. Would you provide a debug log 
export HFC_LOGGING='\{""debug"":""console""}'","15/Mar/18 9:48 AM;kungyc;As the timestamps of debug.log file, the first time I send the broadcast and it took 0.02 s to send back the response, and the second time it took 3s, the third time is 4s, then is 10s, 23s finally is 1m18s.",15/Mar/18 2:40 PM;harrisob@us.ibm.com;What are the versions of GRPC and fabric-client,"15/Mar/18 4:55 PM;kungyc;Fabric-client is 
""version"": ""1.1.0-snapshot.98""
 
Grpc is 
""version"": ""1.9.1""","26/Mar/18 6:42 PM;harrisob@us.ibm.com;I tried again.... still not able to recreate... I set setup a network ... do one good send broadcast, then kill the fabric network when the NodeSDK waits on a 10 second sleep, then have it do more send broadcasts ... which all fail within 150 milliseconds.

Are you setting any other GRPC options ?",,,,,,,,,,,,,,,,,,
Panic in BYFN bringup,FAB-8784,28407,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,vijayendrabvs,vijayendrabvs,12/Mar/18 1:28 AM,07/Apr/18 2:11 PM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-samples,,,,0,,,,,,,,,"When running byfn.sh -m up, I'm seeing this panic (this is on Ubuntu 16.04) -

 

```

2018-03-12 01:13:07.546 UTC [msp] GetLocalMSP -> DEBU 00c Returning existing local MSP [112/1843]
2018-03-12 01:13:07.546 UTC [msp] GetDefaultSigningIdentity -> DEBU 00d Obtaining default signing identity
2018-03-12 01:13:07.546 UTC [msp/identity] Sign -> DEBU 00e Sign: plaintext: 0AD9060A1508021A0608A3A897D50522...7F6D75BC6B78BA22490E8316272B0D6F
2018-03-12 01:13:07.546 UTC [msp/identity] Sign -> DEBU 00f Sign: digest: E530B27446AF8FD063CB74962335A678F2D9358BD98BEFFF5DB2B16CB2EAB66B
fatal error: unexpected signal during runtime execution
[signal SIGSEGV: segmentation violation code=0x1 addr=0x63 pc=0x7fefc1e8e259]

runtime stack:
runtime.throw(0xf11319, 0x2a)
/opt/go/src/runtime/panic.go:605 +0x95
runtime.sigpanic()
/opt/go/src/runtime/signal_unix.go:351 +0x2b8

goroutine 16 [syscall, locked to thread]:
runtime.cgocall(0xbf38d0, 0xc420032de8, 0xf0fae1)
/opt/go/src/runtime/cgocall.go:132 +0xe4 fp=0xc420032da8 sp=0xc420032d68 pc=0x4023b4
net._C2func_getaddrinfo(0x7fefb80008c0, 0x0, 0xc4204b8f90, 0xc4201be150, 0x0, 0x0, 0x0)
net/_obj/_cgo_gotypes.go:86 +0x5f fp=0xc420032de8 sp=0xc420032da8 pc=0x5f893f
net.cgoLookupIPCNAME.func2(0x7fefb80008c0, 0x0, 0xc4204b8f90, 0xc4201be150, 0xc4201db5c0, 0x7ffdc438ba83, 0x13)
/opt/go/src/net/cgo_unix.go:151 +0x13f fp=0xc420032e40 sp=0xc420032de8 pc=0x5ffedf
net.cgoLookupIPCNAME(0x7ffdc438ba83, 0x13, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)
/opt/go/src/net/cgo_unix.go:151 +0x175 fp=0xc420032f38 sp=0xc420032e40 pc=0x5fa195
net.cgoIPLookup(0xc4201db740, 0x7ffdc438ba83, 0x13)
/opt/go/src/net/cgo_unix.go:203 +0x4d fp=0xc420032fc8 sp=0xc420032f38 pc=0x5fa8dd
runtime.goexit()
/opt/go/src/runtime/asm_amd64.s:2337 +0x1 fp=0xc420032fd0 sp=0xc420032fc8 pc=0x45e391
created by net.cgoLookupIP
/opt/go/src/net/cgo_unix.go:213 +0xaf

goroutine 1 [select]:
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.DialContext(0x7fefc2210d40, 0xc4201db500, 0x7ffdc438ba83, 0x18, 0xc420431820, 0x4, 0x4, 0x0, 0x0, 0x0)
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:422 +0x532
github.com/hyperledger/fabric/core/comm.(*grpcClient).NewConnection(0xc4204be780, 0x7ffdc438ba83, 0x18, 0x0, 0x0, 0x0, 0x0, 0x0)
/opt/gopath/src/github.com/hyperledger/fabric/core/comm/client.go:217 +0x389
github.com/hyperledger/fabric/peer/common.(*OrdererClient).Broadcast(0xc4204b8e10, 0x0, 0x0, 0xc420499b10, 0xbc3909)
/opt/gopath/src/github.com/hyperledger/fabric/peer/common/ordererclient.go:50 +0x6c
github.com/hyperledger/fabric/peer/common.GetBroadcastClient(0x380, 0xc42033a120, 0x112, 0x112)
/opt/gopath/src/github.com/hyperledger/fabric/peer/common/broadcastclient.go:41 +0x3e
github.com/hyperledger/fabric/peer/channel.InitCmdFactory.func1(0xc4201fc360, 0xc4204b89f0, 0x0, 0x0)
/opt/gopath/src/github.com/hyperledger/fabric/peer/channel/channel.go:136 +0x29
github.com/hyperledger/fabric/peer/channel.sendCreateChainTransaction(0xc42035f630, 0x0, 0x0)
/opt/gopath/src/github.com/hyperledger/fabric/peer/channel/create.go:164 +0xa7
github.com/hyperledger/fabric/peer/channel.executeCreate(0xc42035f630, 0xc42035f630, 0x0)
/opt/gopath/src/github.com/hyperledger/fabric/peer/channel/create.go:178 +0x2f
github.com/hyperledger/fabric/peer/channel.create(0xc4202e46c0, 0xc420388780, 0x1, 0xa, 0x0, 0xd5b080, 0x16705c0)
/opt/gopath/src/github.com/hyperledger/fabric/peer/channel/create.go:213 +0x40
github.com/hyperledger/fabric/peer/channel.createCmd.func1(0xc4202e46c0, 0xc420388780, 0x1, 0xa, 0x0, 0x0)
/opt/gopath/src/github.com/hyperledger/fabric/peer/channel/create.go:59 +0x52
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0xc4202e46c0, 0xc420388640, 0xa, 0xa, 0xc4202e46c0, 0xc420388640)
/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:599 +0x3e8
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x164d4e0, 0x11, 0xc420314390, 0x5)
/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 +0x2fe
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x164d4e0, 0x7d, 0xc420014035)
/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 +0x2b
main.main()
/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:112 +0x5e1

goroutine 36 [syscall]:
os/signal.signal_recv(0x0)
/opt/go/src/runtime/sigqueue.go:131 +0xa6
os/signal.loop()
/opt/go/src/os/signal/signal_unix.go:22 +0x22

created by os/signal.init.0
/opt/go/src/os/signal/signal_unix.go:28 +0x41

goroutine 8 [IO wait]:
internal/poll.runtime_pollWait(0x7fefc2a89f70, 0x72, 0x0)
/opt/go/src/runtime/netpoll.go:173 +0x57
internal/poll.(*pollDesc).wait(0xc42012fd98, 0x72, 0xffffffffffffff00, 0x165d680, 0x1654ba0)
/opt/go/src/internal/poll/fd_poll_runtime.go:85 +0xae
internal/poll.(*pollDesc).waitRead(0xc42012fd98, 0xc420288c00, 0x400, 0x400)
/opt/go/src/internal/poll/fd_poll_runtime.go:90 +0x3d
internal/poll.(*FD).Read(0xc42012fd80, 0xc420288c00, 0x400, 0x400, 0x0, 0x0, 0x0)
/opt/go/src/internal/poll/fd_unix.go:126 +0x18a
net.(*netFD).Read(0xc42012fd80, 0xc420288c00, 0x400, 0x400, 0xc42046a380, 0x0, 0x412436)
/opt/go/src/net/fd_unix.go:202 +0x52
net.(*conn).Read(0xc420126518, 0xc420288c00, 0x400, 0x400, 0x0, 0x0, 0x0)
/opt/go/src/net/net.go:176 +0x6d
crypto/tls.(*block).readFromUntil(0xc42043ac90, 0x7fefc2210e00, 0xc420126518, 0x5, 0xc420126518, 0x0)
/opt/go/src/crypto/tls/conn.go:488 +0x95
crypto/tls.(*Conn).readRecord(0xc420219500, 0xf35617, 0xc420219620, 0xc4204b0c48)
/opt/go/src/crypto/tls/conn.go:590 +0xe0
crypto/tls.(*Conn).Read(0xc420219500, 0xc42045a000, 0x8000, 0x8000, 0x0, 0x0, 0x0)
/opt/go/src/crypto/tls/conn.go:1134 +0x110
bufio.(*Reader).Read(0xc42044c600, 0xc4204a8038, 0x9, 0x9, 0x18, 0xe52c20, 0x0)
/opt/go/src/bufio/bufio.go:213 +0x30b
io.ReadAtLeast(0x1656c00, 0xc42044c600, 0xc4204a8038, 0x9, 0x9, 0x9, 0x0, 0x412436, 0xc4204b0da0)
/opt/go/src/io/io.go:309 +0x86
io.ReadFull(0x1656c00, 0xc42044c600, 0xc4204a8038, 0x9, 0x9, 0xc4204a8028, 0x0, 0x4)
/opt/go/src/io/io.go:327 +0x58
github.com/hyperledger/fabric/vendor/golang.org/x/net/http2.readFrameHeader(0xc4204a8038, 0x9, 0x9, 0x1656c00, 0xc42044c600, 0x0, 0x0, 0xc4204b8030, 0x0)
/opt/gopath/src/github.com/hyperledger/fabric/vendor/golang.org/x/net/http2/frame.go:237 +0x7b
github.com/hyperledger/fabric/vendor/golang.org/x/net/http2.(*Framer).ReadFrame(0xc4204a8000, 0x165fd00, 0xc4204b8030, 0x0, 0x0)
/opt/gopath/src/github.com/hyperledger/fabric/vendor/golang.org/x/net/http2/frame.go:492 +0xa4
github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport.(*framer).readFrame(0xc4201ef560, 0xc4204b8030, 0xc4204b8030, 0x0, 0x0)
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport/http_util.go:592 +0x2f
github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport.(*http2Client).reader(0xc42007e820)
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport/http2_client.go:1154 +0xc0
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport.newHTTP2Client
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport/http2_client.go:260 +0xbf8

goroutine 9 [select]:
github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport.(*http2Client).controller(0xc42007e820)
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport/http2_client.go:1227 +0x148
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport.newHTTP2Client
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport/http2_client.go:290 +0xd2e

goroutine 10 [select]:
github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport.(*http2Client).keepalive(0xc42007e820)
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport/http2_client.go:1276 +0x13c
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport.newHTTP2Client
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport/http2_client.go:292 +0xdd2

goroutine 11 [select]:
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*addrConn).transportMonitor(0xc42028e380)
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:995 +0x1de
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*ClientConn).resetAddrConn
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:716 +0x67a

goroutine 13 [select]:
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.newClientStream.func3(0x166c200, 0xc42007e820, 0xc42028e1c0, 0xc4200ae9a0, 0xc42011a800)
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/stream.go:255 +0x1cd

created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.newClientStream
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/stream.go:254 +0xe23

goroutine 14 [select]:
net.(*Resolver).LookupIPAddr(0x169d370, 0x1667b40, 0xc4201db5c0, 0x7ffdc438ba83, 0x13, 0x0, 0x0, 0x0, 0x0, 0x0)
/opt/go/src/net/lookup.go:196 +0x52b
net.(*Resolver).internetAddrList(0x169d370, 0x1667b40, 0xc4201db5c0, 0xee76f6, 0x3, 0x7ffdc438ba83, 0x18, 0x0, 0x0, 0x0, ...)
/opt/go/src/net/ipsock.go:293 +0x644
net.(*Resolver).resolveAddrList(0x169d370, 0x1667b40, 0xc4201db5c0, 0xee7c00, 0x4, 0xee76f6, 0x3, 0x7ffdc438ba83, 0x18, 0x0, ...)
/opt/go/src/net/dial.go:193 +0x594
net.(*Dialer).DialContext(0xc420485458, 0x1667b40, 0xc4201db5c0, 0xee76f6, 0x3, 0x7ffdc438ba83, 0x18, 0x0, 0x0, 0x0, ...)
/opt/go/src/net/dial.go:375 +0x248
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.dialContext(0x1667b40, 0xc4201db5c0, 0xee76f6, 0x3, 0x7ffdc438ba83, 0x18, 0x0, 0x0, 0xc4201ac500, 0xc42012f380)
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/go17.go:38 +0xb3
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.DialContext.func1(0x7fefc2210d40, 0xc4201db5c0, 0x7ffdc438ba83, 0x18, 0x0, 0x0, 0x16571c0, 0xc420124ca0)
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:329 +0x86
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.newProxyDialer.func1(0x7fefc2210d40, 0xc4201db5c0, 0x7ffdc438ba83, 0x18, 0x0, 0x0, 0x0, 0x0)
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/proxy.go:121 +0x137
github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport.dial(0x7fefc2210d40, 0xc4201db5c0, 0xc420321930, 0x7ffdc438ba83, 0x18, 0x0, 0x0, 0x0, 0x0)
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport/http2_client.go:119 +0x5a
github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport.newHTTP2Client(0x7fefc2210d40, 0xc4201db5c0, 0x7ffdc438ba83, 0x18, 0x0, 0x0, 0xeef571, 0xd, 0x0, 0x0, ...)
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport/http2_client.go:157 +0xa7
github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport.NewClientTransport(0x7fefc2210d40, 0xc4201db5c0, 0x7ffdc438ba83, 0x18, 0x0, 0x0, 0xeef571, 0xd, 0x0, 0x0, ...)
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport/transport.go:505 +0xae
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*addrConn).resetTransport(0xc42028e700, 0xc4204b8e00, 0xc42028e720, 0xc4201e0528)
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:929 +0x4b4
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*ClientConn).resetAddrConn(0xc42028e000, 0x7ffdc438ba83, 0x18, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0)
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:702 +0x340
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.DialContext.func3(0xc4201db560, 0xc42028e000, 0x1669a40, 0xc4201be140, 0x7ffdc438ba83, 0x18)
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:417 +0x223
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.DialContext
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:386 +0x441

goroutine 15 [select]:
net.cgoLookupIP(0x1667b40, 0xc4201db5c0, 0x7ffdc438ba83, 0x13, 0xc4204ae480, 0x1656c00, 0xc42044c600, 0xc4204a8038, 0x9, 0x9)
/opt/go/src/net/cgo_unix.go:214 +0x1b0
net.(*Resolver).lookupIP(0x169d370, 0x1667b40, 0xc4201db5c0, 0x7ffdc438ba83, 0x13, 0x1656c00, 0xc42044c600, 0x0, 0x0, 0x0)
/opt/go/src/net/lookup_unix.go:95 +0x12d
net.(*Resolver).(net.lookupIP)-fm(0x1667b40, 0xc4201db5c0, 0x7ffdc438ba83, 0x13, 0x3, 0xc4201e5b00, 0xc420060540, 0x0, 0xc420020000)
/opt/go/src/net/lookup.go:187 +0x56
net.glob..func10(0x1667b40, 0xc4201db5c0, 0xc4203219d0, 0x7ffdc438ba83, 0x13, 0x42ad09, 0xc400000008, 0xc420060540, 0xc4204a8000, 0x8db329)
/opt/go/src/net/hook.go:19 +0x52
net.(*Resolver).LookupIPAddr.func1(0x18, 0x0, 0x0, 0x1)
/opt/go/src/net/lookup.go:193 +0x5c
internal/singleflight.(*Group).doCall(0x169d360, 0xc4204bea00, 0x7ffdc438ba83, 0x13, 0xc4204b8f00)
/opt/go/src/internal/singleflight/singleflight.go:93 +0x2e
created by internal/singleflight.(*Group).DoChan
/opt/go/src/internal/singleflight/singleflight.go:86 +0x31f
!!!!!!!!!!!!!!! Channel creation failed !!!!!!!!!!!!!!!!
========= ERROR !!! FAILED to execute End-2-End Scenario ===========

```

 

Here is the docker image listing -

 

```

===> List out hyperledger docker images
hyperledger/fabric-ca latest 8a6c8c2e2ebf 10 days ago 283MB
hyperledger/fabric-ca x86_64-1.1.0-rc1 8a6c8c2e2ebf 10 days ago 283MB
hyperledger/fabric-tools latest 006c689ec08e 10 days ago 1.46GB
hyperledger/fabric-tools x86_64-1.1.0-rc1 006c689ec08e 10 days ago 1.46GB
hyperledger/fabric-orderer latest 10afc128d402 10 days ago 180MB
hyperledger/fabric-orderer x86_64-1.1.0-rc1 10afc128d402 10 days ago 180MB
hyperledger/fabric-peer latest 6b44b1d021cb 10 days ago 187MB
hyperledger/fabric-peer x86_64-1.1.0-rc1 6b44b1d021cb 10 days ago 187MB
hyperledger/fabric-javaenv latest ea263125afb1 10 days ago 1.52GB
hyperledger/fabric-javaenv x86_64-1.1.0-rc1 ea263125afb1 10 days ago 1.52GB
hyperledger/fabric-ccenv latest 65c951b9681f 10 days ago 1.39GB
hyperledger/fabric-ccenv x86_64-1.1.0-rc1 65c951b9681f 10 days ago 1.39GB
hyperledger/fabric-zookeeper latest 92cbb952b6f8 3 weeks ago 1.39GB
hyperledger/fabric-zookeeper x86_64-0.4.6 92cbb952b6f8 3 weeks ago 1.39GB
hyperledger/fabric-kafka latest 554c591b86a8 3 weeks ago 1.4GB
hyperledger/fabric-kafka x86_64-0.4.6 554c591b86a8 3 weeks ago 1.4GB
hyperledger/fabric-couchdb latest 7e73c828fc5b 3 weeks ago 1.56GB
hyperledger/fabric-couchdb x86_64-0.4.6 7e73c828fc5b 3 weeks ago 1.56GB
hyperledger/sawtooth-tp_xo_python 0.8 a0922deeaef6 3 months ago 176MB
hyperledger/sawtooth-validator 0.8 9a5de658200c 3 months ago 180MB
hyperledger/sawtooth-all 0.8 9743e987285f 3 months ago 193MB
hyperledger/sawtooth-tp_settings 0.8 9fe41c26c4f2 3 months ago 172MB
hyperledger/sawtooth-rest_api 0.8 ca6439f7b4cc 3 months ago 177MB
hyperledger/sawtooth-tp_intkey_python 0.8 b9889db3ae41 3 months ago 172MB

```

 ",Ubuntu 16.04.,,,,,,,,,,,,,,,FAB-5822,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i029at:,,,,,,,,mastersingh24,vijayendrabvs,,,,,,,,,,,,,"12/Mar/18 9:13 AM;mastersingh24;[~vijayendrabvs] - Are you running in a cloud environment or on a local workstation / server?

Looks like this is a DNS resolver issue  .... you can try setting the following environment variable for each of the entries in the docker-compose file:  {{GODEBUG=netdns=go}}",12/Mar/18 9:15 AM;mastersingh24;Possible duplicate ... symptoms seem to be the same,,,,,,,,,,,,,,,,,,,,,,
"Resolve linter warnings in peer, orderer, comm",FAB-8782,28404,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,troyronda,troyronda,troyronda,11/Mar/18 11:28 PM,19/Mar/18 8:30 PM,26/Apr/18 6:50 AM,19/Mar/18 8:30 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i029a5:,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
orderer needs to call context ReleaseConn,FAB-8781,28403,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,troyronda,troyronda,11/Mar/18 10:07 PM,13/Mar/18 11:25 AM,26/Apr/18 6:50 AM,11/Mar/18 10:36 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0299x:,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Recover a cached conn from server HUP ,FAB-8780,28402,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,troyronda,troyronda,11/Mar/18 8:23 PM,19/Mar/18 8:29 PM,26/Apr/18 6:50 AM,19/Mar/18 8:29 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0299p:,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Error while trying to join Channel using different orderer,FAB-8760,28378,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,edluizl,edluizl,09/Mar/18 7:28 PM,15/Mar/18 11:59 AM,26/Apr/18 6:50 AM,,,,,,,,,,,,,,,0,,,,,,,,,"I'm trying to make a Peer join two channels each with its own Orderer, so I have the following scenario:

- A channel named solochannel with an orderer Solo, using the port 7050
- A channel named kafkachannel with an orderer Kafka, using the port 8050

1- I create the chanels using the command
{code:java}
peer channel create -o orderer:8050 -c solochannel -f ./channel-artifacts/channelSolo.tx
peer channel create -o ordererKafka:8050 -c kafkachannel -f ./channel-artifacts/channelKafka.tx{code}

2- After creating both channels, I start a peer to join them in both channels
{code:java}
peer channel join -b solochannel.block
peer channel join -b kafkachannel.block{code}


This step shows a message saying that the Peer was able to join both channels,
and if I try to list all channels using 'Peer channel list', it shows that the
Peer joined both channels successfully.

3- I open the Log for the Peer and the peer is trying to send information of the
last Channel it joined to the orderer of the First channel.

So for example:
If I join the solochannel first, It tries to send information of the kafkachannel to the ordererKafka:8050 and fails with the message Got error &\{NOT_FOUND}
If I join the kafkachannel first, It tries to send information of the solochannel to the ordererSolo:7050 and fails with the message Got error &\{NOT_FOUND}

This is the Log from the Peer
{code:java}
2018-03-07 16:58:06.071 UTC [deliveryClient] StartDeliverForChannel -> DEBU 6d0 This peer will pass blocks from orderer service to other peers for channel kafkachannel
2018-03-07 16:58:06.074 UTC [deliveryClient] connect -> DEBU 6d1 Connected to ordererSolo:7050
2018-03-07 16:58:06.074 UTC [deliveryClient] connect -> DEBU 6d2 Establishing gRPC stream with ordererSolo:7050 ...
2018-03-07 16:58:06.077 UTC [deliveryClient] afterConnect -> DEBU 6d3 Entering
2018-03-07 16:58:06.078 UTC [deliveryClient] RequestBlocks -> DEBU 6d4 Starting deliver with block [1] for channel kafkachannel
2018-03-07 16:58:06.082 UTC [deliveryClient] afterConnect -> DEBU 6d5 Exiting
2018-03-07 16:58:06.084 UTC [blocksProvider] DeliverBlocks -> WARN 6d6 [kafkachannel] Got error &{NOT_FOUND}{code}

This is the Log from the ordererSolo:7050
{code:java}
2018-03-07 16:58:06.076 UTC [orderer/main] Deliver -> DEBU 1f5 Starting new Deliver handler
2018-03-07 16:58:06.076 UTC [orderer/common/deliver] Handle -> DEBU 1f6 Starting new deliver loop
2018-03-07 16:58:06.076 UTC [orderer/common/deliver] Handle -> DEBU 1f7 Attempting to read seek info message
2018-03-07 16:58:06.082 UTC [orderer/common/deliver] Handle -> DEBU 1f8 Rejecting deliver because channel kafkachannel not found
2018-03-07 16:58:06.082 UTC [orderer/main] func1 -> DEBU 1f9 Closing Deliver stream{code}

This keeps happening forever.

While I keep having this error, I cannot instantiate or upgrade a chaincode on the second channel


I'm having this error for both versions 1.0.5 and 1.0.6.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0294l:,,,,,,,,edluizl,,,,,,,,,,,,,,"15/Mar/18 11:59 AM;edluizl;I have tried this same approach using the version 1.1.0-rc1 and couldn't replicate de behaviour, it seems as if this was already fix for the new version",,,,,,,,,,,,,,,,,,,,,,,
peer/chaincode certificate missing Issuer/Subject,FAB-8757,28370,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,sanchezl,sanchezl,09/Mar/18 6:37 PM,22/Mar/18 3:30 AM,26/Apr/18 6:50 AM,21/Mar/18 2:52 PM,,,,,,,v1.1.1,v1.2,,fabric-crypto,,,,0,,,,,,,,,The self-signed certificates generated for the peer/chaincode connection do not contain the required fields of {{Issuer}} and {{Subject}} (see [RFC 5280 §4.1.2.2|https://tools.ietf.org/html/rfc5280#section-4.1.2.4] ). This causes problems in Java chaincode as the JDK libraries validate that certificates contain all required fields.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0292t:,,,,,,,,denyeart,sanchezl,,,,,,,,,release-1.1,master,,true,09/Mar/18 8:06 PM;sanchezl;https://gerrit.hyperledger.org/r/c/18965/,11/Mar/18 5:23 AM;denyeart;And master CR (1.2) is https://gerrit.hyperledger.org/r/#/c/18963/ .,,,,,,,,,,,,,,,,,,,,,,
Eventhub should stop stream when unregister fails,FAB-8754,28355,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,troyronda,troyronda,troyronda,09/Mar/18 4:54 PM,19/Mar/18 8:31 PM,26/Apr/18 6:50 AM,19/Mar/18 8:31 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i028zh:,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - allow full use of admin identity,FAB-8749,28343,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,09/Mar/18 2:50 PM,30/Mar/18 4:53 PM,26/Apr/18 6:50 AM,26/Mar/18 7:32 PM,,,,,,,v1.2,,,fabric-sdk-node,,,,0,,,,,,,,,All functions should be able to use the admin identity. The method getChannelConfigFromOrderer() should be able to use the admin identity if present. The channel event service should also be able to use the admin identity if assigned to the client instance. Have a test case that will show full use of the admin identity. Test case should show how the connection profile will set the admin identity and also show manually reading the key and cert and then setting the client instance with those to create an admin identity.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i028xh:,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,release-1.1,master,,true,"20/Mar/18 7:39 PM;harrisob@us.ibm.com;[https://gerrit.hyperledger.org/r/#/c/19181/] — v1.2

[https://gerrit.hyperledger.org/r/#/c/19481/] — v1.1",,,,,,,,,,,,,,,,,,,,,,,
Fix more typos in BlockDecoder,FAB-8736,28328,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sudheesh001,sudheesh001,sudheesh001,09/Mar/18 5:18 AM,09/Mar/18 9:44 AM,26/Apr/18 6:50 AM,09/Mar/18 9:44 AM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"There are a few typo issues and logical issue in the value returned from `decodeSigningIdentityInfo()`.

These issues need to be fixed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i028u5:,,,,,,,,sudheesh001,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Usability: `peer chaincode install` behaves differently/unexpectedly for Node chaincode ,FAB-8731,28316,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,AdnanChoudhury,AdnanChoudhury,08/Mar/18 8:03 PM,09/Mar/18 11:03 PM,26/Apr/18 6:50 AM,09/Mar/18 11:00 PM,,,,,,,v1.1,v1.2,,fabric-docs,,,,0,Quality,,,,,,,,"*Observation*:
 While doing
{code:java}
peer chaincode install{code}
 through the CLI container, The \{path} flag behavior is different for node chaincode vs. golang chaincode.

*to reproduce:*
 In the CLI container, the location 
{code:java}
/opt/gopath/src/github.com/hyperledger/fabric-samples/chaincode/marbles02{code}
has two folders `go` and `node` and they have a golang chaincode and node chaincode correspondingly.
 To install the golang cc, this works:

 
{code:java}
peer chaincode install --name mycc1 --lang GOLANG --version 0 --path github.com/hyperledger/fabric-samples/chaincode/marbles02/go 
{code}
 But the corresponding command for Node cc fails. i.e. if the following command is tried,

 
{code:java}
peer chaincode install --name mycc1 --lang NODE --version 0 --path github.com/hyperledger/fabric-samples/chaincode/marbles02/node {code}
 

It fails with the message:
{code:java}
Error: Error getting chaincode code chaincode: path to chaincode does not exist: github.com/hyperledger/fabric-samples/chaincode/marbles02/node{code}
*Expectation*:
 The node chaincode install should pass.

*Note*: 
 The node cc install passes if relative path is used i.e. 

 
{code:java}
--path ../..fabric-samples/chaincode/marbles02/node
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i028rp:,,,,,,,,AdnanChoudhury,denyeart,luomin,wlahti,,,,,,,release-1.1,master,,true,"09/Mar/18 12:59 PM;denyeart;The difference is that with go chaincode the GOPATH is used, whereas with node chaincode, an absolute or relative path is used.

This is working as designed, but we need to document it more clearly at:
http://hyperledger-fabric.readthedocs.io/en/v1.1.0-rc1/commands/peerchaincode.html#install-flags

[~wlahti] Can you help to improve that doc in *release-1.0* and *master* branches?

Also, the peer command line help should similarly be improved, but let's do that in *master* branch only, since we are in code freeze for *release-1.0* branch.","09/Mar/18 2:01 PM;wlahti;CR pushed to gerrit for review.

master branch - [https://gerrit.hyperledger.org/r/c/18927/]

release-1.1 - https://gerrit.hyperledger.org/r/c/18971",,,,,,,,,,,,,,,,,,,,,,
CA sample in fabric-samples does not work with hyphens in orderer,FAB-8730,28313,Bug,In Review,FAB,Fabric,software,ChristopherFerris,,,Medium,,,rennman,rennman,08/Mar/18 6:59 PM,28/Mar/18 4:25 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-samples,,,,0,,,,,,,,,"The jq script which performs the config update in scripts/run-fabric.sh fails if the orderer name contains a hyphen:
  jq: error: union/0 is not defined at <top-level>, line 1:

It requires adding an escaped set of double quotes:
{{.channel_group.groups.Application.groups.'""$\{ORG}""'.values.MSP.value.config.revocation_list}}
{{channel_group.groups.Application.groups.'""\""$\{ORG}\""""'.values.MSP.value.config.revocation_list}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i028rh:,,,,,,,,denyeart,rennman,smithbk,,,,,,,,,,,,08/Mar/18 7:20 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/18891/,09/Mar/18 2:16 PM;denyeart;[~smithbk] Do you want to target this fix for fabric-samples 1.1?  I'm ok with that if you think risk is low.,"12/Mar/18 3:04 PM;smithbk;Since this only happens when customizing the sample in a particular way, I don't think it is needed for v1.2.  And also want to make sure that other customizations don't issues also.",,,,,,,,,,,,,,,,,,,,,
Typo in peerchannel.md,FAB-8728,28310,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,nnao,nnao,08/Mar/18 6:50 PM,11/Mar/18 2:34 PM,26/Apr/18 6:50 AM,11/Mar/18 2:34 PM,v1.1.0-rc1,,,,,,v1.1,v1.2,,fabric-docs,,,,0,Documentation,,,,,,,,"I found repeating ""be"" in /docs/source/commands/peerchannel.md
Maybe it is a typo.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i028r1:,,,,,,,,nnao,,,,,,,,,,release-1.1,master,,true,08/Mar/18 7:07 PM;nnao;https://gerrit.hyperledger.org/r/#/c/18893/,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - allow HSM settings as strings,FAB-8723,28301,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,08/Mar/18 4:17 PM,10/Mar/18 5:49 AM,26/Apr/18 6:50 AM,10/Mar/18 5:49 AM,,,,,,,v1.0.4,v1.1,,fabric-sdk-node,,,,0,,,,,,,,,Allow the HSM settings that are numeric to be passed in as environment string settings and converted to numeric,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i028ph:,,,,,,,,harrisob@us.ibm.com,zhaochy,,,,,,,,,release-1.0,master,,true,10/Mar/18 5:49 AM;zhaochy;https://gerrit.hyperledger.org/r/#/c/18989/,,,,,,,,,,,,,,,,,,,,,,,
Error when creating a new couchdb instance in 1.1.0-rc1,FAB-8722,28300,Bug,In Review,FAB,Fabric,software,ChristopherFerris,,,Medium,,chris.elder,aatkddny,aatkddny,08/Mar/18 3:43 PM,02/Apr/18 3:17 PM,26/Apr/18 6:50 AM,,v1.1,,,,,,v1.2,,,fabric-ledger,,,,0,,,,,,,,,"When I start a fresh instance of a couchdb database using the containers downloaded by the standard 1.1.0-rc1 install script the couchdb container throws continual errors. 

 

 

Startup script was the normal fabric samples byfn, fired off using:

./byfn.sh -m up -s couchdb -i 1.1.0-rc1

 

If you check the container logs for the couchdb instances you can see that the errors don't stop. 

This is a change in behavior from that seen in -alpha, which didn't have this issue.",,,,,,,,,,,,,,,,,,,,08/Mar/18 3:36 PM;aatkddny;Screen Shot 2018-03-08 at 9.04.40 AM.png;https://jira.hyperledger.org/secure/attachment/14744/Screen+Shot+2018-03-08+at+9.04.40+AM.png,08/Mar/18 3:37 PM;aatkddny;Screen Shot 2018-03-08 at 9.34.47 AM.png;https://jira.hyperledger.org/secure/attachment/14742/Screen+Shot+2018-03-08+at+9.34.47+AM.png,08/Mar/18 3:36 PM;aatkddny;Screen Shot 2018-03-08 at 9.43.10 AM.png;https://jira.hyperledger.org/secure/attachment/14743/Screen+Shot+2018-03-08+at+9.43.10+AM.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9n40i,,Next Items- Ledger,,,,,,aatkddny,chris.elder,denyeart,,,,,,,,,,,,"08/Mar/18 3:59 PM;denyeart;I attempted to reproduce:

{noformat}
./byfn.sh -m up -s couchdb
docker logs couchdb0
{noformat}

Here's what I see coming out of couchdb:

{code:java}
[info] 2018-03-08T15:54:11.446649Z nonode@nohost <0.7.0> -------- Application couch_log started on node nonode@nohost
[info] 2018-03-08T15:54:11.464606Z nonode@nohost <0.7.0> -------- Application folsom started on node nonode@nohost
[info] 2018-03-08T15:54:11.557156Z nonode@nohost <0.7.0> -------- Application couch_stats started on node nonode@nohost
[info] 2018-03-08T15:54:11.558611Z nonode@nohost <0.7.0> -------- Application khash started on node nonode@nohost
[info] 2018-03-08T15:54:11.585281Z nonode@nohost <0.7.0> -------- Application couch_event started on node nonode@nohost
[info] 2018-03-08T15:54:11.601483Z nonode@nohost <0.7.0> -------- Application ibrowse started on node nonode@nohost
[info] 2018-03-08T15:54:11.621243Z nonode@nohost <0.7.0> -------- Application ioq started on node nonode@nohost
[info] 2018-03-08T15:54:11.621401Z nonode@nohost <0.7.0> -------- Application mochiweb started on node nonode@nohost
[info] 2018-03-08T15:54:11.663924Z nonode@nohost <0.195.0> -------- Apache CouchDB 2.1.1 is starting.

[info] 2018-03-08T15:54:11.664111Z nonode@nohost <0.196.0> -------- Starting couch_sup
[notice] 2018-03-08T15:54:11.865533Z nonode@nohost <0.83.0> -------- config: [couchdb] uuid set to b0f9d9a384e4e5d8a1589efb6aa392c9 for reason nil
[info] 2018-03-08T15:54:11.978964Z nonode@nohost <0.201.0> -------- open_result error {not_found,no_db_file} for _users
[info] 2018-03-08T15:54:12.172161Z nonode@nohost <0.195.0> -------- Apache CouchDB has started. Time to relax.

[info] 2018-03-08T15:54:12.172378Z nonode@nohost <0.195.0> -------- Apache CouchDB has started on http://127.0.0.1:5986/
[info] 2018-03-08T15:54:12.178951Z nonode@nohost <0.7.0> -------- Application couch started on node nonode@nohost
[info] 2018-03-08T15:54:12.179390Z nonode@nohost <0.7.0> -------- Application ets_lru started on node nonode@nohost
[info] 2018-03-08T15:54:12.247877Z nonode@nohost <0.7.0> -------- Application rexi started on node nonode@nohost
[info] 2018-03-08T15:54:12.297653Z nonode@nohost <0.201.0> -------- open_result error {not_found,no_db_file} for _nodes
[warning] 2018-03-08T15:54:12.297794Z nonode@nohost <0.269.0> -------- creating missing database: _nodes
[info] 2018-03-08T15:54:12.437017Z nonode@nohost <0.201.0> -------- open_result error {not_found,no_db_file} for _dbs
[warning] 2018-03-08T15:54:12.437077Z nonode@nohost <0.282.0> -------- creating missing database: _dbs
[warning] 2018-03-08T15:54:12.437119Z nonode@nohost <0.281.0> -------- creating missing database: _dbs
[info] 2018-03-08T15:54:12.533762Z nonode@nohost <0.7.0> -------- Application mem3 started on node nonode@nohost
[info] 2018-03-08T15:54:12.534123Z nonode@nohost <0.7.0> -------- Application fabric started on node nonode@nohost
[info] 2018-03-08T15:54:12.591668Z nonode@nohost <0.7.0> -------- Application chttpd started on node nonode@nohost
[notice] 2018-03-08T15:54:12.617438Z nonode@nohost <0.318.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)
[error] 2018-03-08T15:54:12.617508Z nonode@nohost emulator -------- Error in process <0.319.0> with exit value:
{database_does_not_exist,[{mem3_shards,load_shards_from_db,""_users"",[{file,""src/mem3_shards.erl""},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,""src/mem3_shards.erl""},{line,378}]},{mem3_shards,load_shards_from_disk,2,[{file,""src/mem3_shards.erl""},{line,407}]},{mem3_shards,for_docid,3,[{file,""src/mem3_shards.erl""},{line,91}]},{fabric_doc_open,go,3,[{file,""src/fabric_doc_open.erl""},{line,38}]},{chttpd_auth_cache,ensure_auth_ddoc_exists,2,[{file,""src/chttpd_auth_cache.erl""},{line,187}]},{chttpd_auth_cache,listen_for_changes,1,[{file,""src/chttpd_auth_cache.erl""},{line,134}]}]}

[info] 2018-03-08T15:54:12.621338Z nonode@nohost <0.7.0> -------- Application couch_index started on node nonode@nohost
[info] 2018-03-08T15:54:12.621398Z nonode@nohost <0.7.0> -------- Application couch_mrview started on node nonode@nohost
[info] 2018-03-08T15:54:12.621474Z nonode@nohost <0.7.0> -------- Application couch_plugins started on node nonode@nohost
[notice] 2018-03-08T15:54:12.712837Z nonode@nohost <0.83.0> -------- config: [features] scheduler set to true for reason nil
[info] 2018-03-08T15:54:12.770848Z nonode@nohost <0.201.0> -------- open_result error {not_found,no_db_file} for _replicator
[notice] 2018-03-08T15:54:12.880830Z nonode@nohost <0.335.0> -------- creating replicator ddoc <<""_replicator"">>
[info] 2018-03-08T15:54:12.908466Z nonode@nohost <0.7.0> -------- Application couch_replicator started on node nonode@nohost
[info] 2018-03-08T15:54:12.939000Z nonode@nohost <0.7.0> -------- Application couch_peruser started on node nonode@nohost
[notice] 2018-03-08T15:54:12.956259Z nonode@nohost <0.302.0> 682da737da couchdb0:5984 172.19.0.10 undefined GET / 200 ok 236
[notice] 2018-03-08T15:54:12.970178Z nonode@nohost <0.302.0> 9601219ecf couchdb0:5984 172.19.0.10 undefined GET /_users 404 ok 14
[info] 2018-03-08T15:54:12.976500Z nonode@nohost <0.7.0> -------- Application ddoc_cache started on node nonode@nohost
[info] 2018-03-08T15:54:13.046053Z nonode@nohost <0.7.0> -------- Application global_changes started on node nonode@nohost
[info] 2018-03-08T15:54:13.046189Z nonode@nohost <0.7.0> -------- Application jiffy started on node nonode@nohost
[notice] 2018-03-08T15:54:13.272981Z nonode@nohost <0.302.0> 9c1578cc8c couchdb0:5984 172.19.0.10 undefined PUT /_users 201 ok 302
[notice] 2018-03-08T15:54:13.275300Z nonode@nohost <0.302.0> 72cea8e6f9 couchdb0:5984 172.19.0.10 undefined GET /_replicator 404 ok 1
[info] 2018-03-08T15:54:13.466077Z nonode@nohost <0.7.0> -------- Application mango started on node nonode@nohost
[notice] 2018-03-08T15:54:13.525338Z nonode@nohost <0.302.0> 901159b3e3 couchdb0:5984 172.19.0.10 undefined PUT /_replicator 201 ok 245
[notice] 2018-03-08T15:54:13.527463Z nonode@nohost <0.302.0> f9de942488 couchdb0:5984 172.19.0.10 undefined GET /_global_changes 404 ok 1
[info] 2018-03-08T15:54:13.722971Z nonode@nohost <0.7.0> -------- Application setup started on node nonode@nohost
[info] 2018-03-08T15:54:13.723139Z nonode@nohost <0.7.0> -------- Application snappy started on node nonode@nohost
[notice] 2018-03-08T15:54:13.723971Z nonode@nohost <0.302.0> 0f4bb79924 couchdb0:5984 172.19.0.10 undefined PUT /_global_changes 201 ok 196
[notice] 2018-03-08T15:54:15.260012Z nonode@nohost <0.302.0> 29a554098a couchdb0:5984 172.19.0.10 undefined GET /mychannel_ 404 ok 2
[notice] 2018-03-08T15:54:15.381715Z nonode@nohost <0.302.0> 7a03d8205d couchdb0:5984 172.19.0.10 undefined PUT /mychannel_ 201 ok 121
[notice] 2018-03-08T15:54:15.508671Z nonode@nohost <0.302.0> 082015a127 couchdb0:5984 172.19.0.10 undefined GET /mychannel_ 200 ok 18
[notice] 2018-03-08T15:54:15.534554Z nonode@nohost <0.302.0> b237356e6a couchdb0:5984 172.19.0.10 undefined POST /mychannel_/_all_docs?include_docs=true 200 ok 25
[notice] 2018-03-08T15:54:15.550028Z nonode@nohost <0.302.0> 4df2cb5042 couchdb0:5984 172.19.0.10 undefined POST /mychannel_/_bulk_docs 201 ok 14
[notice] 2018-03-08T15:54:15.551001Z nonode@nohost <0.302.0> 4bb1960bec couchdb0:5984 172.19.0.10 undefined POST /mychannel_/_ensure_full_commit 201 ok 1
[notice] 2018-03-08T15:54:15.552558Z nonode@nohost <0.302.0> 748fed91a7 couchdb0:5984 172.19.0.10 undefined GET /mychannel_/statedb_savepoint?attachments=true 404 ok 1
[notice] 2018-03-08T15:54:15.554499Z nonode@nohost <0.302.0> 8f2b0db784 couchdb0:5984 172.19.0.10 undefined PUT /mychannel_/statedb_savepoint 201 ok 2
[notice] 2018-03-08T15:54:15.611058Z nonode@nohost <0.302.0> a3aa95d740 couchdb0:5984 172.19.0.10 undefined GET /mychannel_/resourcesconfigtx.CHANNEL_CONFIG_KEY?attachments=true 200 ok 8
[notice] 2018-03-08T15:54:15.621935Z nonode@nohost <0.533.0> dcdd01d82a couchdb0:5984 172.19.0.10 undefined GET /mychannel_/_index/ 200 ok 70
[notice] 2018-03-08T15:54:17.645564Z nonode@nohost <0.339.0> -------- couch_replicator_clustering : cluster stable
[notice] 2018-03-08T15:54:17.654792Z nonode@nohost <0.356.0> -------- Started replicator db changes listener <0.746.0>
[notice] 2018-03-08T15:54:17.742097Z nonode@nohost <0.746.0> -------- creating replicator ddoc <<""shards/80000000-9fffffff/_replicator.1520524453"">>
[notice] 2018-03-08T15:54:27.247843Z nonode@nohost <0.262.0> -------- rexi_buffer : cluster stable
[notice] 2018-03-08T15:54:27.248104Z nonode@nohost <0.259.0> -------- rexi_server : cluster stable
{code}
","08/Mar/18 4:02 PM;denyeart;Analysis of couchdb log from above:

couchdb starts at 2018-03-08T15:54:11.
couchdb cant find _users system database and reports error at 2018-03-08T15:54:12.
peer starts and creates _users system database at 2018-03-08T15:54:13.
_users system database created, no more errors.

The same behavior existed between alpha and rc1. The thing that changed is couchdb logs are now directed to stderr so that they show up in `docker logs`.","08/Mar/18 4:18 PM;aatkddny;I just went back and double checked - the problem is when you start from a new instance (as in remove all the files previously created) in your /opt/couchdb/data directory.

The biggest problem is that the errors don't stop. So your logs end up flooded. 

The fixes outlined here - [http://docs.couchdb.org/en/2.1.1/install/setup.html?highlight=users] - stop the errors coming out although you do see this after the _users call, which is quite alarming 

 
{code:java}
   | [error] 2018-03-08T16:04:03.485861Z nonode@nohost <0.208.0> -------- CRASH REPORT Process couch_index_server (<0.208.0>) with 0 neighbors exited with reason: {'EXIT',{{'EXIT',{database_does_not_exist,[{mem3_shards,load_shards_from_db,""_replicator"",[{file,""src/mem3_shards.erl""},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,""src/mem3_shards.erl""},{line,378}]},{mem3_shards,for_db,2,[{file,""src/mem3_shards.erl""},{line,54}]},{mem3_shards,local,1,[{file,""src/mem3_shards.erl""},{line,156}]},{couch_index_server,handle_db_event,3,[{file,""src/couch_index_server.erl""},{line,281}]},{couch_event_listener_mfa,handle_event,3,[{file,""src/couch_event_...""},...]},...]}},...}} at couch_event_listener:do_event/3(line:150) at gen_server:terminate/7(line:826) <= proc_lib:init_p_do_apply/3(line:240); initial_call: {couch_index_server,init,['Argument__1']}, ancestors: [couch_secondary_services,couch_sup,<0.195.0>], messages: [], links: [<0.204.0>], dictionary: [], trap_exit: true, status: running, heap_size: 2586, stack_size: 27, reductions: 5636
{code}
Of course these commands only work if you are in party mode - you need to add the user/password you set up in the script for non-trivial implementations. 

 ","08/Mar/18 4:45 PM;denyeart;Spamming the logs every 5 seconds until the system databases are created is a open couchdb issue:
https://issues.apache.org/jira/browse/COUCHDB-3163

As a workaround, let's use this work item to investigate if the system databases can be pre-created in the fabric-couchdb images.",14/Mar/18 10:43 AM;chris.elder;https://gerrit.hyperledger.org/r/#/c/19151/,,,,,,,,,,,,,,,,,,,
Circular invoking of chaincode doesn't work,FAB-8720,28298,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,daanporon,daanporon,08/Mar/18 2:27 PM,08/Mar/18 2:27 PM,26/Apr/18 6:50 AM,,v1.1.0-preview,,,,,,,,,,,,,0,nodejs-chaincode,,,,,,,,"When one chaincode invokes another and that other chaincode invokes a function on the first chaincode again you’ll create a circular reference and the first chaincode will think that the call from the second chaincode is actually a response to the first invoke.

SO: chaincodeA.fn1 invokes chaincodeB.fn1 invokes chaincodeA.fn2 when receiving the second invoke chaincodeA thinks this is a RESPONSE to his question ...

We don’t know if this was an issue with the Node.js implementation or just a design issue. Any ideas on how to solve this?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i028ot:,,,,,,,,daanporon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
FabricMSPConfig decoder doesnot contain TLS Root/Intermediate certs,FAB-8715,28293,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,sudheesh001,sudheesh001,08/Mar/18 10:32 AM,12/Mar/18 7:57 AM,26/Apr/18 6:50 AM,12/Mar/18 7:57 AM,,,,,,,,,,fabric-sdk-node,fabric-sdk-py,,,0,node-SDK,,,,,,,,"The decodeFabricMSPConfig() function in BlockDecoder in the Node SDK tries to deserialize tls_root_certs and tls_intermediate_certs from the mspConfigProto.FabricMSPConfig. This however is undefined since the tls_root_certs and tls_intermediate_certs are not an actual part of the FabricMSPConfig()

 

*Edit:* It looks like the protos are out of sync. The proto file on Node was the latest edited file. Nov 2017 and in py SDK it's Mar 2017",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i028np:,,,,,,,,sudheesh001,,,,,,,,,,master,,,true,08/Mar/18 1:18 PM;sudheesh001;https://gerrit.hyperledger.org/r/#/c/18871/,,,,,,,,,,,,,,,,,,,,,,,
Decode for Signature Policy Envelope contains typos,FAB-8714,28292,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sudheesh001,sudheesh001,sudheesh001,08/Mar/18 9:45 AM,08/Mar/18 3:37 PM,26/Apr/18 6:50 AM,08/Mar/18 3:37 PM,,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,The Node SDK Block Decoder has mispelt variable names for the proto_signature_policy_envelope and need to be changed.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i028nh:,,,,,,,,sudheesh001,,,,,,,,,,master,,,true,"08/Mar/18 10:32 AM;sudheesh001;[https://gerrit.hyperledger.org/r/#/c/18867/]

 ",,,,,,,,,,,,,,,,,,,,,,,
CouchDB Distribution Site does not maintain archive versions,FAB-8704,28281,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,chris.elder,chris.elder,chris.elder,07/Mar/18 7:02 PM,13/Mar/18 7:06 PM,26/Apr/18 6:50 AM,13/Mar/18 7:06 PM,,,,,,,v1.0.7,v1.2,,fabric-baseimage,,,,0,,,,,,,,,"Apache does not maintain archive versions of CouchDB on the distribution site:

[https://dist.apache.org/repos/dist/release/couchdb/source/]

Current and previous versions are maintained on the archive site:

[https://archive.apache.org/dist/couchdb/source/|https://archive.apache.org/dist/couchdb/source/2.0.0/]

CouchDB images downloading source code need to be updated to reference the archive site.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i028l1:,,,,,,,,chris.elder,denyeart,sujeeban,,,,,,,,release-1.0,master,,true,"08/Mar/18 3:23 PM;denyeart;baseimage (master) - [https://gerrit.hyperledger.org/r/#/c/18847/] - merged (will get picked up in 1.2)

fabric (release-1.0) - [https://gerrit.hyperledger.org/r/#/c/18883/] - merged (will get picked up in 1.0.7)",,,,,,,,,,,,,,,,,,,,,,,
identity type returned by identity list --id client command is incorrect,FAB-8693,28269,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,aambati,aambati,07/Mar/18 3:28 PM,07/Mar/18 3:29 PM,26/Apr/18 6:50 AM,,v1.1,,,,,,v1.2,,,,,,,0,,,,,,,,,"*fabric-ca-client identity list --id <identity name>* returns incorrect identity type when LDAP is enabled.

For example, with following converter defined in the server configuration:

{{converters:}}
{{   - name: hf.Type}}
{{     value: map(attr(""description""),""types"")}}
{{maps:}}
{{  types:}}
{{    - name: peer}}
{{      value: peer}}
{{    - name: orderer}}
{{      value: orderer}}
{{    - name: client}}
{{      value: client}}

 

{{Following is returned when _fabric-ca-client identity list --id peer_17612_ is invoked:}}

{{Name: uid=peer_17612,cn=peer,ou=dev,dc=org,dc=fr, Type: client, Affiliation: , Max Enrollments: 0, Attributes: [\{Name:uid Value:peer_17612 ECert:false} \{Name:description Value:peer ECert:false} \{Name:hf.Type Value:peer ECert:false} \{Name:hf.IntermediateCA Value:false ECert:false} \{Name:hf.GenCRL Value:false ECert:false} \{Name:hf.Revoker Value:false ECert:false} \{Name:hf.AffiliationMgr Value:false ECert:false} \{Name:hf.Registrar.Roles Value: ECert:false}]}}

as you can see hf.Type attribute is set to peer but the Type property of the response object is set to client. They should match.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i028il:,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
-b should not be required when LDAP is enabled,FAB-8692,28268,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,aambati,aambati,07/Mar/18 3:10 PM,07/Mar/18 3:34 PM,26/Apr/18 6:50 AM,07/Mar/18 3:34 PM,v1.1,,,,,,v1.2,,,fabric-ca,,,,0,,,,,,,,,"When starting /initializing the server for the first time with LDAP enabled, user should not be required to specify -b option.

Currently, it is forcing the user to specify -b (bootstrap ID and password) option. This should not be the case because when LDAP is enabled, LDAP acts as the user registry. so, there is really no need for a bootstrap ID.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i028id:,,,,,,,,aambati,,,,,,,,,,,,,,07/Mar/18 3:34 PM;aambati;This problem was fixed in 1.1-rc1,,,,,,,,,,,,,,,,,,,,,,,
node sdk invokes chaincode event listener when no chaincode event has been emitted from the chaincode ,FAB-8690,28265,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,davidkel,davidkel,07/Mar/18 2:03 PM,20/Mar/18 10:21 PM,26/Apr/18 6:50 AM,20/Mar/18 6:38 PM,v1.1.0-alpha,v1.1.0-rc1,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"While testing the new ChannelEventHub implementation I have observed that when I register for chaincode events. The callback is always invoked when a block event occurs, even though there is no chaincode event. The node sdk should only invoke the callback when there is a chaincode event to return.
eg, if I use this code
{code:java}
            eventHub.registerChaincodeEvent(ccid, 'composer',
                (event, blockNum, txID, status) => {
                    console.log(`got an event: ${event}`);
                    console.log(event.payload);
                    if (status && status === 'VALID') {
                        let evt = event.payload.toString('utf8');
                         evt = JSON.parse(evt);
                        console.log(`emitting CC event ${evt}`);
                        this.emit('events', evt);
                        }
                    }
                },
{code}
I see that when there is no chaincode event, the payload is a buffer of 2 bytes
{code}
<Buffer 5b 5d>
{code}
Which parses to an empty array in javascript.
Although I observed this on the new channel event hub, I am pretty sure the same problem still occurs on the old eventhub implementation as well.
Note have not tried this with filtered blocks, only with full blocks.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i028hp:,,,,,,,,davidkel,denyeart,harrisob@us.ibm.com,,,,,,,,,,,,07/Mar/18 2:24 PM;denyeart;[~harrisob@us.ibm.com] please assess.,07/Mar/18 5:18 PM;harrisob@us.ibm.com;I am unable to recreate. Could I get a debug log ?,,,,,,,,,,,,,,,,,,,,,,
fabric anchor peer consumes all memory and dies,FAB-8688,28262,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,john.d.sheehan,john.d.sheehan,07/Mar/18 11:19 AM,12/Mar/18 4:03 AM,26/Apr/18 6:50 AM,09/Mar/18 2:01 PM,v1.1.0-preview,,,,,,v1.0.7,v1.1,v1.2,fabric-gossip,,,,0,gossip,,,,,,,,"I have the following (simplified) configuration, 5vms

vm0: orderer (solo)

vm1: peer0.org0 (anchor peer)

vm2: peer1.org0

vm3: peer0.org1 (anchor peer)

vm4: peer1.org1

 

After I create/fetch, join, update, install, and instantiate a chaincode, the anchor peers slowly consume all the memory on their vms. They also exhaust all the file descriptors.

 

10:49 AM ~/pkg-cli0    
: fabric@mem0-peer0Org0 0 %; sudo lsof -i -P |grep fabric
[sudo] password for fabric: 
sshd       8333 fabric    3u  IPv4 305300      0t0  TCP 59.27.089f.ip4.static.sl-reverse.com:22->gbibp9ph1--blueice3n1.emea.ibm.com:50174 (ESTABLISHED)
peer       8371 fabric   26u  IPv6 297874      0t0  TCP *:7051 (LISTEN)
peer       8371 fabric   27u  IPv6 297875      0t0  TCP *:7053 (LISTEN)
peer       8371 fabric   28u  IPv4 297876      0t0  TCP peer0.org0.example.com:7052 (LISTEN)
peer       8371 fabric   29u  IPv6 293829      0t0  TCP *:6060 (LISTEN)
peer       8371 fabric   30u  IPv4 300279      0t0  TCP peer0.org0.example.com:39694->orderer0.example.com:7050 (ESTABLISHED)
peer       8371 fabric   32u  IPv4 303776      0t0  TCP peer0.org0.example.com:37976->peer0.org1.example.com:7051 (ESTABLISHED)
peer       8371 fabric   37u  IPv4 300296      0t0  TCP peer0.org0.example.com:7052->peer0.org0.example.com:60316 (ESTABLISHED)
peer       8371 fabric   38u  IPv6 306403      0t0  TCP peer0.org0.example.com:7051->peer0.org1.example.com:49664 (ESTABLISHED)
peer       8371 fabric   39u  IPv6 303785      0t0  TCP peer0.org0.example.com:7051->peer0.org1.example.com:49638 (ESTABLISHED)
peer       8371 fabric   40u  IPv4 301705      0t0  TCP peer0.org0.example.com:37982->peer0.org1.example.com:7051 (ESTABLISHED)
peer       8371 fabric   41u  IPv4 303791      0t0  TCP peer0.org0.example.com:37984->peer0.org1.example.com:7051 (ESTABLISHED)
peer       8371 fabric   42u  IPv6 303793      0t0  TCP peer0.org0.example.com:7051->peer0.org1.example.com:49646 (ESTABLISHED)
peer       8371 fabric   43u  IPv6 303795      0t0  TCP peer0.org0.example.com:7051->peer0.org1.example.com:49648 (ESTABLISHED)
peer       8371 fabric   44u  IPv6 303798      0t0  TCP peer0.org0.example.com:7051->peer0.org1.example.com:49650 (ESTABLISHED)
peer       8371 fabric   45u  IPv6 303801      0t0  TCP pe ....

 

After about an hour,

: fabric@mem0-peer0Org0 0 %; sudo lsof -i -P |grep fabric |wc -l
1563

 

The logs from the peers are populated with the following,

createConnection to peer0.org0.example.com:7051
createConnection to peer0.org0.example.com:7051
createConnection success to  peer0.org0.example.com:7051
auth failure, remote endpoint  peer0.org0.example.com:7051 claims to be a different peer, expected [249 210 188 90 154 10 219 131 93 163 0 179 80 44 135 146 114 130 247 120 98 96 25 183 81 84 152 173 122 24 168 40] but got [158 223 71 133 65 188 150 122 216 109 203 141 72 228 30 37 164 247 117 59 199 140 85 142 236 105 225 76 205 115 251 234]
createConnection to peer0.org0.example.com:7051
auth failure, remote endpoint  peer0.org0.example.com:7051 claims to be a different peer, expected [249 210 188 90 154 10 219 131 93 163 0 179 80 44 135 146 114 130 247 120 98 96 25 183 81 84 152 173 122 24 168 40] but got [158 223 71 133 65 188 150 122 216 109 203 141 72 228 30 37 164 247 117 59 199 140 85 142 236 105 225 76 205 115 251 234]
createConnection to peer0.org0.example.com:7051
createConnection success to  peer0.org0.example.com:7051
createConnection to peer0.org0.example.com:7051

This comes from `fabric/gossip/comm/comm_impl.go:createConnection`

 

I'm not sure it is a configuration issue (firewall, /etc/hosts, core.yaml, configtx.yaml, crypto-config.yaml, orderer.yaml, etc) on my end, since both invoke and query seem to work as expected

 ",,,,,,,,,,,,,,,,,,,,07/Mar/18 3:54 PM;john.d.sheehan;peer0org0-3hr.png;https://jira.hyperledger.org/secure/attachment/14737/peer0org0-3hr.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i028h1:,,,,,,,,denyeart,eragnoli,john.d.sheehan,yacovm,,,,,,,release-1.0,release-1.1,master,true,"07/Mar/18 3:21 PM;denyeart;[~john.d.sheehan] Are you suggesting that non-anchors in your network do not demonstrate this problem?

[~yacovm] What other information would help narrow down the problem?","07/Mar/18 3:36 PM;yacovm;give me a stack trace of all goroutines please, on both ends of the connection after half the time they die. ",07/Mar/18 3:36 PM;yacovm;you can do that by killing the peer with a SIGABRT signal,"07/Mar/18 3:39 PM;john.d.sheehan;[~denyeart] it appears non-anchors are not effected, currently,

: fabric@mem0-peer0Org0 0 %; sudo lsof -i -P |grep fabric |wc -l
9985

: fabric@mem0-peer1Org0 0 %; sudo lsof -i -P |grep fabric |wc -l
8

: fabric@mem1-peer0Org1 0 %; sudo lsof -i -P |grep fabric |wc -l
9995

: fabric@mem1-peer1Org1 0 %; sudo lsof -i -P |grep fabric |wc -l
7

 

and

: fabric@mem0-peer0Org0 0 %; free -m
              total        used        free      shared  buff/cache   available
Mem:           3999        1725         173          40        2100        2121
Swap:          2047           0        2047



: fabric@mem0-peer1Org0 0 %; free -m
              total        used        free      shared  buff/cache   available
Mem:           3999         165        1894          40        1938        3714
Swap:          2047           0        2047



: fabric@mem1-peer0Org1 0 %; free -m
              total        used        free      shared  buff/cache   available
Mem:           3999        1492         403          25        2103        2370
Swap:          2047           0        2047



: fabric@mem1-peer1Org1 0 %; free -m
              total        used        free      shared  buff/cache   available
Mem:           3999         143        1919          40        1936        3736
Swap:          2047           0        2047",07/Mar/18 3:48 PM;yacovm;Do you have a load balancer somewhere?,"07/Mar/18 3:55 PM;john.d.sheehan;While the stack trace is still pasting, I grabbed this earlier,

go tool pprof  --nodecount=1000 --nodefraction=0.00001  -png http://localhost:6060/debug/pprof/heap > peer0org0-3hr.png !peer0org0-3hr.png!",07/Mar/18 3:58 PM;yacovm;i think i found the bug... will upload a change set in a few minutes,"07/Mar/18 3:58 PM;john.d.sheehan;[~yacovm] re:loadbalancer, well the vms are in a datacenter, but they are all on the same subnet, so I don't know. I didn't add one.",07/Mar/18 4:01 PM;john.d.sheehan;[~yacovm] you found the bug quicker than it takes to copy and paste the stack trace into a terminal :),07/Mar/18 4:02 PM;yacovm;I think this should fix it https://gerrit.hyperledger.org/r/#/c/18819/,"07/Mar/18 4:21 PM;john.d.sheehan;still showing these auth failures,

createConnection to peer0.org1.example.com:7051
createConnection success to  peer0.org1.example.com:7051
createConnection to peer0.org1.example.com:7051
auth failure, remote endpoint  peer0.org1.example.com:7051 claims to be a different peer, expected [28 168 154 200 135 17 141 147 116 30 254 241 114 34 94 42 19 98 57 55 96 91 159 124 26 242 173 168 199 223 113 60] but got [199 247 88 142 244 39 77 203 186 217 71 34 65 75 216 156 48 90 254 79 57 228 122 225 87 162 62 240 251 29 12 86]
Probe
Probe
createConnection to peer0.org1.example.com:7051
createConnection to peer0.org1.example.com:7051
auth failure, remote endpoint  peer0.org1.example.com:7051 claims to be a different peer, expected [28 168 154 200 135 17 141 147 116 30 254 241 114 34 94 42 19 98 57 55 96 91 159 124 26 242 173 168 199 223 113 60] but got [199 247 88 142 244 39 77 203 186 217 71 34 65 75 216 156 48 90 254 79 57 228 122 225 87 162 62 240 251 29 12 86]
createConnection success to  peer0.org1.example.com:7051

 

but the open file descriptor count seems stable,

: fabric@mem0-peer0Org0 0 %; sudo lsof -i -P |grep fabric 
peer      30017 fabric   26u  IPv6 411410      0t0  TCP *:7051 (LISTEN)
peer      30017 fabric   27u  IPv6 411411      0t0  TCP *:7053 (LISTEN)
peer      30017 fabric   28u  IPv4 411412      0t0  TCP peer0.org0.example.com:7052 (LISTEN)
peer      30017 fabric   29u  IPv6 413102      0t0  TCP *:6060 (LISTEN)
peer      30017 fabric   30u  IPv4 413948      0t0  TCP peer0.org0.example.com:60114->orderer0.example.com:7050 (ESTABLISHED)
peer      30017 fabric   37u  IPv4 415937      0t0  TCP peer0.org0.example.com:7052->peer0.org0.example.com:52504 (ESTABLISHED)
peer      30017 fabric   38u  IPv6 413991      0t0  TCP peer0.org0.example.com:7051->peer1.org0.example.com:36562 (ESTABLISHED)
peer      30017 fabric   39u  IPv4 414307      0t0  TCP peer0.org0.example.com:58806->peer0.org1.example.com:7051 (ESTABLISHED)","07/Mar/18 4:49 PM;yacovm;yep, this was supposed to fix the file descriptor issue, not the auth failures.

Could you please tell me if the memory consumption is still increasing ?",07/Mar/18 4:55 PM;john.d.sheehan;[~yacovm] memory consumption seems stable. I'll let it run overnight and update then.,07/Mar/18 8:54 PM;denyeart;Merged in 1.1 and 1.2 (master).  Awaiting unrelated CI fix in 1.0.x branch.,"08/Mar/18 8:30 AM;john.d.sheehan;[~yacovm] memory consumption seems stable,

: fabric@mem0-peer0Org0 0 %; while [ 1 ] ; do echo $(date); free -m; echo ""--""; sleep 3600; done
Wed Mar 7 18:02:37 UTC 2018
              total        used        free      shared  buff/cache   available
Mem:           3999         172        1657          40        2169        3700
Swap:          2047           0        2047
--
Wed Mar 7 19:02:37 UTC 2018
              total        used        free      shared  buff/cache   available
Mem:           3999         176        1652          40        2169        3696
Swap:          2047           0        2047
--

...

Thu Mar 8 07:02:37 UTC 2018
              total        used        free      shared  buff/cache   available
Mem:           3999         233        1582          40        2183        3638
Swap:          2047           0        2047
--
Thu Mar 8 08:02:37 UTC 2018
              total        used        free      shared  buff/cache   available
Mem:           3999         238        1576          40        2184        3633
Swap:          2047           0        2047



 

And the other anchor peer shows something similar","08/Mar/18 8:42 AM;yacovm;Happy to hear that. Thanks for the catch, that bug has been there for around a year and no one noticed.
This one https://gerrit.hyperledger.org/r/#/c/18823/ is still waiting to be merged to v1.0, [~mastersingh24] - can we override the CI and merge it?

[~john.d.sheehan] - as for the ""claims to be a different peer"" - it's most likely a configuration issue, as this is by design.
Please contact me via rocket chat and we'll solve your configuration issue. ","08/Mar/18 11:42 AM;john.d.sheehan;The auth failure message was due to a misconfiguration of the CORE_PEER_GOSSIP_EXTERNALENDPOINT and CORE_PEER_GOSSIP_BOOTSTRAP variables by me.
With patch 18823, everything is working as expected.",,,,,,,
fabric-samples permit fabric-ca sample to omit intermediate CAs,FAB-8679,28251,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rennman,rennman,rennman,06/Mar/18 6:42 PM,07/Mar/18 6:58 AM,26/Apr/18 6:50 AM,07/Mar/18 6:58 AM,,,,,,,v1.1,,,fabric-samples,,,,0,,,,,,,,,"Obviously the intention of the environment variable

{{USE_INTERMEDIATE_CA=true}}

is to allow the user to selectively use intermediate CAs or exclusively root CAs.

However, there are two instances where intermediate CA certificates are referenced unconditionally:

{{export ORDERER_GENERAL_TLS_ROOTCAS=[$INT_CA_CHAINFILE]}}
{{export CORE_PEER_TLS_ROOTCERT_FILE=$INT_CA_CHAINFILE}}

These should be changed to:
{{export ORDERER_GENERAL_TLS_ROOTCAS=[$CA_CHAINFILE]}}
{{export CORE_PEER_TLS_ROOTCERT_FILE=$CA_CHAINFILE}}
respectively.



Moreover, the check
{{if $USE_INTERMEDIATE_CA; then}}

should read:
{{if test ""$USE_INTERMEDIATE_CA"" = ""true""; then}}
...",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i028el:,,,,,,,,denyeart,rennman,,,,,,,,,master,,,true,06/Mar/18 7:06 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/18785/,"07/Mar/18 6:58 AM;denyeart;Merged.

[~rennman] [~aambati] please re-test latest fabric-samples.",,,,,,,,,,,,,,,,,,,,,,
System Behave Framework: Printing Debug statements,FAB-8676,28248,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,karmicway,latitiah,latitiah,06/Mar/18 5:10 PM,06/Mar/18 7:12 PM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-quality,,,,0,,,,,,,,,"Whenever there are errors in a behave test scenario, the print statements show some debug information containing the output of the command that was executed. The output that is printed should show the output from all of the peers when executing on multiple peers.

Note the ""output"" variable is a dictionary with the keys being the containers that the command is executed on.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i028dx:,,,,,,,,AdnanChoudhury,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
System Behave Framework: Verify full filename,FAB-8675,28247,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,karmicway,latitiah,latitiah,06/Mar/18 4:04 PM,06/Mar/18 7:11 PM,26/Apr/18 6:50 AM,,,,,,,,,,,,,,,0,,,,,,,,,"The behave statement
{code} Then the block file is fetched from peer ""peer0.org1.example.com"" at location "".""{code}
does not look for the complete filename with extension. This needs to be fixed and clarified.

The file should be <channelID>.block.

For example, given the channel ID ""mychannel"", the block file that gets fetched should be named ""mychannel.block"".",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i028dp:,,,,,,,,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Modularize ledger protos for KV readwrites,FAB-8672,28240,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sudheesh001,sudheesh001,sudheesh001,06/Mar/18 5:43 AM,06/Mar/18 11:45 AM,26/Apr/18 6:50 AM,06/Mar/18 11:45 AM,,,,,,,,,,fabric-sdk-py,,,,0,,,,,,,,,The protos for ledger containing queryresult and rwset are not modules and cannot be imported successfully. They need `__init__.py` for converting the directories to modules for successfully importing them,,,,,,,,,,,,FAB-7402,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i028cd:,,,,,,,,sudheesh001,,,,,,,,,,master,,,true,06/Mar/18 5:52 AM;sudheesh001;Open for review:  https://gerrit.hyperledger.org/r/18769 ,,,,,,,,,,,,,,,,,,,,,,,
Vulnerable dependencies observed in fabric-sdk-java-verify-x86_64,FAB-8669,28236,Bug,Invalid,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ashutosh_kumar,sambhavdutt,sambhavdutt,06/Mar/18 12:52 AM,28/Mar/18 5:06 PM,26/Apr/18 6:50 AM,06/Mar/18 1:40 AM,,,,,,,,,,fabric-sdk-java,,,,0,ci_failure,,,,,,,,"There are some vulnerable dependencies in the code coverage report for fabric-sdk-java-verify-x86_64,

 !vul.png|thumbnail! 

*Build Log*
https://jenkins.hyperledger.org/sandbox/job/fabric-sdk-java-verify-x86_64/1/OWSP_Dependency_Check_Results/",,,,,,,,,,,,,,,,,,,,06/Mar/18 12:52 AM;sambhavdutt;vul.png;https://jira.hyperledger.org/secure/attachment/14723/vul.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i028bp:,,,,,,,,rameshthoomu,rickr,sambhavdutt,scottz,,,,,,,,,,,06/Mar/18 1:38 AM;rickr;So what exactly does that mean?,06/Mar/18 1:39 AM;rickr;That exe is not shipped.,06/Mar/18 2:22 PM;rameshthoomu;[~rickr] We have tested [this patch|[https://gerrit.hyperledger.org/r/#/c/15551/|https://gerrit.hyperledger.org/r/#/c/15551/[this]] in sandbox job and observed above errors. [~ashutosh_kumar] requested me to add vulnerable checks on SDK's. Will ship this job to production Jenkins once you confirm the results.,"06/Mar/18 3:17 PM;rickr;This adds no value the result show me nothing  that needs changing. 
 -1 disapprove. No point in running something an maintaing that adds no value.","07/Mar/18 12:09 AM;rickr;Show me something this report effectively shows and provide an actual fix to a real issue and maybe I'll reconsider.

[~ashkumar] .

 ","28/Mar/18 5:01 PM;scottz;As Rick requested, [~ashutosh_kumar] please explain the vulnerabilities report findings, identify the expectations and exactly what needs to be fixed, and recommend how to address the problem and clean it up.

Perhaps [~denyeart] could also provide justification and driving force behind addressin issues like this.",,,,,,,,,,,,,,,,,,
update link,FAB-8652,28212,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,zhaochy,zhaochy,zhaochy,05/Mar/18 8:56 AM,06/Mar/18 7:10 PM,26/Apr/18 6:50 AM,06/Mar/18 7:10 PM,,,,,,,v1.1,,,fabric-sdk-node,,,,0,,,,,,,,,"find a link that is invalid, update the link",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02871:,,,,,,,,zhaochy,,,,,,,,,,master,,,true,05/Mar/18 9:00 AM;zhaochy;https://gerrit.hyperledger.org/r/18723,,,,,,,,,,,,,,,,,,,,,,,
KeyInfo decode calls wrong method for getKeyIndetifier,FAB-8651,28211,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sudheesh001,sudheesh001,sudheesh001,05/Mar/18 8:28 AM,05/Mar/18 9:19 AM,26/Apr/18 6:50 AM,05/Mar/18 9:19 AM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"Looks more like a typo issue, since the proto for KeyInfo has a value `key_identifier` the method via node to access it should be `getKeyIdentifier()` rather in the current SDK it's available at `getKeyIdentitier()`",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0286t:,,,,,,,,sudheesh001,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
TLS connection between orderer and kafka,FAB-8649,28209,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,QuincyWu,QuincyWu,05/Mar/18 4:50 AM,05/Mar/18 3:47 PM,26/Apr/18 6:50 AM,05/Mar/18 3:47 PM,v1.1.0-rc1,,,,,,Not a Bug,,,fabric-orderer,,,,0,orderer,,,,,,,,"in fabric-v1.1.0-rc1, in fabric/orderer/consensus/kafka/config.go, the method  is 

newBrokerConfig, 

keyPair, err := tls.X509KeyPair([]byte(tlsConfig.Certificate), []byte(tlsConfig.PrivateKey)) , tlsConfig.Certificate and tlsConfig.PrivateKey are file address ,not file . it's bug.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0286d:,,,,,,,,denyeart,guoger,kchristidis,QuincyWu,sanchezl,,,,,,,,,,05/Mar/18 2:25 PM;denyeart;[~kchristidis] [~sanchezl] What's your opinion of the impact?,"05/Mar/18 3:03 PM;sanchezl;{{tlsConfig.Certificate}} and {{tlsConfig.PrivateKey}} are byte strings containing the certificate and private key.

I did not quite understand description of the problem. 

The values are described in the the {{orderer.yaml:}}
{code:none}
Kafka:
  TLS:
    # PrivateKey: PEM-encoded private key the orderer will use for
    # authentication.
    PrivateKey:
      # As an alternative to specifying the PrivateKey here, uncomment the
      # following ""File"" key and specify the file name from which to load the
      # value of PrivateKey.
      # File: path/to/PrivateKey
    # Certificate: PEM-encoded signed public key certificate the orderer will
    # use for authentication.
    Certificate:
      # As an alternative to specifying the Certificate here, uncomment the
      # following ""File"" key and specify the file name from which to load the
      # value of Certificate.
      #File: path/to/Certificate
{code}
If you are trying to use environment variables with pem text:
 * {{*ORDERER_KAFKA_TLS_PRIVATEKEY*=""---- BEGIN PRIVATE KEY---- ...""}}
 * {{*ORDERER_KAFKA_TLS_CERTIFICATE*=""---- BEGIN CERTIFICATE---- ...""}}

If you are trying to use environment variables with pem files:
 * {{*ORDERER_KAFKA_TLS_PRIVATEKEY_FILE*=server.key}}
 * {{*ORDERER_KAFKA_TLS_CERTIFICATE_FILE*=server.crt}}

 ",05/Mar/18 3:47 PM;kchristidis;What Luis said above. There is no bug here.,,,,,,,,,,,,,,,,,,,,,
fabric-ca samples are not working on rc1 images,FAB-8633,28182,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,rameshthoomu,rameshthoomu,01/Mar/18 11:56 PM,02/Mar/18 2:52 PM,26/Apr/18 6:50 AM,02/Mar/18 2:26 PM,,,,,,,v1.1,,,fabric-samples,,,,0,,,,,,,,,"Observed below error on 1.1.0-rc1 images
{code:java}
Error: Error endorsing query: rpc error: code = Unknown desc = access denied: channel [mychannel] creator org [org1MSP] - <nil>
Usag
{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0280l:,,,,,,,,denyeart,rameshthoomu,smithbk,,,,,,,,master,,,true,"01/Mar/18 11:56 PM;rameshthoomu;{code:java}
##### 2018-03-01 18:50:32 Waiting for the 'setup' container to finish registering identities, creating the genesis block and other artifacts ....
##### 2018-03-01 18:50:33 Waiting for the docker 'run' container to start ...............
##### 2018-03-01 23:50:54 The docker 'run' container has started
##### 2018-03-01 23:50:54 Creating channel 'mychannel' on orderer1-org0 ...
##### 2018-03-01 23:50:54 Peer peer1-org1 is attempting to join channel 'mychannel' (attempt #1) ...
##### 2018-03-01 23:50:54 Peer peer1-org1 successfully joined channel 'mychannel'
##### 2018-03-01 23:50:54 Peer peer2-org1 is attempting to join channel 'mychannel' (attempt #1) ...
##### 2018-03-01 23:50:55 Peer peer2-org1 successfully joined channel 'mychannel'
##### 2018-03-01 23:50:55 Peer peer1-org2 is attempting to join channel 'mychannel' (attempt #1) ...
##### 2018-03-01 23:50:55 Peer peer1-org2 successfully joined channel 'mychannel'
##### 2018-03-01 23:50:55 Peer peer2-org2 is attempting to join channel 'mychannel' (attempt #1) ...
##### 2018-03-01 23:50:55 Peer peer2-org2 successfully joined channel 'mychannel'
##### 2018-03-01 23:50:55 Updating anchor peers for peer1-org1 ...
##### 2018-03-01 23:50:55 Updating anchor peers for peer1-org2 ...
##### 2018-03-01 23:50:56 Installing chaincode on peer1-org1 ...
##### 2018-03-01 23:50:59 Installing chaincode on peer1-org2 ...
##### 2018-03-01 23:51:02 Instantiating chaincode on peer1-org2 ...
##### 2018-03-01 23:51:15 Querying chaincode in the channel 'mychannel' on the peer 'peer1-org1' ...
##### 2018-03-01 23:51:30 Query of channel 'mychannel' on peer 'peer1-org1' was successful
##### 2018-03-01 23:51:30 Sending invoke transaction to peer1-org1 ...
##### 2018-03-01 23:51:31 Installing chaincode on peer2-org2 ...
##### 2018-03-01 23:51:44 Querying chaincode in the channel 'mychannel' on the peer 'peer2-org2' ...
##### 2018-03-01 23:51:59 Query of channel 'mychannel' on peer 'peer2-org2' was successful
##### 2018-03-01 23:51:59 Revoking the user 'user-org1' of the organization 'org1' with Fabric CA Client home directory set to /data/orgs/org1/admin and generating CRL ...
##### 2018-03-01 23:51:59 Fetching the configuration block of the channel 'mychannel'
##### 2018-03-01 23:51:59 Creating config update payload with the generated CRL for the organization 'org1'
##### 2018-03-01 23:51:59 Sleeping 5 seconds for configtxlator to start...
##### 2018-03-01 23:52:04 Updating the configuration block of the channel 'mychannel'
##### 2018-03-01 23:52:05 Querying the chaincode in the channel 'mychannel' on the peer 'peer1-org1' as revoked user 'user-org1' ...
2018-03-01 23:52:20.203 UTC [msp] GetLocalMSP -> DEBU 001 Returning existing local MSP
2018-03-01 23:52:20.203 UTC [msp] GetDefaultSigningIdentity -> DEBU 002 Obtaining default signing identity
2018-03-01 23:52:20.203 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 003 Using default escc
2018-03-01 23:52:20.203 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 004 Using default vscc
2018-03-01 23:52:20.203 UTC [chaincodeCmd] getChaincodeSpec -> DEBU 005 java chaincode disabled
2018-03-01 23:52:20.204 UTC [msp/identity] Sign -> DEBU 006 Sign: plaintext: 0AF9080A6608031A0B08B4A4E2D40510...6D7963631A0A0A0571756572790A0161 
2018-03-01 23:52:20.204 UTC [msp/identity] Sign -> DEBU 007 Sign: digest: D5D9F171A19BC58A7C5327CCD2227D841DE213C467DB07A18F75BC90AAA0A13E 
Error: Error endorsing query: rpc error: code = Unknown desc = access denied: channel [mychannel] creator org [org1MSP] - <nil>
Usage:
  peer chaincode query [flags]

Flags:
  -C, --channelID string   The channel on which this command should be executed
  -c, --ctor string        Constructor message for the chaincode in JSON format (default ""{}"")
  -x, --hex                If true, output the query value byte array in hexadecimal. Incompatible with --raw
  -n, --name string        Name of the chaincode
  -r, --raw                If true, output the query value as raw bytes, otherwise format as a printable string
  -t, --tid string         Name of a custom ID generation algorithm (hashing and decoding) e.g. sha256base64

Global Flags:
      --cafile string                       Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint
      --certfile string                     Path to file containing PEM-encoded X509 public key to use for mutual TLS communication with the orderer endpoint
      --clientauth                          Use mutual TLS when communicating with the orderer endpoint
      --keyfile string                      Path to file containing PEM-encoded private key to use for mutual TLS communication with the orderer endpoint
      --logging-level string                Default logging level and overrides, see core.yaml for full syntax
  -o, --orderer string                      Ordering service endpoint
      --ordererTLSHostnameOverride string   The hostname override to use when validating the TLS connection to the orderer.
      --tls                                 Use TLS when communicating with the orderer endpoint
      --transient string                    Transient map of arguments in JSON encoding
  -v, --version                             Display current version of fabric peer server

##### 2018-03-01 23:52:20 Tests did not complete successfully; see data/logs/run.log for more details
(hyp) rameshs-mbp:fabric-ca thoomu@us.ibm.com$ docker images | grep 1.1.0-rc1
hyperledger/fabric-ca-tools                                                                x86_64-1.1.0-rc1                      d427e25d50ec        3 hours ago          1.55GB
hyperledger/fabric-ca-peer                                                                 x86_64-1.1.0-rc1                      9a5a4eea6cb0        3 hours ago          270MB
hyperledger/fabric-ca-orderer                                                              x86_64-1.1.0-rc1                      8862de47d06c        3 hours ago          264MB
hyperledger/fabric-ca                                                                      x86_64-1.1.0-rc1                      8a6c8c2e2ebf        3 hours ago          283MB
hyperledger/fabric-tools                                                                   x86_64-1.1.0-rc1                      006c689ec08e        4 hours ago          1.46GB
hyperledger/fabric-orderer                                                                 x86_64-1.1.0-rc1                      10afc128d402        4 hours ago          180MB
hyperledger/fabric-peer                                                                    x86_64-1.1.0-rc1                      6b44b1d021cb        4 hours ago          187MB
hyperledger/fabric-javaenv                                                                 x86_64-1.1.0-rc1                      ea263125afb1        4 hours ago          1.52GB
hyperledger/fabric-ccenv                                                                   x86_64-1.1.0-rc1                      65c951b9681f        4 hours ago          1.39GB{code}",02/Mar/18 2:13 AM;denyeart;[~aambati] Could you take a look?,02/Mar/18 4:50 AM;smithbk;https://gerrit.hyperledger.org/r/18673,02/Mar/18 2:27 PM;denyeart;fabric-samples has been retagged with v1.1.0-rc1 to include this fix.,02/Mar/18 2:52 PM;rameshthoomu;tested this test case after retag the v1.1.0-rc1 and it's working as expected. Thanks [~smithbk] for the quick fix.,,,,,,,,,,,,,,,,,,,
Fix install_behave script,FAB-8631,28180,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,latitiah,latitiah,latitiah,01/Mar/18 11:27 PM,17/Apr/18 5:49 PM,26/Apr/18 6:50 AM,17/Apr/18 5:49 PM,,,,,,,,,,,,,,0,,,,,,,,,"Fix install_behave script to give more useful info for failures and remove the Java package until it is ready to be used. (That is, we are not testing using the Java SDK yet, so we can hold off adding this package, which causes some errors.)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02805:,,,,,,,,latitiah,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
code coverage report not showing all the packages,FAB-8628,28174,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,01/Mar/18 9:53 PM,05/Mar/18 4:45 PM,26/Apr/18 6:50 AM,05/Mar/18 4:45 PM,,,,,,,v1.1,,,fabric-build,,,,0,,,,,,,,,"Code coverage report is not showing for all the packages in profile.cov or report.xml

Steps to reproduce:

on latest fabric commit, run `make profile` and see the profile.cov or report.xml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i027yt:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,05/Mar/18 4:45 PM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/18685/,,,,,,,,,,,,,,,,,,,,,,,
Deliver handler panics on closed iterator,FAB-8626,28172,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,kchristidis,kchristidis,01/Mar/18 9:11 PM,01/Mar/18 10:02 PM,26/Apr/18 6:50 AM,01/Mar/18 10:02 PM,,,,,,,,,,fabric-orderer,,,,0,,,,,,,,,"_This is a backport of FAB-8584 for the 1.0.x branch._

The file-based ledger implementation of the iterator does not account for the case where another thread may close the iterator.

This operation will return a (nil, nil) block/error pair to the handler.


The handler then will attempt to process this nil block and panic.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i027yd:,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Marbles example index json files contain reference to data wrapper,FAB-8621,28167,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,chris.elder,chris.elder,chris.elder,01/Mar/18 6:47 PM,01/Mar/18 8:02 PM,26/Apr/18 6:50 AM,01/Mar/18 8:02 PM,,,,,,,,,,fabric-samples,,,,0,,,,,,,,,"Fabric 1.1 removes the need for a ""data"" wrapper for CouchDB data.  The sample index json files still contains the data wrapper.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i027x9:,,,,,,,,chris.elder,,,,,,,,,,master,,,true,01/Mar/18 7:04 PM;chris.elder;https://gerrit.hyperledger.org/r/#/c/18635/,,,,,,,,,,,,,,,,,,,,,,,
Fix cleanup logic in byfn.sh/eyfn.sh for volumes,FAB-8612,28157,Bug,In Progress,FAB,Fabric,software,ChristopherFerris,,,Medium,,,jyellick,jyellick,01/Mar/18 3:53 PM,06/Apr/18 3:47 PM,26/Apr/18 6:50 AM,,v1.1,,,,,,v1.2,,,fabric-samples,,,,0,,,,,,,,,"There is some goofy cleanup of volumes going on in fabric-samples/first-network.

In particular, the compose is being downed removing volumes (but having no affect on the volumes), then other cleanup, then downed again remove the volumes

Most likely, we can fix all of this in eyfn.sh by including a --remove-orphans.

We likewise can probably cleanup the down process in byfn.sh by doing the same.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i027v1:,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Channel update (EYFN) tutorial should mention setting log level for CLI container when running manual steps,FAB-8611,28155,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,wlahti,wlahti,01/Mar/18 3:26 PM,01/Mar/18 5:12 PM,26/Apr/18 6:50 AM,01/Mar/18 5:12 PM,,,,,,,v1.1,,,fabric-docs,,,,0,,,,,,,,,"The channel update tutorial currently only mentions setting the log level to debug for the Org3CLI container, when the tutorial actually shows debug output for the original CLI container as well. The doc should be updated to state that both CLI containers should have their log level set to debug when running the steps manually to ensure the log output noted in the tutorial matches that output the user will see.. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i027ul:,,,,,,,,wlahti,,,,,,,,,,master,,,true,01/Mar/18 3:42 PM;wlahti;https://gerrit.hyperledger.org/r/c/18597,,,,,,,,,,,,,,,,,,,,,,,
Missing Warning/Error with Mixed OUEnabled network,FAB-8605,28145,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,adc,latitiah,latitiah,01/Mar/18 12:07 PM,01/Mar/18 3:14 PM,26/Apr/18 6:50 AM,01/Mar/18 3:09 PM,v1.1,,,,,,v1.1,,,fabric-crypto,,,,0,,,,,,,,,"When setting the crypto.yaml's `EnableNodeOUs` flag to true for 1 organization and false for a separate organization, the transactions continue to complete successfully. I would expect that there would be a warning or error when this is done.
{code}PeerOrgs:
  - Name: Org1ExampleCom
    Domain: org1.example.com
    EnableNodeOUs: true
    Template:
      Count: 2
    Users:
      Count: 2

  - Name: Org2ExampleCom
    Domain: org2.example.com
    EnableNodeOUs: false
    Template:
      Count: 2
    Users:
      Count: 2{code}

Certificate details:
peer0.org1.example.com:
{code}Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            7d:24:f4:00:bb:03:e6:53:a9:e8:9a:93:d0:27:2c:7b
    Signature Algorithm: ecdsa-with-SHA256
        Issuer: C=US, ST=California, L=San Francisco, O=org1.example.com, CN=ca.org1.example.com
        Validity
            Not Before: Mar  1 11:08:19 2018 GMT
            Not After : Feb 27 11:08:19 2028 GMT
        Subject: C=US, ST=California, L=San Francisco, OU=peer, CN=peer0.org1.example.com
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub: 
                    04:75:47:31:d6:91:cb:3d:49:e6:09:bf:81:4d:61:
                    f9:69:48:d8:96:83:31:1d:96:c4:7f:61:c6:76:ba:
                    8d:34:1d:4d:65:65:c5:dd:5f:77:e3:1b:27:90:e6:
                    01:1f:07:a9:55:0c:80:05:01:a2:e2:ac:e5:c1:e8:
                    76:8a:b5:35:73
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Authority Key Identifier: 
                keyid:66:AE:4E:4E:A3:B3:B1:4C:6C:62:41:C5:B9:6D:36:79:B2:05:0C:CC:05:28:3B:68:63:F6:3F:A7:3E:6C:FA:9D

    Signature Algorithm: ecdsa-with-SHA256
         30:44:02:20:32:c1:27:83:8e:7b:d8:37:37:24:5c:16:aa:cc:
         87:3c:5b:21:6c:4e:4c:09:cf:63:aa:bd:6e:5e:36:28:df:4f:
         02:20:1b:6c:73:89:38:e8:9d:93:fa:9b:46:a0:c6:b7:d1:f5:
         3e:d0:cf:6e:f6:c2:5b:23:e3:3e:70:b9:d6:cb:62:b2{code}
peer0.org2.example.com:
{code}Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            68:0c:be:52:ac:c9:d8:25:89:d0:84:df:d4:6c:4a:b7
    Signature Algorithm: ecdsa-with-SHA256
        Issuer: C=US, ST=California, L=San Francisco, O=org2.example.com, CN=ca.org2.example.com
        Validity
            Not Before: Mar  1 11:08:19 2018 GMT
            Not After : Feb 27 11:08:19 2028 GMT
        Subject: C=US, ST=California, L=San Francisco, CN=peer0.org2.example.com
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub: 
                    04:61:36:bb:5e:1a:b7:3b:83:29:93:af:63:91:b8:
                    59:ca:2b:e1:d9:fa:bf:c0:b5:2c:bc:9f:8f:98:ac:
                    42:65:df:87:9c:fb:f4:3a:9c:de:f5:76:e8:04:d7:
                    74:8a:56:2b:10:81:05:6d:26:56:f6:e7:87:19:65:
                    cd:6f:08:09:94
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Authority Key Identifier: 
                keyid:98:FA:FB:3F:5B:CB:FA:17:71:96:2A:FD:84:97:05:A5:66:66:27:80:C1:3D:D0:C0:8F:B0:48:14:5F:33:90:7E

    Signature Algorithm: ecdsa-with-SHA256
         30:45:02:21:00:e8:d4:9e:2e:9d:f8:cd:a3:28:d5:08:7b:1a:
         92:dc:05:76:3c:cb:cd:ed:06:f8:6a:ea:7c:40:d2:24:ad:ee:
         82:02:20:5c:05:ee:c5:94:27:d7:f9:44:29:83:72:7b:47:20:
         52:99:00:18:38:96:40:0e:98:8a:dc:7b:32:6d:58:6a:40{code}

Note: Org2 OU field is missing from the certificate subject

You can reproduce this issue by using e2e. Modify the crypto-config.yaml setting the flags as stated above.",,,,,,,,,,,,,,,,,,,,01/Mar/18 12:06 PM;latitiah;orderer.example.com.log;https://jira.hyperledger.org/secure/attachment/14716/orderer.example.com.log,01/Mar/18 12:07 PM;latitiah;peer0.org1.example.com.log;https://jira.hyperledger.org/secure/attachment/14715/peer0.org1.example.com.log,01/Mar/18 12:07 PM;latitiah;peer0.org2.example.com.log;https://jira.hyperledger.org/secure/attachment/14714/peer0.org2.example.com.log,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i027sd:,,,,,,,,angelo.decaro,denyeart,latitiah,,,,,,,,,,,,"01/Mar/18 1:33 PM;denyeart;[~latitiah] [~scottz]

I believe e2e only sends invokes to peer0.org1.example.com, which does have the `peer` role, and therefore these transactions will indeed continue to pass endorsement validation and succeed.

If you change Org1 to be:
EnableNodeOUs: false
then I expect it would fail endorsement validation.  Please try that.","01/Mar/18 1:47 PM;angelo.decaro;Actually, on my machine, the transaction fails validation. -^At beginning, I thought this was strange as you said [~denyeart]. But then I checked how the policies are evaluated and found that even in an OR clause, all the children are evaluated. Therefore the failure, because Org2's MSP does not recognise '.peer'. Btw, this behaviour avoids forking. ^-

Still investigating.","01/Mar/18 2:58 PM;angelo.decaro;So, after having cleaned up my machine. I got the transactions validated as [~latitiah] reports. I checked also the second scenario by [~denyeart] and the transactions fails validation there.

This is not a bug. This is the expected behaviour.","01/Mar/18 3:09 PM;denyeart;Ok great, thanks for trying both the validation scenario and invalidation scenario.  I agree this is expected behavior, and will close.","01/Mar/18 3:14 PM;latitiah;Yes, I agree. I received the following error in the logs ""VSCC error: endorsement policy failure, err: signature set did not satisfy policy""",,,,,,,,,,,,,,,,,,,
E2E docker-compose does not have volumes,FAB-8602,28140,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,vramaiitkgp,vramaiitkgp,01/Mar/18 11:03 AM,02/Mar/18 9:39 AM,26/Apr/18 6:50 AM,01/Mar/18 4:31 PM,,,,,,,,,,fabric-samples,,,,0,must-fix,,,,,,,,"In 'first-network', running 'docker-compose -f docker-compose-e2e.yaml up' throws errors as the YAML file doesn't have the following base volumes defined (which are referenced in 'base/docker-compose-base.yaml', on which the 'e2e' YAML depends):
-  orderer.example.com:
-  peer0.org1.example.com:
-  peer1.org1.example.com:
-  peer0.org2.example.com:
-  peer1.org2.example.com:

 

This can be fixed by the applying the change in [https://github.com/hyperledger/fabric-samples/commit/5271be875e5eda8c2813fa7ccec9c06865bab4ae#diff-28af33799b19de744da20eb15214ea11] to the file 'first-network/docker-compose-e2e-template.yaml'.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i027r9:,,,,,,,,eragnoli,jyellick,vramaiitkgp,,,,,,,,release,release-1.0,master,true,"01/Mar/18 1:49 PM;jyellick;I'm not sure where to find the script which is actually executing this, but I suspect that it may need a change as well.

In particular – please add:

{noformat}
 docker-compose -f docker-compose-e2e.yaml down --volumes --remove-orphans
{noformat}

prior to executing the {{docker compose -f docker-compose-e2e.yaml up}}

Or you are likely to experience failures.

CR for fixing up the template pushed:  https://gerrit.hyperledger.org/r/18591","01/Mar/18 4:47 PM;jyellick;[~vramaiitkgp] For my own edification... how is this compose file being used? It is not used by the {{byfn.sh}} script, and does not appear to be being used by the CI.","02/Mar/18 9:39 AM;vramaiitkgp;[~jyellick] We are using this compose file in conjunction with our performance benchmarking test harness (based on the `fabric-node-js` SDK). Folks in MRL (Australia) and ICBI (Singapore) built a wrapper around the SDK to simplify network- and application-launching operations, initially targeted at our use case, but built to be more generic. Here are links to these projects:
 * [https://github.ibm.com/icbi/fabric-client-wrapper]
 * [https://github.ibm.com/hlfperf/hfbench-harness-nodejs]

I know the `byfn.sh` script doesn't depend on the e2e compose file, as it runs and tests a network using CLI. But the e2e compose is very useful for those of us who want to create a ""real"" application from scratch.",,,,,,,,,,,,,,,,,,,,,
"'when', 'then' are undefined names in ./bddtests/steps/endorser_impl.py",FAB-8601,28139,Bug,Invalid,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,luomin,cclauss,cclauss,01/Mar/18 10:13 AM,21/Apr/18 12:29 PM,26/Apr/18 6:50 AM,20/Apr/18 10:06 PM,,,,,,,,,,fabric-quality,,,,0,quality,,,,,,,,"*when* and *then* are undefined names in the file *./bddtests/steps/endorser_impl.py*

 

Undefined names can raise *NameError* at runtime.

 

A fix is proposed in https://github.com/hyperledger/fabric/pull/111",,,,144000,144000,,0%,144000,144000,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i027r1:,,,,,,,,cclauss,luomin,,,,,,,,,,,,,07/Mar/18 2:26 AM;luomin;https://gerrit.hyperledger.org/r/#/c/18671/,"15/Mar/18 11:55 PM;cclauss;PEP8 is clear that [wildcard imports should be avoided|https://www.python.org/dev/peps/pep-0008/#imports] so *from behave import when, then* would be a better approach than *from behave import \**",16/Mar/18 2:12 AM;luomin;[~cclauss] Appreciate very much for the comments. I modified it accordingly. Thanks for a review.,,,,,,,,,,,,,,,,,,,,,
[fabric-samples] byfn.sh delete my own running containers,FAB-8600,28138,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,alexliu,Revolution1,Revolution1,01/Mar/18 10:09 AM,27/Mar/18 7:03 PM,26/Apr/18 6:50 AM,27/Mar/18 7:03 PM,,,,,,,v1.2,,,fabric-samples,,,,0,,,,,,,,,"The function clearContainers() in byfn.sh delete all containers on the computer when ""byfn.sh -m down""

This function is useless, docker-compose can handle things well. Better just delete it.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i027qt:,,,,,,,,alexliu,jyellick,Revolution1,,,,,,,,master,,,true,"22/Mar/18 4:11 AM;alexliu;[https://gerrit.hyperledger.org/r/#/c/19583/]

Sure I can use docker-compose to complete this. But I think this function is not useless, maybe it will be used for another function, not just 'networkDown', removing it makes me feel too tight.",22/Mar/18 4:23 AM;alexliu;https://gerrit.hyperledger.org/r/#/c/19583/,"23/Mar/18 3:02 PM;jyellick;I agree with [~alexliu]. The docker-compose down can miss chaincode containers which are running.  It's a bug that should be fixed, but I think it needs to be done via something like awk as implemented in the CR.",,,,,,,,,,,,,,,,,,,,,
Cannot run peer because error when setting up MSP of type bccsp from directory /etc/hyperledger/msp: signing identity expired 2623h16m32.675625837s ago,FAB-8595,28123,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,doowb,doowb,01/Mar/18 12:27 AM,06/Mar/18 8:35 PM,26/Apr/18 6:50 AM,06/Mar/18 8:35 PM,,,,,,,,,,fabric-samples,,,,0,,,,,,,,,"Hi,

I had run the `chaincode-docker-devmode` sample using version x86_64-1.0.6 of the docker images. When I updated to using version x86_64-1.1.0-alpha of the docker images, I get the following error when running: `docker-compose -f docker-compose-sample.yaml up`:

> Cannot run peer because error when setting up MSP of type bccsp from directory /etc/hyperledger/msp: signing identity expired 2623h16m32.675625837s ago

I'm not really sure where else to ask this since I recently started using hyperledger technologies and I'm not exactly sure how to debug an error like this. My main goal was to use version 1.1.0-alpha so I could write chaincode in node.js.

Thanks,
Brian",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i027nh:,,,,,,,,denyeart,doowb,,,,,,,,,,,,,"06/Mar/18 8:35 PM;denyeart;Two thoughts:
 * Restart your docker environment, I've seen my docker environment get the wrong timestamp before, and restarting it fixed it.
 * Move to 1.1.0-rc1 (Release Candidate 1).  Expiring certificates have been updated between alpha1 and rc1.

As others are having success on 1.1.0-rc1, I will close this issue.",,,,,,,,,,,,,,,,,,,,,,,
Fix broken doc link,FAB-8593,28121,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,joe-alewine,denyeart,denyeart,28/Feb/18 11:46 PM,01/Mar/18 1:35 AM,26/Apr/18 6:50 AM,01/Mar/18 1:35 AM,,,,,,,v1.1,,,fabric-docs,,,,0,,,,,,,,,"The first link on this page is broken:

[http://hyperledger-fabric.readthedocs.io/en/master/config_update.html]

It should link to channel_update_tutorial instead of channel_config_tutorial.

Joe, could you do a final check for bad links on the topics that have been updated recently?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9nzy,,,,,,,,denyeart,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - always return status info,FAB-8592,28120,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,28/Feb/18 11:42 PM,05/Mar/18 5:36 AM,26/Apr/18 6:50 AM,05/Mar/18 5:36 AM,,,,,,,v1.1,,,fabric-sdk-node,,,,0,,,,,,,,,When submitting a request to the orderer and the status was not 'SUCCESS' an error was thrown and the status info was not returned. The orderer should not be returning an error and should return the exact status and status info to the caller on a positive resolve of the submit promise. The NodeSDK should not be evaluating the response.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i027n1:,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,master,,,true,01/Mar/18 4:12 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/18577/,,,,,,,,,,,,,,,,,,,,,,,
Error message does not tell me that channel already exists,FAB-8591,28117,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,pandrejko,pandrejko,28/Feb/18 10:05 PM,16/Mar/18 4:46 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,,,,,0,fabric,quality,,,,,,,"*Error: got unexpected status: BAD_REQUEST -- error authorizing update: error validating ReadSet: readset expected key [Group]  /Channel/Application at version 0, but got version 1*

 

I'm running BYFN and found that when I run the command 

peer channel create -o orderer.example.com:7050 -c $CHANNEL_NAME -f ./channel-artifacts/channel.tx --tls --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem

it fails with the error listed above.

 

After spending alot of time debugging this we found out that the problem was that the command was failing because the channel already existed (since it had been already created by the docker-compose-cli.yaml script). We need to improve the error message

 

Can we change the text of this error message to be more specific. Something that includes the text like the 'Channel already exists'?

 

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i027mt:,,,,,,,,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Confusion around having 'Latest' and 'Master' version of the docs,FAB-8589,28115,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,pandrejko,pandrejko,28/Feb/18 9:22 PM,05/Mar/18 1:15 AM,26/Apr/18 6:50 AM,05/Mar/18 1:15 AM,,,,,,,v1.1,,,fabric-docs,,,,0,fabric,quality,,,,,,,"There's been confusion about why we provide both a 'Latest' and 'Master' version of the docs:

[https://hyperledger-fabric.readthedocs.io/en/master/]

[https://hyperledger-fabric.readthedocs.io/en/latest/]

Our understanding is that they are identical and that the 'Latest' version of the docs simply points to the 'master' version. Is there a business need to have both versions? If not could we remove one of them?",,,,,,,,,,,,,,,,FAB-8629,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i027md:,,,,,,,,denyeart,pandrejko,,,,,,,,,,,,,"05/Mar/18 1:15 AM;denyeart;Agreed, this is being actively discussed in FAB-8629 and we will likely refactor readthedocs after 1.1 release to include 3 releases only:
 * release-1.0
 * release-1.1
 * master (aka latest)

Let's continue the discussion in FAB-8629.  I'll return this one as dup.",,,,,,,,,,,,,,,,,,,,,,,
kafka2 shutdown and 2 orderers panic,FAB-8584,28106,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,dongming,dongming,28/Feb/18 8:11 PM,01/Mar/18 9:28 PM,26/Apr/18 6:50 AM,01/Mar/18 4:19 PM,v1.1.0-alpha,,,,,,v1.1,,,fabric-orderer,,,,0,must-fix,,,,,,,,"test scenarios: using PTE to execute -FAB-8208- with 32 threads sending 2 tx per sec on a network of 64 peers, 3 orderers, 4 kafkas, 3 zookeepers, on a vLaunch with 8G RAm 400G harddriver.  After about 30 min, kafka2 and two orderers (orderer0 and orderer1) went down.  Logs are attached.

Fabric code tested: ebe5a68827f8033da5873163aab72dbce12b4d80 from master branch dated Feb 28.",,,,,,,,,,,,,,,,,FAB-8626,,,28/Feb/18 8:11 PM;dongming;8208-kafka2-log.txt;https://jira.hyperledger.org/secure/attachment/14706/8208-kafka2-log.txt,28/Feb/18 8:11 PM;dongming;8208-orderer0-log.txt;https://jira.hyperledger.org/secure/attachment/14705/8208-orderer0-log.txt,28/Feb/18 8:11 PM;dongming;8208-orderer1-log.txt;https://jira.hyperledger.org/secure/attachment/14704/8208-orderer1-log.txt,28/Feb/18 8:39 PM;dongming;kafka0-log.txt;https://jira.hyperledger.org/secure/attachment/14707/kafka0-log.txt,28/Feb/18 8:39 PM;dongming;kafka1-log.txt;https://jira.hyperledger.org/secure/attachment/14708/kafka1-log.txt,28/Feb/18 11:08 PM;suryalnvs;multihost_instantiate_8channels.tar.gz.txt;https://jira.hyperledger.org/secure/attachment/14713/multihost_instantiate_8channels.tar.gz.txt,28/Feb/18 8:39 PM;dongming;orderer2-log.txt;https://jira.hyperledger.org/secure/attachment/14709/orderer2-log.txt,28/Feb/18 8:39 PM;dongming;zookeeper0-log.txt;https://jira.hyperledger.org/secure/attachment/14710/zookeeper0-log.txt,28/Feb/18 8:39 PM;dongming;zookeeper1-log.txt;https://jira.hyperledger.org/secure/attachment/14711/zookeeper1-log.txt,28/Feb/18 8:39 PM;dongming;zookeeper2-log.txt;https://jira.hyperledger.org/secure/attachment/14712/zookeeper2-log.txt,,,,,,,,,,,,,,,,,,,,,,0|i027kd:,,,,,,,,denyeart,dongming,kchristidis,scottz,suryalnvs,,,,,,master,,,true,"28/Feb/18 9:03 PM;scottz;Observations: only 2 of 3 orderers panicked, about 40 secs after kafka2 went down, after seeing a few SERVICE_UNAVAILALBE logs. RAM Memory was low. Plenty of free disk space on hard drive.

We will try to reproduce with orderer log level set to DEBUG instead of ERROR.

This is the panic log in the orderer:
{code:java}
2018-02-28 18:38:06.763 UTC [common/deliver] deliverBlocks -> ERRO 040 [channel: testorgschannel8] Error reading from channel, cause was: SERVICE_UNAVAILABLE panic: interface conversion: ledger.QueryResult is nil, not *common.Block{code}",28/Feb/18 10:49 PM;Clayton Sims;[~denyeart]  I removed 'must-fix' tag from this per Kostas and Barry.,"28/Feb/18 11:17 PM;suryalnvs;Attached multihost_instantiate_8channels.tar.gz.txt file with logs for 3 orderers, 5 kafkas, 3 zookeepers, and 1 peer with debug logs.

Environment: Total 8 machines with 16gb ram, 160 gb disk space.

5 kafkas are distributed across 5 machines,

3 zookeepers across 3 machines,

3 orderers across 3 machines,

64 peers distributed across 8 machines with 8 peers on each.

we have one orderer, one zookeeper and one kafka on wfabric001, wfabric002, wfabric003 machines.
{code:java}
ubuntu@wfabric001:~$ df -h
Filesystem      Size  Used Avail Use% Mounted on
udev            7.9G     0  7.9G   0% /dev
tmpfs           1.6G   26M  1.6G   2% /run
/dev/vda1       156G  5.7G  150G   4% /
tmpfs           7.9G  1.1M  7.9G   1% /dev/shm
tmpfs           5.0M     0  5.0M   0% /run/lock
tmpfs           7.9G     0  7.9G   0% /sys/fs/cgroup
tmpfs           1.6G     0  1.6G   0% /run/user/1000
ubuntu@wfabric001:~$ free -m
              total        used        free      shared  buff/cache   available
Mem:          16046        1331        9244          26        5471       14310
Swap:             0           0           0
{code}
{code:java}
 ubuntu@wfabric002:~$ df -h
Filesystem      Size  Used Avail Use% Mounted on
udev            7.9G     0  7.9G   0% /dev
tmpfs           1.6G   26M  1.6G   2% /run
/dev/vda1       156G  5.6G  150G   4% /
tmpfs           7.9G  992K  7.9G   1% /dev/shm
tmpfs           5.0M     0  5.0M   0% /run/lock
tmpfs           7.9G     0  7.9G   0% /sys/fs/cgroup
tmpfs           1.6G     0  1.6G   0% /run/user/1000
ubuntu@wfabric002:~$ free -m
              total        used        free      shared  buff/cache   available
Mem:          16046        1775        8871          26        5399       13868
Swap:             0           0           0

{code}
{code:java}
 ubuntu@wfabric003:~$ df -h
Filesystem      Size  Used Avail Use% Mounted on
udev            7.9G     0  7.9G   0% /dev
tmpfs           1.6G   26M  1.6G   2% /run
/dev/vda1       156G  5.6G  150G   4% /
tmpfs           7.9G 1012K  7.9G   1% /dev/shm
tmpfs           5.0M     0  5.0M   0% /run/lock
tmpfs           7.9G     0  7.9G   0% /sys/fs/cgroup
tmpfs           1.6G     0  1.6G   0% /run/user/1000
ubuntu@wfabric003:~$ free -m
              total        used        free      shared  buff/cache   available
Mem:          16046        1351        9270          26        5425       14292
Swap:             0           0           0

{code}
 

 ","28/Feb/18 11:23 PM;scottz;Surya is attaching logs. We reproduced the error, using a different scenario (instantiating a chaincode in 4 channels simultaneously). This time we are sure there was no memory problem. But, like last time, we ran several docker containers on a single host (this time, each host has something like 8 peers and an orderer and/or kafka and/or a zookeeper). So, [~kchristidis] 's theory still makes sense - about the root cause of the trouble on the zookeeper stemming from the fact the i/o contention. (Refer to https://community.hortonworks.com/articles/105059/zookeeper-health-checks.html .) And we realize that good production environments should set up ZKs on their own host; that is an existing ZK recommendation.

But we would still like to make sure the orderer handles the situation better than panicking because of a null pointer.",28/Feb/18 11:51 PM;denyeart;[~kchristidis] What's your opinion on the null pointer?,"01/Mar/18 2:47 AM;kchristidis;[~scottz], [~suryalnvs]:
 # How many channels are there total? (Scott talks about 4 channels, the log attached by Surya talks about 8 channels.) What are their names? (UPDATE: Based on what I see in the logs: {{firstchannel}}, and {{testorgschannel1-8}}?)
 # How many blocks have your client(s) received on each?
 # Please list the contents of the {{/var/hyperledger/production/orderer}} directory on each of the orderers. (Include the contents of subdirectories.)","01/Mar/18 2:53 AM;suryalnvs;We had created 8 channels in total, but separated out the instantiation into two. We did instantiation on first 4 channels and seen the issue. The channel names are testorgschannel1, testorgschannel2 through testorgschannel8. I am not sure about the blocks.","01/Mar/18 3:04 AM;kchristidis;Surya, thanks for the follow-up.

I will need the info about the blocks when you have it handy.

Can you please also provide me with a play-by-play of every step exercised by your test?

You have given me the hardware setup above (wfabric001 to 003), but what exactly happens in the test is a bit fuzzier than it should be (note: I did read FAB-8208). Something along these lines will help:
 # 8 channels are created: foo, bar, baz, ...
 # The same chaincode is instantiated on channels foo, bar, ...
 # 32 threads start invoking these chaincodes at a rate of 2tps. (How are the requests spread out across channels?)
 # How about delivery? (etc., etc.)","01/Mar/18 3:08 AM;kchristidis;While I'm looking at this tomorrow, I'd like to ask that we spend some cycles on the following - let's attempt to find the minimum possible configuration that gives this error. For example: can we reproduce with just 1 channel? Please keep the DEBUG level for Fabric logs, but feel free to turn down the verbosity for the sarama logger. This doesn't seem to be part of the problem.","01/Mar/18 4:09 AM;denyeart;[~kchristidis] I think Scott's concern isn't so much that kafka/zookeeper had a problem, but how orderer handled the problem.  Specifically when the iterator exited prematurely and a nil result comes out, the nil is attempted to be converted into a block:

[https://github.com/hyperledger/fabric/blob/master/common/ledger/blockledger/file/impl.go#L73]

I think a nil check needs to be added there and handled gracefully.

[~manish-sethi] can speak more to the iterator contract, if that is needed. 

 ","01/Mar/18 4:27 AM;kchristidis;Been studying the logs and the iterator code in detail after the original post and yes, you're right -- I'm at the same spot.",01/Mar/18 4:28 AM;kchristidis;Will have this fixed tomorrow.,"01/Mar/18 5:20 AM;kchristidis;So building on what Dave reported, here's the play-by-play of how the bug comes to be:
 # The Deliver handler has spawned a goroutine that waits for the next block from the ledger: [https://github.com/hyperledger/fabric/blob/v1.1.0-alpha/common/deliver/deliver.go#L304]
 # The Deliver handler is also listening on the local cancel channel for anything that may go wrong in the orderer-to-Kafka connection: [https://github.com/hyperledger/fabric/blob/v1.1.0-alpha/common/deliver/deliver.go#L312]
 # The cancel channel closes because the orderer-to-Kafka connection breaks.
 # The Deliver handler closes the iterator and is then about to return an error message to the invoker but...
 # That closing of the iterator means that the iterator returns a {{nil}} block and a {{nil}} error (as they should): [https://github.com/hyperledger/fabric/blob/v1.1.0-alpha/common/deliver/deliver.go#L77]
 # This {{nil, nil}} combo is not expected by the goroutine (see step 1) which tries to convert the first return value into a block, thinking that it's business as usual: [https://github.com/hyperledger/fabric/blob/v1.1.0-alpha/common/ledger/blockledger/file/impl.go#L73]

On a sidenote, I suspect that the problem stems from a misunderstanding from our side of what the {{Next}} method of the {{Iterator}} interface is supposed to do. It _is_ the case that ""Next blocks until there is a new block available, or returns an error if the next block is no longer retrievable"" for the JSON and RAM ledgers, but this is no longer the case for the file ledger (which wraps the block ledger) because now Next can also block until Close is called. (I will leave the comment on that interface intact for now, but this is a good cue for us to remove the RAM/JSON implementations.)

Anyway, non-fancy patch pushed here: [https://gerrit.hyperledger.org/r/c/18585/]","01/Mar/18 7:11 PM;dongming;Retest with the fix,  the orderer logs show the same ""SERVICE_UNAVAILBLE"" message in deliverBlocks, but orderer panic does not occur when kafkas go down..

2018-03-01 17:54:18.872 UTC [common/deliver] deliverBlocks -> ERRO 2c7 [channel: testorgschannel3] Error reading from channel, cause was: SERVICE_UNAVAILABLE
2018-03-01 17:54:18.862 UTC [common/deliver] deliverBlocks -> ERRO 2c6 [channel: testorgschannel3] Error reading from channel, cause was: SERVICE_UNAVAILABLE

 ","01/Mar/18 9:28 PM;kchristidis;Great. That is the expected behavior. Thanks for the update.

The overall problem that you're seeing with this test is most likely due to ZK having to contend for disk access with other process. The article that Scott linked to above is a good introduction into the problem: https://community.hortonworks.com/articles/105059/zookeeper-health-checks.html",,,,,,,,,
Nil check missing in VSCCValidateTx,FAB-8575,28090,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,28/Feb/18 5:23 PM,13/Mar/18 7:38 PM,26/Apr/18 6:50 AM,09/Mar/18 2:28 PM,,,,,,,v1.0.7,v1.1,,fabric-peer,,,,0,,,,,,,,,"If the ChaincodeId of the header extension from the header, is missing in the transaction - the peer crashes:

{code]
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x18 pc=0x100b42a]

goroutine 377 [running]:
github.com/hyperledger/fabric/core/committer/txvalidator.(*vsccValidatorImpl).VSCCValidateTx(0xc422d62510, 0xc42015e700, 0xc4231f3c00, 0xb01, 0xb01, 0xc4203caf60, 0x0, 0x0, 0xc400000000)
        /opt/gopath/src/github.com/hyperledger/fabric/core/committer/txvalidator/validator.go:699 +0x84a
github.com/hyperledger/fabric/core/committer/txvalidator.validateTx(0xc421895f68, 0xc4203c8120)
        /opt/gopath/src/github.com/hyperledger/fabric/core/committer/txvalidator/validator.go:350 +0x13b9
github.com/hyperledger/fabric/core/committer/txvalidator.(*txValidator).Validate.func1.1(0xc422d687a0, 0xc4231f3c00, 0xb01, 0xb01, 0xc42015e640, 0x3, 0xc4203c8120)
        /opt/gopath/src/github.com/hyperledger/fabric/core/committer/txvalidator/validator.go:180 +0xd6
created by github.com/hyperledger/fabric/core/committer/txvalidator.(*txValidator).Validate.func1
        /opt/gopath/src/github.com/hyperledger/fabric/core/committer/txvalidator/validator.go:177 +0x12c

{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i027h1:,,,,,,,,denyeart,yacovm,,,,,,,,,release-1.0,master,,true,"28/Feb/18 5:34 PM;yacovm;Added 2 fixes, 1 for [master|https://gerrit.hyperledger.org/r/#/c/18527/] and 1 for [release|https://gerrit.hyperledger.org/r/#/c/18529/]

Since the peer can only crash, it will not cause a state fork. 
","28/Feb/18 9:01 PM;denyeart;Merged in master branch (1.1).

Changing Fix Version to v1.0.7 for release branch CR (actually to v1.0.6 since v1.0.7 doesn't exist yet).  And lowering to Medium.",07/Mar/18 7:44 AM;denyeart;[~rameshthoomu] This one is failing e2e CI in release branch.  Can you take a look?,,,,,,,,,,,,,,,,,,,,,
TOC needs correct channel update doc,FAB-8573,28088,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,joe-alewine,joe-alewine,joe-alewine,28/Feb/18 3:49 PM,28/Feb/18 5:18 PM,26/Apr/18 6:50 AM,28/Feb/18 5:18 PM,,,,,,,v1.1,,,fabric-docs,,,,0,,,,,,,,,"The doc ""Adding an Org to a Channel"" had its named changed as part of some changes. Another merge reverted the TOC to link to the old doc.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i027gl:,,,,,,,,joe-alewine,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Race condition in peerendorser,FAB-8571,28084,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sudeshrshetty,bstasyszyn,bstasyszyn,28/Feb/18 2:15 PM,19/Mar/18 8:52 PM,26/Apr/18 6:50 AM,19/Mar/18 8:52 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"A race condition may occur when reusing peer endorsers:

integration-tests_1  | WARNING: DATA RACE
integration-tests_1  | Write at 0x00c420337f38 by goroutine 119:
integration-tests_1  |   github.com/hyperledger/fabric-sdk-go/pkg/fab/peer.(*peerEndorser).conn()
integration-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/peer/peerendorser.go:102 +0x126
integration-tests_1  |   github.com/hyperledger/fabric-sdk-go/pkg/fab/peer.(*peerEndorser).sendProposal()
integration-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/peer/peerendorser.go:119 +0x8a
integration-tests_1  |   github.com/hyperledger/fabric-sdk-go/pkg/fab/peer.(*peerEndorser).ProcessTransactionProposal()
integration-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/peer/peerendorser.go:84 +0x175
integration-tests_1  |   github.com/hyperledger/fabric-sdk-go/pkg/fab/peer.(*Peer).ProcessTransactionProposal()
integration-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/peer/peer.go:254 +0x61
integration-tests_1  |   github.com/hyperledger/fabric-sdk-go/pkg/fab/txn.SendProposal.func1()
integration-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/txn/proposal.go:105 +0x93
integration-tests_1  | 
integration-tests_1  | Previous write at 0x00c420337f38 by goroutine 112:
integration-tests_1  |   github.com/hyperledger/fabric-sdk-go/pkg/fab/peer.(*peerEndorser).conn()
integration-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/peer/peerendorser.go:102 +0x126
integration-tests_1  |   github.com/hyperledger/fabric-sdk-go/pkg/fab/peer.(*peerEndorser).sendProposal()
integration-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/peer/peerendorser.go:119 +0x8a
integration-tests_1  |   github.com/hyperledger/fabric-sdk-go/pkg/fab/peer.(*peerEndorser).ProcessTransactionProposal()
integration-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/peer/peerendorser.go:84 +0x175
integration-tests_1  |   github.com/hyperledger/fabric-sdk-go/pkg/fab/peer.(*Peer).ProcessTransactionProposal()
integration-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/peer/peer.go:254 +0x61
integration-tests_1  |   github.com/hyperledger/fabric-sdk-go/pkg/fab/txn.SendProposal.func1()
integration-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/txn/proposal.go:105 +0x93
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9k1600001r,,,,,,,,bstasyszyn,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
BYFN - new image flag (-i) does not work with (-s couchdb) flag,FAB-8568,28081,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,denyeart,denyeart,denyeart,28/Feb/18 8:39 AM,28/Feb/18 4:06 PM,26/Apr/18 6:50 AM,28/Feb/18 4:06 PM,,,,,,,v1.1,,,fabric-samples,,,,0,,,,,,,,,"As of 1.1 alpha timeframe, 3rd party images do not follow the same docker IMAGE_TAG versioning as the other Fabric docker images.

Need to remove IMAGE_TAG from couchdb images, and default to latest couchdb image, which is how it worked prior to the -i introduction.

This change needs to be made in master branch but not release branch, since the IMAGE_TAGs are aligned in 1.0.x release.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i027fh:,,,,,,,,denyeart,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
CR https://gerrit.hyperledger.org/r/#/c/18411/ does not work in vagrant env,FAB-8567,28080,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,manish-sethi,manish-sethi,28/Feb/18 4:14 AM,01/Mar/18 1:37 AM,26/Apr/18 6:50 AM,01/Mar/18 1:37 AM,,,,,,,v1.1,,,fabric-samples,,,,0,must-fix,,,,,,,,The CR [https://gerrit.hyperledger.org/r/#/c/18411/] has an issue when executing the byfn script with -p flag. It does not allow docker containers to start because of filesystem mount issue in the vagrant folder.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i027f9:,,,,,,,,denyeart,jyellick,manish-sethi,,,,,,,,release,release-1.0,master,true,"28/Feb/18 4:19 AM;jyellick;A solution is available in review, but requires patching both master and release.

https://gerrit.hyperledger.org/r/18507 [FAB-8567] Remove explicit persistence path (r)
https://gerrit.hyperledger.org/r/18509 [FAB-8567] Remove explicit persistence path (m)

Thanks to [~sanchezl] for the bulk of this solution from his comment on https://gerrit.hyperledger.org/r/c/18411/","28/Feb/18 8:03 AM;denyeart;Adding to must-fix list, as we don't want to be changing our persistence approach across releases.

Let's review under master branch CR [https://gerrit.hyperledger.org/r/18509] , and then do the same for release branch.","28/Feb/18 7:38 PM;denyeart;[https://gerrit.hyperledger.org/r/#/c/18535/] Alternative approach (release branch)

[https://gerrit.hyperledger.org/r/#/c/18539/] Alternative approach (master branch)",,,,,,,,,,,,,,,,,,,,,
Duplicate descriptions in users-guide.rst,FAB-8565,28077,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,nnao,nnao,28/Feb/18 12:43 AM,28/Feb/18 12:43 PM,26/Apr/18 6:50 AM,28/Feb/18 12:43 PM,v1.1.0-alpha,,,,,,v1.1,,,fabric-ca,,,,0,Documentation,,,,,,,,L621-L632 and L634-L645 in docs/source/users-guide.rst are a duplicate.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i027el:,,,,,,,,nnao,,,,,,,,,,master,,,true,28/Feb/18 2:10 AM;nnao;https://gerrit.hyperledger.org/r/#/c/18503/,,,,,,,,,,,,,,,,,,,,,,,
Identity concept doc not in TOC,FAB-8562,28072,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,joe-alewine,joe-alewine,joe-alewine,27/Feb/18 8:35 PM,27/Feb/18 8:57 PM,26/Apr/18 6:50 AM,27/Feb/18 8:57 PM,v1.1,,,,,,v1.1,,,fabric-docs,,,,0,,,,,,,,,Merging the conceptual doc on Membership removed the Identity doc from the TOC (index.rst should have been updated before merging).,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i027dh:,,,,,,,,denyeart,joe-alewine,,,,,,,,,master,,,true,"27/Feb/18 8:48 PM;denyeart;This can go to 1.1, but in general we are not tagging doc improvements as must-fix.",,,,,,,,,,,,,,,,,,,,,,,
wrong link is pointed in the fabric-samples README on release branch,FAB-8561,28068,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Ratnakar,Ratnakar,Ratnakar,27/Feb/18 8:08 PM,28/Feb/18 7:46 PM,26/Apr/18 6:50 AM,28/Feb/18 7:45 PM,,,,,,,,,,fabric-samples,,,,0,fabric-samples,quality,,,,,,, README file on fabric-samples repo release branch is pointing to [latest|http://hyperledger-fabric.readthedocs.io/en/latest/getting_started.html] getting_started readthedocs instead of [release|http://hyperledger-fabric.readthedocs.io/en/release/getting_started.html] version.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i027cl:,,,,,,,,Ratnakar,,,,,,,,,,release,release-1.0,master,true,27/Feb/18 8:19 PM;Ratnakar;https://gerrit.hyperledger.org/r/#/c/18489/,,,,,,,,,,,,,,,,,,,,,,,
Block index/getTransactionId() should store/return all duplicated occurrences of the same txnId in the ledger,FAB-8557,28063,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,manish-sethi,minollo,minollo,27/Feb/18 4:11 PM,12/Mar/18 7:06 AM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-ledger,,,,0,,,,,,,,,"I asked this question originally on #fabric-orderer and then on #fabric-ledger, and I was asked to summarize it here. The original question was: ""Is there ever a situation where I may end up with duplicates of the same txnId in the same or even different blocks - maybe as the result of submitting the same transaction twice through the same OSN, or at the same time through multiple OSNs?""; [~kchristidis] replies that ""yes, that's indeed possible, and only the first validated instance of the same txnId would have a chance of being valid, the others would be marked as invalid"" (which I personally find a bit odd, but, OK). The follow up question I asked [~kchristidis] and [~manish-sethi] was ""then, how does the block index behave? What does getTransactionById(txnId) return if txnId was submitted multiple [~manish-sethi] confirmed that subsequent submissions of the same txnId would be marked as invalid, but he was not sure about the behavior of the block index/getTransactionById() in that scenario; maybe it returns the last submission of the same txnId? (which I would think is the worst of all possible scenarios).

My personal opinion is that duplicate txnIds should never occur in the ledger.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9n40c,,Next Items- Ledger,,,,,,denyeart,kchristidis,luomin,manish-sethi,minollo,rickr,,,,,,,,,"27/Feb/18 5:23 PM;manish-sethi;I confirmed in the code - the current behavior of the API `{color:#000000}GetTransactionByID` would return the latest transaction with the txid. This would mean that the transaction which is marked as invalid with the code `{color}{color:#000000}TxValidationCode_DUPLICATE_TXID`.{color}

{color:#000000}Not sure what option of the following makes sense in this scenario {color}

{color:#000000}1) Keep the current behavior{color}

{color:#000000}2) Return the first transaction with the given `txid` (could be valid or invalid for some other reason){color}

{color:#000000}3) {color}Return all the transactions with the given `txid`.

I personally would favor the third option because, this API returns the invalid transactions as well otherwise.",27/Feb/18 8:30 PM;kchristidis;In for the third option as well. I think [~elli-androulaki] is on the same boat.,"27/Feb/18 9:29 PM;manish-sethi;[~kchristidis] - only concern with the third option I have is that it would change the API for the function `{color:#000000}GetTransactionByID{color}` so that it returns an array now - so, it may have an impact on clients/SDKs. Better to take opinions of [~rickr] and [~mastersingh24]. Please feel free to tag other folks that may think could have an impact",27/Feb/18 10:28 PM;rickr;Currentl would we just pick one at random now ?  I would hope we would pick the valid one.  Hopefully there would only be one of those.  If we want more (ALL) to come back we should now have a *new API* something like  _{color:#000000}GetAllTransactionsByID{color}_,"27/Feb/18 11:34 PM;denyeart;I think we must fix the existing API, and should also add a new API, as follows:

GetTransactionById - Fix it to return the first transaction (since that is the only one that could potentially be valid).

GetTransactionsById - New API to return all the transactions for the given txid.",27/Feb/18 11:36 PM;denyeart;Have we ruled out having ordering service filter out the dups before they get into blocks?,27/Feb/18 11:54 PM;rickr;I think this is about what I suggested.  Only for me GetTransactionById and GetTransactionsById are too visually close for my liking :),"28/Feb/18 1:36 AM;kchristidis;{quote}Have we ruled out having ordering service filter out the dups before they get into blocks?{quote}

Consider the case where txid {{foo}} is submitted to OSN1 and during the same round (i.e. before a block is cut containing txid {{foo}} and thus updating the list of txid's on the orderers), the same txid is submitted to OSN2.

OSN2 has no way of knowing that OSN1 saw a txid of {{foo}} already, because this transaction hasn't been communicated in a voting round (think Raft or BFT). And the leader now has to deal with two identical txids for the same block. Which one do they go for?

Also: presumably the submitter to OSN1 got an ACK upon submitting {{foo}}. Same for the submitter to OSN2. If we drop, as you suggest, only one of them sees their transaction in the ledger. This may be fair game for the BFT ordering service where dropping transactions is par for the course, but in the CFT mode (think Raft) it is not.

So having the ordering service do filtering of duplicate transactions and not letting them in is tricky because it messes up your guarantees.",,,,,,,,,,,,,,,,
Membership conceptual doc - need to address final review comments,FAB-8555,28056,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,elli-androulaki,denyeart,denyeart,27/Feb/18 11:17 AM,28/Feb/18 8:55 AM,26/Apr/18 6:50 AM,28/Feb/18 8:55 AM,,,,,,,v1.1,,,fabric-docs,,,,0,,,,,,,,,"Address review comments from Membership conceptual doc here:

https://gerrit.hyperledger.org/r/#/c/17505/16/docs/source/membership/membership.md",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9nzw,,,,,,,,denyeart,elli-androulaki,,,,,,,,,master,,,true,"28/Feb/18 8:04 AM;elli-androulaki;CR: [https://gerrit.hyperledger.org/r/#/c/18513/]

 ",,,,,,,,,,,,,,,,,,,,,,,
validation execution timeout kill the peer,FAB-8554,28051,Bug,Unverified,FAB,Fabric,software,ChristopherFerris,,,Medium,,yacovm,Brucepark,Brucepark,27/Feb/18 7:28 AM,12/Apr/18 12:04 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-endorser,,,,0,,,,,,,,,"In an environment with two Orgs and four peers (each org has 2 peers), 4 kafkas, 3 zookeepers and 2 orderers (no couchdb).

During the test, four peers died at the same time.

The error messages are all the same.

 
{code:java}
2018-02-27 02:37:35.590 UTC [gossip/state] commitBlock -> ERRO f8a4bf Got error while committing(Invoke VSCC failed for transaction txid=72d936d31215731f58bf0b71b85cb9b7db544eceaa51246d1df1483c39833697, error error executing chaincode: failed to execute transaction: timeout expired while executing transaction

Validation failed

github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).commitBlock

/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:778

github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads

/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:561

runtime.goexit

/opt/go/src/runtime/asm_amd64.s:2337)

2018-02-27 02:37:35.631 UTC [gossip/state] deliverPayloads -> CRIT f8a55e Cannot commit block to the ledger due to Invoke VSCC failed for transaction txid=72d936d31215731f58bf0b71b85cb9b7db544eceaa51246d1df1483c39833697, error error executing chaincode: failed to execute transaction: timeout expired while executing transaction

Validation failed

github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads

/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:562

runtime.goexit

/opt/go/src/runtime/asm_amd64.s:2337

panic: Cannot commit block to the ledger due to Invoke VSCC failed for transaction txid=72d936d31215731f58bf0b71b85cb9b7db544eceaa51246d1df1483c39833697, error error executing chaincode: failed to execute transaction: timeout expired while executing transaction

Validation failed

github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads

/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:562

runtime.goexit

/opt/go/src/runtime/asm_amd64.s:2337



goroutine 220 [running]:

github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panicf(0xc4201bbc50, 0xebf885, 0x2c, 0xc4228be1a0, 0x1, 0x1)

/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:194 +0x134

github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads(0xc4200d1d00)

/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:562 +0x4c7

created by github.com/hyperledger/fabric/gossip/state.NewGossipStateProvider

/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:252 +0x6d3{code}
 

Not only peer but also all dev-peers were dead.
 All nodes seem to have died at similar times,
 The last log of the dev-peer is:

 
{code:java}
```
======== Invoke 1 mspid: Org1MSP <nil>===========
ex02 Invoke version2
======== Invoke 1 mspid: Org1MSP <nil>===========
ex02 Invoke version2
2018-02-27 02:37:35.863 UTC [shim] func1 -> ERRO 003 Received error from server, ending chaincode stream: rpc error: code = Unavailable desc = transport is closing
Error starting Simple chaincode: rpc error: code = Unavailable desc = transport is closing{code}
 

chaincode:

 
{code:java}
func (t *SimpleChaincode) get(stub shim.ChaincodeStubInterface, name string) pb.Response {
  valbytes, err := stub.GetState(name)
  if err != nil {
    return shim.Error(""Fail to get State:"" + name)
  }

  return shim.Success(valbytes)
}


func (t *SimpleChaincode) inc(stub shim.ChaincodeStubInterface, name string) pb.Response {
  valbytes, err := stub.GetState(name)
  if err != nil {
    return shim.Error(""Fail to get State"")
  }

  val, _ := strconv.Atoi(string(valbytes))
  valbytes = []byte(strconv.Itoa(val+1))

  err = stub.PutState(name, valbytes)

  if err != nil {
    return shim.Error(err.Error())
  }

  return shim.Success(nil)
}

{code}
 

test client (node)
{code:javascript}

//IBM-Blockchain-marbles
var fcw = require('./src/fabric/fc_wrangler/index.js')({ block_delay: 60 * 1000 }, logger);

const query_chaincode_async = promisify(fcw.query_chaincode);
const invoke_chaincode_async = promisify(fcw.invoke_chaincode);

async function intervalFunc() {
	let state_store = await getKeyValueStore()
	let user_context = await getUserContext(state_store)

	var idx = 0;

	var MAX = 10
	// for(var i =0; i < MAX; i++) {
	// 	let name = 'key' + i.toString();
	// 	await incValue(name);
	// 	logger.info('done initialize', name);
	// }



	if (user_context != null) {
		while (true) {
			
			var successCount = 0;
			var errorCount = 0;

			var startedAt = Date.now();
			logger.warn('start');

			for(var tryCount =0 ; tryCount < MAX; tryCount++) {
				let idx2 = idx;
				idx++;

				let name = uuid.v4();
				logger.info('>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>', tryCount, successCount, errorCount);
				try {
					logger.info(idx2, '###### before ######', name);
					if (isModeA()) {
						incValue(name).then(async () =>{
							successCount++;
							logger.info(idx2, '###### Success IncA ###### ', name);
						}).catch((exception) => {
							errorCount++;
							logger.error(idx2, '###### exception ######', name);
							logger.error(exception);
						});
						
					} else {
						incValue(name).then(async () =>{
							successCount++;
							logger.info(idx2, '###### Success IncB ###### ');
						}).catch((exception) => {
							errorCount++;
							logger.error(idx2, '###### exception ######', name);
							logger.error(exception);
						});
					}
					// logger.info('###### after ######', await getValue('a'), await getValue('b'), await getValue('c'));
				} catch(exception) {
					errorCount++;
					logger.error(idx2, ""unexpected exception"", name);
					logger.error(exception);
				}
			}


			while (tryCount > (successCount + errorCount)) {
				let info = await channel.queryInfo();
				logger.info('==== waiting ======= ', tryCount, successCount, errorCount, info.height);

				await sleep(100);
			}

			var endAt = Date.now();
			logger.warn('end ', MAX, Math.floor((tryCount * 1000) / (endAt - startedAt)));
			let info = await channel.queryInfo();
			logger.warn(info.height);
			MAX += 10;
			await sleep(5000);
		}
	} else {
		console.error(""user "" + config.userId + "" not found"");
	}
}

function incValue(name) {
	let func = """"  
	let args = []
	if (name == ""a"") {
		func = ""incA"";
	} else if (name == ""b"") {
		func = ""incB"";
	} else {
		func = ""inc"";
		args = [name];
	}

	var opts = {
		chaincode_id: chaincode_id,
		cc_function: func,
		cc_args: args,
		peer_urls: config.peer_urls ,
		/* target_event_url: , */
		event_urls: config.peer_event_urls, 
		peer_tls_opts: peer_tls_opts,
		endorsed_hook: function(error, res) {},
		ordered_hook: function(error, res) {}
	};

	return invoke_chaincode_async({ client: fabric_client, channel: channel}, opts)
}

function getValue(name) {
	let func = """"
	let args = []
	if (name == ""a"") {
		func = ""getA"";
	} else if (name == ""b"") {
		func = ""getB"";
	} else if (name == ""c"") {
		func = ""getC"";
	} else {
		func = ""get"";
		args = [name];
	}

	var opts = {
		chaincode_id: chaincode_id,
		cc_function: func,
		cc_args: args,
		peer_urls: config.peer_urls,
		peer_tls_opts: peer_tls_opts
	};

	return query_chaincode_async({ channel: channel}, opts).then((x) => { return x.parsed })
}

intervalFunc()

{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0279h:,,,,,,,,Brucepark,C0rWin,yacovm,,,,,,,,,,,,27/Feb/18 8:16 AM;yacovm;can you please attach the peer logs too?,"27/Feb/18 8:18 AM;yacovm;also - what is the output of:
{code}dmesg{code}
{code}df -h{code}
?",12/Apr/18 12:04 PM;C0rWin;@종석 박 Do you have any news? ,,,,,,,,,,,,,,,,,,,,,
[CI] - removed unused CI jobs,FAB-8552,28048,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,27/Feb/18 4:34 AM,27/Feb/18 6:23 PM,26/Apr/18 6:50 AM,27/Feb/18 6:23 PM,,,,,,,,,,fabric-ci,,,,0,,,,,,,,,"remove unsused CI jobs, marcos and shell scripts.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0278t:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,27/Feb/18 1:59 PM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/18457/,,,,,,,,,,,,,,,,,,,,,,,
Some binaries inside docker images do not report correct version,FAB-8551,28046,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,jyellick,jyellick,27/Feb/18 4:09 AM,12/Apr/18 12:59 PM,26/Apr/18 6:50 AM,12/Apr/18 12:59 PM,,,,,,,v1.2,,,fabric-tools,,,,0,,,,,,,,,"The build process for {{configtxgen}} {{configtxlator}} and {{cryptogen}} all produce local binaries with sane output for the Version like: {{1.1.0-beta-snapshot-b0f284a58}}

However, inside of the fabric-tools docker image, even from the same build, these binaries output the unhelpful {{development build}} as the Version.

Note, this does not appear to affect the {{peer}} or {{orderer}} binaries which likewise output a sane version from within the image.

Marking as a fix version of v1.1 in case this is an easy fix.  Otherwise, it is probably fine for deferral.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0278d:,,,,,,,,denyeart,jyellick,mastersingh24,,,,,,,,master,,,true,27/Feb/18 4:11 AM;denyeart;[~rameshthoomu] Could you take a look?,08/Apr/18 11:46 AM;mastersingh24;https://gerrit.hyperledger.org/r/20303,,,,,,,,,,,,,,,,,,,,,,
fabric-ca-server started successfully with wrong cert file path,FAB-8548,28043,Bug,In Progress,FAB,Fabric,software,ChristopherFerris,,,Medium,,nnao,nnao,nnao,26/Feb/18 11:06 PM,28/Mar/18 8:37 PM,26/Apr/18 6:50 AM,,v1.1.0-alpha,,,,,,v1.2,,,fabric-ca,,,,0,,,,,,,,,"Although CA cert file was specified in arguments and it was the wrong path, key and certification files were generated and fabric-ca-server starts successfully
In this situation, I think it should stop the generation of keys and result in failure.
 
{code:java}
root@28b0de0580f5:/# fabric-ca-server start -b admin:admin --ca.keyfile <correct path>/ec-key.pem --ca.certfile <wring path>/ec.pem
2018/02/26 19:59:56 [INFO] Created default configuration file at /etc/hyperledger/fabric-ca-server/fabric-ca-server-config.yaml
2018/02/26 19:59:56 [INFO] Starting server in home directory: /etc/hyperledger/fabric-ca-server
2018/02/26 19:59:56 [INFO] Server Version: 1.1.0-beta-snapshot-680960e
2018/02/26 19:59:56 [INFO] Server Levels: &{Identity:1 Affiliation:1 Certificate:1}
2018/02/26 19:59:56 [INFO] generating key: &{A:ecdsa S:256}
2018/02/26 19:59:56 [INFO] encoded CSR
2018/02/26 19:59:56 [INFO] signed certificate with serial number 451130967267412479206304574486390166605202983091
2018/02/26 19:59:56 [INFO] The CA key and certificate were generated for CA
2018/02/26 19:59:56 [INFO] The key was stored by BCCSP provider 'SW'
2018/02/26 19:59:56 [INFO] The certificate is at: /tmp/test/ec.pem
2018/02/26 19:59:57 [INFO] Initialized sqlite3 database at /etc/hyperledger/fabric-ca-server/fabric-ca-server.db
2018/02/26 19:59:57 [INFO] Home directory for default CA: /etc/hyperledger/fabric-ca-server
2018/02/26 19:59:57 [INFO] Listening on http://0.0.0.0:7054
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9n5zw,,,,,,,,aambati,denyeart,nnao,,,,,,,,,,,,"27/Feb/18 1:02 AM;aambati;my immediate thought is that it won't be possible to distinguish between the case where --ca.keyfile and --ca.certfile are specified and the case where they are not specified and defaults are used

May be if the certfile value is not default value, then if the file does not exist , we could error out.","27/Feb/18 3:01 AM;nnao;In following code, if cert file value does not default and it does not exist(certFileExists is false), we couldn't get an error.

[https://github.com/hyperledger/fabric-ca/blob/680960ef5b701a177d8acfc5676eda0d83104100/lib/ca.go#L236-L253]

I suppose fabric-ca-server will return an error if certFileExists is false.",27/Feb/18 3:03 AM;denyeart;Let's consider for 1.2.,"27/Feb/18 6:15 PM;nnao;There is no problem to move target v1.2.

https://gerrit.hyperledger.org/r/#/c/18479/",,,,,,,,,,,,,,,,,,,,
ca.keyfile arguments typo in documents.,FAB-8547,28042,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,nnao,nnao,26/Feb/18 11:01 PM,28/Feb/18 12:00 AM,26/Apr/18 6:50 AM,28/Feb/18 12:00 AM,v1.1.0-alpha,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"It needs to be ca.keyfile instead of ca-keyfile.
- docs/source/serverconfig.rst
- docs/source/users-guide.rst
- cmd/fabric-ca-server/config.go

{code:java}
vagrant@ubuntu-xenial:/opt/gopath/src/github.com/hyperledger/fabric-ca$ grep -r ""ca-keyfile"" ./
./docs/source/serverconfig.rst:    #      b) --ca-keyfile ../mykey.pem
./docs/source/users-guide.rst:file, delete the files specified by the ``ca.certfile`` and ``ca-keyfile``
./cmd/fabric-ca-server/config.go:#      b) --ca-keyfile ../mykey.pem
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0277p:,,,,,,,,aambati,denyeart,nnao,,,,,,,,master,,,true,27/Feb/18 12:41 AM;aambati;https://gerrit.hyperledger.org/r/c/18451/,27/Feb/18 1:02 AM;nnao;https://gerrit.hyperledger.org/r/#/c/18453/,27/Feb/18 2:59 AM;denyeart;[https://gerrit.hyperledger.org/r/#/c/18453/] looks like the more comprehensive fix.,,,,,,,,,,,,,,,,,,,,,
Abstract Event Client Race Condition,FAB-8546,28041,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,bstasyszyn,bstasyszyn,bstasyszyn,26/Feb/18 11:00 PM,27/Feb/18 3:27 PM,26/Apr/18 6:50 AM,27/Feb/18 3:27 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"18:27:31 ==================
18:27:31 WARNING: DATA RACE
18:27:31 Write at 0x00c420094e40 by goroutine 56:
18:27:31   runtime.closechan()
18:27:31       /opt/go/go1.9.2.linux.amd64/src/runtime/chan.go:313 +0x0
18:27:31   github.com/hyperledger/fabric-sdk-go/pkg/fab/events/service/dispatcher.(*Dispatcher).HandleStopEvent()
18:27:31       /w/workspace/fabric-sdk-go-tests-verify-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/events/service/dispatcher/dispatcher.go:202 +0x222
18:27:31   github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client/dispatcher.(*Dispatcher).HandleStopEvent()
18:27:31       /w/workspace/fabric-sdk-go-tests-verify-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client/dispatcher/dispatcher.go:85 +0x5c
18:27:31   github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client/dispatcher.(*Dispatcher).HandleStopEvent-fm()
18:27:31       /w/workspace/fabric-sdk-go-tests-verify-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client/dispatcher/dispatcher.go:205 +0x55
18:27:31   github.com/hyperledger/fabric-sdk-go/pkg/fab/events/service/dispatcher.(*Dispatcher).Start.func1()
18:27:31       /w/workspace/fabric-sdk-go-tests-verify-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/events/service/dispatcher/dispatcher.go:117 +0x486
18:27:31 
18:27:31 Previous read at 0x00c420094e40 by goroutine 63:
18:27:31   runtime.chansend()
18:27:31       /opt/go/go1.9.2.linux.amd64/src/runtime/chan.go:128 +0x0
18:27:31   github.com/hyperledger/fabric-sdk-go/pkg/fab/events/service.(*Service).Submit()
18:27:31       /w/workspace/fabric-sdk-go-tests-verify-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/events/service/service.go:109 +0x1c1
18:27:31   github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client.(*Client).connect()
18:27:31       /w/workspace/fabric-sdk-go-tests-verify-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client/client.go:205 +",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0277h:,,,,,,,,bstasyszyn,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
peer node start doc should not include --orderer flag,FAB-8545,28039,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,denyeart,denyeart,denyeart,26/Feb/18 9:09 PM,26/Feb/18 10:05 PM,26/Apr/18 6:50 AM,26/Feb/18 10:05 PM,,,,,,,v1.1,,,fabric-docs,,,,0,,,,,,,,,"""peer node start"" doc should not include --orderer flag.  This flag does nothing on ""peer node"" command.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9nzi,,,,,,,,denyeart,,,,,,,,,,master,,,true,26/Feb/18 9:11 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/18441/,,,,,,,,,,,,,,,,,,,,,,,
Pre-reqs are not giving accurate and typical Go configuration,FAB-8544,28038,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,bmos299,bmos299,bmos299,26/Feb/18 8:39 PM,28/Feb/18 7:21 PM,26/Apr/18 6:50 AM,28/Feb/18 7:21 PM,,,,,,,,,,fabric-docs,,,,0,Documentation,,,,,,,,The golang section is not giving typical $GOPATH information and the note: has bug in it where it is missing a : and not showing up in the .rst. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9n8i,,,,,,,,bmos299,denyeart,,,,,,,,,,,,,26/Feb/18 9:34 PM;bmos299;Change submitted via https://gerrit.hyperledger.org/r/#/c/18445/,28/Feb/18 7:21 PM;denyeart;Abandoned.,,,,,,,,,,,,,,,,,,,,,,
make integration-test error for can't load packages,FAB-8527,28014,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,meinvzou,meinvzou,26/Feb/18 7:09 AM,23/Mar/18 4:04 AM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"While download the latest fabric-sdk-go.

$ make integration-test

errors shown like below:

integration-tests_1 | Running integration tests ...
integration-tests_1 | Testing with code level stable (Fabric v1.0) ...
integration-tests_1 | opt/gopath/src/github.com/hyperledger/fabric-sdk-go/third_party/github.com/hyperledger/fabric/common/cauthdsl/policyparser.go:29:2: cannot find package ""github.com/Knetic/govaluate"" in any of:
integration-tests_1 | /opt/go/src/github.com/Knetic/govaluate (from $GOROOT)
integration-tests_1 | /opt/gopath/src/github.com/Knetic/govaluate (from $GOPATH)



Maybe one possible solution is to modify fabric-sdk-go/test/fixtures/dockerenv/docker-compose-nopkcs11-test.yaml 'volumes' content to:

volumes:
 - ../../../../../../:/opt/gopath/src
 #- ../../../:/opt/gopath/src/github.com/hyperledger/fabric-sdk-go",,,,,,,,,,,,,,,,,,,,21/Mar/18 7:28 AM;meinvzou;Makefile;https://jira.hyperledger.org/secure/attachment/14804/Makefile,23/Mar/18 4:03 AM;meinvzou;make populate-vendor timeout error.png;https://jira.hyperledger.org/secure/attachment/14809/make+populate-vendor+timeout+error.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02725:,,,,,,,,meinvzou,troyronda,,,,,,,,,,,,,20/Mar/18 11:15 AM;troyronda;I have not experienced this issue. Is this still happening for you?,"21/Mar/18 6:44 AM;meinvzou;[~troyronda] I'll try it later and give you a response. 

 ","21/Mar/18 7:28 AM;meinvzou;Hi, [~troyronda], I've downloaded the latest code right now and 'docker rmi' all my images exsiting before. Run 'make integration-test', the same error occurs.

I've changed dependency and docker registry in the Makefile for my convience.[^Makefile]","21/Mar/18 11:20 AM;troyronda;Is the vendor directory populated?

Is 
make populate-vendor
working? ","23/Mar/18 4:04 AM;meinvzou;I'm in China and added the proxy already, 'make populate-vendor' issue timeout errors for golang.org and goole.golang.org packages. I've downloaded it manually from github, remove the dep checks, and change the volume in docker-compose-nopkcs11-test.yaml , then the ' make integration-test' passed.

Strongly recommend to add the vendor infos in the fabric-sdk-go repository just like fabric.

!make populate-vendor timeout error.png!",,,,,,,,,,,,,,,,,,,
[upgrade] Orderers and peers containers are exiting when restarted the containers after replacing the v1.0.x binaries to v1.1 binaries,FAB-8524,28011,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,suryalnvs,suryalnvs,26/Feb/18 12:08 AM,27/Feb/18 8:38 PM,26/Apr/18 6:50 AM,27/Feb/18 8:38 PM,v1.1,,,,,,v1.1,,,fabric-docs,,,,0,,,,,,,,,"After upgrading the binaries of peers and orderer from v1.0.x version to v1.1 in v1.0.x containers, containers are getting exited with following error:

For orderer:
{code:java}
docker logs -f orderer.example.com
orderer: error while loading shared libraries: libltdl.so.7: cannot open shared object file: No such file or directory
orderer: error while loading shared libraries: libltdl.so.7: cannot open shared object file: No such file or directory
{code}
For peers:
{code:java}
docker logs -f peer0.org1.example.com
peer: error while loading shared libraries: libltdl.so.7: cannot open shared object file: No such file or directory
peer: error while loading shared libraries: libltdl.so.7: cannot open shared object file: No such file or directory
{code}
*Steps:*
 # Launch the network with v1.0.x using the following commands from byfn
{code:java}
cd <path to fabric-samples/first-network>
git checkout release
./byfn.sh -m up -i 1.0.x{code}

 # Have the binaries built on the latest code
 # Stop the orderer and peers using the following command
{code:java}
docker stop orderer.example.com peer0.org1.example.com peer1.org1.example.com peer0.org2.example.com peer1.org2.example.com
{code}

 # Copy the latest orderer binary to orderer container using the following command
{code:java}
docker cp <path/to/fabric>/build/bin/orderer orderer.example.com:/usr/local/bin/orderer
{code}

 # Similarly copy the peer binaries to peers using the following command
{code:java}
docker cp <path/to/fabric>/build/bin/peer <peer container name>:/usr/local/bin/peer
{code}

 # Restart the containers using the following command
{code:java}
docker start orderer.example.com peer0.org1.example.com peer1.org1.example.com peer0.org2.example.com peer1.org2.example.com
{code}

 # Look for the containers using the following command
{code:java}
docker ps -a{code}

 # Look for the orderer logs using the following command
{code:java}
docker logs orderer.example.com
{code}

Orderer logs should show the following errors
{code:java}
docker logs -f orderer.example.com
orderer: error while loading shared libraries: libltdl.so.7: cannot open shared object file: No such file or directory
orderer: error while loading shared libraries: libltdl.so.7: cannot open shared object file: No such file or directory
{code}
Peer logs should show the similar logs as well

*Expected:* Orderer and peers should start normally",,,,,,,,,,,,FAB-7202,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0271h:,,,,,,,,ChristopherFerris,denyeart,jyellick,mastersingh24,scottz,suryalnvs,,,,,,,,,"26/Feb/18 3:10 AM;scottz;Surya got the test to pass. We will have to update the upgrade doc prereqs/steps. Too busy to do it tonight; he still has 3 more big tests to run, but he captured his notes for updating the doc later. (Maybe he can give them to someone else to update the doc tomorrow.)",26/Feb/18 8:20 PM;denyeart;[~scottz] [~suryalnvs] Could somebody update the upgrade doc? Or at least add comments at the right place? https://gerrit.hyperledger.org/r/#/c/18351/,"26/Feb/18 10:05 PM;scottz;Test steps for FAB-7202: replacing peer binaries (not images) to do the upgrade:
 # stop 1.0.x peer
 # replace peer binary in /usr/local/bin with v1.1 binary from outside container
 # restart docker container

Problem: the peer exits. Thus we created this bug FAB-8524.

Initially we were thinking it is a doc bug. Now we'd like to explore whether we could do something to allow the user to do this without the additional steps (1A and 1B, documented below) and without adding such details to the upgrade documentation.

To get the test to pass, our workaround ""solution"" was to log into each peer container and update and install the library ""libltdl-dev"". In other words, insert two steps between 1 and 2:
 * 1.A. launch each peer container first only in bash
 * 1.B. log into each peer container and update and install the library ""libltdl-dev""

The ideal solution would be something like ""adding the library to the peer binary"" like we could add artifacts to the images. In lieu of that, hmmm, maybe this is a doc bug afterall and we could document all these manual steps.

Or we just drop support for upgrading binaries directly, instead of images.

Thoughts?","27/Feb/18 3:56 AM;denyeart;The test scenario here was awkward and not realistic... real deployments would not upgrade binaries within a docker image, so the extra pain you faced around launching containers first only in bash etc, in order to upgrade binaries in a container, I don't see as a real problem to solve.

If a deployment was using native binaries, they would use native binaries exclusively.  They would still hit the problem mentioned here around the libraries.  But we have never documented how to get a new system working using the binaries anyways, let along an upgrade.

I'm thinking what we should do is back off some of the native binary language in the upgrade doc so that we don't give the false impression that we document native binary install/upgrade instructions.","27/Feb/18 4:03 AM;denyeart;Since we don't document/support this scenario, I will go ahead to change to Medium, but leave it open for others to comment.","27/Feb/18 4:15 AM;jyellick;+1 for those doing native deployments, this is not at all the sort of pain they would face.","27/Feb/18 7:58 AM;mastersingh24;They should not hit the problem mentioned above at all.
We ship the binaries produced by the `make release` command.
This will build static binaries with the nopkcs11 tag.

So the real scenario here is to run
`make release` with release branch (or pull down the binaries via the bootstrap script)
then
`make release` with master and replace the binaries created from v1.0.x","27/Feb/18 12:31 PM;ChristopherFerris;the use case is completely unrealistic. The test should be abandoned or redesigned such that the image is replaced, not the binaries within.","27/Feb/18 8:38 PM;denyeart;Discussed with testers, removing test case, closing defect.",,,,,,,,,,,,,,,
Not all images in the compose file use the IMAGE_TAG,FAB-8518,28005,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,25/Feb/18 1:42 PM,25/Feb/18 2:12 PM,26/Apr/18 6:50 AM,25/Feb/18 2:12 PM,v1.0.6,v1.1.0-rc1,,,,,v1.0.6,v1.1,,fabric-samples,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02705:,,,,,,,,jyellick,,,,,,,,,,release,release-1.0,master,true,,,,,,,,,,,,,,,,,,,,,,,,
change byfn.sh generate to byfn.sh -m generate in https://hyperledger-fabric.readthedocs.io/en/master/build_network.html,FAB-8510,27997,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,nileshdeotale,nileshdeotale,24/Feb/18 8:29 PM,26/Feb/18 7:59 PM,26/Apr/18 6:50 AM,26/Feb/18 7:59 PM,,,,,,,v1.1,,,fabric-docs,,,,0,fabric-doc,quality,,,,,,,"As per documentation ""./byfn.sh generate"" (does not work.. returns command usage options) should be run. I believe f,or it to work, -m option is required  ""./byfn.sh -m generate"" .

Please correct documentation in https://hyperledger-fabric.readthedocs.io/en/master/build_network.html

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026yl:,,,,,,,,ChristopherFerris,denyeart,lehors,mastersingh24,muralisr,nileshdeotale,,,,,master,,,true,"24/Feb/18 8:56 PM;mastersingh24;[~nileshdeotale] I believe this works - but you need to clone the master branch of fabric-samples.  By default, git clone clones the release branch.

Unless we plan to deprecate the `-m` option, maybe we should put it back in the docs?
In any case, we'll need to make sure that we are cloning the right version of fabric-samples","25/Feb/18 4:21 PM;denyeart;I confirmed release branch fabric-samples requires -m option.  Master branch works either with or without the -m.  I believe -m was removed from the docs so that we could reduce the baggage going forward.

I assume we will have a release-1.1.x branch for both fabric and fabric-samples, and that it will become the default.  In that case I think we're good with how the docs are now (no -m option needed).",26/Feb/18 12:29 PM;mastersingh24;Right.  And we'll want to make the 1.1.x branch the default for all repos once we release,"26/Feb/18 12:54 PM;ChristopherFerris;This is nuts... apparently, there are multiple patches that are changing how we handle the mode. Needs to STOP. The script was originally written with a mode option that takes an argument. Please just align around that.","26/Feb/18 2:22 PM;denyeart;Ok, the fabric-sample master branch works either with or without the -m. 

[~muralisr] Could you add the -m instruction back to the byfn tutorial, so that we have consistency across releases (I believe you removed it?)","26/Feb/18 3:02 PM;muralisr;[~denyeart] I believe it was [~lehors] who made this change as part of the work to refactor the sample so the CLI container can be used correctly.

However, should we do this ?  The ""-m"" is not needed now...its just left there if someone runs old scripts. At some point we do have to remove the '-m' from docs. Why not now ? 

Thoughts/correction [~lehors] ?",26/Feb/18 3:30 PM;mastersingh24;Let's put the -m back in.  People who know about the shortcut can use it,26/Feb/18 3:31 PM;muralisr;OK. will take care of it.,26/Feb/18 3:49 PM;muralisr;https://gerrit.hyperledger.org/r/#/c/18419/,"26/Feb/18 4:02 PM;denyeart;Thanks [~muralisr] .  I've +2ed. Sorry if I tagged you incorrectly, somehow I thought you were involved in those updates.  All's well that ends well.","26/Feb/18 4:05 PM;muralisr;[~denyeart] no worries. I did review the CR, probably that was it.",26/Feb/18 4:43 PM;lehors;That change did come from me indeed. There is just no need for the -m flag. I don't see why the 1.1 doc would refer to that flag anywhere. Once we release 1.1 everything will be aligned.,"26/Feb/18 4:57 PM;lehors;By the way, we're bringing a lot more changes to byfn, like -p and upgrade. Are we not going to have these in the doc because they won't work with older version of the script? I think not. So, let's keep things in perspective here.

People do need to look at the documentation that matches the version they use. That's a fact. Maybe we should work on making that clearer in the doc, with a banner or something so that people would not get confused. That would seem a better solution than singling out one particular change.","26/Feb/18 5:20 PM;denyeart;Appreciate the comments Arnaud.  I too was on the fence on this one, but ultimately confusion is one of our largest enemies and therefore I'm in favor of keeping things consistent across releases (like use of -m flag), unless there is compelling reason to change.  Certainly we can add new optional flags where it is important, but we'd like to keep the core sample functioning consistent, as this is the on ramp for many users for each release.",,,,,,,,,,
fabric-samples and fabric/examples/e2e_cli are out of sync,FAB-8507,27994,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,jyellick,jyellick,24/Feb/18 6:48 PM,24/Feb/18 6:48 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-peer,fabric-samples,,,0,,,,,,,,,"The fabric-sample first-network tutorial was originally based off of the e2e_cli example.  Over time, the two have diverged.  The e2e now only supports Kafka, the samples only support solo.  The e2e runs the test script directly via the compose file, the samples do it via a docker exec in byfn.sh.

The list goes on.

We should really synchronize these two, so that we don't have to do dual maintenance.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026xx:,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prevent CLI container from exiting,FAB-8503,27990,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,24/Feb/18 5:51 PM,20/Apr/18 9:35 PM,26/Apr/18 6:50 AM,26/Feb/18 4:19 PM,,,,,,,v1.1,,,fabric-samples,,,,0,,,,,,,,,"For some reason, our samples start a CLI container, then exec commands against it.  Then our tutorials do the same.  However, the CLI container is started with a 1000 second sleep, then exits.  Since we want it to stick around forever, it's better to simply run bash, and leave it be.",,,,,,,,,,,,,,,,,FAB-9628,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026x1:,,,,,,,,denyeart,jyellick,,,,,,,,,master,,,true,24/Feb/18 8:55 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/18341/,,,,,,,,,,,,,,,,,,,,,,,
"byfn.sh 1.1 script failure when previous image v1.1.0-alpha was already on the system, NodeJS installed but GO lang not installed",FAB-8502,27989,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,nileshdeotale,nileshdeotale,24/Feb/18 5:46 PM,27/Feb/18 1:32 PM,26/Apr/18 6:50 AM,27/Feb/18 1:32 PM,,,,,,,v1.1,,,fabric-samples,,,,0,fabric-samples,quality,,,,,,,"Followed byfn documentation step by step. Had all pre-reqs met except that I had previous images of v1.1.0-alpha and I did not have GO language installed (missed the step to install) executed byfn.sh script but it failed with errors (for NodeJS as well as GO) that were not helpful to indicate root cause of the failure.  Please see detailed log attached.

Proposed solution:
 * Check if pre-reqs are met. If not, abort the script with errors stating which pre-reqs are missing.
 * It would be helpful to have a recovery/cleanup/nuke option to cleanup images (if old images exist on the system) and install compatible images automatically prior to building first network.
 * It will be helpful if script is backwards compatible (if it's not already).

 

 

 ",,,,,,,,,,,,,,,,FAB-8539,,,,24/Feb/18 5:46 PM;nileshdeotale;byfn.sh-failure-log.rtf;https://jira.hyperledger.org/secure/attachment/14681/byfn.sh-failure-log.rtf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026wt:,,,,,,,,bmos299,denyeart,nileshdeotale,scottz,,,,,,,,,,,"26/Feb/18 5:01 PM;scottz;This is the same user scenarioas 8539. The user has previously downloaded images that do not match the version for which this particular byfn script was intended. The error in 8539 is different than the error seen here because the images in 8539 were more backward (using 1.0.x versus v1.1-alpha in this 8502).

We need to figure out a way to prevent users from shooting themselves in foot.","26/Feb/18 7:08 PM;bmos299;This problem has already been hit with this bug and FAB-8539.  I think FAB-8539 we will see over and over as it is the orderer that will have the first problem in the case of back-leveled docker images.  Here are a few thoughts, could we consider, 
a) make the orderer panic have more explicit information like: 'orderer running version x.x and trying to add yyy (capabilities v1.1)
b) in the script cut more messages about what version of fabric the script is running
c) provide a nuke option as a byfn parm that removes the fabric* images and reloads new ones.

Thanks,
Barry","27/Feb/18 1:32 PM;denyeart;Let's use FAB-8539 to track this one.  It has a CR that does:
 * Check if pre-reqs are met. If not, abort the script with errors stating which pre-reqs are missing.

I will close this so that we can put all comments in FAB-8539.",,,,,,,,,,,,,,,,,,,,,
update release tests in fabric-test repository,FAB-8501,27988,Bug,In Progress,FAB,Fabric,software,ChristopherFerris,,,Medium,,jtclark,rameshthoomu,rameshthoomu,24/Feb/18 5:25 PM,23/Mar/18 8:33 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-quality,,,,0,,,,,,,,,update release tests in fabric-test repository,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026wl:,,,,,,,,jtclark,rameshthoomu,,,,,,,,,,,,,05/Mar/18 2:38 PM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/18339/,23/Mar/18 8:33 PM;jtclark;Currently working on checking out this patch and getting it setup to test in my local dev environment (vlaunch node).,,,,,,,,,,,,,,,,,,,,,,
Document the images that are required for fabric ca sample,FAB-8497,27983,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,rennman,rennman,24/Feb/18 1:30 AM,01/Mar/18 4:13 PM,26/Apr/18 6:50 AM,01/Mar/18 4:13 PM,,,,,,,v1.1,,,fabric-installers,fabric-samples,,,0,,,,,,,,,"In {{scripts/boostrap.sh}}, not all of the required images are downloaded to run the fabric-ca samples – namely
{code:java}
hyperledger/fabric-ca-tools
hyperledger/fabric-ca-peer
hyperledger/fabric-ca-orderer
{code}

need to add a loop with something like [ {{"""" ""-tools"" ""-orderer"" ""-peer""}} ] to dockerCaPull() :
{code:java}
@@ -39,8 +39,10 @@ dockerCaPull() {
       local CA_TAG=$1
       echo ""==> FABRIC CA IMAGE""
       echo
-      docker pull hyperledger/fabric-ca:$CA_TAG
-      docker tag hyperledger/fabric-ca:$CA_TAG hyperledger/fabric-ca
+      for image in """" ""-tools"" ""-orderer"" ""-peer""; do
+         docker pull hyperledger/fabric-ca${image}:$CA_TAG
+         docker tag hyperledger/fabric-ca${image}:$CA_TAG hyperledger/fabric-ca${image}
+      done
 }
{code}
 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026vh:,,,,,,,,ChristopherFerris,denyeart,mastersingh24,rennman,skarim,,,,,,master,,,true,26/Feb/18 11:23 AM;denyeart;[~mastersingh24] [~ChristopherFerris] [~rameshthoomu] [~smithbk] Is this something you think we need to add for 1.1 release?,"26/Feb/18 12:56 PM;ChristopherFerris;I take it we have tutorial(s) that now use the CA? If so, makes sense to add.","26/Feb/18 3:15 PM;mastersingh24;I really don't think we should be publishing these images at all .... but that's a different story.
We should update the fabric-ca sample to include instructions on downloading these images.
I don't think we need to confuse people by downloading even more images","26/Feb/18 4:10 PM;denyeart;Ok, I've changed the assignment since the resolution for this one has changed.

[~luomin]  [~aambati]  [~skarim]  [~rennman] Could one of you take this work item to update the fabric ca sample instructions?",26/Feb/18 9:26 PM;skarim;https://gerrit.hyperledger.org/r/#/c/18443/,,,,,,,,,,,,,,,,,,,
fabric-ca inconsistent treatment of case for affiliation,FAB-8494,27980,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,rennman,rennman,24/Feb/18 12:49 AM,28/Feb/18 5:56 PM,26/Apr/18 6:50 AM,28/Feb/18 5:56 PM,,,,,,,v1.1,,,fabric-ca,,,,0,must-fix,,,,,,,,"Apparently, affiliations are not treated consistently w/r/t case. if I code:
{code:java}
         affiliations:
            EU: []
            FR: []
            IT: []
            GE: []
{code}
then any attempt to enroll with an affiliations in UC will fail, since:
 * when we create the table, we translate all affiliations to LC
 * the register request comes in with the affiliation in UC
 * when we search the DB, the search is case-sensitive, and we fail.",,,,,,,,,,,,,,,,,FAB-8574,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026ut:,,,,,,,,aambati,denyeart,rennman,smithbk,,,,,,,master,,,true,26/Feb/18 11:33 AM;denyeart;[~smithbk] [~aambati] Do you think this is must-fix for 1.1 release?,26/Feb/18 1:55 PM;smithbk;Moved to 1.2,"26/Feb/18 2:12 PM;denyeart;[~smithbk] [~aambati] If it is deferred, then won't a fix in 1.2 be even more difficult?  That is, you'd have a mix of cases already in the DB.  Isn't the 1.1 fix simply a matter of lowercasing (or uppercasing) values as they are persisted, to ensure they are all the same?

I've put back into 1.1 until this question is answered.","26/Feb/18 3:21 PM;aambati;[~denyeart] I think we should try to get it in 1.1. Fix is simple, i am working on it.",26/Feb/18 7:26 PM;aambati;https://gerrit.hyperledger.org/r/c/18437/,"27/Feb/18 4:49 PM;Clayton Sims;Keith Smith
Patch Set 4: Code-Review-1

There are more changes than I expected, and thinking more about this, I don't like that everything would be case sensitive (user name, type, attribute names) except affiliation. For consistency, everything should be case sensitive. 

For 1.1, we should 1) document that all non-leaf affiliations in the config file are made lower-case by golang yaml, and 2) not generate any affiliations in the default config file as this has just confused users, and now that we have APIs for dynamically adding affiliations, this is the recommended way anyway.

 ",27/Feb/18 4:49 PM;Clayton Sims;refactoring a bit.  anil to add small change plus doc.   ,,,,,,,,,,,,,,,,,
Workaround: Use the index 0 when retrieving config block for channel,FAB-8493,27979,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,latitiah,latitiah,24/Feb/18 12:40 AM,16/Mar/18 5:49 PM,26/Apr/18 6:50 AM,16/Mar/18 5:49 PM,,,,,,,v1.2,,,fabric-quality,,,,0,,,,,,,,,"A change was recently made that breaks the {code}peer channel fetch{code} command to have some issues when using the ""config"" parameter.

This is a workaround such that we can continue with fabric-test testing in CI.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026ul:,,,,,,,,latitiah,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Fetching the channel config cli command Error,FAB-8492,27978,Bug,Unverified,FAB,Fabric,software,ChristopherFerris,,,Medium,,muralisr,latitiah,latitiah,24/Feb/18 12:37 AM,26/Feb/18 8:38 PM,26/Apr/18 6:50 AM,,v1.1,,,,,,v1.2,,,fabric-peer,,,,0,,,,,,,,,"The command {code}peer channel fetch config <filename> --channelID <channelID> --orderer <ordererAddress>{code} no longer works as expected when using the config parameter.

When executing this command the error: {code}
      Error: can't read the block: &{FORBIDDEN}
      Usage:
        peer channel fetch <newest|oldest|config|(number)> [outputfile] [flags]
      
      Flags:
        -c, --channelID string   In case of a newChain command, the channel ID to create.
      {code}
is received.

Note: the config parameter is still listed as a possible option.

CI log links for examples of instances of this failure:
    *orderer0 log:* https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/886/artifact/gopath/src/github.com/hyperledger/fabric-test/feature/orderer0.example.com_FAB-6211%3A_Test_example02_chaincode_written_using_GOLANG_with_tls_--_@1.1_.log
    *peer0.org1 log*: https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/886/artifact/gopath/src/github.com/hyperledger/fabric-test/feature/peer0.org1.example.com_FAB-6211%3A_Test_example02_chaincode_written_using_GOLANG_with_tls_--_@1.1_.log",,,,,,,,,,,,,,,,,FAB-8493,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026ud:,,,,,,,,denyeart,jyellick,latitiah,mastersingh24,muralisr,scottz,,,,,,,,,24/Feb/18 3:06 PM;jyellick;This error would indicate that the user you are performing the operation with is not authorized to read from the channel.  What do the orderer logs say?,"24/Feb/18 3:08 PM;denyeart;I can reproduce easily in my local dev environment using:

peer channel fetch config -o 127.0.0.1:7050","24/Feb/18 3:12 PM;jyellick;FWIW:

{noformat}
peer channel fetch config foo_config.pb -o 127.0.0.1:7050 -c testchainid
{noformat}

works fine on my machine with the latest master.  Are there any more details to reproduce?",24/Feb/18 3:16 PM;latitiah;I verified that the Admin user is being used for this command. I will add pointers to the logs in CI for examples of what is being seen.,"24/Feb/18 3:43 PM;jyellick;{quote}
I verified that the Admin user is being used for this command.
{quote}

[~latitiah] Can please be more specific.  The admin user for what org? And what channel are you targetting?

For instance, if a peer org admin to attempts to read configuration from the orderer system channel, I would expect this error.","24/Feb/18 3:47 PM;jyellick;From the orderer log

{noformat}
[36m2018-02-24 03:04:20.453 UTC [common/deliver] deliverBlocks -> DEBU 2a6[0m Rejecting deliver for 172.18.0.7:36430 because channel behavesystest not found
[36m2018-02-24 03:04:20.453 UTC [common/deliver] Handle -> DEBU 2a7[0m Waiting for new SeekInfo from 172.18.0.7:36430
[36m2018-02-24 03:04:20.453 UTC [common/deliver] Handle -> DEBU 2a8[0m Attempting to read seek info message from 172.18.0.7:36430
[36m2018-02-24 03:04:20.456 UTC [common/deliver] Handle -> DEBU 2a9[0m Received EOF from 172.18.0.7:36430, hangup
[36m2018-02-24 03:04:20.456 UTC [orderer/common/server] func1 -> DEBU 2aa[0m Closing Deliver stream
{noformat}

This the only rejection I can see, which implies to me that something went wrong earlier with your channel creation.","24/Feb/18 3:48 PM;muralisr;Worked for me with these steps using a non-testchainid channel

* start orderer
** ORDERER_GENERAL_GENESISPROFILE=SampleSingleMSPSolo ORDERER_GENERAL_LOGLEVEL=debug orderer
* generate channel tx
** configtxgen -profile SampleSingleMSPChannel -channelID myc -outputCreateChannelTx myc.tx
* create channel
** peer channel create -c myc -f myc.tx -o 127.0.0.1:7050 
* fetch config block
** peer channel fetch config foo_config.pb -o 127.0.0.1:7050 -c myc

If using wrong channel name, I get NOT_FOUND (and not FORBIDDEN) as expected.

{code:java}
peer channel fetch config foo_config.pb -o 127.0.0.1:7050 -c mycwrong
2018-02-24 10:43:14.415 EST [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized
Error: can't read the block: &{NOT_FOUND}
{code}

If using wrong MSPID, get FORBIDDEN

{code:java}
CORE_PEER_LOCALMSPID=BADMSP peer channel fetch config foo_config.pb -o 127.0.0.1:7050 -c myc
2018-02-24 10:41:45.616 EST [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized
Error: can't read the block: &{FORBIDDEN}
{code}

If using wrong MSP, get FORBIDDEN

{code:java}
CORE_PEER_MSPCONFIGPATH=~/fabric_acl/crypto-config/org1/peer1/msp  peer channel fetch config foo_config.pb -o 127.0.0.1:7050 -c myc
2018-02-24 10:45:40.268 EST [msp] getMspConfig -> INFO 001 Loading NodeOUs
2018-02-24 10:45:40.287 EST [channelCmd] InitCmdFactory -> INFO 002 Endorser and orderer connections initialized
Error: can't read the block: &{FORBIDDEN}
{code}

I'd say the something has changed in the tests that messes up the MSP info.","24/Feb/18 4:10 PM;denyeart;In my case I forgot to add the -c flag for a channel, and received:

Error: can't read the block: &{NOT_FOUND}

How about if we use this Jira to improve the validation and error message?","24/Feb/18 5:06 PM;muralisr;[~denyeart] in that case the channel name """" is NOT_FOUND. Logically correct as omitting -c defaults to empty chanell ID. We might just want to fix it by insisting on providing a -c parameter. Perhaps for 1.2 ?",24/Feb/18 5:42 PM;latitiah;It's possible this is due to a workaround change added to get around the FAB-8453 issue. I'll reinstate that code then test this again.,26/Feb/18 3:13 PM;mastersingh24;I can't reproduce this,"26/Feb/18 4:06 PM;denyeart;Ok, we'll likely defer this to 1.2 and improve the validation and error message at that time.

[~latitiah] any final comments before we defer?","26/Feb/18 8:31 PM;latitiah;Once the fix for FAB-8453 was merged and the workaround removed, I was able to execute 'peer channel fetch config' successfully. It does seem that this defect was seen due to MSPID inconsistencies. 

I'm fine with any changes made under this issue being deferred to a future release.","26/Feb/18 8:38 PM;denyeart;Ok, will assess improved validation and error message in 1.2.",,,,,,,,,,
LSCC error for chaincode instantiate/upgrade reveals server information,FAB-8481,27963,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,denyeart,denyeart,23/Feb/18 5:42 PM,26/Feb/18 4:48 AM,26/Apr/18 6:50 AM,25/Feb/18 2:48 PM,,,,,,,,,,fabric-endorser,,,,0,,,,,,,,,"If chaincode is not installed, and you try to instantiate/upgrade, client will get back an error message:

status: 500, message: cannot get package for chaincode (marblesx:1)-open /var/hyperledger/production/chaincodes/marblesx.1: no such file or directory

Server API responses should not reveal server filepath information to the client, even in error scenarios. The filepath information should be logged to peer but not returned to client.",,,,,,,,,,,,,,,,,FAB-8465,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026rp:,,,,,,,,denyeart,muralisr,,,,,,,,,master,,,true,25/Feb/18 1:46 PM;muralisr;https://gerrit.hyperledger.org/r/#/c/18379/,"26/Feb/18 4:48 AM;denyeart;The ""*no such file or directory""* error was no good, both from a user perspective, and because it leaked server file system path information (security vulnerability).

It has been changed in FAB-8481 as follows:

 

*Scenario:* instantiate/upgrade against a non-installed chaincode

*Client error message received in 1.1:* chaincode error (status: 500, message: cannot get package for chaincode (marbles:1))

 

Other related messages in 1.1 are:

 

*Scenario:* invoke against a non-instantiated chaincode

*Client error message received in 1.1:* make sure the chaincode marbles has been successfully instantiated and try again: could not find chaincode with name 'marbles' - <nil>

 

*Scenario:* instantiate/upgrade/invoke against a non-exist channel, or client not a member of channel:

*Client error message received in 1.1:* access denied: channel [myc] creator org [DEFAULT]

This message was made intentionally vague, so that clients could detect which channels a peer has joined.",,,,,,,,,,,,,,,,,,,,,,
Server should not run db migration logic if the level has not changed,FAB-8475,27957,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,aambati,aambati,aambati,23/Feb/18 4:25 PM,28/Mar/18 8:37 PM,26/Apr/18 6:50 AM,,v1.1,,,,,,v1.2,,,fabric-ca,,,,0,,,,,,,,,"Currently, Fabric CA server runs DB migration logic during startup, even if the server levels and database levels match. DB migration logic should be run only if the DB levels are less than server levels. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9n5zs,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
configtxlator appends to files rather than truncates in CLI,FAB-8473,27954,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,23/Feb/18 3:55 PM,23/Feb/18 5:07 PM,26/Apr/18 6:50 AM,23/Feb/18 5:07 PM,,,,,,,,,,fabric-tools,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026pp:,,,,,,,,jyellick,,,,,,,,,,master,,,true,23/Feb/18 3:59 PM;jyellick;In review via: https://gerrit.hyperledger.org/r/18269,,,,,,,,,,,,,,,,,,,,,,,
[Interoperability testing] grpc configuration parameter change in 1.1 node SDK causes failure in compatibility tests ,FAB-8470,27948,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,Ratnakar,Ratnakar,23/Feb/18 2:57 PM,09/Mar/18 2:22 PM,26/Apr/18 6:50 AM,24/Feb/18 8:50 PM,,,,,,,v1.1,,,fabric-sdk-node,,,,0,fabric-sdk-node,quality,,,,,,,"some of the grpc configuration parameters been changed in v1.1 SDK causes failures in compatibility tests.
||grpc configuration in V1.0||grpc configuration in V1.1||
|grpc-max-send-message-length|grpc.max_send_message_length|
|grpc-max-receive-message-length|grpc.max_receive_message_length|

Possible options could be :
 1. revert the grpc configurations changes in v1.1 node sdk
 2. OR, Add the new grpc configuration change in v1.0 node SDK to make the compatibility tests execute successfully, however existing users applications will fail due to this grpc configuration change. We should add to doc in v1.1 - maybe in upgrade section. Say something like:

{code:java}
applications that use these grpc configuration parameters in the node sdk config file will start seeing failures after upgrading node sdk and fabric, so users must change their application as specified
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026od:,,,,,,,,denyeart,harrisob@us.ibm.com,Ratnakar,,,,,,,,release-1.0,master,,true,23/Feb/18 6:09 PM;denyeart;The update should be in the node sdk release notes rather than upgrade doc.,"24/Feb/18 3:25 PM;harrisob@us.ibm.com;I think the best thing to do is just support both names in both releases where the actual grpc setting name will be the first to look for and if not there then use the NodeSDK's name.

But also add a note to the V1.1 release notes that they may wish to use the grpc name to avoid confusion","24/Feb/18 4:54 PM;harrisob@us.ibm.com;For v10 [https://gerrit.hyperledger.org/r/#/c/18335/]

For v11 https://gerrit.hyperledger.org/r/#/c/18337/",,,,,,,,,,,,,,,,,,,,,
[Interoperability testing] protobuf changes in V1.1 causes integration test failure,FAB-8469,27947,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,Ratnakar,Ratnakar,23/Feb/18 2:44 PM,09/Mar/18 2:22 PM,26/Apr/18 6:50 AM,24/Feb/18 4:21 PM,v1.1,,,,,,v1.1,,,fabric-docs,fabric-sdk-node,,,0,fabric-sdk-node,quality,,,,,,,"Block protobuf been changed in 1.1 SDK
 ex: parsing a block information (failure is seen in integration/query.js)

All the applications (i.e. tests) which parses the block information has to be changed when they use v1.1 SDK.
||Fabric SDK version||Syntax||
|1.0|block.data.data[0].payload.data.config.channel_group.groups.Application.policies.Writers.policy.*policy*.rule|
|1.1|block.data.data[0].payload.data.config.channel_group.groups.Application.policies.Writers.policy.*value*.rule|

This causes failures in the compatibility tests.

We should add to doc in v1.1  - maybe in upgrade section. Say something like:
{code:java}
applications that use this policy.*policy*.rule will fail after upgrading node sdk and fabric, so users must  change their application as specified (using policy.*value*.rule)
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026o5:,,,,,,,,denyeart,harrisob@us.ibm.com,mastersingh24,Ratnakar,,,,,,,release-1.0,,,true,23/Feb/18 6:09 PM;denyeart;The update should be in the node sdk release notes rather than upgrade doc.,"23/Feb/18 6:13 PM;mastersingh24;I spoke with [~jyellick] to double check, but this is actually not a regression.  The issue is that the 1.0.x SDKs never updated their proto definitions.  So the bug is actually in SDKs v1.0.x

The proto definition DID NOT change in Fabric from 1.0 to 1.1.

","23/Feb/18 11:30 PM;harrisob@us.ibm.com;We will not be putting in the v1.1 release notes  as this is such a minor issue
 see [https://gerrit.hyperledger.org/r/#/c/18313/]

protos updated in NodeSDK v1.0

[https://gerrit.hyperledger.org/r/#/c/18331/]",,,,,,,,,,,,,,,,,,,,,
"[Interoperability testing] Invalid param passed to the API newTransactionID, causes integration test failure against 1.1 SDK",FAB-8468,27946,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,Ratnakar,Ratnakar,23/Feb/18 2:34 PM,23/Feb/18 9:45 PM,26/Apr/18 6:50 AM,23/Feb/18 9:45 PM,v1.0.6,,,,,,v1.0.6,,,fabric-sdk-node,,,,0,quality,,,,,,,,"This is an integration test issue and test needs to be fixed in the release branch 

File : integration/invoke.js

*Client.newTransactionID* -> This api been changed in V1.1 to take admin as a boolean flag, where as in the old test they are passing a string causes the 1.0 integration test fails against 1.1 node SDK. 

This has to be fixed in the v1.0 node SDK integration test so it can pass in both 1.0 and 1.1.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026nx:,,,,,,,,mastersingh24,Ratnakar,,,,,,,,,release-1.0,,,true,23/Feb/18 7:02 PM;mastersingh24;https://gerrit.hyperledger.org/r/18295,,,,,,,,,,,,,,,,,,,,,,,
"[Interoperability testing] Org1 registrar can registar users with affiliation ""org2.department1""",FAB-8467,27945,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,Ratnakar,Ratnakar,23/Feb/18 2:26 PM,13/Mar/18 7:31 PM,26/Apr/18 6:50 AM,24/Feb/18 4:22 PM,v1.0.6,,,,,,v1.0.7,,,fabric-ca,fabric-sdk-node,,,0,,,,,,,,,"Org1 admin is able to register new users with affiliation ""org2.department1""  in Fabric-CA V1.0.x

This behavior is not correct and the same is fixed in Fabric-ca V1.1 but not in V1.0

To run compatibility tests using 1.0 SDK against 1.1 Fabric CA, we propose to fix this in Fabric-CA v1.0.x and also change the SDK integration test suit to reflect the same in release branch.

 

_Gist of failure logs from SDK_
{code:java}
not ok 775 Error: fabric-ca request register failed with errors [[\{""code"":0,""message"":""Registration of 'auditor' failed in affiliation validation: : scode: 401, local code: 44, local msg: Caller does not have authority to act on affiliation 'org2.department1', remote code: 20, remote msg: Authorization failure""}]] at IncomingMessage.<anonymous> (/root/Go/src/github.com/hyperledger/fabric-sdk-node/fabric-ca-client/lib/FabricCAClientImpl.js:592:22) at emitNone (events.js:111:20) at IncomingMessage.emit (events.js:208:7) at endReadableNT (_stream_readable.js:1055:12) at _combinedTickCallback (internal/process/next_tick.js:138:11) at process._tickDomainCallback (internal/process/next_tick.js:218:9)

...

Error: Error: fabric-ca request register failed with errors [[\{""code"":0,""message"":""Registration of 'auditor' failed in affiliation validation: : scode: 401, local code: 44, local msg: Caller does not have authority to act on affiliation 'org2.department1', remote code: 20, remote msg: Authorization failure""}]]

{code}
 

_CA Error logs:_
{code:java}
018/02/22 20:51:51 [DEBUG] Validate Affiliation
2018/02/22 20:51:51 [DEBUG] Checking to see if affiliation 'org2.department1' contains caller's affiliation 'org1.department2'
2018/02/22 20:51:51 [DEBUG] Registration of 'auditor' failed: Registration of 'auditor' failed in affiliation validation: : scode: 401, local code: 44, local msg: Caller does not have authority to act on affiliation 'org2.department1', remote code: 20, remote msg: Authorization failure

{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026np:,,,,,,,,denyeart,harrisob@us.ibm.com,Ratnakar,skarim,,,,,,,release-1.0,,,true,24/Feb/18 2:46 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/18311/,24/Feb/18 6:41 PM;Ratnakar;[~skarim] Do you have any update from Fabric-CA side ?,26/Feb/18 3:11 PM;skarim;Working on it today should have a CR soon. ,26/Feb/18 5:23 PM;skarim;https://gerrit.hyperledger.org/r/#/c/18427/,13/Mar/18 7:31 PM;denyeart;fabric-ca release-1.0 fix: https://gerrit.hyperledger.org/r/#/c/18939/,,,,,,,,,,,,,,,,,,,
[Interoperability testing] error response changed in Fabric1.1 peer causes Node.js sdk integration test failures,FAB-8465,27943,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,Ratnakar,Ratnakar,23/Feb/18 2:09 PM,09/Mar/18 2:22 PM,26/Apr/18 6:50 AM,24/Feb/18 2:44 PM,v1.1,,,,,,v1.1,,,fabric-peer,fabric-sdk-node,,,0,fabric-sdk-node,quality,,,,,,,"There are several integration tests of Node.js SDK release branch are failing due to the change in error response message in Fabric V1.1 peer component.
{code:java}
not ok 841  Failed to get error could not find chaincode with name
  ---
    operator: fail
    at: checkResults (/root/Go/src/github.com/hyperledger/fabric-sdk-node/test/integration/upgrade.js:229:7)
    stack: |-
      Error:  Failed to get error could not find chaincode with name
          at Test.assert [as _assert] (/root/Go/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:212:54)
          at Test.bound [as _assert] (/root/Go/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:64:32)
          at Test.fail (/root/Go/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:277:10)
          at Test.bound [as fail] (/root/Go/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:64:32)
          at checkResults (/root/Go/src/github.com/hyperledger/fabric-sdk-node/test/integration/upgrade.js:229:7)
          at Client.newDefaultKeyValueStore.then.then.then.then.then.then (/root/Go/src/github.com/hyperledger/fabric-sdk-node/test/integration/upgrade.js:140:3)
          at <anonymous>
          at process._tickDomainCallback (internal/process/next_tick.js:228:7)
{code}
*ex*: when chaincode is not installed and tried to upgrade/instantiate, the peer error response message in v1.1 now is ""*no such file or directory"",* where as peer response in earlier versions V1.0 was
 - *could not find chaincode with name* (for upgrade)
 - *cannot get package for the chaincode to be instantiated* (for instantiate)

+Test files effected:+
 _test/integration/instantiate.js_
 _test/integration/upgrade.js_

 

This changes are causing tests to fail after upgrading fabric  to v1.1. So, application will see failures in live upgrade scenario, and should make adjustments in their expectations (response parsing). This should be documented in the upgrade section for v1.1.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026n9:,,,,,,,,denyeart,harrisob@us.ibm.com,Ratnakar,,,,,,,,release-1.0,,,true,"23/Feb/18 5:48 PM;denyeart;Chaincode upgrade/instantiate handling, including error handling, has been refactored in 1.1.  It is not a simple case of changing a message.  The full message in 1.1 now is:
status: 500, message: cannot get package for chaincode (marblesx:1)-open /var/hyperledger/production/chaincodes/marblesx.1: no such file or directory

It is not as simple as changing back a message on peer side. Can we have the 1.0 client tests look for the error code (500) rather than parse the specific error message?  We would recommend client apps to do the same, as exact error messages are not guaranteed to be the same across releases.

I've also opened FAB-8481 to improve the error message such that server filepath information is not revealed to client.",23/Feb/18 9:45 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/18309/,"26/Feb/18 4:45 AM;denyeart;[~harrisob@us.ibm.com] [~Ratnakar] The ""*no such file or directory""* error was no good, both from a user perspective, and because it leaked server file system path information (security vulnerability).

It has been changed in -FAB-8481- as follows:

 

*Scenario:* instantiate/upgrade against a non-installed chaincode

*Client error message received in 1.1:* chaincode error (status: 500, message: cannot get package for chaincode (marbles:1))

 

[~mastersingh24] updated the tests in fabric-node-sdk master, but the change will likely need to be reflected in the release 1.0 tests against 1.1 peer.

 

Other related messages are:

 

*Scenario:* invoke against a non-instantiated chaincode

*Client error message received in 1.1:* make sure the chaincode marbles has been successfully instantiated and try again: could not find chaincode with name 'marbles' - <nil>

 

*Scenario:* instantiate/upgrade/invoke against a non-exist channel, or client not a member of channel:

*Client error message received in 1.1:* access denied: channel [myc] creator org [DEFAULT]

This message was made intentionally vague, so that clients could detect which channels a peer has joined.",,,,,,,,,,,,,,,,,,,,,
"Peer out of memory, trying to allocate 842GB",FAB-8458,27934,Bug,Monitor / On Hold,FAB,Fabric,software,ChristopherFerris,,,Medium,,,aleksandar.likic,aleksandar.likic,22/Feb/18 10:07 PM,11/Mar/18 8:04 AM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-peer,,,,0,,,,,,,,,"Last night one of our peers ran out of memory. At one point, we observed that the peer went unresponsive (not available for client transaction requests). In logs we found that the peer has just restarted. Apparently, the peer was waiting for chaincodes to initialize. User CC logs were not present, which to us looked like the CCs failed initialization. We redeployed Fabric to get the system running again.

 

Peer Log:

runtime: out of memory: cannot allocate 842394632192-byte block (314507264 in use)

fatal error: out of memory

 

runtime stack:

runtime.throw(0x13ee5cc, 0xd)

        /opt/go/src/runtime/panic.go:605 +0x95

runtime.largeAlloc(0xc422a148bb, 0x9f0100, 0x1ffffffffffffff)

        /opt/go/src/runtime/malloc.go:829 +0x114

runtime.mallocgc.func1()

        /opt/go/src/runtime/malloc.go:722 +0x46

runtime.systemstack(0xc420023900)

        /opt/go/src/runtime/asm_amd64.s:344 +0x79

runtime.mstart()

        /opt/go/src/runtime/proc.go:1135

 

goroutine 1710 [running]:

runtime.systemstack_switch()

        /opt/go/src/runtime/asm_amd64.s:298 fp=0xc425b82e00 sp=0xc425b82df8 pc=0x9ff8d0

runtime.mallocgc(0xc422a148bb, 0x0, 0x1300000, 0x1)

        /opt/go/src/runtime/malloc.go:721 +0x7ae fp=0xc425b82ea8 sp=0xc425b82e00 pc=0x9b5a4e

runtime.rawstring(0xc422a148bb, 0x0, 0x0, 0x0, 0x0, 0x0)

        /opt/go/src/runtime/string.go:245 +0x6a fp=0xc425b82ed8 sp=0xc425b82ea8 pc=0x9ed23a

runtime.rawstringtmp(0x0, 0xc422a148bb, 0xc425b82f60, 0x9b663d, 0xc42233de28, 0xc427224980, 0xc4227387c0)

        /opt/go/src/runtime/string.go:115 +0x6f fp=0xc425b82f18 sp=0xc425b82ed8 pc=0x9ecc2f

runtime.concatstrings(0x0, 0xc425b82ff8, 0x2, 0x2, 0x1b4d620, 0xc426003e60)

        /opt/go/src/runtime/string.go:46 +0x10a fp=0xc425b82fb0 sp=0xc425b82f18 pc=0x9ec75a

runtime.concatstring2(0x0, 0xc422a148a0, 0xc422a148b0, 0x13ed01c, 0xb, 0xc425b83040, 0xc427224980)

        /opt/go/src/runtime/string.go:55 +0x47 fp=0xc425b82ff0 sp=0xc425b82fb0 pc=0x9ec957

github.com/hyperledger/fabric/core/common/privdata.BuildCollectionKVSKey(...)

        /opt/gopath/src/github.com/hyperledger/fabric/core/common/privdata/collection.go:106

github.com/hyperledger/fabric/core/peer.(*collectionSupport).GetCollectionKVSKey(0xc4218ca080, 0xc422a3aff0, 0xf, 0xc422a14870, 0xc422a14880, 0xc422a148c0, 0xc422a148d0, 0xc422a148a0, 0xc422a148b0, 0xc42211b8c0, ...)

        /opt/gopath/src/github.com/hyperledger/fabric/core/peer/peer.go:749 +0x59 fp=0xc425b83038 sp=0xc425b82ff0 pc=0x111a689

github.com/hyperledger/fabric/core/common/privdata.(*simpleCollectionStore).retrieveCollectionConfigPackage(0xc4218ca090, 0xc422a3aff0, 0xf, 0xc422a14870, 0xc422a14880, 0xc422a148c0, 0xc422a148d0, 0xc422a148a0, 0xc422a148b0, 0x0, ...)

        /opt/gopath/src/github.com/hyperledger/fabric/core/common/privdata/store.go:58 +0x2c6 fp=0xc425b83258 sp=0xc425b83038 pc=0x10237f6

github.com/hyperledger/fabric/core/common/privdata.(*simpleCollectionStore).retrieveCollectionConfig(0xc4218ca090, 0xc422a3aff0, 0xf, 0xc422a14870, 0xc422a14880, 0xc422a148c0, 0xc422a148d0, 0xc422a148a0, 0xc422a148b0, 0x138b620, ...)

        /opt/gopath/src/github.com/hyperledger/fabric/core/common/privdata/store.go:76 +0x60 fp=0xc425b83328 sp=0xc425b83258 pc=0x1023ce0

github.com/hyperledger/fabric/core/common/privdata.(*simpleCollectionStore).retrieveSimpleCollection(0xc4218ca090, 0xc422a3aff0, 0xf, 0xc422a14870, 0xc422a14880, 0xc422a148c0, 0xc422a148d0, 0xc422a148a0, 0xc422a148b0, 0xc425b83668, ...)

        /opt/gopath/src/github.com/hyperledger/fabric/core/common/privdata/store.go:97 +0x60 fp=0xc425b83420 sp=0xc425b83328 pc=0x1023fa0

github.com/hyperledger/fabric/core/common/privdata.(*simpleCollectionStore).RetrieveCollectionAccessPolicy(0xc4218ca090, 0xc422a3aff0, 0xf, 0xc422a14870, 0xc422a14880, 0xc422a148c0, 0xc422a148d0, 0xc422a148a0, 0xc422a148b0, 0x9b5695, ...)

        /opt/gopath/src/github.com/hyperledger/fabric/core/common/privdata/store.go:114 +0x48 fp=0xc425b83490 sp=0xc425b83420 pc=0x1024348

github.com/hyperledger/fabric/gossip/privdata.(*puller).computeFilters(0xc423004300, 0xc423fbce10, 0xc42734df1b, 0x5, 0xc42734df20)

        /opt/gopath/src/github.com/hyperledger/fabric/gossip/privdata/pull.go:375 +0x1d5 fp=0xc425b836b8 sp=0xc425b83490 pc=0x10f6b25

github.com/hyperledger/fabric/gossip/privdata.(*puller).fetch(0xc423004300, 0xc423fbce10, 0xc423fbce10, 0x0, 0xc423fbce10, 0xd900000000000003, 0xc420021300)

        /opt/gopath/src/github.com/hyperledger/fabric/gossip/privdata/pull.go:208 +0x50 fp=0xc425b83808 sp=0xc425b836b8 pc=0x10f3e40

github.com/hyperledger/fabric/gossip/privdata.(*coordinator).fetchFromPeers(0xc422eb3900, 0xcc, 0xc422494d20, 0xc427604c30)

        /opt/gopath/src/github.com/hyperledger/fabric/gossip/privdata/coordinator.go:259 +0xe8 fp=0xc425b83af0 sp=0xc425b83808 pc=0x10e75a8

github.com/hyperledger/fabric/gossip/privdata.(*coordinator).StoreBlock(0xc422eb3900, 0xc42b6d7dc0, 0x0, 0x0, 0x0, 0x9b65a6, 0xc4230e3e08)

        /opt/gopath/src/github.com/hyperledger/fabric/gossip/privdata/coordinator.go:189 +0x648 fp=0xc425b83dc8 sp=0xc425b83af0 pc=0x10e63b8

github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).commitBlock(0xc4218f5a80, 0xc42b6d7dc0, 0x0, 0x0, 0x0, 0x0, 0x0)

        /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:781 +0x7d fp=0xc425b83e70 sp=0xc425b83dc8 pc=0x1105e5d

github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads(0xc4218f5a80)

        /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:561 +0x411 fp=0xc425b83fd8 sp=0xc425b83e70 pc=0x1103a11

runtime.goexit()

        /opt/go/src/runtime/asm_amd64.s:2337 +0x1 fp=0xc425b83fe0 sp=0xc425b83fd8 pc=0xa02501

created by github.com/hyperledger/fabric/gossip/state.NewGossipStateProvider

        /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:253 +0x6d3

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-8718,0|i01zgo:,,,,,,,,ahmedsajid,aleksandar.likic,bstasyszyn,denyeart,,,,,,,,,,,"23/Feb/18 11:17 PM;denyeart;The stack trace seems to be saying that this function:

func BuildCollectionKVSKey(ccname string) string {
	return ccname + collectionSeparator + collectionSuffix
}

is requesting 842GB, which seems difficult to believe.

Recreation steps and peer debug logs are required to troubleshoot further.","26/Feb/18 11:35 AM;denyeart;We have been unable to reproduce this in local environments. Without recreation steps, this item will have to be deferred to a 1.1.x fixpack or 1.2.","01/Mar/18 2:59 PM;ahmedsajid;peer image was build from tag v1.1.0-alpha plus cherry picks:
 [https://github.com/securekey/fabric-next/blob/v1.1.0-0.0.7/scripts/fabric_cherry_picks.sh]

I'll be uploading logs soon.",,,,,,,,,,,,,,,,,,,,,
Rel note : FAB-8373 security scan vulnerabilities,FAB-8456,27932,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,rameshthoomu,Clayton Sims,22/Feb/18 8:25 PM,23/Feb/18 10:21 PM,26/Apr/18 6:50 AM,23/Feb/18 10:21 PM,,,,,,,v1.1,,,fabric-docs,,,,0,ci_failure,fabric-sdk-node,,,,,,,Release note: 8373,,,,,,,,,,,,,,FAB-8373,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026l1:,,,,,,,,denyeart,harrisob@us.ibm.com,rameshthoomu,smithbk,,,,,,,master,,,true,"22/Feb/18 10:51 PM;denyeart;[~smithbk] you can go ahead and add a couple sentences now to fabric-sdk-node release_notes/v1.1.0-rc1.txt (new file).
You can see the release note precedent in : https://gerrit.hyperledger.org/r/#/c/17197/ .","22/Feb/18 10:54 PM;denyeart;[~smithbk] Actually I see you have a release note CR https://gerrit.hyperledger.org/r/#/c/18211/ tied to FAB-8373.  I'd suggest let's keep FAB-8373 open for the eventual fix in future, and do the release note under this FAB-8456.",23/Feb/18 7:01 PM;denyeart;I've updated commit message in https://gerrit.hyperledger.org/r/#/c/18211/ to indicate it is for this FAB-8456.,,,,,,,,,,,,,,,,,,,,,
Generated ca certificate does not correspond to configuration,FAB-8450,27925,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,zamrokk,zamrokk,22/Feb/18 2:01 PM,27/Feb/18 6:32 PM,26/Apr/18 6:50 AM,27/Feb/18 6:32 PM,Not a Bug,v1.0.5,,,,,v1.0.5,,,fabric-ca,,,,0,,,,,,,,,"I am using the ca-fabric-server on v1.0.5 , then when I change the configuration, the generated certificates have unwanted overridden and default values 
 * Country is overriden
 * State & locality are set to default values

 

For the CA :

 

!image-2018-02-22-14-58-09-819.png!

 

For the peerAdmin :

 

!image-2018-02-22-14-54-18-302.png!

 

For a lambda user :

 

!image-2018-02-22-14-57-32-142.png!

I have problem later when the enrolled lambda user is trying to get blocks asking the peer. The signature does not macth. No idea if this above is the root cause of all

 

Error : org.hyperledger.fabric.sdk.exception.ProposalException: getConfigBlock for channel channel1 failed with peer peer-sn.byomc.com.  Status FAILURE, details: Sending proposal to peer-sn.byomc.com failed because of: gRPC failure=Status\{code=UNKNOWN, description=Failed to deserialize creator identity, err The supplied identity is not valid, Verify() returned x509: certificate signed by unknown authority (possibly because of ""x509: ECDSA verification failure"" while trying to verify candidate authority certificate ""ca.byomc.com""), cause=null}

 ",,,,,,,,,,,,,,,,,,,,22/Feb/18 1:54 PM;zamrokk;image-2018-02-22-14-54-18-302.png;https://jira.hyperledger.org/secure/attachment/14670/image-2018-02-22-14-54-18-302.png,22/Feb/18 1:54 PM;zamrokk;image-2018-02-22-14-54-33-115.png;https://jira.hyperledger.org/secure/attachment/14669/image-2018-02-22-14-54-33-115.png,22/Feb/18 1:54 PM;zamrokk;image-2018-02-22-14-54-44-572.png;https://jira.hyperledger.org/secure/attachment/14668/image-2018-02-22-14-54-44-572.png,22/Feb/18 1:57 PM;zamrokk;image-2018-02-22-14-57-32-142.png;https://jira.hyperledger.org/secure/attachment/14667/image-2018-02-22-14-57-32-142.png,22/Feb/18 1:58 PM;zamrokk;image-2018-02-22-14-58-09-819.png;https://jira.hyperledger.org/secure/attachment/14666/image-2018-02-22-14-58-09-819.png,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026jx:,,,,,,,,aambati,smithbk,zamrokk,,,,,,,,,,,,"22/Feb/18 3:16 PM;aambati;[~zamrokk]  i think this problem was fixed in 1.1. Can you try to reproduce this problem in 1.1? Also, it would help if you can provide detailed steps to reproduce this problem.","22/Feb/18 3:24 PM;zamrokk;Here is my configuration on ca.yaml

 

###########################################################################
# Certificate Signing Request section for generating the CA certificate
###########################################################################
csr:
 cn: ca.byomc.com
 names:
 - C: FR
 ST:
 L:
 O: byomc
 OU: france
 hosts:
 - ca.byomc.com
 ca:
 pathlen:
 pathlenzero:
 expiry:

 

 

Then just do an enroll for PeerAdmin and a new user, display what is stored on each certificates on .pem files 

Can go here to display info about certs : https://www.sslshopper.com/certificate-decoder.html",23/Feb/18 4:44 AM;aambati;[~zamrokk] i could not reproduce this in 1.1. I was right that this problem is fixed in 1.1. Would be able to update your CA server to 1.1?,"23/Feb/18 9:40 AM;zamrokk;I just tested it on V1.1.0-alpha

 

Got same issues","23/Feb/18 12:31 PM;aambati;this problem was fixed by [https://gerrit.hyperledger.org/r/c/16085/] , which went in on Dec 13th. I think this should be in alpha. This is what i did to reproduce:

*fabric-ca-server start -b admin:admin -c config/config.yaml -d*

config.yaml has this section:

{{csr:}}
 {{  cn: ca.byomc.com}}
 {{  names:}}
 {{    - C: FR}}
 {{      ST:}}
 {{      L:}}
 {{      O: byomc}}
 {{      OU: france}}
 {{  hosts:}}
 {{    - ca.byomc.com}}
 {{    - localhost}}
 {{  ca:}}
 {{    expiry:}}
 {{    pathlenzero:}}
 {{    pathlen:}}

and my ca cert looks like this:

{{Data:}}
 {{Version: 3 (0x2)}}
 {{Serial Number:}}
 {{29:a2:c9:0b:a6:f2:b2:17:74:0c:b9:bf:2c:d0:bd:cc:b7:55:79:c7}}
 {{Signature Algorithm: ecdsa-with-SHA256}}
 {{Issuer: C=FR, O=byomc, OU=france, CN=ca.byomc.com}}
 {{Validity}}
 {{Not Before: Feb 23 04:36:00 2018 GMT}}
 {{Not After : Feb 19 04:36:00 2033 GMT}}

 ",23/Feb/18 1:26 PM;zamrokk;Which image do you use ?,23/Feb/18 3:07 PM;aambati;i built my image based on the latest code from master branch,23/Feb/18 3:10 PM;zamrokk;Have you tried on image V1.1.0-alpha ?,"23/Feb/18 4:13 PM;aambati;I tried with v1.1.0-alpha as well. I am not able to reproduce problem.

before i ran bin/fabric-ca-server start -b admin:admin -c configs/config11/config.yml, there was nothing in the configs/config11 directory except for config.yml",23/Feb/18 8:16 PM;aambati;[~zamrokk] can you pls tell me if you are able to get this working,26/Feb/18 1:53 PM;smithbk;What is the status of this?  Please update.,"26/Feb/18 3:08 PM;zamrokk;I think I understand more or less why we have theses differences.

 

1/ the peer admin certificate is created when we build the orderer block and all the certificates for the network using this command ""cryptogen generate --config crypto-config.yaml"" 

This uses default values country=US etc ...

 

2/ THEN when we start the ca , we can point to a ca.yaml file like this ""fabric-ca-server start -c /shared/ca.yaml"" where the csr block can be defined as below
{quote}csr:
 cn: ca.org1.byomc.com
 names:
 - C: FR
 ST:
 L:
 O: byomc
 OU: france
 hosts:
 - ca.org1.byomc.com
{quote}
so all certificates for new users will follow this structure. But as we see on printscreen, still values like country are not displayed","26/Feb/18 3:19 PM;aambati;[~zamrokk] i don't completely understand your last comment. So, you generate one set of certs using cryptogen and others using fabric ca. Are you bootstrapping CA server to use same root cert that cryptogen used to generate certs? I guess that aside, certificates generate by the CA server with the CSR you specified should have those values as well. When I try to reproduce this problem, enrollment cert did indeed have C=FR in the Issuer.","27/Feb/18 1:07 AM;aambati;Based on my conversation with [~zamrokk] , this does not seem to be Fabric CA issue. CA server has been bootstrapped with the cryptogen generated CA cert , so server will not use the csr section defined in the server config. Also, enrollment certificate issued by the server was indeed signed by this CA cert. From that perspective, it looks ok to me. But he is seeing the following error when he tries to fetch config block using Java SDK:

```Caused by: org.hyperledger.fabric.sdk.exception.ProposalException: getConfigBlock for channel channel1 failed with peer [peer-sn.byomc.com|http://peer-sn.byomc.com/]. Status FAILURE, details: Sending proposal to [peer-sn.byomc.com|http://peer-sn.byomc.com/] failed because of: gRPC failure=Status\{code=UNKNOWN, description=Failed to deserialize creator identity, err the supplied identity is not valid: x509: certificate signed by unknown authority (possibly because of ""x509: ECDSA verification failure"" while trying to verify candidate authority certificate ""[ca.org1.byomc.com|http://ca.org1.byomc.com/]""), cause=null}

```",27/Feb/18 6:31 PM;aambati;problem was resolved by following the solution outlined in the troubleshooting section in the CA userdocs: https://hyperledger-fabric-ca.readthedocs.io/en/latest/users-guide.html#troubleshooting,,,,,,,,,
Error on running byfn.sh up,FAB-8449,27921,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,d8bhatta,d8bhatta,22/Feb/18 10:54 AM,22/Feb/18 5:56 PM,26/Apr/18 6:50 AM,22/Feb/18 5:54 PM,,,,,,,,,,,,,,0,,,,,,,,,"Hello,

I am following [http://hyperledger-fabric.readthedocs.io/en/latest/build_network.html] and when I run command 

./byfn.sh -m generate

It successfully generates peers but when I run following command:

./byfn.sh -m up

Error: failed to create deliver client: orderer client failed to connect to orderer.example.com:7050: failed to create new connection: x509: certificate signed by unknown authority (possibly because of ""x509: ECDSA verification failure"" while trying to verify candidate authority certificate ""tlsca.example.com"")

Usage:

  peer channel create [flags]

 

Flags:

  -c, --channelID string   In case of a newChain command, the channel ID to create.

  -f, --file string        Configuration transaction file generated by a tool such as configtxgen for submitting to orderer

  -t, --timeout int        Channel creation timeout (default 5)

 

Global Flags:

      --cafile string                       Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint

      --certfile string                     Path to file containing PEM-encoded X509 public key to use for mutual TLS communication with the orderer endpoint

      --clientauth                          Use mutual TLS when communicating with the orderer endpoint

      --keyfile string                      Path to file containing PEM-encoded private key to use for mutual TLS communication with the orderer endpoint

      --logging-level string                Default logging level and overrides, see core.yaml for full syntax

  -o, --orderer string                      Ordering service endpoint

      --ordererTLSHostnameOverride string   The hostname override to use when validating the TLS connection to the orderer.

      --tls                                 Use TLS when communicating with the orderer endpoint

  -v, --version                             Display current version of fabric peer server

 

!!!!!!!!!!!!!!! Channel creation failed !!!!!!!!!!!!!!!!

========= ERROR !!! FAILED to execute End-2-End Scenario ===========

Can somebody please suggest me the solution?

Thanks",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026it:,,,,,,,,ChristopherFerris,d8bhatta,,,,,,,,,,,,,"22/Feb/18 5:54 PM;ChristopherFerris;I would strongly advise that you use a specific release... it is likely that you may hit a transient issue when running against master/latest.

 

I just tested against v1.1.0-alpha, and it works correctly. Please use this version of the docs to install prerequisites, etc and run the sample. You will want to re-install the fabric-samples and perform the install of binaries again per the v1.1.0-alpha docs.

 ",,,,,,,,,,,,,,,,,,,,,,,
Need consistent validation for couchdb indexes regardless of which client packages the index,FAB-8446,27917,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,chris.elder,denyeart,denyeart,22/Feb/18 12:33 AM,23/Feb/18 2:21 AM,26/Apr/18 6:50 AM,23/Feb/18 2:21 AM,,,,,,,v1.1,,,fabric-ledger,,,,0,,,,,,,,,"The existing validation for packaged couchdb indexes in chaincode was only getting called if peer CLI packaged the index.  Need the same validation logic called if an SDK client attempts to package and install the chaincode.

This change ensures that the same validation is called during peer CLI packaging and during LSCC install chaincode.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9ny,,,,,,,,denyeart,,,,,,,,,,master,,,true,22/Feb/18 12:38 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/18193/,,,,,,,,,,,,,,,,,,,,,,,
Chaincode address and chaincode listen address default to wrong values,FAB-8443,27914,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,muralisr,dbshah,dbshah,21/Feb/18 10:18 PM,23/Feb/18 7:25 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-peer,,,,0,,,,,,,,,"In core.yaml for v1.1.0-alpha,

 


{code}
# The endpoint this peer uses to listen for inbound chaincode connections.

# If this is commented-out, the listen address is selected to be

# the peer's address (see below) with port 7052

# chaincodeListenAddress: 0.0.0.0:7052

 

# The endpoint the chaincode for this peer uses to connect to the peer.

# If this is not specified, the chaincodeListenAddress address is selected.

# And if chaincodeListenAddress is not specified, address is selected from

# peer listenAddress. # chaincodeAddress: 0.0.0.0:7052

{code}

 

The chaincodeListenAddress defaults to the peerAddress, and the chaincodeAddress defaults to peerListenAddress. Instead, I think chaincodeListenAddress should default to peerListenAddress and chaincodeAddress should default to peerAddress.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026hh:,,,,,,,,dbshah,denyeart,yacovm,,,,,,,,,,,,"22/Feb/18 5:15 AM;denyeart;[~yacovm] You are wise in this area, could I ask you to review the various core.yaml port bindings and clean up as necessary.
 ","22/Feb/18 8:07 AM;yacovm;This is aligned with the [code|https://github.com/hyperledger/fabric/blob/master/peer/node/start.go#L350-L375].

","22/Feb/18 8:51 AM;yacovm;{quote}Instead, I think chaincodeListenAddress should default to peerListenAddress and chaincodeAddress should default to peerAddress.{quote}
I don't think it's a good idea to change that now for v1.1.

[~muralisr] what do you think about changing that to v1.2? ","23/Feb/18 7:25 PM;denyeart;I've deferred to v1.2.  

[~muralisr] What change (if any) would you recommend in 1.2 timeframe to make this less confusing?",,,,,,,,,,,,,,,,,,,,
update clodant npm package to 1.10.0,FAB-8438,27908,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,rameshthoomu,rameshthoomu,21/Feb/18 4:19 PM,23/Feb/18 7:35 PM,26/Apr/18 6:50 AM,22/Feb/18 3:55 AM,,,,,,,v1.1,,,fabric-sdk-node,,,,0,,,,,,,,,"Observed errors on *clodant package 1.9.0* while doing `npm install` on nodejs 6.9.5 (fabri-sdk-node release branch)
{code:java}
00:08:16.990 npm ERR! node v6.9.5
00:08:16.992 npm ERR! npm  v3.10.10
00:08:16.993 npm ERR! code EREADFILE
00:08:16.993 
00:08:16.994 npm ERR! Error extracting /home/jenkins/.npm/cloudant/1.9.0/package.tgz archive: ENOENT: no such file or directory, open '/home/jenkins/.npm/cloudant/1.9.0/package.tgz
{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026g5:,,,,,,,,harrisob@us.ibm.com,rameshthoomu,,,,,,,,,release-1.0,,,true,21/Feb/18 4:58 PM;harrisob@us.ibm.com;There is an issue with the Node v6.9.5 NPM v3.10.10 where it does not recognize versions correctly and was picking up a back level of cloundant. We have change the package to include the higher version.,21/Feb/18 4:58 PM;harrisob@us.ibm.com;[https://gerrit.hyperledger.org/r/#/c/18013/],"21/Feb/18 9:59 PM;harrisob@us.ibm.com;will remove from 18013
fixing with https://gerrit.hyperledger.org/r/#/c/18177/",,,,,,,,,,,,,,,,,,,,,
incorrect terminology in error message s/chain/channel/,FAB-8436,27905,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,ChristopherFerris,ChristopherFerris,ChristopherFerris,21/Feb/18 3:41 PM,26/Feb/18 11:39 AM,26/Apr/18 6:50 AM,,v1.1.0-alpha,,,,,,v1.2,,,fabric-peer,,,,0,,,,,,,,,"Error: failed sending proposal: rpc error: code = Unknown desc = chaincode error (status: 500, message: Invalid chain ID, my-channel)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026fh:,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,23/Feb/18 7:29 PM;denyeart;[~ChristopherFerris] Do you intend to fix in 1.1 or defer to 1.2?,,,,,,,,,,,,,,,,,,,,,,,
byfn (fabric-samples) e2e tests are failing on latest fabric commit,FAB-8430,27899,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,rameshthoomu,rameshthoomu,21/Feb/18 3:03 PM,21/Feb/18 10:43 PM,26/Apr/18 6:50 AM,21/Feb/18 10:43 PM,,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,"byfn e2e tests are failing on latest fabric commit
{code:java}
00:11:24.364 !!!!!!!!!!!!!!! Query result on peer0.org1 is INVALID !!!!!!!!!!!!!!!!
00:11:24.366 ================== ERROR !!! FAILED to execute End-2-End Scenario ==================
00:11:24.366
{code}
below is the fabric commit which caused this

 https://github.com/hyperledger/fabric/commit/11ddbbe1c4fcb305cb91ba773ca1df62a7a0d581",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026e5:,,,,,,,,bmos299,C0rWin,denyeart,latitiah,rameshthoomu,Ratnakar,,,,,,,,,"21/Feb/18 3:19 PM;denyeart;I believe the tests need to be updated in response to https://gerrit.hyperledger.org/r/c/18049 , like what was done in https://gerrit.hyperledger.org/r/#/c/18049/13/examples/e2e_cli/scripts/script.sh@185 .  Changed to fabric-quality.",21/Feb/18 3:21 PM;denyeart;I've added a task to document the peer CLI query response syntax in 1.1 release notes: FAB-8433 .,"21/Feb/18 3:30 PM;bmos299;This is a regression.  Changing outputs, regardless of the reason, has consequences.  I think the original support should be returned and if you want to add a flag to return the result in another agreed upon format that the binary APIs can consume.  Anyone who has scripted based on the ""Query: xxx"" string now fails. Mark Parzygnat had pinged me on byfn failing and the fabric-test daily suite had many failures.  There is nothing that irks a customer more than when their application worked yesterday....and fails today.   ",21/Feb/18 3:45 PM;latitiah;Issue FAB-8245 there was a comment added that stated that a flag was needed in order to not break regression. This is a minor release and as such you should not change output in this manner. Use of a flag helps to mitigate this.,"21/Feb/18 4:00 PM;denyeart;I agree, let's revert to the 1.0 behavior of printing Query Response so that existing tests/clients don't break. Assigning to [~C0rWin].

A new flag can be added for silent or binary mode in 1.2.  FAB-8245 will be re-opened as an Improvement.",21/Feb/18 5:58 PM;C0rWin;https://gerrit.hyperledger.org/r/18153,,,,,,,,,,,,,,,,,,
test failures for random CC name/version,FAB-8427,27896,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,troyronda,troyronda,21/Feb/18 12:19 PM,22/Feb/18 10:23 PM,26/Apr/18 6:50 AM,22/Feb/18 10:23 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i026dh:,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Upgrade Document Does Not Mention Zookeeper,FAB-8408,27877,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,bmos299,bmos299,20/Feb/18 8:36 PM,26/Feb/18 5:41 PM,26/Apr/18 6:50 AM,26/Feb/18 5:41 PM,v1.1,,,,,,v1.1,,,fabric-docs,,,,0,Documentation,,,,,,,,The document http://hyperledger-fabric.readthedocs.io/en/master/upgrade_to_one_point_one.html does not mention the steps involved with Zookeeper when upgrading from 1.0.x to 1.1.0. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9n7,,,,,,,,bmos299,denyeart,sanchezl,,,,,,,,,,,,23/Feb/18 8:25 PM;sanchezl;We refer you to the Kafka Upgrade documentation. We have no say in what you do about Zookeeper.,"24/Feb/18 5:44 PM;denyeart;[~sanchezl] We should at least mention that in the upgrade documentation since we provide both Kafka and Zookeeper images.

Joe Alewine is creating a CR for the improved upgrade doc topic today.  After that is created, please inject at least one sentence about Zookeeper into the Kafka upgrade section (and yes, for the most part what we say is to reference the Kafka docs).",26/Feb/18 11:48 AM;denyeart;[~sanchezl] Please inject one comment in the upgrade doc Kafka section to mention Zookeeper: https://gerrit.hyperledger.org/r/#/c/18351/,26/Feb/18 5:41 PM;denyeart;This is addressed in [https://gerrit.hyperledger.org/r/#/c/18351/] now.  Thanks [~sanchezl],,,,,,,,,,,,,,,,,,,,
fabric-ca sample fails with new fabric-ca code,FAB-8407,27876,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,aambati,aambati,20/Feb/18 8:25 PM,26/Feb/18 7:04 PM,26/Apr/18 6:50 AM,22/Feb/18 1:36 PM,,,,,,,v1.1,,,fabric-examples,,,,0,,,,,,,,,"Fabric-ca sample fails with latest 1.1 code with the following error:

{{Error: failed to create deliver client: orderer client failed to connect to orderer1-org0:7050: failed to create new connection: remote error: tls: bad certificate}}

 

{{*Following error is seen in the orderer log:*}}
{{2018-02-19 16:02:53.939 UTC [orderer/common/server] Start -> INFO 0c3[0m Beginning to serve requests}}
{{[36m2018-02-19 16:03:03.434 UTC [grpc] Printf -> DEBU 0c4[0m grpc: Server.Serve failed to complete security handshake from ""172.18.0.14:39718"": tls: client didn't provide a certificate}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0269p:,,,,,,,,aambati,,,,,,,,,,master,,,true,20/Feb/18 9:15 PM;aambati;https://gerrit.hyperledger.org/r/c/18105/,,,,,,,,,,,,,,,,,,,,,,,
Disable fabric-sdk-node-vulnerable-tests-x86_64 for now.,FAB-8404,27871,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sambhavdutt,sambhavdutt,sambhavdutt,20/Feb/18 6:10 PM,21/Feb/18 8:02 PM,26/Apr/18 6:50 AM,20/Feb/18 8:03 PM,,,,,,,v1.1,,,fabric-ci,,,,0,ci_failure,,,,,,,,The fabric-sdk-node-vulnerable-tests-x86_64 is disabled as these tests are not required for now.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0268l:,,,,,,,,sambhavdutt,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Missing dependencies in fabric-ca-client and fabric-client,FAB-8400,27865,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,jtonline,jtonline,20/Feb/18 2:47 PM,23/Feb/18 8:40 PM,26/Apr/18 6:50 AM,23/Feb/18 8:40 PM,v1.1.0-alpha,,,,,,v1.1,,,fabric-sdk-node,,,,0,,,,,,,,,"I'm seeing the following error in a node module which depends on fabric-ca-client

{{Error: Cannot find module 'long'}}

It looks like fabric-ca-client should specify a dependency on 'long' due to lib/utils.js

Similarly for fabric-client, I'm seeing

{{Error: Cannot find module 'klaw'}}

due to lib/packager/Golang.js",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0267p:,,,,,,,,harrisob@us.ibm.com,jtonline,,,,,,,,,master,,,true,20/Feb/18 6:57 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/18103/,,,,,,,,,,,,,,,,,,,,,,,
Certificates in msp/testdata/intermediate are expired,FAB-8394,27858,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,angelo.decaro,yacovm,yacovm,20/Feb/18 1:18 PM,20/Feb/18 2:24 PM,26/Apr/18 6:50 AM,20/Feb/18 2:24 PM,,,,,,,,,,fabric-crypto,,,,0,,,,,,,,,The certificates in msp/testdata/intermediate are expired.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0266d:,,,,,,,,denyeart,yacovm,,,,,,,,,master,,,true,20/Feb/18 1:57 PM;denyeart;[https://gerrit.hyperledger.org/r/#/c/18081],,,,,,,,,,,,,,,,,,,,,,,
Update Fabric-Samples for CA,FAB-8387,27850,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,bmos299,bmos299,19/Feb/18 9:34 PM,22/Feb/18 5:17 PM,26/Apr/18 6:50 AM,22/Feb/18 5:17 PM,v1.1,,,,,,v1.1,,,fabric-ca,fabric-samples,,,0,Security,,,,,,,,"Working in the fabric-samples repository I can see the the fabric-ca the following example:

/master/fabric-ca/scripts/run-fabric.sh
 # Revoke the user and generate CRL using admin's credentials
 revokeFabricUser|
 generateCRL

With fabric-ca 1.1 we can combine the underlying calls (fabric-ca-client revoke and fabric-ca-client fabric-ca-client gencrl) into one where we do the revoke and generate crl.  I think it would be good to show both in the underlying env.sh script, maybe even one of them as a comment.  The reason is as I went through it I thought, 'wow I wish the revoke generated the crl'.  Allen then told me it does in 1.1.  On the other hand, it is great to see samples of both calls in env.sh.

Let me know and we can talk about it.

Thanks,

Barry",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0264l:,,,,,,,,bmos299,skarim,,,,,,,,,master,,,true,21/Feb/18 8:19 PM;skarim;https://gerrit.hyperledger.org/r/#/c/18155/,,,,,,,,,,,,,,,,,,,,,,,
Remove Kafka version from Kafka topic,FAB-8383,27846,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,denyeart,denyeart,19/Feb/18 6:19 PM,16/Mar/18 6:17 PM,26/Apr/18 6:50 AM,23/Feb/18 3:02 AM,,,,,,,v1.1,,,fabric-docs,,,,0,,,,,,,,,"Kafka is updated to version 1.0.0 as of baseimage 0.4.6.

[http://hyperledger-fabric.readthedocs.io/en/master/kafka.html] mentions that Kafka version is 0.10.2.1.  Remembering to keep the version in this doc topic up to date is not going to be practical.  I'd suggest reword in such a way that the version number does not need to be provided here.  The version number is still available in the upgrade doc topic, and we'll likely add it to an overall 'version dependencies' release doc page in the future.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0263p:,,,,,,,,denyeart,,,,,,,,,,master,,,true,21/Feb/18 10:46 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/18129/,,,,,,,,,,,,,,,,,,,,,,,
Documentation Java SDK for Mutual TLS/Client Auth,FAB-8378,27841,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,latitiah,latitiah,19/Feb/18 5:25 PM,16/Mar/18 4:46 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,,,,,0,,,,,,,,,There is currently no documentation for enabling mutual TLS on a java-sdk based client.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0262l:,,,,,,,,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update pkcs11 vendor package to support go 1.9.4 and 1.10.,FAB-8358,27819,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,18/Feb/18 12:03 PM,06/Mar/18 12:46 PM,26/Apr/18 6:50 AM,20/Feb/18 7:46 PM,,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,"After upgrading golang to new version of either 1.9.4 or 1.10 following issues appears on MacOS while trying to compile peer code:

{code}
go build github.com/miekg/pkcs11: invalid flag in #cgo LDFLAGS: -Wl,--no-as-needed
{code}

There is an [issue|https://github.com/miekg/pkcs11/issues/63] on miekg/pkcs11
lib github which provides a fix, therefore I'd suggest to update the pkcs11 dependency to latest.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i025xx:,,,,,,,,C0rWin,shaileshkanzariya,,,,,,,,,master,,,true,18/Feb/18 12:03 PM;C0rWin;https://gerrit.hyperledger.org/r/18023,"01/Mar/18 3:08 PM;shaileshkanzariya;[~C0rWin] looks like you have fixed this issue. But as per this [https://hyperledger-fabric.readthedocs.io/en/latest/chaincode4ade.html] we use ""go get -u --tags nopkcs11 github.com/hyperledger/fabric/core/chaincode/shim"" which still gives error into go 1.9.4. Please check.","01/Mar/18 4:42 PM;C0rWin;sure, will take a look into it.",04/Mar/18 2:09 PM;C0rWin;[~shaileshkanzariya] just tried to compile and works as expected. have you updated you vendors folders within your chaincode?,"06/Mar/18 12:46 PM;shaileshkanzariya;[~C0rWin] When I try to run ""govendor update +vendor"" command into my chaincode-folder, it gives error ""Error: Package ""/../../../""  not a go package or not in GOPATH."" I know that this is different problem but I have ended up having GOPATH as different folder and ""chaincode src with vendor"" into different folder. I tried different things as per govendor doc but yet not any success. Let me know if you have come across similar issue and know the way to fix it.",,,,,,,,,,,,,,,,,,,
"pull access denied for hyperledger/fabric-buildenv, repository does not exist",FAB-8354,27815,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,RichardHill,RichardHill,18/Feb/18 12:32 AM,07/Apr/18 7:00 PM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-quality,,,,0,,,,,,,,,"I am unable to find the docker repo  hyperledger/fabric-buildenv

I am using commit 1e73fa791bc2681aa827bf802f8637321948dcff from fabric-test.git

steps
git submodule update --init --recursive

git submodule foreach git reset --hard origin/master

cd fabric-ca/

make docker

cd ../fabric

make docker configtxgen cryptogen

result
Step 1/10 : FROM hyperledger/fabric-buildenv:x86_64-1.1.0-alpha-snapshot-792e4fe
pull access denied for hyperledger/fabric-buildenv, repository does not exist or may require 'docker login'

This can also be replicated by 

$docker pull hyperledger/fabric-buildenv:x86_64-1.1.0-alpha-snapshot-792e4fe.

Searching docker hub for 'hyperledger/fabric-buildenv', shows me its not there 

https://hub.docker.com/search.

I wonder if the problem is that the repo is private

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i025x1:,,,,,,,,denyeart,mastersingh24,RichardHill,,,,,,,,,,,,20/Feb/18 7:51 PM;denyeart;[~rameshthoomu] What is your opinion?,07/Apr/18 7:00 PM;mastersingh24;We don't publish the fabric-buildenv image.  It is built as part of the build process,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - All transient data gets logged,FAB-8353,27814,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ericmvaughn,ericmvaughn,ericmvaughn,18/Feb/18 12:02 AM,20/Feb/18 3:09 PM,26/Apr/18 6:50 AM,20/Feb/18 3:09 PM,v1.1,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,When the logger is configured to debug all of the transient data gets dumped to the log.  This becomes a problem with a large amount of transient data.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i025wt:,,,,,,,,ericmvaughn,,,,,,,,,,master,,,true,18/Feb/18 2:24 AM;ericmvaughn;https://gerrit.hyperledger.org/r/#/c/18019/,,,,,,,,,,,,,,,,,,,,,,,
e2e tests from fabric-samples (master) are not working with 1.1.0-alpha release,FAB-8348,27809,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,luomin,rameshthoomu,rameshthoomu,17/Feb/18 1:20 AM,21/Feb/18 2:39 AM,26/Apr/18 6:50 AM,21/Feb/18 2:39 AM,,,,,,,v1.1,,,fabric-samples,,,,0,,,,,,,,,"Observed e2e tests from fabric-samples (*commit # 24f35c14932a0ae622dd32da76ceb33afd635594)* are not working with *1.1.0-alpha images*

Below are the steps executed:
{code:java}
cd fabric-samples
curl -sSL https://goo.gl/6wtTN5 | bash -s 1.1.0-alpha
cd first-network
echo ""======> DEFAULT CHANNEL <======""
echo y | ./byfn.sh -m down
echo y | ./byfn.sh up -t 60
echo y | ./byfn.sh -m down{code}
Query is failing on peer1.org2

 
{code:java}
 
00:02:56.954 !!!!!!!!!!!!!!! Query result on peer1.org2 is INVALID !!!!!!!!!!!!!!!!
00:02:56.954 ================== ERROR !!! FAILED to execute End-2-End Scenario ==================
{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i025vp:,,,,,,,,denyeart,luomin,rameshthoomu,,,,,,,,master,,,true,"17/Feb/18 2:24 AM;denyeart; 
I think we have to say that only 1.1.0-alpha fabric-samples are guaranteed to work with 1.1.0-alpha binaries/images. And as improvements are made in master they have to be compatible between fabric and fabric-samples master.
 
So let's use this work item to mention this on the doc page:
[http://hyperledger-fabric.readthedocs.io/en/master/samples.html]
 
after cloning fabric-samples, checkout the samples tag matching your binaries/images.
 
Lowering priority to Medium.
 ",18/Feb/18 12:13 PM;luomin;https://gerrit.hyperledger.org/r/#/c/18025/,,,,,,,,,,,,,,,,,,,,,,
Sync fabric-chaincode-java proto files with fabric,FAB-8346,27807,Bug,In Review,FAB,Fabric,software,ChristopherFerris,,,Medium,,sanchezl,sanchezl,sanchezl,16/Feb/18 11:09 PM,29/Mar/18 2:15 AM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-chaincode-java,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-8063,0|i025v9:,,,,,,,,sanchezl,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
QueryConfigBlock() compares block metadata,FAB-8343,27804,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,divyank,divyank,divyank,16/Feb/18 7:31 PM,16/Feb/18 10:52 PM,26/Apr/18 6:50 AM,16/Feb/18 10:52 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"QueryConfigBlock() queries multiple peers for config blocks and fails when the metadata does not match.

We should only compare the block data.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i025ul:,,,,,,,,divyank,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
CouchDB indexing: The peer log misleadingly indicates that N indexes were created when in reality it may be different,FAB-8336,27797,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,chris.elder,AdnanChoudhury,AdnanChoudhury,16/Feb/18 3:17 PM,27/Feb/18 7:21 PM,26/Apr/18 6:50 AM,27/Feb/18 7:21 PM,,,,,,,v1.2,,,fabric-ledger,,,,0,,,,,,,,,"If the provided index definitions have more than one (lets say N) index with same DesignDoc and indexName but with potentially different indexes, the log will contain N messages like `created CouchDB index in the channel...` but in reality only 1 index will be created in CouchDB. Fabric goes through each file in alphabetic order, creating and (quietly) replacing the index created in last round with the same DDoc and indexName, so only the last index remains in CouchDB.

+*How to reproduce:*+
if there are two indexes in the index folder:

 
{code:java}
adnans-mbp:indexes adnanc$ cat indexOwner.json 
{""index"":{""fields"": [""docType"", ""owner"", ""color""]}, ""ddoc"": ""indexOwnerDoc"", ""type"": ""json"", ""name"": ""indexOwner""}
adnans-mbp:indexes adnanc$ cat indexOwnerOriginal.json 
{""index"":{""fields"":[""docType"",""owner""]},""ddoc"":""indexOwnerDoc"", ""name"":""indexOwner"",""type"":""json""}
{code}
The Peer log contains:
{code:java}
[36m2018-02-16 14:52:03.951 UTC [couchdb] CreateIndex -> DEBU 52f[0m Entering CreateIndex() indexdefinition={""index"":{""fields"": [""docType"", ""owner"", ""color""]}, ""ddoc"": ""indexOwnerDoc"", ""type"": ""json"", ""name"": ""indexOwner""}
[36m2018-02-16 14:52:03.951 UTC [couchdb] handleRequest -> DEBU 530[0m Entering handleRequest() method=POST url=http://couchdb01:5984/mychannel1_mycc1/_index
[36m2018-02-16 14:52:03.958 UTC [couchdb] handleRequest -> DEBU 531[0m HTTP Request: POST /mychannel1_mycc1/_index HTTP/1.1 | Host: couchdb01:5984 | User-Agent: Go-http-client/1.1 | Content-Length: 115 | Accept: application/json | Content-Type: application/json | Accept-Encoding: gzip | | 
[36m2018-02-16 14:52:04.137 UTC [couchdb] handleRequest -> DEBU 532[0m Exiting handleRequest()
2018-02-16 14:52:04.137 UTC [couchdb] CreateIndex -> INFO 533[0m Created CouchDB index in state database mychannel1_mycc1
[36m2018-02-16 14:52:04.137 UTC [statecouchdb] HandleChaincodeDeploy -> DEBU 534[0m Reading artifact from file: META-INF/statedb/couchdb/indexes/indexOwnerOriginal.json
[36m2018-02-16 14:52:04.137 UTC [statecouchdb] HandleChaincodeDeploy -> DEBU 535[0m Creating index from file file: indexOwnerOriginal.json
[36m2018-02-16 14:52:04.137 UTC [couchdb] CreateIndex -> DEBU 536[0m Entering CreateIndex() indexdefinition={""index"":{""fields"":[""docType"",""owner""]},""ddoc"":""indexOwnerDoc"", ""name"":""indexOwner"",""type"":""json""}
[36m2018-02-16 14:52:04.137 UTC [couchdb] handleRequest -> DEBU 537[0m Entering handleRequest() method=POST url=http://couchdb01:5984/mychannel1_mycc1/_index
[36m2018-02-16 14:52:04.141 UTC [couchdb] handleRequest -> DEBU 538[0m HTTP Request: POST /mychannel1_mycc1/_index HTTP/1.1 | Host: couchdb01:5984 | User-Agent: Go-http-client/1.1 | Content-Length: 99 | Accept: application/json | Content-Type: application/json | Accept-Encoding: gzip | | 
[36m2018-02-16 14:52:04.151 UTC [couchdb] handleRequest -> DEBU 539[0m Exiting handleRequest()
2018-02-16 14:52:04.151 UTC [couchdb] CreateIndex -> INFO 53a[0m Created CouchDB index in state database mychannel1_mycc1
{code}
 

Result:
Only 1 index gets created even though two index files were there and log mentions index was created for both
{code:java}
adnans-mbp:/ adnanc$ curl -k -X GET http://localhost:5984/mychannel1_mycc1/_index

{""total_rows"":2,""indexes"":[{""ddoc"":null,""name"":""_all_docs"",""type"":""special"",""def"":{""fields"":[{""_id"":""asc""}]}},{""ddoc"":""_design/indexOwnerDoc"",""name"":""indexOwner"",""type"":""json"",""def"":{""fields"":[{""docType"":""asc""},{""owner"":""asc""}],""partial_filter_selector"":{}}}]}
{code}




 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i025t1:,,,,,,,,AdnanChoudhury,chris.elder,denyeart,,,,,,,,master,,,true,"16/Feb/18 3:51 PM;denyeart;Chris, I think this would best be handled by additional validation at packaging time.",20/Feb/18 6:39 PM;chris.elder;I think this can be handled at two different levels.   One level would be to correct the messaging to indicate if the index is created or updated and include the name of the index and design document.   An additional check can be made during packaging to ensure that two separate but identical indexes are created.,20/Feb/18 6:40 PM;chris.elder;https://gerrit.hyperledger.org/r/#/c/18099/,"20/Feb/18 6:54 PM;denyeart;Ok, after looking at the options, only the logging clarification is containable in 1.1, let's go with that approach.  The peer log should indicate whether it is creating or updating an index.  This will be helpful for people upgrading chaincode with an existing index in place regardless.","24/Feb/18 4:03 PM;AdnanChoudhury;Working with images built this morning (Feb 24), for the scenario mentioned in original message, I am seeing the peer log still contains two ""created CouchDB index"" and *no* ""updated CouchDB index"" and the only one index exists in CouchDB.

 ","24/Feb/18 6:02 PM;denyeart;Testing against latest master, I deployed a chaincode that had two index json files, each defining the same index.  In the peer log, I see that the index is created and then updated:


{code:java}
2018-02-24 17:49:42.916 UTC [couchdb] CreateIndex -> INFO 517 Created CouchDB index [indexOwner] in state database [myc_marbles] using design document [_design/indexOwnerDoc]

2018-02-24 17:49:42.919 UTC [couchdb] CreateIndex -> INFO 51c Updated CouchDB index [indexOwner] in state database [myc_marbles] using design document [_design/indexOwnerDoc]
{code}



[~AdnanChoudhury] could you paste the corresponding lines from your log?  This could be a timing issue where CouchDB does not detect a previously created index for a few milliseconds, we've seen issues like that but determined it was benign after discussing with CouchDB developers.
","26/Feb/18 11:50 AM;denyeart;Since there is no runtime problem, only logging for an edge case, let's defer this to 1.2.","26/Feb/18 7:25 PM;chris.elder;I duplicated Dave's results with the current build.  The timestamps for create and update of the same index are 3ms apart.

2018-02-26 17:21:37.112 UTC [couchdb] CreateIndex -> INFO 50f Created CouchDB index [indexOwner] in state database [myc_marbles] using design document [_design/indexOwnerDoc]

2018-02-26 17:21:37.115 UTC [couchdb] CreateIndex -> INFO 514 Updated CouchDB index [indexOwner] in state database [myc_marbles] using design document [_design/indexOwnerDoc]

[~AdnanChoudhury], were the times between the two timestamps in your log closer in time?   If you can post your results here, that would be great.","27/Feb/18 4:52 PM;AdnanChoudhury;[~chris.elder] heres the debug level log, in my test the ""Created CouchDB index"" messages are 12 ms apart. Tested with images built today.



 
{code:java}
[[36m2018-02-27 16:40:02.613 UTC [couchdb] CreateIndex -> DEBU 586^[[0m Entering CreateIndex()  indexdefinition={""index"":{""fields"":[""docType"",""owner""]},""ddoc"":""indexOwnerDoc"", ""name"":""indexOwner"",""t     ype"":""json""}
1516 ^[[36m2018-02-27 16:40:02.613 UTC [couchdb] handleRequest -> DEBU 587^[[0m Entering handleRequest()  method=POST  url=http://couchdb01:5984/mychannel1_mycc1/_index
1517 ^[[36m2018-02-27 16:40:02.614 UTC [couchdb] handleRequest -> DEBU 588^[[0m HTTP Request: POST /mychannel1_mycc1/_index HTTP/1.1 | Host: couchdb01:5984 | User-Agent: Go-http-client/1.1 | Content-Lengt     h: 99 | Accept: application/json | Content-Type: application/json | Accept-Encoding: gzip |  |
1518 ^[[36m2018-02-27 16:40:02.712 UTC [couchdb] handleRequest -> DEBU 589^[[0m Exiting handleRequest()
1519 2018-02-27 16:40:02.712 UTC [couchdb] CreateIndex -> INFO 58a^[[0m Created CouchDB index [indexOwner] in state database [mychannel1_mycc1] using design document [_design/indexOwnerDoc]
1520 ^[[36m2018-02-27 16:40:02.712 UTC [couchdb] CreateIndex -> DEBU 58b^[[0m Entering CreateIndex()  indexdefinition={""index"":{""fields"": [""docType"", ""owner"", ""color""]}, ""ddoc"": ""indexOwnerDoc"", ""type"": ""     json"", ""name"": ""indexOwner""}
1521 ^[[36m2018-02-27 16:40:02.712 UTC [couchdb] handleRequest -> DEBU 58c^[[0m Entering handleRequest()  method=POST  url=http://couchdb01:5984/mychannel1_mycc1/_index
1522 ^[[36m2018-02-27 16:40:02.712 UTC [couchdb] handleRequest -> DEBU 58d^[[0m HTTP Request: POST /mychannel1_mycc1/_index HTTP/1.1 | Host: couchdb01:5984 | User-Agent: Go-http-client/1.1 | Content-Lengt     h: 115 | Accept: application/json | Content-Type: application/json | Accept-Encoding: gzip |  |
1523 ^[[36m2018-02-27 16:40:02.729 UTC [couchdb] handleRequest -> DEBU 58e^[[0m Exiting handleRequest()
1524 2018-02-27 16:40:02.729 UTC [couchdb] CreateIndex -> INFO 58f^[[0m Created CouchDB index [indexOwner] in state database [mychannel1_mycc1] using design document [_design/indexOwnerDoc]
 
{code}
 ","27/Feb/18 5:47 PM;denyeart;To test my theory that this is due to a CouchDB timing issue, copy the index definition 50 times in the package.  I suspect you will see a few Creates and then the rest Updates.","27/Feb/18 7:21 PM;AdnanChoudhury;[~denyeart] was doing just that :) 
You guessed correct, 3 ""Created"" and 97 ""Updated"" for 100 same index definitions. 
As the Fabric is dependent on the CouchDB return message, and Fabric log now shows ""updated"" when Couch says that it was updated, for me this issue is solved/verified.

The small corner case that remains is a CouchDB issue, that may be addressed via CouchDB project if need be.  ",,,,,,,,,,,,,
[sdk-node] unnecessary or missing parameters in transaction proposal request,FAB-8329,27788,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yuki-kon,yuki-kon,yuki-kon,15/Feb/18 10:32 PM,20/Feb/18 3:11 PM,26/Apr/18 6:50 AM,20/Feb/18 3:11 PM,v1.1.0-alpha,,,,,,v1.1,,,fabric-sdk-node,,,,0,,,,,,,,,"Some transaction proposal requests have unnecessary or missing parameters.

1. fabric-sdk-node/fabric-client/lib/Channel.js

The following functions have “chainId” in request objects. However, “chainId” is not used to call sendTransactionProposal.
This parameter should be removed.
- queryInfo
- queryBlockByHash
- queryBlock
- queryTransaction
- queryInstantiatedChaincodes
- queryByChaincode
 
In addition, queryBlock doesn’t have the value of “signer” in ChaincodeInvokeRequest.
https://github.com/hyperledger/fabric-sdk-node/blob/master/fabric-client/lib/Channel.js#L962
Signer generated by previous step should be added to the request object.

2. fabric-sdk-node/test/integration/events.js,  fabric-sdk-node/test/integration/eventutil.js

createRequest has unnecessary parameters - “channel” and “user”. These parameters should be removed.
https://github.com/hyperledger/fabric-sdk-node/blob/master/test/integration/eventutil.js#L59
",fabric-sdk-node 0ace8d1c3e2e75c7eb1d033926162c1bce11fbea,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i025rh:,,,,,,,,yuki-kon,,,,,,,,,,master,,,true,15/Feb/18 10:59 PM;yuki-kon;CR is posted here. https://gerrit.hyperledger.org/r/#/c/17965/,,,,,,,,,,,,,,,,,,,,,,,
fix fabric-sdk-node lint errors in fabric-ca,FAB-8326,27783,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,rameshthoomu,rameshthoomu,15/Feb/18 7:13 PM,23/Mar/18 7:56 AM,26/Apr/18 6:50 AM,23/Mar/18 7:56 AM,,,,,,,v1.2,,,fabric-sdk-node,,,,0,fabric-ca,,,,,,,,"observed below lint errors when running `make` on fabric-ca root directory
{code:java}
YOU MUST FIX THE FOLLOWING LINT PROBLEMS:
fabric-sdk-node/test/fixtures/src/github.com/events_cc/events_cc.go:43:1: exported method EventSender.Invoke should have comment or be unexported
fabric-sdk-node/test/fixtures/src/github.com/events_cc/events_cc.go:74:2: don't use underscores in Go names; var num_events should be numEvents
fabric-sdk-node/test/fixtures/src/github.com/events_cc/events_cc.go:111:2: don't use underscores in Go names; var num_events should be numEvents
fabric-sdk-node/test/fixtures/src/github.com/example_cc/example_cc.go:34:1: exported method SimpleChaincode.Init should have comment or be unexported
fabric-sdk-node/test/fixtures/src/github.com/example_cc/example_cc.go:73:1: comment on exported method SimpleChaincode.Invoke should be of the form ""Invoke ...""
fabric-sdk-node/test/fixtures/src/github.com/example_cc1/example_cc1.go:34:1: exported method SimpleChaincode.Init should have comment or be unexported
fabric-sdk-node/test/fixtures/src/github.com/example_cc1/example_cc1.go:42:1: comment on exported method SimpleChaincode.Invoke should be of the form ""Invoke ...""
fabric-sdk-node/test/fixtures/src/github.com/example_cc2/example_cc2.go:34:1: comment on exported method SimpleChaincode.Init should be of the form ""Init ...""
fabric-sdk-node/test/fixtures/src/github.com/example_cc2/example_cc2.go:61:1: comment on exported method SimpleChaincode.Invoke should be of the form ""Invoke ...""
END LINT PROBLEMS{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i025qd:,,,,,,,,aambati,harrisob@us.ibm.com,rameshthoomu,,,,,,,,master,,,true,20/Feb/18 9:37 PM;aambati;[~rameshthoomu] why is this assigned to fabric-ca..did u mean to assign it to node sdk?,08/Mar/18 9:53 PM;rameshthoomu;[~harrisob@us.ibm.com] ^^,20/Mar/18 8:25 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/19505/,,,,,,,,,,,,,,,,,,,,,
"On tutorial, the properties calls are wrong",FAB-8322,27779,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,vieiramanoel,vieiramanoel,vieiramanoel,15/Feb/18 4:55 PM,17/Feb/18 1:02 PM,26/Apr/18 6:50 AM,15/Feb/18 5:14 PM,,,,,,,,,,fabric-sdk-py,,,,0,Documentation,,,,,,,,"on lines 57 to 62 there's
{code}
cli.organizations()  # orgs in the network
cli.peers()  # peers in the network
cli.orderers()  # orderers in the network
cli.CAs()  # ca nodes in the network
{code}
where organizations, peers, orderers, and CAs are properties, not methods, this should be changed to
{code}
cli.organizations  # orgs in the network
cli.peers # peers in the network
cli.orderers  # orderers in the network
cli.CAs  # ca nodes in the network
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i025ph:,,,,,,,,vieiramanoel,,,,,,,,,,master,,,true,15/Feb/18 5:14 PM;vieiramanoel;done in https://gerrit.hyperledger.org/r/#/c/17931/,,,,,,,,,,,,,,,,,,,,,,,
Upgrade the nodejs version from 8.9.1 to 8.9.4,FAB-8316,27768,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sambhavdutt,sambhavdutt,sambhavdutt,15/Feb/18 3:37 PM,17/Feb/18 12:27 AM,26/Apr/18 6:50 AM,17/Feb/18 12:19 AM,,,,,,,v1.1,,,fabric-ci,,,,0,ci_failure,,,,,,,,The current nodejs version that is in use now is 8.9.1. This has to be updated to 8.9.4 as the latest tests run on nodejs 8.9.4 in the fabric tests.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i025n1:,,,,,,,,sambhavdutt,,,,,,,,,,master,,,true,17/Feb/18 12:27 AM;sambhavdutt;[This patch|https://gerrit.hyperledger.org/r/#/c/17949/] has been merged and the node version has been updated in [fabric-test|https://github.com/hyperledger/fabric-test/blob/master/pre_setup.sh] from 8.9.1 to 8.9.4,,,,,,,,,,,,,,,,,,,,,,,
Misspelled module name or incorrect module path causing multihost job failure,FAB-8315,27767,Bug,Invalid,FAB,Fabric,software,ChristopherFerris,,,Medium,,tongliofcary,rameshthoomu,rameshthoomu,15/Feb/18 3:30 PM,28/Mar/18 5:19 PM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-quality,,,,0,ci_failure,,,,,,,," Error1:

ERROR! no action detected in task. This often indicates a misspelled module name, or incorrect module path.
{code:java}
tasks:
00:05:39.268     - include_tasks: ""fabricbuild/tasks/{{ mode }}.yml""
00:05:39.268       ^ here{code}
Error2:
{code:java}
00:06:17.630 ERROR! an undefined variable was found when attempting to template the vars_files item './../../vars/{{ pteenv }}.yml'
00:06:17.630 
00:06:17.630 The error appears to have been in '/w/workspace/fabric-multihost-tests-x86_64/fabric-test/tools/ATD/roles/tool_pte/plays.yml': line 13, column 7, but may
00:06:17.630 be elsewhere in the file depending on the exact syntax problem.
00:06:17.630 
00:06:17.630 The offending line appears to be:
00:06:17.630 
00:06:17.630     - ""./../../../../cello/src/agent/ansible/vars/{{ env }}.yml""
00:06:17.631     - ""./../../vars/{{ pteenv }}.yml""
00:06:17.631       ^ here
00:06:17.631 We could be wrong, but this one looks like it might be an issue with
00:06:17.631 missing quotes.  Always quote template expression brackets when they
00:06:17.631 start a value. For instance:
00:06:17.631 
00:06:17.631     with_items:
00:06:17.631       - {{ foo }}
00:06:17.631 
00:06:17.631 Should be written as:
00:06:17.631 
00:06:17.631     with_items:
00:06:17.631       - ""{{ foo }}""{code}
https://jenkins.hyperledger.org/view/multihost/job/fabric-multihost-tests-x86_64/71/console",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i025mt:,,,,,,,,rameshthoomu,scottz,tongliofcary,,,,,,,,,,,,15/Feb/18 3:32 PM;rameshthoomu;[~suryalnvs] seems Error2 is from fabric-test/ATD.. Could you please check this.,08/Mar/18 3:28 AM;tongliofcary;this is due to the ansible upgrade. the runtime needs to be upgraded. this is not a bug from agent point of view.,"28/Mar/18 5:19 PM;scottz;[~tongliofcary]  : what is the next step for this to get resolved, before we can close this? Are you the right person to own it, or is it [~rameshthoomu] ?",,,,,,,,,,,,,,,,,,,,,
npm install error on optional package,FAB-8311,27759,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,latitiah,latitiah,15/Feb/18 4:29 AM,15/Feb/18 4:29 AM,26/Apr/18 6:50 AM,,,,,,,,,,,,,,,0,,,,,,,,,"When performing `npm install` there is an error on the optional package fsevents@1.0.14.
The node_modules folder is being generated, but with the following errors on that package.

*commit*: 35cde418724af4693e51a40cad15a07a14d313fb

On local macOS:
{code}../node_modules/nan/nan_maybe_43_inl.h:220:17: warning: 'CloneElementAt' is deprecated [-Wdeprecated-declarations]
  return array->CloneElementAt(GetCurrentContext(), index);
                ^
/Users/quality/.node-gyp/8.9.4/include/node/v8.h:3502:36: note: 'CloneElementAt' has been explicitly marked deprecated here
                MaybeLocal<Object> CloneElementAt(Local<Context> context,
                                   ^
In file included from ../src/x509.cc:3:
In file included from ../include/x509.h:7:
In file included from ../node_modules/nan/nan.h:200:
In file included from ../node_modules/nan/nan_new.h:189:
../node_modules/nan/nan_implementation_12_inl.h:40:29: warning: 'New' is deprecated [-Wdeprecated-declarations]
  return v8::BooleanObject::New(value).As<v8::BooleanObject>();
                            ^
/Users/quality/.node-gyp/8.9.4/include/node/v8.h:4793:56: note: 'New' has been explicitly marked deprecated here
  V8_DEPRECATED(""Pass an isolate"", static Local<Value> New(bool value));
                                                       ^
In file included from ../src/x509.cc:3:
In file included from ../include/x509.h:7:
../node_modules/nan/nan.h:1963:15: warning: 'SetAccessor' is deprecated [-Wdeprecated-declarations]
  return obj->SetAccessor(
              ^
/Users/quality/.node-gyp/8.9.4/include/node/v8.h:3172:22: note: 'SetAccessor' has been explicitly marked deprecated here
                bool SetAccessor(Local<Name> name,
                     ^
../src/x509.cc:433:35: warning: 'CallAsConstructor' is deprecated [-Wdeprecated-declarations]
  return scope.Escape(DateObject->CallAsConstructor(1, args));
                                  ^
/Users/quality/.node-gyp/8.9.4/include/node/v8.h:3467:30: note: 'CallAsConstructor' has been explicitly marked deprecated here
                Local<Value> CallAsConstructor(int argc, Local<Value> argv[]));
                             ^
4 warnings generated.
  SOLINK_MODULE(target) Release/x509.node
added 1133 packages in 30.311s
{code}

On vagrant VM:
{code}$ npm install
npm WARN Integration@1.0.0 No repository field.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.0.14 (node_modules/sync-dir/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.0.14: wanted {""os"":""darwin"",""arch"":""any""} (current: {""os"":""linux"",""arch"":""x64""})

npm ERR! path /opt/gopath/src/github.com/hyperledger/node_modules/grpc/node_modules/verror/node_modules/assert-plus/package.json.3078159880
npm ERR! code ENOENT
npm ERR! errno -2
npm ERR! syscall open
npm ERR! enoent ENOENT: no such file or directory, open '/opt/gopath/src/github.com/hyperledger/node_modules/grpc/node_modules/verror/node_modules/assert-plus/package.json.3078159880'
npm ERR! enoent This is related to npm not being able to find a file.
npm ERR! enoent 

npm ERR! A complete log of this run can be found in:
npm ERR!     /home/ubuntu/.npm/_logs/2018-02-14T18_40_03_535Z-debug.log
$ npm -v
5.6.0
$ node -v
v8.9.4
$ more package.json 
{
  ""name"": ""Integration"",
  ""version"": ""1.0.0"",
  ""description"": ""Behave Node.js SDK Integration"",
  ""keywords"": [
    ""Behave node-sdk integration"",
    ""Call node-sdk apis from behave""
  ],
  ""engines"": {
    ""node"": "">=6.9.5 <7.0"",
    ""npm"": "">=3.10.10 <4.0""
  },
  ""license"": ""Apache-2.0"",
  ""dependencies"": {
    ""fabric-ca-client"": ""unstable"",
    ""fabric-client"": ""unstable"",
    ""fs-extra"": ""^2.0.0"",
    ""log4js"": ""^0.6.38""
  },
  ""devDependencies"": {
    ""sync-dir"": ""^1.5.1""
  }
}
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i025lh:,,,,,,,,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
No error message on cli logs when two config updates are sent simultaneously,FAB-8309,27756,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,rohitadivi,rohitadivi,14/Feb/18 10:47 PM,20/Feb/18 10:44 PM,26/Apr/18 6:50 AM,20/Feb/18 10:44 PM,,,,,,,v1.1,,,fabric-peer,,,,0,quality,,,,,,,,"When two config updates (with same conditions such as changing batch size in both) are sent to the orderer at the same time using orderer org admin, the cli logs show no error message even though one of the transactions gets discarded by the orderer. The error can be seen in the orderer logs as: Discarding bad config message: error authorizing update: error validating DeltaSet: attempt to set key [Value]  /Channel/Orderer/BatchSize to version 1, but key is at version 1

The same test scenario if done with different conditions such as changing batch size and changing batch timeout passes successfully and two config blocks are created.

This might create a confusion that both the config updates passed successfully.

Please refer to the attached screenshots to see the command that was used to send in the config update and the the error message in the orderer logs.",,,,,,,,,,,,,,,,,,,,14/Feb/18 8:09 PM;rohitadivi;Cli_log.JPG;https://jira.hyperledger.org/secure/attachment/14597/Cli_log.JPG,14/Feb/18 8:09 PM;rohitadivi;ordererlog_1.JPG;https://jira.hyperledger.org/secure/attachment/14596/ordererlog_1.JPG,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i025kt:,,,,,,,,denyeart,rohitadivi,wlahti,,,,,,,,master,,,true,"19/Feb/18 2:27 PM;denyeart;I think the CLI log just needs to indicate that the update was submitted for processing (implying that it may be invalidated upon processing, like any other transaction).","20/Feb/18 4:45 PM;wlahti;Agreed, similar to how the peer channel join command was updated to state ""Successfully submitted proposal to join channel"" instead of ""Peer joined the channel"". ",20/Feb/18 5:11 PM;wlahti;https://gerrit.hyperledger.org/r/c/18093/,,,,,,,,,,,,,,,,,,,,,
Channel config template versions can be unpredictable,FAB-8277,27723,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,14/Feb/18 4:02 PM,16/Feb/18 4:32 PM,26/Apr/18 6:50 AM,16/Feb/18 4:32 PM,v1.1.0-alpha,,,,,,v1.1,,,fabric-orderer,,,,0,,,,,,,,,"Presently, before applying a channel creation transaction, a 'template
config' is created by copying various pieces of the orderer system
channel into a new config, then applying the channel creation tx as an
update.

This works well in greenfield deployments, but as the orderer system
channel mutates, so does the template config.  Users would have to
deduce the correct versions to use in computing their config updates,
which becomes onerous and requires out of band communication.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i025ed:,,,,,,,,jyellick,,,,,,,,,,master,,,true,14/Feb/18 4:02 PM;jyellick;In review via: https://gerrit.hyperledger.org/r/17891,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca sample is creating orderer and peer identities with wrong type,FAB-8238,27669,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,luomin,smithbk,smithbk,13/Feb/18 2:19 PM,14/Feb/18 6:58 PM,26/Apr/18 6:50 AM,14/Feb/18 6:58 PM,,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"The fabric-samples/fabric-ca/scripts/setup-fabric.sh script needs two small changes so that orderers and peers are registered with the correct type.  They are currently defaulting to type 'client'.
Change
{code}
fabric-ca-client register -d --id.name $ORDERER_NAME --id.secret $ORDERER_PASS
{code}
to
{code}
fabric-ca-client register -d --id.name $ORDERER_NAME --id.secret $ORDERER_PASS --id.type orderer
{code}

and change
Change
{code}
fabric-ca-client register -d --id.name $PEER_NAME --id.secret $PEER_PASS
{code}
to
{code}
fabric-ca-client register -d --id.name $PEER_NAME --id.secret $PEER_PASS --id.type peer
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0254d:,,,,,,,,luomin,smithbk,,,,,,,,,master,,,true,14/Feb/18 4:43 AM;luomin;https://gerrit.hyperledger.org/r/#/c/17887/,,,,,,,,,,,,,,,,,,,,,,,
node shim should not pass log entry back as error message,FAB-8236,27666,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,davidkel,davidkel,davidkel,13/Feb/18 10:30 AM,13/Feb/18 5:01 PM,26/Apr/18 6:50 AM,13/Feb/18 5:01 PM,v1.1.0-alpha,v1.1.0-preview,,,,,v1.1,,,fabric-chaincode-node,,,,0,,,,,,,,,"Currently the chaincode shim sends back the log entry as the error message which means the actual message is buried in a string and the other information is of no value. 
For example is if a chaincode function is invoked and throws an error the caller get's back the log entry string.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0253p:,,,,,,,,davidkel,harrisob@us.ibm.com,,,,,,,,,master,,,true,13/Feb/18 5:01 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/17837/,,,,,,,,,,,,,,,,,,,,,,,
[sdk-node] Name of an Orderer is not properly set with network profile,FAB-8229,27653,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,shimos,shimos,shimos,12/Feb/18 10:04 PM,13/Feb/18 5:03 PM,26/Apr/18 6:50 AM,13/Feb/18 5:03 PM,v1.1.0-alpha,,,,,,v1.1,,,fabric-sdk-node,,,,0,,,,,,,,,"After loading configurations from network profile, the names of Orderers returned by Channel.getOrderer() are not properly set unlike peers.

With {{test/fixtures/network.yaml}} in the fabric-sdk-node repository, running the following script

{code:title=test.js}
'use strict';

const Client = require('fabric-client');

const client = Client.loadFromConfig('test/fixtures/network.yaml');
const channel = client.getChannel('mychannel2');

const orderers = channel.getOrderers();
for (let i in orderers) {
        console.log('Orderer #%d = %s', i, orderers[i].getName());
}

const peers = channel.getPeers();
for (let i in peers) {
        console.log('Peer #%d = %s', i, peers[i].getName());
}
{code}

… results in 

{noformat}
$ node test.js
Orderer #0 = undefined
Peer #0 = peer0.org1.example.com
Peer #1 = peer0.org2.example.com
{noformat}

The name of the orderer is expected to be “orderer0.example.com,” not undefined.
",fabric-sdk-node fcc3f65c5981780b69744b25bc677173adc18cac,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02511:,,,,,,,,harrisob@us.ibm.com,shimos,,,,,,,,,master,,,true,13/Feb/18 5:03 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/17823/,,,,,,,,,,,,,,,,,,,,,,,
Java chaincode does not work with tls enabled,FAB-8220,27639,Bug,In Review,FAB,Fabric,software,ChristopherFerris,,,Medium,,sanchezl,sanchezl,sanchezl,12/Feb/18 3:46 PM,21/Mar/18 2:12 PM,26/Apr/18 6:50 AM,,v1.1.0-rc1,,,,,,v1.2,,,fabric-chaincode-java,fabric-crypto,,,0,,,,,,,,,The experimental java chaincode support does not work end TLS is enabled in the peer now that mutual TLS is enforced on the peer.,,,,,,,,,,,,,,,,,FAB-9028,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-8063,0|i024y5:,,,,,,,,denyeart,sanchezl,,,,,,,,,,,,,10/Mar/18 6:22 AM;sanchezl;https://gerrit.hyperledger.org/r/c/19005/,"11/Mar/18 5:22 AM;denyeart;Deferred from 1.1.
Master CR (1.2) is https://gerrit.hyperledger.org/r/#/c/19003/ .",,,,,,,,,,,,,,,,,,,,,,
Refine channel creation using new client API,FAB-8216,27633,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,baohua,baohua,baohua,12/Feb/18 11:24 AM,13/Feb/18 3:21 AM,26/Apr/18 6:50 AM,13/Feb/18 3:21 AM,,,,,,,,,,fabric-sdk-py,,,,0,SDK-Python,,,,,,,,Add new API for channel creation using the connection profile.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i024wt:,,,,,,,,baohua,,,,,,,,,,master,,,true,13/Feb/18 3:21 AM;baohua;https://gerrit.hyperledger.org/r/#/c/17791/,,,,,,,,,,,,,,,,,,,,,,,
[upgrade] Document the error shown in v1.0 peer when it crashes on a channel after enabling the capabilities during upgrade,FAB-8213,27625,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,MattHamilton,suryalnvs,suryalnvs,11/Feb/18 11:06 PM,26/Feb/18 11:51 AM,26/Apr/18 6:50 AM,26/Feb/18 11:51 AM,,,,,,,v1.1,,,fabric-docs,,,,0,Documentation,,,,,,,,Document the error shown in v1.0 peer crash after upgrading the rest of the network to v1.1 and enabling the capabilities,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i024v9:,,,,,,,,denyeart,suryalnvs,,,,,,,,,,,,,"26/Feb/18 11:51 AM;denyeart;I've confirmed this is in the upgrade doc CR:

[https://gerrit.hyperledger.org/r/#/c/18351/]

 

Closing.",,,,,,,,,,,,,,,,,,,,,,,
GetSigningIdentity() is broken,FAB-8212,27623,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aleksandar.likic,aleksandar.likic,aleksandar.likic,11/Feb/18 9:09 PM,13/Feb/18 11:48 AM,26/Apr/18 6:50 AM,13/Feb/18 11:48 AM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"Before commit e50cd2550d267b125eee6c584f048713b1357618, CredentialManager.GetSigningIdentity() used to lookup private key by SKI from the crypto suite. After the commit, it doesn't happen any more for SW keys, so the app has to manage SW private keys itself.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i024ut:,,,,,,,,aleksandar.likic,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
ChannelClient: EventHub is not connected properly?,FAB-8203,27613,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sandrav,ga25waq,ga25waq,11/Feb/18 2:15 AM,13/Feb/18 8:12 PM,26/Apr/18 6:50 AM,12/Feb/18 9:14 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"It looks as if the underlying EventHub of a ChannelClient does not get connected unless a transaction is executed (actually, the EventHub is connected in package txnhandler).

If no transaction is executed or only a query is performed, the event hub will not be connected.

The ChannelClient does not export the underlying event hub, so the user has no possibility to connect to it manually.

I've temporarily added
{code:java}
if !cc.eventHub.IsConnected() {
  cc.eventHub.Connect()
}
{code}
to the ChannelClient's method
> RegisterChaincodeEvent(chan<- *chclient.CCEvent, string, string) chclient.Registration

The error handling is missing here. Maybe it's useful to return
> (chclient.Registration, error)
for the RegisterChaincodeEvent method.

In my application, the Go channel handed over to RegisterChaincodeEvent now gets populated when the corresponding chaincode event is emitted.

Is that expected behaviour, i.e. should the underlying EventHub of a ChannelClient only be connected after a transaction has been executed?
I can think of many use cases where a user just wants to subscribe to a certain chaincode event and does not want to execute transactions.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i024sl:,,,,,,,,ga25waq,troyronda,,,,,,,,,master,,,true,12/Feb/18 8:07 PM;troyronda;https://gerrit.hyperledger.org/r/c/17811/,,,,,,,,,,,,,,,,,,,,,,,
Loading embedded certs from configuration file is broken,FAB-8195,27604,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aleksandar.likic,aleksandar.likic,aleksandar.likic,10/Feb/18 1:33 AM,10/Feb/18 4:35 AM,26/Apr/18 6:50 AM,10/Feb/18 4:35 AM,,,,,,,,,,,,,,0,,,,,,,,,The last commit that properly load embedded certs is 5f54093a6ab3ff48bb6a640d5f540926c4179385 .,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9kk,,,,,,,,aleksandar.likic,troyronda,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"Document format of ""Chaincode for Operators"" is broken",FAB-8194,27603,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yuki-kon,yuki-kon,yuki-kon,09/Feb/18 10:50 PM,13/Feb/18 12:46 AM,26/Apr/18 6:50 AM,13/Feb/18 12:46 AM,v1.1.0-alpha,,,,,,,,,fabric-docs,,,,0,,,,,,,,,"The document format is broken in fabric/docs/source/chaincode4noah.rst.
The usage of CLI is not displayed correctly.
https://github.com/hyperledger/fabric/blob/master/docs/source/chaincode4noah.rst#cli

The format should be updated.
",fabric 978b4f244b8a5b63891d67bc8c03b49f521595d6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i024ql:,,,,,,,,yuki-kon,,,,,,,,,,master,,,true,12/Feb/18 8:49 PM;yuki-kon;CR is posted here: https://gerrit.hyperledger.org/r/#/c/17813/,,,,,,,,,,,,,,,,,,,,,,,
Removed Orderer Still Processing Transactions,FAB-8193,27602,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,Ratnakar,Ratnakar,09/Feb/18 10:07 PM,16/Feb/18 10:15 PM,26/Apr/18 6:50 AM,16/Feb/18 10:15 PM,,,,,,,Not a Bug,v1.1,,fabric-orderer,,,,0,quality,,,,,,,,"Fabric version 1.1 

Objective : As an Orderer Org admin , I wanted to delete one of the rouge Orderer process from my system channel (*testchainid*)

Steps:
 1. Launch the network with kafka based ordereing service (3 orderer process)
 2. Create a channel , join peers and send some invokes and queries
 3. Now we wanted to kick out the *orderer2.example.com* process from the orderer organization.
 Fetch the config block and remove the orderer2.example.com from the config block , calculate the difference and send a config update on the system channel (*testchainid*)
  4. Send a config update, however the config update with an error.

Expected: Config update should happen and ordere2.example.com should be removed from the system channel *testchainid*

Gist of error logs:
{code:java}
peer channel update -f config_update_in_envelope.pb -c $CHANNEL_NAME -o orderer0.example.com:7050 --tls true --cafile $ORDERER_CA
2018-02-09 21:41:20.414 UTC [msp] GetLocalMSP -> DEBU 001 Returning existing local MSP
2018-02-09 21:41:20.414 UTC [msp] GetDefaultSigningIdentity -> DEBU 002 Obtaining default signing identity
2018-02-09 21:41:20.417 UTC [channelCmd] InitCmdFactory -> INFO 003 Endorser and orderer connections initialized
2018-02-09 21:41:20.418 UTC [msp] GetLocalMSP -> DEBU 004 Returning existing local MSP
2018-02-09 21:41:20.418 UTC [msp] GetDefaultSigningIdentity -> DEBU 005 Obtaining default signing identity
2018-02-09 21:41:20.419 UTC [msp] GetLocalMSP -> DEBU 006 Returning existing local MSP
2018-02-09 21:41:20.419 UTC [msp] GetDefaultSigningIdentity -> DEBU 007 Obtaining default signing identity
2018-02-09 21:41:20.420 UTC [msp/identity] Sign -> DEBU 008 Sign: plaintext: 0A95060A0A4F7264657265724D535012...6C2F4F7264657265722F41646D696E73
2018-02-09 21:41:20.420 UTC [msp/identity] Sign -> DEBU 009 Sign: digest: AD9EECA9E904C4018CE23B99A96AABB8DBCA1CFC77FCD6E6B7D0816AFE8BE748
2018-02-09 21:41:20.420 UTC [msp] GetLocalMSP -> DEBU 00a Returning existing local MSP
2018-02-09 21:41:20.420 UTC [msp] GetDefaultSigningIdentity -> DEBU 00b Obtaining default signing identity
2018-02-09 21:41:20.420 UTC [msp] GetLocalMSP -> DEBU 00c Returning existing local MSP
2018-02-09 21:41:20.420 UTC [msp] GetDefaultSigningIdentity -> DEBU 00d Obtaining default signing identity
2018-02-09 21:41:20.420 UTC [msp/identity] Sign -> DEBU 00e Sign: plaintext: 0ACE060A1708021A060880ABF8D30522...5B93E74AD5B6F7DFD9CE768D8F1F9757
2018-02-09 21:41:20.420 UTC [msp/identity] Sign -> DEBU 00f Sign: digest: F2782257EEBFC7033FDBC24D1123A62D560EBF16E7A230641DF85FB29FD9E31A
Error: got unexpected status: BAD_REQUEST -- error authorizing update: error validating DeltaSet: policy for [Value]  /Channel/OrdererAddresses not satisfied: Failed to reach implicit threshold of 1 sub-policies, required 1 remaining
Usage:
  peer channel update [flags]

Flags:
  -c, --channelID string   In case of a newChain command, the channel ID to create.
  -f, --file string        Configuration transaction file generated by a tool such as configtxgen for submitting to orderer

Global Flags:
      --cafile string                       Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint
      --certfile string                     Path to file containing PEM-encoded X509 public key to use for mutual TLS communication with the orderer endpoint
      --clientauth                          Use mutual TLS when communicating with the orderer endpoint
      --keyfile string                      Path to file containing PEM-encoded private key to use for mutual TLS communication with the orderer endpoint
      --logging-level string                Default logging level and overrides, see core.yaml for full syntax
  -o, --orderer string                      Ordering service endpoint
      --ordererTLSHostnameOverride string   The hostname override to use when validating the TLS connection to the orderer.
      --tls                                 Use TLS when communicating with the orderer endpoint
  -v, --version                             Display current version of fabric peer server
{code}
 

Gist ordere0.example.com logs: (enclosed the full logs for reference)
{code:java}
^[[36m2018-02-09 21:41:20.424 UTC [cauthdsl] func2 -> DEBU e49^[[0m 0xc420c060d0 identity 0 does not satisfy principal: This identity is not an admin
^[[36m2018-02-09 21:41:20.424 UTC [cauthdsl] func2 -> DEBU e4a^[[0m 0xc420c060d0 principal evaluation fails
^[[36m2018-02-09 21:41:20.424 UTC [cauthdsl] func1 -> DEBU e4b^[[0m 0xc420c060d0 gate 1518212480424667706 evaluation fails
^[[36m2018-02-09 21:41:20.424 UTC [policies] Evaluate -> DEBU e4c^[[0m Signature set did not satisfy policy /Channel/Orderer/OrdererOrg/Admins
^[[36m2018-02-09 21:41:20.424 UTC [policies] Evaluate -> DEBU e4d^[[0m == Done Evaluating *cauthdsl.policy Policy /Channel/Orderer/OrdererOrg/Admins
^[[36m2018-02-09 21:41:20.424 UTC [policies] func1 -> DEBU e4e^[[0m Evaluation Failed: Only 0 policies were satisfied, but needed 1 of [ OrdererOrg.Admins ]
^[[36m2018-02-09 21:41:20.424 UTC [policies] Evaluate -> DEBU e4f^[[0m Signature set did not satisfy policy /Channel/Orderer/Admins
^[[36m2018-02-09 21:41:20.424 UTC [policies] Evaluate -> DEBU e50^[[0m == Done Evaluating *policies.implicitMetaPolicy Policy /Channel/Orderer/Admins
^[[33m2018-02-09 21:41:20.424 UTC [orderer/common/broadcast] Handle -> WARN e51^[[0m [channel: testchainid] Rejecting broadcast of config message from 172.18.0.18:38768 because of error: error authorizing update: error validating DeltaSet: policy for [Value]  /Channel/OrdererAddresses not satisfied: Failed to reach implicit threshold of 1 sub-policies, required 1 remaining
^[[36m2018-02-09 21:41:20.424 UTC [orderer/common/server] func1 -> DEBU e52^[[0m Closing Broadcast stream
^[[36m2018-02-09 21:41:20.426 UTC [grpc] Printf -> DEBU e53^[[0m transport: http2Server.HandleStreams failed to read frame: read tcp 172.18.0.17:7050->172.18.0.18:38768
{code}",,,,,,,,,,,,,,,,,,,,12/Feb/18 12:50 AM;Ratnakar;block_events.tar;https://jira.hyperledger.org/secure/attachment/14568/block_events.tar,09/Feb/18 9:57 PM;Ratnakar;orderer0_example_com.txt;https://jira.hyperledger.org/secure/attachment/14565/orderer0_example_com.txt,12/Feb/18 12:41 AM;Ratnakar;orderer_logs.tar;https://jira.hyperledger.org/secure/attachment/14566/orderer_logs.tar,12/Feb/18 12:42 AM;Ratnakar;sys_channel_latest_config_orderer2.pb;https://jira.hyperledger.org/secure/attachment/14567/sys_channel_latest_config_orderer2.pb,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i024qd:,,,,,,,,bmos299,denyeart,jyellick,mastersingh24,Ratnakar,scottz,,,,,,,,,"09/Feb/18 10:13 PM;jyellick;Are you certain you are signing this with an ordering admin? From the log:

>  identity 0 does not satisfy principal: This identity is not an admin","09/Feb/18 10:25 PM;Ratnakar;I am not signing with the ordering admin.

My assumption is that *peer channel update*  command will take care of signing with orderer admin
{code:java}
peer channel update -f config_update_in_envelope.pb -c ""testchainid"" -o orderer0.example.com:7050 --tls true --cafile $ORDERER_CA{code}","09/Feb/18 10:28 PM;Ratnakar;Here are my env variables in the container where I executed the above cli command
{code:java}
        CORE_PEER_LOCALMSPID=""OrdererMSP""
	CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
	CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp{code}","09/Feb/18 10:52 PM;jyellick;[~Ratnakar] According to the environment variables, you are signing as an orderer, not as an orderer admin.  Please try using an identity like: {{crypto-config/ordererOrganizations/example.com/users/Admin\@example.com/}} instead, as you would for instance in enabling the orderer capabilities.","09/Feb/18 11:30 PM;Ratnakar;[~jyellick] Thats my bad.

Now after pointing to the right MSP config path , I could successfully update the config block. I verified the latest config block has deleted *orderer2.example.com* address
{code:java}
                  ""OrdererAddresses"": {
                    ""mod_policy"": ""/Channel/Orderer/Admins"",
                    ""value"": {
                      ""addresses"": [
                        ""orderer0.example.com:7050"",
                        ""orderer1.example.com:7050""
                      ]
                    },
                    ""version"": ""1""
                  }
{code}
However I could still send the transaction over this orderer *orderer2.example.com.*
{code:java}
peer chaincode invoke -o orderer2.example.com:7050  --tls --cafile $ORDERER_CA -C mychannel -n mycc -c '{""Args"":[""invoke"",""a"",""b"",""10""]}'
....
2018-02-09 23:24:14.314 UTC [chaincodeCmd] chaincodeInvokeOrQuery -> INFO 00b Chaincode invoke successful. result: status:200
2018-02-09 23:24:14.314 UTC [main] main -> INFO 00c Exiting.....
{code}
Shouldn't this be failing ?","11/Feb/18 6:04 PM;scottz;Interesting turn of events...

1. Regarding [~Ratnakar] changing the signature to use an orderer config admin to get it to work... was [~rohitadivi] using orderer admin to change the batchsize in his tests successfully (in which case we should create a different bug)? Or was he using orderer config admin already?

2. When the config update to remove the orderer2 was accepted by the other orderers, then did orderer2 receive the delivered block? Should orderer2 lose its connection to the kafkas (like the peers of a deleted org would lose their connections to the orderers)? I think that is probably what needs to happen (but did not) - which is the first problem. That way, the broadcast client and deliver clients(peers) could find out because it might lose its connection to the orderer2 (because service-unavailable) and could connect to another orderer.

3. What happens when you ADD another orderer? Can your client broadcast transactions and peers receive/deliver them through the new orderer?","12/Feb/18 12:53 AM;Ratnakar;Discussed with [~bmos299], As per his suggestion would like to provide few more details.

In the CLI flow,  the transaction proposal response from the peer would be sent to the orderer given in the command (connected with option *-o <orderer_name>*). we see the Block height is increased when the transaction is sent to the *ordere2.example.com* which has been deleted though a config update.

To make sure, we stopped the orderer processes *orderer0.example.com* and *orderer1.example.com* aswell ( using command _docker stop orderer0.example.com orderer1.example.com_ ) and sent another invoke transaction to *ordere2.example.com* and observed successful block commit. 
 NOTE: Validated the transaction using query aswell channel delivery service filtered block.

Enclosed orderer system channels latest config block [^sys_channel_latest_config_orderer2.pb] , the orderers logs [^orderer_logs.tar] and event blocks information [^block_events.tar]

Gist of orderer2 logs after the above successful transation.
{code:java}
kNumber=[13]
2018-02-12 00:24:53.430 UTC [orderer/commmon/multichannel] commitBlock -> DEBU a5a [channel: mychannel] Wrote block 13
2018-02-12 00:24:53.431 UTC [fsblkstorage] waitForBlock -> DEBU a5b Came out of wait. maxAvailaBlockNumber=[13]
2018-02-12 00:24:53.431 UTC [fsblkstorage] Next -> DEBU a5c Initializing block stream for iterator. itr.maxBlockNumAvailable=13
2018-02-12 00:24:53.431 UTC [fsblkstorage] newBlockfileStream -> DEBU a5e newBlockfileStream(): filePath=[/var/hyperledger/production/orderer/chains/mychannel/blockfile_000000], startOffset=[105296]
2018-02-12 00:24:53.431 UTC [fsblkstorage] waitForBlock -> DEBU a5d Came out of wait. maxAvailaBlockNumber=[13]
2018-02-12 00:24:53.431 UTC [fsblkstorage] Next -> DEBU a5f Initializing block stream for iterator. itr.maxBlockNumAvailable=13
2018-02-12 00:24:53.431 UTC [fsblkstorage] waitForBlock -> DEBU a60 Came out of wait. maxAvailaBlockNumber=[13]
2018-02-12 00:24:53.432 UTC [fsblkstorage] Next -> DEBU a62 Initializing block stream for iterator. itr.maxBlockNumAvailable=13
2018-02-12 00:24:53.432 UTC [fsblkstorage] newBlockfileStream -> DEBU a63 newBlockfileStream(): filePath=[/var/hyperledger/production/orderer/chains/mychannel/blockfile_000000], startOffset=[105296]
2018-02-12 00:24:53.432 UTC [fsblkstorage] newBlockfileStream -> DEBU a61 newBlockfileStream(): filePath=[/var/hyperledger/production/orderer/chains/mychannel/blockfile_000000], startOffset=[105296]
2018-02-12 00:24:53.432 UTC [fsblkstorage] nextBlockBytesAndPlacementInfo -> DEBU a64 Remaining bytes=[4779], Going to peek [8] bytes
2018-02-12 00:24:53.432 UTC [fsblkstorage] nextBlockBytesAndPlacementInfo -> DEBU a65 Returning blockbytes - length=[4777], placementInfo={fileNum=[0], startOffset=[105296], bytesOffset=[105298]}
2018-02-12 00:24:53.432 UTC [fsblkstorage] nextBlockBytesAndPlacementInfo -> DEBU a67 blockbytes [4777] read from file [0]
2018-02-12 00:24:53.432 UTC [fsblkstorage] nextBlockBytesAndPlacementInfo -> DEBU a66 Remaining bytes=[4779], Going to peek [8] bytes
2018-02-12 00:24:53.432 UTC [common/deliver] deliverBlocks -> DEBU a68 [channel: mychannel] Delivering block for (0xc4203ad540) for 172.18.0.6:40202
2018-02-12 00:24:53.432 UTC [fsblkstorage] waitForBlock -> DEBU a6a Going to wait for newer blocks. maxAvailaBlockNumber=[13], waitForBlockNum=[14]
2018-02-12 00:24:53.432 UTC [fsblkstorage] nextBlockBytesAndPlacementInfo -> DEBU a69 Returning blockbytes - length=[4777], placementInfo={fileNum=[0], startOffset=[105296], bytesOffset=[105298]}
2018-02-12 00:24:53.433 UTC [fsblkstorage] nextBlockBytesAndPlacementInfo -> DEBU a6b blockbytes [4777] read from file [0]
2018-02-12 00:24:53.433 UTC [common/deliver] deliverBlocks -> DEBU a6c [channel: mychannel] Delivering block for (0xc4204c7860) for 172.18.0.2:39298
2018-02-12 00:24:53.433 UTC [fsblkstorage] waitForBlock -> DEBU a6d Going to wait for newer blocks. maxAvailaBlockNumber=[13], waitForBlockNum=[14]
2018-02-12 00:24:53.433 UTC [fsblkstorage] nextBlockBytesAndPlacementInfo -> DEBU a6e Remaining bytes=[4779], Going to peek [8] bytes
2018-02-12 00:24:53.433 UTC [fsblkstorage] nextBlockBytesAndPlacementInfo -> DEBU a6f Returning blockbytes - length=[4777], placementInfo={fileNum=[0], startOffset=[105296], bytesOffset=[105298]}
2018-02-12 00:24:53.433 UTC [fsblkstorage] nextBlockBytesAndPlacementInfo -> DEBU a70 blockbytes [4777] read from file [0]
2018-02-12 00:24:53.434 UTC [common/deliver] deliverBlocks -> DEBU a71 [channel: mychannel] Delivering block for (0xc4202cb4e0) for 172.18.0.8:36370
2018-02-12 00:24:53.434 UTC [fsblkstorage] waitForBlock -> DEBU a72 Going to wait for newer blocks. maxAvailaBlockNumber=[13], waitForBlockNum=[14]
{code}
 ","12/Feb/18 4:54 AM;jyellick;The configuration parameter you changed, {{OrdererAddresses}} is an enumeration of orderer which clients and peers should use to connect to ordering.  It is not an exhaustive list of orderers, and adding and removing nodes from this list has no impact on their participation in ordering.  This is a deliberate feature by design, as it may be desirable to configure hot spare orderers, or to remove an orderer from the list for maintenance, recovery etc.

To disconnect an orderer from Kafka, standard Kafka access control measures may be leveraged, such as TLS CRLs, or firewalling.  If the orderer system and its key material were compromised, its certificate should be added to the orderer's MSP's CRL.","12/Feb/18 9:48 AM;mastersingh24;As [~jyellick] commented above, this is not a bug.","12/Feb/18 1:29 PM;bmos299;[~jyellick] agreed.  If the config parm changed was only *OrdererAddresses* than that is not revoking, or removing this orderer from the channel from a security perspective.   Actually it is a nice design feature.","14/Feb/18 4:54 PM;denyeart;[~jyellick] If not a bug, anything else needed here?  Doc update, etc?",14/Feb/18 6:35 PM;Ratnakar;Raised another bug [FAB-8240|https://jira.hyperledger.org/browse/FAB-8240] to address the doc update,,,,,,,,,,,,
fabric-test-merge-x86_64 failed to build successfully due to timeout error.,FAB-8159,27567,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,sambhavdutt,sambhavdutt,09/Feb/18 2:32 PM,14/Feb/18 7:21 PM,26/Apr/18 6:50 AM,14/Feb/18 7:21 PM,,,,,,,v1.1,,,fabric-ci,,,,0,ci_failure,,,,,,,,"fabric-test-merge-x86_64 failed twice as the following timeout error was observed,


{code:java}
22:14:00   @smoke
22:14:00   Scenario Outline: FAB-1440, FAB-3861: Basic Chaincode Execution - kafka orderer type, using leveldb, with tls -- @1.5   # peer.feature:56
22:14:00     Given I have a bootstrapped fabric network of type kafka using state-database leveldb with tls                        # steps/basic_impl.py:105
22:14:00 org1.example.com
22:14:00 org2.example.com
22:14:00 2018-02-08 22:14:00.660 UTC [common/tools/configtxgen] main -> INFO 001 Loading configuration
22:14:00 2018-02-08 22:14:00.699 UTC [common/tools/configtxgen] doOutputBlock -> INFO 002 Generating genesis block
22:14:00 2018-02-08 22:14:00.700 UTC [common/tools/configtxgen] doOutputBlock -> INFO 003 Writing genesis block
22:14:00 2018-02-08 22:14:00.718 UTC [common/tools/configtxgen] main -> INFO 001 Loading configuration
22:14:00 2018-02-08 22:14:00.747 UTC [common/tools/configtxgen] doOutputChannelCreateTx -> INFO 002 Generating new channel configtx
22:14:00 2018-02-08 22:14:00.771 UTC [common/tools/configtxgen] doOutputChannelCreateTx -> INFO 003 Writing new channel tx
22:14:00 2018-02-08 22:14:00.789 UTC [common/tools/configtxgen] main -> INFO 001 Loading configuration
22:14:00 2018-02-08 22:14:00.818 UTC [common/tools/configtxgen] doOutputAnchorPeersUpdate -> INFO 002 Generating anchor peer update
22:14:00 2018-02-08 22:14:00.818 UTC [common/tools/configtxgen] doOutputAnchorPeersUpdate -> INFO 003 Writing anchor peer update
22:14:00 2018-02-08 22:14:00.836 UTC [common/tools/configtxgen] main -> INFO 001 Loading configuration
22:14:00 2018-02-08 22:14:00.866 UTC [common/tools/configtxgen] doOutputAnchorPeersUpdate -> INFO 002 Generating anchor peer update
22:14:00 2018-02-08 22:14:00.866 UTC [common/tools/configtxgen] doOutputAnchorPeersUpdate -> INFO 003 Writing anchor peer update
22:14:19 2018-02-08 22:14:15.140 UTC [nodeCmd] func7 -> INFO 1aa Starting profiling server with listenAddress = 0.0.0.0:6060
22:14:19 2018-02-08 22:14:15.746 UTC [nodeCmd] func7 -> INFO 1ba Starting profiling server with listenAddress = 0.0.0.0:6060
22:14:19 2018-02-08 22:14:15.176 UTC [nodeCmd] func7 -> INFO 1b9 Starting profiling server with listenAddress = 0.0.0.0:6060
22:14:20 2018-02-08 22:14:15.802 UTC [nodeCmd] func7 -> INFO 1bf Starting profiling server with listenAddress = 0.0.0.0:6060
22:19:19 2018-02-08 22:14:15.140 UTC [nodeCmd] func7 -> INFO 1aa Starting profiling server with listenAddress = 0.0.0.0:6060
22:19:19 2018-02-08 22:14:15.746 UTC [nodeCmd] func7 -> INFO 1ba Starting profiling server with listenAddress = 0.0.0.0:6060
22:19:19 2018-02-08 22:14:15.176 UTC [nodeCmd] func7 -> INFO 1b9 Starting profiling server with listenAddress = 0.0.0.0:6060
22:19:19 2018-02-08 22:14:15.802 UTC [nodeCmd] func7 -> INFO 1bf Starting profiling server with listenAddress = 0.0.0.0:6060
22:19:19       Assertion Failed: The containers are not ready in the allotted time (300 seconds)
{code}


*Build Log*

https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-merge-x86_64/165/consoleFull",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i024it:,,,,,,,,sambhavdutt,,,,,,,,,,,,,,14/Feb/18 7:21 PM;sambhavdutt;The fabric-test-merge is passing without the timeout error for 3 builds. ,,,,,,,,,,,,,,,,,,,,,,,
"peer is unable to connect with chaincode container, when downgrade peer from V1.1 to V1.0",FAB-8152,27559,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Nishi,Ratnakar,Ratnakar,08/Feb/18 11:08 PM,26/Feb/18 3:58 PM,26/Apr/18 6:50 AM,26/Feb/18 3:58 PM,,,,,,,v1.1,,,fabric-docs,,,,0,chaincode,peer,quality,,,,,,"Testcase description/details can be referred from the FAB-7915

*Procedure:*
 # Start a v1.1.0 peer
 # Deploy a chaincode (which either vendors the v1.1.0 chaincode shim, or does not vendor the shim)
 # Query the chaincode
 # Shutdown the peer
 # Downgrade the peer to v1.0.x (do not delete the chaincode image)
 # Start the peer
 # Query the chaincode

*Expected Results:*

The query should execute correctly.

*Observed:*

chaincode container fails to connnect to peer and could see the following error in chaincode container logs

{code}
$ docker logs dev-peer0.org1.example.com-mycc-1.0
2018-02-08 22:53:38.443 UTC [shim] userChaincodeStreamGetter -> ERRO 001 open : no such file or directory
error trying to read file content
github.com/hyperledger/fabric/core/chaincode/shim.userChaincodeStreamGetter
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim/chaincode.go:89
github.com/hyperledger/fabric/core/chaincode/shim.Start
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim/chaincode.go:150
main.main
	/chaincode/input/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02/chaincode_example02.go:189
runtime.main
	/opt/go/src/runtime/proc.go:195
runtime.goexit
	/opt/go/src/runtime/asm_amd64.s:2337
Error starting Simple chaincode: error trying to read file content : open : no such file or directory
{code}

 Enclosed the peer logs

 

( _Tried with and without deleting the chaincode conatiner and see the same result._ )

 ",,,,,,,,,,,,,,,,,FAB-8210,,,08/Feb/18 11:07 PM;Ratnakar;Archive.zip;https://jira.hyperledger.org/secure/attachment/14562/Archive.zip,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i024h1:,,,,,,,,ChristopherFerris,denyeart,jyellick,Ratnakar,,,,,,,,,,,09/Feb/18 6:32 PM;Clayton Sims;What is reason a user would want to downgrade his peer ?   Is this use case we expect to support?,"09/Feb/18 6:53 PM;Ratnakar;[~Clayton Sims] This is not an actual upgrade , meaning we haven't enabled the *V1.1 capabilities* yet.

we are just changing the binaries from 1.1 to 1.0.

 

[~jyellick] Could you please confirm if we are expected to support this usecase. I executed the testcase described in  FAB-7915","09/Feb/18 7:25 PM;jyellick;You said you tried with and without deleting the chaincode container.  Did you mean container or image? If deleting the chaincode image does not fix this, it is rather perplexing.","09/Feb/18 7:26 PM;jyellick;> Jason Yellick Could you please confirm if we are expected to support this usecase. I executed the testcase described in FAB-7915

Officially, I believe we would say that the user should restore the backup of the peer that they took before upgrading to v1.1.  However, I see no reason why this should fail, and if it does, I thought it would be worth noting and documenting.","09/Feb/18 8:33 PM;Ratnakar;> You said you tried with and without deleting the chaincode container. Did you mean container or image? If deleting the chaincode image does not fix this, it is rather perplexing.
----
It is the chaincode conatiner that I was referring above.

Deleting v1.1 chaincode image has no issues. It is as per the test case step 5, we tested this.

 *_Downgrade the peer to v1.0.x (do not delete the chaincode image)_* ","09/Feb/18 10:46 PM;jyellick;Great, thanks for testing this.  As mentioned, this is not the supported path, but it was worth investigating what our users will see if they fail to delete the chaincode image on downgrade.  Let's take this as a doc defect to help users identity this failure case?",13/Feb/18 6:27 PM;Clayton Sims;[~Ratnakar]  moving to doc let us know if you disagree.,"14/Feb/18 5:54 PM;denyeart;[~Ratnakar] Since doc team is stretched, would you be able to push doc improvements like this as you find them?","14/Feb/18 6:45 PM;Ratnakar;[~denyeart] [~Clayton Sims] 

[~scottz] has raised another doc improvement FAB-8210 and linked to this JIRA hence I removed the *fabric-docs* component. 
 Sure I shall provide a patch for the doc improvement with FAB-8210.","26/Feb/18 11:53 AM;denyeart;[~Ratnakar] You could make a comment or update to the upgrade doc for this instead of using another work item:

https://gerrit.hyperledger.org/r/#/c/18351/",26/Feb/18 12:52 PM;ChristopherFerris;should not hold up rc1,"26/Feb/18 3:57 PM;Ratnakar;As per the discussions and investigation, the docs are accurate.

[http://hyperledger-fabric.readthedocs.io/en/latest/upgrade_to_one_point_one.html?#upgrade-peer-binaries|http://hyperledger-fabric.readthedocs.io/en/latest/upgrade_to_one_point_one.html#upgrade-peer-binaries]

point 3 *Upgrade Peer Binaries*  addresses the same , here for ref
{code:java}
remove all Docker chaincode images.

These can be recognized by the pattern:

{{$\{CORE_PEER_NETWORKID}-$\{CORE_PEER_ID}-$\{CC_NAME}-$\{CC_VERSION}-$\{CC_HASH}}}

for instance:

{{dev-peer1.org2.example.com-mycc-1.0-26c2ef32838554aac4f7ad6f100aca865e87959c9a126e86d764c8d01f8346ab}}

{code}
closing this issue.",,,,,,,,,,,,
Unable to unmarshall block information on orderer system channel,FAB-8148,27555,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,rohitadivi,rohitadivi,08/Feb/18 9:46 PM,09/Feb/18 10:56 PM,26/Apr/18 6:50 AM,09/Feb/18 10:56 PM,,,,,,,v1.1,,,fabric-tools,,,,0,,,,,,,,,"While trying to unmarshall the block 1 on orderer system channel (testchainid) from proto to json format am geting the following error:

{code}
*common.Block: error in PopulateTo for field data for message *common.Block: *common.BlockData: error in PopulateTo for slice field data at index 0 for message *common.BlockData: *common.Envelope: error in PopulateTo for field payload for message *common.Envelope: *common.Payload: error in PopulateTo for field data for message *common.Payload: decoding type 4 is unimplemented
{code}

attached is the pb file for reference.",,,,,,,,,,,,,,,,,,,,08/Feb/18 9:45 PM;rohitadivi;config_block1.pb;https://jira.hyperledger.org/secure/attachment/14561/config_block1.pb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i024g5:,,,,,,,,jyellick,rohitadivi,,,,,,,,,master,,,true,09/Feb/18 7:43 PM;jyellick;In review via:  https://gerrit.hyperledger.org/r/17745,,,,,,,,,,,,,,,,,,,,,,,
Cache configuration on creation,FAB-8145,27552,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,troyronda,troyronda,troyronda,08/Feb/18 8:08 PM,08/Feb/18 8:48 PM,26/Apr/18 6:50 AM,08/Feb/18 8:48 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,The current implementation caches configuration on first usage. This can cause thread safety issues.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i024fp:,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
The name of genesis block is incorrect in behave test FAB-4773,FAB-8144,27551,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yuki-kon,yuki-kon,yuki-kon,08/Feb/18 7:58 PM,05/Mar/18 8:53 PM,26/Apr/18 6:50 AM,05/Mar/18 8:53 PM,v1.1.0-alpha,,,,,,v1.1,,,fabric-quality,,,,0,,,,,,,,,"The name of genesis block is wrong in behave test FAB-4773.
FAB-4773 is a test case fetching a channel genesis block.
The name of genesis block fetched from orderer is ""mychannel.block"".
However, the behave script checks a block named ""mychannel.tx"" in fabric-test/feature/bootstrap.feature.
https://github.com/hyperledger/fabric-test/blob/master/feature/bootstrap.feature#L124
 
The name of channel genesis block should be fixed correctly.
",fabric-test 002c4bfe55201794107c738ca76ba3cf7056eecb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i024fh:,,,,,,,,yuki-kon,,,,,,,,,,master,,,true,09/Feb/18 12:01 AM;yuki-kon;CR is posted here. https://gerrit.hyperledger.org/r/#/c/17713/,,,,,,,,,,,,,,,,,,,,,,,
Retries attempted after success,FAB-8143,27550,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,divyank,divyank,divyank,08/Feb/18 7:44 PM,08/Feb/18 9:06 PM,26/Apr/18 6:50 AM,08/Feb/18 9:06 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,The ChannelClient continues to attempt retries even after a call was successful. This happens because the error from the previous attempt is not removed from the request context between retries,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i024f9:,,,,,,,,divyank,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
fabric-sdk-go-tests-merge-x86_64 failed in the last build as some build codes didn't execute well,FAB-8138,27537,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,sambhavdutt,sambhavdutt,08/Feb/18 4:25 PM,12/Feb/18 2:25 AM,26/Apr/18 6:50 AM,12/Feb/18 2:25 AM,,,,,,,v1.1,,,fabric-ci,,,,0,ci_failure,,,,,,,,"fabric-sdk-go-tests-merge-x86_64 has failed in the last build #330 as the following errors were observed,


{code:java}
Aborting on container exit...
00:40:09 Makefile:232: recipe for target 'integration-tests-prerelease' failed
00:40:09 make[1]: *** [integration-tests-prerelease] Error 1
00:40:09 make[1]: Leaving directory '/w/workspace/fabric-sdk-go-tests-merge-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-go'
00:40:09 Makefile:267: recipe for target 'integration-test' failed
00:40:09 make: *** [integration-test] Error 2
00:40:09 Build step 'Execute shell' marked build as failure
{code}


*Build Log*

https://jenkins.hyperledger.org/view/fabric-sdk-go/job/fabric-sdk-go-tests-merge-x86_64/330/consoleFull",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i024cd:,,,,,,,,sambhavdutt,,,,,,,,,,,,,,"12/Feb/18 2:24 AM;sambhavdutt;The Makefile error has been fixed and the builds have been successful on several instances.

*Build Log*

https://jenkins.hyperledger.org/view/fabric-sdk-go/job/fabric-sdk-go-tests-merge-x86_64/342/consoleFull",,,,,,,,,,,,,,,,,,,,,,,
fabric-ca-merge-x86_64 fails as some build steps failed to execute.,FAB-8137,27535,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,sambhavdutt,sambhavdutt,08/Feb/18 4:10 PM,12/Feb/18 2:17 AM,26/Apr/18 6:50 AM,12/Feb/18 2:17 AM,,,,,,,v1.1,,,fabric-ci,,,,0,ci_failure,,,,,,,,"fabric-ca-merge-x86_64 is failing from last two builds due to the following errors,


{code:java}
17:45:10 #########################################################################
17:45:10 RC: 22, fabric-ca-fvt FAILED
17:45:10 31 minutes, 53 seconds runtime
17:45:10 TIMESTAMP--2018-02-07 05:45:10PM fabric-ca-fvt ENDED
17:45:10 #########################################################################
17:45:10 TIMESTAMP--2018-02-07 05:45:10PM
17:45:10 fabric-ca-fvt test ended.
17:45:10 Makefile:207: recipe for target 'fvt-tests' failed
17:45:10 make: *** [fvt-tests] Error 22
17:45:11 Build step 'Execute shell' marked build as failure

17:30:32  =============> testNonExistant
17:30:32 Error: Response from server: Error Code: 60 - Affiliation already exists
17:30:32 statusCode=404 (404 Not Found)
17:30:32 Error: Response from server: Error Code: 16 - Failed to get affiliation: : scode: 404, code: 63, msg: Failed to get Affiliation: sql: no rows in result set
{code}

*Build Log*

https://jenkins.hyperledger.org/view/fabric-ca/job/fabric-ca-merge-x86_64/404/console
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i024bx:,,,,,,,,sambhavdutt,,,,,,,,,,,,,,"12/Feb/18 2:17 AM;sambhavdutt;All tests passing now for fabric-ca-merge-x86_64 , and the 404-Affiliation error is fixed, which was possibly caused due to network error. The tests are successful  from several builds. 

*Build Log*
https://jenkins.hyperledger.org/view/fabric-ca/job/fabric-ca-merge-x86_64/412/consoleFull
",,,,,,,,,,,,,,,,,,,,,,,
During execution of FAB- 7914:  logs indicate build failure during deployment,FAB-8135,27533,Bug,Invalid,FAB,Fabric,software,ChristopherFerris,,,Medium,,,Nishi,Nishi,08/Feb/18 4:03 PM,12/Apr/18 1:08 PM,26/Apr/18 6:50 AM,,,,,,,,Not a Bug,,,,,,,1,,,,,,,,,"When executing  a chaincode vendored with 1.1 shim on 1.0.x peer using ""github.com/hyperledger/fabric-test/feature-upgrade/features/upgrade-abort.feature"" file

Chaincode could not be deployed as expected in task FAB-7914 , but it fails for a different reason:

*Error from peer-logs & behave feature file is as follows*:
{code:java}
Error starting container: Failed to generate platform-specific docker build: Error returned from build: 1 ""chaincode/input/src/github.com/hyperledger/fabric-test/chaincodes/jyellick/plob-1.1-shim/chaincode/vendor/github.com/hyperledger/fabric/bccsp/factory/pluginfactory.go:12:2: cannot find package ""plugin"" in any of:
/chaincode/input/src/github.com/hyperledger/fabric-test/chaincodes/jyellick/plob-1.1-shim/chaincode/vendor/github.com/hyperledger/fabric/vendor/plugin (vendor tree)
/chaincode/input/src/github.com/hyperledger/fabric-test/chaincodes/jyellick/plob-1.1-shim/chaincode/vendor/plugin{code}
 

hyperledger/fabric-ccenv:x86_64-1.0.4 image used in tests uses:

go version go1.7.5 linux/amd64 vs 

go version go1.9.2 linux/amd64 that was used to vendor chaincode with a 1.1 shim.

 

Difference in go versions across 1.0.x and 1.1 images failed to build the chaincode (vendored with 1.1 shim) to instantiate on a 1.0.x peer successfully.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i024bh:,,,,,,,,kit,mastersingh24,Nishi,,,,,,,,,,,,"23/Mar/18 3:01 PM;kit;I have similar error, but I +don’t have+ shim vendored. So, I just cannot instantiate chaincode at all. Nothing helps. Don’t know what to do. Using 1.0.5 and 1.0.6 containers.",12/Apr/18 1:08 PM;mastersingh24;This is not a valid scenario .... you cannot deploy v1.1 chaincode on a v1.0 peer,,,,,,,,,,,,,,,,,,,,,,
Fix typos in lockbased_txmgr,FAB-8132,27529,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,08/Feb/18 1:21 PM,08/Feb/18 6:33 PM,26/Apr/18 6:50 AM,08/Feb/18 6:33 PM,v1.1,,,,,,v1.1,,,fabric-ledger,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i024al:,,,,,,,,yacovm,,,,,,,,,,master,,,true,08/Feb/18 1:23 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/17689/,,,,,,,,,,,,,,,,,,,,,,,
ESLint check not throw error for some problems,FAB-8128,27523,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,zhaochy,zhaochy,zhaochy,08/Feb/18 2:41 AM,08/Feb/18 3:17 PM,26/Apr/18 6:50 AM,08/Feb/18 3:17 PM,,,,,,,v1.1,,,fabric-sdk-node,,,,0,,,,,,,,,"our eslint config have fix=true, this caused some error not recognized.

need to remove --fix from eslint config and fix the lint problem",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0249h:,,,,,,,,zhaochy,,,,,,,,,,master,,,true,08/Feb/18 2:47 AM;zhaochy;https://gerrit.hyperledger.org/r/17655,,,,,,,,,,,,,,,,,,,,,,,
Automatically kick off CI after each merge,FAB-8126,27521,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,aambati,aambati,07/Feb/18 11:38 PM,14/Feb/18 7:33 PM,26/Apr/18 6:50 AM,14/Feb/18 7:33 PM,,,,,,,v1.1,,,fabric-ci,,,,0,,,,,,,,,Recently we are seeing a lot of cases where two change sets that have functional conflicts are let in that results in bad code (does not build or test cases fail) in the master branch. It would be nice if a CI build is kicked off after each merge and letting the owner of the change set and committers know if the build fails.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02499:,,,,,,,,aambati,rameshthoomu,,,,,,,,,master,,,true,"08/Feb/18 3:08 PM;rameshthoomu;[~aambati] as mentioned in RC, fabric-ca has both verify and merge jobs [https://jenkins.hyperledger.org/view/fabric-ca/]

Merge jobs triggers only after a patch is merged in fabric-ca repository. All I have to do is send an email to maintainers if a build is failed. Could you please provide below details..
 * Could you please provide me the list of maintainer email ID's or just say to whom I have to send the failed build notification email
 * Do you want me to send an email, if the build fails on s390x as well?",,,,,,,,,,,,,,,,,,,,,,,
Intermediate server fails to start with --cacount param ,FAB-8123,27518,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,aambati,aambati,07/Feb/18 9:24 PM,28/Mar/18 8:37 PM,26/Apr/18 6:50 AM,,v1.0.0,v1.1,,,,,v1.2,,,fabric-ca,,,,0,info-needed,,,,,,,,"Intermediate server fails to start with this error message when started with --cacount command line argument:

Error: CN 'fabric-ca-server-ca1' cannot be specified for an intermediate CA. Remove CN from CSR section for enrollment of intermediate CA to be successful",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9n5zo,,,,,,,,aambati,sykesm,,,,,,,,,,,,,22/Feb/18 7:26 PM;sykesm;There's not enough information in this bug. Please add some details.,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca bad merge causing CI failures,FAB-8116,27511,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rennman,rennman,rennman,07/Feb/18 7:55 PM,08/Feb/18 3:24 PM,26/Apr/18 6:50 AM,08/Feb/18 3:24 PM,,,,,,,,,,fabric-ca,,,,0,,,,,,,,,"A new check for affiliation went which was inconsistent with the affiliations test.
Need to use 'force' to remove affiliation and sub-affiliations""

Since the test and code were merged simultaneously the CI integration caught the error.

The test will be updated to expect and to test the new restriction.
[Fix bad merge causing CI failure|https://gerrit.hyperledger.org/r/17637] 

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02479:,,,,,,,,rennman,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Channel#initialize need a peer admin identity as user context,FAB-8100,27492,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,schwinnez,schwinnez,07/Feb/18 2:22 PM,11/Feb/18 6:31 PM,26/Apr/18 6:50 AM,11/Feb/18 6:31 PM,,,,,,,,,,fabric-sdk-java,,,,0,help-wanted,node-SDK,,,,,,,"As far as I can see, the Channel#inititlize method forces me to have a peer admin identity.
To query a channel or invoke functions, the channel also has to be initialized. So far, I can not see an analogon for this need in the Node.js SDK. 
For Node.js, invoking chaincode functions or querying the ledger can be done with a user identity obtained from the CA. 

I have not succeed to use the same user identity to query or invoke functions from java sdk.
Is there a reason for this difference or am I missing some point?",,,,,,,,,,,,,,,,,,,,09/Feb/18 12:09 AM;rickr;MultiDomainSampleV10.java;https://jira.hyperledger.org/secure/attachment/14563/MultiDomainSampleV10.java,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0243h:,,,,,,,,rickr,schwinnez,,,,,,,,,,,,,"07/Feb/18 3:51 PM;rickr;Initialize the channel with peerAdmin is need as the user can't get the genesis block need. to the MSP.

Also ONLY the peerAdmin can install chaincode on the peers and instantiate them.  Once done member can invoke chaincode.

 End2endIt does switch over to CA member created user once that is done.

[https://github.com/hyperledger/fabric-sdk-java/blob/2adcdbca9e2e81bd5966386e4e3f012c03c7b976/src/test/java/org/hyperledger/fabric/sdkintegration/End2endIT.java#L457]","07/Feb/18 6:32 PM;schwinnez;But what to do, if i want to join an already created and joined channel with an already installed and instantiated chaincode? There is a method newChannel(String channelName) for an already existing channel. 
So, I would assume that everything is setup correctly and the only thing my application has to do is invoking chaincode functions.

Isn't this a reasonable use case?

 ","08/Feb/18 5:46 PM;rickr;I don't see that issue .. ran the sample I attached on v1.0.1 java sdk level

starting at line 201 after both organizations have created the channel and instantiated chaincode    It start again now setting up running as a regular user","11/Feb/18 6:30 PM;schwinnez;The example looks good. I'll try to reproduce this in my setting but this is how I would expect it to work.
Maybe I got some of my settings wrong.

 

Thanks=)",,,,,,,,,,,,,,,,,,,,
event protos inconsitent,FAB-8095,27471,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,07/Feb/18 8:53 AM,07/Feb/18 12:27 PM,26/Apr/18 6:50 AM,07/Feb/18 12:27 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,The events .pb.go files are inconsistent with the .proto,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i023z1:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Authorization failures returning wrong HTTP status code,FAB-8092,27467,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,smithbk,smithbk,06/Feb/18 10:34 PM,28/Mar/18 8:37 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-ca,,,,0,,,,,,,,,"fabric-ca-server should return 401 for authentication failures and 403 for authorization failures.  It is currently returning 401 HTTP status code for both.
We should rename newAuthErr to newAuthenticationErr and add a newAuthorizationErr function.",,,,,,,,,,,,,,,,,FAB-8022,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9n5zl,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
During execution of FAB- 7913:  logs should indicate failure is due to difference in shim versions,FAB-8091,27466,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,Nishi,Nishi,06/Feb/18 10:29 PM,14/Feb/18 4:39 PM,26/Apr/18 6:50 AM,14/Feb/18 4:39 PM,,,,,,,v1.1,,,fabric-docs,,,,0,,,,,,,,,"When testing with a chaincode that has vendored  1.0.x shim using:

[https://github.com/ghaskins/hyperledger-fabric-alpha2-challenge/tree/master/jyellick/plob/]

*Steps to Reproduce:*

From ""github.com/hyperledger/fabric-test/feature-upgrade/features/upgrade-abort.feature"" file use the above chaincode and implement the below scenario
{code:java}
https://jira.hyperledger.org/browse/FAB-7913

1. Start a v1.0.x peer
2. Deploy a chaincode which vendors a v1.0.x chaincode shim.
3. Shut down the peer
4. Delete the chaincode image
5. Upgrade the peer to v1.1.0
6. Start up the peer
7. Attempt to query the chaincode{code}
 

 

*Actual Result:* Use case fails as expected @step7  when we look at:

*1. chaincode logs:*
{code:java}
 2018-02-06 21:44:57.257 UTC [shim] userChaincodeStreamGetter -> ERRO 001 Error trying to connect to local peer: remote error: tls: bad certificate
Error starting PermissionedBlobRegistry chaincode: Error trying to connect to local peer: remote error: tls: bad certificatenishi@nishi-VirtualBox:~/gopath/src/github.com/hyperledger/fabric-release/examples/chaincode/go/hyperledger-fabric-alpha2-challenge/jyellick/plob/chaincode${code}
 

2. *peer logs*

After 5 minutes of failure following was reported in peer logs:
{code:java}

2018-02-06 21:49:42.275 UTC [endorser] callChaincode -> DEBU 474 [com.acme.blockchain.jdoe.channel1][e5437651] Exit
2018-02-06 21:49:42.275 UTC [endorser] simulateProposal -> ERRO 475 [com.acme.blockchain.jdoe.channel1][e5437651] failed to invoke chaincode path:""github.com/hyperledger/fabric-release/examples/chaincode/go/hyperledger-fabric-alpha2-challenge/jyellick/plob/chaincode"" name:""example02_vendor"" version:""1.0"" , error: timeout expired while starting chaincode example02_vendor:1.0(networkid:ee28cd0a0b8511e8837b0800277dd479,peerid:vp0,tx:e54376518a555732a11141d1b89033c67afc32296251cb0e477fe6f753047d6b)
github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).launchAndWaitForRegister
/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:567
github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).Launch
/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:729
github.com/hyperledger/fabric/core/chaincode.Execute
/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/exectransaction.go:45
github.com/hyperledger/fabric/core/chaincode.ExecuteChaincode
/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincodeexec.go:85
github.com/hyperledger/fabric/core/endorser.(*SupportImpl).Execute
/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/support.go:93
github.com/hyperledger/fabric/core/endorser.(*Endorser).callChaincode
/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:123
github.com/hyperledger/fabric/core/endorser.(*Endorser).simulateProposal
/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:256
github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal
/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:458
github.com/hyperledger/fabric/core/handlers/auth/filter.(*expirationCheckFilter).ProcessProposal
/opt/gopath/src/github.com/hyperledger/fabric/core/handlers/auth/filter/expiration.go:61
github.com/hyperledger/fabric/core/handlers/auth/filter.(*filter).ProcessProposal
/opt/gopath/src/github.com/hyperledger/fabric/core/handlers/auth/filter/filter.go:31
github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler
/opt/gopath/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:112
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:781
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:981
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1
/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:551
runtime.goexit
/opt/go/src/runtime/asm_amd64.s:2337
error executing chaincode
{code}
*Expected Result:*

 

When step 7 above fails error messages reported in peer log are not indicating about the chaincode query failure as being related to difference in shim version after upgrade of fabric from step 5 . 

Can the user be notified that error is occurring because of difference in shim version?",,,,,,,,,,,,,,,,,,,,06/Feb/18 10:32 PM;Nishi;peer0_chaincodeshimvendoring_logs;https://jira.hyperledger.org/secure/attachment/14550/peer0_chaincodeshimvendoring_logs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i023xx:,,,,,,,,jyellick,Nishi,sanchezl,scottz,,,,,,,master,,,true,"07/Feb/18 6:54 PM;jyellick;From a chaincode perspective, this error message is originating from the chaincode shim.  So, in order to fix the error message to discuss the underlying problem (an outdated shim) would require an update to the shim (thus solving the problem).

From a peer perspective, I also don't think the error message can be made more specific.  Essentially, the peer expects for the chaincode container to connect, but it is detecting that the container has not.  From the peer's perspective this could be because there is a bug in the chaincode which made it crash, or there could be a networking error between the chaincode and peer, a shim version mismatch, or probably some other scenarios which I am forgetting, so, I don't think that it's possible to make this error message more specific, as it would lead the user to a false cause when the shim connection problem has a different source.

I would propose that we change this to a doc defect and be sure to put these exact log strings in the upgrade docs so that users may easily search for them.",08/Feb/18 2:19 PM;scottz;The chaincode container says it is a bad TLS certificate. And that is NOT the problem. The message is misleading. So let's fix the chaincode example02 (or whatever examples we are testing). And yes we should document the possible cause (mismatch shim version) for that error message in the cc container.,"10/Feb/18 9:03 PM;sanchezl;There is no detection that can happen at the peer level against a running chaincode container that cannot even connects to the peer.
{quote}The chaincode container says it is a bad TLS certificate. And that is NOT the problem.
{quote}
That is exactly the problem, and the reason why they shim needs to be updated.

I can add some more text to the [Securing Communication With Transport Layer Security (TLS)|http://hyperledger-fabric.readthedocs.io/en/latest/enable_tls.html] document topic, which already mentions the {{remote error: tls: bad certificate}} message in its debugging section.

 ",13/Feb/18 2:58 PM;Clayton Sims;So what is the next step here?  Make this a doc defect and have Luis update doc? [~sanchezl],13/Feb/18 6:25 PM;sanchezl;There is a doc change set under review at https://gerrit.hyperledger.org/r/c/17763/.,,,,,,,,,,,,,,,,,,,
[Upgrade] v1.1 Peer logs doesn't show the failure attempts from chaincode container which still using v1.0 chaincode image,FAB-8088,27463,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,suryalnvs,suryalnvs,06/Feb/18 5:15 PM,10/Feb/18 9:20 PM,26/Apr/18 6:50 AM,10/Feb/18 9:20 PM,,,,,,,v1.1,,,fabric-endorser,fabric-peer,,,0,serviceability,,,,,,,,"During upgrade of the peers, if chaincode container images on v1.0 are not deleted, when we send a query or invoke, peer tries to launch the chaincode container using the existing chaincode container image which does not have the mutual tls certificate, chaincode container shows
{code:java}
docker logs -f dev-peer0.org1.example.com-mycc-1.0
2018-02-06 15:44:26.739 UTC [shim] userChaincodeStreamGetter -> ERRO 001 Error trying to connect to local peer: remote error: tls: bad certificate
Error starting Simple chaincode: Error trying to connect to local peer: remote error: tls: bad certificate
{code}
But peer doesn't show any handshake failures (similar to handshake failures errors we see between peer and orderer when there is any tls issue) or attempts from chaincode container to communicate. A timeout happens in launching the chaincode container and removes chaincode container instance by which we may miss what is happening underlying unless and until we do a new query. At this stage, peer just shows chaincode container creation timeout.

Peer log shows as below
{code:java}
2018-02-06 15:44:26.244 UTC [container] lockContainer -> DEBU 37e waiting for container(dev-peer0.org1.example.com-mycc-1.0) lock
2018-02-06 15:44:26.244 UTC [container] lockContainer -> DEBU 37f got container (dev-peer0.org1.example.com-mycc-1.0) lock
2018-02-06 15:44:26.244 UTC [dockercontroller] Start -> DEBU 380 Cleanup container dev-peer0.org1.example.com-mycc-1.0
2018-02-06 15:44:26.245 UTC [dockercontroller] stopInternal -> DEBU 381 Stop container dev-peer0.org1.example.com-mycc-1.0(Container not running: dev-peer0.org1.example.com-mycc-1.0)
2018-02-06 15:44:26.245 UTC [dockercontroller] stopInternal -> DEBU 382 Kill container dev-peer0.org1.example.com-mycc-1.0 (API error (409): {""message"":""Cannot kill container: dev-peer0.org1.example.com-mycc-1.0: Container 1caa993e4b25ac57af0367eef042051be133ff0dc9ebac0a5b8f00b1e406cd93 is not running""}
)
2018-02-06 15:44:26.255 UTC [dockercontroller] stopInternal -> DEBU 383 Removed container dev-peer0.org1.example.com-mycc-1.0
2018-02-06 15:44:26.255 UTC [dockercontroller] Start -> DEBU 384 Start container dev-peer0.org1.example.com-mycc-1.0
2018-02-06 15:44:26.255 UTC [dockercontroller] getDockerHostConfig -> DEBU 385 docker container hostconfig NetworkMode: e2ecli_default
2018-02-06 15:44:26.256 UTC [dockercontroller] createContainer -> DEBU 386 Create container: dev-peer0.org1.example.com-mycc-1.0
2018-02-06 15:44:26.308 UTC [dockercontroller] createContainer -> DEBU 387 Created container: dev-peer0.org1.example.com-mycc-1.0-384f11f484b9302df90b453200cfb25174305fce8f53f4e94d45ee3b6cab0ce9
2018-02-06 15:44:26.713 UTC [dockercontroller] Start -> DEBU 388 Started container dev-peer0.org1.example.com-mycc-1.0
2018-02-06 15:44:26.713 UTC [container] unlockContainer -> DEBU 389 container lock deleted(dev-peer0.org1.example.com-mycc-1.0)
2018-02-06 15:49:26.243 UTC [chaincode] launchAndWaitForRegister -> DEBU 38b stopping due to error while launching: timeout expired while starting chaincode mycc:1.0(networkid:dev,peerid:peer0.org1.example.com,tx:77e0f51121dc9a63277381c376961f151fa2671993cba4c8d56aa06435ea41bb)
github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).launchAndWaitForRegister
    /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:567
github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).Launch
    /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:729
github.com/hyperledger/fabric/core/chaincode.Execute
    /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/exectransaction.go:45
github.com/hyperledger/fabric/core/chaincode.ExecuteChaincode
    /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincodeexec.go:85
github.com/hyperledger/fabric/core/endorser.(*SupportImpl).Execute
    /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/support.go:93
github.com/hyperledger/fabric/core/endorser.(*Endorser).callChaincode
    /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:123
github.com/hyperledger/fabric/core/endorser.(*Endorser).simulateProposal
    /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:256
github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal
    /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:458
github.com/hyperledger/fabric/core/handlers/auth/filter.(*expirationCheckFilter).ProcessProposal
    /opt/gopath/src/github.com/hyperledger/fabric/core/handlers/auth/filter/expiration.go:61
github.com/hyperledger/fabric/core/handlers/auth/filter.(*filter).ProcessProposal
    /opt/gopath/src/github.com/hyperledger/fabric/core/handlers/auth/filter/filter.go:31
github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler
    /opt/gopath/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:112
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC
    /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:781
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream
    /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:981
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1
    /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:551
runtime.goexit
    /opt/go/src/runtime/asm_amd64.s:2337
2018-02-06 15:49:26.243 UTC [container] lockContainer -> DEBU 38c waiting for container(dev-peer0.org1.example.com-mycc-1.0) lock
2018-02-06 15:49:26.243 UTC [container] lockContainer -> DEBU 38d got container (dev-peer0.org1.example.com-mycc-1.0) lock
2018-02-06 15:49:26.245 UTC [dockercontroller] stopInternal -> DEBU 38e Stop container dev-peer0.org1.example.com-mycc-1.0(Container not running: dev-peer0.org1.example.com-mycc-1.0)
2018-02-06 15:49:26.245 UTC [dockercontroller] stopInternal -> DEBU 38f Kill container dev-peer0.org1.example.com-mycc-1.0 (API error (409): {""message"":""Cannot kill container: dev-peer0.org1.example.com-mycc-1.0: Container c47f62a1f3f0c0bea1039cd8cfd5743f61a7fd2e5ede1ebbf6d9d181bf193fdb is not running""}
)
2018-02-06 15:49:26.254 UTC [dockercontroller] stopInternal -> DEBU 390 Removed container dev-peer0.org1.example.com-mycc-1.0
2018-02-06 15:49:26.254 UTC [container] unlockContainer -> DEBU 391 container lock deleted(dev-peer0.org1.example.com-mycc-1.0)
2018-02-06 15:49:26.254 UTC [chaincode] func1 -> DEBU 392 chaincode mycc:1.0 launch seq completed
2018-02-06 15:49:26.254 UTC [chaincode] Launch -> ERRO 393 launchAndWaitForRegister failed: timeout expired while starting chaincode mycc:1.0(networkid:dev,peerid:peer0.org1.example.com,tx:77e0f51121dc9a63277381c376961f151fa2671993cba4c8d56aa06435ea41bb)
github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).launchAndWaitForRegister
    /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:567
github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).Launch
    /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:729
github.com/hyperledger/fabric/core/chaincode.Execute
    /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/exectransaction.go:45
github.com/hyperledger/fabric/core/chaincode.ExecuteChaincode
    /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincodeexec.go:85
github.com/hyperledger/fabric/core/endorser.(*SupportImpl).Execute
    /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/support.go:93
github.com/hyperledger/fabric/core/endorser.(*Endorser).callChaincode
    /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:123
github.com/hyperledger/fabric/core/endorser.(*Endorser).simulateProposal
    /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:256
github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal
    /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:458
github.com/hyperledger/fabric/core/handlers/auth/filter.(*expirationCheckFilter).ProcessProposal
    /opt/gopath/src/github.com/hyperledger/fabric/core/handlers/auth/filter/expiration.go:61
github.com/hyperledger/fabric/core/handlers/auth/filter.(*filter).ProcessProposal
    /opt/gopath/src/github.com/hyperledger/fabric/core/handlers/auth/filter/filter.go:31
github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler
    /opt/gopath/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:112
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC
    /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:781
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream
    /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:981
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1
    /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:551
runtime.goexit
    /opt/go/src/runtime/asm_amd64.s:2337

{code}
*Expected Result:* Need some sort of message showing the attempts from chaincode container.

 

 

 ",,,,,,,,,,,,,,,,FAB-8091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i023x9:,,,,,,,,sanchezl,suryalnvs,,,,,,,,,,,,,10/Feb/18 9:20 PM;sanchezl;Closing as a duplicate of FAB-8091.,,,,,,,,,,,,,,,,,,,,,,,
Node test references private repo,FAB-8087,27462,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,06/Feb/18 4:53 PM,07/Feb/18 8:17 AM,26/Apr/18 6:50 AM,07/Feb/18 8:17 AM,,,,,,,v1.1,,,fabric-sdk-node,,,,0,,,,,,,,,"There is a link in the node test code to a private repository which is a clone of fabric, this should be removed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i023x1:,,,,,,,,jyellick,,,,,,,,,,master,,,true,06/Feb/18 5:07 PM;jyellick;In review via: https://gerrit.hyperledger.org/r/c/17591/,,,,,,,,,,,,,,,,,,,,,,,
fabric wiki link broken,FAB-8086,27461,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,joe-alewine,ChristopherFerris,ChristopherFerris,06/Feb/18 4:52 PM,07/Feb/18 4:55 AM,26/Apr/18 6:50 AM,07/Feb/18 4:55 AM,v1.1.0-alpha,,,,,,,,,fabric-docs,,,,0,,,,,,,,,the link to the fabric wiki is broken [https://wiki.hyperledger.org/projects/fabric.md|https://wiki.hyperledger.org/projects/fabric.md#history] should be https://wiki.hyperledger.org/projects/fabric,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i023wt:,,,,,,,,ChristopherFerris,joe-alewine,,,,,,,,,master,,,true,06/Feb/18 6:03 PM;joe-alewine;Where is the .md link showing up?,,,,,,,,,,,,,,,,,,,,,,,
PTE does not execute if nRequest is 0,FAB-8082,27454,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,dongming,dongming,dongming,06/Feb/18 3:05 PM,09/Feb/18 2:22 PM,26/Apr/18 6:50 AM,09/Feb/18 2:22 PM,,,,,,,,,,fabric-quality,,,,0,,,,,,,,,PTE will not execute when nRequest is 0.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,0|i023vh:,,,,,,,,dongming,,,,,,,,,,master,,,true,08/Feb/18 3:04 PM;dongming;https://gerrit.hyperledger.org/r/#/c/17695/,,,,,,,,,,,,,,,,,,,,,,,
[Upgrade] logs doesn't indicate from which config field is causing the panic while validating the config block on the v1.0 peer,FAB-8080,27452,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,suryalnvs,suryalnvs,06/Feb/18 3:03 PM,24/Feb/18 7:05 PM,26/Apr/18 6:50 AM,24/Feb/18 7:05 PM,,,,,,,v1.1,,,fabric-docs,,,,0,serviceability,Serviceability,,,,,,,"When upgrading the fabric components from v1.0 to v1.1, upgraded orderers and peers except one peer, then enabled v1.1 capabilites results the old peer crash. Here is the log of the crashed peer
{code:java}
[35m2018-02-05 22:19:17.730 UTC [txvalidator] Validate -> CRIT 674^[[0m Error validating config which passed initial validity checks: ConfigEnvelope LastUpdate did not produce the supplied config result
^[[36m2018-02-05 22:19:17.731 UTC [txvalidator] Validate -> DEBU 675^[[0m END Block Validation
^[[31m2018-02-05 22:19:17.731 UTC [gossip/state] commitBlock -> ERRO 676^[[0m Got error while committing(Error validating config which passed initial validity checks: ConfigEnvelope LastUpdate did not produce the supplied config result)
^[[35m2018-02-05 22:19:17.731 UTC [gossip/state] deliverPayloads -> CRIT 677^[[0m Cannot commit block to the ledger due to Error validating config which passed initial validity checks: ConfigEnvelope LastUpdate did not produce the supplied config result
panic: Cannot commit block to the ledger due to Error validating config which passed initial validity checks: ConfigEnvelope LastUpdate did not produce the supplied config result

goroutine 227 [running]:
panic(0xc64f00, 0xc421b53aa0)
        /opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panicf(0xc4201fb2f0, 0xdcc9f3, 0x2b, 0xc421b539f0, 0x1, 0x1)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:194 +0x127
github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads(0xc421bceb40)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:449 +0x54d
created by github.com/hyperledger/fabric/gossip/state.NewGossipStateProvider
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:228 +0x7d9

{code}
*The logs doesn't indicate from which config field is causing the panic while validating the block.* 

 

Expected Result: The logs should indicate which config field is causing the panic after enabling capabilities in v1.1",,,,,,,,,,,,,,,,,FAB-8213,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i023v1:,,,,,,,,bmos299,denyeart,jyellick,scottz,suryalnvs,yacovm,,,,,,,,,07/Feb/18 5:30 PM;Clayton Sims;Yacov can you help assess. ,"07/Feb/18 5:54 PM;yacovm;Yes, my assessment is that this is related to the [configtx|https://github.com/hyperledger/fabric/blob/0631ccd2b1e30f56088dd3905a78bfb73a93ed51/common/configtx/manager.go#L238] framework.

[~jyellick] ^ ","07/Feb/18 6:51 PM;jyellick;Correct.  This is related to the configtx framework.

When the capabilities framework is enabled, the way the new config is computed changes.  This means that the v1.0 peer is rejecting the update prior to getting to the point of the unrecognized key.  Since this is already code out in v1.0.x, I'm not sure that there is much to be done about it.

I would propose that this be treated as a doc defect.","07/Feb/18 7:17 PM;yacovm;I agree with your analysis, Jason. ","07/Feb/18 11:27 PM;scottz;We should still fix it in code, so the log is clearer when this happens in *future* upgrades. And I suggest Surya create another bug/improvement to ALSO add something to the doc for upgrading to v1.1.",09/Feb/18 6:27 PM;Clayton Sims;I think [~jyellick] already has that in the newer code for going forward.   [~scottz]  or [~suryalnvs]  I assume you will open the doc or better yet submit the doc change yourself. ,"11/Feb/18 8:05 PM;scottz;Not quite, [~Clayton Sims].  Jason merely stated that since the v1.0 code is out in the field already, we cannot change it. The traceback and log we observed is in the v1.0 code. OK, I understand.  However, the point is that it says nothing about the peer not yet being upgraded, which is necessary before the peer can even handle the config update - and also says nothing about the particular config update ""v1_1"" which is causing the peer to intentionally crash. I realize we cannot change the error response or the traceback or the code logic in v1.0 software (unless we wanted to do that in another v1.0.8? release and force people to upgrade to that before proceeding towards v1.1 - which is NOT something I would recommend for merely this reason). Thus, we get to the alternative of capturing that panic log in the documentation and explain to the operators that the peer might not yet be upgraded and cannot handle the v1_1 capabilities update. [~suryalnvs] can create a bug for enhancing the doc for that.

Of course, [~jyellick] can confirm if my understanding is correct.

My suggestion was (in addition to the doc enhancement) to ensure this made sense IN THE v1.1 CODE and logs, so it would be accurate and helpful in FUTURE upgrades from v1.1 and up. Would it be clear, between the error logs and the panic traceback, that the panic occurs because we are trying to enable capability v1_2 while the peer binary is still on v1.1? It does not appear so, unless the v1.1 code adds that information to the CRIT log (because what we observed does NOT specify the config field that the user is attempting to change, which is causing the panic). That is the other point of my request. This should be made very obvious. 

 ","12/Feb/18 5:05 AM;jyellick;{quote}
Not quite, Clayton Sims.  Jason merely stated that since the v1.0 code is out in the field already, we cannot change it. The traceback and log we observed is in the v1.0 code. OK, I understand.  However, the point is that it says nothing about the peer not yet being upgraded, which is necessary before the peer can even handle the config update - and also says nothing about the particular config update ""v1_1"" which is causing the peer to intentionally crash. I realize we cannot change the error response or the traceback or the code logic in v1.0 software (unless we wanted to do that in another v1.0.8? release and force people to upgrade to that before proceeding towards v1.1 - which is NOT something I would recommend for merely this reason). Thus, we get to the alternative of capturing that panic log in the documentation and explain to the operators that the peer might not yet be upgraded and cannot handle the v1_1 capabilities update. Naga Surya Lanka can create a bug for enhancing the doc for that.
Of course, Jason Yellick can confirm if my understanding is correct.
{quote}

Yes, in order to make this log message more descriptive, we would need to patch v1.0.x to be aware of, and to output a sensible log message for capabilities.

{quote}
My suggestion was (in addition to the doc enhancement) to ensure this made sense IN THE v1.1 CODE and logs, so it would be accurate and helpful in FUTURE upgrades from v1.1 and up. Would it be clear, between the error logs and the panic traceback, that the panic occurs because we are trying to enable capability v1_2 while the peer binary is still on v1.1? It does not appear so, unless the v1.1 code adds that information to the CRIT log (because what we observed does NOT specify the config field that the user is attempting to change, which is causing the panic). That is the other point of my request. This should be made very obvious. 
{quote}

This is already covered in the new code.  If you are curious, you may even test this today.  Simply define a new capability, say, {{V1_2}} or... {{Crazy_Peer_Crasher_7}} which the peer does not support.  Then, in the peer log, you will see a panic, but with an accompanying descriptive log message:

https://github.com/hyperledger/fabric/blob/master/core/peer/peer.go#L130-L136
https://github.com/hyperledger/fabric/blob/master/common/capabilities/capabilities.go#L50

So, I would expect that the log should contain a panic like:

{noformat}
Panic: [channel foo] incompatible Application capability V1_2 is required but not supported
{noformat}
",13/Feb/18 6:21 PM;Clayton Sims;This now goes to a doc defect.  ,"20/Feb/18 8:18 PM;denyeart;[~jyellick] Are you intending to document something for this one, and for FAB-8213?","24/Feb/18 3:50 PM;jyellick;Yes, will make sure that this gets into the doc, but, we need the doc to exist first.",24/Feb/18 7:05 PM;jyellick;Verified this is captured in the upgrade doc.,,,,,,,,,,,,
Peer is not able to re-establish connection with other available orderer ,FAB-8075,27436,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,rhegde,rhegde,05/Feb/18 9:39 PM,18/Feb/18 11:48 AM,26/Apr/18 6:50 AM,07/Feb/18 2:36 PM,,,,,,,v1.0.6,v1.1,,fabric-peer,,,,0,,,,,,,,,"Fabric Release v.1.0.4
Kafka Consensus Setup with 3 Orderer, 4 Kafka and 3 ZK.

steps to reproduce
 # During boot-up, peer connects successfully to one of the available orderer say ord02. Here ord01 and ord03 is down.

{code:java}
2018-02-05 21:41:21.060 CET [eventhub_producer] Chat -> ERRO 033 error during Chat, stopping handler: rpc error: code = Canceled desc = context canceled
2018-02-05 21:41:23.053 CET [kvledger] Commit -> INFO 034 Channel [afb1jhb-anz2mel]: Created block [4038] with 2 transaction(s)
2018-02-05 21:41:25.857 CET [kvledger] Commit -> INFO 035 Channel [afb1jhb-anz2mel]: Created block [4039] with 1 transaction(s)
2018-02-05 21:43:34.537 CET [ConnProducer] NewConnection -> ERRO 036 Failed connecting to ord03.clsorder.cit.clsnet:7050 , error: context deadline exceeded
2018-02-05 21:45:50.242 CET [eventhub_producer] Chat -> ERRO 037 error during Chat, stopping handler: rpc error: code = Canceled desc = context canceled
2018-02-05 21:45:50.242 CET [eventhub_producer] Chat -> ERRO 038 error during Chat, stopping handler: rpc error: code = Canceled desc = context canceled
2018-02-05 21:45:50.242 CET [eventhub_producer] Chat -> ERRO 039 error during Chat, stopping handler: rpc error: code = Canceled desc = context canceled
2018-02-05 21:45:50.242 CET [eventhub_producer] Chat -> ERRO 03a error during Chat, stopping handler: rpc error: code = Canceled desc = context canceled
2018-02-05 21:45:50.242 CET [eventhub_producer] Chat -> ERRO 03b error during Chat, stopping handler: rpc error: code = Canceled desc = context canceled
2018-02-05 21:45:50.242 CET [eventhub_producer] Chat -> ERRO 03c error during Chat, stopping handler: rpc error: code = Canceled desc = context canceled{code}
{code:java}
[clsnet@dusd1devrhap065 ~]$ docker exec -it 1ea7fa53abfa bash
root@peer01:/opt/gopath/src/github.com/hyperledger/fabric/peer# netstat -a
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 127.0.0.11:45411        *:*                     LISTEN
tcp        0      0 peer01.afb1jhb1.c:59324 172.16.212.18:7050      ESTABLISHED
tcp6       0      0 [::]:7051               [::]:*                  LISTEN
tcp6       0      0 [::]:7053               [::]:*                  LISTEN
tcp6       0      0 peer01.afb1jhb1.ci:7051 dev-peer01.afb1jh:46346 ESTABLISHED
tcp6       0      0 peer01.afb1jhb1.ci:7051 dev-peer01.afb1jh:33554 ESTABLISHED
udp        0      0 127.0.0.11:42642        *:*
Active UNIX domain sockets (servers and established)
Proto RefCnt Flags       Type       State         I-Node   Path{code}
   2.  Don't perform any ledger transaction for say >15mins
{code:java}
[clsnet@dusd1devrhap065 ~]$ date
Mon Feb  5 22:04:45 CET 2018{code}
3. Bring up the ord01

4. Bring down the ord02
{code:java}
2018-02-05 21:43:34.537 CET [ConnProducer] NewConnection -> ERRO 036 Failed connecting to ord03.clsorder.cit.clsnet:7050 , error: context deadline exceeded
2018-02-05 21:45:50.242 CET [eventhub_producer] Chat -> ERRO 037 error during Chat, stopping handler: rpc error: code = Canceled desc = context canceled
2018-02-05 21:45:50.242 CET [eventhub_producer] Chat -> ERRO 038 error during Chat, stopping handler: rpc error: code = Canceled desc = context canceled
2018-02-05 21:45:50.242 CET [eventhub_producer] Chat -> ERRO 039 error during Chat, stopping handler: rpc error: code = Canceled desc = context canceled
2018-02-05 21:45:50.242 CET [eventhub_producer] Chat -> ERRO 03a error during Chat, stopping handler: rpc error: code = Canceled desc = context canceled
2018-02-05 21:45:50.242 CET [eventhub_producer] Chat -> ERRO 03b error during Chat, stopping handler: rpc error: code = Canceled desc = context canceled
2018-02-05 21:45:50.242 CET [eventhub_producer] Chat -> ERRO 03c error during Chat, stopping handler: rpc error: code = Canceled desc = context canceled
2018-02-05 22:01:34.807 CET [eventhub_producer] Chat -> ERRO 03d error during Chat, stopping handler: rpc error: code = Canceled desc = context canceled
2018-02-05 22:18:14.256 CET [eventhub_producer] Chat -> ERRO 03e error during Chat, stopping handler: rpc error: code = Canceled desc = context canceled
2018-02-05 22:18:14.256 CET [eventhub_producer] Chat -> ERRO 040 error during Chat, stopping handler: rpc error: code = Canceled desc = context canceled
2018-02-05 22:18:14.256 CET [eventhub_producer] Chat -> ERRO 041 error during Chat, stopping handler: rpc error: code = Canceled desc = context canceled{code}
5. Peer looses connection with ord02 however does not connect to the ord01.
{code:java}
root@peer01:/opt/gopath/src/github.com/hyperledger/fabric/peer# netstat -a
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 127.0.0.11:45411        *:*                     LISTEN
tcp6       0      0 [::]:7051               [::]:*                  LISTEN
tcp6       0      0 [::]:7053               [::]:*                  LISTEN
tcp6       0      0 peer01.afb1jhb1.ci:7051 fd9ae51b7998.clsn:46346 ESTABLISHED
tcp6       0      0 peer01.afb1jhb1.ci:7051 dev-peer01.afb1jh:33554 ESTABLISHED
udp        0      0 127.0.0.11:42642        *:*
Active UNIX domain sockets (servers and established)
Proto RefCnt Flags       Type       State         I-Node   Path{code}
6. Peer was then restarted and it was able to establish connection with orderer.
{code:java}
[clsnet@dusd1devrhap065 ~]$ docker  ps | grep 1ea7fa53abfa
1ea7fa53abfa        dusd1devrhap061.dev.local/clsnet/fabric-peer:1.0.4                                                                  ""/docker-entrypoin...""   About an hour ago   Up About an hour                                     cit23_peer01_afb1jhb1_cit_clsnet.1.fpqb5kay1k4qjq8n7ops690op
[clsnet@dusd1devrhap065 ~]$ date
Mon Feb  5 22:28:54 CET 2018
[clsnet@dusd1devrhap065 ~]$ docker  ps | grep 1ea7fa53abfa^C
[clsnet@dusd1devrhap065 ~]$ docker exec -it 1ea7fa53abfa bash
root@peer01:/opt/gopath/src/github.com/hyperledger/fabric/peer# netstat -a
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 127.0.0.11:45411        *:*                     LISTEN
tcp6       0      0 [::]:7051               [::]:*                  LISTEN
tcp6       0      0 [::]:7053               [::]:*                  LISTEN
tcp6       0      0 peer01.afb1jhb1.ci:7051 fd9ae51b7998.clsn:46346 ESTABLISHED
tcp6       0      0 peer01.afb1jhb1.ci:7051 dev-peer01.afb1jh:33554 ESTABLISHED
udp        0      0 127.0.0.11:42642        *:*
Active UNIX domain sockets (servers and established)
Proto RefCnt Flags       Type       State         I-Node   Path
root@peer01:/opt/gopath/src/github.com/hyperledger/fabric/peer# exit
exit
[clsnet@dusd1devrhap065 ~]$ docker ^C
[clsnet@dusd1devrhap065 ~]$ docker stop 1ea7fa53abfa
1ea7fa53abfa
[clsnet@dusd1devrhap065 ~]$ date
Mon Feb  5 22:29:37 CET 2018
[clsnet@dusd1devrhap065 ~]$ docker  ps | grep peer01_afb1jhb1
2a356e49a21a        dusd1devrhap061.dev.local/clsnet/fabric-peer:1.0.4                                                                  ""/docker-entrypoin...""   15 seconds ago      Up 8 seconds                                         cit23_peer01_afb1jhb1_cit_clsnet.1.tof39e9i6wugwe9s8hcex812n
[clsnet@dusd1devrhap065 ~]$ docker exec -it 2a356e49a21a bash
root@peer01:/opt/gopath/src/github.com/hyperledger/fabric/peer# netstat -a
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 127.0.0.11:37998        *:*                     LISTEN
tcp        0      0 peer01.afb1jhb1.c:60718 172.16.212.18:7050      ESTABLISHED
tcp        0      0 peer01.afb1jhb1.c:60714 172.16.212.18:7050      ESTABLISHED
tcp        0      0 peer01.afb1jhb1.c:60728 172.16.212.18:7050      ESTABLISHED
tcp        0      0 peer01.afb1jhb1.c:60988 172.16.212.38:5984      ESTABLISHED
tcp        0      0 peer01.afb1jhb1.c:60716 172.16.212.18:7050      ESTABLISHED
tcp        0      0 peer01.afb1jhb1.c:60726 172.16.212.18:7050      ESTABLISHED
tcp        0      0 peer01.afb1jhb1.c:60990 172.16.212.38:5984      TIME_WAIT
tcp        0      0 peer01.afb1jhb1.c:60978 172.16.212.38:5984      ESTABLISHED
tcp        0      0 peer01.afb1jhb1.c:60720 172.16.212.18:7050      ESTABLISHED
tcp6       0      0 [::]:7051               [::]:*                  LISTEN
tcp6       0      0 [::]:7053               [::]:*                  LISTEN
udp        0      0 127.0.0.11:41007        *:*
Active UNIX domain sockets (servers and established)
Proto RefCnt Flags       Type       State         I-Node   Path
root@peer01:/opt/gopath/src/github.com/hyperledger/fabric/peer# exit
exit
[clsnet@dusd1devrhap065 ~]$ date
Mon Feb  5 22:30:30 CET 2018
[clsnet@dusd1devrhap065 ~]${code}
+
 Expected Result+
 Peer must be able to establish connection with available orderers.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i023rh:,,,,,,,,C0rWin,rhegde,scottz,yacovm,,,,,,,release-1.0,master,,true,06/Feb/18 1:19 PM;C0rWin;Can you please attach peer logs file?,"06/Feb/18 2:17 PM;yacovm;FWIW - this scenario doesn't fail in our unit tests, I just wrote an integration test in the release branch (we're at v1.0.5 but nothing has changed since v1.0.4 in the area) that works.
{code}
func TestDeliverServiceShutdownAndRespawn(t *testing.T) {
	defer ensureNoGoroutineLeak(t)()
	// Scenario: Launch an ordering service node and let the client pull some blocks.
	// Then, start a new instance and shut down the old instance
	osn1 := mocks.NewOrderer(5614, t)

	time.Sleep(time.Second)
	gossipServiceAdapter := &mocks.MockGossipServiceAdapter{GossipBlockDisseminations: make(chan uint64)}

	service, err := NewDeliverService(&Config{
		Endpoints:   []string{""localhost:5614"", ""localhost:5615""},
		Gossip:      gossipServiceAdapter,
		CryptoSvc:   &mockMCS{},
		ABCFactory:  DefaultABCFactory,
		ConnFactory: DefaultConnectionFactory,
	})
	assert.NoError(t, err)

	li := &mocks.MockLedgerInfo{Height: uint64(100)}
	osn1.SetNextExpectedSeek(uint64(100))
	err = service.StartDeliverForChannel(""TEST_CHAINID"", li, func() {})
	assert.NoError(t, err, ""can't start delivery"")

	// Check that delivery service requests blocks in order
	go osn1.SendBlock(uint64(100))
	assertBlockDissemination(100, gossipServiceAdapter.GossipBlockDisseminations, t)
	go osn1.SendBlock(uint64(101))
	assertBlockDissemination(101, gossipServiceAdapter.GossipBlockDisseminations, t)
	atomic.StoreUint64(&li.Height, uint64(102))

	// Now start the new instance
	osn2 := mocks.NewOrderer(5615, t)
	// Now stop the old instance
	osn1.Shutdown()
	// Send some a block from osn2
	osn2.SetNextExpectedSeek(uint64(102))
	go osn2.SendBlock(uint64(102))
	assertBlockDissemination(102, gossipServiceAdapter.GossipBlockDisseminations, t)
	service.Stop()
	osn2.Shutdown()
}
{code}

Could it be a docker related issue that stems from the fact that the second instance was started after the peer and docker's name resolution at the peer wasn't ""refreshed""?

As Artem said - logs would be good, but also can you perhaps get into the peer and try to ping the host of the second orderer (the one that started late)?
","06/Feb/18 5:55 PM;yacovm;actually it seems we have a bug. Actually the UT above fails if I put a sleep just as [~rhegde] implied (to mimic the ""no blocks being sent"") . I'll post here a fix shortly. ",06/Feb/18 7:03 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/17599/,"06/Feb/18 7:11 PM;Clayton Sims;[~bmos299] [~scottz] we should investigate and ensure we cover these in system test

 ","11/Feb/18 7:16 PM;scottz;[~yacovm] I took a quick look at see that you added a test. But I am not an expert and it is not clear if you have indeed written a test for the identified scenario: let the network lay idle for 5 or more minutes without sending any transactions, then restart the orderer to which a peer is connected, then send another transaction and confirm that peer connects to another orderer automatically and receives the block. If you have done this exactly, then I do not feel we need to write a system test (as Clayton suggested). What do you think?","11/Feb/18 8:35 PM;yacovm;The [test I added|https://gerrit.hyperledger.org/r/#/c/17599/3/core/deliverservice/deliveryclient_test.go] checks the following scenario (as written in the comments):
{quote}	// Scenario: Launch an ordering service node and let the client pull some blocks.
	// Then, wait a few seconds, and don't send any blocks.
	// Afterwards - start a new instance and shut down the old instance.{quote}

The ""wait a few seconds"" part is equivalent to the 5 minutes because I manually and artificially reduced the wait time from 5 minutes to a second.
From the code:
{code}
	SetReconnectTotalTimeThreshold(time.Second)
	defer func() {
		SetReconnectTotalTimeThreshold(time.Second * 60 * 5)
	}()
{code}

The exact scenario is the following:
{quote}	// Check that delivery service requests blocks in order from osn1
	// Now wait for a few seconds
	// Now start the new instance (osn2)
	// Now stop the old instance (osn1)
	// Send a block from osn2
	// Ensure it is received{quote}
To your question:
{quote}then restart the orderer to which a peer is connected, then send another transaction and confirm that peer connects to another orderer automatically {quote}
We can't ensure the peer connects to a different node in case the orderer is restarted, because it may select that same one with probability of 50%. That's why I shut down the active and bring up the inactive.

{quote} If you have done this exactly, then I do not feel we need to write a system test (as Clayton suggested). What do you think?{quote}

I guess that depends on your team's priorities. I would prioritize tests for code paths that are not tested in the unit tests over code paths that are. 
My suggestion is to first and foremost focus on security related scenarios that deal with channel reconfiguration and client (none)eligibility of data, since these are the code paths that are not tested in the code from an end-to-end perspective.

However, the ideal is to be able to test from an end-to-end perspective the scenario outlined in this item, as it is not a rare scenario (and I can't but think that we must have seen users complaining about this issue before this, but were too inattentive to their plights). 

An even more comprehensive testing type that is nice to have, is to have some sort of long-term running system (not a PTE test) that does thinks randomly (sends transactions randomly, crashes nodes randomly, etc.) and see how the system behaves, and does it recover. ",,,,,,,,,,,,,,,,,
Misc fixes see description,FAB-8074,27434,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rickr,rickr,rickr,05/Feb/18 6:45 PM,06/Feb/18 7:53 PM,26/Apr/18 6:50 AM,06/Feb/18 7:53 PM,v1.1,,,,,,v1.1,,,fabric-sdk-java,,,,0,,,,,,,,,"Check that proposal requests fcn and chaincode ID are set when sending a proposal.
 Peer event registration set wait time.
 Peer event service registration check for bad status on registration 
 Orderclient check status on connection.
 Provide checks on Integration test on state of channel after running chaincode.

 

https://gerrit.hyperledger.org/r/#/c/17545/ 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i023r1:,,,,,,,,rickr,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
State transfer instance uses 2 logger instances instead of 1,FAB-8066,27419,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,05/Feb/18 1:28 PM,07/Feb/18 4:36 AM,26/Apr/18 6:50 AM,07/Feb/18 4:36 AM,,,,,,,,,,fabric-gossip,,,,0,,,,,,,,,"The state transfer constructor in gossip has a redundant reference to a logger, which is actually the same logger instance as the package-wide logger.

This is confusing, and thus needs to be eliminated. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i023p1:,,,,,,,,yacovm,,,,,,,,,,master,,,true,05/Feb/18 1:30 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/17531/,,,,,,,,,,,,,,,,,,,,,,,
Document: Wrong Function Name,FAB-8055,27407,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ynamiki,ynamiki,ynamiki,05/Feb/18 1:34 AM,09/Feb/18 3:44 AM,26/Apr/18 6:50 AM,09/Feb/18 3:44 AM,v1.1.0-alpha,,,,,,,,,fabric-docs,,,,0,,,,,,,,,"There is no getMarblesByOwner() function in the marbles02 sample.
It should be queryMarblesByOwner().

http://hyperledger-fabric.readthedocs.io/en/master/couchdb_as_state_database.html?highlight=getMarblesByOwner

bq. The marbles02 fabric sample demonstrates use of CouchDB queries from chaincode. It includes a getMarblesByOwner() function that ...
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i023md:,,,,,,,,ynamiki,,,,,,,,,,master,,,true,05/Feb/18 1:43 AM;ynamiki;https://gerrit.hyperledger.org/r/17515,,,,,,,,,,,,,,,,,,,,,,,
CouchDB index warming: potential resource straining due to warming being too frequent (per block),FAB-8044,27389,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,chris.elder,AdnanChoudhury,AdnanChoudhury,02/Feb/18 7:54 PM,09/Feb/18 10:55 PM,26/Apr/18 6:50 AM,09/Feb/18 10:55 PM,,,,,,,v1.1,,,fabric-ledger,,,,0,couchdb,Quality,,,,,,,"CouchDB index warming is executed per block, and as a result it may become an unexpected resource hog in some scenarios, such as when a high rate of updates going on with very small Batchsize.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i023jx:,,,,,,,,AdnanChoudhury,chris.elder,denyeart,,,,,,,,master,,,true,03/Feb/18 7:44 AM;denyeart;Need a config option to warm indexes once every N blocks instead of once every 1 block.,07/Feb/18 9:53 PM;chris.elder;https://gerrit.hyperledger.org/r/#/c/17603/,,,,,,,,,,,,,,,,,,,,,,
fabric-multihost-tests-x86_64 failed due to Timeout.,FAB-8036,27378,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,sambhavdutt,sambhavdutt,02/Feb/18 3:02 PM,16/Feb/18 4:21 PM,26/Apr/18 6:50 AM,16/Feb/18 4:21 PM,,,,,,,v1.1,,,fabric-ci,,,,0,ci_failure,,,,,,,,"fabric-multihost-tests-x86_64 failed as the build timed out,

{code:java}
11:22:43 TASK [Checking the health of PTE container] ************************************
14:35:50 Build timed out (after 240 minutes). Marking the build as failed.
14:35:50 $ ssh-agent -k
14:35:50 unset SSH_AUTH_SOCK;
14:35:50 unset SSH_AGENT_PID;
14:35:50 echo Agent pid 2129 killed;
14:35:50 [ssh-agent] Stopped.
14:35:50 Build was aborted
{code}


*Build Log*
https://jenkins.hyperledger.org/view/multihost/job/fabric-multihost-tests-x86_64/54/console",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i023hp:,,,,,,,,sambhavdutt,,,,,,,,,,,,,,"03/Feb/18 6:07 PM;sambhavdutt;The last build #55 for fabric-multihost-tests-x86_64 fails with the timeout error again at PTE container test,

{code:java}
11:07:39 TASK [Start PTE docker container] **********************************************
11:07:40 changed: [10.30.66.17]
11:07:40 
11:07:40 TASK [Checking the health of PTE container] ************************************
14:35:27 Build timed out (after 240 minutes). Marking the build as failed.
14:35:27 $ ssh-agent -k
14:35:27 unset SSH_AUTH_SOCK;
14:35:27 unset SSH_AGENT_PID;
14:35:27 echo Agent pid 2129 killed;
14:35:27 [ssh-agent] Stopped.
14:35:27 Build was aborted
{code}

*Build Log*
https://jenkins.hyperledger.org/view/multihost/job/fabric-multihost-tests-x86_64/55/console","05/Feb/18 5:17 PM;sambhavdutt;The build #57, #58, #59 for the multihost tests passed successfully. The last build #60 failed as there are some changes needed in script. A [*patch* |https://gerrit.hyperledger.org/r/17583]has been submitted to fix this issue.

*Build Log*
https://jenkins.hyperledger.org/view/multihost/job/fabric-multihost-tests-x86_64/60/console",,,,,,,,,,,,,,,,,,,,,,
Client.getChannel does not implement `throwError` flag as specified in Docs,FAB-8032,27357,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aaroncolaco,aaroncolaco,aaroncolaco,02/Feb/18 8:56 AM,05/Feb/18 4:46 AM,26/Apr/18 6:50 AM,02/Feb/18 9:12 AM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"Docs mention a `throwError` flag (default=true) to specify if an error is to be thrown if channel does not exist in memory. 

`getChannel` in `Client.js` does not accept such flag.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i023dx:,,,,,,,,aaroncolaco,ryjones,,,,,,,,,,,,,"02/Feb/18 8:59 AM;aaroncolaco;I'd like to fix this if you assign it to me.

[~hl-admin] [~mastersingh24] ","02/Feb/18 9:12 AM;aaroncolaco;Oh! I found that it has been fixed in `FAB-7787`

But it hasn't reflected in the [GitHub repo|https://github.com/hyperledger/fabric-sdk-node/blob/release/fabric-client/lib/Client.js#L133]  so I didn't know earlier.

 

Closing this issue now.

[~hl-admin] [~mastersingh24]",02/Feb/18 6:22 PM;ryjones;[~aaroncolaco] The default branch in github is the release branch - if you switch to master FAB-7787 should be reflected,05/Feb/18 4:46 AM;aaroncolaco;[~ryjones] Thanks! :) ,,,,,,,,,,,,,,,,,,,,
Some log messages including format verbs are not properly printed,FAB-8029,27349,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,nnao,nnao,01/Feb/18 9:36 PM,14/Feb/18 6:09 PM,26/Apr/18 6:50 AM,14/Feb/18 6:09 PM,v1.1.0-alpha,,,,,,v1.1,,,fabric-ca,,,,0,quality,,,,,,,,"Some log messages including format verbs are printed by log.Debug, not by log.Debugf.
In lib/attr/attribute.go
{code:java}
log.Debug(""Checking if registrar can register attribute: %s"", requestedAttrName)
{code}
Hence the log messages have garbage “%s” as below:
{code:java}
Checking if registrar can register attribute: %sadmin
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i023cd:,,,,,,,,nnao,,,,,,,,,,master,,,true,02/Feb/18 12:31 AM;nnao;https://gerrit.hyperledger.org/r/#/c/17461/,,,,,,,,,,,,,,,,,,,,,,,
Duplicated loading of environment variables in ACL tests,FAB-8028,27348,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,nnao,nnao,01/Feb/18 9:32 PM,02/Mar/18 5:18 PM,26/Apr/18 6:50 AM,02/Mar/18 5:18 PM,v1.1.0-alpha,,,,,,v1.1,,,fabric-quality,,,,0,quality,,,,,,,,"'acl_happy_path.py' sets environment variables by 'scripts/env.sh' and runs 'start.sh'.
But ‘start.sh’ also reads the same file, which is unnecessary.
 
In 'fabric-test/regression/daily/acl_happy_path.py'
{code:java}
...
fca_sample_directory = '../../fabric-samples/fabric-ca'
...
class ACL(unittest.TestCase):
 
    def test_FAB6490_Using_FCA_With_ACL_Permissioning(self):
...
        output = subprocess.check_output([""./scripts/env.sh && ./start.sh""],
                                         shell=True, cwd=fca_sample_directory)
...
{code}

In ../../fabric-sample/fabric-ca/start.sh 
{code:java} 
#!/bin/bash
...
SDIR=$(dirname ""$0"")
source ${SDIR}/scripts/env.sh
...
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i023c5:,,,,,,,,nnao,,,,,,,,,,master,,,true,02/Feb/18 12:32 AM;nnao;https://gerrit.hyperledger.org/r/#/c/17459/,,,,,,,,,,,,,,,,,,,,,,,
Fix unchecked pointer dereference,FAB-8027,27346,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,01/Feb/18 9:14 PM,01/Feb/18 10:24 PM,26/Apr/18 6:50 AM,01/Feb/18 10:24 PM,,,,,,,v1.1,,,fabric-tools,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i023bx:,,,,,,,,jyellick,,,,,,,,,,master,,,true,01/Feb/18 9:20 PM;jyellick;In review via: https://gerrit.hyperledger.org/r/17445,,,,,,,,,,,,,,,,,,,,,,,
Default timeout is not applied to ChannelClient.InvokeHandler(),FAB-8024,27343,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,divyank,divyank,divyank,01/Feb/18 9:08 PM,05/Feb/18 3:38 PM,26/Apr/18 6:50 AM,05/Feb/18 3:38 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,Test TestInvokeHandler fails periodically revealing this issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:rhwhuxv,,,,,,,,divyank,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
CouchDB Retry count is misleading,FAB-8019,27329,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,chris.elder,chris.elder,chris.elder,01/Feb/18 5:48 PM,13/Feb/18 6:15 PM,26/Apr/18 6:50 AM,13/Feb/18 6:15 PM,,,,,,,v1.1,,,fabric-ledger,,,,0,,,,,,,,,"The CouchDB retry currently assumes the first pass through is actually retry number 1.

It also does not currently allow a setting of zero retries.   This can be confusing to the end user and will prevent some potential use cases that may need to wrap the request handler with zero retry logic.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02385:,,,,,,,,chris.elder,,,,,,,,,,master,,,true,01/Feb/18 6:23 PM;chris.elder;https://gerrit.hyperledger.org/r/#/c/17435/,,,,,,,,,,,,,,,,,,,,,,,
Peer CLI fetch command error assignment issue,FAB-8017,27321,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,wlahti,wlahti,01/Feb/18 5:01 PM,01/Feb/18 7:19 PM,26/Apr/18 6:50 AM,01/Feb/18 7:19 PM,,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,"I found this bug while attempting to fetch the genesis block for a channel with an identity from an organization that is not part of the channel. 

The fetchconfig code creates an initial err variable before the switch statement but accidentally creates another err variable as it creates new variables in some of the case statements. This new err variable is assigned the error value but the initial err variable remains nil. Upon exiting the switch statement, the error has been lost and the proto marshal call proceeds with a nil block. 

Before the fix, the user can see the log message state that the action was forbidden but receives an error message related to marshaling a nil block:
{code:java}
2018-01-31 00:41:47.571 UTC [channelCmd] readBlock -> DEBU 00a Got status: &{FORBIDDEN}

Error: proto: Marshal called with nil{code}
After this fix, the user receives the expected error message: 
{code:java}
2018-01-31 00:50:32.524 UTC [channelCmd] readBlock -> DEBU 00a Got status: &{FORBIDDEN}

Error: can't read the block: &{FORBIDDEN}{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0237p:,,,,,,,,wlahti,,,,,,,,,,master,,,true,01/Feb/18 5:11 PM;wlahti;https://gerrit.hyperledger.org/r/#/c/17423/,,,,,,,,,,,,,,,,,,,,,,,
Document that chaincode can invoke other chaincode on same channel to update state,FAB-8014,27315,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,luomin,denyeart,denyeart,01/Feb/18 4:02 PM,07/Feb/18 12:25 AM,26/Apr/18 6:50 AM,07/Feb/18 12:25 AM,,,,,,,v1.1,,,fabric-docs,,,,0,,,,,,,,,"*From mailing list:*

I created a program on hyperledger-fabric that could change the state of the ledger by invoking a method of one chaincode through another if they are on the same channel. 

However, in your documents it's mentioned that the second chaincode can only access the state of the first. 

I request you to kindly update your documents so that the developers can make full use of the capabilities that hyperledger-fabric provides.

*Doc topic:*

[http://hyperledger-fabric.readthedocs.io/en/v1.1.0-alpha/chaincode4ade.html#what-is-chaincode]

 

*The InvokeChaincode() API doc is correct:*

https://github.com/hyperledger/fabric/blob/release/core/chaincode/shim/interfaces.go#L66-L80

but we need to indicate the same thing in readthedocs.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0236l:,,,,,,,,denyeart,luomin,,,,,,,,,master,,,true,05/Feb/18 3:19 PM;Clayton Sims;min thanks for picking this up.   any outlook on when you could have this fixed?    ,"06/Feb/18 10:04 AM;luomin;Hi, [~Clayton Sims] , thank you for the query. Could you have a check of my current CR [https://gerrit.hyperledger.org/r/#/c/17571/]

 ",,,,,,,,,,,,,,,,,,,,,,
Provide ways to find kafka cluster version in upgrade orderers documentation,FAB-8010,27311,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,suryalnvs,suryalnvs,01/Feb/18 3:18 PM,13/Feb/18 9:01 PM,26/Apr/18 6:50 AM,13/Feb/18 9:01 PM,,,,,,,,,,fabric-docs,,,,0,documentation,quality,,,,,,,"In the documentation for upgrade orderers ([http://hyperledger-fabric.readthedocs.io/en/master/upgrade_to_one_point_one.html#update-orderer-binaries),] while adding the ORDERER_KAFKA_VERSION as environment variable, need to provide ways on how to find the kafka cluster version.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0235p:,,,,,,,,denyeart,sanchezl,suryalnvs,,,,,,,,master,,,true,02/Feb/18 3:47 AM;denyeart;[~sanchezl] Could you help with a doc clarification?,05/Feb/18 3:12 PM;Clayton Sims;luis can you take a look?,"05/Feb/18 7:59 PM;sanchezl;While Kafka has no straightforward way to figure out which version you are using, I don't think that it is our responsibility to document how to figure out your Kafka version. From Fabric's point of view, it's an external dependency. In my view, it's like documenting ""What operating system are you using?"". 

That said, I can see that for users that don't care what version of Kafka they are using and are just simply using our sample Kafka images we can remind them which version of Kafka was in our sample images. I will add a note in the upgrade doc documenting which Kafka version was bundled in 1.0.x sample images. ([https://gerrit.hyperledger.org/r/c/17551/])
----
To actually figure out which Kafka version you are using:
 * Ask your Kafka provider to tell you.
 * Search the Kafka broker's log for {{INFO Kafka version}}.
 * Examine the names of the jars files in Kafka's {{bin}} directory.

 ",,,,,,,,,,,,,,,,,,,,,
Validation against reserved fields in CouchDB JSON required at simulation time,FAB-8006,27301,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,manish-sethi,denyeart,denyeart,01/Feb/18 4:37 AM,14/Feb/18 10:29 PM,26/Apr/18 6:50 AM,14/Feb/18 10:29 PM,,,,,,,v1.1,,,fabric-ledger,,,,0,,,,,,,,,"When doing PutState() with CouchDB state database, need to validate that if the content is JSON, that it does not include at the top level the four reserved fields:

_id

_rev

_deleted

~version

For more info see code review:

[https://gerrit.hyperledger.org/r/#/c/17347/3/core/ledger/kvledger/txmgmt/statedb/statecouchdb/statecouchdb.go]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9ni,,,,,,,,denyeart,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Fix CI,FAB-8005,27300,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,troyronda,troyronda,01/Feb/18 1:29 AM,02/Feb/18 6:31 PM,26/Apr/18 6:50 AM,02/Feb/18 6:31 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"go get is failing on s390 with ""remote origin not found""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0233x:,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"fabric-sdk-go-verify-s390x, fabric-sdk-go-merge-s390x are failing as repository fails to clone.",FAB-8000,27290,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,sambhavdutt,sambhavdutt,31/Jan/18 9:22 PM,05/Feb/18 1:42 PM,26/Apr/18 6:50 AM,05/Feb/18 1:42 PM,,,,,,,,,,fabric-ci,,,,0,ci_failure,,,,,,,,"The fabric-sdk-go-verify-s390x, fabric-sdk-go-merge-s390x are failing as repository fails to clone, and the following errors pop up due to improper data transfer  

17:07:00 [fabric-sdk-go-tests-merge-s390x] $ /bin/bash -eu /tmp/jenkins6935474819872650108.sh
17:07:00 Installing dependencies ...
17:07:00 # cd /w/workspace/fabric-sdk-go-tests-merge-s390x/gopath/src/github.com/axw/gocov; git pull --ff-only
17:07:00 fatal: Not a git repository (or any of the parent directories): .git
17:07:00 package github.com/axw/gocov/...: exit status 128
17:07:00 package github.com/AlekSi/gocov-xml: remote origin not found
17:07:00 package github.com/client9/misspell/cmd/misspell: remote origin not found
17:07:00 package github.com/golang/lint/golint: remote origin not found
17:07:00 package golang.org/x/tools/cmd/goimports: remote origin not found
17:07:00 Installing dep@v0.4.1 to /w/workspace/fabric-sdk-go-tests-merge-s390x/gopath/bin ...
17:07:02 HEAD is now at 37d9ea0 dep: Sharpen `dep prune` warning message
17:07:06 Installing mockgen@v1.0.0 to /w/workspace/fabric-sdk-go-tests-merge-s390x/gopath/bin ...
17:07:07 HEAD is now at 13f3609 Merge pull request #93 from golang/restore_backwards_compatibility
17:07:08 gocov is not installed (go get -u github.com/axw/gocov/...)
17:07:08 gocov-xml is not installed (go get -u github.com/AlekSi/gocov-xml)
17:07:08 misspell is not installed (go get -u github.com/client9/misspell/cmd/misspell)
17:07:08 golint is not installed (go get -u github.com/golang/lint/golint)
17:07:08 goimports is not installed (go get -u golang.org/x/tools/cmd/goimports)
17:07:08 Missing dependency. Aborting. You can fix by installing the tool listed above or running make depend-install.
17:07:08 Makefile:177: recipe for target 'depend' failed
17:07:08 make: *** [depend] Error 1
17:07:08 Build step 'Execute shell' marked build as failure

*Build Log*
https://jenkins.hyperledger.org/view/fabric-sdk-go/job/fabric-sdk-go-tests-merge-s390x/261/console",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0231p:,,,,,,,,rameshthoomu,sambhavdutt,,,,,,,,,,,,,"05/Feb/18 1:42 PM;rameshthoomu;This has been fixed. We have added a cleanup script to delete workspace in all the s390x build nodes. After this, we didn't observe any issues like above. Closing this issue as it is not reproducing now after the fix",,,,,,,,,,,,,,,,,,,,,,,
Moving to getting config block from peers does not work with peers in other organizations,FAB-7994,27284,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rickr,rickr,rickr,31/Jan/18 8:12 PM,14/Feb/18 12:48 AM,26/Apr/18 6:50 AM,11/Feb/18 11:29 PM,v1.1,,,,,,v1.1,,,fabric-sdk-java,,,,0,,,,,,,,,"In -FAB-7702- we changed getting the channels config block from the orderer to the peer.

However this has issues that peers from other organizations which we want to get endorsements from don't seem to allow this.  The getConfigBlock will work for peer's in the same organization.  We either need to revert this for now or provide a means for applications to identify peers that are not part of it's organization.

 

Gerrit: https://gerrit.hyperledger.org/r/#/c/17705/",,,,,,,,,,,,,,,,FAB-8233,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0230l:,,,,,,,,rickr,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Fix instruction to restart cli container in Reconfiguring Your First Network,FAB-7992,27281,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yuki-kon,yuki-kon,yuki-kon,31/Jan/18 7:34 PM,09/Feb/18 7:15 PM,26/Apr/18 6:50 AM,09/Feb/18 7:15 PM,v1.1.0-alpha,,,,,,v1.1,,,fabric-docs,,,,0,,,,,,,,,"In Reconfiguring Your First Network, the document has incorrect instruction about relaunching cli container.

According to the instruction described in fabric/docs/source/channel_update.rst,
``docker start cli`` is executed to relaunch cli container, which is configured in Bring Your First Network.
However, cli container fails to relaunch with the following error messages.

{noformat}

$ docker start cli
$ docker logs cli


/ ___|  |_   _|    / \    |  _ \  |_   _|
\___ \    | |     / _ \   | |_) |   | |
___) |   | |    / ___ \  |  _ <    | |
|____/    |_|   /_/   \_\ |_| \_\   |_|

Build your first network (BYFN) end-to-end test

Channel name : mychannel
Creating channel...
(snip)
!!!!!!!!!!!!!!! Channel creation failed !!!!!!!!!!!!!!!!
========= ERROR !!! FAILED to execute End-2-End Scenario ===========
{noformat}

This error happens because a script building fabric network is called when starting cli container. 
To use cli container for manual work in reconfiguring fabric network, this script should not be executed.
To fix this problem, the script should be commented out in docker-compose-cli.yaml. After that, cli container should be relaunched to reflect this change.
",fabric d7dd2315372eadc4f9b1f6a3f7f734ebc97b9e91,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022zx:,,,,,,,,yuki-kon,,,,,,,,,,master,,,true,31/Jan/18 11:02 PM;yuki-kon;CR is posted here. https://gerrit.hyperledger.org/r/#/c/17399/,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca client [identity|affiliation] list --debug flag inoperable,FAB-7990,27278,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,rennman,rennman,31/Jan/18 7:10 PM,08/Feb/18 3:21 PM,26/Apr/18 6:50 AM,08/Feb/18 3:21 PM,,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"Specifying '–debug | -d' on 
fabric-ca client [identity|affiliation] list 
has no effect.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022z9:,,,,,,,,rennman,skarim,,,,,,,,,master,,,true,01/Feb/18 4:28 PM;skarim;https://gerrit.hyperledger.org/r/#/c/17419/,,,,,,,,,,,,,,,,,,,,,,,
Typo in fabric/docs/source/samples.rst,FAB-7988,27276,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yuki-kon,yuki-kon,yuki-kon,31/Jan/18 6:29 PM,06/Feb/18 5:20 PM,26/Apr/18 6:50 AM,06/Feb/18 5:20 PM,v1.1.0-alpha,,,,,,v1.1,,,fabric-docs,,,,0,,,,,,,,,"Fabric’s version is still 1.1.0-preview in a note of fabric/docs/source/samples.rst.
The version should be updated to 1.1.0-alpha.",fabric d7dd2315372eadc4f9b1f6a3f7f734ebc97b9e91,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022yt:,,,,,,,,yuki-kon,,,,,,,,,,master,,,true,31/Jan/18 11:03 PM;yuki-kon;CR is posted here. https://gerrit.hyperledger.org/r/#/c/17397/,,,,,,,,,,,,,,,,,,,,,,,
TimeWindow default for orderer config is not applied if unset,FAB-7985,27266,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jyellick,jyellick,31/Jan/18 2:39 PM,31/Jan/18 2:41 PM,26/Apr/18 6:50 AM,31/Jan/18 2:41 PM,,,,,,,WON'T FIX,,,fabric-orderer,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022x1:,,,,,,,,jyellick,,,,,,,,,,,,,,31/Jan/18 2:41 PM;jyellick;Looks like this was fixed between the revision I was examining and master when I opened this defect. Not a defect anymore.,,,,,,,,,,,,,,,,,,,,,,,
Fix ChannelService under ClientContext,FAB-7980,27258,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,troyronda,troyronda,troyronda,31/Jan/18 1:46 AM,31/Jan/18 2:14 AM,26/Apr/18 6:50 AM,31/Jan/18 2:14 AM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022tx:,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
CouchDB documentation correction,FAB-7977,27254,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,AdnanChoudhury,AdnanChoudhury,AdnanChoudhury,30/Jan/18 10:33 PM,09/Feb/18 6:54 PM,26/Apr/18 6:50 AM,09/Feb/18 6:54 PM,,,,,,,v1.1,,,fabric-docs,,,,0,,,,,,,,,"a few comments and nits on the Couchdb doc at [http://hyperledger-fabric.readthedocs.io/en/latest/couchdb_as_state_database.html]
1. Period missing after ""with the index definition formatted in JSON following the CouchDB index JSON syntax
2. “Any index in the chaincode’s META-INF/statedb/couchdb/indexes directory will be packaged up and installed with the chaincode on a peer” ---It is not clear what this sentence tries to convey. Does “with” here means “at the same time”? this sentence seems to indicate that the index is installed on a peer (incorrect) which is clarified in a correct way in next sentence.
3. “... the index will automatically be deployed to the peer’s channel state database” more precisely, it is deployed to the peer’s chaincode-channel state database
4. “For CouchDB installations outside of the docker images supplied with Fabric, the local.ini file must be edited….” it’d be helpful to provide the location of local.ini file.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022t9:,,,,,,,,AdnanChoudhury,,,,,,,,,,master,,,true,31/Jan/18 4:34 PM;AdnanChoudhury;https://gerrit.hyperledger.org/r/#/c/17373/,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca client add should defaul to '0' for maxenrollments,FAB-7970,27245,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,rennman,rennman,30/Jan/18 4:24 PM,08/Feb/18 3:22 PM,26/Apr/18 6:50 AM,08/Feb/18 3:22 PM,,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"Currently, the behavior (an cmd-line help) for fabric-ca-client add is to default to '-1' for maxenrollments.  The correct behavior is to default to the server setting, i.e. '0'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022rp:,,,,,,,,rennman,skarim,,,,,,,,,master,,,true,31/Jan/18 7:02 PM;skarim;https://gerrit.hyperledger.org/r/#/c/17377/,,,,,,,,,,,,,,,,,,,,,,,
"CouchDB queries and indexes not consistent with respect to ""data"" envelope",FAB-7969,27244,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,chris.elder,denyeart,denyeart,30/Jan/18 4:04 PM,03/Feb/18 7:41 AM,26/Apr/18 6:50 AM,03/Feb/18 7:41 AM,,,,,,,v1.1,,,fabric-ledger,,,,0,,,,,,,,,"Chaincode data is saved in CouchDB under a JSON ""data"" envelope.

For queries, peer automatically re-writes chaincode query to account for data envelope.

For indexes, chaincode author must specify the data envelop when referencing fields.

Need to make the experience consistent, by removing the ""data"" envelope.  This will fix the usability issue, and also simplify the code, eliminating other possible defects.

This change is only possible in 1.1, since the upgrade from 1.0 to 1.1 will rebuild CouchDB state database using the enhanced 1.1 CouchDB data structure.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022rh:,,,,,,,,chris.elder,denyeart,,,,,,,,,master,,,true,01/Feb/18 4:39 PM;chris.elder;https://gerrit.hyperledger.org/r/#/c/17347/,,,,,,,,,,,,,,,,,,,,,,,
"The ""affiliations"" table by fabric-ca doesn't have a primary key",FAB-7967,27237,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,mrshah-ibm,mrshah-ibm,30/Jan/18 1:15 PM,09/Feb/18 4:07 PM,26/Apr/18 6:50 AM,09/Feb/18 4:07 PM,v1.1.0-alpha,,,,,,,,,fabric-ca,,,,0,,,,,,,,,"The affiliations table created by fabric-ca in mysql db does not have a primary key. Thus group replication for HA mysql db fails.

Following is the error on mysql db:

{{{{2018-01-30T13:01:34.674707Z 41 [ERROR] Plugin group_replication reported: 'Table affiliations does not have any PRIMARY KEY. This is not compatible with Group Replication' 2018-01-30T13:01:34.675379Z 41 [ERROR] Plugin group_replication reported: 'Table affiliations does not have any PRIMARY KEY. This is not compatible with Group Replication' 2018-01-30T13:01:34.675906Z 41 [ERROR] Plugin group_replication reported: 'Table affiliations does not have any PRIMARY KEY. This is not compatible with Group Replication' 2018-01-30T13:01:34.676452Z 41 [ERROR] Plugin group_replication reported: 'Table affiliations does not have any PRIMARY KEY. This is not compatible with Group Replication' 2018-01-30T13:01:34.676962Z 41 [ERROR] Plugin group_replication reported: 'Table affiliations does not have any PRIMARY KEY. This is not compatible with Group Replication'}}}}

 

Because of this issue, the registration/enrollment starts failing on fabric-ca. The error as below:

{{2018/01/30 13:04:28 [DEBUG] Registration of 'orderer0b' failed: Registration of 'orderer0b' to validate: Failed getting affiliation 'org1': : scode: 404, code: 63, msg: Failed to get Affiliation: sql: no rows in result set}}

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022px:,,,,,,,,aambati,mrshah-ibm,,,,,,,,,master,,,true,30/Jan/18 9:26 PM;aambati;https://gerrit.hyperledger.org/r/c/17349/,30/Jan/18 9:48 PM;mrshah-ibm;[https://gerrit.hyperledger.org/r/#/c/17349/] Correcting the link in the comment,,,,,,,,,,,,,,,,,,,,,,
when making kafka image got a 404 not found error,FAB-7966,27235,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,hammerWang,hammerWang,30/Jan/18 10:06 AM,31/Jan/18 4:36 PM,26/Apr/18 6:50 AM,31/Jan/18 4:36 PM,,,,,,,v1.0.0,,,fabric-build,,,,0,kafka,,,,,,,,"""make kafka"" got en error:

curl: (22) The requested URL returned error: 404 Not Found

due to incorrect url path in Dockerfile.in",,,,28800,28800,,0%,28800,28800,,,,,,,FAB-7046,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022ph:,,,,,,,,hammerWang,sanchezl,,,,,,,,,,,,,"31/Jan/18 4:34 PM;sanchezl;[~hammerWang] This should already be fixed. When apache retired version v0.9.0.1, we switched to using an apache archive link to download Kafka in FAB-7046. --",,,,,,,,,,,,,,,,,,,,,,,
Typescript type information is not up to date,FAB-7962,27225,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,shimos,shimos,shimos,30/Jan/18 1:46 AM,17/Mar/18 12:15 AM,26/Apr/18 6:50 AM,03/Feb/18 8:15 AM,v1.1.0-alpha,,,,,,v1.1,,,fabric-sdk-node,,,,0,,,,,,,,,"Several methods and parameters, including ones added recently, are missing in the type information for fabric-sdk-node in TypeScript.

For example, cryptoContent in UserOptions does not allow ""privateKeyObj"", and EventHub does not have ""registerChaincodeEvent"" or ""unregisterChaincodeEvent"" methods etc.
",fabric-sdk-node 34731570af3645a235e50e4023212d35b1da1429,,,,,,,,,,,,,,,,FAB-8942,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022n9:,,,,,,,,shimos,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
fabric upgrade: ChannelApplication capability config update tx passes with incorrect signatures in envelope ,FAB-7961,27224,Bug,Unverified,FAB,Fabric,software,ChristopherFerris,,,Medium,,Nishi,Nishi,Nishi,29/Jan/18 11:10 PM,16/Mar/18 4:46 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-quality,,,,0,,,,,,,,,"Currently config update transactions when adding ChannelApplication capability in v1.1  was tested with following combinations of certs when sending an update transaction envelope :

| Developer | Cert Alias |
|configAdminOrdererOrg0|config-admin-cert|

| configAdminOrdererOrg1 | config-admin-cert |

or 
| configAdminPeerOrg0 | config-admin-cert |
|configAdminPeerOrg1|config-admin-cert|

or
 | peer0Admin | peer-admin-cert |
 | peer2Admin | peer-admin-cert |

or 

a combination any of the two from each one above

 

*Expected Result:*

Config update tx on ChannelApplication capability to be successful only when 

| configAdminPeerOrg0 | config-admin-cert |
|configAdminPeerOrg1|config-admin-cert|

signatures are passed

*Actual Result:*

It passed for all the signatures above.

 

*Sample Piece of Code:*
{code:java}
#######################################################################################################################
#
# orderer config Admin then adds v1.1 capability to /Channel/Application group for channel2
# Channel/Orderer and /Channel capabilities are already defined
#
#####################################################################################################################
Given user ""configAdminOrdererOrg0"" retrieves the latest config update ""latestPeerConfigForCapabilitiesChangeForChannel2"" from orderer ""<orderer0>"" for channel ""com.acme.blockchain.jdoe.channel2""
And user ""configAdminOrdererOrg0"" creates a capabilities config update ""capabilitiesV1.1ConfigUpdateForPeerChannelLevel2"" using config ""latestPeerConfigForCapabilitiesChangeForChannel2"" using channel ID ""com.acme.blockchain.jdoe.channel2"" with mod policy ""Admins"" to add capabilities:
| Group | Capabilities |
| /Channel/Application | V1_1 |
And the user ""configAdminOrdererOrg0"" creates a configUpdateEnvelope ""capabilitiesV1.1ConfigUpdateEnvelopeForPeerChannelLevel2"" using configUpdate ""capabilitiesV1.1ConfigUpdateForPeerChannelLevel2""

And the user ""configAdminOrdererOrg0"" collects signatures for ConfigUpdateEnvelope ""capabilitiesV1.1ConfigUpdateEnvelopeForPeerChannelLevel2"" from developers:
| Developer | Cert Alias |
| peer0Admin | peer-admin-cert |
| peer2Admin | peer-admin-cert |

And the user ""configAdminOrdererOrg0"" creates a ConfigUpdate Tx ""capabilitiesConfigUpdateForPeerTx2ChannelLevel2"" using cert alias ""config-admin-cert"" using signed ConfigUpdateEnvelope ""capabilitiesV1.1ConfigUpdateEnvelopeForPeerChannelLevel2""

And the user ""configAdminOrdererOrg0"" using cert alias ""config-admin-cert"" broadcasts ConfigUpdate Tx ""capabilitiesConfigUpdateForPeerTx2ChannelLevel2"" to orderer ""<orderer0>""

{code}",,,,,,,,,,,,,,,,,,,,30/Jan/18 3:11 PM;Nishi;channel1_channelApplication_configupdate_And_txDetails.tar.gz;https://jira.hyperledger.org/secure/attachment/14517/channel1_channelApplication_configupdate_And_txDetails.tar.gz,30/Jan/18 2:39 PM;Nishi;orderer_logs.tar.gz;https://jira.hyperledger.org/secure/attachment/14515/orderer_logs.tar.gz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022n1:,,,,,,,,jyellick,Nishi,scottz,,,,,,,,,,,,"30/Jan/18 2:25 AM;jyellick;Please post complete orderer logs at debug level.

Considering that this is the same config update validation code that was present in v1.0, I suspect that this is not actually a bug.

If at all possible, please also include the config update transactions as well. ","30/Jan/18 3:17 PM;Nishi;Attached -
 # ""channel1_channelApplication_configupdate_And_txDetails.tar.gz"" - In here you would find the protobuf for config update (block) and config update transaction details.
 # ""orderer_logs.tar.gz"" - Has the all the three orderer logs @ DEBUG level.

 ","30/Jan/18 3:30 PM;jyellick;I do not believe that your testing tool is appropriately capturing the failure case.  Looking at your orderer logs:


{noformat}
orderer0_1.log:2018-01-30 14:28:28.241 UTC [orderer/common/broadcast] Handle -> WARN 911 [channel: db69d3] Rejecting broadcast of config message from 172.18.0.1:41382 because of error: error authorizing update: error validating ReadSet: readset expected key [Group]  /Channel/Orderer at version 0, but got version 1
{noformat}

{noformat}
orderer0_1.log:2018-01-30 14:30:27.139 UTC [orderer/common/broadcast] Handle -> WARN 11a9 [channel: com.acme.blockchain.jdoe.channel1] Rejecting broadcast of config message from 172.18.0.1:41382 because of error: error authorizing update: error validating DeltaSet: policy for [Group]  /Channel/Application not satisfied: Failed to reach implicit threshold of 2 sub-policies, required 2 remaining
{noformat}

{noformat}
orderer0_1.log:2018-01-30 14:30:56.263 UTC [orderer/common/broadcast] Handle -> WARN 15ec [channel: com.acme.blockchain.jdoe.channel2] Rejecting broadcast of config message from 172.18.0.1:41382 because of error: error authorizing update: error validating DeltaSet: policy for [Group]  /Channel/Application not satisfied: Failed to reach implicit threshold of 2 sub-policies, required 2 remaining
{noformat}

This would imply that on three occasions, the config update sent in failed, once because it was malformed, and twice because sufficient peer org config admins did not sign off on the transaction, but according to the description above, they all succeeded.","21/Feb/18 12:03 AM;scottz;[~Nishi] can we look at the logs more closely to see what error response is sent back by the orderer? Maybe you could even run the test and stop after that point, and send in the command again from CLI to see the response directly output to you. Based on the logs Jason pointed out, it looks like we will need to enhance the implementation steps for jeff's upgrade.feature file.",,,,,,,,,,,,,,,,,,,,
InvokeChaincode - application error is handled by the fabric instead of by chaincode,FAB-7959,27218,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,muralisr,muralisr,muralisr,29/Jan/18 8:35 PM,01/Feb/18 12:05 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-endorser,,,,0,,,,,,,,,"When the chaincode calls InvokeChaincode with a non-existing channel, the fabric detects the error and returns to the caller without passing the error back to the chaincode to handle. This is an app level error which should really be handled by the chaincode. 

The Chaincode CRs to remove FSM fix this issue correctly.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022lp:,,,,,,,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
peer not respecting --logging-level parameter,FAB-7957,27215,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,sanchezl,sanchezl,29/Jan/18 7:35 PM,31/Jan/18 7:53 PM,26/Apr/18 6:50 AM,31/Jan/18 7:53 PM,,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,"Starting the peer with {{--logging-level}}
does not seem to override the log level set in {{core.yaml}}. 
For example, starting a peer node like this:
{code}peer node start --logging-level debug
{code}
does not enable debug traces, while starting like this:
{code}CORE_LOGGING_LEVEL=debug peer node start{code}
does start with the expected debug traces enabled.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022l1:,,,,,,,,sanchezl,wlahti,,,,,,,,,master,,,true,29/Jan/18 10:30 PM;wlahti;https://gerrit.hyperledger.org/r/#/c/17317/,,,,,,,,,,,,,,,,,,,,,,,
update homebrew recipe to 1.0.5,FAB-7956,27214,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,29/Jan/18 7:35 PM,07/Feb/18 10:55 AM,26/Apr/18 6:50 AM,07/Feb/18 10:55 AM,v1.0.5,v1.1.0-alpha,,,,,,,,fabric-installers,,,,0,,,,,,,,,"the homebrew recipe should be updated with each release. The following script can produce the necessary text to update [https://github.com/hyperledger/homebrew-fabric/blob/master/Formula/fabric-tools.rb]

 

#!/bin/bash

set -e

VERSION=$\{1:-1.0.5}

URL=""https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/hyperledger-fabric/darwin-amd64-$\{VERSION}/hyperledger-fabric-darwin-amd64-$\{VERSION}.tar.gz""

SHA=`curl -sSL https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/hyperledger-fabric/darwin-amd64-$\{VERSION}/hyperledger-fabric-darwin-amd64-$\{VERSION}.tar.gz | shasum -a 256`

echo 'url ""'$\{URL}'""'

echo 'sha256 ""'$\{SHA:0:64}'""'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022kt:,,,,,,,,ChristopherFerris,,,,,,,,,,master,,,true,29/Jan/18 7:40 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/17303,,,,,,,,,,,,,,,,,,,,,,,
Deliver requests unexpectedly fail when timewindow not set,FAB-7955,27211,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,wlahti,wlahti,29/Jan/18 6:59 PM,30/Jan/18 6:29 PM,26/Apr/18 6:50 AM,30/Jan/18 6:29 PM,,,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-7928,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022k5:,,,,,,,,wlahti,,,,,,,,,,master,,,true,29/Jan/18 9:16 PM;wlahti;https://gerrit.hyperledger.org/r/#/c/17313/,,,,,,,,,,,,,,,,,,,,,,,
Errors not handled for JSON marshaling,FAB-7954,27210,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,chris.elder,denyeart,denyeart,29/Jan/18 6:51 PM,07/Feb/18 10:19 PM,26/Apr/18 6:50 AM,07/Feb/18 10:19 PM,,,,,,,v1.1,,,fabric-ledger,,,,0,,,,,,,,,"Upon code review in statecouchdb.go and couchdb.go, it appears there are occurrences of the following error producing functions without errors captured and handled:

json.Marshal()

json.Unmarhsal()

decoder.Decode()

   e.g. json.NewDecoder(resp.Body).Decode(&dbResponse)  

   e.g. decoder.Decode(&genericMap)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9p,,,,,,,,chris.elder,denyeart,,,,,,,,,master,,,true,01/Feb/18 4:39 PM;chris.elder;https://gerrit.hyperledger.org/r/#/c/17627/,,,,,,,,,,,,,,,,,,,,,,,
Unclear and generic error message,FAB-7952,27208,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,latitiah,latitiah,29/Jan/18 6:43 PM,23/Feb/18 10:00 PM,26/Apr/18 6:50 AM,23/Feb/18 10:00 PM,v1.1,,,,,,v1.1,,,fabric-peer,,,,0,Usability,,,,,,,,"The following error is received for different reasons:
{code}
Failed to deserialize creator identity, err MSP org1.example.com is unknown{code}

For example, when attempting to query on a channel that doesn't exist or a peer has not successfully joined an existing channel - this error is generated.

The error messages either should be clarified as to what the actual error is or documented as to what areas to look at during a debugging process. At the very least, if the desire is to be vague, a more generic message such as ""Unable to communicate on the channel"" should be used instead. I would still highly recommend documenting what areas to look at when receiving this message.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022jx:,,,,,,,,bmos299,latitiah,wlahti,,,,,,,,master,,,true,"07/Feb/18 5:07 PM;wlahti;I think we should keep this error message vague to avoid malicious users scanning for channels. I propose we wrap the error message with ""channel unavailable"" and then add a troubleshooting doc to cover the possible reasons a user would see this error message. ",07/Feb/18 7:38 PM;wlahti;https://gerrit.hyperledger.org/r/c/17633/,"08/Feb/18 5:27 PM;bmos299;Fair enough.  Keeping what we send back to the client as vague as a good thing.   However, what we cut in the peer logs should have the details about the failure. ","12/Feb/18 6:19 PM;wlahti;As my fix is currently coded, the CLI user will receive the following purposefully vague error message while attempting to query for non-existent channel ""mychannel2"":
{code:java}
Error: Error endorsing query: rpc error: code = Unknown desc = channel [mychannel2] unknown on peer, or creator org [Org1MSP] unknown on channel - <nil>{code}

The peer will log the following error message which contains the exact root cause: 
{code:java}
2018-02-12 18:17:17.991 UTC [protoutils] ValidateProposalMessage -> WARN 837 channel [mychannel2]: MSP error: channel doesn't exist{code}","12/Feb/18 7:24 PM;bmos299;[~wlahti] do we really want to say

 
 *desc = channel [mychannel2] unknown on peer*
 
 Wouldn't this clue an attacker in that this channel does not exist?  I really like the peer log details.","12/Feb/18 7:30 PM;wlahti;Note that the entire message is:
{code:java}
desc = channel [mychannel2] unknown on peer, or creator org [Org1MSP] unknown on channel{code}
It doesn't clarify one or the other. Perhaps the comma should be removed from the error message though.","12/Feb/18 7:37 PM;latitiah;Not necessarily - it is also possible that the channel does exist but the peer has not joined the channel or the MSP is wrong for that channel. This could be an issue that ranges from the peer not having access to simply not joining the channel yet. 

That said, it does give the user a hint as to what they should investigate to be sure that the info they have is correct. I thought it was a good middle ground of being vague while giving valid users enough information such that they can troubleshoot effectively.","12/Feb/18 8:13 PM;wlahti;I have updated my CR to make it more obvious that the error message encapsulates an ""OR"" statement:
{code:java}
channel [mychannel2] unknown on peer OR creator org [Org1MSP] unknown on channel{code}","15/Feb/18 3:21 PM;wlahti;There have been a few code reviews now, which I plan to address today.

The new plan is to return a completely generic ""access denied"" message to the end user to ensure that no undesired information is leaked. The peer logs will contain the exact root cause, including additional details that were not available prior to this CR. If there is a trusted relationship between the peer and client (which is obviously true for developers/testers), the timestamp can be used to search the peer log for the exact root cause. 

I will also post a question and answer on Stack Overflow highlighting the new error message, likely causes, and troubleshooting steps. ","15/Feb/18 6:02 PM;wlahti;With my newest update to the CR ([https://gerrit.hyperledger.org/r/c/17633/]),  the CLI user will now receive the following purposefully vague error message while attempting to query for non-existent channel ""mychannel2"":
{code:java}
Error: Error endorsing query: rpc error: code = Unknown desc = access denied: channel [mychannel2] creator org [Org1MSP] - <nil>{code}
The peer will log the following error message which contains the exact root cause: 
{code:java}
2018-02-12 18:17:17.991 UTC [protoutils] ValidateProposalMessage -> WARN 837 channel [mychannel2]: MSP error: channel doesn't exist{code}",,,,,,,,,,,,,,
fabric-sdk-node8-merge-x86_64 failed as test is unable to fetch a required block for chaincode,FAB-7947,27203,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,sambhavdutt,sambhavdutt,29/Jan/18 4:34 PM,12/Feb/18 1:31 AM,26/Apr/18 6:50 AM,12/Feb/18 1:31 AM,,,,,,,v1.1,,,fabric-quality,,,,0,ci_failure,,,,,,,,"fabric-sdk-node8-merge-x86_64, the following errors were observed,

{code:java}

02:11:17 not ok 1344 Error: 2 UNKNOWN: error executing chaincode: error chaincode is already launching: end2endnodesdk:v3
02:11:17   ---
02:11:17     operator: error
02:11:17     expected: |-
02:11:17       undefined
02:11:17     actual: |-
02:11:17       { [Error: 2 UNKNOWN: error executing chaincode: error chaincode is already launching: end2endnodesdk:v3] code: 2, metadata: { _internal_repr: {} }, details: 'error executing chaincode: error chaincode is already launching: end2endnodesdk:v3' }
{code}


*Build Log*

https://jenkins.hyperledger.org/view/fabric-sdk-node/job/fabric-sdk-node8-merge-x86_64/104/consoleFull",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022it:,,,,,,,,sambhavdutt,,,,,,,,,,,,,,"12/Feb/18 1:30 AM;sambhavdutt;The chaincode test is successful now and is not failing the builds anymore in fabric-sdk-node8-merge-x86_64.

*Build Log*

https://jenkins.hyperledger.org/view/fabric-sdk-node/job/fabric-sdk-node8-merge-x86_64/111/",,,,,,,,,,,,,,,,,,,,,,,
"requiring fabric-client ignores value for Client.setConfigSetting('hfc-logging', value)",FAB-7944,27125,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,zhaochy,RobertDiebels,RobertDiebels,29/Jan/18 1:24 PM,07/Feb/18 8:22 PM,26/Apr/18 6:50 AM,07/Feb/18 8:19 PM,,,,,,,WON'T FIX,,,fabric-sdk-node,,,,0,configuration,sdk,,,,,,,"*What happens*
 When setting 'hfc-logging' for `fabric-client` using Client.setConfigSetting() the value passed to `setConfigSetting()` is ignored.

*Reproduction example*
{code:java}
const FabricClient = require('fabric-client');
FabricClient.setConfigSetting('hfc-logging', {
    'debug': 'console',
    'info': 'console',
    'error': 'console'
});

const client = new FabricClient();
client.newTransactionID(true);
//Expected console output: 'newTransactionID - getting an admin TransactionID'
{code}
*What I'm expecting*

I'm expecting debug output in the console.

*Solution*

Call
{code:java}
FabricUtils.setConfigSetting(){code}
before requiring
{code:java}
require('fabric-client'){code}
like so:
{code:java}
const FabricUtils = require('fabric-client/lib/utils');
FabricUtils.setConfigSetting('hfc-logging', {
    'debug': 'console',
    'info': 'console',
    'error': 'console'
});

const FabricClient = require('fabric-client');
const client = new FabricClient();
client.newTransactionID(true);{code}
Because: 
{code:java}
require('fabric-client')
{code}
creates a default global logger. That cannot be updated.

 

*Reasoning*

I'm filing this as a bug because the documentation does not specify
{code:java}
setConfigSetting(){code}
only works on FabricUtils. As well as believing that the Reproduction example should just work.

EDIT: I removed the 'cause' section since it probably only caused confusion.","{color:#cc7832}{color:#333333}Fabric-client version: 1.0.0-preview^
NodeJS: v8.9.3{color}
{color}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022hx:,,,,,,,,harrisob@us.ibm.com,RobertDiebels,zhaochy,,,,,,,,master,,,true,"07/Feb/18 4:54 AM;zhaochy;[~RobertDiebels] As our document describes, *_FabricUtils.getLogger_* is only an internal API just use inside the sdk scope. For client side logger, please construct from your application","07/Feb/18 9:54 AM;RobertDiebels;[~zhaochy] This issue isn't about calling FabricUtils.getLogger outside the SDK. It's about the lack of debug logging even thought I called:
{code:java}
FabricClient.setConfigSetting('hfc-logging', {'debug':'console'});{code}

The following bit of code has the same effect as the one above.

 

 
{code:java}
const FabricClient = require('fabric-client');
FabricClient.setConfigSetting('hfc-logging', {'debug':'console'});
{code}
 All the same methods are callled. As I said:

 
{noformat}
Inside `fabric-client/lib/Client.js` a logger is set with `var logger = sdkUtils.getLogger('Client.js');`.{noformat}
I added the call to:
{code:java}
FabricUtils.getLogger(){code}
So you could see that calling:
{code:java}
logger.debug(""Some message""){code}
did nothing.

So this issue is not fixed. I'll update my initial issue report to reflect the above.

 ",07/Feb/18 11:25 AM;zhaochy;[~RobertDiebels] thanks for your quick response,07/Feb/18 12:39 PM;RobertDiebels;[~zhaochy] no problemo. Just thought I'd mention it in case anyone else comes across this issue.,"07/Feb/18 8:13 PM;harrisob@us.ibm.com;An easy way to set the logging before doing the require is to use an environment setting before or when calling calling node or setting the environment from code.

    process.env.HFC_LOGGING = ""\{'debug': 'console'}"";","07/Feb/18 8:21 PM;harrisob@us.ibm.com;Opened a feature https://jira.hyperledger.org/browse/FAB-8118

I think that we should be able to reset the logging settings during runtime.",,,,,,,,,,,,,,,,,,
Gopackager does not pack all source files typically needed by Go libraries,FAB-7943,27121,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,troyronda,ga25waq,ga25waq,27/Jan/18 9:32 PM,20/Mar/18 6:36 PM,26/Apr/18 6:50 AM,20/Mar/18 6:36 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"The gopackager in
> ./pkg/fabric-client/ccpackager/gopackager/packager.go
only packs a subset of the source files typically needed by Go libraries into the chaincode archive.

Background:
I used Go's library 'crypto' in a chaincode implementation. This library ships a set of platform-dependent source files with extension '.s', e.g.
> path/to/vendor/golang.org/x/crypto/sha3/keccakf_amd64.s
During the build process, Go chooses the source file according to the target platform.

These files are not included in the archive by the gopackager, as the set of file extensions is limited to
> var keep = []string\{"".go"", "".c"", "".h""}
in line 36 of file 'packager.go'.

Consequence:
Chaincode that imports one of these libraries (and vendors them) does not compile in the chaincode environment.
A possible error:
> path/to/vendor/golang.org/x/crypto/sha3/keccakf_amd64.go:13: missing function body for ""keccakF1600""
That's not limited to this library, of course. Other libraries that ship a set of platform-dependent source code files with extension '.s' are affected, too.

Solutions:
a) Include files with extension '.s' in the archive (I've locally patched 'packager.go' to include these files and now my chaincode compiles correctly); maybe there are other source file types in Go that need to be considered?
b) Rethink the procedure of identifying source files. Maybe it's better to include everything that is a text file, and then blacklist some files/file types (e.g. documentation files, ...)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9k1600001zi,,,,,,,,ga25waq,troyronda,,,,,,,,,master,,,true,20/Mar/18 11:13 AM;troyronda;https://gerrit.hyperledger.org/r/c/19425/,20/Mar/18 11:57 AM;troyronda;Merged fix. This fix uses the same filter list as Fabric itself.,,,,,,,,,,,,,,,,,,,,,,
Remove logging section from building fabric topic,FAB-7942,27120,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,27/Jan/18 11:37 AM,27/Jan/18 9:19 PM,26/Apr/18 6:50 AM,27/Jan/18 9:19 PM,,,,,,,v1.1,,,fabric-docs,,,,0,,,,,,,,,This section adds no value as logging is under operations,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022gt:,,,,,,,,mastersingh24,,,,,,,,,,master,,,true,27/Jan/18 11:40 AM;mastersingh24;https://gerrit.hyperledger.org/r/17273,,,,,,,,,,,,,,,,,,,,,,,
Kafka Ordering service section should be under operations,FAB-7941,27119,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,27/Jan/18 11:29 AM,27/Jan/18 9:19 PM,26/Apr/18 6:50 AM,27/Jan/18 9:19 PM,v1.1.0-alpha,,,,,,v1.1,,,fabric-docs,,,,0,,,,,,,,,"The ""Bringing up a Kafka-based Ordering Service"" doc is currently under architecture.  It belong under operations",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022gl:,,,,,,,,mastersingh24,,,,,,,,,,master,,,true,27/Jan/18 11:40 AM;mastersingh24;https://gerrit.hyperledger.org/r/17271,,,,,,,,,,,,,,,,,,,,,,,
TLS doc should be under operations not architecture,FAB-7939,27117,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,27/Jan/18 11:19 AM,27/Jan/18 9:18 PM,26/Apr/18 6:50 AM,27/Jan/18 9:18 PM,v1.1.0-alpha,,,,,,v1.1,,,fabric-docs,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022gd:,,,,,,,,mastersingh24,,,,,,,,,,master,,,true,27/Jan/18 11:40 AM;mastersingh24;https://gerrit.hyperledger.org/r/17269,,,,,,,,,,,,,,,,,,,,,,,
Version test fails when IS_RELEASE is true,FAB-7932,27110,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,smithbk,smithbk,26/Jan/18 6:58 PM,26/Jan/18 8:47 PM,26/Apr/18 6:50 AM,26/Jan/18 8:47 PM,,,,,,,v1.1.0-alpha,,,fabric-ca,,,,0,,,,,,,,,The version test fails when IS_RELEASE is true because it was not setting project version correctly.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022et:,,,,,,,,smithbk,,,,,,,,,,master,,,true,26/Jan/18 7:07 PM;smithbk;https://gerrit.hyperledger.org/r/17253 [FAB-7932] Version test failure for release,,,,,,,,,,,,,,,,,,,,,,,
Fabric 1.1 Binaries Fail When Using a Fabric 1.0 Config File (core.yaml) on Join Channel,FAB-7928,27102,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,suryalnvs,suryalnvs,26/Jan/18 3:29 PM,12/Feb/18 12:26 AM,26/Apr/18 6:50 AM,30/Jan/18 7:09 PM,v1.1,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,"Event producer is erroring out when joining the peers using SDK to a new channel with v1.1 images but using v1.0 config files. First peers in each org (2 peers per org) are able to join successfully with 200 response and second peers in each org erroring out showing
{code:java}
Error: 2 UNKNOWN: event message validation failed: [message timestamp out of acceptable range. must be within 0s of current server time]
    at createStatusError (/root/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/client.js:65:15)
    at ClientDuplexStream._emitStatusIfDone (/root/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/client.js:271:19)
    at ClientDuplexStream._receiveStatus (/root/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/client.js:249:8)
    at /root/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/client.js:767:12
/root/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/test/PTE/pte-main.js:814
                                    throw new Error('[joinChannel] Failed to registerBlockEvent due to error: ' + err.stack ? err.stack : err);
                                    ^

Error: Error: 2 UNKNOWN: event message validation failed: [message timestamp out of acceptable range. must be within 0s of current server time]
    at createStatusError (/root/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/client.js:65:15)
    at ClientDuplexStream._emitStatusIfDone (/root/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/client.js:271:19)
    at ClientDuplexStream._receiveStatus (/root/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/client.js:249:8)
    at /root/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/client.js:767:12
    at eh.registerBlockEvent (/root/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/test/PTE/pte-main.js:814:43)
    at closer (/root/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/fabric-client/lib/EventHub.js:435:5)
    at EventHub._closeAllCallbacks (/root/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/fabric-client/lib/EventHub.js:440:3)
    at EventHub._disconnect (/root/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/fabric-client/lib/EventHub.js:385:8)
    at ClientDuplexStream.<anonymous> (/root/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/fabric-client/lib/EventHub.js:356:10)
    at emitOne (events.js:116:13)
    at ClientDuplexStream.emit (events.js:211:7)
    at ClientDuplexStream._emitStatusIfDone (/root/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/client.js:272:12)
    at ClientDuplexStream._receiveStatus (/root/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/client.js:249:8)
    at /root/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/client.js:767:12
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022d9:,,,,,,,,suryalnvs,wlahti,,,,,,,,,master,,,true,29/Jan/18 1:14 PM;wlahti;Looks like we need a fallback value for when the timewindow is not set to avoid unintended registration failures like this. ,29/Jan/18 6:48 PM;wlahti;https://gerrit.hyperledger.org/r/#/c/17299/,,,,,,,,,,,,,,,,,,,,,,
fabric-ca client should not use defaults for modify,FAB-7921,27093,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,rennman,rennman,25/Jan/18 11:24 PM,10/Feb/18 9:57 AM,26/Apr/18 6:50 AM,10/Feb/18 9:57 AM,,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"modify should not use defaults ... if nothing is passed, it should either be a no-op, or an error.


e.g., consider
{code:java}
Name         Type     Affiliation    max_enrollments Attributes
testUser  | apple  | org1        |   42            | null
fabric-ca-client identity modify testUser --secret 12345
{code}

results in

{code:java}
testUser  | user  | org1 | -1  | [{Name:hf.EnrollmentID Value:Z ECert:true}
                                   {Name:hf.Type Value:user ECert:true}
                                   {Name:hf.Affiliation Value: ECert:true}]
{code}
which modifies not only secret, but
Type, max_enrollments, and Attributes

Even if I specify nothing, it still changes the user record to reflect defaults:
fabric-ca-client identity modify testUser
Successfully modified identity - Name: testUser ...

Unless it just so happens the user entry is 100% consistent with the defaults, in which it errors out:
Error: Response from server: Error Code: 0 - Failed to update any identity records
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022b9:,,,,,,,,aambati,rennman,,,,,,,,,master,,,true,29/Jan/18 11:48 PM;aambati;https://gerrit.hyperledger.org/r/c/17319/,,,,,,,,,,,,,,,,,,,,,,,
Mutual TLS no longer connecting successfully,FAB-7908,27074,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,latitiah,latitiah,25/Jan/18 3:12 PM,26/Jan/18 2:47 PM,26/Apr/18 6:50 AM,26/Jan/18 2:47 PM,v1.1,,,,,,v1.1.0-alpha,,,fabric-samples,,,,0,,,,,,,,,"*fabric commit:* f3ea98e55dae5a6c24887407eae110cc784c3512

The TLS connections are failing. When executing using fabric-ca, the RootCA fails with the following error:
{code}
2018/01/24 15:02:17 [DEBUG] 1 CA instance(s) running on server
2018/01/24 15:02:17 [DEBUG] TLS is enabled
2018/01/24 15:02:17 [DEBUG] Closing server DBs
Error: TLS is enabled but no TLS certificate provided{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02279:,,,,,,,,aambati,latitiah,,,,,,,,,master,,,true,"25/Jan/18 3:32 PM;aambati;The reason it was not working is :

1. Some fabric-ca images that base on fabric images, so make sure FABRIC_TAG environment variable is set to the latest tag of the fabric images that are on the machine where fabric-ca sample is being run

 

2. Fabric-ca code was changed to restrict custom attributes from starting with ""hf."" prefix. But fabric-ca-sample was using hf.admin custom attribute. Hence it was failing. 

 

After fixing these two problems, [~latitiah]was able to run the fabric-ca sample with mutual auth successfully.",25/Jan/18 4:31 PM;aambati;https://gerrit.hyperledger.org/r/c/17179/,,,,,,,,,,,,,,,,,,,,,,
fabric-ca-client affiliation remove should require force option,FAB-7893,27057,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lehors,smithbk,smithbk,25/Jan/18 12:34 PM,07/Feb/18 11:30 AM,26/Apr/18 6:50 AM,07/Feb/18 11:30 AM,,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"With affiliations ""foo.bar"", I tried the following 

{code}
fabric-ca-client affiliation remove foo
2018/01/25 07:25:34 [INFO] Configuration file location: /Users/keith/.fabric-ca-client/fabric-ca-client-config.yaml
Successfully removed affiliation: &{AffiliationInfo:{Name:foo Affiliations:[{Name:foo.bar Affiliations:[] Identities:[]}] Identities:[]} CAName:}
{code}

It should require the --force option since it has a child affiliation",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0223h:,,,,,,,,skarim,smithbk,,,,,,,,,master,,,true,31/Jan/18 2:45 PM;skarim;https://gerrit.hyperledger.org/r/#/c/17333/,,,,,,,,,,,,,,,,,,,,,,,
Node and golang chaincode do not consistently validate couchdb index file extension (.json),FAB-7886,27049,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,chris.elder,AdnanChoudhury,AdnanChoudhury,24/Jan/18 8:40 PM,22/Feb/18 2:21 AM,26/Apr/18 6:50 AM,22/Feb/18 2:21 AM,,,,,,,v1.1,,,fabric-ledger,,,,0,,,,,,,,,"When using Golang CC, the presence of a *.txt file (containing multiple json indexes) does not cause any issues in creating indexes from valid index definition files, but while using Node CC, the peer crashes with following error:



 
{code:java}
[36m2018-01-24 18:25:09.185 UTC [statecouchdb] HandleChaincodeDeploy -> DEBU 937[0m Reading artifact from file: META-INF/statedb/couchdb/indexes/backup.txt
[36m2018-01-24 18:25:09.185 UTC [statecouchdb] HandleChaincodeDeploy -> DEBU 938[0m Creating index from file file: backup.txt
[36m2018-01-24 18:25:09.185 UTC [couchdb] CreateIndex -> DEBU 939[0m Entering CreateIndex() indexdefinition={""index"":{""fields"":[""data.docType"",""data.owner""]},""name"":""indexOwner"",""type"":""json""}
{""index"":{""fields"":[""data.owner""]},""name"":""indexOwnerOnly"",""type"":""json""}
{""index"":{""fields"":[""data.docType"",""data.owner"", ""data.color"", ""data.size""]},""name"":""indexAll"",""type"":""json""}
[33m2018-01-24 18:25:09.185 UTC [cceventmgmt] HandleChaincodeDeploy -> WARN 93a[0m Error while invoking a listener for handling chaincode install event: JSON format is not valid
[31m2018-01-24 18:25:09.186 UTC [gossip/state] commitBlock -> ERRO 93b[0m Got error while committing(JSON format is not valid
commit failed
github.com/hyperledger/fabric/gossip/privdata.(*coordinator).StoreBlock
 /opt/gopath/src/github.com/hyperledger/fabric/gossip/privdata/coordinator.go:225
github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).commitBlock
 /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:781
github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads
 /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:561
runtime.goexit
 /opt/go/src/runtime/asm_amd64.s:2337
github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).commitBlock
 /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:782
github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads
 /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:561
runtime.goexit
 /opt/go/src/runtime/asm_amd64.s:2337)
[35m2018-01-24 18:25:09.186 UTC [gossip/state] deliverPayloads -> CRIT 93c[0m Cannot commit block to the ledger due to JSON format is not valid
commit failed
github.com/hyperledger/fabric/gossip/privdata.(*coordinator).StoreBlock
 /opt/gopath/src/github.com/hyperledger/fabric/gossip/privdata/coordinator.go:225
github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).commitBlock
 /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:781
github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads
 /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:561
runtime.goexit
 /opt/go/src/runtime/asm_amd64.s:2337
github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads
 /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:566
runtime.goexit
 /opt/go/src/runtime/asm_amd64.s:2337
panic: Cannot commit block to the ledger due to JSON format is not valid
commit failed
github.com/hyperledger/fabric/gossip/privdata.(*coordinator).StoreBlock
 /opt/gopath/src/github.com/hyperledger/fabric/gossip/privdata/coordinator.go:225
github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).commitBlock
 /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:781
github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads
 /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:561
runtime.goexit
 /opt/go/src/runtime/asm_amd64.s:2337
github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads
 /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:566
runtime.goexit
 /opt/go/src/runtime/asm_amd64.s:2337
goroutine 409 [running]:
github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panicf(0xc4201e2840, 0xf0c2f5, 0x2c, 0xc421532330, 0x1, 0x1)
 /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:194
{code}
*Expected:*

From the description from FAB-3067, the expected behavior is that the txt file is ignored and normal operation continues in *both* cases.

Attached is the peer log with Golang CC and Node CC.",,,,,,,,,,,,,,,,,FAB-7889,,,24/Jan/18 8:40 PM;AdnanChoudhury;peerlog_expected_golangCC.log;https://jira.hyperledger.org/secure/attachment/14398/peerlog_expected_golangCC.log,24/Jan/18 8:40 PM;AdnanChoudhury;peerlog_panic_nodeCC.log;https://jira.hyperledger.org/secure/attachment/14397/peerlog_panic_nodeCC.log,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0221p:,,,,,,,,AdnanChoudhury,chris.elder,denyeart,scottz,,,,,,,master,,,true,"24/Jan/18 9:55 PM;denyeart;I see the difference... in golang chaincode packaging there is some additional filtering which removes *.txt files during chaincode packaging.  Therefore the invalid index does not get included and hence no crash.  The crash issue due to invalid JSON itself was fixed in -FAB-7715-.

{color:#444444}To resolve the issue of .txt files not getting included, let's document that extension of .json must be used for the index defintion json files (see FAB-7889).{color}

{color:#444444}To ensure more consistency across golang chaincode and node chaincode, let's use this JIRA to enforce that index files must utilize *.json file extension.{color}",03/Feb/18 9:04 PM;denyeart;I think this is a Medium problem now that we've documented that you should use *.json for index files.  I'll move to Medium since this defect is just about enforcing it during packaging time for consistency.  [~AdnanChoudhury] feel free to move back if you disagree.,"16/Feb/18 1:03 PM;denyeart;For background:

packaging of go chaincode indexes: [https://gerrit.hyperledger.org/r/#/c/16697/]

packaging of node chaincode indexes: [https://gerrit.hyperledger.org/r/#/c/16845/]

additional validation for both go and node chaincode indexes: [https://gerrit.hyperledger.org/r/#/c/17045/]

 ",20/Feb/18 6:40 PM;chris.elder;https://gerrit.hyperledger.org/r/#/c/18063/,"21/Feb/18 2:55 AM;denyeart;The peer no longer panics when it hits a malformed index error, FAB-7777 changed the behavior to log the error and keep processing blocks, since the index is not needed on the committing side.
The only thing this Jira will do is enforce consistent file extension checking on packaged couchdb indexes across golang and node chaincode (it should be *.json only).  I've updated the title accordingly.",,,,,,,,,,,,,,,,,,,
"fabric-couchdb docker image should log to stderr, not file",FAB-7884,27047,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,jmcnevin,jmcnevin,24/Jan/18 8:27 PM,19/Feb/18 3:59 PM,26/Apr/18 6:50 AM,03/Feb/18 9:57 PM,v1.0.5,,,,,,v1.0.6,v1.1,,fabric-baseimage,fabric-ledger,,,0,couchdb,,,,,,,,"The current local.ini that is copied into the couchdb container logs to a file inside of the container by default.

https://github.com/hyperledger/fabric/blob/release/images/couchdb/local.ini#L40-L41

I think that, by default, couchdb should be logging to stdout/err rather than persisting a growing log file inside of the container.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02219:,,,,,,,,jmcnevin,,,,,,,,,,release-1.0,master,,true,,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca should need a way to add new hf.Registrar.(Delagate)Roles,FAB-7882,27045,Bug,In Review,FAB,Fabric,software,ChristopherFerris,,,Medium,,skarim,rennman,rennman,24/Jan/18 6:14 PM,28/Mar/18 8:36 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-ca,,,,0,,,,,,,,,"An admin is restricted from registering a user with a type not defined in his hf.Registrar.Roles. Due to recent restrictions placed on hf.Registrar.Attributes, we can no longer override this type restriction.

Now that we have a mechanism for dynamically adding/modifying a user, there is no way to update the hf.Registrar.Roles with new types. 

e.g. consider an admin with an initial hf.Registrar.Roles value defined in the server's registry configuration:
hf.Registrar.Roles: ""client,user""

Now consider we want to register (add) a user with type 'peer'. admin can't do this, since 'peer' is not in his list. Furthermore, there is no user (including admin) that can update admin's hf.Registrar.Roles value. Even if we restart the server, modify the yaml file to update the hf.Registrar.Roles paramter, then restart the server, the new configuration is not installed since the server will not re-register an existing user. Creating a new admin ID would do the trick, but seems wasteful.

Allowing a wildcard, '*' for 
hf.Registrar.Roles
hf.Registrar.DelagateRoles
would account for any arbitrary type value potentially needed at some later date.
Perhaps this should be the default for the bootstrap user?
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9n5zi,,,,,,,,ChristopherFerris,denyeart,mastersingh24,rennman,skarim,smithbk,,,,,,,,,"05/Feb/18 10:23 AM;mastersingh24;So it seems to me without this we would ""break"" how things in v1.0.0 work.
Perhaps we really need to take a step back here in general and take a look at all of these roles and attributes.
It seems to me that we've made things overly (and possibly unnecessarily) complex",05/Feb/18 10:23 AM;mastersingh24;https://gerrit.hyperledger.org/r/17489,"09/Feb/18 12:16 PM;smithbk;Gari, looking back, some of it has turned out to be unnecessary for sure.  For example, affiliations were really only needed for tcerts which will not be used.  And types/roles it turns out aren't used in fabric, but instead using OUs.  But we didn't really know that back then.  So given where we are, do you have any ideas about how to simplify and remain compatible?  I can't think of anything.","19/Feb/18 2:58 PM;skarim;[~mastersingh24] Hi Gari, based on Keith's comment above do you have any suggestions for moving forward?",24/Feb/18 5:45 PM;denyeart;[~mastersingh24] [~smithbk] What is the final decision on this for 1.1 / 1.2 ?,"26/Feb/18 12:47 PM;ChristopherFerris;This seems more like an improvement than a bug fix per se. Certainly, the discussion suggests that. I suggest we defer post 1.1.","26/Feb/18 1:43 PM;smithbk;Yes, agreed that this can be post 1.1.  I've moved to 1.2.",,,,,,,,,,,,,,,,,
Bad error message when endorsement policy fails on instantiation ,FAB-7881,27044,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,Nishi,Nishi,24/Jan/18 5:41 PM,01/Feb/18 4:02 PM,26/Apr/18 6:50 AM,01/Feb/18 4:02 PM,,,,,,,v1.1,,,fabric-endorser,fabric-peer,,,0,,,,,,,,,"Source: upgrade.feature

location: ""fabric-test/feature-upgrade/features"" folder 

*Steps to Reproduce:*
{code:java}
Org1: peer0, peer1 Org2: peer2, peer3 
In one instance when I created a new channel after upgrade: 
1. Created new channel 
2. Joined 2 peers from org1 (peer0 and peer1) 
3. Installed chaincode on 2 peers (peer0 and peer2) 
4. endorsement policy -  n_out_of(2,[signed_by(0),signed_by(1)]),[member('peerOrg0'), member('peerOrg1')] 
5. Endorsement proposals with the above policy was sent to peer0 and peer2 6. It failed @step:  And user ""configAdminPeerOrg0"" using cert alias ""config-admin-cert"" sends proposal ""instantiateProposalch2"" to endorsers with timeout of ""90"" seconds with proposal responses ""instantiateProposalCh2Responses1""  | Endorser | | peer0 | | peer2 |. 

Failure is perfectly fine since we have not joined peer2 on channel which is on endorsement proposal. And also because of endorsement policy expects that members from both orgs sign it. {code}

*Expected Error Message:* 
{code:java}
To fail with a meaningful and appropriate error message something like
""Endorsement policy failure only one peer signed on policy""{code}
 

*Actual Error Message:*
{code:java}
Traceback (most recent call last)
File ""/home/nishi/Envs/behave_venv/local/lib/python2.7/site-packages/behave/model.py"", line 1456, in run
match.run(runner.context)
File ""/home/nishi/Envs/behave_venv/local/lib/python2.7/site-packages/behave/model.py"", line 1903, in run
self.func(context, *args, **kwargs)
File ""steps/endorser_impl.py"", line 155, in step_impl
resultsDict = dict(zip(endorsers, [respFuture.result() for respFuture in proposalResponseFutures]))
File ""/home/nishi/Envs/behave_venv/local/lib/python2.7/site-packages/grpc/_channel.py"", line 279, in result
raise self
*_Rendezvous: <_Rendezvous of RPC that terminated with (StatusCode.UNKNOWN, Failed to deserialize creator identity, err MSP peerOrg0 is unknown)>*
{code}
 ",,,,,,,,,,,,,,,,FAB-7952,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0220l:,,,,,,,,C0rWin,Nishi,,,,,,,,,,,,,"01/Feb/18 4:02 PM;C0rWin;Actually duplicates the FAB-7952, closing and linking those issues.",,,,,,,,,,,,,,,,,,,,,,,
Fix delivery client envelope header type,FAB-7871,27030,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,23/Jan/18 8:47 PM,25/Jan/18 12:23 PM,26/Apr/18 6:50 AM,25/Jan/18 12:23 PM,,,,,,,v1.1,v1.1.0-alpha,,fabric-peer,,,,0,,,,,,,,,"blocksRequester in requester.go takes care to send request to the ordering service in order to fetch blocks, where following function is in use:

{code}
func (b *blocksRequester) seekLatestFromCommitter(height uint64) error {
	seekInfo := &orderer.SeekInfo{
		Start:    &orderer.SeekPosition{Type: &orderer.SeekPosition_Specified{Specified: &orderer.SeekSpecified{Number: height}}},
		Stop:     &orderer.SeekPosition{Type: &orderer.SeekPosition_Specified{Specified: &orderer.SeekSpecified{Number: math.MaxUint64}}},
		Behavior: orderer.SeekInfo_BLOCK_UNTIL_READY,
	}

	//TODO- epoch and msgVersion may need to be obtained for nowfollowing usage in orderer/configupdate/configupdate.go
	msgVersion := int32(0)
	epoch := uint64(0)
	tlsCertHash := b.getTLSCertHash()
	env, err := utils.CreateSignedEnvelopeWithTLSBinding(common.HeaderType_CONFIG_UPDATE, b.chainID, localmsp.NewSigner(), seekInfo, msgVersion, epoch, tlsCertHash)
	if err != nil {
		return err
	}
	return b.client.Send(env)
}
{code}

The header type of the envelope is set to {{common.HeaderType_CONFIG_UPDATE}}, while correct value should be {{HeaderType_DELIVER_SEEK_INFO}} instead, e.g.

{code}
func (b *blocksRequester) seekLatestFromCommitter(height uint64) error {
	seekInfo := &orderer.SeekInfo{
		Start:    &orderer.SeekPosition{Type: &orderer.SeekPosition_Specified{Specified: &orderer.SeekSpecified{Number: height}}},
		Stop:     &orderer.SeekPosition{Type: &orderer.SeekPosition_Specified{Specified: &orderer.SeekSpecified{Number: math.MaxUint64}}},
		Behavior: orderer.SeekInfo_BLOCK_UNTIL_READY,
	}

	//TODO- epoch and msgVersion may need to be obtained for nowfollowing usage in orderer/configupdate/configupdate.go
	msgVersion := int32(0)
	epoch := uint64(0)
	tlsCertHash := b.getTLSCertHash()
	env, err := utils.CreateSignedEnvelopeWithTLSBinding(HeaderType_DELIVER_SEEK_INFO, b.chainID, localmsp.NewSigner(), seekInfo, msgVersion, epoch, tlsCertHash)
	if err != nil {
		return err
	}
	return b.client.Send(env)
}
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i021xh:,,,,,,,,C0rWin,,,,,,,,,,master,,,true,23/Jan/18 9:00 PM;C0rWin;https://gerrit.hyperledger.org/r/17115,,,,,,,,,,,,,,,,,,,,,,,
event mock should not import testing,FAB-7869,27028,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,troyronda,troyronda,troyronda,23/Jan/18 6:26 PM,23/Jan/18 7:03 PM,26/Apr/18 6:50 AM,23/Jan/18 7:03 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:za2w994,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca-merge-x86_64 and fabric-ca-merge-s390x are failing because of formatting error,FAB-7865,27024,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rennman,sambhavdutt,sambhavdutt,23/Jan/18 5:32 PM,26/Jan/18 8:43 PM,26/Apr/18 6:50 AM,26/Jan/18 8:43 PM,,,,,,,,,,fabric-quality,,,,0,ci_failure,,,,,,,,"fabric-ca-merge jobs are failing consistently as there could be formatting errors 
(FAB-7448, FAB-6448)

16:39:33 Checking file format ...
16:39:33 Checking for trailing blanks...
16:39:33 trailing blanks in ./scripts/fvt/version_test.sh
16:39:33 trailing blanks in ./cmd/fabric-ca-server/config.go
16:39:33 To fix, run
16:39:33    find . -path ./vendor -prune -o -type f -regex "".*\(regenDocs\|\.\(go\|sh\)\)"" -exec sed -i ""s/ \+$//"" {} \;
16:39:33 
16:39:33 Makefile:92: recipe for target 'format' failed
16:39:33 make: *** [format] Error 1
16:39:33 Build step 'Execute shell' marked build as failure

*Build Logs*

https://jenkins.hyperledger.org/view/fabric-ca/job/fabric-ca-merge-x86_64/394/console

https://jenkins.hyperledger.org/view/fabric-ca/job/fabric-ca-merge-s390x/394/console",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i021wd:,,,,,,,,rennman,sambhavdutt,,,,,,,,,master,,,true,"24/Jan/18 8:16 PM;rennman;This is not a script error. This is correctly identifying a formatting error in the code.

The files mentioned:
  ./scripts/fvt/version_test.sh
 ./cmd/fabric-ca-server/config.go
have trailing blanks.

I'll checkout master, remove the trailing blanks from the files and push them.

[Remove trailing blanks from files|https://gerrit.hyperledger.org/r/#/c/17151/]",26/Jan/18 8:43 PM;sambhavdutt;The fabric-ca-merge-x86_64 and fabric-ca-merge-s390x have passed after the latest patch was merged(Gerrit ID FAB-7865),,,,,,,,,,,,,,,,,,,,,,
fabsdk config err should return wrapped err,FAB-7864,27023,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,troyronda,troyronda,troyronda,23/Jan/18 5:24 PM,23/Jan/18 7:17 PM,26/Apr/18 6:50 AM,23/Jan/18 7:17 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,https://github.com/hyperledger/fabric-sdk-go/blob/master/pkg/fabsdk/fabsdk.go#L53,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:za2w999,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
CouchDB Index Definitions need to be validated for CouchDB syntax errors,FAB-7863,27022,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,chris.elder,chris.elder,chris.elder,23/Jan/18 5:15 PM,24/Jan/18 11:11 PM,26/Apr/18 6:50 AM,24/Jan/18 11:11 PM,,,,,,,v1.1.0-alpha,,,fabric-ledger,,,,0,,,,,,,,,"Framework for couchdb index validation as well as json validation has been added in FAB-7715.

Additionally, CouchDB index definitions should be validated for CouchDB syntax errors.  Invalid index definitions can cause peer panic.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i021w5:,,,,,,,,chris.elder,,,,,,,,,,master,,,true,23/Jan/18 5:21 PM;chris.elder;https://gerrit.hyperledger.org/r/#/c/17105/,,,,,,,,,,,,,,,,,,,,,,,
console.log calls in _fixEcpt should be removed,FAB-7860,27013,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,davidkel,davidkel,23/Jan/18 11:11 AM,25/Jan/18 2:28 PM,26/Apr/18 6:50 AM,25/Jan/18 2:28 PM,v1.1,,,,,,v1.0.3,v1.1,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,in fabric-client/lib/impl/bccsp_pkcs11.js the _fixEcpt method has console.log calls. These should be removed and converted to logger calls.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i021u5:,,,,,,,,davidkel,davidkhala,mastersingh24,,,,,,,,release-1.0,master,,true,"24/Jan/18 12:30 PM;mastersingh24;https://gerrit.hyperledger.org/r/17133 (master)

https://gerrit.hyperledger.org/r/17135 (release)",,,,,,,,,,,,,,,,,,,,,,,
Fix marbles02 example couchdb index commands,FAB-7856,27006,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,denyeart,denyeart,denyeart,23/Jan/18 3:36 AM,30/Jan/18 4:08 AM,26/Apr/18 6:50 AM,30/Jan/18 4:08 AM,,,,,,,v1.1,,,fabric-ledger,,,,0,,,,,,,,,Fix example couchdb index commands in marbles02 example.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:za2rjg,,,,,,,,denyeart,,,,,,,,,,master,,,true,30/Jan/18 4:08 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/17089/,,,,,,,,,,,,,,,,,,,,,,,
SaveChannelRequest should support multiple signing identities,FAB-7855,27005,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,emir.heidinger,troyronda,troyronda,23/Jan/18 2:22 AM,19/Mar/18 8:42 PM,26/Apr/18 6:50 AM,19/Mar/18 8:42 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,CC: [~sandrav],,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9k1601y,,,,,,,,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Doc links to CI page are broken,FAB-7847,26993,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lehors,lehors,lehors,22/Jan/18 7:20 PM,31/Jan/18 8:53 PM,26/Apr/18 6:50 AM,31/Jan/18 8:53 PM,v1.1.0-alpha,,,,,,v1.1,,,fabric-docs,,,,0,,,,,,,,,"Well, this is embarrassing but we've got two broken links that went unnoticed into a recent merge:

[https://gerrit.hyperledger.org/r/#/c/16407/4/docs/source/Gerrit/changes.rst@99]

[https://gerrit.hyperledger.org/r/#/c/16407/4/docs/source/submit_cr.rst@218]

Too bad Gari didn't have as sharp an eye on this as he had on grammar. ;)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i021qd:,,,,,,,,denyeart,lehors,,,,,,,,,master,,,true,31/Jan/18 7:27 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/17067/,,,,,,,,,,,,,,,,,,,,,,,
Make attributes case insensitive,FAB-7844,26990,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,skarim,skarim,22/Jan/18 5:29 PM,01/Feb/18 10:53 AM,26/Apr/18 6:50 AM,01/Feb/18 10:53 AM,v1.1.0-alpha,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"Additional checks were put in places to make sure registrar can only register attributes that it is authorized for. The implementation enforced case sensitivity for reserved attributes (hf.). Even though, attributes names were originally intended to be case sensitive that check was never really enforced. Since this might break SDKs and users as they might have already registered using lower cases or upper case for these attributes. Attribute name lookup will be case insensitive to prevent breaking users.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i021pp:,,,,,,,,denyeart,skarim,smithbk,,,,,,,,,,,,22/Jan/18 10:31 PM;skarim;https://gerrit.hyperledger.org/r/#/c/17077/,"25/Jan/18 4:51 AM;denyeart;Per discussion with [~skarim] and [~smithbk] , this bug is not strictly required for 1.1 alpha inclusion.  But we'll keep it tagged as v1.1.0-alpha in case a fix is available in time.","01/Feb/18 10:52 AM;smithbk;Unless convinced otherwise, I think attribute names should remain case sensitive.
The reason this was considered is because some test cases were written with for example ""hf.revoker"" rather than ""hf.Revoker"" and in the latest release we had to add additional security checks which fail if someone had ""hf.revoker"".  Rather than making it case-insensitive, the tests should be changed to use ""hf.Revoker"".  If this is an issue with registered identities, the fix is to use the APIs to remove and add the attribute with the proper case.",,,,,,,,,,,,,,,,,,,,,
fabric-sdk-java-verify/merge-x86_64 is failing as there is a user authentication error,FAB-7843,26989,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,sambhavdutt,sambhavdutt,22/Jan/18 4:42 PM,29/Jan/18 5:00 PM,26/Apr/18 6:50 AM,22/Jan/18 4:51 PM,,,,,,,,,,fabric-sdk-java,,,,0,ci_failure,,,,,,,,"The following error was observed in the verify,merge-x86_64 tests which are failing the builds ,

15:50:32 Expected: (an instance of org.hyperledger.fabric_ca.sdk.exception.EnrollmentException and exception with message a string containing ""Failed to re-enroll user"") 

*Build Log*

https://jenkins.hyperledger.org/view/fabric-sdk-java/job/fabric-sdk-java-merge-x86_64/215/consoleFull",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i021ph:,,,,,,,,rickr,sambhavdutt,,,,,,,,,,,,,"22/Jan/18 4:50 PM;rickr;Latest merge is working [https://gerrit.hyperledger.org/r/#/c/16115/]
this was cause by a change in fabric Ca",,,,,,,,,,,,,,,,,,,,,,,
[CI] - missing fabric unit-test cobertura coverage report in jenkins,FAB-7842,26985,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,22/Jan/18 2:00 PM,27/Jan/18 5:57 AM,26/Apr/18 6:50 AM,26/Jan/18 2:34 AM,,,,,,,v1.1,,,fabric-ci,,,,0,fabric-build,,,,,,,,"Observed fabric unit-test cobertura coverage report is missing in Jenkins. [https://jenkins.hyperledger.org/view/fabric/job/fabric-verify-x86_64/]

Seems this has been broken with this patch https://github.com/hyperledger/fabric/commit/fd65c752c8f03acb3a70ab2686d3f1838e97ea21#diff-7ad2aee83906c9ac1000cf59c5c40853",Jenkins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i021ot:,,,,,,,,rameshthoomu,sykesm,,,,,,,,,master,,,true,"22/Jan/18 2:44 PM;sykesm;I believe it was introduced elsewhere. Please see FAB-7635 [1]. With that change, coverage reports are only generated with the JOB_TYPE is set to PROFILE.

[1]: https://github.com/hyperledger/fabric/commit/6a4b44f4df4dd7656d9ad6f5939f9b0183d1a3f7","23/Jan/18 5:03 AM;rameshthoomu;Created a new CI cron job to run ""profile"" target to generate code coverage report. Removed """" quotes using sed command in CI job. This has been tested in sandbox and it's working as expected https://jenkins.hyperledger.org/sandbox/job/fabric-unit-tests-coverage-daily-x86_64/",,,,,,,,,,,,,,,,,,,,,,
[Thirdparty Image] - update kafka version to 0.10.2.0 from 0.9.0.1,FAB-7837,26977,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,rameshthoomu,rameshthoomu,21/Jan/18 4:26 PM,22/Jan/18 1:33 PM,26/Apr/18 6:50 AM,22/Jan/18 1:33 PM,,,,,,,v1.1.0-alpha,,,fabric-build,,,,0,,,,,,,,,"update ""kafka"" version to 0.10.2.0 from 0.9.0.1.

Observed e2e tests are failing with kafka version 0.9.0.1 (https://jira.hyperledger.org/browse/FAB-7825)

 

 ",,,,,,,,,,,,FAB-7825,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i021n9:,,,,,,,,kchristidis,rameshthoomu,,,,,,,,,master,,,true,22/Jan/18 1:33 PM;kchristidis;https://gerrit.hyperledger.org/r/c/17041/,,,,,,,,,,,,,,,,,,,,,,,
"registerUser: ""No identity type provided"" Error",FAB-7836,26976,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,armujahid,armujahid,21/Jan/18 9:12 AM,22/Jan/18 2:00 AM,26/Apr/18 6:50 AM,22/Jan/18 2:00 AM,,,,,,,,,,fabric-samples,,,,0,,,,,,,,,"registerUser.js gives the following error:

[[\{""code"":0,""message"":""No identity type provided. Please provide identity type""}]]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i021n1:,,,,,,,,armujahid,,,,,,,,,,master,,,true,"21/Jan/18 9:19 AM;armujahid;Fixed in https://gerrit.hyperledger.org/r/#/c/17027/

FAB-7836 Fix ""No identity type provided"" Error",,,,,,,,,,,,,,,,,,,,,,,
Add design doc name to marbles02 sample index,FAB-7835,26975,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,denyeart,denyeart,denyeart,20/Jan/18 11:18 PM,22/Jan/18 4:09 PM,26/Apr/18 6:50 AM,22/Jan/18 4:09 PM,,,,,,,v1.1,,,fabric-examples,,,,0,,,,,,,,,Add design doc name to marbles02 sample index.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i021mt:,,,,,,,,denyeart,,,,,,,,,,master,,,true,20/Jan/18 11:20 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/17035/,,,,,,,,,,,,,,,,,,,,,,,
BYFN docs point to wrong marbles02 directory location,FAB-7833,26973,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,denyeart,denyeart,denyeart,20/Jan/18 10:55 PM,21/Jan/18 1:08 AM,26/Apr/18 6:50 AM,21/Jan/18 1:08 AM,,,,,,,v1.1.0-alpha,,,fabric-docs,,,,0,,,,,,,,,"BYFN used to point to fabric /examples directory.

It should point to fabric-samples directory.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:za2rjc,,,,,,,,denyeart,,,,,,,,,,,,,,20/Jan/18 11:17 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/17029/,,,,,,,,,,,,,,,,,,,,,,,
"e2e tests are failing on latest fabric commit with ""kafka version 0.9.0.1"" (hyperledger/fabric-kafka:x86_64-0.4.4)",FAB-7825,26964,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,19/Jan/18 8:11 PM,24/Jan/18 9:49 PM,26/Apr/18 6:50 AM,24/Jan/18 9:49 PM,,,,,,,v1.1.0-alpha,,,fabric-baseimage,,,,0,,,,,,,,,"observed e2e tests are failing on latest fabric commit with *kafka version 0.9.0.1 (thirdparty images with version hyperledger/fabric-kafka:x86_64-0.4.4)*
{code:java}
00:10:52.689 2018-01-19 19:12:37.819 UTC [channelCmd] readBlock -> DEBU 00a Got status: &{SERVICE_UNAVAILABLE}
00:10:52.689 Error: proto: Marshal called with nil{code}
[https://gerrit.hyperledger.org/r/#/c/17001/]

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i021kl:,,,,,,,,jyellick,kchristidis,rameshthoomu,sanchezl,scottz,troyronda,,,,,,,,,"19/Jan/18 8:24 PM;jyellick;A workaround for this is to change the Kafka version specified by {{orderer.yaml}} to match that found in baseimage.

Personally, I would lean towards updating the baseimage of Kafka though, as Kafka has had bug fixes and improvements.","19/Jan/18 9:55 PM;sanchezl;From the [draft upgrade document|https://docs.google.com/document/d/16ZogU_InYeLZZ8lTGNdBhd4Iosi7T4KP3ppFSEUcI30/edit?usp=sharing]:

 *NOTE:* If you are using the fabric-orderer docker images, the embedded orderer.yaml changes the value of Kafka.Version to {{0.10.2.1}}. If you are using a version of Kafka *older* than {{0.10.2.1}}, set the 
{{ORDERER_KAFKA_VERSION}}
 environment variable on your containers to the appropriate value.",22/Jan/18 2:15 PM;kchristidis;Taken care of by the commit in https://gerrit.hyperledger.org/r/c/17041/?,"24/Jan/18 2:37 PM;scottz;Please review my suggestion in that doc, [~sanchezl], to reword ""appropriate value"". Also, if we use kafka version 1.0 in fabric v1.1, and then what are the instructions for upgrades? For those existing networks using 0.9.0,1 already, they should set the value to 0.9.0.1 for the upgrading of fabric orderers to v1.1. But then we need to finish our instructions for upgrade. They will need to upgrade their kafkas eventually (probably sooner than later), AND will need to change this kafka version to v1.0 from 0.9.0.1. I think we have been saying that they could upgrade their kafkas independently, without doing change the kafka version in the orderers and without restarting the orderers, and then later whenever they upgrade fabric again then they should change kafka version? But wouldn't they hit this problem again?",,,,,,,,,,,,,,,,,,,,
CI failed due to pem file read format,FAB-7819,26958,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,baohua,baohua,baohua,19/Jan/18 3:36 PM,22/Jan/18 2:07 AM,26/Apr/18 6:50 AM,22/Jan/18 2:07 AM,,,,,,,,,,fabric-sdk-py,,,,0,SDK-Python,,,,,,,,"Ci fails without any error.

After tracking the problem, the root cause is that in the new added chaincode_install test, the pem file is not read as binary, which caused grpc channel creation problem and quit.

Need to fix the problem.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i021j9:,,,,,,,,baohua,,,,,,,,,,master,,,true,19/Jan/18 3:49 PM;baohua;https://gerrit.hyperledger.org/r/#/c/16997/,,,,,,,,,,,,,,,,,,,,,,,
Fix chaincode event handling to ignore lscc collection updates ,FAB-7816,26955,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,denyeart,denyeart,denyeart,19/Jan/18 3:16 PM,19/Jan/18 11:12 PM,26/Apr/18 6:50 AM,19/Jan/18 11:12 PM,,,,,,,v1.1,,,fabric-ledger,,,,0,,,,,,,,,"Chaincode event handling was intended to pick up LSCC chaincode updates, but was also picking up LSCC chaincode collection updates.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i021il:,,,,,,,,denyeart,,,,,,,,,,master,,,true,19/Jan/18 8:27 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/16995/,,,,,,,,,,,,,,,,,,,,,,,
Update Java Version in fabric-baseimage,FAB-7814,26953,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harsha544,harsha544,harsha544,19/Jan/18 2:32 PM,22/Jan/18 11:12 PM,26/Apr/18 6:50 AM,22/Jan/18 9:36 AM,,,,,,,0.4.5,,,fabric-baseimage,,,,0,,,,,,,,,"Per this [https://github.com/hyperledger/fabric-baseimage/blob/v0.3.2/scripts/common/jvm.sh#L19]
 *{{1.8.0_sr3fp12}}* is being pulled from [s390x|[https://public.dhe.ibm.com/ibmdl/export/pub/systems/cloud/runtimes/java/meta/sdk/linux/s390x/index.yml]|https://public.dhe.ibm.com/ibmdl/export/pub/systems/cloud/runtimes/java/meta/sdk/linux/s390x/index.yml] & [ppc64le|https://public.dhe.ibm.com/ibmdl/export/pub/systems/cloud/runtimes/java/meta/sdk/linux/ppc64le/index.yml] . As IBM has removed the version *{{1.8.0_sr3fp12}}* from the Java Downloads. As such our builds for the baseimage 0.3.2 for fabric 1.0.x are failing.

Thanks to [~mrshah-ibm] for pointing out.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i021i5:,,,,,,,,harsha544,mastersingh24,,,,,,,,,master,,,true,19/Jan/18 2:46 PM;harsha544;We should start using {{1.8.0_sr5fp7}},"19/Jan/18 3:13 PM;harsha544;We need 2 PR’s one to update latest branch, and one to update v0.3.2
 Here’s for latest [https://gerrit.hyperledger.org/r/16989]
 Here’s for 0.3.2 [https://gerrit.hyperledger.org/r/16993/]",20/Jan/18 9:49 PM;mastersingh24;We can't and don't need to do this for v0.3.2 images (we don't build them anymore),,,,,,,,,,,,,,,,,,,,,
configtx.yaml has inconsistent naming and profile content,FAB-7808,26943,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,18/Jan/18 8:42 PM,19/Jan/18 1:54 AM,26/Apr/18 6:50 AM,19/Jan/18 1:54 AM,,,,,,,v1.1,,,fabric-tools,,,,0,configtxgen,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i021gd:,,,,,,,,jyellick,,,,,,,,,,master,,,true,18/Jan/18 8:45 PM;jyellick;In review via: https://gerrit.hyperledger.org/r/16963 ,,,,,,,,,,,,,,,,,,,,,,,
Private data collections - couchdb indexes applied in chaincode database rather than collection database,FAB-7779,26900,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,denyeart,denyeart,17/Jan/18 8:17 PM,11/Mar/18 1:57 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-ledger,,,,0,,,,,,,,,Any couchdb indexes defined for a chaincode will be deployed in the chaincode state database.  Indexes for collections of private data should be applied in the chaincode's collection state database rather than in the chaincode state database.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-8718,0|hzzygb:w,,Next Items- NextGen Endorsemnt,,,,,,denyeart,fredbi,,,,,,,,,,,,,"14/Feb/18 5:14 PM;denyeart;Private data collections (aka Side DB) are experimental in 1.1, this item can be deferred to 1.2.",,,,,,,,,,,,,,,,,,,,,,,
Use kafka 0.11 and up version cause kafka broker startup error,FAB-7768,26874,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,grapebaba,grapebaba,17/Jan/18 12:27 PM,18/Jan/18 2:09 PM,26/Apr/18 6:50 AM,18/Jan/18 2:09 PM,,,,,,,,,,fabric-baseimage,fabric-orderer,,,0,kafka,,,,,,,,"1.change kafka version in fabric-images/kafka/Dockerfile.in
2.build a kafka 0.11 images
3.run fabric network with kafka
4.one kafka broker will throw error ""noteoughreplicaexception""
5.after investigation, found 'default.replication.factor=3' not write into server.properties
6.change kafka back to 0.10.2.1
7.use same docker-compose file
8.it works and  'default.replication.factor=3' write into server.properties

I guess it is related entrypoint.sh in fabric-images",,,,,,,,,,,,,,,,,,,,17/Jan/18 12:31 PM;grapebaba;Clipboard - 2018年1月17日下午4点15分.png;https://jira.hyperledger.org/secure/attachment/14212/Clipboard+-+2018%E5%B9%B41%E6%9C%8817%E6%97%A5%E4%B8%8B%E5%8D%884%E7%82%B915%E5%88%86.png,17/Jan/18 12:31 PM;grapebaba;Clipboard - 2018年1月17日下午4点18分.png;https://jira.hyperledger.org/secure/attachment/14213/Clipboard+-+2018%E5%B9%B41%E6%9C%8817%E6%97%A5%E4%B8%8B%E5%8D%884%E7%82%B918%E5%88%86.png,17/Jan/18 12:31 PM;grapebaba;Clipboard - 2018年1月17日下午4点35分.png;https://jira.hyperledger.org/secure/attachment/14214/Clipboard+-+2018%E5%B9%B41%E6%9C%8817%E6%97%A5%E4%B8%8B%E5%8D%884%E7%82%B935%E5%88%86.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02151:,,,,,,,,grapebaba,kchristidis,,,,,,,,,,,,,18/Jan/18 2:09 PM;kchristidis;https://chat.hyperledger.org/channel/fabric-orderer?msg=5bw8in4hLkEo4BrKi,,,,,,,,,,,,,,,,,,,,,,,
Fix events proto definition of filtered transaction,FAB-7767,26869,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,luomin,luomin,luomin,17/Jan/18 3:06 AM,17/Jan/18 3:22 PM,26/Apr/18 6:50 AM,17/Jan/18 3:22 PM,,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,"to make events proto definitions aligned with protobuf code guidelines, e.g. replace
{code:java}
// FilteredTransactionActions is a wrapper for array of TransactionAction
// message from regular block
message FilteredChaincodeAction {
     ChaincodeEvent ccEvent = 1;
}


message FilteredBlock {
string channel_id = 1;
uint64 number = 2; // The position in the blockchain
repeated FilteredTransaction filtered_tx = 4;
}

{code}
with
{code:java}
// FilteredTransactionActions is a wrapper for array of TransactionAction
// message from regular block
message FilteredChaincodeAction {
     ChaincodeEvent chaincode_event = 1;
}

message FilteredBlock {
string channel_id = 1;
uint64 number = 2; // The position in the blockchain
repeated FilteredTransaction filtered_transaction = 4;
}
{code}",,,,60,60,,0%,60,60,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0213x:,,,,,,,,luomin,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
There are extra format 'verbs' in core/chaincode/shim/handle.go,FAB-7758,26847,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,nnao,nnao,16/Jan/18 5:41 PM,19/Jan/18 9:15 PM,26/Apr/18 6:50 AM,19/Jan/18 9:15 PM,v1.0.5,v1.1.0-preview,,,,,v1.1,,,fabric-endorser,,,,0,quality,,,,,,,,"There are extra format 'verbs' in core/chaincode/shim/handle.go.
In errFunc() error message have 3 format verbs, but it had set only 2 arguments.
As a result, error message shows extra string.

{code:java}
// Call chaincode's Run
// Create the ChaincodeStub which the chaincode can use to callback
stub := new(ChaincodeStub)
err := stub.init(handler, msg.ChannelId, msg.Txid, input, msg.Proposal)
if nextStateMsg = errFunc(err, nil, stub.chaincodeEvent, ""[%s]Init get error response [%s]. Sending %s"", shorttxid(msg.Txid), pb.ChaincodeMessage_ERROR.String()); nextStateMsg != nil {
  return
}
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02111:,,,,,,,,nnao,,,,,,,,,,master,,,true,16/Jan/18 6:33 PM;nnao;https://gerrit.hyperledger.org/r/#/c/16875/,,,,,,,,,,,,,,,,,,,,,,,
CouchDB unit tests fail for CouchDB 2.1.1,FAB-7757,26846,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,chris.elder,chris.elder,chris.elder,16/Jan/18 5:32 PM,17/Jan/18 2:22 PM,26/Apr/18 6:50 AM,17/Jan/18 2:22 PM,,,,,,,v1.1.0-alpha,,,fabric-ledger,,,,0,,,,,,,,,"Index definitions in CouchDB 2.1.1 allow for a Partial Filter Selector in the index definition.   When an index definition is returned by CouchDB, it now includes this as part of the JSON response.  The unit test needs to verify that the correct field and sort is in the JSON response and ignore the rest of the index definition.",,,,,,,,,,,,FAB-7572,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0210t:,,,,,,,,chris.elder,,,,,,,,,,master,,,true,16/Jan/18 5:36 PM;chris.elder;https://gerrit.hyperledger.org/r/#/c/16869/,,,,,,,,,,,,,,,,,,,,,,,
chaincodeid should not be in couchdb document data envelope,FAB-7752,26841,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Senthil1,denyeart,denyeart,16/Jan/18 3:12 PM,19/Jan/18 6:19 PM,26/Apr/18 6:50 AM,19/Jan/18 6:19 PM,,,,,,,v1.1,,,fabric-ledger,,,,0,,,,,,,,,"Now that there are couchdb databases per chaincode, the chaincode header that gets implicitly added to the data, to queries, and to indexes gets in the way and can cause issues for the user, it should be removed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i020zp:,,,,,,,,denyeart,,,,,,,,,,master,,,true,16/Jan/18 3:17 PM;denyeart;[~Senthil1] Could you help on this one?,19/Jan/18 6:19 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/16943/,,,,,,,,,,,,,,,,,,,,,,
requires 'bundle org.apache.commons.lang 2.6.0' but it could not be found,FAB-7745,26824,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,gbohra,gbohra,16/Jan/18 10:49 AM,30/Jan/18 10:41 PM,26/Apr/18 6:50 AM,30/Jan/18 10:40 PM,Not a Bug,,,,,,Not a Bug,,,fabric-sdk-java,,,,0,,,,,,,,,"Hi 

During setup of eclipse I followed  step by step process written into Eclipsesetup.md however during step 6 I found following dependence error : How to resolve it ?

Cannot complete the install because one or more required items could not be found.
 Software being installed: Checkstyle configuration plugin for M2Eclipse 1.0.0.201705301746 (com.basistech.m2e.code.quality.checkstyle.feature.feature.group 1.0.0.201705301746)
 Missing requirement: M2Eclipse Project Configurator for Eclipse Checkstyle 1.0.0.201705301746 (com.basistech.m2e.code.quality.checkstyle 1.0.0.201705301746) requires 'bundle org.apache.commons.lang 2.6.0' but it could not be found
 Cannot satisfy dependency:
 From: Checkstyle configuration plugin for M2Eclipse 1.0.0.201705301746 (com.basistech.m2e.code.quality.checkstyle.feature.feature.group 1.0.0.201705301746)
 To: com.basistech.m2e.code.quality.checkstyle [1.0.0.201705301746]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i020w5:,,,,,,,,gbohra,rickr,skarim,,,,,,,,,,,,16/Jan/18 3:54 PM;skarim;[~gbohra] What version of eclipse are you using?,"18/Jan/18 12:46 PM;gbohra;Hi 

I am using following version of myeclipse 

MyEclipse Enterprise Workbench

Version: 10.1
Build id: 10.1-20120316

(c) Copyright Genuitec, L.L.C. 2000-2012. All rights reserved.
Visit http://www.myeclipseide.com/

This product includes software developed by the following
Eclipse Foundation http://www.eclipse.org/
Apache Software Foundation http://www.apache.org/","18/Jan/18 5:49 PM;rickr;I don't see this as an SDK issue.  I think this should be worked with eclipse foundation.  I know of other eclipse users of the SDK and this issue is the first report of it.  [~gbohra] Can you please close this and work with Eclipse Foundation on resolving this ? 
Once identified the issue and you feel there is error or lacking in the Eclipse set up we'd welcome that feedback.",30/Jan/18 10:40 PM;rickr;No activity on this and really not an SDK issue. - markng done,,,,,,,,,,,,,,,,,,,,
Python-SDK cant communicate with Fabric-ca when TLS is enabled,FAB-7743,26820,Bug,In Review,FAB,Fabric,software,ChristopherFerris,,,Medium,,vieiramanoel,vieiramanoel,vieiramanoel,16/Jan/18 3:05 AM,26/Jan/18 2:16 AM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-sdk-py,,,,2,,,,,,,,,"When ca_certs_path is set on constructor, SDK can't enroll users neither use this cert in get_cainfo() method, in both cases openssl and requests libraries

requests.exceptions.SSLError: HTTPSConnectionPool(host='localhost', port=7054): Max retries exceeded with url: /api/v1/enroll (Caused by SSLError(SSLError(1, '[SSL: BAD_ECC_CERT] bad ecc cert (_ssl.c:645)'),))

The server response is:
2018/01/16 02:48:54 http: TLS handshake error from 177.41.139.8:54358: remote error: tls: handshake failure
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i020v9:,,,,,,,,baohua,grapebaba,vieiramanoel,,,,,,,,master,,,true,"16/Jan/18 6:43 PM;vieiramanoel;Using pycurl all posts can be made, using tls certificate. The fabric-ca cert files are certs self-signed and aren't recognized by pyopenssl, we should decide a approach to SDK, if we continue using requests library or change the lib that we make requests to fabric-ca in order to accept TLS without huge effort for this","18/Jan/18 5:15 AM;baohua;[~grapebaba] [~tcz001].

Thoughts?","18/Jan/18 5:29 AM;vieiramanoel;As I commented on a [issue|https://github.com/requests/requests/issues/4477] at requests repo on github:

[...] Everything goes well when I POST from curl:

{code}
curl --cacert ""./ca-cert.pem"" https://ca.goledger.com:7054/api/v1/cainfo -X POST
{code}
 
You can follow the discussion there and see that the problem isn't with the library itself but somehow with the openssl and fabric-ca communication. 

So I asked at [#fabric-ca channel|https://chat.hyperledger.org/channel/fabric-ca?msg=Zy3AYJhnoC36NqDvM] about it and smithbk said ""You can't connect to fabric-ca-server using openssl."", then I had a hangout with him and he recommended to use another way to request do REST-API that doesn't use openssl. (Ignoring verify warnings/errors is enough for us).

[~vitorduarte] (A teammate which have worked with me on that) Tested doing a get_cainfo() request using pycurl instead requests lib and everything went fine. 

Our proposal is to change the manner (lib) that we make requisitions to fabric-ca's REST API in order to implement TLS communication too.","18/Jan/18 2:50 PM;grapebaba;I changed cert and key file, the CN of this cert is 'ca.org1.example.com', you can edit your /etc/hosts, let localhost point to it. Then use 'ca.org1.example.com' instead of 'localhost' in ca_test when enabled tls.Note your current openssl version since old version not support tls 1.2","18/Jan/18 3:04 PM;vieiramanoel;We're not using tests certs, we have a CA running on aws and trying to use sdk o communicate with it. I'll try to update openssl and see if it works

","18/Jan/18 3:09 PM;grapebaba;from your error, your ca cert seems not match fabric requirement. you can change the cert and key file",,,,,,,,,,,,,,,,,,
Consentor error when upgraded orderers to v1.1 and left kafka at v1.0.X,FAB-7739,26816,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,suryalnvs,suryalnvs,15/Jan/18 10:19 PM,24/Jan/18 8:49 PM,26/Apr/18 6:50 AM,24/Jan/18 8:49 PM,v1.1,,,,,,v1.1,,,fabric-orderer,,,,0,quality,,,,,,,,"When upgraded orderers from v1.0.X to v1.1 and left kafka brokers at v1.0.X, seeing the consentor error logs in orderers.
{code:java}
2018-01-12 20:29:48.185 UTC [orderer/consensus/kafka/sarama] func1 -> DEBU e18 Connected to broker at 5519eb1be81b:9092 (registered as #1)
2018-01-12 20:29:48.189 UTC [orderer/consensus/kafka/sarama] handleError -> DEBU e19 producer/broker/1 state change to [closing] because kafka: insufficient data to decode packet, more bytes expected
2018-01-12 20:29:48.189 UTC [orderer/consensus/kafka/sarama] Close -> DEBU e1a Closed connection to broker 5519eb1be81b:9092
2018-01-12 20:29:48.189 UTC [orderer/consensus/kafka] try -> DEBU e1b [channel: ed9f19] Need to retry because process failed = kafka: insufficient data to decode packet, more bytes expected
2018-01-12 20:29:50.902 UTC [common/deliver] Handle -> WARN e1c Error reading from 172.18.0.12:41400: rpc error: code = Canceled desc = context canceled
2018-01-12 20:29:50.903 UTC [orderer/common/server] func1 -> DEBU e1d Closing Deliver stream
2018-01-12 20:29:59.693 UTC [orderer/common/server] Deliver -> DEBU e1e Starting new Deliver handler
2018-01-12 20:29:59.693 UTC [common/deliver] Handle -> DEBU e1f Starting new deliver loop for 172.18.0.15:35832
2018-01-12 20:29:59.693 UTC [common/deliver] Handle -> DEBU e20 Attempting to read seek info message from 172.18.0.15:35832
2018-01-12 20:29:59.693 UTC [common/deliver] deliverBlocks -> WARN e21 [channel: com.acme.blockchain.jdoe.channel1] Rejecting deliver request for 172.18.0.15:35832 because of consenter error
2018-01-12 20:29:59.694 UTC [common/deliver] Handle -> DEBU e22 Waiting for new SeekInfo from 172.18.0.15:35832
2018-01-12 20:29:59.695 UTC [common/deliver] Handle -> DEBU e23 Attempting to read seek info message from 172.18.0.15:35832
2018-01-12 20:30:09.696 UTC [common/deliver] Handle -> WARN e24 Error reading from 172.18.0.15:35832: rpc error: code = Canceled desc = context canceled
2018-01-12 20:30:09.696 UTC [orderer/common/server] func1 -> DEBU e25 Closing Deliver stream
{code}",Commit Level: {color:#444444}60fc1e99f863bb5c47c1dde78e5e32acf9e7e203{color},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i020ud:,,,,,,,,denyeart,jyellick,sanchezl,scottz,smartheye,suryalnvs,,,,,,,,,"19/Jan/18 8:35 PM;denyeart;[~suryalnvs] Are you working this as a fabric-quality test issue?  Or are you expecting an orderer developer to look at it?

If the latter, then please assign to component fabric-orderer and then we can ask somebody like [~jyellick] to look at it.","19/Jan/18 9:36 PM;jyellick;For what it's worth, the current default in {{orderer.yaml}} requires a higher version of Kafka than we shipped with.  This is almost definitely the source of your error.  I'll raise this with the rest of the orderer team to see whether we want to re-examine this default bump.","19/Jan/18 9:43 PM;scottz;When we do NOT set the ORDERER_KAFKA_VERSION=0.9.0.1 in docker compose file, and let it default to its internal default (0.9 in v1.0.x, and 0.10 in v1.1), we see this happen when we upgrade the orderers. Yes if we DO set that env var, which means the upgraded v1.1 orderer also uses 0.9, then there is no problem. Yes a simple solution would be to set the min version to 0.9.0.1 by default in v1.1 orderer configuration. This has been troubleshooted (not a real word, but hey, it makes sense here) with Luis, so he is aware of the issue.",24/Jan/18 8:49 PM;sanchezl;The upgrade documentation will reflect the need to set the {{ORDERER_KAFKA_VERSION}} property when upgrading using the docker images. FAB-7887 will enhance the logging output to provide a hint that the Kafka version property might need to be updated. ,,,,,,,,,,,,,,,,,,,,
Couchdb index warming should not be in commit path,FAB-7733,26807,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,chris.elder,denyeart,denyeart,15/Jan/18 3:08 PM,23/Jan/18 2:59 AM,26/Apr/18 6:50 AM,23/Jan/18 2:59 AM,,,,,,,v1.1,,,fabric-ledger,,,,0,,,,,,,,,"Per review comments in [https://gerrit.hyperledger.org/r/#/c/15057/] , the index warming in the commit path will impact performance, it needs to be moved out of commit path in a separate goroutine or daemon.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i020t1:,,,,,,,,chris.elder,denyeart,,,,,,,,,master,,,true,19/Jan/18 4:18 PM;chris.elder;https://gerrit.hyperledger.org/r/#/c/16983/,,,,,,,,,,,,,,,,,,,,,,,
autoWarmIndexes should not be in peer config yaml or doc rst,FAB-7732,26806,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,chris.elder,denyeart,denyeart,15/Jan/18 3:08 PM,19/Jan/18 9:17 PM,26/Apr/18 6:50 AM,19/Jan/18 9:17 PM,,,,,,,v1.1,,,fabric-ledger,,,,0,,,,,,,,,"Per review comments in [https://gerrit.hyperledger.org/r/#/c/15057/] , all users will want autoWarmIndexes true, therefore the extra config will cause consumability issues and should be removed.  However, we will leave support for the config option in the peer binary, in case autoWarmIndexes needs to be disabled for unexpected service situations.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i020st:,,,,,,,,chris.elder,denyeart,,,,,,,,,master,,,true,19/Jan/18 4:17 PM;chris.elder;https://gerrit.hyperledger.org/r/#/c/16999/,,,,,,,,,,,,,,,,,,,,,,,
Fix events proto definition of filtered transaction,FAB-7731,26805,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,15/Jan/18 2:37 PM,17/Jan/18 3:21 AM,26/Apr/18 6:50 AM,16/Jan/18 7:43 AM,,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,"Need to make events proto definitions aligned with protobuf code guidelines, e.g. replace 

{code}
// FilteredTransactionActions is a wrapper for array of TransactionAction
// message from regular block
message FilteredTransactionActions {
    repeated FilteredChaincodeAction chaincodeActions = 1;
}
{code}

with 

{code}
// FilteredTransactionActions is a wrapper for array of TransactionAction
// message from regular block
message FilteredTransactionActions {
    repeated FilteredChaincodeAction chaincode_actions = 1;
}
{code}",,,,,,,,,,,,,,,,,FAB-7767,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i020sl:,,,,,,,,C0rWin,harrisob@us.ibm.com,,,,,,,,,master,,,true,"15/Jan/18 2:50 PM;harrisob@us.ibm.com;If changes can be made how about the ccEvent ==> chaincode_event ?, and the repeated filtered_tx ==> filtered_transactions",16/Jan/18 7:43 AM;C0rWin;[~harrisob@us.ibm.com]please open another JIRA since this one was merged and closed.,,,,,,,,,,,,,,,,,,,,,,
Filtered Block does not have Chaincode event payload,FAB-7730,26801,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,harrisob@us.ibm.com,harrisob@us.ibm.com,15/Jan/18 3:00 AM,15/Jan/18 5:24 PM,26/Apr/18 6:50 AM,15/Jan/18 4:20 PM,v1.1.0-preview,,,,,,v1.1.0-alpha,,,fabric-peer,,,,0,,,,,,,,,"When using NodeSDK and receiving a filtered block, the chaincodeActions has a ccEvent with a payload of an empty byte array. When using the full block, the payload does have data. Fields in the filtered blocks should not have values that are different than the actual value. The field should be removed if the intent is to not show the value.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i020rp:,,,,,,,,C0rWin,denyeart,harrisob@us.ibm.com,jyellick,muralisr,troyronda,,,,,,,,,"15/Jan/18 7:47 AM;C0rWin;So current implementation were based on the existing filtering events [{{eventhelper.go}}|https://github.com/hyperledger/fabric/blob/master/events/producer/eventhelper.go#L97]:

{code}
						ccEvent, err := utils.GetChaincodeEvents(caPayload.Events)
						if err != nil {
							return nil, nil, """", fmt.Errorf(""error unmarshalling chaincode event for block event: %s"", err)
						}

						chaincodeAction := &pb.FilteredChaincodeAction{}
						if ccEvent.GetChaincodeId() != """" {
							filteredCcEvent := ccEvent
							// nil out ccevent payload
							filteredCcEvent.Payload = nil
							chaincodeAction.CcEvent = filteredCcEvent
						}
						transactionActions.ChaincodeActions = append(transactionActions.ChaincodeActions, chaincodeAction)
{code}

Please update if the payload *DO* need to be populated, since it wasn't beforehand.","15/Jan/18 11:10 AM;denyeart;Per FAB-5481 the design was that only event name got populated, not the event payload.  This alerts a client that there was an event, but the client would have to then retrieve the full block if they want the event payload.  I'm not suggesting I agree with this, that's just what was written in FAB-5481 design.  We'll need to check with [~wlahti] and [~muralisr] on the original rationale.",15/Jan/18 2:21 PM;harrisob@us.ibm.com;as a side note is there a reason the new event proto has a mix of camel case names and underscore names along with a mix of repeated names that end in 's' and those do not ?,"15/Jan/18 2:33 PM;C0rWin;{quote}
as a side note is there a reason the new event proto has a mix of camel case names and underscore names along with a mix of repeated names that end in 's' and those do not ?
{quote}

apparently this is a mistake",15/Jan/18 2:43 PM;C0rWin;[~harrisob@us.ibm.com] to address your question please see FAB-7731 and consequent CR https://gerrit.hyperledger.org/r/16839,"15/Jan/18 2:50 PM;jyellick;Can we identify the original requirement for including the chaincode event in the filtered block?

To me, this sounds like a bad idea.  If the purpose of the filtered block is security oriented, then including the chaincode events (and especially their payload) seems to defeat the purpose, as it would very likely leak at least the chaincode being invoked, if not much more.","15/Jan/18 3:26 PM;denyeart;I've heard the requirement to include chaincode events from a few people, I know this is important for [~troyronda] .  I agree that it can leak information.  I think Troy mentioned previously that he thought it was ok, since chaincodes can opt not to send chaincodes events.  Let's hear full rationale from Troy's perspective.  Also Troy, can you comment on the original question in Description (if including chaincode event name but not chaincode event payload is helpful)?",15/Jan/18 4:01 PM;troyronda;[~denyeart] - The chaincode event name (not payload) is important for notification purposes in the filtered events. If the client is interested in that event then the client calls back to chaincode. This handling is similar to when a client receives an event for a transaction of interest then the client calls back. We are careful to ensure that chaincode event names minimize leaking.,15/Jan/18 4:19 PM;C0rWin;Closing this item since it works as expected ,15/Jan/18 5:24 PM;muralisr;[~C0rWin] just my two cents (great after closing the JIRA eh ? :-) but just saw the mention on RC)...  The rationale for the original requirement  was to take a middle course to _minimize leaking_  (just to piggyback on [~troyronda] comment above) but give enough information to avoid churn.  Users can further play with the CC event name to reduce the leakage if they so wish.,,,,,,,,,,,,,,
Replace Apache license header due to build error ,FAB-7724,26789,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,luomin,luomin,13/Jan/18 2:01 AM,31/Jan/18 4:43 PM,26/Apr/18 6:50 AM,31/Jan/18 4:43 PM,v1.1.0-preview,,,,,,v1.1,,,fabric-build,,,,0,build-system,,,,,,,,no error here. close this issue,,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i020p9:,,,,,,,,luomin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - Block decode fails at proto_kv_rw_set` doesn't have a function `getNamespace()`,FAB-7711,26773,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,12/Jan/18 4:24 PM,05/Feb/18 6:46 PM,26/Apr/18 6:50 AM,05/Feb/18 6:46 PM,,,,,,,v1.1,,,fabric-sdk-node,,,,0,,,,,,,,,"When using an event processing there is a case when the array of kv_rw is an empty array. The decode of the blocks needs to handle this case.

 ",,,,,,,,,,,,,,FAB-7642,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i020lp:,,,,,,,,harrisob@us.ibm.com,mastersingh24,sudheesh001,,,,,,,,,,,,"13/Jan/18 11:49 AM;sudheesh001;I was successfully able to replay this bug when you add a new method to the `Array.prototype`. For an empty `[]` object, the `for (i in [])` returns the `function` for the new method. However, adding new methods to array's is a fairly common practice and shouldn't result in the SDK from breaking.",13/Jan/18 12:06 PM;mastersingh24;[~sudheesh001] - Do you have an example of a transaction you submitted which results in the event with no kv_rw_set ?,"14/Jan/18 8:10 AM;sudheesh001;[~mastersingh24] You can replicate the same issue with the sample code itself available on hyperledger by running this controller. The only change is add the following piece of code in the file

Array.prototype.mymethod = function(array) \{ // Do anything }

And then run this part of the controller.

https://github.com/hyperledger/education/blob/master/LFS171x/fabric-material/tuna-app/controller.js#L87-L245","05/Feb/18 6:45 PM;harrisob@us.ibm.com;I was unable to fix this kind of issue by adding checks to the places where we are working with an Array object as it then failed in dependent packages. 

Is this a common thing in Javascript to change the base objects ? I do not see how we can be expected to protect the SDK code from applications that wish to change how the actual language works.",,,,,,,,,,,,,,,,,,,,
Channel configuration (add org) fails via node sdk ,FAB-7706,26767,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,silentspark,silentspark,12/Jan/18 7:26 AM,09/Apr/18 11:27 AM,26/Apr/18 6:50 AM,24/Jan/18 8:30 PM,v1.0.5,v1.1.0-preview,,,,,v1.1,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"I'm using node sdk to configure channel (refer to fabric-sdk-node/test/integration/configtxlator.js). It's ok to delete an org or update BatchSize, but failed to add an org. The error msg in Orderer log is below. I verified the updated json is correct and I can add an org via command line ""peer channel update"" successfully. 

***********************************************************************************************
_2018-01-10 10:51:09.201 UTC [orderer/common/broadcast] Handle -> DEBU dc1 Preprocessing CONFIG_UPDATE_
_2018-01-10 10:51:09.201 UTC [orderer/configupdate] Process -> DEBU dc2 Processing channel reconfiguration request for channel testchainid_
_2018-01-10 10:51:09.201 UTC [orderer/common/broadcast] Handle -> WARN dc3 Rejecting CONFIG_UPDATE because: {color:#ff0000}Error authorizing update: unexpected EOF{color}_
_2018-01-10 10:51:09.201 UTC [orderer/main] func1 -> DEBU dc4 Closing Broadcast stream_
_***********************************************************************************************_
Attached my node.js code and add org json file (org3MSP). I'm using Fabric 1.0.5 and fabric-sdk-node-1.1.0-preview.",,,,,,,,,,,,,,,,,,,,12/Jan/18 7:26 AM;silentspark;configtxlator.js;https://jira.hyperledger.org/secure/attachment/14143/configtxlator.js,22/Jan/18 9:18 AM;silentspark;orderer.log;https://jira.hyperledger.org/secure/attachment/14358/orderer.log,12/Jan/18 7:26 AM;silentspark;org3content.json;https://jira.hyperledger.org/secure/attachment/14144/org3content.json,23/Jan/18 2:52 AM;silentspark;updated_config_json_add;https://jira.hyperledger.org/secure/attachment/14365/updated_config_json_add,23/Jan/18 2:52 AM;silentspark;updated_config_proto_add;https://jira.hyperledger.org/secure/attachment/14366/updated_config_proto_add,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i020kl:,,,,,,,,harrisob@us.ibm.com,jyellick,pmcosta1,silentspark,SwatiRaj,,,,,,,,,,"19/Jan/18 3:06 PM;jyellick;I would appreciate some eyes on this from [~harrisob@us.ibm.com], but I believe this is most likely a problem marshaling the org definition.

The configtxlator framework handles converting between JSON and protobuf in a custom way.  In particular, it turns fields which are specified as opaque bytes into unmarshaled representations of those bytes.  I believe the line:

{noformat}
updated_config.channel_group.groups.Application.groups[orgMSP]=JSON.parse(org_content);
{noformat}

is assigning the raw JSON into this map, and the proto marshaling is not capable of converting the nested JSON into the opaquely marshaled bytes.

Could you please include the output of the orderer log at debug level when this submission fails?","22/Jan/18 9:18 AM;silentspark;Hi Jason,

     Thx for your feedback. Attached the orderer log with DEBUG level.[^orderer.log]","22/Jan/18 4:17 PM;jyellick;[~silentspark] as you can see in your log:

{noformat}
2018-01-22 09:15:45.840 UTC [orderer/main] Broadcast -> DEBU 8e5 Starting new Broadcast handler
2018-01-22 09:15:45.840 UTC [orderer/common/broadcast] Handle -> DEBU 8e6 Starting new broadcast loop
2018-01-22 09:15:45.840 UTC [orderer/common/broadcast] Handle -> DEBU 8e7 Preprocessing CONFIG_UPDATE
2018-01-22 09:15:45.840 UTC [orderer/configupdate] Process -> DEBU 8e8 Processing channel reconfiguration request for channel testchainid
2018-01-22 09:15:45.840 UTC [orderer/common/broadcast] Handle -> WARN 8e9 Rejecting CONFIG_UPDATE because: Error authorizing update: unexpected EOF
2018-01-22 09:15:45.840 UTC [orderer/main] func1 -> DEBU 8ea Closing Broadcast stream
{noformat}

 the reason the orderer is rejecting your request is because *Error authorizing update: unexpected EOF*.  This implies that the JSON has not been converted back into protobuf correctly and so the unmarshaling has failed.   [~harrisob@us.ibm.com] can you take a look?","22/Jan/18 7:49 PM;jyellick;I discussed this with [~harrisob@us.ibm.com] directly, and it looks like your code is not properly checking the HTTP response codes.  My strong suspicion is that you are getting back an error on one of the calls to 'encode', which is then propagating all the way to the orderer.","23/Jan/18 2:53 AM;silentspark;Hi [~jyellick] , [~harrisob@us.ibm.com].  I didn't get error back from configtxlator encode. I uploaded the update_config_json and update_config_proto. They look good. Could you take a look or test my nodejs code, let me know the problem in my code?","23/Jan/18 8:07 PM;jyellick;[~silentspark] I am actively investigating this with [~harrisob@us.ibm.com], we have been able to reproduce this with the node SDK.  Surprisingly though, taking the same artifacts and using curl instead of the node POST request produces a valid config update.  We are trying to identify the reason for this discrepancy.","24/Jan/18 8:30 PM;harrisob@us.ibm.com;please change to use the following in your request to compute the config update

        return new Promise((resolve, reject) =>\{
            requester.post(\{
                url: 'http://127.0.0.1:7059/configtxlator/compute/update-from-configs',
                encoding: null,
                headers: \{
                    accept: '*/*',
                    expect: '100-continue'
                },
                formData: formData
            }, function optionalCallback(err, res, body) \{
                if (err) \{
                    t.fail('Failed to get the updated configuration ::'+err);
                    reject(err);
                } else \{
                    var proto = Buffer.from(body, 'binary');
                    resolve(proto);
                }
            });
        });

 

notice the addition of  encoding and headers","25/Jan/18 3:10 PM;silentspark;Hi Bret, it works, thx a lot!

Will the configtxlator be improved to handle the post request without null encoding and headers correctly?","25/Jan/18 4:22 PM;jyellick;[~silentspark] I'm not in a position to easily test this, but I don't think all of the header fields are necessarily required, these are simply the header components which curl was setting.  I'd suggest that you try paring them down until you find the minimal set required.

{{configtxlator}} does nothing special, it uses standard golang HTTP libraries plus Gorilla Mux.  If I had to guess, the POST from Node is probably defaulting to request some encoding which changes the returned bytes, and the golang code is obliging.  

You can see the actual code from {{configtxlator}} here: https://github.com/hyperledger/fabric/blob/master/common/tools/configtxlator/rest/configtxlator_handlers.go#L32-L91

Note, there is no processing of the headers, nothing in this code which would change based on the specified headers, so it seems like the change is most likely happening inside of core golang code (and outside the scope of fabric).","27/Jan/18 4:01 AM;silentspark;Hi Jason, Bret,

    Thx for your help on this issue!",,,,,,,,,,,,,,
"Fabric-CA: When using postgres as DB, Serial and AKI values are in non-hex, not usable in commands like revoke",FAB-7697,26749,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,Nishi,Nishi,11/Jan/18 3:27 PM,11/Jan/18 7:14 PM,26/Apr/18 6:50 AM,11/Jan/18 4:49 PM,,,,,,,,,,fabric-ca,,,,0,,,,,,,,,"Currently the way Serial, AKI values are stored when using postgres DB are not consumable directly to use in commands like revoke.

Commit level: *ebfc050baee7ea222edc64637741f406fa9c54b0*

For examples comparing values (for different users though) in postgres and mysql we have:
{code:java}
Serial# postgres: \x35346461653064643335663737353036316664383666383030336439346330336362313935366462

mysql:  721e1a8eda83525bdd7f6a2093122720b420545c{code}
 
{code:java}
AKI: 

postgres: \x35333739363238353333356436323264636433356235363331363262643966633934626232343665

mysql:7901c8c18a48063ff43e9cb7727d230961fd71{code}
 

 

Could we have Serial and AKI values directly in hex format in postgres DB like in mysql?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i020f9:,,,,,,,,Nishi,skarim,,,,,,,,,,,,,"11/Jan/18 4:49 PM;skarim;This is not really a bug, it is just how Postgres chooses to display binary data. We derive the certificates table schema from CFSSL and we can't really change the schema, otherwise, we risk being incompatible with CFSSL. Both Serial and AKI are stored as hex. The right way to retrieve column data in hex format is to do a SQL query rather than just inspecting the table directly. 

For example, you can query the Serial number in hex format with:

SELECT convert_from(serial_number, 'SQL_ASCII') FROM certificates;

I am marking this as Done, please open back up if you don't agree. ",,,,,,,,,,,,,,,,,,,,,,,
"SDKUtils.getProposalConsistencySets() uses RWsets to compare ProposalResponses, which is not sufficient to detect tampering of DB or non-determinism",FAB-7693,26731,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rickr,ryokawajp,ryokawajp,11/Jan/18 3:26 AM,23/Mar/18 2:40 PM,26/Apr/18 6:50 AM,23/Jan/18 2:05 PM,v1.0.0,v1.0.1,v1.1.0-preview,,,,v1.1,,,fabric-sdk-java,,,,0,java-SDK,v1.0,,,,,,,"*Background:*

As far as I know, a Byzantine failure in a query transaction must be handled in the client-side. This is because in the case of an invoke transaction, an endorsement policy is checked in committing peer, while in the case of a query transaction, there is no such check in a peer.

So we used SDKUtils.getProposalConsistencySets() to implement this checking of consistency among the ProposalResponse objects returned from different peers.

To verify this implementation, we did some tampering tests. That is, we changed the values of some keys in Couch DB using Couch DB's REST API directly in one or two peers and tried to query the keys through a query transaction sent to 4 peers including the tampered peer.

Then we got 4 Proposal Responses, which were passed to SDKUtils.getProposalConsistencySets(). Additionally, I implemented the client to chose the largest consistency set as the ""consensus"".

*Expected behavior:*

Let PR = \{p1, p2, p3, p4} be a set of queried values in a Proposal Responses from peer 1, 2, 3, and 4. Let A be the correct value of a key and B be a tampered value of the key. Then, getProposalConsistencySets() is expected to convert PR as follows:
 * input: PR -> output: Consistency Sets (please ignore the order of elements)
 * \{A, A, A, A} -> \{ \{A, A, A, A} }
 * \{A, A, B, A} -> \{ \{A, A, A}, \{B} }
 * \{A, B, B, A} -> \{ \{A, A}, \{B, B} }

*Observed behavior:*
 * \{A, A, A, A} -> \{ \{A, A, A, A} }
 * \{A, A, B, A} -> \{ \{A, A, A, B} }
 * \{A, B, B, A} -> \{ \{A, A, B, B} }

*Cause of this result:*

[https://github.com/hyperledger/fabric-sdk-java/blob/master/src/main/java/org/hyperledger/fabric/sdk/SDKUtils.java#L124]

According to the source code, getProposalConsistencySets() uses the read-write set in the Proposal Response object as a key of a hash map in order to group the collection of  Proposal Response objects. 

[https://github.com/hyperledger/fabric-sdk-java/blob/master/src/main/proto/ledger/rwset/kvrwset/kv_rwset.proto#L67]

In the case of a query transaction, Proposal Responses contain read sets only. According to the comment in kv_rwset.proto, a read set does not contain the value of a key. It only contains a key and its version number. The version number is determined from the block height and the TX number. Therefore, if a key in a World State DB is tampered by an external tool, a read set does not contain enough information to detect the change of the value.

*Proposed fix:*

In general, not only a tampering of World State DB but also non-determinism of a chaincode could cause a Byzantine failure. So it seems better to use the return value of a chaincode in addition to the RW set as a key of the hash map.

(I have not evaluated side-effects or performance changes by this modification yet.)

 ","* Hyperledger Fabric v1.0.1
 * fabric-sdk-java v1.0.1
 * 2 Orderer nodes, 4 Kafka brokers, 3 Zookeeper nodes
 * 4 peers (3-out-of-4 endorsement policy)
 * Couch DB
 * Docker v17.06.0-ce
 * Ubuntu Linux 16.04 (x86_64)
 * WebSphere Application Server v9.0.0.4
 * IBM Java v1.8.0",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i020b9:,,,,,,,,denyeart,rickr,ryokawajp,,,,,,,,master,,,true,"12/Jan/18 5:43 PM;rickr;Hi - 
 Thanks for looking into this.  The consistence sets were not meant to solve the problem Byzantine failure tampering directly.
 The purpose was to fail fast if the proposals results are inconsistent  This will happen in the fabric when responses are sent to the orderer and then to committer peers.  They make sure the signatures are consistent.   The signatures are across the whole payload response so the SDK should probably group by that.  Today the SDK is then only catching a subset of the possible failures.  I'll probably use this JIRA to investigate changing that.  

The SDK never chooses the largest grouping.  By default the only thing the SDK does is throw an exception when trying to send to the orderer proposals that are inconsistent which can be turned off.

I decided to make it also a utility that applications can call so they if they want could chose which consistence set.   Maybe certain peers are more trusted than others","12/Jan/18 8:29 PM;rickr;Consistency set should be based off  of

[https://github.com/hyperledger/fabric-chaincode-java/blob/308eb634db3054bc75a5c944946bf3458ca1f478/shim/src/main/proto/peer/proposal_response.proto#L49]

 

 ","14/Jan/18 8:27 PM;denyeart;I agree with this.  The consistency check should compare the ProposalResponse payloads, rather than just the RWSet.  The ProposalResponse payload is what gets signed upon endorsement, and therefore this will match the validation checking that committing peers do.  The ProposalResponse payload also includes the chaincode response (over and above the results RWSet), which is what should be checked for consistency for client queries across N peers.

 

[~harrisob@us.ibm.com] I'm tagging you so that you can check whether node js SDK is correctly comparing the ProposalResponse payloads.","15/Jan/18 2:36 AM;ryokawajp;[~rickr] [~denyeart], thank you for the comments. I understood that getProposalResponseConsistencySets() was developed for another reason so it is not a bug. Our team just tried to implement BFT for query TXes by ourselves and found that getProposalResponseConsistencySets() is useful and reused it.

According to the link in Rick's comment, ProposalResponse.payload (type is ProposalResponsePayload) contains both proposal hash and serialized ChaincodeAction. So this object looks perfect for our purpose. I also agree to use this.",18/Jan/18 5:41 PM;rickr;In review https://gerrit.hyperledger.org/r/#/c/16807/,"23/Mar/18 2:35 PM;ryokawajp;Thank you [~rickr] and [~denyeart] for the modification, and sorry for this late reply.
It is in the master branch and in v1.1.0-alpha tag!
",23/Mar/18 2:40 PM;rickr;Only in master branch which is still v1.1.0 and in SNAPSHOT-1.1.0 in Maven.,,,,,,,,,,,,,,,,,
EventHub connections not being properly closed by the node sdk (1.0.5),FAB-7690,26726,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,Asara,Asara,10/Jan/18 8:43 PM,18/Jan/18 3:16 PM,26/Apr/18 6:50 AM,18/Jan/18 3:16 PM,v1.0.0,v1.0.1,v1.0.2,v1.0.3,v1.0.4,v1.0.5,v1.1,,,fabric-peer,fabric-sdk-node,,,2,Release-planning-1.1,sdk,,,,,,,"Quick Summary:

When running the the BalanceTransfer example, we are noticing a discrepancy between running against a peer in docker, and one that is running on a bare-metal host.  

When running against docker, EventHub connections are routienly closed ~30 seconds after the transaction has completed and the transaction event has been received by the event hub.

On the flip side, when running against the peer binary on a bare-metal host, the event hub connections are held as established indefinitely.  
At large volumes (1k+ tx), the peer crashes.

Process to reproduce:
Set up the BalanceTransfer example
Install and instantiate the chaincode
Send an invoke
After the invoke has successfully completed, the HFC logs will report that the stream has ended.  However, when looking at established connections (netstat/lsof), there is a connection that is still open.

A short term, pesudo-workaround is setting peer.events.keepalive.minInterval (suggested by [~jyellick]) to 5s (not set in my config originally). This allows for a small bump in successful transactions, but still eventually crashes.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i020a5:,,,,,,,,5igm4,Asara,harrisob@us.ibm.com,jrosmith,,,,,,,,,,,18/Jan/18 3:16 PM;harrisob@us.ibm.com;The GRPC close has been added to the disconnect call in v1.1,,,,,,,,,,,,,,,,,,,,,,,
EventHub connections not being closed via node-sdk with fabric 1.0.5,FAB-7689,26725,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,Asara,Asara,10/Jan/18 8:39 PM,06/Feb/18 8:44 PM,26/Apr/18 6:50 AM,06/Feb/18 8:44 PM,,,,,,,v1.0.3,v1.1,,fabric-sdk-node,,,,0,,,,,,,,,"Quick Summary:

When running the the BalanceTransfer example, we are noticing a discrepancy between running against a peer in docker, and one that is running on a bare-metal host.  

When running against docker, EventHub connections are routienly closed ~30 seconds after the transaction has completed and the transaction event has been received by the event hub.

On the flip side, when running against the peer binary on a bare-metal host, the event hub connections are held as established indefinitely.  
At large volumes (1k+ tx), the peer crashes.

Process to reproduce:
Set up the BalanceTransfer example
Install and instantiate the chaincode
Send an invoke
After the invoke has successfully completed, the HFC logs will report that the stream has ended.  However, when looking at established connections (netstat/lsof), there is a connection that is still open.

A short term, pesudo-workaround is setting peer.events.keepalive.minInterval (suggested by [~jyellick]) to 5s (not set in my config originally). This allows for a small bump in successful transactions, but still eventually crashes.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0209x:,,,,,,,,Asara,harrisob@us.ibm.com,,,,,,,,,release-1.0,,,true,"18/Jan/18 3:20 PM;harrisob@us.ibm.com;The balance transfer will be rewritten using the channel-based events which is using the same port as other peer services. The ""close has been added to the channel-based event NodeSDK ""disconnect"" call.",25/Jan/18 7:00 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/17157/,,,,,,,,,,,,,,,,,,,,,,
Mechanism warning when performing npm install,FAB-7685,26719,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,latitiah,latitiah,10/Jan/18 4:53 PM,16/Mar/18 4:46 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,,,,,0,,,,,,,,,"*fabric-sdk-node commit:* ea8d0c3f6c8553fe92758c3107b46ad178e6d69d
*fabric commit:* ddc1307

When executing tests that use the Node SDK, there is a warning displayed when performing the 'npm install' portion of the test.

{code}
And I use the NodeJS SDK interface                                                                                   # steps/basic_impl.py:26
../src/pkcs11/mech.cpp: In member function ‘void Mechanism::Free()’:
../src/pkcs11/mech.cpp:121:15: warning: deleting ‘void*’ is undefined [-Wdelete-incomplete]
   delete(param);
{code}

To duplicate, from the fabric-test repo, go to the feature directory and run ""behave -n FAB-3852 -k"" (after performing prereqs in the README). This executes 4 test scenarios, 2 of which use the Node SDK.",,,,,,,,,,,,,,,,,,,,16/Feb/18 3:26 PM;latitiah;package.json;https://jira.hyperledger.org/secure/attachment/14631/package.json,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0208l:,,,,,,,,harrisob@us.ibm.com,latitiah,,,,,,,,,,,,,06/Feb/18 8:48 PM;harrisob@us.ibm.com;Why is this a NodeSDK issue ? Looks like an issue with Python script ?,07/Feb/18 9:27 PM;harrisob@us.ibm.com;I have done 'npm install' and do not see these messages. I do not see how this is a NodeSDK issue. I also have no idea what component should look at this.,16/Feb/18 3:26 PM;latitiah;This problem is also happening in CI (see [https://jenkins.hyperledger.org/job/fabric-test-merge-x86_64/171|https://jenkins.hyperledger.org/job/fabric-test-merge-x86_64/171/] as an example). It happens when performing an 'npm install' The package.json file that is used has been added to the issue.,,,,,,,,,,,,,,,,,,,,,
Make gossip abort chain processing when validation fails,FAB-7684,26716,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,10/Jan/18 3:57 PM,19/Jan/18 2:51 PM,26/Apr/18 6:50 AM,19/Jan/18 2:51 PM,,,,,,,,,,fabric-gossip,,,,0,,,,,,,,,"In case validation fails, gossip should stop chain processing because there is no point in continuing on.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0207x:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
[Behave] - incorrect test case result in behave tests,FAB-7683,26715,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jeffgarratt,rameshthoomu,rameshthoomu,10/Jan/18 3:36 PM,01/Feb/18 3:31 PM,26/Apr/18 6:50 AM,01/Feb/18 3:31 PM,,,,,,,,,,fabric-quality,,,,0,quality,,,,,,,,"observed below log from one of the behave test CI job. I see the test case is failed but the summary is showing 0 failed.
{code:java}
00:15:14.687 Scenario Bootstrap a development network with 4 peers (2 orgs)  and 1 orderer (1 org), each having a single independent root of trust (No fabric-ca, just openssl) -- @1.4 Orderer Options failed. Getting container logs
00:15:14.687 
00:15:14.758 context.failed = False
00:15:14.758 1 feature passed, 0 failed, 2 skipped
00:15:14.758 4 scenarios passed, 0 failed, 24 skipped
00:15:14.758 404 steps passed, 0 failed, 211 skipped, 0 undefined
00:15:14.758 Took 8m56.890s
00:15:14.867 $ ssh-agent -k{code}
Jenkins build log: https://jenkins.hyperledger.org/view/fabric/job/fabric-verify-behave-tests-x86_64/264/consoleFull",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0207p:,,,,,,,,rameshthoomu,,,,,,,,,,,,,,"01/Feb/18 3:31 PM;rameshthoomu;As per Jeff, no issue with the test case result here as we see all tests are executed successfully. Closing this issue as we disabled this job from fabric.",,,,,,,,,,,,,,,,,,,,,,,
some repos are not updated in fabric-test/Makefile,FAB-7680,26700,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sambhavdutt,scottz,scottz,09/Jan/18 11:04 PM,05/Feb/18 3:08 PM,26/Apr/18 6:50 AM,10/Jan/18 7:30 PM,v1.1,,,,,,v1.1,,,fabric-quality,,,,0,,,,,,,,,"In fabric-test/Makefile, similar to fabric and ca, we should also (optionally) clone and git pull the latest code in the other repositories which are submodules (because they could be referenced in some of our tests: cello, fabric-samples, fabric-sdk-node.

We do not need to build any objects in those repositories. That is, there is no need to add anything to docker-images.

We need something like the following, but for each of the other listed missing repos:

.PHONY: ca
ca:
if [ ! -d ""$(CA_DIR)"" ]; then \
echo ""Clone CA REPO""; \
cd $(HYPERLEDGER_DIR); \
git clone $(FABRIC_CA) $(CA_DIR); \
fi
cd $(CA_DIR) && git pull $(FABRIC_CA)

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02051:,,,,,,,,sambhavdutt,scottz,,,,,,,,,,,,,"10/Jan/18 7:29 PM;scottz;Those other repositories are not used, except within fabric-test/ submodules. We know hyperledger/fabric/ is used when building OTE and LTE, but of course our Makefile already clones and pulls the latest commits for that repo. It is not necessary to do the same for these other repositories, since we only use the submodules (which ARE updated). Therefore this bug is not a bug, and can be closed.

Summary of the tools and the repositories used:
 * PTE uses fabric-test/fabric-sdk-node/
 * ATD uses fabric-test/cello
 * OTE use fabric/ , for building the OTE go code which depends on other orderer code in the fabric repo, which requires same vendor path
 * LTE uses fabric/ , for building the LTE tool, which depends on other ledger code in the fabric repo which requires same vendor path
 * Behave feature tests use protos built in fabric repo and could reference scripts from fabric/e2e and from fabric-samples

 ",,,,,,,,,,,,,,,,,,,,,,,
performance degradation,FAB-7678,26698,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,dongming,dongming,09/Jan/18 9:13 PM,30/Jan/18 3:23 AM,26/Apr/18 6:50 AM,30/Jan/18 3:23 AM,,,,,,,,,,,,,,0,,,,,,,,,"Measure TPS degradation with v1.0.4 with multi-channels using PTE ([https://github.com/hyperledger/fabric-test/tree/master/tools/PTE)] on a vLaunch Linux system.  The blockchain network is 2 org, 2 peer per org, 4 kafka, 3 zookeepers, 3 orderers, 2 ca, TLS enabled, levelDB, both org are associated with all channels. We measured invoke TPS for v1.0.3, v1.0.4, v1.0.5 with 1 channel, 2 channels, 8 channels.  The TPS results are as follow:

v1.0.3: 1 channel: 82.66, 2 channels: 90.18, 8 channels: 98.32

v1.0.4: 1 channel: 110.36, 2 channels: 88.68, 8 channels: 91.05

v1.0.5: 1 channel: 116.27, 2 channels: 107.53, 8 channels: 104.18

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0204l:,,,,,,,,denyeart,dongming,vukolic,,,,,,,,,,,,"10/Jan/18 7:39 PM;dongming;Comment from Marko Vukolic on 1/10/2018:

Hi Barry,

what we observed was that the MVCC processing in validation got longer - but we do not have more detailed profiling. We know it is not ledger of VSCC part of the validation it is really inside MVCC check which is in between the two.

Hope this helps a bit
Marko","17/Jan/18 9:51 PM;Clayton Sims;[~marko.vukolic]  is this something you can help the team with to further profile and narrow the root cause?

 ","17/Jan/18 9:57 PM;denyeart;[~dongming] If I am reading the stats correctly in the description, it looks like TPS *improved* from 82.66 TPS to 116.27 TPS (single channel, 1.0.3 to 1.0.5). And from 98.32 to 104.18 TPS (8 channels, 1.0.3 to 1.0.5).

I'm not understanding what the regression is?   Yes it looks like 1.0.4 was a little slower, but 1.0.5 is a little faster.  Maybe that is just within the margin of error of the test?","17/Jan/18 10:18 PM;dongming;[~denyeart]  Yes, v1.0.5 has  better TPS then v1.0.3.  I have done some test and observed that v1.0.4 is consistently slower than v1.0.3.  If we consider this is within the margin of error, then we can close this bug.","18/Jan/18 2:10 PM;vukolic;We observed at some point a regression in MVCC latency but since we were evaluating on master it is difficult to pinpoint which release was affected. What we seem to be needing is a bit more profiling in those tps numbers quoted above. Even simple latency staging split in validation phases would help (we use VSCC/MVCC/ledger staging internally)

 

sorry this does not help more.","18/Jan/18 2:38 PM;denyeart;[~dongming] [~vukolic] Has anybody looked into performance profiling utilities at the golang level?  Seems that would give us the most detailed answers.  Thoughts?

If we are evaluating performance on master (1.1), then a 1.0.x (release) vs 1.1 (master) analysis should be done.  Has anybody done that yet?","19/Jan/18 2:54 PM;dongming;Another data point on v1.1.0-preview

1 channel: 138.39, 2 channels: 134.13, 8 channels: 129.43

overall, v1.1.0-preview has the best TPS.","22/Jan/18 2:47 PM;dongming;The TPS for v1.1 commit a85b2fa are:

1 channel: 147.80, 2 channels: 140.01, 8 channels: 134.64","30/Jan/18 3:23 AM;denyeart;Since the performance is generally improved on the latest 1.0.x and 1.1, I'm not seeing an perf bug here.  It seems the 1.0.4 perf numbers are within the margin of error.  I will close this item.",,,,,,,,,,,,,,,
make verify broken by FAB-7649,FAB-7675,26691,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sykesm,sykesm,sykesm,09/Jan/18 4:31 PM,09/Jan/18 7:40 PM,26/Apr/18 6:50 AM,09/Jan/18 7:40 PM,,,,,,,,,,fabric-build,,,,0,,,,,,,,,packages_diff combined the positive and negative and ended up excluding all of the go files.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0203p:,,,,,,,,sykesm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Potential non-deterministic transaction validation,FAB-7668,26679,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,divyank,divyank,09/Jan/18 3:22 AM,27/Jan/18 12:38 PM,26/Apr/18 6:50 AM,27/Jan/18 12:38 PM,,,,,,,DUPLICATE,Not a Bug,,fabric-peer,,,,0,,,,,,,,,"The peer's transaction validation code in fabric/core/committer/txvalidator/validator.go contains five calls to sccprovider.IsSysCC(), branching into different validation flows based on the boolean evaluated.

If two peers are running a different set of system chaincodes, they could evaluate this boolean differently, leading to different determinations of a transaction's validity.",,,,,,,,,,,,,,FAB-7673,,FAB-7673,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i02011:,,,,,,,,divyank,mastersingh24,yacovm,,,,,,,,,,,,"09/Jan/18 3:47 AM;divyank;A possible solution to this would be to store some system chaincode metadata on the ledger (like we do for user chaincode). This would help all peers have a standard view of what system chaincodes are running. This could be part of the channel config or there could be an instantiate step for system chaincodes like we have for user chaincodes. In the latter case, we could also have a set of ""required"" system chaincodes (like LSCC) that don't need instantiation as we can assume presence on all peers.",09/Jan/18 10:52 PM;yacovm;This is a duplicate of FAB-7673,"20/Jan/18 11:53 PM;mastersingh24;This is not a bug IMHO.  If people decide to use their own system chaincode, they must be responsible for distributing the proper peer binaries and/or plugins to all participants.",,,,,,,,,,,,,,,,,,,,,
fabric-ca ldap attributes that are missing cause error,FAB-7660,26670,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,rennman,rennman,08/Jan/18 9:14 PM,19/Jan/18 8:46 PM,26/Apr/18 6:50 AM,19/Jan/18 8:46 PM,,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"Even though the comment to (u *user) GetAttribute() indicates
""GetAttribute returns the value of an attribute, or """" if not found""
if actually returns an error if not found.

This is causing the attribute LDAP retrieval to fail in cases where a particular user does not have an attribute defined. However, if the function is changed to return and empty string array, and not an error, things start working again:


{code:java}
@@ -403,7 +403,8 @@ func (u *user) GetAttribute(name string) (*api.Attribute, error) {
                log.Debugf(""Getting attribute '%s' from LDAP user '%s'"", name, u.name)
                vals := u.entry.GetAttributeValues(name)
                if len(vals) == 0 {
-                       return nil, fmt.Errorf(""No value for attribute '%s'"", name)
+                       //return nil, fmt.Errorf(""No value for attribute '%s'"", name)
+                       vals = make([]string,0)
                }
                return &api.Attribute{Name: name, Value: strings.Join(vals, "","")}, nil
        }
@@ -553,7 +554,8 @@ func (ue *userExpr) attrFunction(args ...interface{}) (interface{}, error) {
        vals := ue.user.entry.GetAttributeValues(attrName)
        log.Debugf(""Values for LDAP attribute '%s' are '%+v'"", attrName, vals)
        if len(vals) == 0 {
-               return nil, fmt.Errorf(""No value for attribute '%s'"", attrName)
+               //return nil, fmt.Errorf(""No value for attribute '%s'"", attrName)
+               vals = make([]string,0)
        }
        return strings.Join(vals, sep), nil
 }

{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01zz1:,,,,,,,,rennman,skarim,,,,,,,,,master,,,true,19/Jan/18 2:46 PM;skarim;https://gerrit.hyperledger.org/r/#/c/16987/,,,,,,,,,,,,,,,,,,,,,,,
Balance transfer in Typescript: incorrect chaincode location,FAB-7653,26662,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,AdnanChoudhury,AdnanChoudhury,08/Jan/18 7:12 PM,05/Feb/18 3:55 PM,26/Apr/18 6:50 AM,05/Feb/18 3:55 PM,,,,,,,,,,fabric-samples,,,,0,,,,,,,,,"In the provided testAPIs.sh file, the location of the chaincode should be 
""github.com/example_cc/go"" instead of ""github.com/example_cc"" to function properly.

The documentation also needs to be updated accordingly.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01zx9:,,,,,,,,AdnanChoudhury,smithbk,,,,,,,,,master,,,true,08/Jan/18 8:30 PM;smithbk;https://gerrit.hyperledger.org/r/16669 [FAB-7653] Fix incorrect chaincode location,,,,,,,,,,,,,,,,,,,,,,,
certs should expire before issuing cert expires,FAB-7646,26655,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,aambati,aambati,08/Jan/18 3:36 PM,13/Jan/18 11:15 PM,26/Apr/18 6:50 AM,13/Jan/18 11:15 PM,v1.1.0-alpha,,,,,,v1.1,v1.1.0-alpha,,fabric-ca,,,,0,,,,,,,,,Enrollment and intermediate certs should expire before issuing certificate expires,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01zw5:,,,,,,,,aambati,,,,,,,,,,master,,,true,08/Jan/18 9:27 PM;aambati;https://gerrit.hyperledger.org/r/c/16671/,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca should not allow multiple revocation of same certificate,FAB-7620,26626,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,rennman,rennman,05/Jan/18 5:43 PM,19/Jan/18 8:46 PM,26/Apr/18 6:50 AM,19/Jan/18 8:46 PM,,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"Currently, we do not check the status of a certificate being revoked, and unconditionally revoke it again. The effect of this is to update the revocation time.

This creates a potential ambiguity if one were to query the status of the certificate at a specific point in the past. We need to dis-allow multiple revocations of the same certificate.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01zpp:,,,,,,,,aambati,rennman,,,,,,,,,master,,,true,17/Jan/18 6:29 PM;aambati;https://gerrit.hyperledger.org/r/c/16915/,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca Inconsistent treatment of case in ldap converter/maps,FAB-7619,26625,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,rennman,rennman,05/Jan/18 5:37 PM,18/Jan/18 3:02 AM,26/Apr/18 6:50 AM,18/Jan/18 3:02 AM,,,,,,,v1.1.0-alpha,,,fabric-ca,,,,0,,,,,,,,,"ldap:
  attribute:
    names: [
             ""memberOf""
           ]
    converters:
      - name: hf.Registrar.Roles
        value: map(attr(""memberOf""),""Roles"")  <--- ""Roles"" is case-sensitive
    maps:
      Roles: <--- ""Roles"" is not case-sensitive
         - name: cn=Client,ou=groups,dc=example,dc=com
           value: client

yields:
2018/01/04 18:38:02 [DEBUG] Error evaluating expression for attribute 'hf.Registrar.Roles'; parms: map[DN:uid=admin,ou=users,ou=fabric,dc=hyperledeger,dc=example,dc=com affiliation:[fabric users]]; error: Unknown map name: 'Roles'
when any user attempts to enroll",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01zph:,,,,,,,,rennman,skarim,smithbk,,,,,,,,master,,,true,"16/Jan/18 4:48 PM;Clayton Sims;The fixed version field indicates this is must fix for alpha.   please confirm.  

 

[~smithbk]  if required for alpha what is your eta?",16/Jan/18 5:37 PM;smithbk;yes ... CR submitted today,16/Jan/18 5:44 PM;skarim;https://gerrit.hyperledger.org/r/#/c/16871/,,,,,,,,,,,,,,,,,,,,,
fabric-merge-behave-x86_64 failed due to 403 error in chaincode go,FAB-7605,26502,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,sambhavdutt,sambhavdutt,04/Jan/18 7:23 PM,05/Jan/18 1:01 AM,26/Apr/18 6:50 AM,05/Jan/18 1:01 AM,,,,,,,,,,fabric-ci,,,,0,ci_failure,,,,,,,,"fabric-merge-behave-x86_64 failed as there might an access error(403) in env,
------------------------------------------------------------------------------------------
Got error: 403
12:35:25       Start and end = 0/0
12:35:25       
12:35:25       Got error: 403
12:35:25       ccSpec = type: GOLANG
12:35:25       chaincode_id {
12:35:25         path: ""github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02""
12:35:25         name: ""example02""
12:35:25         version: ""test""
----------------------------------------------------------------------------------------------
*Build Log*

https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-behave-x86_64/2001/console


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01zjp:,,,,,,,,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca-client enroll command should recognize URL in config file and env variable,FAB-7596,26361,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,smithbk,smithbk,04/Jan/18 1:53 PM,18/Feb/18 4:46 PM,26/Apr/18 6:50 AM,16/Jan/18 6:31 PM,,,,,,,v1.0.6,v1.1.0-alpha,,fabric-ca,,,,0,,,,,,,,,"Rather than using the ""-u"" option of the *fabric-ca-client enroll* command, it should also recognize the FABRIC_CA_CLIENT_URL env variable and the URL setting in the fabric-ca-client-config.yaml file; however, it currently recognizes neither of these.

The fix is simple.  In fabric-ca/cmd/fabric-ca-client/enroll.go, change

{code}
			_, _, err := util.GetUser(c.myViper)
			if err != nil {
				return err
			}

			err = c.configInit()
			if err != nil {
				return err
			}
{code}

to

{code}
			err := c.configInit()
			if err != nil {
				return err
			}

			_, _, err = util.GetUser(c.myViper)
			if err != nil {
				return err
			}
{code}

By calling configInit first, it will now recognize the config file and env variable.
But we also need a test case for this.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01zhp:,,,,,,,,aambati,smithbk,vdods,,,,,,,,release-1.0,master,,true,"04/Jan/18 5:15 PM;aambati;[~smithbk] enroll command requires user id and password as part of the URL. But the URL stored in the config file will not have the userid and password. so, either -u option or FABRIC_CA_CLIENT_URL env property must be specified for enroll command to work. ","04/Jan/18 6:25 PM;smithbk;You are correct that we do not store it in the config file, but the URL in the config file may have the user/pass if they manually put it there.",05/Jan/18 6:11 AM;vdods;Is this slated for v1.0.x (I hope)?,"05/Jan/18 3:13 PM;aambati;[~vdods] I was not thinking of backporting it 1.0.x. But if you need it in 1.0.x, i will.","05/Jan/18 5:56 PM;vdods;I would most appreciate that, AnilKumar, thank you!",08/Jan/18 7:25 PM;smithbk;This is already merged in alpha but this will remain open until it is backported to v1.,"16/Jan/18 5:18 PM;smithbk;https://gerrit.hyperledger.org/r/#/c/16585/ (master)
https://gerrit.hyperledger.org/r/#/c/16749/ (release)  - this is the backport to master",,,,,,,,,,,,,,,,,
Fabric fails to trigger FSM event REGISTER,FAB-7586,26337,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,sudheesh001,sudheesh001,03/Jan/18 11:48 AM,01/Feb/18 1:37 PM,26/Apr/18 6:50 AM,01/Feb/18 12:04 PM,,,,,,,,,,fabric-endorser,,,,0,,,,,,,,,"There are multiple peer nodes, a single orderer and a single CA authority for production and want to deploy the chaincode. I have the compiled chaincode and the {{go}} file in a directory called {{chaincode-app/}}

 

The peer node has a docker instance running with the name {{peer0-vm}}. I want to deploy my chaincode using this peer. When I run
{code:java}
docker exec peer0-vm peer chaincode install -n mycc -v 1.0 -p chaincode-app/{code}
{{I receive the following error:}}
{code:java}
2018-01-03 05:35:30.577 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 001 Using default escc 2018-01-03 05:35:30.578 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 002 Using default vscc Error: Error getting chaincode code chaincode: <go, [env]>: failed with error: ""exec: not started""{code}
{{The peer logs are as follows:}}
{code:java}
2018-01-02 11:00:29.826 UTC [gossip/gossip] NewGossipService -> WARN 014 External endpoint is empty, peer will not be accessible outside of its organization 2018-01-02 11:00:29.829 UTC [gossip/gossip] start -> INFO 015 Gossip instance 0.0.0.0:7051 started 2018-01-02 11:00:29.830 UTC [cscc] Init -> INFO 016 Init CSCC 2018-01-02 11:00:29.830 UTC [sccapi] deploySysCC -> INFO 017 system chaincode cscc/(github.com/hyperledger/fabric/core/scc/cscc) deployed 2018-01-02 11:00:29.830 UTC [sccapi] deploySysCC -> INFO 018 system chaincode lscc/(github.com/hyperledger/fabric/core/scc/lscc) deployed 2018-01-02 11:00:29.831 UTC [escc] Init -> INFO 019 Successfully initialized ESCC 2018-01-02 11:00:29.831 UTC [sccapi] deploySysCC -> INFO 01a system chaincode escc/(github.com/hyperledger/fabric/core/scc/escc) deployed 2018-01-02 11:00:29.831 UTC [sccapi] deploySysCC -> INFO 01b system chaincode vscc/(github.com/hyperledger/fabric/core/scc/vscc) deployed 2018-01-02 11:00:29.831 UTC [qscc] Init -> INFO 01c Init QSCC 2018-01-02 11:00:29.831 UTC [sccapi] deploySysCC -> INFO 01d system chaincode qscc/(github.com/hyperledger/fabric/core/chaincode/qscc) deployed 2018-01-02 11:00:29.832 UTC [nodeCmd] initSysCCs -> INFO 01e Deployed system chaincodess 2018-01-02 11:00:29.832 UTC [nodeCmd] serve -> INFO 01f Starting peer with ID=[name:""fabsmbqxc-peer0.org1.example.com"" ], network ID=[dev], address=[0.0.0.0:7051] 2018-01-02 11:00:29.832 UTC [nodeCmd] serve -> INFO 020 Started peer with ID=[name:""fabsmbqxc-peer0.org1.example.com"" ], network ID=[dev], address=[0.0.0.0:7051] 2018-01-02 14:06:22.467 UTC [chaincode] notifyDuringStartup -> WARN 021 trying to manually run chaincode when not in devmode ? 2018-01-02 14:06:22.467 UTC [chaincode] HandleMessage -> ERRO 022 []Failed to trigger FSM event REGISTER: transition canceled with error: peer will not accepting external chaincode connection name:""chaincode-app:1.0"" (except in dev mode) 2018-01-02 14:06:22.467 UTC [chaincode] processStream -> ERRO 023 []Error handling message, ending stream: transition canceled with error: peer will not accepting external chaincode connection name:""chaincode-app:1.0"" (except in dev mode){code}
On a quick read, I understood that the [chaincode cannot be executed by the user|https://github.com/hyperledger/fabric/blob/2cab745abf031d8ff5d3e8f4fa7a5e5af8907fad/core/chaincode/chaincode_support.go#L277-L281] and should be instead done by the peer. Can someone point out how I could deploy this chaincode?

I've tried to follow the lifecycle of {{package -> install -> instantiate -> upgrade}} and tried to package the chaincode before signing and installing using the command but failed.
{code:java}
docker exec peer0-vm peer chaincode package -n mycc -v 1.0 -p chaincode-app -s -S ccpack.out{code}
{{Could someone point out where I am going wrong and a possible solution?}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01zdp:,,,,,,,,muralisr,sudheesh001,yacovm,,,,,,,,,,,,"24/Jan/18 3:31 PM;muralisr;[~sudheesh001] We went over this on https://stackoverflow.com/questions/48071871/hyperledger-fabric-fails-to-trigger-fsm-event-register.  As stated there this is not a bug.

{code:java}
peer will not accepting external chaincode connection name:""chaincode-app:1.0"" (except in dev mode)
{code}

The above error is due to attempting to start the chaincode manually (ie, peer does not start it in a docker container).","24/Jan/18 4:51 PM;sudheesh001;[~muralisr] While I agree that the error is because i am in `non-dev` mode, it however doesn't satisfy why the chaincode packaging before deployment fails.


{code:java}
docker exec peer0-vm peer chaincode package -n mycc -v 1.0 -p chaincode-app -s -S ccpack.out
{code}
","24/Jan/18 4:59 PM;muralisr;[~sudheesh001] this is addressed in the stackoverflow too... you cannot do CLI packaging using the peer container.

From your response comment there:
{code:java}
You can obviously use the fabric-tools image or dev-chaincode-docker images to do the required chaincode installation. 
{code}

Samples such as e2e_cli contain CLI container definition that can be used as template for CLI commands.","01/Feb/18 12:04 PM;yacovm;Closing, as it does not require a change","01/Feb/18 12:58 PM;sudheesh001;I completely wouldn't agree with the resolution here.
 # Yes I understand we can use fabric-tools or dev-chaincode-dockers in dev mode to do chaincode installation, but my question was packaging them and signing them before putting them in production. I wouldn't want to use `fabric-tools` (cli) in production servers.
 # This NEEDS documentation and examples.
 ** Packaging and signing chaincode before installing them on a production cluster
 ** A sample for non-dev mode chaincode in fabric-samples which contains the packaging, signing and installing the chaincode.","01/Feb/18 1:10 PM;yacovm;{quote}This NEEDS documentation and examples. {quote}
Well we have [this|http://hyperledger-fabric.readthedocs.io/en/latest/chaincode4noah.html?highlight=packaging] that explains how to package and sign chaincode. 
Whether this needs to be implemented in samples or not, is a different story and not related to this JIRA and should be addressed in a separate JIRA item :) 

{quote} I wouldn't want to use `fabric-tools` (cli) in production servers.{quote}
You don't have to. You can always spin up your own container, or just not use any container and use the standard binaries. 
I think that the idea of the peer contains is that it will be minimal and won't include any functionality other than running the peer.","01/Feb/18 1:37 PM;muralisr;[~sudheesh001]  Couple of things to clarify 
_Yes I understand we can use fabric-tools or dev-chaincode-dockers in dev mode to do chaincode installation_
Packaging and installing has nothing to do with devmode... indeed there are no two ways to package for dev mode or production mode. 

_I wouldn't want to use `fabric-tools` (cli) in production servers._ 
This is not ""part"" of the server. CLI is a client side program. You can just run it directly as `peer chaincode ..., peer channel ... , etc` commands from a fabric installation. `fabric-tools` is just a packaging to make it easy to run the CLI on the client side to talk to the server (basically saying the same thing [~yacovm] says above).",,,,,,,,,,,,,,,,,
Proposal Promise gets rejected when using new generated certificates.,FAB-7585,26336,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,adc,sudheesh001,sudheesh001,03/Jan/18 11:38 AM,28/Feb/18 9:41 AM,26/Apr/18 6:50 AM,,v1.1.0-preview,,,,,,v1.2,,,fabric-samples,,,,0,Usability,,,,,,,,"From the code sample in [hyperledger/education|https://github.com/hyperledger/education/tree/master/LFS171x/fabric-material] fabric-material, the _tuna-app_ uses _basic-network_. The basic-network has a file `generate.sh` which uses the `.yaml` files to generate the content inside `_config/*_` and `_crypto-config/*_`. The git repository for education as well as [fabric-samples|https://github.com/hyperledger/fabric-samples/tree/release/basic-network/crypto-config] contains the certificates already.

Ideally these should be generated via the generate.sh process using the cryptogen, configtxgen and other tools. Clearing out the content from the two directories and recreating the certificates works perfectly.

After creating the network and registering the Admin user and a demo user, a query to the chaincode results in an error unable to verify as the certificate was signed by an unknown authority.
{code:java}
sendPeersProposal - Promise is rejected: Error: Failed to deserialize creator identity, err the supplied identity is not valid: x509: certificate signed by unknown authority (possibly because of ""x509: ECDSA verification failure"" while trying to verify candidate authority certificate ""ca.org1.example.com""{code}
 

In general these certs and data shouldn't be committed, Is there a reason why this is being done? Am I doing something wrong here?

With the default certificates in the commit, the application works just fine.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01zdh:,,,,,,,,denyeart,mastersingh24,sudheesh001,zamrokk,,,,,,,,,,,14/Feb/18 5:05 PM;denyeart;[~mastersingh24] Looks like you last touched the certs for basic-network. Is there a reason to include them rather than generating them?,"22/Feb/18 12:48 PM;mastersingh24;Not really .... I think the goal of basic network was to simply get an ""instant"" environment to show people how things worked and then they should move on to BYFN.

But no real reason we can't modify this to generate certs","23/Feb/18 4:24 PM;zamrokk;I encountered also same issue, if I try to regenerate the certificates myself then I got this error :(

2018-02-23 16:08:46.676 UTC [common/tools/configtxgen] main -> CRIT 003 Error on outputChannelCreateTx: config update generation failure: could not parse application to application group: setting up the MSP manager failed: the supplied identity is not valid: x509: certificate signed by unknown authority (possibly because of ""x509: ECDSA verification failure"" while trying to verify candidate authority certificate ""ca.org1.example.com"")

 

It works fine only from the .tx binary committed on git

 

I use the V1.1.0-alpha","24/Feb/18 5:47 PM;denyeart;[~ales] and [~adc] will discuss this and provide their thoughts, since generating certs has been a topic a recent discussion.",24/Feb/18 5:55 PM;zamrokk;It could be related to this problem too : https://jira.hyperledger.org/browse/FAB-3285?page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel&focusedCommentId=40650#comment-40650,"28/Feb/18 9:41 AM;zamrokk;For the .tx binary corrupted, I have to start a new yaml from scratch, no idea why it was buggy

 

For the error message, I could resolve the error using the 4th bullet of troubleshooting here : [https://hyperledger-fabric-ca.readthedocs.io/en/latest/users-guide.html#troubleshooting]

The CA was no taking my cert files, so it was generating new ones at startup without I knew it",,,,,,,,,,,,,,,,,,
basic-network sample uses creds/* which does not exist ,FAB-7584,26335,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sudheesh001,sudheesh001,sudheesh001,03/Jan/18 4:29 AM,03/Jan/18 5:20 AM,26/Apr/18 6:50 AM,03/Jan/18 5:19 AM,,,,,,,,,,fabric-samples,,,,0,,,,,,,,,"The `init.sh` of the `basic-network` sample deletes the contents of the `.hfc-key-store` and copies peer admin credentials back to the keystore. However this directory called `creds/*` doesn't exist and isn't available at any point in the execution of the sample code in this directory.

 

This seems to be a bug and should be removed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01zd9:,,,,,,,,sudheesh001,,,,,,,,,,,,,,"03/Jan/18 5:20 AM;sudheesh001;Review link:  [https://gerrit.hyperledger.org/r/16541]

Commit cf79cd1dc1d34c83adb756c8be94b5a1902099db

Change-Id: Ia3d07ad78875328f6798290d3f0ab3098b9e85fc",,,,,,,,,,,,,,,,,,,,,,,
[CI] - fabric-multihost CI job is not working,FAB-7575,26325,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jwagantall,rameshthoomu,rameshthoomu,02/Jan/18 3:18 PM,04/Jan/18 2:16 AM,26/Apr/18 6:50 AM,04/Jan/18 2:16 AM,,,,,,,,,,fabric-ci,,,,0,fabric-ci,,,,,,,,"[CI] - configuration files are not loaded properly in fabric-multihost CI job

https://jenkins.hyperledger.org/me/my-views/view/All/job/fabric-multihost-tests-x86_64/configure",Jenkins CI job,,,,,,,,,,,FAB-6885,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01zb1:,,,,,,,,rameshthoomu,,,,,,,,,,,,,,04/Jan/18 2:16 AM;rameshthoomu;restarted Jenkins after update the configuration has been fixed this issue.,,,,,,,,,,,,,,,,,,,,,,,
configtx/test/helper.go encodes appOrgs into orderer organization,FAB-7566,26296,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,28/Dec/17 2:01 PM,29/Dec/17 10:37 AM,26/Apr/18 6:50 AM,29/Dec/17 10:37 AM,,,,,,,v1.1,,,fabric-orderer,,,,0,,,,,,,,,"The function MakeGenesisBlockFromMSPs skips appOrgID and instead encodes the applicationOrg object into the orderer organization.
{code:java}
    channelGroup.Groups[channelconfig.OrdererGroupKey].Groups[ordererOrgID] = ordererOrg
    channelGroup.Groups[channelconfig.ApplicationGroupKey].Groups[ordererOrgID] = applicationOrg{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01z59:,,,,,,,,yacovm,,,,,,,,,,master,,,true,28/Dec/17 2:08 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/16487/,,,,,,,,,,,,,,,,,,,,,,,
Some CLI commands ignore ordererTLSHostnameOverride,FAB-7565,26295,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,inatatsu,inatatsu,28/Dec/17 7:00 AM,05/Jan/18 10:06 AM,26/Apr/18 6:50 AM,05/Jan/18 10:06 AM,,,,,,,v1.1,,,fabric-peer,fabric-tools,,,0,,,,,,,,,"The channel creation command and the chaincode commands of the CLI client does not respect ordererTLSHostnameOverride. The problems are:
* GetBroadcastClient() in peer/common/ordererclient.go ignores ordererTLSHostnameOverride.
* addFlags() in peer/chaincode/chaincode.go does not provide the corresponding command-line option.
* InitCmdFactory() in peer/chaincode/common.go should pass the option to GetBroadcastClient().

Attached below is a sample patch to v1.1.0-preview.",,,,,,,,,,,,,,,,,,,,28/Dec/17 7:05 AM;inatatsu;fix-orderer-tls-hostname-override.patch;https://jira.hyperledger.org/secure/attachment/13951/fix-orderer-tls-hostname-override.patch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01z51:,,,,,,,,inatatsu,mastersingh24,,,,,,,,,,,,,29/Dec/17 10:28 AM;mastersingh24;I'll fix this as part of the CLI rework required in order for mutual TLS to work,05/Jan/18 10:06 AM;mastersingh24;https://gerrit.hyperledger.org/r/16555  should have fixed this,,,,,,,,,,,,,,,,,,,,,,
fabric-merge-end-2-end-x86_64 failed due to Timeout error during Channel creation.,FAB-7560,26286,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,sambhavdutt,sambhavdutt,26/Dec/17 6:58 PM,02/Jan/18 8:20 PM,26/Apr/18 6:50 AM,02/Jan/18 8:20 PM,,,,,,,,,,fabric-quality,,,,0,ci_failure,,,,,,,,"The fabric-merge-end-2-end-x86_64 has failed in build #1684 as there is a Timeout error,

15:36:45 2017-12-26 15:36:30.530 UTC [channelCmd] InitCmdFactory -> INFO 109 Endorser and orderer connections initialized
15:36:45 Error: timeout waiting for channel creation,

15:36:45 !!!!!!!!!!!!!!! Channel creation failed !!!!!!!!!!!!!!!!
15:36:45 ================== ERROR !!! FAILED to execute End-2-End Scenario ==================


*Build Log*

https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-end-2-end-x86_64/1684/consoleFull",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01z31:,,,,,,,,sambhavdutt,,,,,,,,,,,,,,29/Dec/17 6:58 PM;sambhavdutt;This test has passed in the last build #1687,,,,,,,,,,,,,,,,,,,,,,,
panic accessing config on bad config,FAB-7556,26277,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,muralisr,muralisr,25/Dec/17 3:05 PM,24/Jan/18 10:46 PM,26/Apr/18 6:50 AM,24/Jan/18 10:46 PM,,,,,,,,,,fabric-endorser,,,,0,,,,,,,,,"{code:java}
goroutine 1 [running]:
github.com/hyperledger/fabric/core/peer.createChain.func1(0x0)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/core/peer/peer.go:292 +0x38
github.com/hyperledger/fabric/common/resourcesconfig.(*BundleSource).Update(0xc421542c00, 0x0)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/common/resourcesconfig/bundlesource.go:43 +0x7e
github.com/hyperledger/fabric/common/resourcesconfig.NewBundleSource(0x0, 0xc421425a20, 0x4, 0x4, 0xc421421380)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/common/resourcesconfig/bundlesource.go:35 +0x77
github.com/hyperledger/fabric/core/peer.createChain(0xc4220b6940, 0x3, 0x4f15f40, 0xc4202e1ee0, 0xc4220c0300, 0x0, 0x0)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/core/peer/peer.go:353 +0x541
github.com/hyperledger/fabric/core/peer.Initialize(0x4a845f8)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/core/peer/peer.go:225 +0x786
github.com/hyperledger/fabric/peer/node.serve(0x4f6c528, 0x0, 0x0, 0x0, 0x0)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/peer/node/start.go:251 +0x1070
github.com/hyperledger/fabric/peer/node.glob..func1(0x4f46d00, 0x4f6c528, 0x0, 0x0, 0x0, 0x0)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/peer/node/start.go:83 +0x3f
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0x4f46d00, 0x4f6c528, 0x0, 0x0, 0x4f46d00, 0x4f6c528)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:599 +0x3e9
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x4f47360, 0xf, 0xc42000c055, 0x7)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 +0x339
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x4f47360, 0x37, 0xc42000c055)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 +0x2b
main.main()
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/peer/main.go:112 +0x4a6{code}

This happens if config tx is invalid (typically with handcrafted configs using configtxlator). The above stack happened with an APIs element with ""_"" in its name.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01z19:,,,,,,,,muralisr,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
improve gossip/common code coverage,FAB-7555,26275,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,24/Dec/17 9:41 PM,28/Dec/17 4:58 PM,26/Apr/18 6:50 AM,28/Dec/17 4:58 PM,,,,,,,,,,fabric-gossip,,,,0,,,,,,,,,The package used to have high code coverage and after we introduced a simple function it dropped to 50% .,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01z0t:,,,,,,,,yacovm,,,,,,,,,,master,,,true,24/Dec/17 9:53 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/16463/,,,,,,,,,,,,,,,,,,,,,,,
Sample profile should not be loaded,FAB-7544,26256,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,blw,troyronda,troyronda,21/Dec/17 11:33 PM,06/Jan/18 10:37 AM,26/Apr/18 6:50 AM,06/Jan/18 10:37 AM,,,,,,,v1.1,,,fabric-orderer,,,,0,,,,,,,,,"A default sample profile is attempted to be loaded in the init method of the performance package (orderer/common/performance). In particular SampleSingleMSPChannelV11Profile is being loaded in:

[https://github.com/hyperledger/fabric/blob/master/orderer/common/performance/utils.go#L47] introduced by [https://gerrit.hyperledger.org/r/c/15799/6/orderer/common/performance/utils.go]

This line of code means we need to add a dummy profile to our configtx.yaml (SampleSingleMSPChannelV11Profile), when using a customized channel configuration (non-sample) – particularly in provisional mode on the orderer. Without the dummy profile, the orderer does not run.

Workaround that fixes the above issue: [https://gerrit.hyperledger.org/r/#/c/16409/]

 

Addendum:

I would suggest reviewing the the rest of the init method and consider moving all init code out of the non-test/benchmark code path.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01yx1:,,,,,,,,blw,firas.qutishat,gbolo,troyronda,,,,,,,master,,,true,21/Dec/17 11:51 PM;firas.qutishat;[~jyellick] FYI,22/Dec/17 3:50 AM;gbolo;Please merge this. I don't like having dummy definitions in my configtx.yaml when using provisional mode on my orderer,24/Dec/17 6:32 PM;blw;https://gerrit.hyperledger.org/r/c/16461/,,,,,,,,,,,,,,,,,,,,,
CI Management documentation needs a refresh,FAB-7538,26246,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lehors,lehors,lehors,21/Dec/17 2:40 PM,21/Dec/17 5:36 PM,26/Apr/18 6:50 AM,21/Dec/17 5:36 PM,,,,,,,,,,fabric-ci,,,,0,,,,,,,,,"The current documentation is out of date and has several formatting errors.

[https://github.com/hyperledger/ci-management/blob/master/docs/fabric_ci_process.md]

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01yut:,,,,,,,,lehors,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
typo in balance-transfer/app/invoke-transaction.js ,FAB-7533,26234,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,nharshita,nharshita,21/Dec/17 10:44 AM,07/Jan/18 2:14 PM,26/Apr/18 6:50 AM,07/Jan/18 2:14 PM,v1.1.0-preview,,,,,,v1.1,,,fabric-samples,,,,0,,,,,,,,,"There exists a typo at line 102 in balance-transfer/app/invoke-transaction.js. Due to which web app gets killed and we get error log as below.

*Relevant web app log*:
[INFO] invoke-chaincode - The chaincode invoke chaincode transaction has been committed on peer localhost:7053
debug: [EventHub.js]: unregisterTxEvent txid aac74f0e4fadcd6977fe470011a771ea4662deeed789b27cde9d6b5c2917f84d
/opt/gopath/src/github.com/hyperledger/fabric-samples/balance-transfer/app/invoke-transaction.js:108
                            let message = until.format('The invoke chaincode transaction was invalid, code:%s',code);

ReferenceError: until is not defined

 

*Simulation*: Error can be reproduced by simulating invalid transaction.

**

*Fix*: replace 'u*n*til' with 'util'

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01yt1:,,,,,,,,mastersingh24,nharshita,,,,,,,,,master,,,true,06/Jan/18 12:16 PM;mastersingh24;https://gerrit.hyperledger.org/r/16615,,,,,,,,,,,,,,,,,,,,,,,
"Endorsement policy failure, even if the policy is fulfilled",FAB-7532,26232,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,nharshita,nharshita,21/Dec/17 10:04 AM,13/Feb/18 7:31 AM,26/Apr/18 6:50 AM,24/Jan/18 9:19 PM,,,,,,,,,,fabric-sdk-node,,,,1,,,,,,,,,"Based on [1][2] and below test scenario, we have found that only one (last proposal response) RWset is considered at VSCC side.

However, this seems to be a problem, if we consider the below scenario.

*Scenario:* Policy 3-of-4 in place and 4 endorsements are received. Out of which 1st three endorsers produce same RWset and the 4th produces a different one (simulated by tampering 4th endorser's file system.  But, this could be the case in other non-deterministic situations).

*Result:* Transaction *fails* with ENDORSEMENT_POLICY_FAILURE at VSCC. Which shouldn't be the case, as policy is fulfilled correctly. Being the last, 4th RWset is considered while verifying (may be a message integrity issue) and thus the transaction is failing.

_Just to ensure the testcase_, above scenario is simulated by tampering 3rd endorser's file system. Here, transaction *succeeds* as payload verified against is properly considered and the required policy is fulfilled.

 

We think that this would have been avoided, if all proposal responses are sent by SDK to VSCC for verification.

 

[1] [https://github.com/hyperledger/fabric-sdk-node/blob/v1.1.0-preview/fabric-client/lib/Channel.js#L1413]

[2] [https://github.com/hyperledger/fabric-sdk-node/blob/v1.1.0-preview/fabric-client/lib/Channel.js#L1439]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ysl:,,,,,,,,denyeart,harrisob@us.ibm.com,MichaelWang,nharshita,n-horiguchi,vigneswaran.r,,,,,,,,,"08/Jan/18 3:49 AM;denyeart;I believe there are existing SDK functions to check that proposal responses are the same, so that the 'bad' response can be thrown out on client side before submitting the transaction.  I think this would be preferable to sending all proposal responses in the transaction, so as to not bloat the transactions/blocks.  [~harrisob@us.ibm.com] can you indicate SDK functions for this and whether any changes are planned?","08/Jan/18 7:54 AM;vigneswaran.r;Wouldn't it be better if the platform handles this and not relying too much on client side (SDK) for throwing away bad responses? Because,
 # Client side checking is easy to by-pass.
 # It is difficult for the client to decide which response to throw away, when two different sets of responses (RW sets) are available, without evaluating the endorsement policy. (As the policy can be more specific/complex like (A OR (B AND C)), I think, it's really difficult).","24/Jan/18 9:19 PM;harrisob@us.ibm.com;NodeSDK has a method on the 'Channel' object to check to be sure all endorsements are the same. The application may call this method to check endorsements before sending them to the orderer.

    /**
      * Utility method to examine a set of proposals to check they contain
      * the same endorsement result write sets.
      * This will validate that the endorsing peers all agree on the result
      * of the chaincode execution.
      *
      * @param \{ProposalResponse[]} The proposal responses from all endorsing peers
      * @returns \{boolean} True when all proposals compare equally, false otherwise.
       */
     compareProposalResponseResults(proposal_responses) \{","13/Feb/18 7:31 AM;nharshita;I agree that client side verification would help, but JIRA item mainly goes with the spirit where client can disobey endorsement related stuff and fabric core code (VSCC) takes care of it based on the documentation at  [http://hyperledger-fabric.readthedocs.io/en/latest/txflow.html]

excerpts from the URL

""""""

The architecture is such that even if an application chooses not to inspect responses or otherwise forwards an unendorsed transaction, the endorsement policy will still be enforced by peers and upheld at the commit validation phase.

""""""

And as pointed by Vigneswaran R, there are issues in handling the situation at client side.",,,,,,,,,,,,,,,,,,,,
BYFN timeout management is messed up and BYFN could be simpler,FAB-7527,26223,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lehors,lehors,lehors,20/Dec/17 8:21 PM,09/Feb/18 9:33 AM,26/Apr/18 6:50 AM,09/Feb/18 9:33 AM,v1.0.5,v1.1.0-preview,,,,,v1.1,,,fabric-docs,fabric-samples,,,0,,,,,,,,,"The current BYFN documentation talks about the default CLI timeout being 10000 seconds but it is currently is set to 10. Furthermore the timeout setting is actually used for two different purposes:
 # to define the time for which the cli will hang around until it exits
 # to define the time for which the e2e script will keep trying to get an answer to its chaincode queries before giving up

With the current setting of 10 seconds the cli container exists before anyone can do anything else with it, making the timeout useless from that point of view.

With a setting of 10000 seconds, the cli container hangs on ""for ever"" locking the console when not run in detach mode.

The e2e script is also currently executed as a docker-composer command which forces users who only want to setup the network without the e2e script being executed automatically to edit the docker-compose configuration file.In addition, because the command is executed through docker-compose which is detached output is captured through a call to docker logs -f cli which leaves the user hanging once the e2e script has completed.All of these problems can be addressed by changing the docker-compose file to start the cli without running anything (and instead just wait/sleep) and then executing the e2e script by issuing a docker exec cli command.

The time the cli container waits for before exiting can be long, say 10000 seconds, without any negative impact. When the container has exited it can be restarted with a simple docker start cli command.

And the BYFN timeout setting can be limited to defining the time during which a response to a query is being waited for, which can be set to 10 by default.

As an aside, the byfn.sh usage should be simplified to not require users to type a -m parameter on every command and offer a default response to the confirmation prompt for continuation.",,,,,,,,,,,,,,,,FAB-7526,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01yr9:,,,,,,,,lehors,,,,,,,,,,master,,,true,"20/Dec/17 8:40 PM;lehors;One more thing: the output log is quite confusing because it refers to peer0.org1 as PEER0, peer1.org1 as PEER2, peer0.org2 as PEER3 as well as org2/peer3, and peer1.org2 as PEER4 as well as org2/peer4. At the least the numbers should be consistently used.",,,,,,,,,,,,,,,,,,,,,,,
BYFN timeout management is messed up and BYFN could be simpler,FAB-7526,26222,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lehors,lehors,lehors,20/Dec/17 8:19 PM,26/Jan/18 2:56 PM,26/Apr/18 6:50 AM,26/Jan/18 2:56 PM,v1.0.5,v1.1.0-preview,,,,,v1.1,,,fabric-docs,fabric-samples,,,0,,,,,,,,,"The current BYFN documentation talks about the default CLI timeout being 10000 seconds but it is currently is set to 10. Furthermore the timeout setting is actually used for two different purposes:
 # to define the time for which the cli will hang around until it exits
 # to define the time for which the e2e script will keep trying to get an answer to its chaincode queries before giving up

With the current setting of 10 seconds the cli container exists before anyone can do anything else with it, making the timeout useless from that point of view.

With a setting of 10000 seconds, the cli container hangs on ""for ever"" locking the console when not run in detach mode.

The e2e script is also currently executed as a docker-composer command which forces users who only want to setup the network without the e2e script being executed automatically to edit the docker-compose configuration file.In addition, because the command is executed through docker-compose which is detached output is captured through a call to docker logs -f cli which leaves the use hanging once the e2e script has completed.All of these problems can be addressed by changing the docker-compose file to start the cli without running anything (and instead just wait/sleep) and then executing the e2e script by issuing a docker exec cli command.

The time the cli container waits for before exiting can be long, say 10000 seconds, without any negative impact. When the container has exited it can be restarted with a simple docker start cli command.

And the BYFN timeout setting can be limited to defining the time during which a response to a query is being waited for, which can be set to 10 by default.

As an aside, the byfn.sh usage should be simplified to not require users to type a -m parameter on every command and offer a default response to the confirmation prompt for continuation.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01yr1:,,,,,,,,lehors,,,,,,,,,,,,,,26/Jan/18 2:56 PM;lehors;Not sure exactly how this happened but I somehow created this one twice.,,,,,,,,,,,,,,,,,,,,,,,
Lookup correct policyName while using Deliver API for blocks and events,FAB-7521,26211,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,20/Dec/17 1:06 PM,05/Jan/18 6:40 PM,26/Apr/18 6:50 AM,04/Jan/18 12:24 PM,,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,"Since {{ab.AtomicBroadcast}} service was abstracted out to be reused at peer for blocks event service the definition of policy name was introduced as a parameter for deliverer handler, e.g.:

{code}
	s := &server{
		dh: deliver.NewHandlerImpl(DeliverSupportManager{}, policies.ChannelReaders, timeWindow, mutualTLS),
		bh: broadcast.NewHandlerImpl(nil),
	}
{code}

while this introduce a potential problem in light of the RSCC work, since correct policy lookup at peer based on resource name, namely based on the resource there is a lookup for policy name underlined for that resource and later it could be used to lookup the policy itself. While for ordering service this is not the case, since policy derived directly from policy name. Therefore we need to distinguish between these two cases.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01yot:,,,,,,,,C0rWin,ChristopherFerris,,,,,,,,,master,,,true,20/Dec/17 1:12 PM;C0rWin;https://gerrit.hyperledger.org/r/16341,04/Jan/18 11:46 AM;ChristopherFerris;[~C0rWin] Is this a bugfix or a story? The patch looks fine.,04/Jan/18 11:54 AM;C0rWin;[~ChristopherFerris] this is a bug.,,,,,,,,,,,,,,,,,,,,,
balance-transfer app fails to execute e2e due to jwt malformed error,FAB-7511,26169,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Ratnakar,Ratnakar,Ratnakar,19/Dec/17 7:08 PM,03/Jan/18 12:18 PM,26/Apr/18 6:50 AM,03/Jan/18 12:18 PM,v1.1.0-preview,,,,,,v1.1,,,fabric-quality,,,,0,,,,,,,,," balance-transfer app fails with the following error

{code}
error: [Client.js]: Failed to load user ""Barry"" from local key value store. Error: Error: Private key missing from key store. Can not establish the signing identity for user Barry
 at _cryptoSuite.importKey.then.then (/Users/ratnakar/workspace/go/src/github.com/hyperledger/fabric-samples/balance-transfer/node_modules/fabric-client/lib/User.js:255:11)
 at <anonymous>
error: [Client.js]: Failed to load an instance of requested user ""Barry"" from the state store on this Client instance. Error: Error: Private key missing from key store. Can not establish the signing identity for user Barry
 at _cryptoSuite.importKey.then.then (/Users/ratnakar/workspace/go/src/github.com/hyperledger/fabric-samples/balance-transfer/node_modules/fabric-client/lib/User.js:255:11)
 at <anonymous>
[2017-12-19 13:21:49.456] [ERROR] Helper - Failed to get registered user: Barry with error: Error: Private key missing from key store. Can not establish the signing identity for user Barry
[2017-12-19 13:21:49.456] [DEBUG] SampleWebApp - Successfully returned from registering the username Barry for organization Org2
UnauthorizedError: jwt malformed
 at /Users/ratnakar/workspace/go/src/github.com/hyperledger/fabric-samples/balance-transfer/node_modules/express-jwt/lib/index.js:102:22
 at /Users/ratnakar/workspace/go/src/github.com/hyperledger/fabric-samples/balance-transfer/node_modules/jsonwebtoken/verify.js:27:18
 at _combinedTickCallback (internal/process/next_tick.js:131:7)
 at process._tickCallback (internal/process/next_tick.js:180:9)
{code}

*Root Cause*: 
* The user crypto is not deleted properly and hence register/enroll fails on new network.
 which inturn throws jwt malformed",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ygd:,,,,,,,,Ratnakar,,,,,,,,,,master,,,true,19/Dec/17 7:20 PM;Ratnakar;https://gerrit.hyperledger.org/r/#/c/16323/,,,,,,,,,,,,,,,,,,,,,,,
"PTE fails to join channels, and install/instantiate chaincodes when multiple organizations are specified",FAB-7503,26149,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,shimos,shimos,shimos,19/Dec/17 1:38 AM,18/Jan/18 3:32 PM,26/Apr/18 6:50 AM,18/Jan/18 3:32 PM,v1.0.5,,,,,,v1.1,,,fabric-quality,,,,0,,,,,,,,,"When multiple organizations are specified in user inputs, PTE fails to join a channel, to install a chaincode, or to instantiate a chaincode, and results in some error or an infinite loop.

The example below works successfully when only single organization is specified in user inputs.

*To join a channel:*

{noformat}
$ cat /tmp/input_testorgschannel1_join_channel.json
{
    ""SCFile"": [
        {
            ""ServiceCredentials"": ""/tmp/sc_testorgschannel1.json""
        }
    ],
    ""TLS"": ""enabled"",
    ""chaincodeID"": ""sample_cc"",
    ""chaincodeVer"": ""v0"",
    ""channelID"": ""_testorgschannel1"",
    ""channelOpt"": {
        ""action"": ""join"",
        ""name"": ""testorgschannel1"",
        ""orgName"": [
            ""Org1"",
            ""Org2"",
            ""Org3""
        ]
    },
    ""logLevel"": ""ERROR"",
    ""nProcPerOrg"": 1,
    ""targetPeers"": ""OrgAnchor"",
    ""transType"": ""Channel""
}

$ node pte-main.js 0 /tmp/input_testorgschannel1_join_channel.json 0 0
info: [PTE 0 main]: input parameters: Nid=0, uiFile=/tmp/input_testorgschannel1_join_channel.json, tStart=0 PTEid=0
info: [PTE 0 main]: Nid: 0, chaincode_id: sample_cc_testorgschannel1, chaincode_ver: v0
info: [PTE 0 main]: TLS: ENABLED
info: [PTE 0 main]: channelName: testorgschannel1
info: [PTE 0 main]: channelOrgName.length: 3, channelOrgName: Org1,Org2,Org3
info: [PTE 0 main]: svcFile;  /tmp/sc_testorgschannel1.json
info: [PTE 0 main]: GOPATH:  /opt/gopath
info: [PTE 0 main]: nProcPerOrg  1
info: [PTE 0 main]: [performance_main] org= Org1, org Name= PeerOrg1
info: [PTE 0 main]: [performance_main] channel name:  testorgschannel1
info: [PTE 0 main]: [joinChannel] Calling peers in organization (PeerOrg1) to join the channel (testorgschannel1)
info: [PTE 0 main]: [joinChannel] user=admin, secret=adminpw
info: [PTE 0 main]: [chainAddOrderer] channel name:  testorgschannel1
info: [PTE 0 main]: [chainAddOrderer] channel orderers:  grpc.ssl_target_name_override=orderer0.example.com, grpc.default_authority=orderer0.example.com, grpc.max_receive_message_length=-1, grpc.max_send_message_length=-1, grpc.primary_user_agent=grpc-node/1.7.3, _url=gr pcs://localhost:5005, , addr=localhost:5005, _request_timeout=45000,
info: [PTE 0 main]: [performance_main] org= Org2, org Name= PeerOrg2
info: [PTE 0 main]: [performance_main] channel name:  testorgschannel1
info: [PTE 0 main]: [joinChannel] Calling peers in organization (PeerOrg2) to join the channel (testorgschannel1)
info: [PTE 0 main]: [joinChannel] user=admin, secret=adminpw
info: [PTE 0 main]: [chainAddOrderer] channel name:  testorgschannel1
info: [PTE 0 main]: [chainAddOrderer] channel orderers:  grpc.ssl_target_name_override=orderer0.example.com, grpc.default_authority=orderer0.example.com, grpc.max_receive_message_length=-1, grpc.max_send_message_length=-1, grpc.primary_user_agent=grpc-node/1.7.3, _url=gr pcs://localhost:5005, , addr=localhost:5005, _request_timeout=45000,
info: [PTE 0 main]: [performance_main] org= Org3, org Name= PeerOrg3
info: [PTE 0 main]: [performance_main] channel name:  testorgschannel1                                                                                                                                                                                                         info: [PTE 0 main]: [joinChannel] Calling peers in organization (PeerOrg3) to join the channel (testorgschannel1)
info: [PTE 0 main]: [joinChannel] user=admin, secret=adminpw
info: [PTE 0 main]: [chainAddOrderer] channel name:  testorgschannel1
info: [PTE 0 main]: [chainAddOrderer] channel orderers:  grpc.ssl_target_name_override=orderer0.example.com, grpc.default_authority=orderer0.example.com, grpc.max_receive_message_length=-1, grpc.max_send_message_length=-1, grpc.primary_user_agent=grpc-node/1.7.3, _url=grpcs://localhost:5005, , addr=localhost:5005, _request_timeout=45000,
info: [PTE util]:  Org1 admin_cert undefined
info: [PTE util]:  Org2 admin_cert undefined
info: [PTE util]:  Org3 admin_cert undefined
info: [PTE 0 main]: [joinChannel:Org2] Successfully enrolled orderer 'admin'
info: [PTE 0 main]: [joinChannel:Org1] Successfully enrolled orderer 'admin'
info: [PTE 0 main]: [joinChannel:Org3] Successfully enrolled orderer 'admin'
info: [PTE 0 main]: [joinChannel:org=testorgschannel1:Org2] Successfully got the genesis block
info: [PTE util]:  >>>> getting the org admin
info: [PTE util]:  Org2 admin_cert undefined
info: [PTE 0 main]: [joinChannel:org=testorgschannel1:Org1] Successfully got the genesis block
info: [PTE util]:  >>>> getting the org admin
info: [PTE util]:  Org1 admin_cert undefined
info: [PTE 0 main]: [joinChannel:org=testorgschannel1:Org3] Successfully got the genesis block
info: [PTE util]:  >>>> getting the org admin
info: [PTE util]:  Org3 admin_cert undefined
info: [PTE 0 main]: [joinChannel] Successfully enrolled org:Org2 'admin'
info: [PTE 0 main]: [channelAddPeerEvent] channel name:  testorgschannel1
info: [EventHub.js]: _connect - options {""grpc.ssl_target_name_override"":""peer0.org2.example.com"",""grpc.default_authority"":""peer0.org2.example.com"",""grpc.max_receive_message_length"":-1,""grpc.max_send_message_length"":-1}
info: [PTE 0 main]: [channelAddPeerEvent] requests: grpcs://localhost:7063, events: grpcs://localhost:6053
info: [EventHub.js]: _connect - options {""grpc.ssl_target_name_override"":""peer1.org2.example.com"",""grpc.default_authority"":""peer1.org2.example.com"",""grpc.max_receive_message_length"":-1,""grpc.max_send_message_length"":-1}
info: [PTE 0 main]: [channelAddPeerEvent] requests: grpcs://localhost:7064, events: grpcs://localhost:6054
info: [PTE 0 main]: [joinChannel] Successfully enrolled org:Org1 'admin'
info: [PTE 0 main]: [channelAddPeerEvent] channel name:  testorgschannel1
info: [EventHub.js]: _connect - options {""grpc.ssl_target_name_override"":""peer0.org1.example.com"",""grpc.default_authority"":""peer0.org1.example.com"",""grpc.max_receive_message_length"":-1,""grpc.max_send_message_length"":-1}
info: [PTE 0 main]: [channelAddPeerEvent] requests: grpcs://localhost:7061, events: grpcs://localhost:6051
info: [EventHub.js]: _connect - options {""grpc.ssl_target_name_override"":""peer1.org1.example.com"",""grpc.default_authority"":""peer1.org1.example.com"",""grpc.max_receive_message_length"":-1,""grpc.max_send_message_length"":-1}
info: [PTE 0 main]: [channelAddPeerEvent] requests: grpcs://localhost:7062, events: grpcs://localhost:6052
info: [PTE 0 main]: [joinChannel] Successfully enrolled org:Org3 'admin'
info: [PTE 0 main]: [channelAddPeerEvent] channel name:  testorgschannel1
info: [EventHub.js]: _connect - options {""grpc.ssl_target_name_override"":""peer0.org3.example.com"",""grpc.default_authority"":""peer0.org3.example.com"",""grpc.max_receive_message_length"":-1,""grpc.max_send_message_length"":-1}
info: [PTE 0 main]: [channelAddPeerEvent] requests: grpcs://localhost:7065, events: grpcs://localhost:6055
info: [EventHub.js]: _connect - options {""grpc.ssl_target_name_override"":""peer1.org3.example.com"",""grpc.default_authority"":""peer1.org3.example.com"",""grpc.max_receive_message_length"":-1,""grpc.max_send_message_length"":-1}
info: [PTE 0 main]: [channelAddPeerEvent] requests: grpcs://localhost:7066, events: grpcs://localhost:6056
error: [client-utils.js]: sendPeersProposal - Promise is rejected: Error: Failed to deserialize creator identity, err expected MSP ID PeerOrg2, received PeerOrg3
    at /opt/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/client.js:554:15
error: [client-utils.js]: sendPeersProposal - Promise is rejected: Error: Failed to deserialize creator identity, err expected MSP ID PeerOrg2, received PeerOrg1
    at /opt/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/client.js:554:15
error: [client-utils.js]: sendPeersProposal - Promise is rejected: Error: Failed to deserialize creator identity, err expected MSP ID PeerOrg2, received PeerOrg3
    at /opt/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/client.js:554:15
error: [client-utils.js]: sendPeersProposal - Promise is rejected: Error: Failed to deserialize creator identity, err expected MSP ID PeerOrg2, received PeerOrg1
    at /opt/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/client.js:554:15
error: [client-utils.js]: sendPeersProposal - Promise is rejected: Error: Failed to deserialize creator identity, err expected MSP ID PeerOrg1, received PeerOrg3
    at /opt/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/client.js:554:15
error: [client-utils.js]: sendPeersProposal - Promise is rejected: Error: Failed to deserialize creator identity, err expected MSP ID PeerOrg1, received PeerOrg3
    at /opt/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/client.js:554:15
info: [PTE 0 main]: [joinChannel] The new channel has been successfully joined on peer localhost:6052
info: [PTE 0 main]: [joinChannel] The new channel has been successfully joined on peer localhost:6052
info: [PTE 0 main]: [joinChannel] The new channel has been successfully joined on peer localhost:6054
info: [PTE 0 main]: [joinChannel] The new channel has been successfully joined on peer localhost:6054
info: [PTE 0 main]: [joinChannel] The new channel has been successfully joined on peer localhost:6054
info: [PTE 0 main]: [joinChannel] The new channel has been successfully joined on peer localhost:6053
info: [PTE 0 main]: [joinChannel] The new channel has been successfully joined on peer localhost:6053
info: [PTE 0 main]: [joinChannel] The new channel has been successfully joined on peer localhost:6053
info: [PTE 0 main]: [joinChannel] The new channel has been successfully joined on peer localhost:6056
info: [PTE 0 main]: [joinChannel] join Channel R E S P O N S E : [[{""version"":0,""timestamp"":null,""response"":{""status"":200,""message"":"""",""payload"":{""type"":""Buffer"",""data"":[]}},""payload"":{""type"":""Buffer"",""data"":[]},""endorsement"":null},{""version"":0,""timestamp"":null,""response"":{""status"":200,""message"":"""",""payload"":{""type"":""Buffer"",""data"":[]}},""payload"":{""type"":""Buffer"",""data"":[]},""endorsement"":null}],null,null]
info: [PTE 0 main]: [joinChannel] Successfully joined peers in (testorgschannel1:PeerOrg3) {noformat}

*To install a chaincode: (results in infinite loop)*

{noformat}
$ cat /tmp/input_testorgschannel1_install_chaincode.json
{
    ""SCFile"": [
        {
            ""ServiceCredentials"": ""/tmp/sc_testorgschannel1.json""
        }
    ],
    ""TLS"": ""enabled"",
    ""chaincodeID"": ""sample_cc"",
    ""chaincodeVer"": ""v0"",
    ""channelID"": ""_testorgschannel1"",
    ""channelOpt"": {
        ""name"": ""testorgschannel1"",
        ""orgName"": [
            ""Org1"",
            ""Org2"",
            ""Org3""
        ]
    },
    ""deploy"": {
        ""args"": [],
        ""chaincodePath"": ""github.com/hyperledger/fabric-test/chaincodes/samplecc/go"",
        ""fcn"": ""init""
    },
    ""logLevel"": ""ERROR"",
    ""nProcPerOrg"": 1,
    ""transType"": ""Install""
}
$ node pte-main.js 0 /tmp/input_testorgschannel1_install_chaincode.json 0 0
info: [PTE 0 main]: input parameters: Nid=0, uiFile=/tmp/input_testorgschannel1_install_chaincode.json, tStart=0 PTEid=0
info: [PTE 0 main]: Nid: 0, chaincode_id: sample_cc_testorgschannel1, chaincode_ver: v0
info: [PTE 0 main]: TLS: ENABLED
info: [PTE 0 main]: channelName: testorgschannel1
info: [PTE 0 main]: channelOrgName.length: 3, channelOrgName: Org1,Org2,Org3
info: [PTE 0 main]: svcFile;  /tmp/sc_testorgschannel1.json
info: [PTE 0 main]: GOPATH:  /opt/gopath
info: [PTE 0 main]: nProcPerOrg  1
info: [PTE 0 main]: [performance_main] org= Org1, org Name= PeerOrg1
info: [PTE 0 main]: chaincode language: golang, path: github.com/hyperledger/fabric-test/chaincodes/samplecc/go
info: [PTE 0 main]: [performance_main] Deploy: user= admin, secret= adminpw
info: [PTE 0 main]: [performance_main] org= Org2, org Name= PeerOrg2
info: [PTE 0 main]: chaincode language: golang, path: github.com/hyperledger/fabric-test/chaincodes/samplecc/go
info: [PTE 0 main]: [performance_main] Deploy: user= admin, secret= adminpw
info: [PTE 0 main]: [performance_main] org= Org2, org Name= PeerOrg2
info: [PTE 0 main]: chaincode language: golang, path: github.com/hyperledger/fabric-test/chaincodes/samplecc/go
info: [PTE 0 main]: [performance_main] Deploy: user= admin, secret= adminpw {noformat}

*To instantiate a chaincode: (also results in infinite loop)*

{noformat}
$ cat /tmp/input_testorgschannel1_instantiate_chaincode.json
{
    ""SCFile"": [
        {
            ""ServiceCredentials"": ""/tmp/sc_testorgschannel1.json""
        }
    ],
    ""TLS"": ""enabled"",
    ""chaincodeID"": ""sample_cc"",
    ""chaincodeVer"": ""v0"",
    ""channelID"": ""_testorgschannel1"",
    ""channelOpt"": {
        ""name"": ""testorgschannel1"",
        ""orgName"": [
            ""Org1"",
            ""Org2"",
            ""Org3""
        ]
    },
    ""deploy"": {
        ""args"": [],
        ""chaincodePath"": ""github.com/hyperledger/fabric-test/chaincodes/samplecc/go"",
        ""fcn"": ""init""
    },
    ""logLevel"": ""ERROR"",
    ""nProcPerOrg"": 1,
    ""transType"": ""Instantiate""
}

$ node pte-main.js 0 /tmp/input_testorgschannel1_instantiate_chaincode.json 0 0
info: [PTE 0 main]: input parameters: Nid=0, uiFile=/tmp/input_testorgschannel1_instantiate_chaincode.json, tStart=0 PTEid=0
info: [PTE 0 main]: Nid: 0, chaincode_id: sample_cc_testorgschannel1, chaincode_ver: v0
info: [PTE 0 main]: TLS: ENABLED
info: [PTE 0 main]: channelName: testorgschannel1
info: [PTE 0 main]: channelOrgName.length: 3, channelOrgName: Org1,Org2,Org3
info: [PTE 0 main]: svcFile;  /tmp/sc_testorgschannel1.json
info: [PTE 0 main]: GOPATH:  /opt/gopath
info: [PTE 0 main]: nProcPerOrg  1
info: [PTE 0 main]: [performance_main] org= Org1, org Name= PeerOrg1
info: [PTE 0 main]: chaincode language: golang, path: github.com/hyperledger/fabric-test/chaincodes/samplecc/go
info: [PTE 0 main]: [performance_main] instantiate: user= admin, secret= adminpw
info: [PTE 0 main]: [performance_main] org= Org2, org Name= PeerOrg2
info: [PTE 0 main]: chaincode language: golang, path: github.com/hyperledger/fabric-test/chaincodes/samplecc/go
info: [PTE 0 main]: [performance_main] instantiate: user= admin, secret= adminpw
info: [PTE 0 main]: [performance_main] org= Org2, org Name= PeerOrg2
info: [PTE 0 main]: chaincode language: golang, path: github.com/hyperledger/fabric-test/chaincodes/samplecc/go
info: [PTE 0 main]: [performance_main] instantiate: user= admin, secret= adminpw
info: [PTE 0 main]: [performance_main] org= Org2, org Name= PeerOrg2 ....
{noformat}

",fabric-test commit 133e7946c442a67a8f9ecdeea10b01686e207577,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,0|i01yd1:,,,,,,,,shimos,,,,,,,,,,master,,,true,09/Jan/18 9:35 PM;shimos;CR: https://gerrit.hyperledger.org/r/c/16685/,,,,,,,,,,,,,,,,,,,,,,,
fabric-sdk-node8-merge-x86_64 test failed due to 'premature execution' of chaincode.,FAB-7501,26147,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,sambhavdutt,sambhavdutt,18/Dec/17 10:25 PM,15/Jan/18 3:34 PM,26/Apr/18 6:50 AM,13/Jan/18 5:40 PM,,,,,,,,,,fabric-quality,,,,0,ci_failure,,,,,,,,"fabric-sdk-node8-merge-x86_64 failed as the following chaincode error was observed in the build #84,

22:11:56 not ok 1258 Error: error executing chaincode: premature execution - chaincode (end2endnodesdk:v3) is being launched
22:11:56   ---
22:11:56     operator: error
22:11:56     expected: |-
22:11:56       undefined
22:11:56     actual: |-
22:11:56       { [Error: error executing chaincode: premature execution - chaincode (end2endnodesdk:v3) is being launched] code: 2, metadata: { _internal_repr: {} } }
22:11:56     at: process.onetime (/w/workspace/fabric-sdk-node8-merge-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape-promise/node_modules/onetime/index.js:22:12)
22:11:56     stack: |-
22:11:56       Error: error executing chaincode: premature execution - chaincode (end2endnodesdk:v3) is being launched

*Build Log*

https://jenkins.hyperledger.org/view/fabric-sdk-node/job/fabric-sdk-node8-merge-x86_64/84/consoleFull",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ycl:,,,,,,,,sambhavdutt,,,,,,,,,,,,,,"13/Jan/18 5:40 PM;sambhavdutt;The end2endnodesdk test that failed in build #84, has been passed the last 3 builds. The end2endnodesdk tests are working successfully without any errors.",,,,,,,,,,,,,,,,,,,,,,,
Fix config error in fabric-samples,FAB-7494,26131,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,Jing.Cao,Jing.Cao,18/Dec/17 6:58 AM,22/Feb/18 3:48 AM,26/Apr/18 6:50 AM,22/Feb/18 3:48 AM,,,,,,,v1.1,,,fabric-samples,,,,0,,,,,,,,,"In project fabric-samples,

in the file fabric-samples/first-network/base/docker-compose-base.yaml Line 100,

the bootstrap config of peer1.org2 should be ""peer0.org2.example.com:7051"",

rather than ""peer1.org2.example.com:7051"",

otherwise the peer0.org2 cannot know the existence of peer1.org2.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01y99:,,,,,,,,denyeart,Jing.Cao,yacovm,,,,,,,,master,,,true,05/Feb/18 3:56 PM;Clayton Sims;What is the eta for the fix?,20/Feb/18 8:53 PM;denyeart;[~yacovm] Could you review the byfn gossip settings and making any adjustments if needed?,20/Feb/18 9:10 PM;yacovm;here you go https://gerrit.hyperledger.org/r/#/c/18107/,,,,,,,,,,,,,,,,,,,,,
Fix config error in fabric-samples,FAB-7493,26129,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Jing.Cao,Jing.Cao,Jing.Cao,18/Dec/17 5:23 AM,18/Dec/17 6:58 AM,26/Apr/18 6:50 AM,18/Dec/17 6:58 AM,,,,,,,,,,fabric-samples,,,,0,,,,,,,,,"In project fabric-samples,

in the file fabric-samples/first-network/base/docker-compose-base.yaml Line 100,

the bootstrap config of peer1.org2 should be ""peer0.org2.example.com:7051"",

rather than ""peer1.org2.example.com:7051"",

otherwise the peer0.org2 cannot know the existence of peer1.org2.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01y8t:,,,,,,,,Jing.Cao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix bootstrap config error in fabric-samples,FAB-7492,26128,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Jing.Cao,Jing.Cao,Jing.Cao,18/Dec/17 5:02 AM,18/Dec/17 5:20 AM,26/Apr/18 6:50 AM,18/Dec/17 5:20 AM,,,,,,,,,,fabric-samples,,,,0,,,,,,,,,"In project fabric-samples, in the file fabric-samples/first-network/base/docker-compose-base.yaml Line 100,

the bootstrap config of peer1.org2 should be ""peer0.org2.example.com:7051"", rather than ""peer1.org2.example.com:7051"", otherwise the peer0.org2 cannot know the existence of peer1.org2.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01y8l:,,,,,,,,Jing.Cao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix typo in node/fabcar.js,FAB-7487,26120,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nikklein,nikklein,nikklein,16/Dec/17 8:10 PM,29/Dec/17 10:26 PM,26/Apr/18 6:50 AM,16/Dec/17 9:46 PM,,,,,,,,,,fabric-examples,,,,0,,,,,,,,,The function name changeCarowner spelled incorrectly in fabric-samples/chaincode/fabcar/node/fabcar.js. According to this [tutorial|http://hyperledger-fabric.readthedocs.io/en/latest/write_first_app.html] it should be spelled changeCarOwner. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:za2ri,,Sprint 16 - SDK node,,,,,,nikklein,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
'No identity type provided' Error In fabcar Node Sample,FAB-7481,26114,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,edwardsun9,edwardsun9,16/Dec/17 3:57 AM,15/Feb/18 6:54 PM,26/Apr/18 6:50 AM,15/Feb/18 6:54 PM,,,,,,,Not a Bug,,,fabric-samples,,,,0,,,,,,,,,"When run the latest fabcar sample registerUser.js in [fabric-samples|https://github.com/hyperledger/fabric-samples] I got the following error:
{quote}Failed to register: Error: fabric-ca request register failed with errors [[{""code"":0,""message"":""No identity type provided. Please provide identity type""}]]{quote}

It can be fix by add 'role' field parameter.

If 'role' is mandatory field, it should provide a default value in sample for less confusing or mentioned in the [document|https://hyperledger-fabric.readthedocs.io/en/latest/write_first_app.html] at least.


 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01y65:,,,,,,,,aambati,blw,denyeart,edwardsun9,n-horiguchi,zhaochy,,,,,,,,,"25/Dec/17 9:12 PM;blw;A workaround for this is to provide a non-null value for the role. [https://stackoverflow.com/questions/47175691/unable-to-registeruser-for-hyperledger-fabric-fabcar-sample-project]

 

However, it states in the node API docs ([https://fabric-sdk-node.github.io/FabricCAClient.html#register__anchor)] that in fabric-ca-client.register(...) the role is optional. I would suggest that the fix for this go into the fabric-sdk-node to make the functionality match the documentation.","10/Jan/18 9:07 AM;zhaochy;[~edwardsun9] could you please provides more details, this sample works good for me","11/Jan/18 7:47 AM;n-horiguchi;I looked into this problem, and found that this problem reproduced fabric-ca v1.0.5 with latest fabric-samples. If you use master branch of fabric-ca, registerUser.js passes as Zhao Chaoyi says. The related fix is from FAB-5697 which is in v1.1.0-preview, but not in v1.0.5.

I'm not sure that fixing sample code to avoid this problem is a good idea, because fabric-sample seems to be targetted for master at the time. We need some extra effort to keep the samples runnable both for master and stable, but is it worth doing?","14/Feb/18 4:59 PM;denyeart;[~aambati] Can you take a look and provide your opinion?

Are we good on master fabric-samples against master fabric (1.1)?

Is a fix needed against samples release branch (1.0) to work with Fabric release branch (1.0)?",15/Feb/18 6:53 PM;aambati;I have verified that 1.0.x fabcar works fine with 1.0.x fabric images and 1.1 fabcar works fine with 1.1 fabric images. I don't think we need to make any changes. Marking this as done.,,,,,,,,,,,,,,,,,,,
TransferMarble failure in fabric-test-merge-x86_64,FAB-7477,26109,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Nishi,sambhavdutt,sambhavdutt,15/Dec/17 6:52 PM,25/Dec/17 7:30 PM,26/Apr/18 6:50 AM,25/Dec/17 7:30 PM,,,,,,,,,,fabric-quality,,,,0,ci_failure,,,,,,,,"fabric-test-merge-x86_64 failed as the following errors were observed,

*FAB-5791: Test API in SHIM interface using marbles02 and shimApiDriver chaincodes for kafka orderer couchdb db GOLANG lang -- @1.2*

Error Message

Expected response was ""owner"":""jerry""; received Query Result: 
Failing step: And a user receives a response containing ""owner"":""jerry"" ... failed in 0.000s
Location: chaincodes.feature:424
Assertion Failed: Expected response was ""owner"":""jerry""; received Query Result: 
    And a user receives a response containing ""size"":35 ... passed in 0.000s
    And a user receives a response containing ""owner"":""jerry"" ... failed in 0.000s

*Build Log*

https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-merge-x86_64/128/testReport/chaincodes/Chaincodes%20Testing/FAB_5791__Test_API_in_SHIM_interface_using_marbles02_and_shimApiDriver_chaincodes_for_kafka_orderer_couchdb_db_GOLANG_lang_____1_2_/

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01y51:,,,,,,,,Nishi,sambhavdutt,scottz,,,,,,,,,,,,"19/Dec/17 7:31 PM;scottz;transferMarble() is used in other tests in the same file chaincodes.feature. Check if it worked for them, or if fails for all uses of transferMarble.

Consider raising timeout from 3 to 5 secs in line 418, if intermittent failure.","19/Dec/17 8:15 PM;Nishi;Ran three behave tests:

5791,3888 & 6576 from chaincodes.feature that use transferMarble

All three tests passed successfully locally.

Fabric-test commit level *a2381aa7a01ba210652e4faaa162554989a0ce62*

 ","22/Dec/17 7:56 PM;sambhavdutt;This chaincode test didn't fail in the two builds, #134 and #135. Build #134 and #135 passed successfully.",,,,,,,,,,,,,,,,,,,,,
too many open files ca.crt,FAB-7703,26000,Bug,Invalid,FAB,Fabric,software,ChristopherFerris,,,Medium,,jeffgarratt,lishuo5263,lishuo5263,15/Dec/17 7:52 AM,05/Apr/18 5:37 PM,26/Apr/18 6:50 AM,,,,,,,,Not a Bug,,,fabric-samples,,,15/Dec/17 12:00 AM,0,openfiles,,,,,,,,"* when I was run fabric-samples balance-transfer,and I use loadrunner to Pressure test ,then I find my nodejs log and that say too many open files ca.crt why ?? please help me ASAP tks!!","Ubuntu 16.04
 * root@iZuf68r73by2km15j2oh29Z:~/mry# node -v
v6.10.3
root@iZuf68r73by2km15j2oh29Z:~/mry# npm -v
5.5.1
root@iZuf68r73by2km15j2oh29Z:~/mry# docker -v
Docker version 1.13.1, build 092cba3
root@iZuf68r73by2km15j2oh29Z:~/mry# docker-compose -v
docker-compose version 1.14.0, build c7bdf9e

 ",,,,,,,,,,,,,,,,,,,15/Dec/17 7:52 AM;lishuo5263;5964e5a8fa6dc189cb916b9455dac33.png;https://jira.hyperledger.org/secure/attachment/13800/5964e5a8fa6dc189cb916b9455dac33.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01y2t:,,,,,,,,ChristopherFerris,jeffgarratt,krw910,lishuo5263,mastersingh24,,,,,,,,,,11/Jan/18 9:56 PM;nage;This appears to have been incorrectly logged into INDY.,16/Jan/18 5:07 PM;Clayton Sims;[~jeffgarratt]  not sure what component this goes to.   Could you kindly triage and let us know what component is best to assess this.  ,"17/Jan/18 8:53 PM;jeffgarratt;[~Clayton Sims] [~lishuo5263]  appears you are running out of file handles.  You can check your current limit with ""ulimit -a"" and search of the 'open files' entry.  You can try bumping this up.  If it is already large then perhaps there is an issue with respect to resources in the fabric-samples.","27/Jan/18 11:55 AM;mastersingh24;This is not a bug.  It's a system configuration error.  [~jeffgarratt] is correct in his comment above.
Will leave this open but marking as medium",05/Apr/18 5:36 PM;ChristopherFerris;Going to close this as it has been dormant for months now.,,,,,,,,,,,,,,,,,,,
fabric-ca a user with hf.Registrar.Attributes '*' can grant too much authority,FAB-7465,25758,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,rennman,rennman,14/Dec/17 9:08 PM,20/Jan/18 10:08 AM,26/Apr/18 6:50 AM,20/Jan/18 10:08 AM,v1.1,,,,,,v1.1.0-alpha,,,fabric-ca,,,,0,,,,,,,,,"A user with 'hf.Registrar.Attributes' set to '*' (the default) is allowed to raise his own level of access and/or delegate greater access than he himself has.

An example:
A user with only the following definition (restricted admin):
{code:java}
   {
      ""type"": ""user"",
      ""affiliation"": ""."",
      ""attrs"": [
         {""name"": ""hf.Registrar.Roles"", ""value"": ""user""},
         {""name"": ""hf.Registrar.Attributes"", ""value"": ""*""}
       ]
   }
{code}

Presumably, this admin can only register type 'user' and nothing more, especially given the fact that in most cases, we specifically check to ensure that such an admin may not delegate anything other than type 'user'

However, with hf.Registrar.Attributes '*', he can register a user with much more authority, e.g.

{code:java}
  {
      ""type"": ""user"",
      ""affiliation"": ""."",
      ""max_enrollments"": -1,
      ""attrs"": [
         {""name"": ""hf.Registrar.Roles"", ""value"": ""superUser,client,user,peer,validator,auditor,ca,apple,orange""},
         {""name"": ""hf.Registrar.DelegateRoles"", ""value"": ""superUser,client,user,peer,validator,auditor,ca,apple,orange""},
         {""name"": ""hf.Revoker"", ""value"": ""true""},
         {""name"": ""hf.IntermediateCA"", ""value"": ""true""},
         {""name"": ""hf.GenCRL"", ""value"": ""true""},
         {""name"": ""hf.Registrar.Attributes"", ""value"": ""*""}
      ]
   }
{code}

  This is likely not the intention, and since it is the default, also insecure.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01y0t:,,,,,,,,mastersingh24,rennman,skarim,smithbk,,,,,,,master,,,true,29/Dec/17 10:34 AM;mastersingh24;Maybe we need to make sure that * hf.Registrar.Roles* is treated as a special attribute?,"03/Jan/18 4:28 PM;smithbk;There would still be problems with other attributes such as hf.Revoker.
To fix this, the ""hf.Registrar.Attributes"" will be an additional check made, but the registrar will still be required to own an ""hf.*"" attribute before registering another identity with that attribute.
More specifically, the following checks will be made during registration of an attribute:
1) For ALL attributes, the name of the attribute being registered must match the value of registrar's hf.Registrar.Attributes attribute
2) For hf.* attributes, the registrar must own the attribute and if the attribute is a boolean attribute (such as ""hf.Revoker""), the registrar's value for the attribute must be true.
    The other special cases for checking the value of ""hf.Registrar.Roles"" and ""hf.Registrar.DelegateRoles"" will continue to be made.
    The special case for checking the value of ""hf.Registrar.Attributes"" is that the registree's value must be equal to or a subset of the registrar's value.  This is why we only support the trailing ""*"" for pattern matching here, to make it easy to perform the subset operation.",16/Jan/18 5:43 PM;skarim;https://gerrit.hyperledger.org/r/#/c/16559/,,,,,,,,,,,,,,,,,,,,,
fabric-ca CRL with revoke command does not include revoked cert,FAB-7464,25757,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,rennman,rennman,14/Dec/17 9:00 PM,19/Jan/18 9:42 PM,26/Apr/18 6:50 AM,19/Jan/18 9:42 PM,,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"Presumably, one of the purposes of having a --gencrl flag on the revoke cmd is to get a cRL that includes the newly-revoked certificate. However, because of a timing issue, the CRL that is generated by the revoke cmd with the --gencrl flag does not always include the cert being revoked. In particular on the s390 build machines, this is nearly always the case. It is because the 'revokedbefore' time that is passed in to generate the CRL is just slightly behind the actual revoke time, and misses the newly-revoked cert.

",,,,,,,,,,,,FAB-7207,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01y0l:,,,,,,,,aambati,rennman,,,,,,,,,master,,,true,11/Jan/18 12:03 AM;aambati;https://gerrit.hyperledger.org/r/c/16759/,,,,,,,,,,,,,,,,,,,,,,,
[CI] - update CI scripts to pull third party docker images,FAB-7449,25722,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,13/Dec/17 8:02 PM,14/Dec/17 2:29 PM,26/Apr/18 6:50 AM,14/Dec/17 2:29 PM,,,,,,,,,,fabric-ci,,,,0,,,,,,,,,"update CI scripts to pull thirdparty docker images (couchdb, kafka and zookeeper) from hyperledger docker hub account. this pulls 1.1.0-preview docker images.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01xv9:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,14/Dec/17 2:29 PM;rameshthoomu;patch has been submitted and merged. All the fabric-sdk-node verify and merge jobs now pull thridparty docker images and tag it as latest.,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - fabric message change breaks tests,FAB-7447,25719,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,13/Dec/17 6:50 PM,08/Jan/18 11:06 PM,26/Apr/18 6:50 AM,08/Jan/18 11:06 PM,,,,,,,v1.1,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"Message had ""cannot get package for the chaincode""

now has ""no such file or directory""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01xul:,,,,,,,,harrisob@us.ibm.com,mastersingh24,,,,,,,,,master,,,true,06/Jan/18 1:07 PM;mastersingh24;[~harrisob@us.ibm.com] Can you please update the description with details on the actual issue?,08/Jan/18 11:05 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/16185/,,,,,,,,,,,,,,,,,,,,,,
txid exists inside createTxContext when invoking two chaincodes directly after each other,FAB-7437,25412,Bug,Monitor / On Hold,FAB,Fabric,software,ChristopherFerris,,,Medium,,harrisob@us.ibm.com,daanporon,daanporon,12/Dec/17 2:28 PM,20/Mar/18 8:31 PM,26/Apr/18 6:50 AM,,v1.1.0-preview,,,,,,v1.2,,,fabric-chaincode-node,,,,0,,,,,,,,,"inside our chaincode we are doing: 
{code:java}
await stub.invokeChaincode('chaincode2', []);
await stub.invokeChaincode('chaincode3', []);
{code}
and when doing this we sometimes get an error when invoking the second one that the txid already exists. We think this has something to do with that the deleteTxContext isn't executed for the first context ([https://github.com/hyperledger/fabric/blob/release/core/chaincode/chaincode_support.go#L749)] when the promise is resolved. Right now we resolved this with waiting 100ms before invoking chaincode3 and then we don't have this issue anymore.

 

We are using node.js chaincode on the 1.1.0-preview version",,,,,,,,,,,,,,,,,,,,12/Dec/17 2:27 PM;daanporon;error.log;https://jira.hyperledger.org/secure/attachment/13604/error.log,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01xpx:,,,,,,,,daanporon,davidkel,denyeart,harrisob@us.ibm.com,,,,,,,,,,,"21/Feb/18 2:50 PM;davidkel;I've tried to recreate the problem but I haven't been able to on builds later than the preview release. However is this is a problem then as indicated by the reporter, the issue could like inside the peer itself rather than the fabric-chaincode-node part. 
The fabric-chaincode-node would only return to the caller once it has a response from the peer and it replicates what the go shim would do as well so if this problem occurs in the fabric-chaincode-node then the likelyhood is that it also occurs in go chaincode as well.

[~daanporon] are you able to test against the alpha release to see if the problem still occurs ? if it does then it may be worth tagging it to a different component given that I don't believe the problem lies in the node shim implementation as indicated by your comment.",26/Feb/18 11:55 AM;denyeart;Deferring to 1.2 since it is not know if this is still a problem in 1.1.,20/Mar/18 8:31 PM;harrisob@us.ibm.com;Is this an issue with the fabric 1.1 ?,,,,,,,,,,,,,,,,,,,,,
Different chaincode package produced if files are owned by different users,FAB-7434,25409,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,12/Dec/17 9:21 AM,13/Dec/17 1:26 PM,26/Apr/18 6:50 AM,13/Dec/17 1:26 PM,v1.0.5,v1.1,,,,,v1.0.6,v1.1,,fabric-peer,,,,0,,,,,,,,,"If you run 

{code:java}
peer chaincode package
{code}

to package the same code but the user/group who owns the files is different, you end up with two different code packages.  And if the two packages are installed on different peers, once the chaincode is instantiated it will result in 

{code:java}
chaincode fingerprint mismatch data mismatch
{code}",,,,,,,,,,,,,,,,,FAB-7065,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01xp9:,,,,,,,,bitdream,mastersingh24,,,,,,,,,release-1.0,master,,true,"12/Dec/17 9:23 AM;mastersingh24;Packaging chaincode should support ""repeatable"" builds so I think we should fix this one","12/Dec/17 9:34 AM;mastersingh24;https://gerrit.hyperledger.org/r/16143  (master)
https://gerrit.hyperledger.org/r/16145 (release)",,,,,,,,,,,,,,,,,,,,,,
Why not use -o argument setting for ordererAddresses when 'peer node start' and 'peer channel join',FAB-7431,25406,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,meinvzou,meinvzou,12/Dec/17 7:05 AM,29/Dec/17 10:36 AM,26/Apr/18 6:50 AM,29/Dec/17 10:36 AM,,,,,,,Not a Bug,WON'T FIX,,,,,,0,,,,,,,,,"Following the fabric-samples/basic-network demo, I'm now using command line to debug the source code.

1) $./orderer

2)$./peer node start

3)$./peer channel create -o 127.0.0.1:7050 -c mychannel -f /etc/hyperledger/configtx/channel.tx [connet with orderer 127.0.0.1:7050 successfully, create channel successfully]

{color:#ff0000}4)$./peer channel join -o 127.0.0.1:7050 -b mychannel.block [ problem occurs: failed to connect to orderer with addresses in mychannel.block as orderer.example.com:7050, not use the -o argument as 127.0.0.1:7050]{color}

{color:#ff0000}5)The same problem occurs as 4) while rerun the command as $./peer node start.{color}

 

As concerned, it would be better to use an orderer address specified in a command line before use the address hard coded in a config block, while considering orderer server's IP network changes in production environment. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01xol:,,,,,,,,mastersingh24,meinvzou,,,,,,,,,,,,,16/Dec/17 1:19 PM;mastersingh24;This is intentional.  The only reason *peer channel create* takes the *-o* is because it actually directly communicates with the orderer to create the channel.  Other than that the peer will use the channel config info from the latest config block for the channel.  It is also a best practice not to use IP addresses but to use FQDN's instead for production environments,,,,,,,,,,,,,,,,,,,,,,,
getPemMaterialFromDir does not properly evaluate symlinks,FAB-7428,25402,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sykesm,ysim,ysim,11/Dec/17 10:30 PM,11/Jan/18 6:56 PM,26/Apr/18 6:50 AM,11/Jan/18 6:55 PM,v1.1,,,,,,v1.1,,,fabric-crypto,,,,0,,,,,,,,,"This issue was discovered while attempting to set up a fabric network using Kubernetes, though I suspect making the requisite changes might be helpful for other deployment setups down the line.

[Kubernetes' Secrets management|https://kubernetes.io/docs/concepts/configuration/secret/] is well-suited to store the crypto material (e.g. the contents of the msp and tls directories) of the various peer/orderer/CA components. However, in Kubernetes, Secrets are made available via symlinks. For instance, this is what the msp/cacerts directory looks like when mounted as a volume populated by Kubernetes secrets:

 
{code:java}
root@orderer:/var/hyperledger/orderer/msp/cacerts# ls -al 
total 4 
drwxrwxrwt 3 root root 100 Dec 11 20:04 . 
drwxr-xr-x 7 root root 4096 Dec 11 20:04 .. 
drwxr-xr-x 2 root root 60 Dec 11 20:04 ..129812_11_12_20_04_36.809431284 
lrwxrwxrwx 1 root root 33 Dec 11 20:04 ..data -> ..129812_11_12_20_04_36.809431284 
lrwxrwxrwx 1 root root 31 Dec 11 20:04 ca.example.com-cert.pem -> ..data/ca.example.com-cert.pem
{code}
The problem is that getPemMaterialFromDir does not traverse symlinks, and if it does, it should also check that the source of the symlink is not a directory. In other words, it should only read from regular files and links to regular files.

This change would make deploying the fabric network using Kubernetes a lot smoother.

 ",,,,3600,0,,0%,3600,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01xo5:,,,,,,,,elli-androulaki,mastersingh24,sykesm,ysim,,,,,,,master,,,true,12/Dec/17 3:12 PM;mastersingh24;https://gerrit.hyperledger.org/r/16133,"08/Jan/18 6:14 PM;elli-androulaki;Hi, I updated its Fix-version to 1.1 best effort :)","10/Jan/18 3:46 PM;sykesm;After looking at the CR for a few minutes, I'm confused. The original issue implies that secrets management did not work because of symlinks.

Prior to any changes, the code would issue a warning when readPemFIle failed but it would carry on enumerating over the rest of the directory entries. That means if we try to read from a symlink to a dir, the operation will fail but it's non-fatal.

Since ioutil.ReadDir is using os.Lstat under the covers[1], the IsDir check done at the top of the loop will return false for links to directories. Given how the loop is coded, this means we'll attempt to read the link as a cert, fail, and create some noise, but it should still read and resolve the file.

At the end of the day, I think we're just trying to avoid the warning message.

[1]: https://github.com/golang/go/blob/release-branch.go1.9/src/os/dir_unix.go#L27",10/Jan/18 4:36 PM;sykesm;Possible alternative to 16133: https://gerrit.hyperledger.org/r/16735,,,,,,,,,,,,,,,,,,,,
"Orderer ""Error reading from stream"" after beginning batch timer",FAB-7420,25200,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,alexanderlhicks,alexanderlhicks,11/Dec/17 6:50 PM,24/Jan/18 4:00 PM,26/Apr/18 6:50 AM,24/Jan/18 4:00 PM,v1.0.5,,,,,,Not a Bug,,,fabric-orderer,,,,0,,,,,,,,,"I'm trying to set up a network of four organisations, each with one peer (set as admin), and an orderer with kafka ordering service along with a client, which makes 7 VMs.

Setting up the cryptographic material, starting every channel (two of them), joining them with the appropriate peers and installing/instantiating chaincode happens with no trouble.

When trying to invoke chaincode, the chaincode can be successfully invoked (status:200) however the results do not seem to be recorded on the ledger. When running chaincode which returns the value for a/multiple key(s), the resulting payload is simply null. This seems to be due to a fault in the ordering service: I get keeping the error message ""Error reading from stream: rpc error: code = Canceled desc = context canceled"".

Here are logs for the orderer and endorsing peers of the transaction (which returns status:200)
 * Orderer: [https://gist.github.com/alexanderlhicks/91f32fb5ed2b6d5d232dcdad0572ffee]
 * Peer1 (initiating transaction): [https://gist.github.com/alexanderlhicks/a2c7a37d3e692336dbc9a8a9f7fd66ba]
 * Peer2 (has the chaincode installed): [https://gist.github.com/alexanderlhicks/75c76b11a26963d7a6962f51295ea816]
 * Peer3 (on channel but does not have that chaincode installed): [https://gist.github.com/alexanderlhicks/951757e880d8c2f658d2d188e25b9274]

What could be causing the ""Error reading from stream"" message which seems to be the only error happening? I'm tried playing around with peer and orderer configurations but to no avail. Searching for this error also returns issues in channel creation, or joining channels, which I assume has gone fine since I can invoke chaincode on the channels with my peers.

This is the first time I create an issue on JIRA so let me know if you would like more information. I am using the latest images (1.0.5) which I updated to a few days ago, the same error happened with 1.0.4.

 ",Ubuntu 16.04 AWS virtual machines.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01xm5:,,,,,,,,alexanderlhicks,kchristidis,mastersingh24,meinvzou,,,,,,,,,,,"12/Dec/17 4:39 PM;kchristidis;Alexander, thanks for submitting this. There does not seem to be an issue with the orderer as best as I can tell. The line that you see in the orderer log is what gets posted when the broadcast session that is established between the client and the ordering service is terminated.","12/Dec/17 4:58 PM;alexanderlhicks;Thanks for taking a look. I agree that the issue is not necessarily with the orderer, if it cannot ""read from stream"" it's likely because of an issue with the stream. However the peer logs don't seem to contain errors or warning which makes it hard to see where it is coming from.","12/Dec/17 5:06 PM;kchristidis;Can I suggest my usual approach? Try to go for the simplest possible network at first. One org with two peers, a solo orderer. See if you can deploy, instantiate, invoke, and query without issues. Then start iterating, making your network more complicated (and closer to your final setup), one step at a time. Let us know what is the precise change that is bringing about the issue and we can take it from there.","12/Dec/17 11:28 PM;alexanderlhicks;That seems like a good idea. I'll try this tomorrow.

For reference everything worked fine on a dev network (running everything on one machine), i suspect the issue arises when trying to communicate between VMs. I rebuilt the network and the same rpc error appears when creating channels, installing chaincode etc... Although the channels are created and the chaincode does get installed and instantiate to some extent since I can invoke it on channels. I figured I should provide some more information on how I set things up in case there's something obvious I missed:

I have 7 VMs: one for each peer of each organization, a kafka VM, an orderer VM and a client VM from which I execute comands.

Crypto material is generated the standard way using cryptogen and copied on each VM (just a git pull). I then start each peer using a script in the form of
{code:java}
CORE_PEER_ENDORSER_ENABLED=true \
CORE_PEER_PROFILE_ENABLED=true \
CORE_PEER_ADDRESS=peer:7051 \
CORE_PEER_CHAINCODELISTENADDRESS=peer:7052 \
CORE_PEER_ID=peer \
CORE_PEER_LOCALMSPID=PeersMSP \
CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer:7051 \
CORE_PEER_GOSSIP_USELEADERELECTION=true \
CORE_PEER_GOSSIP_ORGLEADER=false \
CORE_PEER_TLS_ENABLED=false \
CORE_PEER_TLS_KEY_FILE=pathto/crypto-config/peerOrganizations/Peers/users/Admin@Peers/tls/server.key \
CORE_PEER_TLS_CERT_FILE=pathto/crypto-config/peerOrganizations/Peers/users/Admin@Peers/tls/server.crt \
CORE_PEER_TLS_ROOTCERT_FILE=pathto/crypto-config/peerOrganizations/Peers/users/Admin@Peers/tls/ca.crt \
CORE_PEER_TLS_SERVERHOSTOVERRIDE=agent \
CORE_VM_DOCKER_ATTACHSTDOUT=true \
CORE_PEER_MSPCONFIGPATH=pathto/crypto-config/peerOrganizations/Peers/users/Admin@Peers/msp \
peer node start --peer-defaultchain=false
{code}
where the peer address corresponds to an ip mapping in /etc/hosts (which is on every VM).

I then start the kafka service using docker-compose up, with the docker-compose file as follows:
{code:java}
version: '2'
services:
    zookeeper:
        image: hyperledger/fabric-zookeeper:x86_64-1.0.5
        ports:
            - ""2181""
            - ""2888""
            - ""3888""
    kafka:
        image: hyperledger/fabric-kafka:x86_64-1.0.5
        restart: always
        environment:
            - KAFKA_ADVERTISED_HOST_NAME=ip of the VM here
            - KAFKA_ADVERTISED_PORT=9092
            - KAFKA_BROKER_ID=0
            - KAFKA_MESSAGE_MAX_BYTES=103809024
            - KAFKA_REPLICA_FETCH_MAX_BYTES=103809024
            - KAFKA_UNCLEAN_LEADER_ELECTION_ENABLE=false
            - KAFKA_NUM_REPLICA_FETCHERS=1
            - KAFKA_DEFAULT_REPLICATION_FACTOR=1
            - KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181
        ports:
            - ""9092:9092""
        depends_on:
            - zookeeper
{code}
finally I start the orderer using a script similar to the peer script:
{code:java}
ORDERER_GENERAL_LOGLEVEL=debug \
ORDERER_GENERAL_LISTENADDRESS=0.0.0.0 \
ORDERER_GENERAL_GENESISMETHOD=file \
ORDERER_GENERAL_GENESISFILE=genesis.block \
ORDERER_GENERAL_LOCALMSPID=OrdererMSP \
ORDERER_GENERAL_LOCALMSPDIR=pathto/crypto-config/ordererOrganizations/Orderer/users/Admin@Orderer/msp \
ORDERER_GENERAL_TLS_ENABLED=false \
ORDERER_GENERAL_TLS_PRIVATEKEY=pathto/crypto-config/ordererOrganizations/Orderer/orderers/Orderer.Orderer/tls/server.key \
ORDERER_GENERAL_TLS_CERTIFICATE=pathto/crypto-config/ordererOrganizations/Orderer/orderers/Orderer.Orderer/tls/server.crt \
ORDERER_GENERAL_TLS_ROOTCAS=[pathto/crypto-config/ordererOrganizations/Orderer/orderers/Orderer.Orderer/tls/ca.crt, pathto/crypto-config/peerOrganizations/Peers/users/Admin@Peers/tls/ca.crt, similarly for every other peer organization] \
CONFIGTX_ORDERER_BATCHTIMEOUT=1s \
CONFIGTX_ORDERER_ORDERERTYPE=kafka \
CONFIGTX_ORDERER_KAFKA_BROKERS=[kafka:9092] \
orderer
{code}
I then run a script with the standard create/join channel and install/instantiate chaincode commands for the relevant peers.

My configtx and crypto-config files look like:
{code:java}
---
Profiles:

    OrdererGenesis:
        Orderer:
            <<: *OrdererDefaults
            Organizations:
                - *Orderer
        Consortiums:
            SampleConsortium:
                Organizations:
                    - *Agents
                    - *DataProviders
                    - *Auditors
                    - *Users

    MainChannel:
        Consortium: SampleConsortium
        Application:
            <<: *ApplicationDefaults
            Organizations:
                - *Peers
                - *other orgs
    AgentDpChannel:
        Consortium: SampleConsortium
        Application:
            <<: *ApplicationDefaults
            Organizations:
                - *Peers
                - *subset of other orgs
Organizations:
    - &Orderer
        Name: Orderer
        ID: OrdererMSP
        MSPDir: /home/ubuntu/verifiable-access-code/HLF-network/crypto-config/ordererOrganizations/Orderer/msp/
        AdminPrincipal: Role.ADMIN

    - &Peers
        Name: Peers
        ID: PeersMSP
        MSPDir: pathto/crypto-config/peerOrganizations/Agents/msp/
        AdminPrincipal: Role.ADMIN
        AnchorPeers:
            - Host: agent
              Port: 7051
    similarly for the other orgs 

Orderer: &OrdererDefaults
    OrdererType: kafka
    Addresses:
        - orderer:7050
    BatchTimeout: 5s
    BatchSize:
        MaxMessageCount: 30
        AbsoluteMaxBytes: 99 MB
        PreferredMaxBytes: 512 KB
    MaxChannels: 0
    Kafka:
        Brokers:
            - kafka:9092
    Organizations:


Application: &ApplicationDefaults

    Organizations:
{code}
{code:java}
 OrdererOrgs:
  - Name: Orderer
    Domain: Orderer
    Specs:
      - Hostname: Orderer

PeerOrgs:
  - Name: Peers
    Domain: Peers
    Users:
      Count: 0
similar for other orgs


{code}
Let me know if this highlights anything.

Cheers!","13/Dec/17 2:26 PM;alexanderlhicks;Update: is it possible that the issue stems from docker containers? I use a script to launch my peers rather than a docker container, but it also appears that the containers for my chaincode have no IP address?

 

edit: actually it seems reasonable that the chaincode containers should not have an IP address.","14/Dec/17 2:17 PM;alexanderlhicks;Another update: I suspect it's some form of networking issue, I tried running the ordering service on the same VM as the one I invoked some chaincode with but the same error happened. So I suspect it might have to do with the docker containers? Although there is clearly is some information flowing between then machines, clearly the rpc stream is not going through. Is there any way to try and tweak the container settings with regards to that?","06/Jan/18 1:16 PM;mastersingh24;[~alexanderlhicks]  You can try setting 
{code:java}
CORE_LOGGING_GRPC=debug
{code} for the peer and the cli

and 
{code:java}
ORDERER_LOGGING_GRPC=debug
{code} for the orderer

","07/Jan/18 8:57 PM;alexanderlhicks;[~mastersingh24] Thanks for the suggestion, unfortunately it seems like this doesn't highlight anything new.

The error is still an error reading from the rpc stream which happens when the orderer wants to enqueue the message into the batch, and in the case of a state update when it wants to broadcast the block. Clearly there's an issue with networking/grpc there but nothing shows up with the grpc commands given above. The orderer also clearly receives information about the transactions as it does everything before and after ( ! ) the rpc errors seemingly fine. I'm wondering if it's possibly whatever should be transmitted with grpc that isn't right and causing the rpc stream to not be readable? I've previously tried using different block formats (file/json) but with no success.",,,,,,,,,,,,,,,,
Revendor cfssl for go 1.9 compatibility,FAB-7400,24899,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,smithbk,smithbk,08/Dec/17 10:20 PM,05/Jan/18 7:54 PM,26/Apr/18 6:50 AM,05/Jan/18 7:54 PM,,,,,,,,,,fabric-ca,,,,0,,,,,,,,,See https://jira.hyperledger.org/browse/FAB-6003 for details,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01xh1:,,,,,,,,smithbk,,,,,,,,,,,,,,05/Jan/18 7:54 PM;smithbk;https://gerrit.hyperledger.org/r/#/c/13407/,,,,,,,,,,,,,,,,,,,,,,,
Update to Fabric 1.1 from Fabric 1.0.3 Fails When Enabling Fabric 1.1 Capabilities on the Channel,FAB-7399,24898,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jeffgarratt,jeffgarratt,08/Dec/17 9:59 PM,12/Feb/18 12:37 AM,26/Apr/18 6:50 AM,19/Jan/18 2:24 PM,v1.1,,,,,,v1.1,v1.1.0-alpha,,fabric-peer,,,,0,Upgrade,,,,,,,,"The log contains:

 

2017-12-08 21:50:18.281 UTC [peer] Initialize -> WARN 1f0 Failed to load chain com.acme.blockchain.jdoe.channel1(config cannot be nil)",,,,,,,,,,,,FAB-6123,,,,,,,,18/Jan/18 9:50 PM;suryalnvs;orderer.log;https://jira.hyperledger.org/secure/attachment/14330/orderer.log,18/Jan/18 9:50 PM;suryalnvs;peer2new.log;https://jira.hyperledger.org/secure/attachment/14331/peer2new.log,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01xgt:,,,,,,,,jeffgarratt,jyellick,scottz,suryalnvs,,,,,,,master,,,true,"08/Dec/17 10:00 PM;jeffgarratt;[~wlahti] [~scottz] got this error when trying to upgrade to latest master branch.

 

The latest commit that actually passed had a docker label of x86_64-1.1.0-alpha-snapshot-8becdf0","11/Dec/17 3:01 PM;suryalnvs;Reproduced the same on latest commit 446bf75d20a4df0a89b5c31f804e1f63ae56749c, Date:   Mon Dec 11 12:13:05 2017 +0000",05/Jan/18 3:31 PM;jyellick;Fix in review via: https://gerrit.hyperledger.org/r/c/16599/,12/Jan/18 9:52 PM;suryalnvs;[~jyellick] I am still be able to reproduce the above qscc check failure on commit level 60fc1e99f863bb5c47c1dde78e5e32acf9e7e203,"14/Jan/18 5:40 PM;jyellick;[~suryalnvs] can you please include the logs/panic for what you reproduced with 60fc1e99f863bb5c47c1dde78e5e32acf9e7e203 ?  Perhaps there is some other failure occuring, looking at the code the particular panic reported earlier should no longer be possible.","15/Jan/18 4:00 PM;suryalnvs;[~jyellick] When I am running the upgrade feature, I see the following errors
{code:java}
And user ""dev0Org0"" using cert alias ""consortium1-cert"" sends proposal ""queryGetChainInfoProposal1"" to endorsers with timeout of ""60"" seconds with proposal responses ""queryGetChainInfoProposal1Responses"" # steps/endorser_impl.py:140 0.015s
| Endorser |
| peer0 |
| peer1 |
| peer2 |
| peer3 |
Traceback (most recent call last):
File ""/home/surya/Envs/behave_venv/local/lib/python2.7/site-packages/behave/model.py"", line 1456, in run
match.run(runner.context)
File ""/home/surya/Envs/behave_venv/local/lib/python2.7/site-packages/behave/model.py"", line 1903, in run
self.func(context, *args, **kwargs)
File ""steps/endorser_impl.py"", line 155, in step_impl
resultsDict = dict(zip(endorsers, [respFuture.result() for respFuture in proposalResponseFutures]))
File ""/home/surya/Envs/behave_venv/local/lib/python2.7/site-packages/grpc/_channel.py"", line 279, in result
raise self
_Rendezvous: <_Rendezvous of RPC that terminated with (StatusCode.UNKNOWN, Failed to deserialize creator identity, err MSP peerOrg0 is unknown)>

Captured stdout:
Will copy gensisiBlock over at this point
configAdminOrdererOrg0 received reply: status: SUCCESS
, counter = 1
Done
dev0Org0 received reply: status: SUCCESS
, counter = 1
Done
Start and end = 0/0

ProposalResponse:
response {
status: 200
}



ProposalResponse:
response {
status: 200
}



configAdminPeerOrg0 received reply: status: SUCCESS
, counter = 1
Done
Start and end = 1/1

ProposalResponse:
response {
status: 200
}



ProposalResponse:
response {
status: 200
}



ccSpec = type: GOLANG
chaincode_id {
path: ""github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02""
name: ""example02""
version: ""1.0""
}
input {
args: ""init""
args: ""a""
args: ""100""
args: ""b""
args: ""200""
}

Endorsers = [u'peer0'], rsults keys = [u'peer0']
Endorsers = [u'peer2'], rsults keys = [u'peer2']
Endorsers = [u'peer0', u'peer2'], rsults keys = [u'peer0', u'peer2']
configAdminPeerOrg0 received reply: status: SUCCESS
, counter = 1
Done
Start and end = 2/2

Endorsers = [u'peer0', u'peer2'], rsults keys = [u'peer0', u'peer2']
Endorsers = [u'peer0', u'peer2'], rsults keys = [u'peer0', u'peer2']
dev0Org0 received reply: status: SUCCESS
, counter = 1
Done
Start and end = 3/3

Endorsers = [u'peer0', u'peer2'], rsults keys = [u'peer0', u'peer2']
dev0Org0 received reply: status: SUCCESS
, counter = 1
Done
Start and end = 4/4

configAdminOrdererOrg0 received reply: status: SUCCESS
, counter = 1
Done
configAdminOrdererOrg0 received reply: status: BAD_REQUEST
, counter = 1
Done
configAdminOrdererOrg0 received reply: status: SUCCESS
, counter = 1
Done
ccSpec = type: GOLANG
chaincode_id {
path: ""/""
name: ""qscc""
version: ""1.0""
}
input {
args: ""GetChainInfo""
args: ""com.acme.blockchain.jdoe.channel1""
}

{code}
and strangely only orderer1 (out of three orderers) is showing the following logs with identity mismatch like
{code:java}
the identity is a member of a different MSP (expected ordererOrg0, got peerOrg1)
the identity is a member of a different MSP (expected ordererOrg0, got peerOrg0)
the identity is a member of a different MSP (expected peerOrg0, got peerOrg1){code}
and part of orderer1 logs are
{code:java}
2018-01-15 15:38:48.332 UTC [policies] Evaluate -> DEBU 7d5 == Evaluating *cauthdsl.policy Policy /Channel/Orderer/ordererOrg0/Readers ==
2018-01-15 15:38:48.332 UTC [msp] DeserializeIdentity -> INFO 7d6 Obtaining identity
2018-01-15 15:38:48.332 UTC [cauthdsl] func1 -> DEBU 7d7 0xc42000e108 gate 1516030728332289159 evaluation starts
2018-01-15 15:38:48.332 UTC [cauthdsl] func2 -> DEBU 7d8 0xc42000e108 signed by 0 principal evaluation starts (used [false])
2018-01-15 15:38:48.332 UTC [cauthdsl] func2 -> DEBU 7d9 0xc42000e108 processing identity 0 with bytes of 0a08706565724f72673012d3052d2d2d2d2d424547494e202d2d2d2d2d0a4d4949422b444343415a2b674177494241774943412b6777436759494b6f5a497a6a304541774977565445524d41384741315545417777496347566c636b39790a5a7a4178437a414a42674e5642415954416c56544d517777436759445651514844414e53564641784444414b42674e5642416f4d41306c43545445584d4255470a413155454341774f546d3979644767675132467962327870626d45774868634e4d5467774d5445314d54557a4e444d795768634e4d546b774d5445314d54557a0a4e444d79576a42534d5134774441594456515144444156775a5756794d44454c4d416b474131554542684d4356564d784444414b42674e564241634d41314a550a5544454d4d416f47413155454367774453554a4e4d52637746515944565151494441354f62334a306143424459584a7662476c755954425a4d424d47427971470a534d34394167454743437147534d343941774548413049414247724f7a584f3948372f3038776d3956576736526a75336f4977447a485a6d4c7174566e4773660a4c4b613232694f484e5762736f73734c5a764b643570786566567a6352703563513259592f7245714758695a4e61476a596a42674d41774741315564457745420a2f7751434d414177485159445652304f424259454642772f454650705357573533466f64776e5a7659305058636b6a504d42384741315564497751594d4261410a464850382b7030632f4554706f672b4d534d4e334b544d4a774370334d424147413155644551514a4d4165434258426c5a5849774d416f4743437147534d34390a42414d43413063414d45514349476d4d556e6f31706d547a306d332f516861576d53495054576b343846556c6a6e2f4a624d5a3641556e3841694251346366520a587362586677673856477135777667577164737573434162556e4b6d647668386d3255454a673d3d0a2d2d2d2d2d454e44202d2d2d2d2d0a
2018-01-15 15:38:48.332 UTC [cauthdsl] func2 -> DEBU 7da 0xc42000e108 identity 0 does not satisfy principal: the identity is a member of a different MSP (expected ordererOrg0, got peerOrg0)
2018-01-15 15:38:48.332 UTC [cauthdsl] func2 -> DEBU 7db 0xc42000e108 principal evaluation fails
2018-01-15 15:38:48.332 UTC [cauthdsl] func1 -> DEBU 7dc 0xc42000e108 gate 1516030728332289159 evaluation fails
2018-01-15 15:38:48.332 UTC [policies] Evaluate -> DEBU 7dd Signature set did not satisfy policy /Channel/Orderer/ordererOrg0/Readers
2018-01-15 15:38:48.332 UTC [policies] Evaluate -> DEBU 7de == Done Evaluating *cauthdsl.policy Policy /Channel/Orderer/ordererOrg0/Readers
2018-01-15 15:38:48.332 UTC [policies] func1 -> DEBU 7df Evaluation Failed: Only 0 policies were satisfied, but needed 1 of [ ordererOrg0.Readers ]
2018-01-15 15:38:48.332 UTC [policies] Evaluate -> DEBU 7e0 Signature set did not satisfy policy /Channel/Orderer/Readers
2018-01-15 15:38:48.332 UTC [policies] Evaluate -> DEBU 7e1 == Done Evaluating *policies.implicitMetaPolicy Policy /Channel/Orderer/Readers
2018-01-15 15:38:48.332 UTC [policies] Evaluate -> DEBU 7e2 == Evaluating *policies.implicitMetaPolicy Policy /Channel/Application/Readers ==
2018-01-15 15:38:48.332 UTC [policies] Evaluate -> DEBU 7e3 This is an implicit meta policy, it will trigger other policy evaluations, whose failures may be benign
2018-01-15 15:38:48.332 UTC [policies] Evaluate -> DEBU 7e4 == Evaluating *cauthdsl.policy Policy /Channel/Application/peerOrg0/Readers ==
2018-01-15 15:38:48.332 UTC [cauthdsl] func1 -> DEBU 7e5 0xc42000e118 gate 1516030728332526720 evaluation starts
2018-01-15 15:38:48.332 UTC [cauthdsl] func2 -> DEBU 7e6 0xc42000e118 signed by 0 principal evaluation starts (used [false])
2018-01-15 15:38:48.332 UTC [cauthdsl] func2 -> DEBU 7e7 0xc42000e118 processing identity 0 with bytes of 0a08706565724f72673012d3052d2d2d2d2d424547494e202d2d2d2d2d0a4d4949422b444343415a2b674177494241774943412b6777436759494b6f5a497a6a304541774977565445524d41384741315545417777496347566c636b39790a5a7a4178437a414a42674e5642415954416c56544d517777436759445651514844414e53564641784444414b42674e5642416f4d41306c43545445584d4255470a413155454341774f546d3979644767675132467962327870626d45774868634e4d5467774d5445314d54557a4e444d795768634e4d546b774d5445314d54557a0a4e444d79576a42534d5134774441594456515144444156775a5756794d44454c4d416b474131554542684d4356564d784444414b42674e564241634d41314a550a5544454d4d416f47413155454367774453554a4e4d52637746515944565151494441354f62334a306143424459584a7662476c755954425a4d424d47427971470a534d34394167454743437147534d343941774548413049414247724f7a584f3948372f3038776d3956576736526a75336f4977447a485a6d4c7174566e4773660a4c4b613232694f484e5762736f73734c5a764b643570786566567a6352703563513259592f7245714758695a4e61476a596a42674d41774741315564457745420a2f7751434d414177485159445652304f424259454642772f454650705357573533466f64776e5a7659305058636b6a504d42384741315564497751594d4261410a464850382b7030632f4554706f672b4d534d4e334b544d4a774370334d424147413155644551514a4d4165434258426c5a5849774d416f4743437147534d34390a42414d43413063414d45514349476d4d556e6f31706d547a306d332f516861576d53495054576b343846556c6a6e2f4a624d5a3641556e3841694251346366520a587362586677673856477135777667577164737573434162556e4b6d647668386d3255454a673d3d0a2d2d2d2d2d454e44202d2d2d2d2d0a
2018-01-15 15:38:48.332 UTC [msp] SatisfiesPrincipal -> DEBU 7e8 Checking if identity satisfies MEMBER role for peerOrg0
2018-01-15 15:38:48.332 UTC [msp] Validate -> DEBU 7e9 MSP peerOrg0 validating identity
2018-01-15 15:38:48.332 UTC [msp/identity] newIdentity -> DEBU 7ea Creating identity instance for cert -----BEGIN CERTIFICATE-----
MIIB+DCCAZ+gAwIBAwICA+gwCgYIKoZIzj0EAwIwVTERMA8GA1UEAwwIcGVlck9y
ZzExCzAJBgNVBAYTAlVTMQwwCgYDVQQHDANSVFAxDDAKBgNVBAoMA0lCTTEXMBUG
A1UECAwOTm9ydGggQ2Fyb2xpbmEwHhcNMTgwMTE1MTUzNDMyWhcNMTkwMTE1MTUz
NDMyWjBSMQ4wDAYDVQQDDAVwZWVyMjELMAkGA1UEBhMCVVMxDDAKBgNVBAcMA1JU
UDEMMAoGA1UECgwDSUJNMRcwFQYDVQQIDA5Ob3J0aCBDYXJvbGluYTBZMBMGByqG
SM49AgEGCCqGSM49AwEHA0IABCsFJZcMI4lgRiG14qWnPVs1aByLJ+O3hxq8+6qr
7OW7teBMxnc/Z/FcEiXx7dD5o7pYL9W7Y0HsOBBPusP8EEmjYjBgMAwGA1UdEwEB
/wQCMAAwHQYDVR0OBBYEFDEgIFwddEYr/C1MqmSAEsWjvWpBMB8GA1UdIwQYMBaA
FFKan01RzrtqyloL314YOF6JSw/yMBAGA1UdEQQJMAeCBXBlZXIyMAoGCCqGSM49
BAMCA0cAMEQCIHFxHtjmNmdbL9tjqyyOU9OJNT9qzYX1PdNo5Dpq+2BzAiBXQwtb
Bn7RoZmfgdbiDLxHOI0CsQFytmvjkD7duSwPZA==
-----END CERTIFICATE-----
2018-01-15 15:38:48.332 UTC [cauthdsl] func1 -> DEBU 7ec 0xc4201361d8 gate 1516030728332921027 evaluation starts
2018-01-15 15:38:48.332 UTC [cauthdsl] func2 -> DEBU 7ed 0xc4201361d8 signed by 0 principal evaluation starts (used [false])
2018-01-15 15:38:48.332 UTC [cauthdsl] func2 -> DEBU 7ee 0xc4201361d8 processing identity 0 with bytes of 0a08706565724f72673112d3052d2d2d2d2d424547494e202d2d2d2d2d0a4d4949422b444343415a2b674177494241774943412b6777436759494b6f5a497a6a304541774977565445524d41384741315545417777496347566c636b39790a5a7a4578437a414a42674e5642415954416c56544d517777436759445651514844414e53564641784444414b42674e5642416f4d41306c43545445584d4255470a413155454341774f546d3979644767675132467962327870626d45774868634e4d5467774d5445314d54557a4e444d795768634e4d546b774d5445314d54557a0a4e444d79576a42534d5134774441594456515144444156775a5756794d6a454c4d416b474131554542684d4356564d784444414b42674e564241634d41314a550a5544454d4d416f47413155454367774453554a4e4d52637746515944565151494441354f62334a306143424459584a7662476c755954425a4d424d47427971470a534d34394167454743437147534d34394177454841304941424373464a5a634d49346c67526947313471576e505673316142794c4a2b4f33687871382b3671720a374f57377465424d786e632f5a2f466345695878376444356f3770594c395737593048734f4242507573503845456d6a596a42674d41774741315564457745420a2f7751434d414177485159445652304f424259454644456749467764644559722f43314d716d53414573576a765770424d42384741315564497751594d4261410a46464b616e3031527a727471796c6f4c333134594f46364a53772f794d424147413155644551514a4d4165434258426c5a5849794d416f4743437147534d34390a42414d43413063414d4551434948467848746a6d4e6d64624c39746a7179794f55394f4a4e5439717a59583150644e6f354470712b32427a41694258517774620a426e37526f5a6d6667646269444c78484f49304373514679746d766a6b443764755377505a413d3d0a2d2d2d2d2d454e44202d2d2d2d2d0a
2018-01-15 15:38:48.333 UTC [cauthdsl] func2 -> DEBU 7ef 0xc4201361d8 identity 0 does not satisfy principal: the identity is a member of a different MSP (expected ordererOrg0, got peerOrg1)
2018-01-15 15:38:48.333 UTC [cauthdsl] func2 -> DEBU 7f0 0xc4201361d8 principal evaluation fails
2018-01-15 15:38:48.333 UTC [cauthdsl] func1 -> DEBU 7f1 0xc4201361d8 gate 1516030728332921027 evaluation fails
2018-01-15 15:38:48.333 UTC [policies] Evaluate -> DEBU 7f2 Signature set did not satisfy policy /Channel/Orderer/ordererOrg0/Readers
2018-01-15 15:38:48.333 UTC [policies] Evaluate -> DEBU 7f3 == Done Evaluating *cauthdsl.policy Policy /Channel/Orderer/ordererOrg0/Readers
2018-01-15 15:38:48.333 UTC [policies] func1 -> DEBU 7f4 Evaluation Failed: Only 0 policies were satisfied, but needed 1 of [ ordererOrg0.Readers ]
2018-01-15 15:38:48.333 UTC [policies] Evaluate -> DEBU 7f5 Signature set did not satisfy policy /Channel/Orderer/Readers
2018-01-15 15:38:48.333 UTC [policies] Evaluate -> DEBU 7f6 == Done Evaluating *policies.implicitMetaPolicy Policy /Channel/Orderer/Readers
2018-01-15 15:38:48.333 UTC [policies] Evaluate -> DEBU 7f7 == Evaluating *policies.implicitMetaPolicy Policy /Channel/Application/Readers ==
2018-01-15 15:38:48.333 UTC [policies] Evaluate -> DEBU 7f8 This is an implicit meta policy, it will trigger other policy evaluations, whose failures may be benign
2018-01-15 15:38:48.333 UTC [policies] Evaluate -> DEBU 7f9 == Evaluating *cauthdsl.policy Policy /Channel/Application/peerOrg0/Readers ==
2018-01-15 15:38:48.333 UTC [cauthdsl] func1 -> DEBU 7fa 0xc420136378 gate 1516030728333330015 evaluation starts
2018-01-15 15:38:48.333 UTC [cauthdsl] func2 -> DEBU 7fb 0xc420136378 signed by 0 principal evaluation starts (used [false])
2018-01-15 15:38:48.333 UTC [cauthdsl] func2 -> DEBU 7fc 0xc420136378 processing identity 0 with bytes of 0a08706565724f72673112d3052d2d2d2d2d424547494e202d2d2d2d2d0a4d4949422b444343415a2b674177494241774943412b6777436759494b6f5a497a6a304541774977565445524d41384741315545417777496347566c636b39790a5a7a4578437a414a42674e5642415954416c56544d517777436759445651514844414e53564641784444414b42674e5642416f4d41306c43545445584d4255470a413155454341774f546d3979644767675132467962327870626d45774868634e4d5467774d5445314d54557a4e444d795768634e4d546b774d5445314d54557a0a4e444d79576a42534d5134774441594456515144444156775a5756794d6a454c4d416b474131554542684d4356564d784444414b42674e564241634d41314a550a5544454d4d416f47413155454367774453554a4e4d52637746515944565151494441354f62334a306143424459584a7662476c755954425a4d424d47427971470a534d34394167454743437147534d34394177454841304941424373464a5a634d49346c67526947313471576e505673316142794c4a2b4f33687871382b3671720a374f57377465424d786e632f5a2f466345695878376444356f3770594c395737593048734f4242507573503845456d6a596a42674d41774741315564457745420a2f7751434d414177485159445652304f424259454644456749467764644559722f43314d716d53414573576a765770424d42384741315564497751594d4261410a46464b616e3031527a727471796c6f4c333134594f46364a53772f794d424147413155644551514a4d4165434258426c5a5849794d416f4743437147534d34390a42414d43413063414d4551434948467848746a6d4e6d64624c39746a7179794f55394f4a4e5439717a59583150644e6f354470712b32427a41694258517774620a426e37526f5a6d6667646269444c78484f49304373514679746d766a6b443764755377505a413d3d0a2d2d2d2d2d454e44202d2d2d2d2d0a
2018-01-15 15:38:48.333 UTC [cauthdsl] func2 -> DEBU 7fd 0xc420136378 identity 0 does not satisfy principal: the identity is a member of a different MSP (expected peerOrg0, got peerOrg1)
2018-01-15 15:38:48.333 UTC [cauthdsl] func2 -> DEBU 7fe 0xc420136378 principal evaluation fails
2018-01-15 15:38:48.333 UTC [cauthdsl] func1 -> DEBU 7ff 0xc420136378 gate 1516030728333330015 evaluation fails
2018-01-15 15:38:48.333 UTC [policies] Evaluate -> DEBU 800 Signature set did not satisfy policy /Channel/Application/peerOrg0/Readers
2018-01-15 15:38:48.333 UTC [policies] Evaluate -> DEBU 801 == Done Evaluating *cauthdsl.policy Policy /Channel/Application/peerOrg0/Readers
2018-01-15 15:38:48.333 UTC [policies] Evaluate -> DEBU 802 == Evaluating *cauthdsl.policy Policy /Channel/Application/peerOrg1/Readers ==
2018-01-15 15:38:48.333 UTC [cauthdsl] func1 -> DEBU 803 0xc420136380 gate 1516030728333603127 evaluation starts
2018-01-15 15:38:48.333 UTC [cauthdsl] func2 -> DEBU 804 0xc420136380 signed by 0 principal evaluation starts (used [false])

{code}","18/Jan/18 4:24 PM;jyellick;The errors reported from the ordering log are not errors at all.  They are simple debugging statements for the policy evaluation.  Effectively, the policy asks ""Did a member of ordererOrg, or peerOrg0, or peerOrg1 sign? Necessarily, a member is only from one of those orgs, so there will be log messages indicating the failure for the member to part of the other orgs.

It sounds to me like a user with authority from peerOrg0 is attempting to make a call to peers from peerOrg1 which it is not authorized to do.  Are you certain this step passes _before_ upgrade?","18/Jan/18 9:52 PM;suryalnvs;Able to pass the above step 1) before upgrading 2) after upgrading and before enabling capabilities. But failing after enabling capabilities. Attached the peer2 logs and orderer logs.

 ",18/Jan/18 10:48 PM;jyellick;Believe I have found the underlying problem.  Fix submitted for review here: https://gerrit.hyperledger.org/r/c/16969/,18/Jan/18 11:18 PM;suryalnvs;[~jyellick] I ran the tests with the [https://gerrit.hyperledger.org/r/c/16969/] and passed. Thank you.,,,,,,,,,,,,,,
Peer deliver panics when channel does not exist,FAB-7397,24895,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,wlahti,wlahti,08/Dec/17 7:52 PM,08/Dec/17 10:19 PM,26/Apr/18 6:50 AM,08/Dec/17 10:19 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,Peer deliver panics when it receives a seek info request for a channel that does not exist. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01xgd:,,,,,,,,wlahti,,,,,,,,,,master,,,true,08/Dec/17 7:59 PM;wlahti;https://gerrit.hyperledger.org/r/#/c/16051/,,,,,,,,,,,,,,,,,,,,,,,
Broken Master,FAB-7390,24880,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jyellick,jyellick,07/Dec/17 11:22 PM,15/Dec/17 4:08 AM,26/Apr/18 6:50 AM,15/Dec/17 4:08 AM,,,,,,,,,,,,,,0,,,,,,,,,encoder.go references a symbol which doesn't exist.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01xdp:,,,,,,,,jyellick,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Sending on closed channel during CI test,FAB-7366,24853,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,kchristidis,kchristidis,07/Dec/17 5:02 AM,26/Jan/18 12:34 AM,26/Apr/18 6:50 AM,26/Jan/18 12:34 AM,v1.0.4,,,,,,v1.1,,,fabric-orderer,,,,0,kafka,,,,,,,,"Kafka's unit tests failing on CI, see: https://jenkins.hyperledger.org/job/fabric-verify-s390x/524/console",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01x7x:,,,,,,,,kchristidis,sanchezl,yacovm,,,,,,,,,,,,25/Jan/18 5:56 PM;sanchezl;Is this still valid?,25/Jan/18 6:42 PM;kchristidis;[~yacovm] you usually keep a closer tab on CI than I do. Has this shown up again recently?,25/Jan/18 6:50 PM;yacovm;not that I've seen,"26/Jan/18 12:34 AM;kchristidis;Thanks for the update. Luis, I say we close.",,,,,,,,,,,,,,,,,,,,
Orderer fails to connect to Kafka's partition consumer channel,FAB-7352,24838,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,rhegde,rhegde,06/Dec/17 9:42 PM,26/Dec/17 3:29 PM,26/Apr/18 6:50 AM,26/Dec/17 3:05 PM,,,,,,,,,,fabric-orderer,,,,0,kafka,,,,,,,,"On one of our setup, orderer fails to connect with `Connecting to the Kafka cluster` and looking at its log, it is for `setupChannelConsumerForChannel`. We see only 1 channel able to successfully complete `setupChannelConsumerForChannel` however rest channels (including system channel) is having this issue.

The other connect points `setupParentConsumerForChannel` and `setupProducerForChannel` has received the connect message response - assuming they are good.

This is a new setup and initially for ~3days, everything was good. There was 1 orderer (out of 3) which got restarted, and above problem was seen. The other 2 orderers were running w/o any problem. We restarted the other 2 orderer (docker service), and this problem started for remaining too.

I have uploaded the required logs of orderer, kafka, zookeeper on secureFTP site ([http://dts.cls-group.com/)|http://dts.cls-group.com/] who's credential are available [~Clayton Sims] and [~altharp]

filename: FAB-7352-OrdererChannelPartitionError-6Dec2017.zip

[~sanchezl] [~kchristidis]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01x4l:,,,,,,,,kchristidis,rhegde,sanchezl,,,,,,,,,,,,"07/Dec/17 5:49 PM;sanchezl;[~rhegde], please provide:
 # the output of {{docker inspect}} for the containers involved
 # an overview of the networking configuration (e.g. docker networks or host networking?
 # I see that you can ping kafka from orderer container (please confirm that is what I'm seeing in the logs), can you try accessing the kafka ports themselves, e.g.: {{$ cat < /dev/tcp/kafka01.clsorder.sitnf.clsnet/9092}}  (success if you don't get Connection refused message).

I suspect the docker networking (specifically its iptables config) has somehow gotten into a bad state. You can use commands like {{route}}, and  {{iptables --list}}  on the host machines to debug (provide this output also if you can). If there is a problem in this area, re-starting the docker daemons usually cleans the networking configuration up.","07/Dec/17 10:18 PM;rhegde;# I will get back with the docker inspect for OSN containers + network. This will take some time as this is a restricted/controlled environment at our place.
 # This is Docker Swarm network. OSN is hosted on a single host, where as there are other peer nodes distributed on 2 different host systems.
 # Right - Kafka containers are accessible, this is proved with the ping snapshot. And at the same time there is Producer and Parent Consumer connection getting established however it is the Partition Consumer channel that doesn't go through. We also ran a netstat on orderer container to see multiple connections established on port 9092 by orderer with kafkas. We will provide a snapshot of netstat too.

The only exception to the above is the public channel which is allowed to create Partition Consumer channel connection.

We even tried restarting docker-daemon of the OSN hosting node only (before filing JIRA), this didn't help.","08/Dec/17 3:19 PM;sanchezl;The Kafka logs show a number of attempts to access a partition from the wrong broker:
{noformat}
[2017-12-06 13:46:53,026] ERROR [ReplicaFetcherThread-0-2], Error for partition [cls2obo,0] to broker 2:org.apache.kafka.common.errors.UnknownTopicOrPartitionException: This server does not host this topic-partition. (kafka.server.ReplicaFetcherThread){noformat}
{noformat}
[2017-12-06 13:51:32,674] ERROR [ReplicaFetcherThread-0-3], Error for partition [testchainid,0] to broker 3:org.apache.kafka.common.errors.NotLeaderForPartitionException: This server is not the leader for that topic-partition. (kafka.server.ReplicaFetcherThread){noformat}
This would explain the {{Consumer}} (a.k.a. parent) connection succeeding, but not being able to create a {{PartitionConsumer}}.

This type of error would indicate that the kafka metadata is out of sync. So you will need to figure out if this is a result of problems with:
 * Kafka-kafka communication
 * Kafta-Zookeeper communication
 * Zookeeper-Zookeeper communication.

Another area to look into is the persistence in your docker swarm network, for example if one of the zookeeper services was re-stared, did the replacement service pick up the same volume mapped to $ZOO_DATA_DIR and possibly $ZOO_DATA_LOG_DIR ? A problem here could explain the initial occurrence of the problem (""out-of-nowhere""). ","10/Dec/17 11:24 PM;rhegde;We are getting this problem on another dev-environment now, this started with following message from orderer. All 3 orderers went down with below panic message

*Snippet from Orderer (s)*

2017-12-09 01:21:46.304 UTC [orderer/kafka] startThread -> CRIT 94d9 [channel: testchainid] Cannot set up channel consumer = kafka server: The requested offset is outside the range of offsets maintained by the server for the given topic/partition.
panic: [channel: testchainid] Cannot set up channel consumer = kafka server: The requested offset is outside the range of offsets maintained by the server for the given topic/partition.

goroutine 65 [running]:
panic(0xa7f820, 0xc4221037b0)
        /opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panicf(0xc4201c6600, 0xbc08c3, 0x31, 0xc421e7f1e0, 0x2, 0x2)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:194 +0x127
github.com/hyperledger/fabric/orderer/kafka.startThread(0xc42156d7a0)
        /opt/gopath/src/github.com/hyperledger/fabric/orderer/kafka/chain.go:173 +0xafb
created by github.com/hyperledger/fabric/orderer/kafka.(*chainImpl).Start
        /opt/gopath/src/github.com/hyperledger/fabric/orderer/kafka/chain.go:94 +0x3f

 

*All 4 Kafka Logs* (they have same print during the same time period - doesn't show any problem)

[2017-12-09 01:31:56,841] INFO [Group Metadata Manager on Broker 3]: Removed 0 expired offsets in 0 milliseconds. (kafka.coordinator.GroupMetadataManager)
[2017-12-09 01:41:56,841] INFO [Group Metadata Manager on Broker 3]: Removed 0 expired offsets in 0 milliseconds. (kafka.coordinator.GroupMetadataManager)
[2017-12-09 01:51:56,841] INFO [Group Metadata Manager on Broker 3]: Removed 0 expired offsets in 0 milliseconds. (kafka.coordinator.GroupMetadataManager)

 

*Log after Orderer Restart*

2017-12-10 23:19:26.628 UTC [orderer/kafka] try -> DEBU 981 [channel: testchainid] Connecting to the Kafka cluster","11/Dec/17 7:52 PM;sanchezl;[~rhegde], this message seems to be a separate issue:
{code:java}
panic: [channel: testchainid] Cannot set up channel consumer = kafka server: The requested offset is outside the range of offsets maintained by the server for the given topic/partition.{code}
For this check the logs for a previous message of the form:
{code:java}
""[channel: %s] Starting chain with last persisted offset %d and last recorded block %d""{code}","11/Dec/17 8:07 PM;sanchezl;After spending some time with the CLS team on a remote debug session, the main issue appears to be that the nodes in the Kafka/Zookeeper cluster do not seem to agree on the state of the various topics.

The error messages I pointed out in a previous comment come from the Kafka replication thread. The broker is trying to contact the leader for the partitions, in order to bring itself into sync, but the broker that it believes is the leader does not believe it is the leader (or even contain some of the partitions at all!). I'm not sure how this disconnect between the brokers and their meta-data occurred, but it has not self corrected after numerous restarts. The orderer will not function until this is resolved.

The brokers and zookeeper nodes are being run on a Docker swarm network using overlay networks. I witnessed some inconsistencies in the ip addresses of the zookeeper nodes when trying to access them from the Kafka nodes: The zookeeper nodes had ip address _xxx.xxx.xxx._5, _xxx.xxx.xxx._7, and _xxx.xxx.xxx._8, but the zookeeper hostnames did not resolve to any of those addresses. I found this disconcerting, but I don't know if this is expected when using docker swarm mode and overlay networks.

I don't think there is anything else we can do from a Fabric/Orderer perspective until the Kafka cluster is fixed. Fixing the Kafka cluster might require the assistance of Docker (for swarm support) and/or Confluence (for Kafka support).","25/Dec/17 10:41 PM;rhegde;Further investigation -

Kafka setup is run by not disabling time based pruning, causing the log segment to prune. This has caused the orderer node to have a offset which is already pruned by Kafka and result in a  continuous attempt to connect to the consumer channel (kafka cluster) using short/long interval setting and eventually give-up with the above error.

Upon discussion on RC with [~jyellick], this seems not repairable using a normal operational procedure means.

Kafka time based pruning needs to be disabled by setting KAFKA_LOG_RETENTION_MS=-1.","26/Dec/17 3:05 PM;kchristidis;{quote}Kafka time based pruning needs to be disabled by setting KAFKA_LOG_RETENTION_MS=-1.
{quote}

This is _precisely_ what our documentation dictates, no?

https://hyperledger-fabric.readthedocs.io/en/latest/kafka.html#steps

Step 6, substep 5:

{quote}log.retention.ms = -1. Until the ordering service adds support for pruning of the Kafka logs, you should disable time-based retention and prevent segments from expiring. (Size-based retention —see log.retention.bytes— is disabled by default in Kafka at the time of this writing, so there’s no need to set it explicitly.)
{quote}","26/Dec/17 3:29 PM;rhegde;True - this is part of documentation. 

I would suggest until pruning is supported and to avoid any other users ending up in the same situation, can we make this variable as part of Kafka container environment variable setup for e2e-example which is  the starting reference for any fabric user (https://github.com/hyperledger/fabric/blob/release-1.1/examples/e2e_cli/base/docker-compose-base.yaml#L17).",,,,,,,,,,,,,,,
IsChaincodeInstalled unintentionally exported in resmgmtclient implementation,FAB-7346,24832,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nchangfong,nchangfong,nchangfong,06/Dec/17 7:59 PM,07/Dec/17 3:48 PM,26/Apr/18 6:50 AM,07/Dec/17 3:48 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"In `pkg/fabric-txn/resmgmtclient/resmgmt.go`:

From discussion in the fabric-sdk-go chat, discovered that IsChaincodeInstalled shouldn't be exported due to style inconsistencies with rest of package and isn't ready for inclusion in interface due to an argument of type `fab.Peer`.

Suggesting to make IsChaincodeInstalled a private method until ready for inclusion in interface and consistency updates are implemented.",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01x39:,,,,,,,,nchangfong,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca sample fails with TLS error,FAB-7344,24830,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,aambati,aambati,06/Dec/17 4:55 PM,04/Jan/18 8:21 PM,26/Apr/18 6:50 AM,04/Jan/18 8:21 PM,,,,,,,v1.1,,,fabric-ca,,,,1,,,,,,,,,"Following is the relevant log entries from the rca-org0.log:

 

```

2017/12/04 21:05:32 [DEBUG] DB: Add affiliation org1
2017/12/04 21:05:32 [DEBUG] Affiliation 'org1' already exists
2017/12/04 21:05:32 [DEBUG] DB: Add affiliation org1.department1
2017/12/04 21:05:32 [DEBUG] Affiliation 'org1.department1' already exists
2017/12/04 21:05:32 [DEBUG] DB: Add affiliation org1.department2
2017/12/04 21:05:32 [DEBUG] Affiliation 'org1.department2' already exists
2017/12/04 21:05:32 [DEBUG] Successfully loaded affiliations table
2017/12/04 21:05:32 [INFO] Initialized sqlite3 database at /etc/hyperledger/fabric-ca/fabric-ca-server.db
2017/12/04 21:05:32 [DEBUG] Initializing enrollment signer
2017/12/04 21:05:33 [DEBUG] validating configuration
2017/12/04 21:05:33 [DEBUG] validate local profile
2017/12/04 21:05:33 [DEBUG] profile is valid
2017/12/04 21:05:33 [DEBUG] validate local profile
2017/12/04 21:05:33 [DEBUG] profile is valid
2017/12/04 21:05:33 [DEBUG] validate local profile
2017/12/04 21:05:33 [DEBUG] profile is valid
2017/12/04 21:05:33 [DEBUG] CA initialization successful
2017/12/04 21:05:33 [INFO] Home directory for default CA: /etc/hyperledger/fabric-ca
2017/12/04 21:05:33 [DEBUG] 1 CA instance(s) running on server
2017/12/04 21:05:33 [DEBUG] TLS is enabled
2017/12/04 21:05:33 [DEBUG] Closing server DBs
Error: TLS is enabled but no TLS certificate provided

```",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01x2t:,,,,,,,,aambati,jtracey,,,,,,,,,master,,,true,"07/Dec/17 11:50 AM;jtracey;I have the same problem. 

Tried adding:

FABRIC_CA_SERVER_TLS_CERTFILE=$ROOT_CA_CERTFILE

to makeDocker.sh but this did not resolve the issue",08/Dec/17 2:42 PM;aambati;https://gerrit.hyperledger.org/r/c/16035/,"12/Dec/17 5:43 PM;jtracey; 

Hi 

I can't find anything at the link posted. Any more info?",,,,,,,,,,,,,,,,,,,,,
chaincode instantiation returns timeout expired ,FAB-7328,24798,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,blintgit,blintgit,blintgit,05/Dec/17 9:15 PM,06/Apr/18 7:07 AM,26/Apr/18 6:50 AM,06/Apr/18 7:07 AM,,,,,,,Not a Bug,,,fabric-samples,,,,0,chaincode,fabric-samples,nodejs-chaincode,,,,,,"Dear Community,

I've been working around with Fabric for a a few months now, and I've been trying to run a somewhat complex virtual machine, the Ethereum Virtual Machine within a chaincode. It is written in JavaScript so I worked with the nodeJS chaincode version.

I packed the the VM with my chaincode in a directory that i install and instantiate onto the peer. The install completes and exits with no errors, however the instantiation after hanging for a few minutes returns me an error:

 
{code:java}
Error: Error endorsing chaincode: rpc error: code = Unknown desc = timeout expired while starting chaincode mychaincode:1.0(networkid:dev,peerid:peer0.org1.example.com,tx:.... {code}
 It should run for quite a few minutes at least as the added packages are ~15MB, according to the example nodejs chaincode runs for a minute at least.

 

The example nodejs chaincode (chaincode_example02) runs perfectly on both BYFN network from the tutorial and on a basic-network that I've started. My environment was set up according to the documentation (v1.1.0) from the fabric-samples repository (v1.1.0). Even if I only add one package to the example chaincode with the require method, it hangs, than return error.

I've been searching for a flag or config where I can set the timeout value for chaincode instantiation, but with no luck. Where could I increase the timeout value? Which log should I provide to search for the soution?

Thanks is advance,

Balint",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01wwt:,,,,,,,,blintgit,ChristopherFerris,mastersingh24,,,,,,,,,,,,"21/Jan/18 10:12 AM;mastersingh24;[~blintgit] - See the executeTimeout parameter here:  https://github.com/hyperledger/fabric/blob/master/sampleconfig/core.yaml#L494

You can either set it in the core.yaml or set the CORE_CHAINCODE_EXECUTETIMEOUT environment variable.
 
You should also check the logs for your chaincode container to ensure that there was no error actually launching it as well","05/Apr/18 5:35 PM;ChristopherFerris;[~blintgit] do you wish to keep this open or, can it be closed? Thanks",05/Apr/18 8:52 PM;ChristopherFerris;[~blintgit] I would also refer you to the #fabric-evm channel in RocketChat... there is a collaboration between Fabric and Burrow engineers to implement an EVM in Fabric. https://jira.hyperledger.org/browse/FAB-6590,06/Apr/18 7:06 AM;blintgit;Thank you for the reference and the reminder. I close it now :),,,,,,,,,,,,,,,,,,,,
unable to download platform specific binaries from RTD script from master or latest branch,FAB-7327,24794,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,rameshthoomu,rameshthoomu,05/Dec/17 7:10 PM,09/Dec/17 10:28 AM,26/Apr/18 6:50 AM,09/Dec/17 10:28 AM,,,,,,,DUPLICATE,,,fabric-docs,,,,0,,,,,,,,,"Unable to download tagged images from the below script . [http://hyperledger-fabric.readthedocs.io/en/latest/samples.html#download-platform-specific-binaries]
 curl -sSL [https://goo.gl/6wtTN5] | bash -s 1.1.0--preview** This script is downloading 1.0.4 fabric images and 1.1.0-preview fabric-ca images.",,,,,,,,,,,,,,,,FAB-7295,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01wvx:,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Inconsistencies in Resource Management Client interface,FAB-7323,24790,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nchangfong,nchangfong,nchangfong,05/Dec/17 6:42 PM,07/Dec/17 3:48 PM,26/Apr/18 6:50 AM,07/Dec/17 3:48 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"The package name in `api/apitxn/resmgmtclient/resmgmt.go` is `resmgmt` which is inconsistent with the path name `api/apitxn/resmgmtclient/` contrary to Go package naming conventions. The package name is also inconsistent with the channel management client `chmgmtclient` (also in `apitxn/`) and the implementation in `pkg/fabric-txn/resmgmtclient/resmgmt.go` (package name `resmgmtclient`).

 

Additionally, there is an exported method in `pkg/fabric-txn/resmgmtclient/resmgmt.go`, `IsChaincodeInstalled` that is not declared in the interface.",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:za2i,,,,,,,,nchangfong,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"[CI] - cache kafka, couchdb, zookeeper 1.1.0-preview images in x86_64 VM",FAB-7299,24758,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,04/Dec/17 9:21 PM,07/Dec/17 1:29 AM,26/Apr/18 6:50 AM,07/Dec/17 1:29 AM,,,,,,,,,,fabric-ci,,,,0,fabric-ci,,,,,,,,"[CI] - cache kafka, couchdb, zookeeper 1.1.0-preview images in x86_64 VM. This reduces build time while instantiating x86_64 VM",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01wo5:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,07/Dec/17 1:29 AM;rameshthoomu;Patch has been submitted and merged. Now x86_64 minions are available with all the above mentioned docker images.,,,,,,,,,,,,,,,,,,,,,,,
Use an enrolled user to transact in tests,FAB-7292,24749,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,divyank,divyank,divyank,04/Dec/17 5:11 PM,05/Dec/17 5:51 PM,26/Apr/18 6:50 AM,05/Dec/17 5:51 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"Currently, due to the fabric-ca server being misconfigured in the integration tests, any enrolment credentials generated by it are invalid.

Configure the fabric-ca server correctly and add a test case to transact with an enrolled user (to have the peer verify the e-certs) to catch future regressions.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01wm5:,,,,,,,,divyank,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
fabric-test-daily-x86_64 failed as there is problem in CaClusterTest,FAB-7291,24740,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,sambhavdutt,sambhavdutt,04/Dec/17 4:27 PM,11/Dec/17 5:35 PM,26/Apr/18 6:50 AM,09/Dec/17 9:27 AM,v1.1,,,,,,v1.1,,,fabric-quality,,,,0,ci_failure,,,,,,,,"The following error was observed in  test_FAB6863_BasicCAClustering

ca_cluster.CaClusterTest.test_FAB6863_BasicCAClustering (from pytest) 

Error Message
CalledProcessError: Command '['mkdir -p /tmp/logs; chmod 777 /tmp/logs;docker run -v /tmp/logs:/tmp -v $PWD/../../fabric-ca:/opt/gopath/src/github.com/hyperledger/fabric-ca hyperledger/fabric-ca-fvt ./scripts/fvt/cluster_test.sh 4 4 8 128']' returned non-zero exit status 58

*Build Log*
https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-x86_64/179/testReport/ca_cluster/CaClusterTest/test_FAB6863_BasicCAClustering/",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01wkd:,,,,,,,,aambati,sambhavdutt,,,,,,,,,master,,,true,06/Dec/17 7:51 PM;aambati;https://gerrit.hyperledger.org/r/c/15999/,,,,,,,,,,,,,,,,,,,,,,,
Nil pointer panic in block iterator,FAB-7290,24725,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,04/Dec/17 3:46 PM,05/Dec/17 10:00 AM,26/Apr/18 6:50 AM,05/Dec/17 10:00 AM,v1.0.4,v1.1,,,,,v1.0.5,v1.1,,fabric-ledger,,,,0,,,,,,,,,The block storage iterator causes a nil pointer panic when the iterator is closed without calling `Next` function even once or some error happens when the `Next` is invoked for the first time.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01wh1:,,,,,,,,manish-sethi,,,,,,,,,,release-1.0,master,,true,,,,,,,,,,,,,,,,,,,,,,,,
fabric-test-daily-x86_64 failed in ACL due to permissioning error,FAB-7276,24697,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,sambhavdutt,sambhavdutt,03/Dec/17 6:10 PM,15/Dec/17 6:27 PM,26/Apr/18 6:50 AM,15/Dec/17 6:27 PM,,,,,,,,,,fabric-quality,,,,0,ci_failure,,,,,,,,"fabric-test-daily-x86_64 is failing in  'test_FAB6490_Using_FCA_With_ACL_Permissioning' due to the following error,

acl_happy_path.ACL.test_FAB6490_Using_FCA_With_ACL_Permissioning (from pytest)

Error Message
CalledProcessError: Command '['./scripts/env.sh && ./start.sh']' returned non-zero exit status 1

self.assertTrue(os.path.exists(fca_sample_directory), msg=""The fabric-ca chaincode test does not exist in this directory setup"")

*Build Log*
https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-x86_64/179/testReport/acl_happy_path/ACL/test_FAB6490_Using_FCA_With_ACL_Permissioning/
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01wbx:,,,,,,,,latitiah,rameshthoomu,sambhavdutt,,,,,,,,,,,,"06/Dec/17 3:00 PM;latitiah;This is not a permissions error, but a resource issue. 
{code}
IOError: [Errno 11] Resource temporarily unavailable
{code}

The CI server resources should be checked. I see this same error across multiple tests.",06/Dec/17 3:32 PM;rameshthoomu;I see this is test cases is failing consistently and I don't think it is related to CI server resources. [~latitiah] who is right person to analyze errors in below logs https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-x86_64/182/artifact/gopath/src/github.com/hyperledger/fabric-test/fabric-samples/fabric-ca/data/logs/,,,,,,,,,,,,,,,,,,,,,,
Comm test intermittent failure,FAB-7275,24696,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,03/Dec/17 2:21 PM,24/Dec/17 2:01 PM,26/Apr/18 6:50 AM,24/Dec/17 2:01 PM,,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,," 
{code:java}
13:20:15 unit-tests_1 | --- FAIL: TestClientConnections (0.00s) 13:20:15 unit-tests_1 | --- FAIL: TestClientConnections/ValidConnectionTLS (0.00s) 13:20:15 unit-tests_1 | connection_test.go:107: Running test ValidConnectionTLS ... 13:20:15 unit-tests_1 | connection_test.go:117: Error [listen tcp 127.0.0.1:9053: bind: address already in use] creating test server for address [localhost:9053] 13:20:15 unit-tests_1 | FAIL 13:20:15 unit-tests_1 | coverage: 86.3% of statements 13:20:15 unit-tests_1 | FAIL github.com/hyperledger/fabric/core/comm 9.401s{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01wbp:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
restore bootstrap-1.1.0-preview.sh,FAB-7242,24657,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,ChristopherFerris,ChristopherFerris,01/Dec/17 1:39 PM,06/Dec/17 10:48 AM,26/Apr/18 6:50 AM,06/Dec/17 10:47 AM,v1.1.0-preview,,,,,,,,,fabric-build,,,,0,,,,,,,,,"when we merged FAB-7144 CR, we removed old bootstrap scripts. the 1.1.0-preview docs still reference the old scripts/bootstrap-1.1.0-preview.sh script so it needs to be restored.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01w31:,,,,,,,,ChristopherFerris,,,,,,,,,,master,,,true,06/Dec/17 10:48 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/c/15863/,,,,,,,,,,,,,,,,,,,,,,,
chaincode-docker-devmode : Certs expired,FAB-7241,24656,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,dsanchezseco,dsanchezseco,01/Dec/17 12:34 PM,16/Dec/17 1:15 PM,26/Apr/18 6:50 AM,16/Dec/17 1:15 PM,v1.1.0-preview,,,,,,v1.1,,,fabric-samples,,,,0,,,,,,,,,"Hi!

I'm testing the node chaincode development with `chaincode-docker-devmode` tag `v1.1.0-preview` and latest master after some fight with the docker images (on the docs the curl for the v1.1.0-preview is outdated, the good one is -> [https://goo.gl/6xS3cd] ).

After fixing this i'm getting a panic on the peer execution that i think is the same problem as happened with  #--FAB-6969--.

In the case of  chaincode-docker-development the certs are already generated and no config files are supplied, so i'm not sure about  the config to regenerate the certs.

 

Edit: According to [https://certlogik.com/decoder/] the expired certs are `admincert/admincert.pem` and `signcert/peer.pem`  which had expired on Nov 11th",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01w2t:,,,,,,,,,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
peer chaincode list --installed requires channel parameter,FAB-7236,24648,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,jyellick,jyellick,30/Nov/17 6:43 PM,11/Dec/17 8:03 PM,26/Apr/18 6:50 AM,11/Dec/17 8:03 PM,v1.1,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,"The peer chaincode list command complains when no channel parameter is specified, even though listing installed chaincodes is not a channel scoped operation.  This requirement should be removed (and I believe is a new bug in v1.1)

{noformat}
root@29a9cba83246:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer chaincode list --installed
Error: The required parameter 'channelID' is empty. Rerun the command with -C flag
Usage:
  peer chaincode list [flags]

Flags:
  -C, --channelID string   The channel on which this command should be executed
      --installed          Get the installed chaincodes on a peer
      --instantiated       Get the instantiated chaincodes on a channel

Global Flags:
      --cafile string          Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint
      --logging-level string   Default logging level and overrides, see core.yaml for full syntax
  -o, --orderer string         Ordering service endpoint
      --tls                    Use TLS when communicating with the orderer endpoint
      --transient string       Transient map of arguments in JSON encoding
  -v, --version                Display current version of fabric peer server

{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01w11:,,,,,,,,jyellick,wlahti,,,,,,,,,master,,,true,11/Dec/17 1:49 PM;wlahti;https://gerrit.hyperledger.org/r/#/c/16105/,,,,,,,,,,,,,,,,,,,,,,,
CRL pem file should wrap at 64 characters,FAB-7223,24623,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,rennman,rennman,29/Nov/17 11:41 PM,19/Dec/17 9:47 PM,26/Apr/18 6:50 AM,19/Dec/17 9:47 PM,,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,The pem files that are generated by fabric-ca should wrap at 64 chars. It can cause intermittent problems with parsing the file. ,,,,,,,,,,,,,,,,,,,,11/Dec/17 10:22 PM;rennman;0.user50.crl;https://jira.hyperledger.org/secure/attachment/13601/0.user50.crl,11/Dec/17 10:22 PM;rennman;1.user89.crl;https://jira.hyperledger.org/secure/attachment/13602/1.user89.crl,11/Dec/17 10:22 PM;rennman;2.user342.crl;https://jira.hyperledger.org/secure/attachment/13600/2.user342.crl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01vvx:,,,,,,,,aambati,mastersingh24,rennman,,,,,,,,master,,,true,"09/Dec/17 10:29 AM;mastersingh24;[~rennman] - do you have an example of where this is happening?

[~aambati] - do we use anything other than the Go libs for serializing certs to PEM format?","11/Dec/17 9:29 PM;rennman;The test that was failing isn't merged, but I came up with a pared-down way to re-create. Just kick this bad boy off and wait for it to fail:

{code:java}
#!/bin/bash -e
crl=$HOME/.fabric-ca-client/msp/crls/crl.pem

rm -rf ca-cert.pem fabric-ca-server-config.yaml fabric-ca-server.db msp/ $HOME/.fabric-ca-client/
kill $(ps -C fabric-ca-server|awk '{print $1}') 2>/dev/null
fabric-ca-server start -b a:b >/dev/null 2>&1 &
sleep 3
fabric-ca-client enroll -u http://a:b@127.0.0.1:7054 >/dev/null 2>&1
fabric-ca-client gencrl >/dev/null 2>&1
i=0; while openssl crl -in $crl -noout; do
   u=user$((i++))
   echo $u
   fabric-ca-client register --id.name $u --id.secret $u  >/dev/null 2>&1
   fabric-ca-client enroll -u http://$u:$u@127.0.0.1:7054 -H /tmp/user >/dev/null 2>&1
   fabric-ca-client revoke -e $u >/dev/null 2>&1
   fabric-ca-client gencrl >/dev/null 2>&1
done
openssl crl -in <(fold -w 64 $crl)
echo -e ""\033[31m ****** ERROR ****** $crl \033[0m""

{code}
","11/Dec/17 10:24 PM;rennman; [^2.user342.crl]  [^0.user50.crl]  [^1.user89.crl] 
I have looked, but can't find any statistical anomalies. If it helps, here are some examples generated by running something like the above.","12/Dec/17 3:36 AM;aambati;[~mastersingh24] Gari, we just use go libs. ",12/Dec/17 10:42 PM;aambati;https://gerrit.hyperledger.org/r/c/16167/,,,,,,,,,,,,,,,,,,,
Fix Network Launcher to remove --peer-defaultchain flag while launching peer,FAB-7222,24620,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,29/Nov/17 9:55 PM,18/Dec/17 6:45 PM,26/Apr/18 6:50 AM,18/Dec/17 6:45 PM,,,,,,,,,,fabric-quality,,,,0,quality,,,,,,,,"Peer is getting exited when launching with Network Launcher with following error:
{code:java}
Error: unknown flag: --peer-defaultchain
Usage:
  peer node start [flags]

Flags:
  -o, --orderer string      Ordering service endpoint (default ""orderer:7050"")
      --peer-chaincodedev   Whether peer in chaincode development mode

Global Flags:
      --logging-level string       Default logging level and overrides, see core.yaml for full syntax
      --test.coverprofile string   Done (default ""coverage.cov"")
  -v, --version                    Display current version of fabric peer server

{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-6742,0|i01vvp:,,,,,,,,suryalnvs,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Remove test.coverprofile flag,FAB-7220,24617,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,29/Nov/17 7:25 PM,30/Nov/17 12:03 PM,26/Apr/18 6:50 AM,30/Nov/17 12:03 PM,,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,The peer flag *--test.coverprofile* is not used anywhere so it should be removed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01vv1:,,,,,,,,mastersingh24,,,,,,,,,,master,,,true,29/Nov/17 7:31 PM;mastersingh24;https://gerrit.hyperledger.org/r/15817,,,,,,,,,,,,,,,,,,,,,,,
getChannelConfig is failed in PTE tests on multihost environment using Ansible playbooks,FAB-7208,24601,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,suryalnvs,rameshthoomu,rameshthoomu,29/Nov/17 3:12 PM,19/Dec/17 3:36 PM,26/Apr/18 6:50 AM,19/Dec/17 3:36 PM,,,,,,,v1.1.0-alpha,,,fabric-quality,,,,0,quality,,,,,,,,"Observed below error while running [FAB-3989-4q-TLS|https://jenkins.hyperledger.org/sandbox/job/fabric-test-multihost/7/artifact/Logs/FAB-3989-4q-TLS_1128205324.log] test case in multihost environment using Ansible playbooks. 

https://jenkins.hyperledger.org/sandbox/job/fabric-test-multihost/7/artifact/Logs/FAB-3989-4q-TLS_1128205324.log

 
{code:java}
[32minfo[39m: [PTE 1 main]: stderr: [31merror[39m: [Orderer.js]: sendDeliver - rejecting - status:NOT_FOUND [32minfo[39m: [PTE 1 main]: stderr: [31merror[39m: [Channel.js]: getChannelConfig - Failed Proposal. Error: Error: Invalid results returned ::NOT_FOUND at ClientDuplexStream.<anonymous> (/root/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/fabric-client/lib/Orderer.js:224:22){code}
 ",jenkins sandbox,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01vrp:,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
check_license misses some newly added files,FAB-7183,24568,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,troyronda,troyronda,troyronda,29/Nov/17 2:18 AM,04/Jan/18 8:18 PM,26/Apr/18 6:50 AM,04/Jan/18 8:18 PM,,,,,,,v1.1,,,fabric-quality,fabric-sdk-go,,,0,,,,,,,,,"The missing license on ""bccsp/utils/ecdsa.go"" wasn't caught by the check_license script (in FAB-7107 / [https://gerrit.hyperledger.org/r/c/15721/]).

The script wasn't properly detecting new files due to a reversal in the commit hashes in git diff-tree.
 * Fix for Go SDK: [https://gerrit.hyperledger.org/r/c/15793/]
 * Fix for Fabric: [https://gerrit.hyperledger.org/r/c/15795/]

 ",,,,,,,,,,,,,,,,,FAB-7107,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01vkd:,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Samples - Balance Transfer - readme commands do not work,FAB-7160,24545,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,28/Nov/17 10:22 PM,03/Jan/18 5:24 PM,26/Apr/18 6:50 AM,03/Jan/18 5:24 PM,,,,,,,,,,,,,,0,,,,,,,,,Some of the readme commands do not work. Update the readme sample commands and supporting sample application code.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01vf9:,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
docs reference incorrect short link redirect target,FAB-7144,24524,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,ChristopherFerris,ChristopherFerris,28/Nov/17 6:39 PM,30/Nov/17 5:31 PM,26/Apr/18 6:50 AM,30/Nov/17 5:31 PM,v1.1.0-preview,,,,,,,,,fabric-release,,,,0,,,,,,,,,"docs should reference raw file, not GH page for bootstrap.sh script",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01vb1:,,,,,,,,ChristopherFerris,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Peer CLI does not support TLS connectivity for Peer Endpoint Operations,FAB-7137,24516,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,rhegde,rhegde,28/Nov/17 4:22 PM,02/Dec/17 2:40 AM,26/Apr/18 6:50 AM,02/Dec/17 2:40 AM,,,,,,,,,,fabric-peer,fabric-tools,,,0,won't-fix,,,,,,,,"As per Peer CLI documentation - the support for TLS connectivity is only with Orderer Endpoint that means all operation like Join/Install/Endorsement Proposal Request will be sent unsecured.

```      --cafile string    Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint
       --tls              Use TLS when communicating with the orderer endpoint

```

 

In our implementation - all operation related to fabric-network setup is performed using Peer CLI.

CC: [~snehas] [~yacovm]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01v99:,,,,,,,,rhegde,yacovm,,,,,,,,,,,,,"28/Nov/17 4:40 PM;yacovm;{quote}As per Peer CLI documentation - the support for TLS connectivity is only with Orderer Endpoint
{quote}
Can you please tell how you infer this? Because If the peer is running with TLS_ENABLED=true, then you won't be able to connect to it without using TLS.","28/Nov/17 9:00 PM;rhegde;I just looked at the script once again, may be there is confusion in our understanding, So [https://github.com/hyperledger/fabric/blob/release/examples/e2e_cli/scripts/script.sh#L36] ==> is the TLS root of trust for Peer Node and `{{ --cafile }}` is the root of trust for orderer node.
 
And Join and Install are operations explicitly on Peer where orderer is not involed and hence `{{ --cafile }}` is not specified. [https://github.com/hyperledger/fabric/blob/release/examples/e2e_cli/scripts/script.sh#L91]
 
Discussed with [~yacovm] for confirmation. This issue can be marked as not-a-defect.",,,,,,,,,,,,,,,,,,,,,,
Toggle on autodetect address in core.yaml,FAB-7125,24502,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,28/Nov/17 2:37 PM,01/Dec/17 2:15 PM,26/Apr/18 6:50 AM,01/Dec/17 2:15 PM,,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,"Currently when the peer is started via peer node start, it crashes because it cannot detect an endpoint to be used as the address that a chaincode shim will connect to the peer, because all config endpoints point to 0.0.0.0 

we need to make the peer fallback to an auto-detected address in this case.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01v65:,,,,,,,,kchristidis,yacovm,,,,,,,,,master,,,true,01/Dec/17 2:15 PM;kchristidis;https://gerrit.hyperledger.org/r/c/15769/,,,,,,,,,,,,,,,,,,,,,,,
Fabric test --> fabric-test-x86_64 fails as there is a change in sequence of the tasks performed.,FAB-7112,24480,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,sambhavdutt,sambhavdutt,27/Nov/17 5:37 PM,09/Dec/17 4:42 PM,26/Apr/18 6:50 AM,09/Dec/17 4:42 PM,,,,,,,,,,fabric-quality,,,,0,ci_failure,,,,,,,,"The fabric-test-verify-x86_64 is failing as smoke-test tasks are carried out in a different order/sequence. The tasks must be aligned accordingly(in the Makefile) so that there is no error when the smoke-test tasks are performed.

*Build log*

https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-verify-x86_64/552/console",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01v25:,,,,,,,,sambhavdutt,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
test_FAB6863_BasicCAClustering test case is failing while running daily test suite,FAB-7104,24468,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rennman,rameshthoomu,rameshthoomu,25/Nov/17 4:56 PM,08/Jan/18 3:36 AM,26/Apr/18 6:50 AM,08/Jan/18 3:36 AM,,,,,,,,,,fabric-quality,,,,0,,,,,,,,,"test_FAB6863_BasicCAClustering test case is failing while running daily test suite.
h3.  
{code:java}
Standard Error
LOG: redirecting log output to logging collector process HINT: Future log output will appear in directory ""pg_log"". Connection to 127.0.0.1 5432 port [tcp/*] succeeded! nc: connect to 127.0.0.1 port 3306 (tcp) failed: Connection refused nc: connect to 127.0.0.1 port 3306 (tcp) failed: Connection refused Connection to 127.0.0.1 3306 port [tcp/*] succeeded! Connection to 127.0.0.1 389 port [tcp/*] succeeded! /start.sh: line 28: /opt/gopath/src/github.com/hyperledger/fabric-ca/scripts/fvt/cluster_test.sh: No such file or directory
{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01uzh:,,,,,,,,rameshthoomu,rennman,,,,,,,,,master,,,true,30/Nov/17 7:27 PM;rennman;https://gerrit.hyperledger.org/r/#/c/15843/,12/Dec/17 10:56 PM;rennman;Blocked https://gerrit.hyperledger.org/r/#/c/15999/,,,,,,,,,,,,,,,,,,,,,,
chaincode-docker-devmode example not working,FAB-7103,24467,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nickgaski,YandryPozo,YandryPozo,25/Nov/17 6:49 AM,16/Dec/17 6:06 PM,26/Apr/18 6:50 AM,16/Dec/17 11:48 AM,v1.0.4,,,,,,v1.1,,,fabric-examples,,,,0,chaincode,documentation,,,,,,,"Hello there, I've done and followed every step on the [Chaincode for Developers|http://hyperledger-fabric.readthedocs.io/en/release/chaincode4ade.html] section several tries with 3 different versions: *x86_64-1.0.0* , *x86_64-1.0.2* , *x86_64-1.0.4* but each time I reach to one of the last steps ""Terminal 3 - Use the chaincode"" I get the same error after executing the instantiate command:
{code:none}
peer chaincode instantiate -n mycc -v 0 -c '{""Args"":[""a"",""10""]}' -C myc
{code}
The error is:
{code:none}
Error endorsing chaincode: rpc error: code = Unknown desc = Failed to init chaincode(handler not found for chaincode mycc:0)
{code}
The full output of docker-compose when I execute that command is [here|https://gist.github.com/yanpozka/003704bcfd953550e554a4ceb8883add]
 The full output of cli container when I execute that command is [here|https://gist.github.com/yanpozka/31a488f1cf2e8ca9279d23b896b6e1ce]

Also I have tried with the _basic-network_ from the same fabric-samples, but I get the same error :(
----
Because I have experience with Go I've been able to understand some debug logs and I've found the [line|https://github.com/hyperledger/fabric/blob/2cab745abf031d8ff5d3e8f4fa7a5e5af8907fad/core/chaincode/chaincode_support.go#L327] that it's showing that error, looks like the chain-code wan't installed in a right way or something like that, but the _install_ command worked well.
 I apologize in advance if this isn't the right place to ask for help, but I've watched most of the videos on Youtube and lot of articles on Internet and most of them always end in the official documentation, which is good. I also want to collaborate with this project, maybe with a little of guidance I can fix or learn why is this happening. Happy to help!","*OS*: ubuntu 16.04 LTS
*docker version*:
{code:java}
Client:
 Version:      17.09.0-ce
 API version:  1.32
 Go version:   go1.8.3
 Git commit:   afdb6d4
 Built:        Tue Sep 26 22:42:18 2017
 OS/Arch:      linux/amd64

Server:
 Version:      17.09.0-ce
 API version:  1.32 (minimum version 1.12)
 Go version:   go1.8.3
 Git commit:   afdb6d4
 Built:        Tue Sep 26 22:40:56 2017
 OS/Arch:      linux/amd64
 Experimental: false
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01uz9:,,,,,,,,mastersingh24,YandryPozo,,,,,,,,,master,,,true,"26/Nov/17 1:33 PM;mastersingh24;[~YandryPozo] - Did you run http://hyperledger-fabric.readthedocs.io/en/release/chaincode4ade.html#terminal-2-build-start-the-chaincode ?
If so, what was the output when you ran 
{code:java}
docker exec -it chaincode bash
cd sacc
go build
CORE_PEER_ADDRESS=peer:7051 CORE_CHAINCODE_ID_NAME=mycc:0 ./sacc
{code}?
","26/Nov/17 8:00 PM;YandryPozo;[~mastersingh24] thanks for your answer!
 When I run that command I get this output:
{code:none}
2017-11-26 19:56:13.392 UTC [shim] SetupChaincodeLogging -> INFO 001 Chaincode log level not provided; defaulting to: INFO
2017-11-26 19:56:13.392 UTC [shim] SetupChaincodeLogging -> INFO 002 Chaincode (build level: ) starting up ...
{code}
and the program stays hanging like running forever, probably because the main is listening forever too.

This is the output of the peer:
{code:none}
peer         | 2017-11-26 19:56:13.419 UTC [chaincode] HandleChaincodeStream -> DEBU 2c7 Current context deadline = 0001-01-01 00:00:00 +0000 UTC, ok = false
peer         | 2017-11-26 19:56:13.420 UTC [chaincode] processStream -> DEBU 2c8 []Received message REGISTER from shim
peer         | 2017-11-26 19:56:13.420 UTC [chaincode] HandleMessage -> DEBU 2c9 []Fabric side Handling ChaincodeMessage of type: REGISTER in state created
peer         | 2017-11-26 19:56:13.420 UTC [chaincode] beforeRegisterEvent -> DEBU 2ca Received REGISTER in state created
peer         | 2017-11-26 19:56:13.420 UTC [chaincode] registerHandler -> DEBU 2cb registered handler complete for chaincode mycc:0
peer         | 2017-11-26 19:56:13.420 UTC [chaincode] beforeRegisterEvent -> DEBU 2cc Got REGISTER for chaincodeID = name:""mycc:0"" , sending back REGISTERED
peer         | 2017-11-26 19:56:13.420 UTC [chaincode] notifyDuringStartup -> DEBU 2cd nothing to notify (dev mode ?)
peer         | 2017-11-26 19:56:13.420 UTC [chaincode] notifyDuringStartup -> DEBU 2ce sending READY
peer         | 2017-11-26 19:56:13.420 UTC [chaincode] processStream -> DEBU 2cf []Move state message READY
peer         | 2017-11-26 19:56:13.420 UTC [chaincode] HandleMessage -> DEBU 2d0 []Fabric side Handling ChaincodeMessage of type: READY in state established
peer         | 2017-11-26 19:56:13.420 UTC [chaincode] enterReadyState -> DEBU 2d1 []Entered state ready
peer         | 2017-11-26 19:56:13.420 UTC [chaincode] notify -> DEBU 2d2 notifier Txid: does not exist
peer         | 2017-11-26 19:56:13.420 UTC [chaincode] processStream -> DEBU 2d3 []sending state message READY
{code}",,,,,,,,,,,,,,,,,,,,,,
fabric-daily-test-x86_64 has failed due to incomplete data transfer and ledger errors.,FAB-7102,24466,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,sambhavdutt,sambhavdutt,24/Nov/17 10:22 PM,09/Dec/17 4:43 PM,26/Apr/18 6:50 AM,09/Dec/17 4:43 PM,,,,,,,,,,fabric-quality,,,,0,ci_failure,,,,,,,,"*fabric-saily-test-x86_64* failed due to the following errors,

10:42:31 + cd /
10:42:31 + curl -fsSL http://www.apache.org/dist/zookeeper/zookeeper-3.4.10/zookeeper-3.4.10.tar.gz
10:42:31 + tar -xz
10:42:36 curl: (18) transfer closed with 30516638 bytes remaining to read
10:42:36 
10:42:36 gzip: stdin: unexpected end of file
10:42:36 tar: Unexpected EOF in archive
10:42:36 tar: Unexpected EOF in archive
10:42:36 tar: Error is not recoverable: exiting now
10:42:36 The command '/bin/sh -c set -x     && cd /     && curl -fsSL ""http://www.apache.org/dist/zookeeper/$DISTRO_NAME/$DISTRO_NAME.tar.gz"" | tar -xz     && mv ""$DISTRO_NAME/conf/""* ""$ZOO_CONF_DIR""' returned a non-zero code: 2
10:42:36 Makefile:291: recipe for target 'build/image/zookeeper/.dummy-x86_64-1.1.0-alpha-snapshot-784deb5' failed


14:14:38 ledger_lte.py::perf_couchdb::test_FAB_3870_VaryNumParallelTxPerChain FAILED
14:14:42 ledger_lte.py::perf_couchdb::test_FAB_3871_VaryNumChain FAILED
14:14:47 ledger_lte.py::perf_couchdb::test_FAB_3872_VaryNumParallelTxWithSingleChain FAILED
14:14:52 ledger_lte.py::perf_couchdb::test_FAB_3873_VaryNumChainWithNoParallelism FAILED
14:14:57 ledger_lte.py::perf_couchdb::test_FAB_3874_VaryKVSize FAILED
14:15:01 ledger_lte.py::perf_couchdb::test_FAB_3875_VaryBatchSize FAILED
14:15:06 ledger_lte.py::perf_couchdb::test_FAB_3876_VaryNumKeysInEachTX FAILED
14:15:11 ledger_lte.py::perf_couchdb::test_FAB_3877_VaryNumTxs FAILED
14:15:11 
14:15:11  generated xml file: /w/workspace/fabric-daily-tests-x86_64/gopath/src/github.com/hyperledger/fabric/test/regression/daily/results_ledger_lte.xml 
14:15:11 =================================== FAILURES ===================================

*Build Log*

https://jenkins.hyperledger.org/view/Daily/job/fabric-daily-tests-x86_64/162/console",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01uz1:,,,,,,,,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix tests when GOPATH isn't set,FAB-7097,24457,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,troyronda,troyronda,troyronda,23/Nov/17 9:15 PM,28/Nov/17 4:36 PM,26/Apr/18 6:50 AM,28/Nov/17 4:36 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ux1:,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
chaincode Instantiate for channel is Failed due to x509: cannot validate certificate for ip because it doesn't contain any IP SANs,FAB-7094,24446,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jojialex2,jojialex2,23/Nov/17 9:27 AM,09/Jan/18 4:39 AM,26/Apr/18 6:50 AM,09/Jan/18 4:39 AM,v1.1.0-preview,,,,,,,,,,,,,0,,,,,,,,,"chaincode Instantiate for channel is Failed due to x509: cannot validate certificate for 172.18.0.15 because it doesn't contain any IP SANs

We are using hyperledger fabric x86_64-1.1.0-preview",,,,,,,,,,,,,,,,,,,,23/Nov/17 9:26 AM;jojialex2;feature.zip;https://jira.hyperledger.org/secure/attachment/13419/feature.zip,23/Nov/17 9:26 AM;jojialex2;log.zip;https://jira.hyperledger.org/secure/attachment/13420/log.zip,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01uut:,,,,,,,,C0rWin,denyeart,jojialex2,nharshita,yacovm,,,,,,,,,,"23/Nov/17 9:34 AM;yacovm;hold on, lets not rush to conclusions :)

This isn't a gossip problem... gossip can't fail instantiate. This is 100% a configuration problem.

I'll take a look later.","23/Nov/17 2:04 PM;yacovm;Hey I updated the docker-compose file to use the native fabric images but I'm getting:

 
{quote} panic: Failed to initialize local MSP: could not load a valid signer certificate from directory /var/hyperledger/msp/signcerts: stat /var/hyperledger/msp/signcerts: no such file or directory
{quote}

Any chance you set the volume definitions in the docker compose file to use the configs folder?","26/Dec/17 12:22 PM;nharshita; 

I faced same issue with balance-transfer and fabcar samples.

Solved it by setting CORE_PEER_CHAINCODELISTENADDRESS  to peer's containername:port in the docker compose file.

eg., CORE_PEER_CHAINCODELISTENADDRESS=peer0.org1.example.com:7052

 

ref: https://lists.hyperledger.org/pipermail/hyperledger-fabric/2017-November/002125.html

 ",08/Jan/18 3:35 AM;denyeart;[~jojialex2] Please see the comments and indicate if this resolves the issue or you still think there is an issue?,,,,,,,,,,,,,,,,,,,,
fabric-test-daily-x86_64 has been failing consistently from sometime due to build errors,FAB-7089,24440,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,sambhavdutt,sambhavdutt,22/Nov/17 8:55 PM,09/Dec/17 4:44 PM,26/Apr/18 6:50 AM,09/Dec/17 4:44 PM,,,,,,,,,,fabric-quality,,,,0,ci_failure,,,,,,,,"fabric-test-daily-x86_64 has been unstable for some time due to the following errors,

*Last Build*
04:18:03 /usr/lib/python2.7/subprocess.py:574: CalledProcessError
04:18:03 ----------------------------- Captured stderr call -----------------------------
04:18:03 Connection to 127.0.0.1 5432 port [tcp/*] succeeded!
04:18:03 nc: connect to 127.0.0.1 port 3306 (tcp) failed: Connection refused
04:18:03 LOG: redirecting log output to logging collector process
04:18:03 HINT: Future log output will appear in directory ""pg_log"".
04:18:03 Connection to 127.0.0.1 3306 port [tcp/*] succeeded!
04:18:03 nc: connect to 127.0.0.1 port 389 (tcp) failed: Connection refused
04:18:03 Connection to 127.0.0.1 389 port [tcp/*] succeeded!
04:18:03 /start.sh: line 28: /opt/gopath/src/github.com/hyperledger/fabric-ca/scripts/fvt/cluster_test.sh: No such file or directory
04:18:03 =========================== 1 failed in 2.87 seconds =========================== 



*Previous build*
10:55:03 Step 7/15 : RUN mkdir -p /usr/share/maven /usr/share/maven/ref   && curl -fsSL http://www-us.apache.org/dist/maven/maven-3/$MAVEN_VERSION/binaries/apache-maven-$MAVEN_VERSION-bin.tar.gz     | tar -xzC /usr/share/maven --strip-components=1   && ln -s /usr/share/maven/bin/mvn /usr/bin/mvn
10:55:03  ---> Running in 2f688d3254a2
10:55:10 curl: (18) transfer closed with 35138 bytes remaining to read
10:55:10 
10:55:10 gzip: stdin: unexpected end of file
10:55:10 tar: Unexpected EOF in archive
10:55:10 tar: Unexpected EOF in archive
10:55:10 tar: Error is not recoverable: exiting now
10:55:10 The command '/bin/sh -c mkdir -p /usr/share/maven /usr/share/maven/ref   && curl -fsSL http://www-us.apache.org/dist/maven/maven-3/$MAVEN_VERSION/binaries/apache-maven-$MAVEN_VERSION-bin.tar.gz     | tar -xzC /usr/share/maven --strip-components=1   && ln -s /usr/share/maven/bin/mvn /usr/bin/mvn' returned a non-zero code: 2


*Build Log* 

(Build 165)
https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-x86_64/165/console
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01utp:,,,,,,,,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
different timestamp of the chaincode will make chaincode fingerprint different,FAB-7065,24301,Bug,Unverified,FAB,Fabric,software,ChristopherFerris,,,Medium,,muralisr,yihuang518,yihuang518,21/Nov/17 9:24 AM,05/Apr/18 5:42 PM,26/Apr/18 6:50 AM,,,,,,,,Future,,,fabric-endorser,,,,0,Usability,,,,,,,,"I have two machines, one machine is for org0(let's say server A) and one is for org1(server B), I have a chaincode and copy it to these two machines.  Then I installed the chaincode on org0's peers  from server A and do the same thing to org1s from server B, and then I initialized the chaincode on one of peers on org0,  I did the query on one of the peer on org1, I got the error as following ,

Error: Error endorsing query: rpc error: code = Unknown desc = Error executing chaincode: Could not get deployment transaction from LSCC for mycc:1.0 - Get ChaincodeDeploymentSpec for mycc/mychannel from LSCC error: chaincode fingerprint mismatch data mismatch - <nil>

I login each peer server and find out the md5sum of the chaincode binary in directory /var/hyperledger/production/chaincodes/  are different between org0 and org1. 

And I did many testing by using command line and java sdk, and I find out if you want to make all the  chaincode binary the same with each other, you should make sure you load the same chain code, that means in the same directory with the same time stamp. Even you move the chain code away and copy back, you will get fail because of the time stamp issue. It does not make sense, different orgs should install the chaincode on their own machine. I think it is a bug. 

If I was wrong ,please correct me, if you can tell me what else will impact the fingerprint, it will be very helpful, thanks so much.

 ","Linux server :Linux ubuntu 4.10.0-38-generic #42~16.04.1
Java sdk: 1.0.1
fabric: 1.0.1~1.0.4
I am doing the command line testing by using e2e-cli",,,,,,,,,,,,,,,,FAB-5476,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ukt:,,,,,,,,baohua,bitdream,ChristopherFerris,denyeart,mastersingh24,muralisr,yihuang518,,,,,,,,27/Nov/17 3:01 AM;denyeart;[~muralisr] What is your opinion?,"27/Nov/17 6:48 AM;yihuang518;I think the chaincode name+content+version+chaincode path is the same ,the fingerprint should be the same. Our case is to send the chaincode to different orgs, and they will install the chaincode by using their own private key and certificate by themself, but the timestamp issue make the fingerprint mismatch, so we can not work together. The only way to solve the problem is collect all the orgs private key and certificate  on one side and install the chaincode, it is impossible, they won't do it.","09/Dec/17 2:38 PM;mastersingh24;[~muralisr] [~denyeart] 
There seem to be a number of items somewhat related to this error.  It all seems to boil down to the fact that I believe the intent of the Install design is that everyone should install the same package and not be building their own package from source.  This is exacerbated by the fact that we allow you to optionally combine package and install when running the install command (and it does not help that all of our samples do this as well).

Now I've looked through all the code and I think it might be possible to deterministically generate the fingerprint given identical input parameters, but I'm not sure that we should actually do this given the intent described above.
","09/Dec/17 4:01 PM;muralisr;[~mastersingh24] let me first address where this ""timestamp"" could come from.

The targz computation in the CLI itself tries to do the sane thing by ordering the files and nulling out all transients in the tar entry. This includes file timestamps in the file headers in the targz
{code:java}
        //Let's take the variance out of the tar, make headers identical by using zero time
        oldname := header.Name
        var zeroTime time.Time
        header.AccessTime = zeroTime
        header.ModTime = zeroTime
        header.ChangeTime = zeroTime
        header.Name = packagepath
        header.Mode = 0100644
{code}
 
{quote}I think it might be possible to deterministically generate the fingerprint given identical input parameters,
{quote}
So [~mastersingh24] I think we already do this for CLI. Do let me know if I'm missing something.

Assuming above is true, the following statement needs to be clarified
{quote}I find out if you want to make all the chaincode binary the same with each other, you should make sure you load the same chain code, that means in the same directory with the same time stamp
{quote}
[~yihuang518] Based on the above analysis, if all orgs have installed the identical chaincode with identical path, then I'd expect at least CLI based installs to work - *even if the timestamps on the files are different.* If that does not work we'd need to fix it. Can you check that please ? If that fails, it would be helpful to provide a sample with detailed steps so we can see whats going on.

Now, for the SDKs, we should make sure SDKs do the sane thing with their targz computation. One thing I noticed is that the node SDK sets the ""effective_date"" timestamp in the ChaincodeDeploymentSpec
{code:java}
fabric-client/lib/Client.js:		chaincodeDeploymentSpec.setEffectiveDate(clientUtils.buildCurrentTimestamp()); //TODO may wish to add this as a request setting
{code}
This would definitely make two separate installs fail even if everything else remains same. As suggested in the comment, one fix would be to let the user provide the ""effective date"" timestamp. Assuming CLI works, one workaround would be to install using CLI and do the rest with the SDKs ?

Finally... the intent of the fingerprint generation was to use the deploymentspec as is, without discarding fields. This way we don't get involved with language semantics (for example mapping of filesystem path to classpath in Java). I'd hesitate to pull out fields from the deployment spec and compute fingerprint (like the suggested _name+content+version+chaincode path_).","10/Dec/17 4:11 AM;baohua;[~muralisr], agree.

IMHO, it should be OK to calculate the fingerprint with `name+version+path+content`.

`version` already covers the info at temporal dimension.

 ","11/Dec/17 7:31 AM;mastersingh24;[~muralisr] - I'll take a look at the SDKs as well, but I did find a way to reproduce this with the CLI. If the user/group who owns the files is different, then you will also get the ""data mismatch"" error. Looks like adding Uid and Gid to the list of header fields fixes this:
{code:java}
//Let's take the variance out of the tar, make headers identical by using zero time
oldname := header.Name
var zeroTime time.Time
header.AccessTime = zeroTime
header.ModTime = zeroTime
header.ChangeTime = zeroTime
header.Name = packagepath
header.Mode = 0100644
header.Uid = 500
header.Gid = 500
{code}
 ","11/Dec/17 12:39 PM;muralisr;[~mastersingh24] that's interesting. I did look into that a bit (followed from another related JIRA) but thought it'll default to 0 uniformly.  I must have missed something. But good to know, Gari... do you want me to fix it ?",12/Dec/17 8:55 AM;mastersingh24;[~muralisr] - I can take a stab at it as well.  Up to you.  Created FAB-7434 to track,12/Dec/17 1:04 PM;muralisr;[~mastersingh24] either way works.,"15/Dec/17 3:38 AM;yihuang518;Hi Srinivasan Muralidharan
I have done a simple test by useing command line on fabric 1.0.4 last month, 
1. do the test by useing e2e-cli example
2. in the script.sh, we will install the chaincode on two peer, after installing the first peer, copy the chaincode away and sleep for 1 or 2 minutes(longer than 1 minute, 15 seconds is successful ,I don't know why...)
3. copy the chaincode back and make sure the timestamp is not the same
4. install the new chaincode on the second peer
5. init the chaincode on the first peer and invoke the seconde peer, you will get the error.
You can do the test to verify it. And I am pretty sure it can be reprocduced by using java sdk, becuase I have done the test on java sdk for more than 100 times. I found the problem on javasdk , then I did the test on command line. Please correct me if I am not correct.
","15/Dec/17 3:06 PM;muralisr;Thanks for the detailed steps [~yihuang518].

Expanding the steps a little bit to make sure I'm not missing anything
 # do the test by useing e2e-cli example
 # install CC on peer1
 # copy the chaincode away and sleep for 1 or 2 minutes
 # copy the chaincode back and make sure the timestamp is not the same
 # install the new chaincode on the peer2
 # init the chaincode on the first peer and invoke the seconde peer, you will get the error.

Can you validate that please ?","08/Jan/18 3:03 AM;denyeart;[~yihuang518] Reminder, can you review prior comment?",27/Jan/18 3:28 PM;muralisr;Assigning to self for investigation. Will try to recreate using above instructions.,"28/Jan/18 12:42 AM;muralisr;[~yihuang518] I followed the steps above and could not recreate on latest master.

 

Modified script.sh as follows

 
{code:java}
echo ""copy off the examples folder""
cp -r /opt/gopath/src/github.com/hyperledger/fabric/examples /tmp/

#get the timestamps of chainode_example02 dir
ls -ltr /opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02

## Install chaincode on Peer0/Org1 and Peer2/Org2
echo ""Installing chaincode on org1/peer0...""
installChaincode 0
echo ""Sleeping...remove examples folder and copy from saved""
sleep 120
echo ""Awake...""

#get the timestamps of chainode_example02 dir
ls -ltr /opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02

echo ""Install chaincode on org2/peer2...""
installChaincode 2

#Instantiate chaincode on Peer0/Org1
echo ""Instantiating chaincode on org1/peer0...""
instantiateChaincode 0

#Query on chaincode on Peer0/Org1 ..... instantiated on peer0/org1 and querying on peer2/org2 .... should fail if timestamp issue
echo ""Querying chaincode on org2/peer2...""
chaincodeQuery 2 100
{code}
 

 The logs show a timestamp difference and no query failure

 
{code:java}
copy off the examples folder
total 12
-rw-r--r-- 1 root root 3165 Jan 28 00:26 chaincode_example02_test.go
-rw-r--r-- 1 root root 5078 Jan 28 00:26 chaincode_example02.go
Installing chaincode on org1/peer0
....
....

Sleeping...remove examples folder and copy from saved
Awake...
total 12
-rw-r--r-- 1 root root 3165 Jan 28 00:31 chaincode_example02_test.go
-rw-r--r-- 1 root root 5078 Jan 28 00:31 chaincode_example02.go

Install chaincode on org2/peer2...
...
...
Querying chaincode on org2/peer2...
===================== Querying on PEER2 on channel 'mychannel'... =====================
CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt
CORE_PEER_TLS_KEY_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/server.key
CORE_PEER_LOCALMSPID=Org2MSP
CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
CORE_PEER_TLS_CERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/server.crt
CORE_PEER_TLS_ENABLED=true
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp
CORE_PEER_ID=cli
CORE_LOGGING_LEVEL=DEBUG
CORE_PEER_ADDRESS=peer0.org2.example.com:7051
Attempting to Query PEER2 ...3 secs
2018-01-28 00:31:55.053 UTC [msp] GetLocalMSP -> DEBU 001 Returning existing local MSP
2018-01-28 00:31:55.053 UTC [msp] GetDefaultSigningIdentity -> DEBU 002 Obtaining default signing identity
2018-01-28 00:31:55.053 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 003 Using default escc
2018-01-28 00:31:55.053 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 004 Using default vscc
2018-01-28 00:31:55.053 UTC [chaincodeCmd] getChaincodeSpec -> DEBU 005 java chaincode enabled
2018-01-28 00:31:55.053 UTC [msp/identity] Sign -> DEBU 006 Sign: plaintext: 0AA6070A6608031A0B08FBB3B4D30510...6D7963631A0A0A0571756572790A0161
2018-01-28 00:31:55.053 UTC [msp/identity] Sign -> DEBU 007 Sign: digest: 85BFB80200046A6059BA08EB39294FA2C8AAEB78A4046BA4C68E0438AAD0A4A3
Query Result: 100
2018-01-28 00:32:04.202 UTC [main] main -> INFO 008 Exiting.....
===================== Query on PEER2 on channel 'mychannel' is successful =====================
 
...
...
{code}
 

This seems to follow your steps closely and I cannot recreate the error (on latest master to reemphasize). Please let me know the above recreate steps are correct. Would be helpful if you can try on latest master as well.
 ",05/Apr/18 5:42 PM;ChristopherFerris;lowered priority and marked unverified since [~muralisr] could not reproduce.,,,,,,,,,
Windows build of fabric fails with gotools error and missing config.json,FAB-7064,24300,Bug,Backlog,FAB,Fabric,software,ChristopherFerris,,,Medium,,,sudheesh001,sudheesh001,21/Nov/17 6:59 AM,05/Apr/18 5:27 PM,26/Apr/18 6:50 AM,,,,,,,,Future,,,fabric-devenv,,,,0,Windows,,,,,,,,"I've been trying to setup `fabric` on a Windows system and followed the steps in the documentation for the pre-requisites and cloned the latest code from gerrit. While running the build I receive an error about config.json file not present in gotools. I am attaching the trace of the command here.

 

{{$ make dist-clean all}}
{{find: ‘/src/github.com/hyperledger/fabric/core/chaincode/shim’: No such file or directory}}
{{FIND: Parameter format not correct}}
{{Unable to find image 'hyperledger/fabric-baseimage:x86_64-0.4.2' locally}}
{{x86_64-0.4.2: Pulling from hyperledger/fabric-baseimage}}
{{9fb6c798fa41: Pulling fs layer}}
{{3b61febd4aef: Pulling fs layer}}
{{9d99b9777eb0: Pulling fs layer}}
{{d010c8cf75d7: Pulling fs layer}}
{{7fac07fb303e: Pulling fs layer}}
{{90da40a89164: Pulling fs layer}}
{{0ad767d382a3: Pulling fs layer}}
{{5b6844bd5c3b: Pulling fs layer}}
{{b8c3ee398c82: Pulling fs layer}}
{{8ce4a9cf2e05: Pulling fs layer}}
{{2ad3fb81c00a: Pulling fs layer}}
{{d010c8cf75d7: Waiting}}
{{7fac07fb303e: Waiting}}
{{90da40a89164: Waiting}}
{{0ad767d382a3: Waiting}}
{{5b6844bd5c3b: Waiting}}
{{b8c3ee398c82: Waiting}}
{{8ce4a9cf2e05: Waiting}}
{{2ad3fb81c00a: Waiting}}
{{3b61febd4aef: Download complete}}
{{9d99b9777eb0: Verifying Checksum}}
{{9d99b9777eb0: Download complete}}
{{d010c8cf75d7: Verifying Checksum}}
{{d010c8cf75d7: Download complete}}
{{7fac07fb303e: Verifying Checksum}}
{{7fac07fb303e: Download complete}}
{{9fb6c798fa41: Verifying Checksum}}
{{9fb6c798fa41: Download complete}}
{{90da40a89164: Verifying Checksum}}
{{90da40a89164: Download complete}}
{{0ad767d382a3: Verifying Checksum}}
{{0ad767d382a3: Download complete}}
{{5b6844bd5c3b: Verifying Checksum}}
{{5b6844bd5c3b: Download complete}}
{{8ce4a9cf2e05: Verifying Checksum}}
{{8ce4a9cf2e05: Download complete}}
{{9fb6c798fa41: Pull complete}}
{{3b61febd4aef: Pull complete}}
{{9d99b9777eb0: Pull complete}}
{{d010c8cf75d7: Pull complete}}
{{7fac07fb303e: Pull complete}}
{{90da40a89164: Pull complete}}
{{0ad767d382a3: Pull complete}}
{{5b6844bd5c3b: Pull complete}}
{{b8c3ee398c82: Verifying Checksum}}
{{b8c3ee398c82: Download complete}}
{{b8c3ee398c82: Pull complete}}
{{8ce4a9cf2e05: Pull complete}}
{{2ad3fb81c00a: Verifying Checksum}}
{{2ad3fb81c00a: Download complete}}
{{2ad3fb81c00a: Pull complete}}
{{Digest: sha256:a6ea2ea1fae3fec71b90aa1f8c9502ac2529848809eebfec02cf399003a1c857}}
{{Status: Downloaded newer image for hyperledger/fabric-baseimage:x86_64-0.4.2}}
{{container_linux.go:262: starting container process caused ""chdir to cwd (\""/opt/gopath/src/github.com/hyperledger/fabric/gotools\"") set in config.json failed: no such file or directory""}}
{{docker: Error response from daemon: oci runtime error: container_linux.go:262: starting container process caused ""chdir to cwd (\""/opt/gopath/src/github.com/hyperledger/fabric/gotools\"") set in config.json failed: no such file or directory"".}}
{{make: *** [build/docker/gotools] Error 127}}

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ukl:,,,,,,,,mastersingh24,sudheesh001,,,,,,,,,,,,,"22/Nov/17 9:46 PM;mastersingh24;I'll leave this as a bug, but I believe we actually updated the docs to specify that building on Windows is not currently supported outside of a Vagrant / Linux VM environment.

Running the Fabric Docker images is supported though",,,,,,,,,,,,,,,,,,,,,,,
PTE main final  TPS aggregating should not ignore the fraction part of each sub thread TPS   ,FAB-7041,24024,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sunhwei,sunhwei,sunhwei,20/Nov/17 3:00 AM,24/Nov/17 6:47 AM,26/Apr/18 6:50 AM,24/Nov/17 6:47 AM,,,,,,,,,,fabric-quality,,,,0,quality,,,,,,,,"Current PTE aggregating TPS calculate all sub-thread TPS , but it is only add the Int part ,the fraction part is ignored ,  it cause  the final aggregated TPS is exactly equal to the sum of all sub-thread TPS.    ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,0|i01u9h:,,Sprint 19 - Quality,,,,,,sunhwei,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Docker image for Kafka fails to build,FAB-7040,24023,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,cam.ross,cam.ross,19/Nov/17 4:59 PM,22/Nov/17 9:49 PM,26/Apr/18 6:50 AM,22/Nov/17 9:49 PM,,,,,,,DUPLICATE,,,fabric-build,,,,0,,,,,,,,,"When building the fabric docker images from master, the Kafka image creation is failing.  The Docker.in file for this image is pointing to a distribution tarball that no longer exists (i.e. kafka_2.11-0.10.2.0.tgz) at the location specified.   I am able to build the image by changing the tarball version to kafka_2.11-0.10.2.1.tgz and updating the associated checksum.  ",macOs High Sierra.,,,,,,,,,,,,,,,FAB-7046,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01u99:,,,,,,,,cam.ross,mastersingh24,,,,,,,,,,,,,22/Nov/17 9:49 PM;mastersingh24;Fixed by https://gerrit.hyperledger.org/r/#/c/15629/,,,,,,,,,,,,,,,,,,,,,,,
Zookeeper Docker image build fails with 404 not found,FAB-7032,24015,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,heidecke,heidecke,19/Nov/17 7:13 AM,23/Nov/17 4:33 PM,26/Apr/18 6:50 AM,22/Nov/17 9:50 PM,v1.0.4,v1.1.0-preview,,,,,DUPLICATE,,,fabric-build,,,,0,Docker,,,,,,,," 

During `make docker`, the zookeeper-image build fails on the URL: http://www.apache.org/dist/zookeeper/zookeeper-3.4.9/zookeeper-3.4.9.tar.gz
h3. Build output:

 
{code:java}
Building docker zookeeper-image
docker build -t hyperledger/fabric-zookeeper build/image/zookeeper
Sending build context to Docker daemon 5.12kB
Step 1/15 : FROM hyperledger/fabric-baseimage:x86_64-0.3.2
---> c92d9fdee998
Step 2/15 : RUN set -x && git clone https://github.com/ncopa/su-exec /tmp/su-exec/ && cd /tmp/su-exec && make all && cp su-exec /usr/bin/
---> Using cache
---> a583cfddad19
Step 3/15 : ENV ZOO_USER zookeeper ZOO_CONF_DIR /conf ZOO_DATA_DIR /data ZOO_DATA_LOG_DIR /datalog ZOO_PORT 2181 ZOO_TICK_TIME 2000 ZOO_INIT_LIMIT 5 ZOO_SYNC_LIMIT 2
---> Using cache
---> e9dced9d482a
Step 4/15 : RUN set -x && useradd ""$ZOO_USER"" && mkdir -p ""$ZOO_DATA_LOG_DIR"" ""$ZOO_DATA_DIR"" ""$ZOO_CONF_DIR"" && chown ""$ZOO_USER:$ZOO_USER"" ""$ZOO_DATA_LOG_DIR"" ""$ZOO_DATA_DIR"" ""$ZOO_CONF_DIR""
---> Using cache
---> 555456f0fb0b
Step 5/15 : ARG GPG_KEY=C823E3E5B12AF29C67F81976F5CECB3CB5E9BD2D
---> Using cache
---> b05481797101
Step 6/15 : ARG DISTRO_NAME=zookeeper-3.4.9
---> Using cache
---> 8373de16542c
Step 7/15 : RUN set -x && cd / && curl -fsSL ""http://www.apache.org/dist/zookeeper/$DISTRO_NAME/$DISTRO_NAME.tar.gz"" | tar -xz && mv ""$DISTRO_NAME/conf/""* ""$ZOO_CONF_DIR""
---> Running in 44864cbb5bf6
+ cd /
+ curl -fsSL http://www.apache.org/dist/zookeeper/zookeeper-3.4.9/zookeeper-3.4.9.tar.gz
+ tar -xz
curl: (22) The requested URL returned error: 404 Not Found

gzip: stdin: unexpected end of file
tar: Child returned status 1
tar: Error is not recoverable: exiting now
The command '/bin/sh -c set -x && cd / && curl -fsSL ""http://www.apache.org/dist/zookeeper/$DISTRO_NAME/$DISTRO_NAME.tar.gz"" | tar -xz && mv ""$DISTRO_NAME/conf/""* ""$ZOO_CONF_DIR""' returned a non-zero code: 2
Makefile:285: recipe for target 'build/image/zookeeper/.dummy-x86_64-1.1.0-preview' failed
make: *** [build/image/zookeeper/.dummy-x86_64-1.1.0-preview] Error 2
{code}
 ",,,,,,,,,,,,,,,,FAB-6931,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01u7h:,,,,,,,,gregnotso,heidecke,,,,,,,,,,,,,19/Nov/17 7:17 AM;heidecke;I apparently failed in my search (not used to gerrit + JIRA). Duplicate of FAB-6931.,"23/Nov/17 4:33 PM;gregnotso;i'm glad the issue is resolved for someone else and the duplicate fab is closed, but it still persists under this tag:

SHA-1: 132daddf1156a0c70429af2e8c3ca86bbdbf8c31
 * Merge ""FAB-6822 Prepare fabric for 1.1.0-preview release

how can i recover without pulling another git commit? should i open another fab? there's no answer to the issue on the rocket chat.

thx, greg",,,,,,,,,,,,,,,,,,,,,,
"grpc: addrConn.resetTransport failed to create client transport: connection error: desc = ""transport: Error while dialing dial tcp: lo$kup peer on 127.0.0.11:53: no such host""; Reconnecting to {peer:7051 <nil>}",FAB-7023,24005,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nickgaski,hhimanshu,hhimanshu,17/Nov/17 5:08 PM,08/Jan/18 3:29 AM,26/Apr/18 6:50 AM,08/Jan/18 3:29 AM,,,,,,,,,,fabric-examples,,,,0,,,,,,,,,"I am following [https://hyperledger-fabric.readthedocs.io/en/latest/chaincode4ade.html] (Chaincode for Developers) and performed the following steps
 * Downloaded latest binaries

{code:java}
➜  chaincode-docker-devmode git:(master) ✗ docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
➜  chaincode-docker-devmode git:(master) ✗ docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
➜  chaincode-docker-devmode git:(master) ✗


➜  chaincode-docker-devmode git:(master) ✗ curl -sSL https://goo.gl/fMh2s3 | bash
// some output, but finally the binaries
===> List out hyperledger docker images
hyperledger/fabric-ca          latest                 2736904862db        2 weeks ago         218MB
hyperledger/fabric-ca          x86_64-1.1.0-preview   2736904862db        2 weeks ago         218MB
hyperledger/fabric-tools       latest                 c584c20ac82b        2 weeks ago         1.42GB
hyperledger/fabric-tools       x86_64-1.1.0-preview   c584c20ac82b        2 weeks ago         1.42GB
hyperledger/fabric-couchdb     latest                 5b8a15e6e972        2 weeks ago         1.57GB
hyperledger/fabric-couchdb     x86_64-1.1.0-preview   5b8a15e6e972        2 weeks ago         1.57GB
hyperledger/fabric-kafka       latest                 cf09c5534ef9        2 weeks ago         1.37GB
hyperledger/fabric-kafka       x86_64-1.1.0-preview   cf09c5534ef9        2 weeks ago         1.37GB
hyperledger/fabric-zookeeper   latest                 ac127485fdc7        2 weeks ago         1.37GB
hyperledger/fabric-zookeeper   x86_64-1.1.0-preview   ac127485fdc7        2 weeks ago         1.37GB
hyperledger/fabric-orderer     latest                 2fccc91736df        2 weeks ago         159MB
hyperledger/fabric-orderer     x86_64-1.1.0-preview   2fccc91736df        2 weeks ago         159MB
hyperledger/fabric-peer        latest                 337f3d90b452        2 weeks ago         165MB
hyperledger/fabric-peer        x86_64-1.1.0-preview   337f3d90b452        2 weeks ago         165MB
hyperledger/fabric-javaenv     latest                 cd459b218651        2 weeks ago         1.49GB
hyperledger/fabric-javaenv     x86_64-1.1.0-preview   cd459b218651        2 weeks ago         1.49GB
hyperledger/fabric-ccenv       latest                 82489d1c11e8        2 weeks ago         1.35GB
hyperledger/fabric-ccenv       x86_64-1.1.0-preview   82489d1c11e8        2 weeks ago         1.35GB
➜  chaincode-docker-devmode git:(master) ✗


{code}
 * Made sure the path is correct

{code:java}
➜  chaincode-docker-devmode git:(master) ✗ pwd
/Users/harit/bl/sources/hyperledger/fabric-samples/chaincode-docker-devmode
➜  chaincode-docker-devmode git:(master) ✗
{code}
 * Execute the command

{code:java}
➜  chaincode-docker-devmode git:(master) ✗ docker-compose -f docker-compose-simple.yaml up | tee out.log

{code}
and it fails at  
{code:java}
orderer | 2017-11-17 17:02:57.972 UTC [policies] Evaluate -> DEBU 303 Signature set satisfies policy /Channel/Orderer/SampleOrg/Readers [15/1936]
orderer | 2017-11-17 17:02:57.972 UTC [policies] Evaluate -> DEBU 304 == Done Evaluating *cauthdsl.policy Policy /Channel/Orderer/SampleOrg/Readers
orderer | 2017-11-17 17:02:57.972 UTC [policies] Evaluate -> DEBU 305 Signature set satisfies policy /Channel/Orderer/Readers
orderer | 2017-11-17 17:02:57.972 UTC [policies] Evaluate -> DEBU 306 == Done Evaluating *policies.implicitMetaPolicy Policy /Channel/Orderer/Readers
orderer | 2017-11-17 17:02:57.972 UTC [policies] Evaluate -> DEBU 307 Signature set satisfies policy /Channel/Readers
orderer | 2017-11-17 17:02:57.972 UTC [policies] Evaluate -> DEBU 308 == Done Evaluating *policies.implicitMetaPolicy Policy /Channel/Readers
orderer | 2017-11-17 17:02:57.972 UTC [orderer/common/deliver] deliverBlocks -> DEBU 309 [channel: myc] Received seekInfo (0xc42042de40) start:<specified:<> > stop:<specified:<> > from 172.18.0.5:40
946
orderer | 2017-11-17 17:02:57.972 UTC [fsblkstorage] newBlockfileStream -> DEBU 30a newBlockfileStream(): filePath=[/var/hyperledger/production/orderer/chains/myc/blockfile_000000], startOffset=[0]
orderer | 2017-11-17 17:02:57.973 UTC [fsblkstorage] nextBlockBytesAndPlacementInfo -> DEBU 30b Remaining bytes=[12010], Going to peek [8] bytes
orderer | 2017-11-17 17:02:57.973 UTC [fsblkstorage] nextBlockBytesAndPlacementInfo -> DEBU 30c Returning blockbytes - length=[12008], placementInfo={fileNum=[0], startOffset=[0], bytesOffset=[2]}
orderer | 2017-11-17 17:02:57.973 UTC [fsblkstorage] nextBlockBytesAndPlacementInfo -> DEBU 30d blockbytes [12008] read from file [0]
orderer | 2017-11-17 17:02:57.973 UTC [orderer/common/deliver] deliverBlocks -> DEBU 30e [channel: myc] Delivering block for (0xc42042de40) for 172.18.0.5:40946
cli | 2017-11-17 17:02:57.974 UTC [channelCmd] readBlock -> DEBU 020 Received block: 0
orderer | 2017-11-17 17:02:57.974 UTC [orderer/common/deliver] deliverBlocks -> DEBU 30f [channel: myc] Done delivering to 172.18.0.5:40946 for (0xc42042de40)
orderer | 2017-11-17 17:02:57.974 UTC [orderer/common/deliver] Handle -> DEBU 310 Waiting for new SeekInfo from 172.18.0.5:40946
orderer | 2017-11-17 17:02:57.975 UTC [orderer/common/deliver] Handle -> DEBU 311 Attempting to read seek info message from 172.18.0.5:40946
orderer | 2017-11-17 17:02:57.976 UTC [orderer/common/deliver] Handle -> WARN 312 Error reading from 172.18.0.5:40946: rpc error: code = Canceled desc = context canceled
orderer | 2017-11-17 17:02:57.976 UTC [orderer/common/server] func1 -> DEBU 313 Closing Deliver stream
cli | 2017-11-17 17:02:57.980 UTC [main] main -> INFO 021 Exiting.....
cli | 2017-11-17 17:02:58.049 UTC [msp] GetLocalMSP -> DEBU 001 Returning existing local MSP
cli | 2017-11-17 17:02:58.049 UTC [msp] GetDefaultSigningIdentity -> DEBU 002 Obtaining default signing identity
cli | 2017-11-17 17:02:58.052 UTC [grpc] Printf -> DEBU 003 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = ""transport: Error while dialing dial tcp: lo$kup peer on 127.0.0.11:53: no such host""; Reconnecting to {peer:7051 <nil>}
cli | 2017-11-17 17:02:59.054 UTC [grpc] Printf -> DEBU 004 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = ""transport: Error while dialing dial tcp: lo$kup peer on 127.0.0.11:53: no such host""; Reconnecting to {peer:7051 <nil>}
cli | 2017-11-17 17:03:00.761 UTC [grpc] Printf -> DEBU 005 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = ""transport: Error while dialing dial tcp: lo$kup peer on 127.0.0.11:53: no such host""; Reconnecting to {peer:7051 <nil>}
cli | Error: Error getting endorser client channel: error trying to connect to local peer: context deadline exceeded
cli | Usage:
cli | peer channel join [flags]
cli |
cli | Flags:
cli | -b, --blockpath string Path to file containing genesis block
cli |
cli | Global Flags:
cli | --cafile string Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint
cli | --logging-level string Default logging level and overrides, see core.yaml for full syntax
cli | -o, --orderer string Ordering service endpoint
cli | --ordererTLSHostnameOverride string The hostname override to use when validating the TLS connection to the orderer.
cli | --test.coverprofile string Done (default ""coverage.cov"")
cli | --tls Use TLS when communicating with the orderer endpoint
cli | -v, --version Display current version of fabric peer server
cli |
cli exited with code 1{code}
The entire log is attached with the ticket

[^out.log]

 ",,,,,,,,,,,,,,,,,,,,17/Nov/17 5:08 PM;hhimanshu;out.log;https://jira.hyperledger.org/secure/attachment/13363/out.log,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01u5h:,,,,,,,,denyeart,hhimanshu,lishuo5263,nickgaski,,,,,,,,,,,15/Dec/17 10:53 PM;nickgaski;The certs in the chaincode-docker-devmode library expired on Nov 7.  The certs have been refreshed and will not expire until 2027; so this is resolved.,"08/Jan/18 3:29 AM;denyeart;I believe this is resolved, marking Done.  Please re-open if anything remains.",,,,,,,,,,,,,,,,,,,,,,
update nvm use command in fabric-test/pre_setup.sh scrpt,FAB-7021,24002,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,rameshthoomu,rameshthoomu,17/Nov/17 2:37 PM,17/Nov/17 4:53 PM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-quality,,,,0,,,,,,,,,"update nvm use command in fabric-test/pre_setup.sh script

`nvm use --delete-prefix v8.9.0`",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01u4t:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
GetLocalMSP only returns cached local MSP on first invocation,FAB-7020,23996,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mathiasb303,mathiasb303,mathiasb303,17/Nov/17 10:48 AM,08/Jan/18 4:59 PM,26/Apr/18 6:50 AM,26/Nov/17 10:12 AM,,,,,,,,,,fabric-crypto,,,,0,release-planning-1.1,,,,,,,,"In msp/mgmt/mgmt.go, calling GetLocalMSP() only returns a cached local MSP when the function is invoked the first time. Subsequent invocations return a regular, non-cached local bccspMsp instance.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01u3p:,,,,,,,,mathiasb303,,,,,,,,,,master,,,true,17/Nov/17 10:57 AM;mathiasb303;CR: https://gerrit.hyperledger.org/r/15559,,,,,,,,,,,,,,,,,,,,,,,
"""make clean"" command is not enough",FAB-7019,23994,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,nnao,nnao,16/Nov/17 11:21 PM,27/Nov/17 5:32 AM,26/Apr/18 6:50 AM,27/Nov/17 5:32 AM,v1.0.4,v1.1.0-preview,,,,,v1.0.5,v1.1.0-alpha,,fabric-quality,,,,0,,,,,,,,,"I tried ""make docker-images"" command after ""make clean"" command. it doesn't do anything.
 
ubuntu@ubuntu-xenial:~/fabric-test$ make docker-images
....
ubuntu@ubuntu-xenial:~/fabric-test$ make clean
docker ps -aq | xargs -I '{}' docker rm -f '{}'
7354563a564a
3f14546e66b2
...
ubuntu@ubuntu-xenial:~/fabric-test$ make docker-images
make[1]: Entering directory '/opt/gopath/src/github.com/hyperledger/fabric'
make[1]: Nothing to be done for 'docker'.
make[1]: Leaving directory '/opt/gopath/src/github.com/hyperledger/fabric'
make[1]: Entering directory '/opt/gopath/src/github.com/hyperledger/fabric'
make[1]: Nothing to be done for 'native'.
make[1]: Leaving directory '/opt/gopath/src/github.com/hyperledger/fabric'
make[1]: Entering directory '/opt/gopath/src/github.com/hyperledger/fabric-ca'
make[1]: Nothing to be done for 'docker'.
make[1]: Leaving directory '/opt/gopath/src/github.com/hyperledger/fabric-ca'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01u3h:,,,,,,,,nnao,,,,,,,,,,master,,,true,22/Nov/17 9:30 PM;nnao;https://gerrit.hyperledger.org/r/#/c/15555/,,,,,,,,,,,,,,,,,,,,,,,
Missing fabric-ca-fvt images for ca_cluster.py test,FAB-7017,23992,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,nnao,nnao,16/Nov/17 10:53 PM,18/Nov/17 11:30 AM,26/Apr/18 6:50 AM,18/Nov/17 11:30 AM,v1.0.4,v1.1.0-preview,,,,,v1.0.5,v1.1.0-alpha,,fabric-quality,,,,0,,,,,,,,,"ca_client.py test failed because ""make docker-images"" command didn't make fabric-fvt image.

ubuntu@ubuntu-xenial:~/fabric-test/$ make git-update fabric ca docker-images
...
ubuntu@ubuntu-xenial:~/fabric-test/$ cd regression/daily
ubuntu@ubuntu-xenial:~/fabric-test/regression/daily$ py.test -v --junitxml results_cluster.xml ca_cluster.py
==================================================================================== test session starts =====================================================================================
platform linux2 -- Python 2.7.12, pytest-2.8.7, py-1.4.31, pluggy-0.3.1 -- /usr/bin/python
cachedir: .cache
rootdir: /home/ubuntu/fabric-test/regression/daily, inifile:
collected 1 items
 
ca_cluster.py::CaClusterTest::test_FAB6863_BasicCAClustering FAILED
 
----------------------------------------------------- generated xml file: /home/ubuntu/fabric-test/regression/daily/results_cluster.xml ------------------------------------------------------
========================================================================================== FAILURES ==========================================================================================
________________________________________________________________________ CaClusterTest.test_FAB6863_BasicCAClustering ________________________________________________________________________
 
self = <ca_cluster.CaClusterTest testMethod=test_FAB6863_BasicCAClustering>
 
    def test_FAB6863_BasicCAClustering(self):
        createLog = 'mkdir -p /tmp/logs; chmod 777 /tmp/logs'
        startContainer = 'docker run -v /tmp/logs:/tmp -v $PWD/../../fabric-ca:/opt/gopath/src/github.com/hyperledger/fabric-ca hyperledger/fabric-ca-fvt ./scripts/fvt/cluster_test.sh 4 4 8
128'
        command = createLog + ';' + startContainer
>       output = check_output([command], shell=True)
 
ca_cluster.py:17:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
 
popenargs = (['mkdir -p /tmp/logs; chmod 777 /tmp/logs;docker run -v /tmp/logs:/tmp -v $PWD/../../fabric-ca:/opt/gopath/src/github.com/hyperledger/fabric-ca hyperledger/fabric-ca-fvt ./scrip
ts/fvt/cluster_test.sh 4 4 8 128'],)
kwargs = {'shell': True}, process = <subprocess.Popen object at 0x7ff8f99bf790>, output = '', unused_err = None, retcode = 125
cmd = ['mkdir -p /tmp/logs; chmod 777 /tmp/logs;docker run -v /tmp/logs:/tmp -v $PWD/../../fabric-ca:/opt/gopath/src/github.com/hyperledger/fabric-ca hyperledger/fabric-ca-fvt ./scripts/fvt/
cluster_test.sh 4 4 8 128']
 
    def check_output(*popenargs, **kwargs):
        r""""""Run command with arguments and return its output as a byte string.
 
        If the exit code was non-zero it raises a CalledProcessError.  The
        CalledProcessError object will have the return code in the returncode
        attribute and output in the output attribute.
 
        The arguments are the same as for the Popen constructor.  Example:
 
        >>> check_output([""ls"", ""-l"", ""/dev/null""])
        'crw-rw-rw- 1 root root 1, 3 Oct 18  2007 /dev/null\n'
 
        The stdout argument is not allowed as it is used internally.
        To capture standard error in the result, use stderr=STDOUT.
        
                >>> check_output([""/bin/sh"", ""-c"",
                ...               ""ls -l non_existent_file ; exit 0""],
                ...              stderr=STDOUT)
                'ls: non_existent_file: No such file or directory\n'
                """"""
                if 'stdout' in kwargs:
                    raise ValueError('stdout argument not allowed, it will be overridden.')
                process = Popen(stdout=PIPE, *popenargs, **kwargs)
                output, unused_err = process.communicate()
                retcode = process.poll()
                if retcode:
                    cmd = kwargs.get(""args"")
                    if cmd is None:
                        cmd = popenargs[0]
        >           raise CalledProcessError(retcode, cmd, output=output)
        E           CalledProcessError: Command '['mkdir -p /tmp/logs; chmod 777 /tmp/logs;docker run -v /tmp/logs:/tmp -v $PWD/../../fabric-ca:/opt/gopath/src/github.com/hyperledger/fabric-ca hyper
ledger/fabric-ca-fvt ./scripts/fvt/cluster_test.sh 4 4 8 128']' returned non-zero exit status 125
 
/usr/lib/python2.7/subprocess.py:574: CalledProcessError
------------------------------------------------------------------------------------ Captured stderr call ------------------------------------------------------------------------------------
Unable to find image 'hyperledger/fabric-ca-fvt:latest' locally
docker: Error response from daemon: pull access denied for hyperledger/fabric-ca-fvt, repository does not exist or may require 'docker login'.
See 'docker run --help'.
================================================================================== 1 failed in 2.70 seconds ==================================================================================",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01u31:,,,,,,,,nnao,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
fabric-sdk-node builds are failing on latest commits,FAB-7010,23984,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,rameshthoomu,rameshthoomu,16/Nov/17 7:49 PM,27/Nov/17 6:48 PM,26/Apr/18 6:50 AM,27/Nov/17 6:48 PM,,,,,,,v1.1.0-alpha,,,fabric-sdk-node,,,,0,fabric-sdk-node,,,,,,,,"Observed below error while executing fabric-sdk-node e2e tests on latest fabric and fabric-ca commits
{code:java}
 00:14:14.092 not ok 1049 Error: fabric-ca request register failed with errors [[{""code"":43,""message"":""Registrar does not have attribute 'hf.Registrar.Attributes' thus can't register any attributes""}]] at IncomingMessage.<anonymous> (/w/workspace/fabric-sdk-node8-merge-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/fabric-ca-client/lib/FabricCAClientImpl.js:9:26662) at emitNone (events.js:111:20) at IncomingMessage.emit (events.js:208:7) at endReadableNT (_stream_readable.js:1056:12) at _combinedTickCallback (internal/process/next_tick.js:138:11) at process._tickDomainCallback (internal/process/next_tick.js:218:9)
{code}
 

*https://jenkins.hyperledger.org/view/fabric-sdk-node/job/fabric-sdk-node8-merge-x86_64/73/consoleFull*",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01u19:,,,,,,,,harrisob@us.ibm.com,mastersingh24,rameshthoomu,,,,,,,,master,,,true,22/Nov/17 10:40 PM;mastersingh24;[~rameshthoomu] - Is this still an issue?,27/Nov/17 6:48 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/15541/,,,,,,,,,,,,,,,,,,,,,,
fabric-sdk-node documentation is broken https://fabric-sdk-node.github.io/,FAB-7007,23979,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,rameshthoomu,rameshthoomu,16/Nov/17 3:40 PM,27/Nov/17 6:46 PM,26/Apr/18 6:50 AM,27/Nov/17 6:46 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,fabric-sdk-node documentation is broken. https://fabric-sdk-node.github.io/,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01u05:,,,,,,,,mastersingh24,rameshthoomu,,,,,,,,,,,,,22/Nov/17 10:41 PM;mastersingh24;[~rameshthoomu] - What exactly is the issue here?,,,,,,,,,,,,,,,,,,,,,,,
EventHub logs blocks,FAB-7003,23974,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,divyank,divyank,divyank,16/Nov/17 2:13 PM,16/Nov/17 6:00 PM,26/Apr/18 6:50 AM,16/Nov/17 6:00 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,This makes debug logs very hard to follow and provides no valuable debugging information,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01tz1:,,,,,,,,divyank,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"PTE tests not triggering with ""node command not found"" error",FAB-7002,23973,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,suryalnvs,rameshthoomu,rameshthoomu,16/Nov/17 1:20 PM,19/Dec/17 3:37 PM,26/Apr/18 6:50 AM,19/Dec/17 3:37 PM,,,,,,,,,,fabric-quality,,,,0,,,,,,,,,"*node command not found* error while triggering PTE tests using ATD (Ansible Test Driver). Below is the error log:
{code:java}
execution: CITest/FAB-3983-i-TLS/samplecc/samplecc-chan1-FAB-3983-i-TLS.json no python requests ./pte_driver.sh: line 82: node: command not found no java requests ./pte_driver.sh: line 82: node: command not found{code}
[https://jenkins.hyperledger.org/sandbox/job/fabric-test-multihost/lastSuccessfulBuild/artifact/Logs/FAB-3983-i-TLS_1115222129.log]

https://jenkins.hyperledger.org/sandbox/job/fabric-test-multihost/12/console",Jenkins multihost setup,,,,,,,,,,,FAB-6885,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01tyt:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Node.js chaincode does not preserve casing inside peer url,FAB-7001,23969,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,janb87,janb87,janb87,16/Nov/17 11:30 AM,14/Feb/18 9:12 PM,26/Apr/18 6:50 AM,14/Feb/18 9:12 PM,,,,,,,v1.1,,,fabric-chaincode-node,,,,0,,,,,,,,,"We are having issues executing node.js chaincode on our network.

*More info on the issue:*
 # The peer starts up the chaincode container correctly
 # The chaincode container starts up the shim and sends a chat to the peer
 # The peer doesn't receive a message from the chaincode container and times out after waiting for 5 mins

*Problem*

Inside the shim code the peer url is converted to all lowercase. As Docker DNS is case senstive the peer cannot be found and does not receive any messages from the chaincode container.

*Suggested solution:*

Make sure the casing of the peer url is preserved inside the chain code.

The cause is the url.parse method from node.js itself. Which returns a url object.

[https://nodejs.org/api/url.html#url_urlobject_host]  (The {{hostname}} property is the lower-cased host name portion of the {{host}} component _without_ the {{port}} included.)

[https://github.com/hyperledger/fabric-chaincode-node/blob/master/src/lib/handler.js#L689]

[https://github.com/hyperledger/fabric-chaincode-node/blob/master/src/lib/handler.js#L683] 

*More info on our project:*
 # We have generated our own certificates
 # We have successfully deployed Go chaincode using the same configuration
 # We run both Go and Node.js chaincode (instantiated from the same peer)
 # Inside the node.js client we need to use the 'ssl-target-name-override' override (we don't have mutual TLS enabled)

Network setup schema

!ANB_Arch.004.png|thumbnail!

 

Environment variables chaincode container

[^env-variables-chaincode-container] 

[~jimthematrix@gmail.com] [~yacovm]

 ",,,,,,,,,,,,,,,,,,,,16/Nov/17 11:31 AM;janb87;ANB_Arch.004.png;https://jira.hyperledger.org/secure/attachment/13348/ANB_Arch.004.png,16/Nov/17 11:30 AM;janb87;env-variables-chaincode-container;https://jira.hyperledger.org/secure/attachment/13347/env-variables-chaincode-container,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01txx:,,,,,,,,davidkel,denyeart,harrisob@us.ibm.com,janb87,yacovm,,,,,,master,,,true,"16/Nov/17 11:35 AM;janb87;Somewhere in the node.js fabric-shim code we found something about mutual TLS.

https://github.com/hyperledger/fabric-chaincode-node/blob/master/src/lib/chaincode.js#L102

We are not sure what it means. Do we need to configure something on the peer to enable this?","16/Nov/17 11:38 AM;yacovm;[~jimthematrix] I did a hangout with them and they said that they did a *tcpdump* and the peer didn't receive any communication from the chaincode shim at port 7052 so it could be a configuration issue of the node.js chaincode.

[~janb87] I would recommend to also do a *tcpdump* in the chaincode container, and see if it tries to send any packets or not.","16/Nov/17 2:13 PM;janb87;[~jimthematrix] [~yacovm] We figured out the issue. The url was somehow converted into lowercase ""epeer01.vlaanderen.be"" where the DNS in our docker network was case sensitive ""EPeer01.vlaanderen.be"".

Probably in Go the casing was kept that is why it was working there and not in node.js.","16/Nov/17 8:53 PM;yacovm;If you think there is a bug, feel free to submit a change set in gerrit",27/Nov/17 5:29 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/15705/,05/Feb/18 3:06 PM;yacovm;[~jimthematrix] [~harrisob@us.ibm.com] is there any update on this one? ,05/Feb/18 3:09 PM;janb87;Fix can be found here: [https://gerrit.hyperledger.org/r/#/c/16593/],"05/Feb/18 7:32 PM;harrisob@us.ibm.com;[https://gerrit.hyperledger.org/r/#/c/16593/]

 ",14/Feb/18 6:00 PM;denyeart;[~janb87] Could you add a test as recommended in [https://gerrit.hyperledger.org/r/#/c/16593/] ?,14/Feb/18 7:16 PM;janb87;[~denyeart] ok I'll try to add one tomorrow,14/Feb/18 7:57 PM;janb87;[~denyeart] I've added a test: https://gerrit.hyperledger.org/r/#/c/16593/,,,,,,,,,,,,,
[CI] - update baseimage version in packer script,FAB-6999,23967,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,15/Nov/17 11:59 PM,21/Nov/17 2:04 PM,26/Apr/18 6:50 AM,21/Nov/17 2:04 PM,,,,,,,,,,fabric-ci,,,,0,,,,,,,,,update baseimage version in packer script to load this baseimage version by default.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01txh:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,"21/Nov/17 2:04 PM;rameshthoomu;Patch has been submitted and merged. Below baseimage versions instantiate while x86_64 VM is loading.
{code:java}
00:01:22.984 hyperledger/fabric-baseimage   x86_64-0.4.2        76daf60aeff4        8 weeks ago         1.33GB
00:01:22.984 hyperledger/fabric-baseimage   x86_64-0.3.2        c92d9fdee998        2 months ago        1.26GB
00:01:22.985 hyperledger/fabric-baseimage   x86_64-0.3.1        9f2e9ec7c527        6 months ago        1.27GB{code}",,,,,,,,,,,,,,,,,,,,,,,
The inbuilt default profile for fabric-ca stops the ability to specify max-enrollments when registering users ,FAB-6991,23957,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,davidkel,davidkel,15/Nov/17 1:58 PM,04/Dec/17 11:49 AM,26/Apr/18 6:50 AM,27/Nov/17 5:28 AM,v1.0.3,v1.0.4,v1.1,,,,v1.0.5,v1.1,,fabric-ca,,,,0,fabric-ca,,,,,,,,"For the composer dev environment we build a simple fabric with a fabric ca server without a config file and just use admin:adminpw. 

We want to then use this fabric-ca server to provide identities that can only be enrolled once, so as part of the registration of a new identity we specify maxenrollments of 1. However the fabric-ca server overrides this and sets the user to -1 ignoring our request.

I have tried to set the maxenrollments value for the server using environment variables so that I set maxenrollments to a large value. This works but then the server fails with an error because the default bootstrap id of admin has a maxenrollments set to -1 and is not allowed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01tvh:,,,,,,,,davidkel,mastersingh24,smithbk,,,,,,,,release-1.0,master,,true,15/Nov/17 10:02 PM;smithbk;https://gerrit.hyperledger.org/r/15503 (master),04/Dec/17 11:49 AM;mastersingh24;https://gerrit.hyperledger.org/r/15895  (release),,,,,,,,,,,,,,,,,,,,,,
[CI] - unable to pipeout the log files to jenkins WORKSPACE directory,FAB-6990,23952,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,suryalnvs,rameshthoomu,rameshthoomu,15/Nov/17 12:08 PM,17/Nov/17 2:50 PM,26/Apr/18 6:50 AM,17/Nov/17 2:48 PM,,,,,,,,,,fabric-build,fabric-ci,,,0,fabric-ci,,,,,,,,"Configured Ansible project in sandbox environment and after successful run, log files are not piping out to Jenkins WORKSPACE. Got the below error while running Ansible tests
{code:java}
An exception occurred during task execution. To see the full traceback, use -vvv. The error was: IOError: [Errno 21] Is a directory: '/home/ubuntu'
fatal: [10.30.66.6]: FAILED! => {""failed"": true, ""msg"": ""Unexpected failure during module execution."", ""stdout"": """"}
    to retry, use: --limit @/w/workspace/fabric-test-multihost/fabric-test-1/tools/ATD/ptesetup.retry{code}
 ",Jenkins sandbox,,,,,,,,,,,FAB-6885,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01tud:,,,,,,,,rameshthoomu,suryalnvs,,,,,,,,,master,,,true,17/Nov/17 2:50 PM;suryalnvs;https://gerrit.hyperledger.org/r/#/c/15489/,,,,,,,,,,,,,,,,,,,,,,,
single_tx_client orderer sample client failed to run with panic error,FAB-6987,23944,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,meinvzou,meinvzou,15/Nov/17 7:55 AM,04/Dec/17 10:57 AM,26/Apr/18 6:50 AM,27/Nov/17 5:26 AM,v1.0.4,,,,,,v1.0.5,,,fabric-orderer,,,,0,,,,,,,,,"While using fabric/orderer/single_tx_client to communicate with the ordering serveice, It's failed to run with panic error, for the wrong initialization of the SeekPosition.

The code of 
Data: utils.MarshalOrPanic(&ab.SeekInfo\{
                Start: &ab.SeekPosition\{Type: &ab.SeekPosition_Newest\{}},
                Stop: &ab.SeekPosition\{Type: &ab.SeekPosition_Newest\{}},
                Behavior: ab.SeekInfo_BLOCK_UNTIL_READY,
            }),
should be changed to :
Data: utils.MarshalOrPanic(&ab.SeekInfo\{
                Start: &ab.SeekPosition\{Type: &ab.SeekPosition_Newest\{Newest: &ab.SeekNewest\{}}},
                Stop: &ab.SeekPosition\{Type: &ab.SeekPosition_Specified\{Specified: &ab.SeekSpecified\{Number: math.MaxUint64}}},
                Behavior: ab.SeekInfo_BLOCK_UNTIL_READY,
            }),",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01tsl:,,,,,,,,mastersingh24,meinvzou,,,,,,,,,release-1.0,,,true,26/Nov/17 2:52 PM;mastersingh24;https://gerrit.hyperledger.org/r/15713,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca cluster test increase default timeout,FAB-6976,23930,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,rennman,rennman,13/Nov/17 5:34 PM,15/Nov/17 9:10 PM,26/Apr/18 6:50 AM,15/Nov/17 9:10 PM,,,,,,,,,,fabric-ca,fabric-quality,,,0,,,,,,,,,"The cluster test pre-dated the default timeout change, and has an inconsistent value (30s). This is causing some intermittent failures in CI, so eliminating the explicit timeout (-o 30) and taking the new default.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01tph:,,,,,,,,rennman,smithbk,,,,,,,,,master,,,true,15/Nov/17 9:10 PM;smithbk;https://gerrit.hyperledger.org/r/#/c/15441/,,,,,,,,,,,,,,,,,,,,,,,
Unable to create channel in Hyperledger fabric using custom crypto graphic material,FAB-6975,23928,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,Katiyman,Katiyman,13/Nov/17 1:01 PM,18/Apr/18 1:30 AM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-orderer,,,,0,v1.0,,,,,,,,"I am following the below link to run the first network sample using the custom crypto graphic material.

[First Network with custom cryptographic material|https://www.ibm.com/developerworks/cloud/library/cl-build-blockchain-network-with-custom-cryptographic-material-from-your-certificate-authority/index.html]

Post generation of certificates from the Third Party CA. i have places all the certificates in the required dir structure. Following other steps now when i start the docker containers they come up. but when i try to create channell i get below error

{{Error: got unexpected status: BAD_REQUEST -- Error authorizing update: Error validating DeltaSet: Policy for [Groups] /Channel/Application not satisfied: Failed to reach implicit threshold of 1 sub-policies, required 1 remaining}}

when i check the docker logs for the orderer container i find

{{DEBU 29f Checking if identity satisfies ADMIN role for Org1MSP 2017-11-13 07:21:36.533 UTC [cauthdsl] func2 -> DEBU 2a0 0xc420111280 identity 0 does not satisfy principal: **This identity is not an admin** 2017-11-13 07:21:36.533 UTC [cauthdsl] func2 -> DEBU 2a1 0xc420111280 principal evaluation fails 2017-11-13 07:21:36.533 UTC [cauthdsl] func1 -> DEBU 2a2 0xc420111280 gate 1510557696533528831 evaluation fails 2017-11-13 07:21:36.533 UTC [policies] Evaluate -> DEBU 2a3 Signature set did not satisfy policy /Channel/Application/Org1MSP/Admins 2017-11-13 07:21:36.533 UTC [policies] Evaluate -> DEBU 2a4 == Done Evaluating *cauthdsl.policy Policy /Channel/Application/Org1MSP/Admins 2017-11-13 07:21:36.533 UTC [policies] Evaluate -> DEBU 2a5 == Evaluating *cauthdsl.policy Policy /Channel/Application/Org2MSP/Admins == 2017-11-13 07:21:36.533 UTC [cauthdsl] func1 -> DEBU 2a6 0xc420111290 gate 1510557696533664185 evaluation starts 2017-11-13 07:21:36.533 UTC [cauthdsl] func2 -> DEBU 2a7 0xc420111290 signed by 0 principal evaluation starts (used [false])}}

 

 

So I think identity might not be in the admin list, but when I go and check the below paths i find they have same admin cert

/crypto-config/peerOrganizations/org1.aexp.com/users/Admin@org1.aexp.com/msp/admincerts

and

{{crypto-config/peerOrganizations/org1.aexp.com/msp/admincerts }}

If i am supposed to make the identity as admin what steps do i need to follow.

Kindly suggest TIA","[^crypto-config.zip]Ubuntu 16.04 
 HLF v1.0
 [^LogsAndCryptoConfig.zip]",,,,,,,,,,,,,,,,,,,13/Nov/17 12:59 PM;Katiyman;LogsAndCryptoConfig.zip;https://jira.hyperledger.org/secure/attachment/13329/LogsAndCryptoConfig.zip,14/Nov/17 6:32 AM;Katiyman;crypto-config.zip;https://jira.hyperledger.org/secure/attachment/13333/crypto-config.zip,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01tp1:,,,,,,,,Katiyman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
peer sign certs expired but new block signature continues without warning or error,FAB-6973,23926,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,meinvzou,meinvzou,13/Nov/17 8:34 AM,03/Jan/18 2:51 PM,26/Apr/18 6:50 AM,03/Jan/18 2:51 PM,,,,,,,,,,fabric-crypto,,,,0,,,,,,,,,"The fabric/sampleconfig/msp/signcerts/peer.pem expired on 11/11,
Today, I use vscode to debug the orderer and fabric/orderer/sample_clients/broadcast_timestamp to test the block communiction, new block cuts as normal without any error, althogh the sign certificate was expired.
Once a certificate expired, it shoud be no sign made by it?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01tol:,,,,,,,,denyeart,meinvzou,yacovm,,,,,,,,,,,,"13/Nov/17 8:41 AM;yacovm;Worry not, we are fixing the issue https://jira.hyperledger.org/browse/FAB-6969 ","27/Nov/17 5:24 AM;denyeart;[~elli-androulaki] I believe there is a plan for handling expirations gracefully, as well as an existing Jira item.  Assuming that is true, please mark this one as duplicate/Done and link to the Jira work item where expirations will be handled.",03/Jan/18 2:51 PM;yacovm;This was fixed in https://gerrit.hyperledger.org/r/#/c/15887/ (thanks [~blw]) ,,,,,,,,,,,,,,,,,,,,,
GRPC_SSL_CIPHER_SUITES not being set properly in e2e tests,FAB-6971,23923,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,12/Nov/17 10:41 PM,13/Nov/17 3:20 AM,26/Apr/18 6:50 AM,13/Nov/17 3:20 AM,,,,,,,v1.1,,,fabric-sdk-node,,,,0,,,,,,,,,"FAB-5805 introduced a change in the way the SDK loads config files.

Due to the way multiple tests load the fabric-client and due to the fact that the config is somewhat global, this results in the GRPC_SSL_CIPHER_SUITES environment variable not being set properly.  This is most evident running test/integration/e2e.js and this is causing the e2e tests for Fabric to fail",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01tnx:,,,,,,,,mastersingh24,,,,,,,,,,master,,,true,12/Nov/17 10:48 PM;mastersingh24;https://gerrit.hyperledger.org/r/15421,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca-load-tester compilation fails due to change in Revoke API,FAB-6964,23916,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Ratnakar,Ratnakar,Ratnakar,10/Nov/17 5:10 PM,13/Nov/17 5:21 PM,26/Apr/18 6:50 AM,13/Nov/17 5:21 PM,,,,,,,v1.1,,,fabric-ca,,,,0,quality,,,,,,,,"Unable to compile *fabric-ca-load-tester* tool on master branch  commit id: {color:#205081}_236ae62d862ec2f650ccf236418706f2fd8ca982_{color}
{panel}
go build -o fabric-ca-load-tester testClient.go main.go
{panel}
*compilation failure:*
{code:java}
# command-line-arguments
./testClient.go:268:25: multiple-value c.Identity.Revoke() in single-value context{code}
Included this as part of our custome Docker image to use in an automation test, where Docker build fails (with the same above error) on latest master branch
{code:java}
# command-line-arguments
./testClient.go:268:25: multiple-value c.Identity.Revoke() in single-value context
The command '/bin/sh -c git clone https://github.com/hyperledger/fabric-ca && cd fabric-ca && git checkout master && cd test/fabric-ca-load-tester/ && go build -o fabric-ca-load-tester main.go testClient.go' returned a non-zero code: 2{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01tmd:,,,,,,,,Ratnakar,,,,,,,,,,master,,,true,10/Nov/17 6:27 PM;Ratnakar;https://gerrit.hyperledger.org/r/#/c/15377/,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca binary data in log file,FAB-6963,23915,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rennman,rennman,rennman,10/Nov/17 4:45 PM,24/Nov/17 3:40 PM,26/Apr/18 6:50 AM,24/Nov/17 3:40 PM,,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"From a debug statement in genCRLHandler() from  lib/servergencrl.go, the crl is printed in raw binary. This change would print the standard string representation of a []byte stream:
- log.Debugf(""Successfully generated CRL: %s\n"", crl)
+ log.Debugf(""Successfully generated CRL: %v\n"", crl)

Also, there are a couple of debugging statements in 
lib/client.go
lib/ca.go
where the string substitution is not happening properly (the '%s' is printed, and not the value). This would fix those instances.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01tm5:,,,,,,,,rennman,smithbk,,,,,,,,,master,,,true,10/Nov/17 4:48 PM;rennman;link to change set,15/Nov/17 9:12 PM;smithbk;https://gerrit.hyperledger.org/r/#/c/15375/,,,,,,,,,,,,,,,,,,,,,,
Build Your First Network for CouchDB returns error on peer install command,FAB-6962,23913,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,hhimanshu,hhimanshu,10/Nov/17 4:07 PM,17/Nov/17 5:04 PM,26/Apr/18 6:50 AM,17/Nov/17 5:04 PM,,,,,,,,,,fabric-docs,,,,0,,,,,,,,,"Hello there,

I am new to the community and going through the documentation of [https://hyperledger-fabric.readthedocs.io/en/latest/build_network.html.]

In the section for [Using CouchDB|[https://hyperledger-fabric.readthedocs.io/en/latest/build_network.html#using-couchdb],] the page says 
{quote}To use CouchDB instead of the default database (goleveldb), follow the same procedures outlined earlier for generating the artifacts, except when starting the network pass {{docker-compose-couch.yaml}} as well:
{quote}
So, I looked at the {{byfn.sh}}, and tried the following command  
{code:java}
./byfn.sh -m up -s couchdb{code}
I see that everything went on fine, with this command
{code:java}
2017-11-10 16:01:14.540 UTC [main] main -> INFO 008 Exiting.....
===================== Query on PEER3 on channel 'mychannel' is successful =====================

========= All GOOD, BYFN execution completed ===========


_____ _ _ ____
| ____| | \ | | | _ \
| _| | \| | | | | |
| |___ | |\ | | |_| |
|_____| |_| \_| |____/
{code}
 

and all the docker containers are available
{code:java}
➜ first-network git:(master) ✗ docker ps
CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
4c0c1f4d4e76 dev-peer1.org2.example.com-mycc-1.0-26c2ef32838554aac4f7ad6f100aca865e87959c9a126e86d764c8d01f8346ab ""chaincode -peer.a..."" 31 seconds ago Up 27 seconds dev-peer1.org2.example.com-mycc-1.0
cb41a6af2fc6 dev-peer0.org1.example.com-mycc-1.0-384f11f484b9302df90b453200cfb25174305fce8f53f4e94d45ee3b6cab0ce9 ""chaincode -peer.a..."" 47 seconds ago Up 44 seconds dev-peer0.org1.example.com-mycc-1.0
af7ce39d8781 dev-peer0.org2.example.com-mycc-1.0-15b571b3ce849066b7ec74497da3b27e54e0df1345daff3951b94245ce09c42b ""chaincode -peer.a..."" About a minute ago Up About a minute dev-peer0.org2.example.com-mycc-1.0
906d5f0fede6 hyperledger/fabric-tools ""/bin/bash -c './s..."" About a minute ago Up About a minute cli
01cba83fa749 hyperledger/fabric-peer ""peer node start"" About a minute ago Up About a minute 0.0.0.0:10051->7051/tcp, 0.0.0.0:10053->7053/tcp peer1.org2.example.com
45ad3de1de34 hyperledger/fabric-peer ""peer node start"" About a minute ago Up About a minute 0.0.0.0:9051->7051/tcp, 0.0.0.0:9053->7053/tcp peer0.org2.example.com
e0f260c8a927 hyperledger/fabric-peer ""peer node start"" About a minute ago Up About a minute 0.0.0.0:7051->7051/tcp, 0.0.0.0:7053->7053/tcp peer0.org1.example.com
d9cac2989691 hyperledger/fabric-peer ""peer node start"" About a minute ago Up About a minute 0.0.0.0:8051->7051/tcp, 0.0.0.0:8053->7053/tcp peer1.org1.example.com
d92e3cc2c8f5 hyperledger/fabric-couchdb ""tini -- /docker-e..."" About a minute ago Up About a minute 4369/tcp, 9100/tcp, 0.0.0.0:6984->5984/tcp couchdb1
deb2eda2676d hyperledger/fabric-couchdb ""tini -- /docker-e..."" About a minute ago Up About a minute 4369/tcp, 9100/tcp, 0.0.0.0:5984->5984/tcp couchdb0
ba8d1c993688 hyperledger/fabric-couchdb ""tini -- /docker-e..."" About a minute ago Up About a minute 4369/tcp, 9100/tcp, 0.0.0.0:8984->5984/tcp couchdb3
ae13a4f52c8c hyperledger/fabric-orderer ""orderer"" About a minute ago Up About a minute 0.0.0.0:7050->7050/tcp orderer.example.com
17634ba83b4b hyperledger/fabric-couchdb ""tini -- /docker-e..."" About a minute ago Up About a minute 4369/tcp, 9100/tcp, 0.0.0.0:7984->5984/tcp couchdb2
➜ first-network git:(master) ✗{code}
and my current directory and it's contents are
{code:java}
➜ first-network git:(master) ✗ pwd
/Users/harit/bl/sources/hyperledger/fabric-samples/first-network
➜ first-network git:(master) ✗ ls
README.md byfn.sh crypto-config docker-compose-couch.yaml scripts
base channel-artifacts crypto-config.yaml docker-compose-e2e-template.yaml
bin configtx.yaml docker-compose-cli.yaml docker-compose-e2e.yaml
➜ first-network git:(master) ✗{code}
Next, I made sure that the {{CHANNEL_NAME}} is available
{code:java}
➜ first-network git:(master) ✗ echo $CHANNEL_NAME
mychannel{code}
then, I tried to install the chaincode from my local machine as  
{code:java}
peer chaincode install -n marbles -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/marbles02{code}
but it failed with  
{code:java}
panic: Fatal error when initializing core config : error when reading core config file: Unsupported Config Type """"


goroutine 1 [running]:
main.main()
/w/workspace/fabric-binaries-x86_64/gopath/src/github.com/hyperledger/fabric/peer/main.go:90 +0x78b{code}
Next, I reached out on RocketChat and I was recommended to use {{cli}} container to install chaincode
{quote}@hhimanshu - Probably easiest to use the CLI container. The problem is that the marble02 chaincode is not loaded in the CLI container.
Try running
`{{go get github.com/hyperledger/fabric/examples/chaincode/go/marbles02}}` before doing `{{peer chaincode install ...}}
{quote}
So, I tried the same  
{code:java}
root@906d5f0fede6:/opt/gopath/src/github.com/hyperledger/fabric/peer# pwd
/opt/gopath/src/github.com/hyperledger/fabric/peer
root@906d5f0fede6:/opt/gopath/src/github.com/hyperledger/fabric/peer# go get github.com/hyperledger/fabric/examples/chaincode/go/marbles02
package github.com/hyperledger/fabric/examples/chaincode/go/marbles02: /opt/gopath/src/github.com/hyperledger/fabric exists but /opt/gopath/src/github.com/hyperledger/fabric/.git does not - stale checkout?
root@906d5f0fede6:/opt/gopath/src/github.com/hyperledger/fabric/peer#
{code}
No luck :(  

 

I need help with this task. Thanks",,,,,,,,,,,,,,,,,,,,12/Nov/17 4:04 PM;hhimanshu;couchdb_network.log;https://jira.hyperledger.org/secure/attachment/13328/couchdb_network.log,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01tlp:,,,,,,,,hhimanshu,mastersingh24,,,,,,,,,,,,,"11/Nov/17 12:14 PM;mastersingh24;{code:java}
root@906d5f0fede6:/opt/gopath/src/github.com/hyperledger/fabric/peer# pwd
/opt/gopath/src/github.com/hyperledger/fabric/peer
root@906d5f0fede6:/opt/gopath/src/github.com/hyperledger/fabric/peer# go get github.com/hyperledger/fabric/examples/chaincode/go/marbles02
package github.com/hyperledger/fabric/examples/chaincode/go/marbles02: /opt/gopath/src/github.com/hyperledger/fabric exists but /opt/gopath/src/github.com/hyperledger/fabric/.git does not - stale checkout?
root@906d5f0fede6:/opt/gopath/src/github.com/hyperledger/fabric/peer#
{code}

The above is not actually a real problem.  marbles02 should actually now be in the CLI image","12/Nov/17 4:14 PM;hhimanshu;Thanks, [~mastersingh24] for your comment. based on your statement ""actually now be in the CLI image"", I refreshed my github repo and re-performed all the steps again.  

 
{code:java}
➜  first-network git:(master) ✗ git pull origin master
From https://github.com/hyperledger/fabric-samples
 * branch            master     -> FETCH_HEAD
Already up-to-date.
➜  first-network git:(master) ✗
{code}
 
{code:java}
➜  first-network git:(master) ✗ ./byfn.sh -m generate
Generating certs and genesis block for with channel 'mychannel' and CLI timeout of '10000' seconds and CLI delay of '3' seconds
Continue (y/n)? y
proceeding ...
/Users/harit/bl/sources/hyperledger/bin/cryptogen

##########################################################
##### Generate certificates using cryptogen tool #########
##########################################################
org1.example.com
org2.example.com

/Users/harit/bl/sources/hyperledger/bin/configtxgen
##########################################################
#########  Generating Orderer Genesis block ##############
##########################################################
2017-11-13 04:50:47.848 NZDT [common/tools/configtxgen] main -> INFO 001 Loading configuration
2017-11-13 04:50:47.855 NZDT [common/tools/configtxgen] doOutputBlock -> INFO 002 Generating genesis block
2017-11-13 04:50:47.856 NZDT [common/tools/configtxgen] doOutputBlock -> INFO 003 Writing genesis block

#################################################################
### Generating channel configuration transaction 'channel.tx' ###
#################################################################
2017-11-13 04:50:47.871 NZDT [common/tools/configtxgen] main -> INFO 001 Loading configuration
2017-11-13 04:50:47.875 NZDT [common/tools/configtxgen] doOutputChannelCreateTx -> INFO 002 Generating new channel configtx
2017-11-13 04:50:47.876 NZDT [common/tools/configtxgen] doOutputChannelCreateTx -> INFO 003 Writing new channel tx

#################################################################
#######    Generating anchor peer update for Org1MSP   ##########
#################################################################
2017-11-13 04:50:47.889 NZDT [common/tools/configtxgen] main -> INFO 001 Loading configuration
2017-11-13 04:50:47.894 NZDT [common/tools/configtxgen] doOutputAnchorPeersUpdate -> INFO 002 Generating anchor peer update
2017-11-13 04:50:47.894 NZDT [common/tools/configtxgen] doOutputAnchorPeersUpdate -> INFO 003 Writing anchor peer update

#################################################################
#######    Generating anchor peer update for Org2MSP   ##########
#################################################################
2017-11-13 04:50:47.908 NZDT [common/tools/configtxgen] main -> INFO 001 Loading configuration
2017-11-13 04:50:47.914 NZDT [common/tools/configtxgen] doOutputAnchorPeersUpdate -> INFO 002 Generating anchor peer update
2017-11-13 04:50:47.914 NZDT [common/tools/configtxgen] doOutputAnchorPeersUpdate -> INFO 003 Writing anchor peer update
{code}
 
{code:java}
➜  first-network git:(master) ✗ ./byfn.sh -m up -s couchdb > ~/Downloads/couchdb_network.log
Continue (y/n)? y
{code}
see log file attached.  
{code:java}
➜  first-network git:(master) ✗ docker ps
CONTAINER ID        IMAGE                                                                                                  COMMAND                  CREATED              STATUS              PORTS                                              NAMES
0c1b05653416        dev-peer1.org2.example.com-mycc-1.0-26c2ef32838554aac4f7ad6f100aca865e87959c9a126e86d764c8d01f8346ab   ""chaincode -peer.a...""   27 seconds ago       Up 26 seconds                                                          dev-peer1.org2.example.com-mycc-1.0
0b49cbac3032        dev-peer0.org1.example.com-mycc-1.0-384f11f484b9302df90b453200cfb25174305fce8f53f4e94d45ee3b6cab0ce9   ""chaincode -peer.a...""   43 seconds ago       Up 41 seconds                                                          dev-peer0.org1.example.com-mycc-1.0
f33e2ea9cf0b        dev-peer0.org2.example.com-mycc-1.0-15b571b3ce849066b7ec74497da3b27e54e0df1345daff3951b94245ce09c42b   ""chaincode -peer.a...""   58 seconds ago       Up 56 seconds                                                          dev-peer0.org2.example.com-mycc-1.0
1065ffdcf942        hyperledger/fabric-tools                                                                               ""/bin/bash -c './s...""   About a minute ago   Up About a minute                                                      cli
9dadd735eb3a        hyperledger/fabric-peer                                                                                ""peer node start""        About a minute ago   Up About a minute   0.0.0.0:9051->7051/tcp, 0.0.0.0:9053->7053/tcp     peer0.org2.example.com
eaa4c5549690        hyperledger/fabric-peer                                                                                ""peer node start""        About a minute ago   Up About a minute   0.0.0.0:8051->7051/tcp, 0.0.0.0:8053->7053/tcp     peer1.org1.example.com
23c1b62f96e9        hyperledger/fabric-peer                                                                                ""peer node start""        About a minute ago   Up About a minute   0.0.0.0:10051->7051/tcp, 0.0.0.0:10053->7053/tcp   peer1.org2.example.com
b2be48b39dd4        hyperledger/fabric-peer                                                                                ""peer node start""        About a minute ago   Up About a minute   0.0.0.0:7051->7051/tcp, 0.0.0.0:7053->7053/tcp     peer0.org1.example.com
151b6acca22a        hyperledger/fabric-couchdb                                                                             ""tini -- /docker-e...""   About a minute ago   Up About a minute   4369/tcp, 9100/tcp, 0.0.0.0:6984->5984/tcp         couchdb1
7ec644d73014        hyperledger/fabric-couchdb                                                                             ""tini -- /docker-e...""   About a minute ago   Up About a minute   4369/tcp, 9100/tcp, 0.0.0.0:7984->5984/tcp         couchdb2
98703920adfd        hyperledger/fabric-couchdb                                                                             ""tini -- /docker-e...""   About a minute ago   Up About a minute   4369/tcp, 9100/tcp, 0.0.0.0:8984->5984/tcp         couchdb3
ca2debd16466        hyperledger/fabric-couchdb                                                                             ""tini -- /docker-e...""   About a minute ago   Up About a minute   4369/tcp, 9100/tcp, 0.0.0.0:5984->5984/tcp         couchdb0
12bf8fbf3c75        hyperledger/fabric-orderer                                                                             ""orderer""                About a minute ago   Up About a minute   0.0.0.0:7050->7050/tcp                             orderer.example.com
➜  first-network git:(master) ✗
{code}
 
{code:java}
➜  first-network git:(master) ✗ docker exec -it cli bash
root@1065ffdcf942:/opt/gopath/src/github.com/hyperledger/fabric/peer#
{code}
 

Now, I tried running the command again based on the docs [https://hyperledger-fabric.readthedocs.io/en/latest/build_network.html#using-couchdb.]  
 * 
{quote}Install and instantiate the chaincode on {{peer0.org1.example.com}}:
{quote}

{quote} # be sure to modify the $CHANNEL_NAME variable accordingly for the instantiate command peer chaincode install -n marbles -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/marbles02
  
 peer chaincode instantiate -o orderer.example.com:7050 --tls --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem -C $CHANNEL_NAME -n marbles -v 1.0 -c '\{""Args"":[""init""]}' -P ""OR ('Org0MSP.member','Org1MSP.member')""{quote}
Pay close attention to the first command
{code:java}
-p github.com/hyperledger/fabric/examples/chaincode/go/marbles02{code}
But this path does not exist in the {{cli}}, I tried locating it  
{code:java}
root@1065ffdcf942:/opt/gopath/src/github.com/hyperledger/fabric/peer# find / -type d -name ""go""
/opt/gopath/src/github.com/chaincode/chaincode_example02/go
/opt/gopath/src/github.com/chaincode/fabcar/go
/opt/gopath/src/github.com/chaincode/marbles02/go
/opt/go
/opt/go/src/go
/opt/go/src/cmd/go
/opt/go/misc/tour/static/lib/codemirror/mode/go
/opt/go/pkg/linux_amd64/go
/opt/go/pkg/linux_amd64/cmd/go
/opt/go/pkg/linux_amd64_race/go
{code}
and realized that the path in the documentation is not correct anymore (maybe that was the path in previous releases). The correct path therefore, is 
{code:java}
-p github.com/chaincode/chaincode_example02/go
{code}
and I verified that as well  
{code:java}
root@1065ffdcf942:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer chaincode install -n marbles -v 1.0 -p github.com/chaincode/chaincode_example02/go
2017-11-12 15:58:45.093 UTC [msp] GetLocalMSP -> DEBU 001 Returning existing local MSP
2017-11-12 15:58:45.093 UTC [msp] GetDefaultSigningIdentity -> DEBU 002 Obtaining default signing identity
2017-11-12 15:58:45.093 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 003 Using default escc
2017-11-12 15:58:45.093 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 004 Using default vscc
2017-11-12 15:58:45.093 UTC [chaincodeCmd] getChaincodeSpec -> DEBU 005 java chaincode disabled
2017-11-12 15:58:45.130 UTC [golang-platform] getCodeFromFS -> DEBU 006 getCodeFromFS github.com/chaincode/chaincode_example02/go
2017-11-12 15:58:45.251 UTC [golang-platform] func1 -> DEBU 007 Discarding GOROOT package fmt
2017-11-12 15:58:45.251 UTC [golang-platform] func1 -> DEBU 008 Discarding provided package github.com/hyperledger/fabric/core/chaincode/shim
2017-11-12 15:58:45.251 UTC [golang-platform] func1 -> DEBU 009 Discarding provided package github.com/hyperledger/fabric/protos/peer
2017-11-12 15:58:45.251 UTC [golang-platform] func1 -> DEBU 00a Discarding GOROOT package strconv
2017-11-12 15:58:45.253 UTC [golang-platform] GetDeploymentPayload -> DEBU 00b done
2017-11-12 15:58:45.258 UTC [msp/identity] Sign -> DEBU 00c Sign: plaintext: 0A9F070A5B08031A0B08B5DFA1D00510...F619FF0E0000FFFFACD4020D001C0000
2017-11-12 15:58:45.258 UTC [msp/identity] Sign -> DEBU 00d Sign: digest: 2C97AD52D2F2365EC5DBE37698C1967C914E59720B874A833A32D10A4A963163
2017-11-12 15:58:45.261 UTC [chaincodeCmd] install -> DEBU 00e Installed remotely response:<status:200 payload:""OK"" >
2017-11-12 15:58:45.262 UTC [main] main -> INFO 00f Exiting.....
{code}
 

Now, on to the second problem as per the documentation, we need to run the following command
{code:java}
peer chaincode instantiate -o orderer.example.com:7050 --tls --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem -C $CHANNEL_NAME -n marbles -v 1.0 -c '{""Args"":[""init""]}' -P ""OR ('Org0MSP.member','Org1MSP.member')""
{code}
When I run this, I get error  
{code:java}
root@1065ffdcf942:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer chaincode instantiate -o orderer.example.com:7050 --tls --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordere
rOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem -C $CHANNEL_NAME -n marbles -v 1.0 -c '{""Args"":[""init""]}' -P ""OR ('Org0MSP.member','Org1MSP.member')""
2017-11-12 16:10:46.002 UTC [msp] GetLocalMSP -> DEBU 001 Returning existing local MSP
2017-11-12 16:10:46.003 UTC [msp] GetDefaultSigningIdentity -> DEBU 002 Obtaining default signing identity
Error: Must supply value for chaincode name parameter.
Usage:
peer chaincode instantiate [flags]

Flags:
-C, --channelID string The channel on which this command should be executed (default ""testchainid"")
-c, --ctor string Constructor message for the chaincode in JSON format (default ""{}"")
-E, --escc string The name of the endorsement system chaincode to be used for this chaincode
-l, --lang string Language the chaincode is written in (default ""golang"")
-n, --name string Name of the chaincode
-P, --policy string The endorsement policy associated to this chaincode
-v, --version string Version of the chaincode specified in install/instantiate/upgrade commands
-V, --vscc string The name of the verification system chaincode to be used for this chaincode

Global Flags:
--cafile string Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint
--logging-level string Default logging level and overrides, see core.yaml for full syntax
-o, --orderer string Ordering service endpoint
--test.coverprofile string Done (default ""coverage.cov"")
--tls Use TLS when communicating with the orderer endpoint
--transient string Transient map of arguments in JSON encoding
{code}
 

I looked into the {{-n}} flag, which is already set to {{marbles}}.

Now, I need help with two things
 * Fix the second issue related to following command

 
{code:java}
peer chaincode instantiate -o orderer.example.com:7050 --tls --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordere
rOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem -C $CHANNEL_NAME -n marbles -v 1.0 -c '{""Args"":[""init""]}' -P ""OR ('Org0MSP.member','Org1MSP.member')""
{code}
 * Do you agree that the documentation for command 01 needs to be updated with correct path value for parameter {{-p}}

 

Please let me know. Thanks","12/Nov/17 4:27 PM;hhimanshu;Also, I do see that {{marbles}} chaincode is installed
{code:java}
root@1065ffdcf942:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer chaincode list --installed
2017-11-12 16:25:41.742 UTC [msp] GetLocalMSP -> DEBU 001 Returning existing local MSP
2017-11-12 16:25:41.742 UTC [msp] GetDefaultSigningIdentity -> DEBU 002 Obtaining default signing identity
2017-11-12 16:25:41.742 UTC [msp/identity] Sign -> DEBU 003 Sign: plaintext: 0AA0070A5C08031A0C0885ECA1D00510...74616C6C6564636861696E636F646573
2017-11-12 16:25:41.742 UTC [msp/identity] Sign -> DEBU 004 Sign: digest: D8770A9D9D4B8B5A17F0161A165708C2210057C48650D061311F33E1F72F2173
Get installed chaincodes on peer:
name:""marbles"" version:""1.0"" path:""github.com/chaincode/chaincode_example02/go""
name:""mycc"" version:""1.0"" path:""github.com/chaincode/chaincode_example02/go/""
2017-11-12 16:25:41.746 UTC [main] main -> INFO 005 Exiting.....
root@1065ffdcf942:/opt/gopath/src/github.com/hyperledger/fabric/peer#{code}
But, not instantiated
{code:java}
root@1065ffdcf942:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer chaincode list --instantiated
2017-11-12 16:26:25.673 UTC [msp] GetLocalMSP -> DEBU 001 Returning existing local MSP
2017-11-12 16:26:25.673 UTC [msp] GetDefaultSigningIdentity -> DEBU 002 Obtaining default signing identity
2017-11-12 16:26:25.673 UTC [msp/identity] Sign -> DEBU 003 Sign: plaintext: 0AAD070A6908031A0C08B1ECA1D00510...0F0A0D676574636861696E636F646573
2017-11-12 16:26:25.673 UTC [msp/identity] Sign -> DEBU 004 Sign: digest: CC21104863B6F688312497E93E019A689C8D3F576AAF0D5F9493E146D616E72D
Error: Error endorsing chaincode: rpc error: code = Unknown desc = Failed to deserialize creator identity, err MSP Org1MSP is unknown
Usage:
peer chaincode list [flags]

Flags:
-C, --channelID string The channel on which this command should be executed (default ""testchainid"")
--installed Get the installed chaincodes on a peer
--instantiated Get the instantiated chaincodes on a channel

Global Flags:
--cafile string Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint
--logging-level string Default logging level and overrides, see core.yaml for full syntax
-o, --orderer string Ordering service endpoint
--test.coverprofile string Done (default ""coverage.cov"")
--tls Use TLS when communicating with the orderer endpoint
--transient string Transient map of arguments in JSON encoding
-v, --version Display current version of fabric peer server

root@1065ffdcf942:/opt/gopath/src/github.com/hyperledger/fabric/peer#


{code}
This may be irrelevant but I am new to the project and wanted to share my approach to resolving/identifying issues",,,,,,,,,,,,,,,,,,,,,
Importing fabric-ca-client before fabric-client causes different behaviour,FAB-6957,23906,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,dainliff,dainliff,10/Nov/17 5:13 AM,27/Nov/17 6:46 PM,26/Apr/18 6:50 AM,27/Nov/17 6:46 PM,,,,,,,v1.1.0-preview,,,fabric-sdk-node,,,,0,,,,,,,,,"Importing fabric-ca-client before fabric-client causes different behaviour, and in my experience has always caused application errors.
 I think this is likely due to the default global fabric configuration being different between fabric-client and fabric-ca-client.

To replicate
 * go to [https://github.com/hyperledger/fabric-samples/tree/v1.1.0-preview/balance-transfer]
 * Install ""fabric-ca-client:1.1.0-preview""
 * In config.js import fabric-ca-client before fabric-client like so

{code:java}
var util = require('util');
var path = require('path');
require('fabric-ca-client');
var hfc = require('fabric-client');{code}
 * run application and tests, and you should receive the following errors

{code:java}
[2017-11-10 16:08:41.604] [INFO] SampleWebApp - ****************** SERVER STARTED ************************
[2017-11-10 16:08:41.606] [INFO] SampleWebApp - *************** http://localhost:4000 ******************
[2017-11-10 16:08:43.939] [DEBUG] SampleWebApp - ------>>>>>> new request for /users
[2017-11-10 16:08:43.940] [DEBUG] SampleWebApp - End point : /users
[2017-11-10 16:08:43.940] [DEBUG] SampleWebApp - User name : Jim
[2017-11-10 16:08:43.940] [DEBUG] SampleWebApp - Org name : Org1
[2017-11-10 16:08:43.942] [DEBUG] Helper - getClientForOrg - ****** START Org1 undefined
error: [Client.js]: Invalid network configuration due to missing ""network-config-schema"" configuration setting
[2017-11-10 16:08:43.949] [ERROR] Helper - Failed to get registered user: Jim with error: Error: Invalid network configuration due to missing ""network-config-schema"" configuration setting
[2017-11-10 16:08:43.949] [DEBUG] SampleWebApp - Successfully returned from registering the username Jim for organization Org1
[2017-11-10 16:08:43.971] [DEBUG] SampleWebApp - ------>>>>>> new request for /users
[2017-11-10 16:08:43.971] [DEBUG] SampleWebApp - End point : /users
[2017-11-10 16:08:43.971] [DEBUG] SampleWebApp - User name : Barry
[2017-11-10 16:08:43.971] [DEBUG] SampleWebApp - Org name : Org2
[2017-11-10 16:08:43.971] [DEBUG] Helper - getClientForOrg - ****** START Org2 undefined
error: [Client.js]: Invalid network configuration due to missing ""network-config-schema"" configuration setting
[2017-11-10 16:08:43.975] [ERROR] Helper - Failed to get registered user: Barry with error: Error: Invalid network configuration due to missing ""network-config-schema"" configuration setting
[2017-11-10 16:08:43.975] [DEBUG] SampleWebApp - Successfully returned from registering the username Barry for organization Org2{code}
 

I believe that the import order of the two packages should not make a difference, as it's pretty unexpected behaviour. However, In the meantime the documentation should reflect that fabric-ca-client must be imported after fabric-client.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01tkd:,,,,,,,,dainliff,harrisob@us.ibm.com,,,,,,,,,,,,,27/Nov/17 6:46 PM;harrisob@us.ibm.com;see https://gerrit.hyperledger.org/r/#/c/15325/,,,,,,,,,,,,,,,,,,,,,,,
Remove dependency on MSP Client for pre-enrolled user ,FAB-6947,23891,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aleksandar.likic,sandrav,sandrav,09/Nov/17 6:29 PM,14/Feb/18 4:30 PM,26/Apr/18 6:50 AM,14/Feb/18 4:30 PM,,,,,,,,,,fabric-sdk-go,,,,0,alpha3,,,,,,,,Remove dependency on MSP Client for pre-enrolled user (session),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9k1600001,,,,,,,,sandrav,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Daily-test: Gosiip test failure in scenario ""A leader peer goes down by disconnect, comes back up *before* another leader is elected, catches up""",FAB-6940,23880,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,AdnanChoudhury,AdnanChoudhury,AdnanChoudhury,09/Nov/17 3:26 PM,13/Nov/17 8:05 PM,26/Apr/18 6:50 AM,13/Nov/17 6:35 PM,,,,,,,,,,fabric-quality,,,,0,ci_failure,quality,,,,,,,"This scenario or the related scenarios with stop/pause fail with following error messages:
[https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-x86_64/149/testReport/gossip/Gossip%20Service/_FAB_4663___FAB_4664___FAB_4665__A_non_leader_peer_goes_down_by_disconnect__comes_back_up_and_catches_up_eventually__Disconnect_test_may_fail_due_to_FAB_6333______1_3_/]

 
{code:java}
Error Message
Error: initial non-leader peer has already become leader.
Stacktrace
Failing step: Then the initial non-leader peer of ""org1"" has not become the leader ... failed in 0.507s
Location: gossip.feature:133
Assertion Failed: Error: initial non-leader peer has already become leader.
Captured stdout:
testConfigs: configs/95bfda3cc4bd11e7a32efa163ebc964d
[/bin/bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer channel create --file /var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/behavesystest.tx --channelID behavesystest --timeout 120 --orderer orderer0.example.com:7050 ""]: {'cli': ''}
[/bin/bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp peer channel fetch config /var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/behavesystest.block --channelID behavesystest --orderer orderer0.example.com:7050 ""]: {'peer1.org2.example.com': ''}
[/bin/bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp CORE_PEER_LOCALMSPID=org2.example.com CORE_PEER_ID=peer1.org2.example.com CORE_PEER_ADDRESS=peer1.org2.example.com:7051 peer channel join --blockpath /var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/behavesystest.block""]: 
Channel Block Present Result True
[/bin/bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp CORE_PEER_LOCALMSPID=org2.example.com CORE_PEER_ID=peer1.org2.example.com CORE_PEER_ADDRESS=peer1.org2.example.com:7051 peer chaincode install --name mycc --lang GOLANG --version 0 --path github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 --orderer orderer0.example.com:7050 ""]: {'peer1.org2.example.com': '', 'peer0.org1.example.com': '', 'peer1.org1.example.com': '', 'peer0.org2.example.com': ''}
[/bin/bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer chaincode instantiate --name mycc --version 0 --lang GOLANG --channelID behavesystest --ctor '{""Args"": [""init"",""a"",""1000"",""b"",""2000""]}' --orderer orderer0.example.com:7050 ""]: {'peer0.org1.example.com': {'peer0.org1.example.com': ''}}
initial leader is peer1.org1.example.com
Invoke[/bin/bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer1.org1.example.com CORE_PEER_ADDRESS=peer1.org1.example.com:7051 peer chaincode invoke --name mycc --ctor '{""Args"": [""invoke"",""a"",""b"",""10""]}' --channelID behavesystest --orderer orderer0.example.com:7050 ""]: {'peer1.org1.example.com': ''}
Query Exec command: /bin/bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer1.org1.example.com CORE_PEER_ADDRESS=peer1.org1.example.com:7051 peer chaincode query --name mycc --ctor '{""Args"": [""query"",""a""]}' --channelID behavesystest ""
initial non-leader is peer0.org1.example.com
Invoke[/bin/bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer chaincode invoke --name mycc --ctor '{""Args"": [""invoke"",""a"",""b"",""10""]}' --channelID behavesystest --orderer orderer0.example.com:7050 ""]: {'peer0.org1.example.com': ''}
Query Exec command: /bin/bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer chaincode query --name mycc --ctor '{""Args"": [""query"",""a""]}' --channelID behavesystest ""
Invoke[/bin/bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer chaincode invoke --name mycc --ctor '{""Args"": [""invoke"",""a"",""b"",""10""]}' --channelID behavesystest --orderer orderer0.example.com:7050 ""]: {'peer0.org1.example.com': ''}

Standard Output
@scenario.begin

  @daily
  Scenario Outline: [FAB-4673] [FAB-4674] [FAB-4675] A leader peer goes down by disconnect, comes back up *before* another leader is elected, catches up. Disconnect test may fail due to FAB-6333. -- @1.3 
    Given the CORE_LOGGING_GOSSIP environment variable is ""DEBUG"" ... passed in 0.000s
    And I have a bootstrapped fabric network of type kafka ... passed in 30.796s
    When a user sets up a channel ... passed in 37.977s
    And a user deploys chaincode at path ""github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02"" with args [""init"",""a"",""1000"",""b"",""2000""] with name ""mycc"" ... passed in 62.150s
    And I wait ""30"" seconds ... passed in 30.027s
    When a user invokes on the chaincode named ""mycc"" with args [""invoke"",""a"",""b"",""10""] on the initial leader peer of ""org1"" ... passed in 35.894s
    And I wait ""5"" seconds ... passed in 5.005s
    And a user queries on the chaincode named ""mycc"" with args [""query"",""a""] on the initial leader peer of ""org1"" ... passed in 4.682s
    Then a user receives a success response of 990 from the initial leader peer of ""org1"" ... passed in 0.000s
    When a user invokes on the chaincode named ""mycc"" with args [""invoke"",""a"",""b"",""10""] on the initial non-leader peer of ""org1"" ... passed in 5.458s
    And I wait ""5"" seconds ... passed in 5.005s
    And a user queries on the chaincode named ""mycc"" with args [""query"",""a""] on the initial non-leader peer of ""org1"" ... passed in 4.898s
    Then a user receives a success response of 980 from the initial non-leader peer of ""org1"" ... passed in 0.000s
    When the initial leader peer of ""org1"" is taken down by doing a disconnect ... passed in 4.198s
    And I wait ""1"" seconds ... passed in 1.001s
    And a user invokes on the chaincode named ""mycc"" with args [""invoke"",""a"",""b"",""10""] on the initial non-leader peer of ""org1"" ... passed in 3.173s
    And I wait "" 5"" seconds ... passed in 5.005s
    Then the initial non-leader peer of ""org1"" has not become the leader ... failed in 0.507s
    When the initial leader peer of ""org1"" comes back up by doing a connect ... skipped in 0.000s
    And I wait ""20"" seconds ... skipped in 0.000s
    When a user queries on the chaincode named ""mycc"" with args [""query"",""a""] on the initial leader peer of ""org1"" ... skipped in 0.000s
    Then a user receives a success response of 970 from the initial leader peer of ""org1"" ... skipped in 0.000s

@scenario.end
--------------------------------------------------------------------------------

Captured stdout:
testConfigs: configs/95bfda3cc4bd11e7a32efa163ebc964d
[/bin/bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer channel create --file /var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/behavesystest.tx --channelID behavesystest --timeout 120 --orderer orderer0.example.com:7050 ""]: {'cli': ''}
[/bin/bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp peer channel fetch config /var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/behavesystest.block --channelID behavesystest --orderer orderer0.example.com:7050 ""]: {'peer1.org2.example.com': ''}
[/bin/bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp CORE_PEER_LOCALMSPID=org2.example.com CORE_PEER_ID=peer1.org2.example.com CORE_PEER_ADDRESS=peer1.org2.example.com:7051 peer channel join --blockpath /var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/behavesystest.block""]: 
Channel Block Present Result True
[/bin/bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp CORE_PEER_LOCALMSPID=org2.example.com CORE_PEER_ID=peer1.org2.example.com CORE_PEER_ADDRESS=peer1.org2.example.com:7051 peer chaincode install --name mycc --lang GOLANG --version 0 --path github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 --orderer orderer0.example.com:7050 ""]: {'peer1.org2.example.com': '', 'peer0.org1.example.com': '', 'peer1.org1.example.com': '', 'peer0.org2.example.com': ''}
[/bin/bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer chaincode instantiate --name mycc --version 0 --lang GOLANG --channelID behavesystest --ctor '{""Args"": [""init"",""a"",""1000"",""b"",""2000""]}' --orderer orderer0.example.com:7050 ""]: {'peer0.org1.example.com': {'peer0.org1.example.com': ''}}
initial leader is peer1.org1.example.com
Invoke[/bin/bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer1.org1.example.com CORE_PEER_ADDRESS=peer1.org1.example.com:7051 peer chaincode invoke --name mycc --ctor '{""Args"": [""invoke"",""a"",""b"",""10""]}' --channelID behavesystest --orderer orderer0.example.com:7050 ""]: {'peer1.org1.example.com': ''}
Query Exec command: /bin/bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer1.org1.example.com CORE_PEER_ADDRESS=peer1.org1.example.com:7051 peer chaincode query --name mycc --ctor '{""Args"": [""query"",""a""]}' --channelID behavesystest ""
initial non-leader is peer0.org1.example.com
Invoke[/bin/bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer chaincode invoke --name mycc --ctor '{""Args"": [""invoke"",""a"",""b"",""10""]}' --channelID behavesystest --orderer orderer0.example.com:7050 ""]: {'peer0.org1.example.com': ''}
Query Exec command: /bin/bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer chaincode query --name mycc --ctor '{""Args"": [""query"",""a""]}' --channelID behavesystest ""
Invoke[/bin/bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/95bfda3cc4bd11e7a32efa163ebc964d/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer chaincode invoke --name mycc --ctor '{""Args"": [""invoke"",""a"",""b"",""10""]}' --channelID behavesystest --orderer orderer0.example.com:7050 ""]: {'peer0.org1.example.com': ''}

{code}
 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01tfp:,,,,,,,,AdnanChoudhury,,,,,,,,,,master,,,true,13/Nov/17 8:05 PM;AdnanChoudhury;https://gerrit.hyperledger.org/r/#/c/15179/,,,,,,,,,,,,,,,,,,,,,,,
chaincode-docker-devmode not working v1.1-preview,FAB-6934,23868,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,luomin,dainliff,dainliff,09/Nov/17 1:36 AM,14/Feb/18 4:11 PM,26/Apr/18 6:50 AM,14/Feb/18 4:11 PM,,,,,,,v1.1,,,fabric-samples,,,,0,,,,,,,,,"The instructions to run chaincode in development listed here [https://github.com/hyperledger/fabric-samples/blob/v1.1.0-preview/chaincode-docker-devmode/README.rst] are currently failing on the v1.1-preview

There are two issues I've encountered
 # The instructions still refer to the go code being located in chaincode/chaincode_example02/ instead of chaincode/chaincode_example02/go
 So the following instructions are no longer correct [https://github.com/hyperledger/fabric-samples/blob/v1.1.0-preview/chaincode-docker-devmode/README.rst#terminal-2---build--start-the-chaincode]
 # Even after shifting to the correct directory, I encounter the following error trying to execute the chaincode.
{code}
 root@8742ca7c4eed:/opt/gopath/src/chaincode/chaincode_example02/go# CORE_PEER_ADDRESS=peer:7051 CORE_CHAINCODE_ID_NAME=mycc:0 ./go
 2017-11-09 01:29:13.401 UTC [shim] SetupChaincodeLogging -> INFO 001 Chaincode log level not provided; defaulting to: INFO
 2017-11-09 01:29:13.402 UTC [shim] SetupChaincodeLogging -> INFO 002 Chaincode (build level: ) starting up ...
 Error starting Simple chaincode: error sending chaincode REGISTER: EOFroot@8742ca7c4eed:/opt/gopath/src/chaincode/chaincode_example02/go#
{code}


 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01tdh:,,,,,,,,dainliff,denyeart,luomin,yuki-kon,,,,,,,master,,,true,"10/Nov/17 7:35 PM;yuki-kon;Hi [~dainliff]. I found the same error.
The second issue seems like connection error. FAB-6349 changed the port number to start Chaincode in dev mode to ""7052"".
This change should be reflected to https://github.com/hyperledger/fabric-samples/blob/v1.1.0-preview/chaincode-docker-devmode/README.rst#terminal-2---build--start-the-chaincode
","12/Nov/17 4:43 AM;luomin;Hi [~yuki-kon], [~dainliff]  Thank you very much for the info. on this issue.

and could you have a review on [https://gerrit.hyperledger.org/r/#/c/15405/]

 ","13/Nov/17 12:22 AM;dainliff;Hi [~luomin], I've looked over your changes and they seem good for the most part.

I think there may be a small error in the docker-compose-simple.yaml though, so I've left a comment there.","13/Nov/17 12:34 AM;luomin;Hi [~dainliff], Thanks for the review. I agree with your comment.  I've changed my modification back in docker-compose-simple.yaml. ","13/Nov/17 6:16 PM;yuki-kon;Hi [~luomin], thanks for inviting me as a reviewer. I reviewed the CR on gerrit. It looks good to me.","13/Dec/17 1:52 AM;luomin;Hi, [~mastersingh24]. Since this issue has some similarity to -FAB-6349-,   could you have a check of this one and decide merge or not?",08/Jan/18 3:32 AM;denyeart;[~luomin] Could you fix the merge conflict in [https://gerrit.hyperledger.org/r/#/c/15405/] ?,"10/Jan/18 6:13 AM;luomin;Hi [~denyeart]

Thanks for checking here.

I fixed this merge conflict through another submission just now.

[https://gerrit.hyperledger.org/r/#/c/16719/]

The reason for the conflicts is due to the README.rst file was being updated in FAB-7241 before the merge of my previous one.

Thank you to follow this up and merge it.

 

 ","30/Jan/18 1:18 AM;luomin;Hi [~dainliff] and [~yuki-kon]   could you review again [https://gerrit.hyperledger.org/r/#/c/16719/]

Just fixed the merge conflict pointed out by [~denyeart]. 

 

 ",30/Jan/18 1:35 AM;yuki-kon;Hi [~luomin]. I reviewed the CR. It looks good to me.,30/Jan/18 1:37 AM;luomin;Hi [~yuki-kon] Thank you!  ,,,,,,,,,,,,,
Need a way to configure key lengths/algorithm for CSR,FAB-6932,23865,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,rennman,rennman,08/Nov/17 8:41 PM,20/Jan/18 10:17 AM,26/Apr/18 6:50 AM,13/Dec/17 3:21 PM,,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"The users guide explicitly indicates a choice between three well-known ECDSA curves:
   prime256v1
   secp384r1
  secp521r1
by configuring
{code:java}
key:
   algo: ecdsa
   size: 256|384|521{code}

as part of the ca.csr section. However, this apparently has no effect. RSA is not mentioned, but it is a reasonable assumption that it is supported, given the 'algo:' keyword, but that apparently isn't supported either.

The presumed alternative (not described in the document) is to configure in BSSCP (inferring the 'security' parm):
{code:java}
bccsp:
   default: SW
   sw:
      hash: SHA2
      security: 256|384|521{code}
 but this has no effect as well, and there is no obvious way to code the required algorithm.


Lastly, there is an indication in the bccsp code in getBCCSPKeyOpts() that RSA actually *is* supported, as well as multiple key sizes, though secp521r1 is still apparently a TBD:
{code:java}
case ""rsa"":
   switch kr.Size() {
      case 2048: ...
      case 3072: ...
      case 4096: ...
      default:
      // Need to add a way to specify arbitrary RSA key size to bccsp
      return nil, errors.Errorf(""Invalid RSA key size: %d"", kr.Size())
}
case ""ecdsa"":
   switch kr.Size() {
      case 256: ...
      case 384: ...
      case 521: ...
   // Need to add curve P521 to bccsp
   // return &bccsp.ECDSAP512KeyGenOpts{Temporary: false}, nil
     return nil, errors.New(""Unsupported ECDSA key size: 521"")
{code}",,,,,,,,,,,,,,,,,FAB-7590,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01td1:,,,,,,,,aambati,rennman,,,,,,,,,master,,,true,11/Dec/17 2:06 PM;aambati;https://gerrit.hyperledger.org/r/c/16085/,15/Dec/17 11:22 PM;rennman;[Change16241-Unstage key variation test|http://example.com],,,,,,,,,,,,,,,,,,,,,,
Using FABRIC_CA_CLIENT_HOME env var messes up the ORDERER_GENERAL_TLS_ROOTCAS setup,FAB-6930,23863,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,latitiah,latitiah,08/Nov/17 7:43 PM,10/Nov/17 10:17 AM,26/Apr/18 6:50 AM,10/Nov/17 10:17 AM,,,,,,,,,,fabric-ca,,,,0,,,,,,,,,"*commit sha*: 5b815c8

{code}
    orderer0.example.com:
        image: hyperledger/fabric-ca-orderer
        environment:
            - FABRIC_CA_CLIENT_HOME=/var/hyperledger/orderer
            - ORDERER_HOME=/var/hyperledger/orderer
            - ENROLLMENT_URL=https://orderer0:orderer0pw@ca.org0:7054
            - BOOTSTRAP_USER_PASS=orderer0:orderer0pw
            - ORDERER_GENERAL_TLS_PRIVATEKEY=/var/hyperledger/tls/keystore/server.key
            - ORDERER_GENERAL_TLS_CERTIFICATE=/var/hyperledger/tls/signcerts/server.crt
            - ORDERER_GENERAL_TLS_ROOTCAS=[/var/hyperledger/configs/ca.org0-cert.pem,/var/hyperledger/configs/ca.org1-cert.pem,/var/hyperledger/configs/ca.org2-cert.pem]
{code}
causes the following error:
{code}
2017/11/08 17:02:51 [DEBUG] CA Files: [/var/hyperledger/orderer/[/var/hyperledger/configs/ca.org0-cert.pem /var/hyperledger/configs/ca.org1-cert.pem /var/hyperledger/configs/ca.org2-cert.pem]]
2017/11/08 17:02:51 [DEBUG] Client Cert File: 
2017/11/08 17:02:51 [DEBUG] Client Key File: 
2017/11/08 17:02:51 [DEBUG] Client TLS certificate and/or key file not provided
Error: Failed to get client TLS config: Failed to read '/var/hyperledger/orderer/[/var/hyperledger/configs/ca.org0-cert.pem': open /var/hyperledger/orderer/[/var/hyperledger/configs/ca.org0-cert.pem: no such file or directory
{code}

It seems as though the Root CAs list is prefaced with the HOME env var.
The expected CA list would look exactly like the env var setting.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01tcl:,,,,,,,,latitiah,smithbk,,,,,,,,,master,,,true,"08/Nov/17 7:44 PM;latitiah;Workaround docker-compose stanza that made this work as expected:
{code}
    orderer0.example.com:
        image: hyperledger/fabric-ca-orderer
        environment:
            - FABRIC_CA_CLIENT_HOME=/var/hyperledger/orderer
            - ORDERER_HOME=/var/hyperledger/orderer
            - ENROLLMENT_URL=https://orderer0:orderer0pw@ca.org0:7054
            - BOOTSTRAP_USER_PASS=orderer0:orderer0pw
            - ORDERER_GENERAL_TLS_PRIVATEKEY=/var/hyperledger/tls/server.key
            - ORDERER_GENERAL_TLS_CERTIFICATE=/var/hyperledger/tls/server.crt
            - ORDERER_GENERAL_TLS_ROOTCAS=[/var/hyperledger/configs/ca.org0-cert.pem,/var/hyperledger/configs/ca.org1-cert.pem,/var/hyperledger/configs/ca.org2-cert.pem]
            - FABRIC_CA_CLIENT_TLS_CERTFILES=/var/hyperledger/configs/ca.org0-cert.pem,/var/hyperledger/configs/ca.org1-cert.pem,/var/hyperledger/configs/ca.org2-cert.pem
            - ORG_ADMIN_CERT=/var/hyperledger/configs/org0/msp/admincerts/cert.pem
        command: /bin/bash -c 'sleep 10; fabric-ca-client enroll -d --enrollment.profile tls -u $${ENROLLMENT_URL} -M /var/hyperledger/tls --csr.hosts $${ORDERER_HOST}; fabric-ca-client enroll -d -u $${ENROLLMENT_URL} -M $${ORDERER_GENERAL_LOCALMSPDIR}; orderer'
{code}
","09/Nov/17 4:38 PM;smithbk;Latitia, this is really working as designed.  All of the command line arguments which can take a comma-separated list of strings do not expect the ""[]"" brackets surrounding the list.

That said, I'll make a change to make this work as you expect it to, allow ""[]"" brackets to make it more user-friendly.",09/Nov/17 5:23 PM;smithbk;https://gerrit.hyperledger.org/r/15347 [FAB-6930] Permit lists with brackets,,,,,,,,,,,,,,,,,,,,,
chaincode_example02 invoke error,FAB-6921,23849,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,fennelD7,fennelD7,08/Nov/17 7:32 AM,30/Jan/18 11:20 PM,26/Apr/18 6:50 AM,30/Jan/18 11:20 PM,,,,,,,,,,fabric-endorser,,,,0,,,,,,,,,"Fabric env:
setup by https://github.com/ibm-silvergate/netcomposer
All image versions are 1.0.2
2 orgs and 2 peers each


By running chaincode_example02, the invoke func seems not working, after invoking, A/B remain init value. Here are are logs of chaincode container, seems stub.putstate not working correctly in my case.
 
```
docker logs 89c71425c6dd
ex02 Init
Aval = 100, Bval = 200
ex02 Invoke
Query Response:\{""Name"":""a"",""Amount"":""100""}
ex02 Invoke
Aval = 99, Bval = 201
ex02 Invoke
Query Response:\{""Name"":""a"",""Amount"":""100""}
ex02 Invoke
Aval = 99, Bval = 201
```",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01t9h:,,,,,,,,denyeart,fennelD7,muralisr,,,,,,,,,,,,"27/Nov/17 5:12 AM;denyeart;[~fennelD7] You mean it works the first time (reduces value to $99), but not the second time?  Perhaps the second update got invalidated due to being included in the same block (collision on same key)?  Please provide more details.","28/Nov/17 6:15 AM;fennelD7;[~denyeart] Hi, I mean it didn't work both times. When I just invoked and then queried, items' value didn't change, so I looked into the chaincode container's log, as showed above. In the log, we can see chaincode did calculated, item A was 99 in the process, but it didn't put the 99 back into world state successfully. so when I query again, it showed 100, when I invoked again, calculation started from 100, result into 99 again. As no one reported the same bug, it may concern my environment and is rare case.","24/Jan/18 4:41 PM;muralisr;[~fennelD7] this does seem a local environment issue .. or you could be invoking too soon. There are config settings that influence block creation rate. You might be just running into that.

Please close this if you have solved the issue.",30/Jan/18 11:19 PM;muralisr;[~fennelD7] closing this issue. Please reopen if you continue to see this problem,,,,,,,,,,,,,,,,,,,,
Typo in fabric-test Makefile,FAB-6920,23848,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,nnao,nnao,07/Nov/17 11:35 PM,16/Nov/17 1:24 PM,26/Apr/18 6:50 AM,16/Nov/17 1:24 PM,v1.1.0-alpha,,,,,,v1.1.0-preview,,,fabric-quality,,,,0,,,,,,,,,"In Makefile, the usage has an incorrect target name.
 ""pre_setup"" should be ""pre-setup"".

gerrit patchset: https://gerrit.hyperledger.org/r/#/c/15285/",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01t99:,,,,,,,,nnao,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"when instantiate chaincode,got Error: Got unexpected status: NOT_FOUND",FAB-6905,23831,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,XinpuLin,XinpuLin,07/Nov/17 12:30 PM,30/Jan/18 11:21 PM,26/Apr/18 6:50 AM,30/Jan/18 11:21 PM,,,,,,,,,,fabric-endorser,,,,0,,,,,,,,,"ot@1979574f95f3:/opt/gopath/src/chaincodedev# peer chaincode instantiate -n mycc -v 0 -c '\{""Args"":[""a"",""10""]}' -C newchannel -o orderer:7050

2017-11-07 11:57:34.273 UTC [msp] GetLocalMSP -> DEBU 001 Returning existing local MSP

2017-11-07 11:57:34.273 UTC [msp] GetDefaultSigningIdentity -> DEBU 002 Obtaining default signing identity

2017-11-07 11:57:34.276 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 003 Using default escc

2017-11-07 11:57:34.277 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 004 Using default vscc

2017-11-07 11:57:34.279 UTC [msp/identity] Sign -> DEBU 005 Sign: plaintext: 0A8E070A6808031A0C08AEBF86D00510...31300A000A04657363630A0476736363 

2017-11-07 11:57:34.279 UTC [msp/identity] Sign -> DEBU 006 Sign: digest: 92581821FC128F7ECBA5B004589AB28AE2CF9D7AA7C38C082C620719CDF776C2 

2017-11-07 11:57:34.297 UTC [msp/identity] Sign -> DEBU 007 Sign: plaintext: 0A8E070A6808031A0C08AEBF86D00510...C9A949E2B2A28CD17BC327E07DE8EB1D 

2017-11-07 11:57:34.297 UTC [msp/identity] Sign -> DEBU 008 Sign: digest: 19F012D9471F8C661A3713A754D68E45E834FF00B6FAB6A431DAE296C42A9267 

Error: Got unexpected status: NOT_FOUND",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01t5x:,,,,,,,,muralisr,XinpuLin,,,,,,,,,,,,,"24/Jan/18 5:05 PM;muralisr;{code:java}
Error: Got unexpected status: NOT_FOUND
{code}

[~XinpuLin]  the above is likely due to misconfiguration and the error is reported by the orderer when submitting the transaction. Please make sure configuration (especially MSP configuration) is correct.",30/Jan/18 11:21 PM;muralisr;[~XinpuLin] please reopen if you continue to have this issue.,,,,,,,,,,,,,,,,,,,,,,
"Inconsistency in most recent ""Writing Your First Application"" and its source code",FAB-6902,23828,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,luomin,luomin,luomin,07/Nov/17 11:54 AM,08/Dec/17 12:14 PM,26/Apr/18 6:50 AM,27/Nov/17 7:48 AM,,,,,,,v1.1,,,fabric-docs,fabric-samples,,,0,Usability,,,,,,,,"the most recent update ""[FAB-6568] Fabcar Documentation"" introduced some inconsistency with source code. this patch make them consistent..",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01t59:,,,,,,,,denyeart,luomin,,,,,,,,,master,,,true,"08/Nov/17 4:47 AM;luomin;[https://gerrit.hyperledger.org/r/#/c/15241/]

https://gerrit.hyperledger.org/r/#/c/15239/",27/Nov/17 5:07 AM;denyeart;Note - the two CRs mentioned in prior comment correspond to the two subtasks.,,,,,,,,,,,,,,,,,,,,,,
Affiliation_path is wrong in swagger should be just affilation ,FAB-6899,23821,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,rickr,rickr,06/Nov/17 7:28 PM,09/Nov/17 4:28 PM,26/Apr/18 6:50 AM,09/Nov/17 4:28 PM,v1.1,,,,,,v1.1,,,fabric-ca,,,,0,sdk,,,,,,,,"[https://github.com/hyperledger/fabric-ca/blob/26110c00ffe5409f27e6de2079cd98e9d1be7a3d/swagger/swagger-fabric-ca.json#L452]

 

 

[https://github.com/hyperledger/fabric-ca/blob/26110c00ffe5409f27e6de2079cd98e9d1be7a3d/swagger/swagger-fabric-ca.json#L416]

 

Also wrong that it's a required field

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01t45:,,,,,,,,rickr,smithbk,,,,,,,,,master,,,true,06/Nov/17 8:25 PM;smithbk;https://gerrit.hyperledger.org/r/15233 [FAB-6899] Fix affiliation in swagger doc,,,,,,,,,,,,,,,,,,,,,,,
Channel artifacts are getting mounted into the cli container even after the network is brought down,FAB-6895,23817,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Ratnakar,rohitadivi,rohitadivi,06/Nov/17 4:35 PM,09/Nov/17 7:14 PM,26/Apr/18 6:50 AM,06/Nov/17 8:53 PM,v1.0.0,v1.1,,,,,v1.1,,,fabric-samples,,,,0,quality,,,,,,,,Channel artifacts are getting mounted into the cli container even after the network is brought down and up again.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01t39:,,,,,,,,mastersingh24,rohitadivi,,,,,,,,,master,,,true,06/Nov/17 6:53 PM;mastersingh24;https://gerrit.hyperledger.org/r/15229,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - update with latest protos,FAB-6882,23729,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,02/Nov/17 10:03 PM,03/Nov/17 3:05 AM,26/Apr/18 6:50 AM,03/Nov/17 3:05 AM,,,,,,,v1.1,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"Update with latest protos, does not require any code changes",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01szp:,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Update documentation to reflect changes with configtxgen,FAB-6879,23726,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,Asara,Asara,02/Nov/17 5:58 PM,04/Dec/17 7:53 PM,26/Apr/18 6:50 AM,27/Nov/17 5:02 AM,v1.0.0,v1.0.1,v1.0.2,v1.0.3,v1.0.4,v1.1,v1.0.5,v1.1,,fabric-docs,,,,0,configtxgen,,,,,,,,"[http://hyperledger-fabric.readthedocs.io/en/latest/configtxgen.html#bootstrapping-the-orderer]

This page implies that running `configtxgen -profile <profile_name>` will create the genesis block, but it is now required to use the -outputBlock flag as well.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01sz1:,,,,,,,,Asara,denyeart,jyellick,,,,,,,,release-1.0,master,,true,"04/Nov/17 12:38 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/15153/

[~jyellick] Does the doc change need to be ported to the 1.0 stable (release) docs?  Or is this change specific to 1.1 (master)?","06/Nov/17 4:25 AM;jyellick;This should be back ported to v1.0.x (as I attempted to indicate with the v1.0.5 fix version tag, and the v1.0.\{0,1,2,3,4} affects versions tags).",27/Nov/17 5:02 AM;denyeart;Marking as Done.  It will be picked up for inclusion in 1.0.5 based on the Fix Version.,,,,,,,,,,,,,,,,,,,,,
A Failed result(test_FAB6490_Using_FCA_With_ACL_Permissioning)prevents other tests from running as expected.,FAB-6878,23721,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,sambhavdutt,sambhavdutt,02/Nov/17 4:03 PM,11/Dec/17 5:08 PM,26/Apr/18 6:50 AM,11/Dec/17 5:08 PM,,,,,,,,,,fabric-quality,,,,0,ci_failure,,,,,,,,"The test case *test_FAB6490_Using_FCA_With_ACL_Permissioning* prevents all the following tests from running. Can there be a fix(for now and later) that allows the remaining tests to run gracefully without having to depend on a failed test. Doing this would allow all the tests to run irrespective of their dependent tests.

Build Log

https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-x86_64/129/testReport/acl_happy_path/ACL/test_FAB6490_Using_FCA_With_ACL_Permissioning/

Commits

FABRIC_COMMIT ===========> 75709bc
CA COMMIT ========> 2431f12",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01sxx:,,,,,,,,sambhavdutt,,,,,,,,,,,,,,"13/Nov/17 1:53 PM;sambhavdutt;Build 153 fails with a permissioning error again, the following errors were observed

12:02:02     And a user deploys chaincode at path ""github.com/hyperledger/fabric/examples/chaincode/go/enccc_example"" with args [""init"", """"] with name ""mycc""                                                                                                                                                                                                                                                                                                                                                                              # steps/endorser_impl.py:102
12:02:02 2017-11-11 12:02:02.298 UTC [common/tools/configtxgen] main -> INFO 001 Loading configuration
12:02:02 2017-11-11 12:02:02.333 UTC [common/tools/configtxgen] doOutputChannelCreateTx -> INFO 002 Generating new channel configtx
12:02:02 2017-11-11 12:02:02.334 UTC [common/tools/configtxgen] doOutputChannelCreateTx -> INFO 003 Writing new channel tx
12:02:16 $ ssh-agent -k
12:02:16 unset SSH_AUTH_SOCK;
12:02:16 unset SSH_AGENT_PID;
12:02:16 echo Agent pid 2098 killed;
12:02:16 [ssh-agent] Stopped.
12:02:16 Build was aborted
12:02:16 Aborted by ryjones

*Build Log*

https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-x86_64/153/console

*Commits*

FABRIC_COMMIT ===========> 7619dce
CA COMMIT ========> 87a2113",,,,,,,,,,,,,,,,,,,,,,,
Makefile is not building the cryptogen and configtxgen binaries,FAB-6875,23718,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,latitiah,latitiah,latitiah,02/Nov/17 3:57 PM,02/Nov/17 4:50 PM,26/Apr/18 6:50 AM,02/Nov/17 4:50 PM,WON'T FIX,,,,,,,,,fabric-quality,,,,0,ci_failure,,,,,,,,"The jenkins test runs lately have not been executing the system behave tests. The build process does not have cryptogen and configtxgen included. 
{code}
09:04:20       Captured stdout:
09:04:20       Unable to generate crypto material: [Errno 2] No such file or directory
{code}

https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-x86_64/129/console",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01sx9:,,,,,,,,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric CA needs to restrict OUs in ecerts,FAB-6871,23713,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,smithbk,smithbk,02/Nov/17 2:20 PM,05/Jan/18 7:50 PM,26/Apr/18 6:50 AM,05/Jan/18 7:50 PM,,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"Now that access control decisions are being made by fabric based on OUs, we must restrict OUs in ecerts.

For example, Alice registers Bob to be a client with the fabric-ca-server;
however, Bob enrolls and specifies the OU for a peer in the CSR.
This means Bob is authorized as a peer by MSP even though Alice intended Bob
to have a client identity with no peer authorization.
So this means the fabric-ca-server must have a way of limiting what Bob can specify
in the CSR.

OUs will be derived from the type and affiliation which is already restricted.
For example, if an identity is registered as type ""peer"" and affiliation ""a.b"",
the OUs would be ""OU=b,OU=a,OU=peer"" (where ""peer"" is the root of the OU hierarchy).
This means any OUs in the enrollment request will be ignored.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01sw5:,,,,,,,,denyeart,JonathanLevi,mastersingh24,smithbk,,,,,,,master,,,true,"02/Nov/17 3:33 PM;mastersingh24;[~smithbk] - oddly enough, this is exactly what I was thinking as well.  It makes sense, uses existing ""access controls"" which are already in place as well.

The only thing I was thinking about is whether or not we would have to have a common base DN that would be prepended to the OU piece, but I think that would be a future requirement that we could look at if anyone asks",02/Nov/17 5:17 PM;smithbk;https://gerrit.hyperledger.org/r/15139 [FAB-6871] Set OUs in ecerts,06/Nov/17 8:04 PM;JonathanLevi;What's the Fix Version here? 1.0.5 or for 1.1 ?,06/Nov/17 8:30 PM;smithbk;I set Fix Version field to 1.1,"16/Nov/17 3:36 PM;smithbk;There is an issue in cfssl related to this though it is still usable in many/most scenarios.
See https://github.com/cloudflare/cfssl/issues/824 for information.
I plan to fix this in cfssl prior to v1.1, but am subject to response time from cfssl folks.",27/Nov/17 5:00 AM;denyeart;[~smithbk] https://gerrit.hyperledger.org/r/#/c/15139/ is Merged.  Can this be marked Done or something else is needed?,,,,,,,,,,,,,,,,,,
"Ledger index recovery messages in orderer log, when recovery is not needed",FAB-6853,23242,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,manish-sethi,denyeart,denyeart,01/Nov/17 8:59 AM,19/Dec/17 3:22 AM,26/Apr/18 6:50 AM,27/Nov/17 7:14 AM,,,,,,,v1.0.5,v1.1,,fabric-ledger,,,,0,,,,,,,,," Ledger index recovery messages were recently added in FAB-6779 to provide information when ledger index recovery process starts.  Unfortunately these messages also show up in a new orderer with no data, since the index cannot be found for the system channel. These messages also show up each time a new channel is created in orderer. The messages are benign but confusing and should be suppressed or clarified in these scenarios.

 

2017-11-01 12:40:22.418 CST [fsblkstorage] newBlockfileMgr -> INFO 002 No info about blocks file found in the db.
   This could happen if this is the first time the ledger is constructed or the index is dropped.
   Scanning blocks dir for the latest info
 2017-11-01 12:40:22.418 CST [fsblkstorage] constructCheckpointInfoFromBlockFiles -> INFO 003 No block file found
 2017-11-01 12:40:22.418 CST [fsblkstorage] newBlockfileMgr -> INFO 004 Info constructed by scanning the blocks dir = (*fsblkstorage.checkpointInfo)(0xc420374420)(latestFileChunkSuffixNum=[0], latestFileChunksize=[0], isChainEmpty=[true], lastBlockNumber=[0])2017-11-01 12:40:22.422 CST [fsblkstorage] syncIndex -> INFO 005 No block indexed, Last block present in block files=[0]
 2017-11-01 12:40:22.422 CST [fsblkstorage] syncIndex -> INFO 006 Start building index from block [0]
 2017-11-01 12:40:22.422 CST [fsblkstorage] syncIndex -> INFO 007 Finished building index. Last block indexed [0]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:zbr,,,,,,,,denyeart,,,,,,,,,,release-1.0,master,,true,14/Nov/17 11:43 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/15075/,"14/Nov/17 11:46 PM;denyeart;[~mastersingh24] We got a little over eager with the Info statements during the rush to get a fix into 1.0.4.  It has caused some confusion with people thinking orderer is in a bad state.  This change pulls back the info/debug logging to a more reasonable level, I recommend it get cherry picked into 1.0.5.",,,,,,,,,,,,,,,,,,,,,,
update pre-setup.sh script path in makefile,FAB-6850,23239,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,rameshthoomu,rameshthoomu,01/Nov/17 2:56 AM,02/Nov/17 4:07 PM,26/Apr/18 6:50 AM,02/Nov/17 4:07 PM,,,,,,,,,,fabric-quality,,,,0,,,,,,,,,update pre-setup.sh script path in makefile,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01sr9:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,02/Nov/17 4:07 PM;rameshthoomu;patch has been submitted and merged.,,,,,,,,,,,,,,,,,,,,,,,
[CI] - remove govendor commands from fabric-test CI scripts and update 1.0.4 release version in release tests,FAB-6849,23238,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,01/Nov/17 1:00 AM,01/Nov/17 1:55 PM,26/Apr/18 6:50 AM,01/Nov/17 1:55 PM,,,,,,,,,,fabric-ci,,,,0,,,,,,,,,[CI] - remove govendor commands from fabric-test CI scripts and update 1.0.4 release version in release tests,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01sr1:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,01/Nov/17 1:55 PM;rameshthoomu;patch has been submitted and merged. govendor set has been created in behave framework before run the tests.,,,,,,,,,,,,,,,,,,,,,,,
Fix broken master because of idemix test,FAB-6845,23233,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,31/Oct/17 9:00 PM,01/Nov/17 10:31 AM,26/Apr/18 6:50 AM,01/Nov/17 10:31 AM,,,,,,,,,,fabric-crypto,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01sq5:,,,,,,,,jyellick,mastersingh24,,,,,,,,,master,,,true,01/Nov/17 10:31 AM;mastersingh24;https://gerrit.hyperledger.org/r/15035,,,,,,,,,,,,,,,,,,,,,,,
Behave Test Framework: Encryption tests that take transient args are currently failing,FAB-6833,23221,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,latitiah,Nishi,Nishi,31/Oct/17 6:01 PM,01/Nov/17 5:59 PM,26/Apr/18 6:50 AM,01/Nov/17 5:59 PM,,,,,,,,,,fabric-quality,,,,0,quality,,,,,,,,"Regression: behave -n 6439 (from chaincodes.feature) failed this morning.

This ran successfully yesterday.

 

Fabric-Test commit level: *98c36bc08cee88462a21b6f05de027f83ab4e377*

Fabric commit level: *16d7f50ea3db70904f7e3690c3a0f27f3a88f076*",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01snh:,,,,,,,,Nishi,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Python 3 syntax error in bddtests/steps/bootstrap_util.py,FAB-6831,23214,Bug,Invalid,FAB,Fabric,software,ChristopherFerris,,,Medium,,ChristopherFerris,cclauss,cclauss,31/Oct/17 3:48 PM,02/Apr/18 9:29 PM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-quality,,,,0,,,,,,,,,"In Python 3, an explicit tuple is not a valid function parameter. This would work in Python 2 but is no longer allowed in Python 3.

flake8 testing of [https://github.com/hyperledger/fabric] on Python 3.6.3

$ *time flake8 . --count --select=E901,E999,F821,F822,F823 --show-source --statistics*

{{
./bddtests/steps/bootstrap_util.py:492:67: E999 SyntaxError: invalid syntax
 def addSignatureToSignedConfigItem(cls, configUpdateEnvelope, (entity, mspId, cert)):
 ^
 }}

The function signature should be changed to:
 {{

    def addSignatureToSignedConfigItem(cls, configUpdateEnvelope, entity_mspId_cert):
 }}
 And the first line of the function body should be:
 {{
        entity, mspId, cert = entity_mspId_cert
 }}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01slx:,,,,,,,,cclauss,ChristopherFerris,,,,,,,,,,,,,02/Apr/18 9:29 PM;ChristopherFerris;This can probably be closed since we deleted bddtests from the fabric repo,,,,,,,,,,,,,,,,,,,,,,,
typo in peer/chaincode/,FAB-6818,23200,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,n-horiguchi,n-horiguchi,n-horiguchi,31/Oct/17 6:26 AM,02/Nov/17 3:00 PM,26/Apr/18 6:50 AM,02/Nov/17 3:00 PM,v1.0.0,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,"We have a variable policyMarhsalled in peer/chaincode/chaincode.go, which is apparently a typo. This is not a critical issue, but someone might be confused when grepping source code. So please fix it.",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01sit:,,,,,,,,jeffgarratt,n-horiguchi,,,,,,,,,master,,,true,"31/Oct/17 6:33 AM;n-horiguchi;Created a CR: https://gerrit.hyperledger.org/r/#/c/14975/
",01/Nov/17 3:29 PM;jeffgarratt;[~n-horiguchi] Your CR failed job builder.  I posted a reverify.,02/Nov/17 2:21 PM;jeffgarratt;[~n-horiguchi] Finally got CI to pass.  Ready for review and merge.  https://gerrit.hyperledger.org/r/#/c/14975/,,,,,,,,,,,,,,,,,,,,,
Incorrect validation for channel policy during channel-2-channel access by Peer,FAB-6816,23000,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,rhegde,rhegde,31/Oct/17 2:10 AM,02/Feb/18 4:39 PM,26/Apr/18 6:50 AM,02/Feb/18 4:39 PM,,,,,,,,,,fabric-endorser,,,,0,,,,,,,,,"I have a public channel with write permission to Org1 and Read permission to rest all Organizations, hence the channel configuration policy. A different chaincode installed on a channel (say channel-1) performs a channel-2-channel query access on the public channel (within the same peer node).

It is seen during channel-2-channel access, the write policy is evaluated and hence channel-2-channel query access fails. Problem Example - Org2 is authorized for write-operation on channel-1 but not on public channel. This endorsement proposal is marked as failed due to write-access check on public channel.

As far as we rememberer, there was always read-access support enabled by Hyperledger Fabric during c-2-c access operations. Is this a defect?

ERRO 006 Failed to invoke chaincode. Got error: Failed evaluating policy on signed data during check policy on channel [public] with policy [/Channel/Application/Writers]: [Failed to reach implicit threshold of 1 sub-policies, required 1 remaining]

Note: I tried even performing writes in our public chaincode during c-2-c operation (after giving write permission on public channel to Org2) but this was never see in the public ledger.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01sid:,,,,,,,,denyeart,mastersingh24,muralisr,rhegde,yacovm,,,,,,,,,,"01/Nov/17 3:36 PM;mastersingh24;[~rhegde] As far as I know, it's always been the case that in order to invoke or query chaincode (both of which are sending endorsement requests) on a given channel you need to be in the Channel/Application/Writers group.

[~muralisr] - anything I may be missing?","01/Nov/17 3:48 PM;muralisr;[~mastersingh24] that's right. This behavior of requiring Writers has for both initial proposal and C-2-C calls has not changed. 

[~rhegde] in v1.1 (not the preview or alpha, etc.. but the actual release) the ""resource based ACL"" will kick in and help you set ACLs on these resources in a flexible manner (details in https://jira.hyperledger.org/browse/FAB-3621).","02/Nov/17 6:44 PM;rhegde;I thought channel-2-channel(c-2-c) calls are always read-only and they wouldn't have write-access.  This considering the read-write-operations from chaincode execution are not part RW-set.

I did tried doing a write operation on the receiver chaincode and that does not get reflected on the ledger. Good!.

Does this not mean - we would require to validate read policy for c-2-c access and this should qualify to use the read-policy?

I have described a scenario in the description which as per current policy check to add all organization forcibly with write permission. Currently we have set the endorsement policy to the TRUE writer of the channel to mitigate this risk. The bad part, there is transaction in the ledger with rejected state.",27/Nov/17 4:57 AM;denyeart;[~muralisr] Can you respond to latest comment?,"28/Jan/18 1:30 AM;muralisr;[~rhegde] hope this is still useful to comment on ? 

_Does this not mean - we would require to validate read policy for c-2-c access and this should qualify to use the read-policy?_

The original intent was to treat this uniformly with the external chaincode call which always requirea ChannelWriters access. The Resource Base ACL mention in the previous comment hopefully will allow you to define more flexible policies (you can associate your own policy for CC-2-CC calls ).

 ","01/Feb/18 12:03 PM;yacovm;can we close this, [~rhegde] , [~mastersingh24] , [~muralisr] ? ","02/Feb/18 4:27 PM;rhegde;Current check on write-policy is a defect if the chaincode tries to access another chaincode installed on a separate channel (named: public).

In our case to mitigate this problem, all organizations will be provided with write authorization to the public channel's with endorsement policy guaranteeing a ledger transaction will be only accepted (valid) from certain organizations.

The same workaround can be used for such defect however this can lead to a case where organization can spam the public channel. There are further ways to protect and monitor this not-required spamming activity.

We are ok with this workaround and as per the above comment since there exist a way in future release - we are ok to close this issue.",,,,,,,,,,,,,,,,,
peer channel fetch command is not working as expected when TLS is enabled,FAB-6815,22955,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,Ratnakar,Ratnakar,30/Oct/17 9:58 PM,05/Nov/17 8:59 PM,26/Apr/18 6:50 AM,05/Nov/17 8:59 PM,,,,,,,,,,fabric-peer,,,,0,peer,quality,,,,,,,"peer channel fetch command is not working as expected when TLS is enabled.

Unable to write the fetched block to an outputfile, as per the help messages .
{code:java}
 peer channel fetch --help
 Fetch a specified block, writing it to a file.

 Usage:
   peer channel fetch <newest|oldest|config|(number)> [outputfile] [flags]

 Flags:
   -c, --channelID string   In case of a newChain command, the channel ID to create.
{code}
Fails with Error: *trailing args detected*
{code:java}
peer channel fetch 0 genesis_block.pb -o orderer.example.com:7050 -c ""mychannel"" --tls $CORE_PEER_TLS_ENABLED --cafile $ORDERER_CA
2017-10-30 21:18:55.304 UTC [msp] GetLocalMSP -> DEBU 001 Returning existing local MSP
2017-10-30 21:18:55.304 UTC [msp] GetDefaultSigningIdentity -> DEBU 002 Obtaining default signing identity
2017-10-30 21:18:55.307 UTC [channelCmd] InitCmdFactory -> INFO 003 Endorser and orderer connections initialized
Error: trailing args detected
Usage:
  peer channel fetch <newest|oldest|config|(number)> [outputfile] [flags]

Flags:
  -c, --channelID string   In case of a newChain command, the channel ID to create.

Global Flags:
      --cafile string                       Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint
      --logging-level string                Default logging level and overrides, see core.yaml for full syntax
  -o, --orderer string                      Ordering service endpoint
      --ordererTLSHostnameOverride string   The hostname override to use when validating the TLS connection to the orderer.
      --test.coverprofile string            Done (default ""coverage.cov"")
      --tls                                 Use TLS when communicating with the orderer endpoint
  -v, --version                             Display current version of fabric peer server
{code}
The workaround used here is to either ignore the output file and let it write to a file *true*
for example one such instance [here|https://github.com/hyperledger/fabric/blob/master/examples/e2e_cli/scripts/script.sh#L75]
{code:java}
peer channel fetch 0 -o orderer.example.com:7050 -c ""mychannel"" --tls $CORE_PEER_TLS_ENABLED --cafile $ORDERER_CA
{code}
Or to Ignore *--tls* option argument 'true'
{code:java}
peer channel fetch 0 genesis_block.pb -o orderer.example.com:7050 -c ""mychannel"" --tls --cafile $ORDERER_CA
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01si5:,,,,,,,,jeffgarratt,nnao,Ratnakar,,,,,,,,master,,,true,"31/Oct/17 4:08 PM;Ratnakar; This is not  a new breakage and doesn't block any of the existing tests. Issue is there from Fabric V 1.0.

 ","02/Nov/17 7:00 PM;nnao;[~Ratnakar]  I think this is a bug of script.sh, not of peer command. “--tls” option does not require any argument.
The command “peer channel” accepts only two arguments, but, in this case, the command recognized $CORE_PEER_TLS_ENABLES as 3rd argument of itself.",02/Nov/17 8:59 PM;nnao;https://gerrit.hyperledger.org/r/#/c/15149/,02/Nov/17 10:46 PM;Ratnakar;[~nnao] Agreed. and Thanks for the fix.,"03/Nov/17 2:01 AM;jeffgarratt;Failed verify on Z.  Submitted a reverify for https://gerrit.hyperledger.org/r/#/c/15149/
",,,,,,,,,,,,,,,,,,,
Documentation for fabric-shim Iterator classes is missing,FAB-6802,22937,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Ratnakar,Ratnakar,Ratnakar,30/Oct/17 2:23 PM,31/Oct/17 3:58 PM,26/Apr/18 6:50 AM,31/Oct/17 3:58 PM,,,,,,,,,,fabric-chaincode-node,,,,0,fabric-chaincode-node,quality,,,,,,,"[Documentation|https://fabric-shim.github.io/] for the following classes is missing 
[HistoryQueryIterator|https://fabric-shim.github.io/HistoryQueryIterator.html]
[StateQueryIterator|https://fabric-shim.github.io/StateQueryIterator.html]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01sed:,,,,,,,,Ratnakar,,,,,,,,,,master,,,true,30/Oct/17 10:25 PM;Ratnakar;https://gerrit.hyperledger.org/r/#/c/14969/,,,,,,,,,,,,,,,,,,,,,,,
"Inconsistency in ""Writing Your First Application"" and its source code",FAB-6789,22914,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,luomin,luomin,luomin,29/Oct/17 8:17 AM,30/Oct/17 7:05 PM,26/Apr/18 6:50 AM,30/Oct/17 7:05 PM,,,,,,,v1.0.2,v1.0.4,v1.1,fabric-docs,fabric-samples,,,0,Documentation,,,,,,,,"Although the recent merged patch 
|[FAB-6307] Fix WYFA to reflect new folder|

 synchronized the new""fabric-samples/"" folder structure in the WYFA page, there still remains some inconsistency the description contents.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01s9p:,,,,,,,,joe-alewine,luomin,,,,,,,,,,,,,30/Oct/17 12:10 PM;joe-alewine;Being taken care of by: https://gerrit.hyperledger.org/r/c/14909/,,,,,,,,,,,,,,,,,,,,,,,
"Peer Service fails at a particular chaincode, as there may be a problem with the chaincode ",FAB-6784,22889,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,latitiah,sambhavdutt,sambhavdutt,27/Oct/17 2:53 PM,30/Oct/17 2:17 PM,26/Apr/18 6:50 AM,30/Oct/17 2:17 PM,,,,,,,,,,fabric-quality,,,,0,ci_failure,,,,,,,,"Observed the following errors below for Peer Service, right after...... +args[""get"",""a""]+ 

  And a user deploys chaincode at path ""github.com/hyperledger/fabric/examples/chaincode/go/map"" with args [""init""] with name ""cc2"" on channel ""chn2"" ... passed in 29.867s
    When a user invokes on the channel ""chn2"" using chaincode named ""cc2"" with args [""put"", ""a"", ""1000""] ... passed in 8.876s
    And I wait ""5"" seconds ... passed in 5.005s
    And a user queries on the channel ""chn2"" using chaincode named ""cc2"" with args [""get"", ""a""] ... passed in 3.158s
    Then a user receives a success response of 1000 ... failed in 0.000s

*Build Log*
https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-x86_64/109/testReport/peer/Peer%20Service/FAB_3866__Multiple_Chaincodes_Per_Peer__with_solo_orderer_____1_1_/

*Commits*

FABRIC_COMMIT ========> 11014b6
CA COMMIT ========> e612d86",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01s45:,,,,,,,,latitiah,sambhavdutt,,,,,,,,,master,,,true,"27/Oct/17 3:59 PM;latitiah;After speaking with Sambhav about this, it looks like the map chaincode is returning it's result in quotes now. ",,,,,,,,,,,,,,,,,,,,,,,
Correct typo in statecouchdb_test.go,FAB-6780,22870,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,chris.elder,chris.elder,chris.elder,26/Oct/17 9:33 PM,28/Oct/17 9:42 AM,26/Apr/18 6:50 AM,28/Oct/17 9:42 AM,,,,,,,v1.1,,,fabric-ledger,,,,0,,,,,,,,,"The last test in TestUtilityFunctions() has an incorrect comment.  It states ""// ValidateKey should return nil for a valid key"" it should say ""// ValidateKey should return error for an invalid key""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01s1p:,,,,,,,,chris.elder,,,,,,,,,,master,,,true,26/Oct/17 9:41 PM;chris.elder;https://gerrit.hyperledger.org/r/#/c/14907/,,,,,,,,,,,,,,,,,,,,,,,
Incorrect comment about chaincode events in shim/interfaces.go,FAB-6777,22863,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,wlahti,wlahti,26/Oct/17 7:38 PM,11/Dec/17 1:14 PM,26/Apr/18 6:50 AM,11/Dec/17 1:14 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"interfaces.go incorrectly states that:
{code:java}
// SetEvent allows the chaincode to propose an event on the transaction 
// proposal. If the transaction is validated and successfully committed, 
// the event will be delivered to the current event listeners.{code}
It should be updated to say:
{code:java}
// SetEvent allows the chaincode to set an event on the response to the
// proposal to be included as part of a transaction. The event will be
// available within the transaction in the committed block regardless of the
// validity of the transaction.{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01s0d:,,,,,,,,wlahti,,,,,,,,,,master,,,true,06/Nov/17 3:02 PM;wlahti;https://gerrit.hyperledger.org/r/#/c/15221/,,,,,,,,,,,,,,,,,,,,,,,
Fix unformatted chaincode log messages,FAB-6772,22858,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,wlahti,wlahti,26/Oct/17 4:13 PM,06/Nov/17 2:49 PM,26/Apr/18 6:50 AM,06/Nov/17 2:49 PM,,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01rz9:,,,,,,,,wlahti,,,,,,,,,,master,,,true,26/Oct/17 4:32 PM;wlahti;https://gerrit.hyperledger.org/r/#/c/14893/,,,,,,,,,,,,,,,,,,,,,,,
[CI] enable build artifacts on z build nodes,FAB-6769,22850,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,26/Oct/17 5:14 AM,26/Oct/17 2:07 PM,26/Apr/18 6:50 AM,26/Oct/17 2:07 PM,,,,,,,,,,fabric-ci,,,,0,,,,,,,,,enable build log publisher on z build nodes.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01rxp:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,26/Oct/17 2:07 PM;rameshthoomu;patch has been submitted and merged. Now the log shipping is available on Z build nodes.,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca UT failing,FAB-6768,22849,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harsha544,harsha544,harsha544,26/Oct/17 1:44 AM,03/Nov/17 11:55 AM,26/Apr/18 6:50 AM,03/Nov/17 11:55 AM,,,,,,,v1.1,,,fabric-ca,fabric-ca-build,,,0,,,,,,,,,"fabric-ca UT are inconsistently passing on ppc64le. Enclosing a portion of failure section :-

 

2017/10/26 01:36:39 [DEBUG] Initializing BCCSP with software options &\{SecLevel:256 HashFamily:SHA2 Ephemeral:false FileKeystore:0xc4202f64c0 DummyKeystore:<nil>}
Error: Enrollment information does not exist. Please execute enroll command first. Example: fabric-ca-client enroll -u http://user:userpw@serverAddr:serverPort
fabric-ca-client:
 Version: development build
 Go version: go1.9
 OS/Arch: linux/ppc64le
FAIL
coverage: 89.9% of statements
{color:#ff0000}FAIL    github.com/hyperledger/fabric-ca/cmd/fabric-ca-client    128.930s{color}
error: exit status 1
panic: EOF

goroutine 1 [running]:
main.main()
    /w/src/github.com/AlekSi/gocov-xml/gocov-xml.go:60 +0x1164
*** END FAILURES ***

For further debugging enclosed the complete log.",,,,,,,,,,,,FAB-5463,,,,,,,,28/Oct/17 4:31 PM;harsha544;Fabric-CA-UT-Node2-Run1.rtf;https://jira.hyperledger.org/secure/attachment/12826/Fabric-CA-UT-Node2-Run1.rtf,26/Oct/17 1:45 AM;harsha544;Fabric-CA_UT_Logs.rtf;https://jira.hyperledger.org/secure/attachment/12822/Fabric-CA_UT_Logs.rtf,28/Oct/17 4:31 PM;harsha544;Node5-Fabric-Ca-Run.zip;https://jira.hyperledger.org/secure/attachment/12825/Node5-Fabric-Ca-Run.zip,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01rxh:,,,,,,,,bsmita,harsha544,rennman,smithbk,SriramaSharma,,,,,,master,,,true,26/Oct/17 1:48 AM;harsha544;Per [~rennman]'s Suggestion tried increasing the overall wait time by *{color:#333333}gocov test -timeout 15m $PKGS | gocov-xml > coverage.xml{color}* (from a default of 10 mins) to 15 mins. However the UT were still not passing on every run.,26/Oct/17 1:51 AM;harsha544;^^^ [~rameshthoomu] request you to kindly re-run some more fabric-ca UT in sandbox. And advice on the same.,"26/Oct/17 6:31 PM;rennman;This still appears to be a permissions problem:
 {{main_test.go:540: Enroll command invoked with -c /tmp/client-config.json failed: Failed to store TLS root certificate at '/tmp/msp/tlscacerts/tls-localhost-7090.pem': open /tmp/msp/tlscacerts/tls-localhost-7090.pem: permission denied}}

The failing test creates the directory with appropriate permissions before writing the file:
{{os.MkdirAll(dir, 0755)}}
 where
 {{dir=/tmp/msp/tlscacerts/}}

The error is returned from {{ioutil.WriteFile()}}, where the filename is {{tls-localhost-7090.pem}}

This ought to work, since the '7' in '0755' is sufficient for the creator of the dir to cd, ls, and create a file in that dir.

Does this fail consistently? What is the umask setting for the host machine? Are there any extended acls defined? Under what user/group id is the test being run? Is the sticky bit set anywhere? Are there any other security products installed/configured on the host machine (selinux, etc....) I'm grasping at straws, but it's an environment issue.","27/Oct/17 5:57 PM;smithbk;[~harsha544] What release is this against?  master or v1.0.3?  If this is against v1.0.3, then you should be using go 1.7","28/Oct/17 4:38 AM;harsha544;[~smithbk] This is against master head code of fabric-ca hence we are using go1.9
[~rennman] Sorry for being late, I will get required details and come back to you.","28/Oct/17 2:49 PM;harsha544;[~rennman] Here's the requested information :-

jenkins@blockchain-5:~$ getenforce 
 *Disabled*
 jenkins@blockchain-5:~$ umask 
 *0002*
 jenkins@blockchain-5:~$ id
 uid=1001(jenkins) gid=1001(jenkins) groups=1001(*jenkins*),27(*sudo*),116(*docker*)
 jenkins@blockchain-5:~$ ls -ld /tmp
 *drwxrwxrw*t 18 root root 16384 Oct 28 14:46 /tmp
 jenkins@blockchain-5:~$

 

Will do multiple runs on above node to see if it consistently fails or passes.","28/Oct/17 4:31 PM;harsha544;[~rennman] Enclosed multiple run data for Node5 which consistently fails.
Also enclosing run data from node2 where Fabric-CA  UT is passing.
Here are selinux,umask details from node2 :- 
jenkins@blockchain-2:~$ getenforce
*Disabled*
jenkins@blockchain-2:~$ umask
*0002*
jenkins@blockchain-2:~$ id
uid=1001(jenkins) gid=1001(jenkins) groups=1001(*jenkins*),27(*sudo*),110(*lxd*),116(*docker*)
jenkins@blockchain-2:~$ ls -ld /tmp
*drwxrwxrwt* 20 root root 266240 Oct 28 16:29 /tmp
jenkins@blockchain-2:~$",31/Oct/17 6:32 PM;harsha544;[~rennman] [~smithbk] Any suggestions/thoughts please ?,"31/Oct/17 7:54 PM;rennman;[~harsha544] Nothing stands out based on the info provided. There is only one failure from one operation in one test. If you can give me access to blockchain-5, I can try to do some runtime troubleshooting.","01/Nov/17 7:58 PM;rennman;It turns out that we are leaving some data lying around in /tmp. In and of itself, that's not a bad thing, but
1 - the data storage on the power systems is persistent
2 - In late Sep, the UT was run under the 'root' user
Consequently, two of the tests – testInsertAndGetUser() from lib/dasqlite_test.go, and TestClientCommandsNoTLS() from ./cmd/fabric-ca-client/main_test.go – were failing due to permissions issues with the leftover data from the old test run.

I deleted the problem files, and all of the UT ran successfully.","02/Nov/17 8:59 AM;harsha544;[~rennman]  I ran multiple fabric-ca UTs on blockchain-5, ensured I cleaned up /tmp before I executed UT, however at times I encounter this failure :- 

**** Test killed with quit: ran too long (10m0s).*
FAIL    github.com/hyperledger/fabric-ca/lib    600.103s
error: exit status 1
panic: EOF

Do you think there's more obvious fix as opposed to increasing overall wait time to 15 mins. **","02/Nov/17 4:04 PM;rennman;[~harsha544] Other than figuring out where the bottleneck is, no. From my experience, the performance on ppc is terrible. The most likely culprit is poor I/O performance.",,,,,,,,,,,,
Delete a duplicated pkgmap.cryptogen In Makefile,FAB-6765,22846,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,nnao,nnao,25/Oct/17 9:24 PM,22/Nov/17 9:28 PM,26/Apr/18 6:50 AM,22/Nov/17 9:28 PM,v1.1.0-alpha,,,,,,v1.1,,,fabric-build,,,,0,quality,,,,,,,,There is a duplicated pkgmap.cryptogen In Makefile,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01rwt:,,,,,,,,nnao,,,,,,,,,,master,,,true,26/Oct/17 4:27 PM;nnao;https://gerrit.hyperledger.org/r/#/c/14869/,,,,,,,,,,,,,,,,,,,,,,,
Orderer Service failed in Message Payloads due to wrong Assertion length.,FAB-6755,22833,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,sambhavdutt,sambhavdutt,25/Oct/17 2:55 PM,27/Nov/17 4:54 AM,26/Apr/18 6:50 AM,27/Nov/17 4:54 AM,,,,,,,,,,fabric-quality,,,,0,ci_failure,,,,,,,,"*Description:*
Observed below errors while checking Regression for Orderer service, 
{code:java}
orderer.Orderer Service.Message Payloads Less than 1MB, for kafka orderer -- @1.2 
Expected response to be of length 1024; received length 1041
Location: orderer.feature:74
Assertion Failed: Expected response to be of length 1024;
{code}

*Build Log*
https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-x86_64/103/testReport/orderer/Orderer%20Service
/Message_Payloads_Less_than_1MB__for_kafka_orderer_____1_2_/

*Commits*
*FABRIC_COMMIT ========> 1d81a96
CA COMMIT ========> 12a529e*",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01rtx:,,,,,,,,denyeart,rameshthoomu,sambhavdutt,scottz,,,,,,,,,,,26/Oct/17 2:17 PM;rameshthoomu;I could see this is consistently failing on the latest fabric commits.FYI  [~scottz] [~lhaskins] [~Nishi] [~AdnanChoudhury] ,13/Nov/17 6:31 PM;scottz;Please confirm that this is no longer failing. I think it has been fixed already.,"15/Nov/17 2:34 PM;sambhavdutt;There is another error in test case *FAB-3852: Message Payloads Less than 1MB, for solo orderer using the NodeJS SDK interface -- @1.3* , Observed the following,

Assertion Failed: Expected response to be of length 1024; received length 17

 And a user deploys chaincode at path ""github.com/hyperledger/fabric/examples/chaincode/go/map"" with args [""""] ... passed in 30.353s
    And a user invokes on the chaincode named ""mycc"" with random args [""put"",""a"",""{random_value}""] of length 1024 ... passed in 0.991s
    And I wait ""3"" seconds ... passed in 3.003s
    And a user queries on the chaincode named ""mycc"" with args [""get"",""a""] ... passed in 3.647s
    Then a user receives a response containing a value of length 1024 ... failed in 0.000s

*Build log*
https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-merge-x86_64/93/console
","27/Nov/17 4:54 AM;denyeart;Looks like the original problem has been fixed.  I will close.  If there is a different error these days, please open a separate Jira item.",,,,,,,,,,,,,,,,,,,,
node.js chaincode documentaion link is missing in README,FAB-6748,22824,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Ratnakar,Ratnakar,Ratnakar,24/Oct/17 5:28 PM,25/Oct/17 2:45 PM,26/Apr/18 6:50 AM,25/Oct/17 2:45 PM,,,,,,,v1.1,,,fabric-chaincode-node,,,,0,fabric-chaincode-node,quality,,,,,,,"Now that documentation for all the apis are published and available for consumption.

Using this  JIRA Update the README file.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01rsd:,,,,,,,,Ratnakar,,,,,,,,,,master,,,true,25/Oct/17 2:45 PM;Ratnakar;https://gerrit.hyperledger.org/r/#/c/14817/,,,,,,,,,,,,,,,,,,,,,,,
configtxgen/localconfig unable to read V1.1 sample profiles,FAB-6747,22823,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,wlahti,wlahti,24/Oct/17 4:54 PM,26/Oct/17 11:00 AM,26/Apr/18 6:50 AM,26/Oct/17 11:00 AM,,,,,,,,,,fabric-tools,,,,0,configtxgen,,,,,,,,"localconfig.go's Load function:
{code:java}
func Load(profile string) *Profile {code}
is unable to read in the sample V1.1 profiles due to the period in the profile name as defined in sampleconfig/configtx.yaml (e.g. SampleSingleMSPChannelV1.1). The V1.1 sample profiles should be updated to use underscores instead so Viper is able to read them in as expected.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01rs5:,,,,,,,,wlahti,,,,,,,,,,master,,,true,24/Oct/17 5:05 PM;wlahti;https://gerrit.hyperledger.org/r/#/c/14813/,,,,,,,,,,,,,,,,,,,,,,,
ACL Happy Path test Fails,FAB-6745,22817,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,latitiah,latitiah,24/Oct/17 3:12 PM,09/Nov/17 4:19 PM,26/Apr/18 6:50 AM,09/Nov/17 4:19 PM,v1.1,,,,,,,,,fabric-ca,,,,0,ci_failure,,,,,,,,"The attribute-based ACL test fails with the error: 
{code}
FATAL: Failed waiting for the 'setup' container to finish registering identities, creating the genesis block and other artifacts
{code}

Logs for this run are located in jenkins: https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-x86_64/100/artifact/gopath/src/github.com/hyperledger/fabric-test/fabric-samples/fabric-ca/data/logs/",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01rr1:,,,,,,,,latitiah,smithbk,,,,,,,,,master,,,true,"24/Oct/17 4:12 PM;smithbk;Yes, this is a problem in the sample.  It is a timing issue.  The intermediate CA for org0 started listening on the port 1 second after the setup container tried to connect.
The correct fix for this is to add a loop to try to connect to the listening port using ""nc -z <host> <port>"" before trying to enroll.","25/Oct/17 8:43 PM;smithbk;https://gerrit.hyperledger.org/r/14855
https://gerrit.hyperledger.org/r/15089 [FAB-6745] Add netcat to fabric-ca images",,,,,,,,,,,,,,,,,,,,,,
TLS config InsecureSkipVerify should set to false,FAB-6731,22800,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,grapebaba,grapebaba,24/Oct/17 8:21 AM,24/Oct/17 8:54 AM,26/Apr/18 6:50 AM,24/Oct/17 8:54 AM,,,,,,,,,,fabric-crypto,fabric-gossip,,,0,,,,,,,,,I think InsecureSkipVerify should be only set to true in testing. Why we also set true in [https://github.com/hyperledger/fabric/blob/master/gossip/comm/comm_impl.go#L670-L675] here?[~yacovm] [~C0rWin],,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01rn9:,,,,,,,,grapebaba,yacovm,,,,,,,,,,,,,"24/Oct/17 8:38 AM;yacovm;Because the comm layer has 2 constructors - one that receives a port number which is only used in testing, and creates its own gRPC layer as in your link, and the other constructor receives its own dial options from the layers above that is used in production.",24/Oct/17 8:53 AM;grapebaba;OK,,,,,,,,,,,,,,,,,,,,,,
Fabric-Test: (Behave) Remove extra parameter from an implementation function to make it functional,FAB-6725,22749,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,AdnanChoudhury,AdnanChoudhury,AdnanChoudhury,23/Oct/17 2:18 PM,20/Nov/17 9:22 PM,26/Apr/18 6:50 AM,20/Nov/17 9:22 PM,,,,,,,,,,fabric-quality,,,,0,,,,,,,,,"The implementation of the statement of the form:
a user invokes XXX times using chaincode with args YYY
Has an extra parameter in its definition that will make it to fail. This extra parameter (""name"") is to be removed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01rlp:,,,,,,,,AdnanChoudhury,scottz,,,,,,,,,master,,,true,"23/Oct/17 11:55 PM;scottz;[https://gerrit.hyperledger.org/r/#/c/14689/]

 ",,,,,,,,,,,,,,,,,,,,,,,
CLI outputs a private data warning message ,FAB-6721,22742,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,22/Oct/17 8:28 PM,29/Oct/17 11:29 AM,26/Apr/18 6:50 AM,29/Oct/17 11:29 AM,v1.1,,,,,,v1.1,,,fabric-gossip,fabric-peer,,,0,,,,,,,,,"The following code 
{code}
func init() {
	logger = util.GetLogger(util.LoggingPrivModule, """")
	if transientBlockRetention == 0 {
		logger.Warning(""Configuration key"", transientBlockRetentionConfigKey, ""isn't set, defaulting to"", transientBlockRetentionDefault)
		transientBlockRetention = transientBlockRetentionDefault
	}
}
{code}

makes the peer CLI emit a warning message about an un-initialized config value.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01rkl:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Unable to add an organization using config update,FAB-6712,22730,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,Ratnakar,Ratnakar,20/Oct/17 6:54 PM,25/Oct/17 5:48 PM,26/Apr/18 6:50 AM,25/Oct/17 5:48 PM,,,,,,,,,,fabric-tools,,,,0,,,,,,,,,"Unable to add a new organization to the existing Blockchain network.

Commit level: *9cea8c78360c4bfdee4b51870be22aa175886dcd*

 

Followed steps given here https://github.com/hyperledger/fabric/tree/master/examples/configtxupdate#reconfiguration-example using e2e_cli/byfn env setup",,,,,,,,,,,,,,,,,,,,20/Oct/17 6:59 PM;rohitadivi;orderer_logs.txt;https://jira.hyperledger.org/secure/attachment/12712/orderer_logs.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01rhx:,,,,,,,,jyellick,Ratnakar,rohitadivi,,,,,,,,master,,,true,"20/Oct/17 6:55 PM;Ratnakar;while updating the channel configuration fails with the following error:

{code}

peer channel update -f config_update_in_envelope.pb -c mychannel -o orderer.example.com:7050 --tls true --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
2017-10-20 16:09:08.834 UTC [gossip/privdata] 0 -> WARN 001 Configuration key peer.gossip.pvtData.transientstoreMaxBlockRetention isn't set, defaulting to 1000
2017-10-20 16:09:08.855 UTC [msp] GetLocalMSP -> DEBU 002 Returning existing local MSP
2017-10-20 16:09:08.855 UTC [msp] GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity
2017-10-20 16:09:08.858 UTC [channelCmd] InitCmdFactory -> INFO 004 Endorser and orderer connections initialized
2017-10-20 16:09:08.858 UTC [msp] GetLocalMSP -> DEBU 005 Returning existing local MSP
2017-10-20 16:09:08.858 UTC [msp] GetDefaultSigningIdentity -> DEBU 006 Obtaining default signing identity
2017-10-20 16:09:08.858 UTC [msp] GetLocalMSP -> DEBU 007 Returning existing local MSP
2017-10-20 16:09:08.858 UTC [msp] GetDefaultSigningIdentity -> DEBU 008 Obtaining default signing identity
2017-10-20 16:09:08.859 UTC [msp/identity] Sign -> DEBU 009 Sign: plaintext: 0A9E060A074F7267324D53501292062D...41646D696E7312002A0641646D696E73
2017-10-20 16:09:08.859 UTC [msp/identity] Sign -> DEBU 00a Sign: digest: 81F0EF408AA017A360F399AC3F1B29BD54286F51DBEE80C01FBE4026AAC99604
2017-10-20 16:09:08.859 UTC [msp] GetLocalMSP -> DEBU 00b Returning existing local MSP
2017-10-20 16:09:08.859 UTC [msp] GetDefaultSigningIdentity -> DEBU 00c Obtaining default signing identity
2017-10-20 16:09:08.859 UTC [msp] GetLocalMSP -> DEBU 00d Returning existing local MSP
2017-10-20 16:09:08.859 UTC [msp] GetDefaultSigningIdentity -> DEBU 00e Obtaining default signing identity
2017-10-20 16:09:08.859 UTC [msp/identity] Sign -> DEBU 00f Sign: plaintext: 0AD5060A1508021A0608A4BFA8CF0522...74A06EB856839E7DACE73BD7EA5091E0
2017-10-20 16:09:08.859 UTC [msp/identity] Sign -> DEBU 010 Sign: digest: 79DE86F92591E0BF643D6BAD13DA93C79822391D02F37B355B049D5221D7F981
Error: got unexpected status: BAD_REQUEST -- Error authorizing update: Error validating DeltaSet: Policy for [Groups] /Channel/Application not satisfied: Failed to reach implicit threshold of 2 sub-policies, required 1 remaining
Usage:
 peer channel update [flags]

Flags:
 -c, --channelID string In case of a newChain command, the channel ID to create.
 -f, --file string Configuration transaction file generated by a tool such as configtxgen for submitting to orderer

Global Flags:
 --cafile string Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint
 --logging-level string Default logging level and overrides, see core.yaml for full syntax
 -o, --orderer string Ordering service endpoint
 --ordererTLSHostnameOverride string The hostname override to use when validating the TLS connection to the orderer.
 --test.coverprofile string Done (default ""coverage.cov"")
 --tls Use TLS when communicating with the orderer endpoint
 -v, --version Display current version of fabric peer server

{code}",20/Oct/17 6:59 PM;rohitadivi;Added the orderer logs,20/Oct/17 7:03 PM;jyellick;In review via https://gerrit.hyperledger.org/r/#/c/14745/,,,,,,,,,,,,,,,,,,,,,
PTE crashes when attempting to failover orderer,FAB-6711,22729,Bug,Unverified,FAB,Fabric,software,ChristopherFerris,,,Medium,,sunhwei,holocron,holocron,20/Oct/17 6:37 PM,09/Jan/18 6:41 PM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-quality,,,,0,PTE,tools,,,,,,,"Attempting to use the {{*""ordererFailover"": ""TRUE"",* option recently added to PTE causes PTE to crash (all node processes exit).}}

 

{{Error in PTE log shows:}}
{code:java}
info: [PTE 0 main]: stderr: error: [PTE 0 exec]: [Nid:chan:org:id=2:channel56:PeerOrg5:0 invoke_move_const] Failed to send transaction due to error: Error: SERVICE_UNAVAILABLE
 at ClientDuplexStream.<anonymous> (/root/fabric-sdk-node/node_modules/fabric-client/lib/Orderer.js:128:21)
 at emitOne (events.js:96:13)
 at ClientDuplexStream.emit (events.js:188:7)
 at ClientDuplexStream._emitStatusIfDone (/root/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:258:12)
 at ClientDuplexStream._readsDone (/root/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:221:8)
 at readCallback (/root/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:283:12){code}
  

Then:
{noformat}
info: [PTE 0 main]: stderr: (node:1729) UnhandledPromiseRejectionWarning: Unhandled promise rejection (rejection id: 1): TypeError: Cannot read property 'getUrl' of undefined{noformat}
 

The orderers in the SCFile are configured as such:
{code:java}
{
 ""test-network"": {
 ""orderer"": {
 ""fabric-orderer-12121b"": {
 ""name"": ""OrdererOrg"",
 ""mspid"": ""OrdererOrg"",
 ""mspPath"": """",
 ""adminPath"": """",
 ""comName"": """",
 ""url"": ""grpcs://tor-zbc03b.3.secure.blockchain.ibm.com:12121"",
 ""server-hostname"": ""tor-zbc03b.3.secure.blockchain.ibm.com"",
 ""tls_cacerts"": ""/root/cacert.pem""
 },
 ""fabric-orderer-12121d"": {
 ""name"": ""OrdererOrg"",
 ""mspid"": ""OrdererOrg"",
 ""mspPath"": """",
 ""adminPath"": """",
 ""comName"": """",
 ""url"": ""grpcs://tor-zbc03d.3.secure.blockchain.ibm.com:12121"",
 ""server-hostname"": ""tor-zbc03d.3.secure.blockchain.ibm.com"",
 ""tls_cacerts"": ""/root/cacert.pem""
 },
 ""fabric-orderer-12121e"": {
 ""name"": ""OrdererOrg"",
 ""mspid"": ""OrdererOrg"",
 ""mspPath"": """",
 ""adminPath"": """",
 ""comName"": """",
 ""url"": ""grpcs://tor-zbc03e.3.secure.blockchain.ibm.com:12121"",
 ""server-hostname"": ""tor-zbc03e.3.secure.blockchain.ibm.com"",
 ""tls_cacerts"": ""/root/cacert.pem""
 }
 },
...{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,0|i01rhp:,,,,,,,,dongming,holocron,sunhwei,,,,,,,,,,,,"20/Oct/17 7:11 PM;dongming;Before PTE starts tansactions, PTE builds an orderer list for failover, as below:

info: [PTE 0 main]: stdout: info: [PTE 0 exec]: [Nid:chan:org:id=0:testorgschannel1:org2:0 assignOrdererList] orderer list: [\{""_options"":\{""grpc.ssl_target_name_override"":""orderer0.example.com"",""grpc.default_authority"":""orderer0.example.com"",""grpc.primary_user_agent"":""grpc-node/1.6.0""},""_url"":""grpcs://localhost:5005"",""_endpoint"":\{""addr"":""localhost:5005"",""creds"":\{}},""_request_timeout"":45000,""_ordererClient"":\{""$channel"":\{}}},\{""_options"":\{""grpc.ssl_target_name_override"":""orderer1.example.com"",""grpc.default_authority"":""orderer1.example.com"",""grpc.primary_user_agent"":""grpc-node/1.6.0""},""_url"":""grpcs://localhost:5006"",""_endpoint"":\{""addr"":""localhost:5006"",""creds"":\{}},""_request_timeout"":45000,""_ordererClient"":\{""$channel"":\{}}},\{""_options"":\{""grpc.ssl_target_name_override"":""orderer2.example.com"",""grpc.default_authority"":""orderer2.example.com"",""grpc.primary_user_agent"":""grpc-node/1.6.0""},""_url"":""grpcs://localhost:5007"",""_endpoint"":\{""addr"":""localhost:5007"",""creds"":\{}},""_request_timeout"":45000,""_ordererClient"":\{""$channel"":\{}}}]

 

When failover occurs, PTE shows the following logs, see Orderer failover and then continue to send transactions:

 

info: [PTE 0 main]: stderr: error: [Orderer.js]: sendBroadcast - on error: ""Error: Endpoint read failed\n at ClientDuplexStream._emitStatusIfDone (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:255:19)\n at ClientDuplexStream._receiveStatus (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:233:8)\n at /home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:757:12""

info: [PTE 0 main]: stderr: error: [PTE 0 exec]: [Nid:chan:org:id=0:testorgschannel1:org2:0 invoke_move_const] Failed to send transaction due to error: Error: SERVICE_UNAVAILABLE
 at ClientDuplexStream.<anonymous> (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/fabric-client/lib/Orderer.js:128:21)
 at emitOne (events.js:96:13)
 at ClientDuplexStream.emit (events.js:188:7)
 at ClientDuplexStream._emitStatusIfDone (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:258:12)
 at ClientDuplexStream._receiveStatus (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:233:8)
 at /home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:757:12

info: [PTE 0 main]: stdout: info: [PTE 0 exec]: [Nid:chan:org:id=0:testorgschannel1:org2:0 ordererFailover] Orderer failover from (grpcs://localhost:5005) to (grpcs://localhost:5006):

info: [PTE 0 main]: stderr: error: [Orderer.js]: sendBroadcast - on error: ""Error: Endpoint read failed\n at ClientDuplexStream._emitStatusIfDone (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:255:19)\n at ClientDuplexStream._receiveStatus (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:233:8)\n at /home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:757:12""

info: [PTE 0 main]: stderr: error: [PTE 0 exec]: [Nid:chan:org:id=0:testorgschannel1:org1:0 invoke_move_const] Failed to send transaction due to error: Error: SERVICE_UNAVAILABLE
 at ClientDuplexStream.<anonymous> (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/fabric-client/lib/Orderer.js:128:21)
 at emitOne (events.js:96:13)
 at ClientDuplexStream.emit (events.js:188:7)
 at ClientDuplexStream._emitStatusIfDone (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:258:12)
 at ClientDuplexStream._receiveStatus (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:233:8)
 at /home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:757:12

info: [PTE 0 main]: stdout: info: [PTE 0 exec]: [Nid:chan:org:id=0:testorgschannel1:org1:0 ordererFailover] Orderer failover from (grpcs://localhost:5005) to (grpcs://localhost:5006):

info: [PTE 0 main]: stdout: info: [PTE 0 exec]: [Nid:chan:org:id=0:testorgschannel1:org2:0 isExecDone] invokes(Move) sent: number=100, evtTimeoutCnt=0, elapsed time= 11133

info: [PTE 1 main]: stdout: info: [PTE 1 exec]: [Nid:chan:org:id=0:testorgschannel2:org4:0 isExecDone] invokes(Move) sent: number=200, evtTimeoutCnt=0, elapsed time= 17195

info: [PTE 1 main]: stdout: info: [PTE 1 exec]: [Nid:chan:org:id=0:testorgschannel2:org3:0 isExecDone] invokes(Move) sent: number=200, evtTimeoutCnt=0, elapsed time= 18317

info: [PTE 0 main]: stdout: info: [PTE 0 exec]: [Nid:chan:org:id=0:testorgschannel1:org1:0 isExecDone] invokes(Move) sent: number=200, evtTimeoutCnt=0, elapsed time= 19528

 

 

 

 

 

 

 ",20/Oct/17 7:49 PM;dongming;what is the fabric-sdk-node commit level in your test?,"23/Oct/17 2:22 PM;holocron;6f7310ccda8648473d0f794e28c5b390ac030480 

- this is the 1.0.2 release","26/Oct/17 1:53 PM;dongming;I am unable to recreate with v1.0.0, will look v1.0.2",20/Nov/17 2:41 AM;sunhwei;I am unable to recreate it with node-sdk V1.0.0 and  fabric v1.1 preview ,"04/Jan/18 2:18 PM;sunhwei;Due to we can not re-produce this issue, suggest to close it.",09/Jan/18 6:40 PM;holocron;Agreed. We will reopen if needed.,,,,,,,,,,,,,,,,,
[CI] Create a smoke test CI job in fabric,FAB-6705,22718,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,20/Oct/17 2:09 PM,01/Nov/17 2:04 PM,26/Apr/18 6:50 AM,01/Nov/17 2:04 PM,v1.0.3,,,,,,v1.1,,,fabric-ci,,,,0,fabric-ci,,,,,,,,"Create a smoke test CI job in fabric. Job should execute the below steps

1) Clone fabric patch set and build docker images and binaries

2) Clone latest fabric-ca repository and build fabric-ca docker images

3) Clone latest fabric-test repository and fetch the smoke test suite

4) Execute smoke tests and publish results on Jenkins console",,,,3600,3600,,0%,3600,3600,,,,,,,,FAB-6665,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01rfp:,,,,,,,,mastersingh24,rameshthoomu,,,,,,,,,master,,,true,"23/Oct/17 2:37 PM;rameshthoomu;As per [~scottz] below are the tests we run as part of this smoke test job:

- protobufs accessible from our test environment
 - can override config env vars
 - can bring up networks with a channel and example02 chaincode and do invoke and query
 - with and without TLS
 - with GO chaincode and NODE chaincode
 - with solo and kafka
 - with levelDB and couchDB","27/Oct/17 9:28 AM;mastersingh24;[~rameshthoomu]   [~scottz] [~bmos299]  

So my comment(s) on [https://gerrit.hyperledger.org/r/14733], but the net is that we don't need to continue to add additional CI jobs for every patch.   It's fine to run them separately for a short period as non-voting jobs, but at some point you need to either merge all behave tests into a single repo or minimally a single CI job.",01/Nov/17 2:04 PM;rameshthoomu;a non-voting smoke test verify and merge job has been submitted for now.. based on the consistency of the job results will modify or add these tests in behave job to reduce the number of jobs for each build.,,,,,,,,,,,,,,,,,,,,,
Fix garbled listen message on startup,FAB-6704,22716,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,20/Oct/17 11:23 AM,27/Oct/17 10:51 AM,26/Apr/18 6:50 AM,27/Oct/17 10:51 AM,,,,,,,v1.0.4,,,fabric-ca,,,,0,,,,,,,,,"
{noformat}
Listening on %!s(int=7054)%!(EXTRA string=http://0.0.0.0:7054) 
{noformat}
should be  
{noformat}
Listening on http://0.0.0.0:7054
{noformat}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01rf9:,,,,,,,,mastersingh24,,,,,,,,,,release-1.0,,,true,20/Oct/17 11:31 AM;mastersingh24;https://gerrit.hyperledger.org/r/14729,,,,,,,,,,,,,,,,,,,,,,,
"When a block contains multiple transactions with events assigned to the same handler, only one event would fire",FAB-6703,22715,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,osesov,osesov,osesov,20/Oct/17 11:21 AM,20/Oct/17 2:54 PM,26/Apr/18 6:50 AM,20/Oct/17 2:51 PM,,,,,,,v1.1,,,fabric-sdk-java,,,,0,,,,,,,,,"In the recently committed code,  due to using hash map (event handler->event), only a single event would be kept to fire

 

Channel.java:
{code:java}
HashMap<ChaincodeEventListenerEntry, ChaincodeEvent> matches = new HashMap<>();{code}

https://gerrit.hyperledger.org/r/#/c/14731/",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01rf1:,,,,,,,,osesov,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Cleanup old code,FAB-6701,22713,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,grapebaba,grapebaba,grapebaba,20/Oct/17 8:27 AM,23/Oct/17 3:05 PM,26/Apr/18 6:50 AM,23/Oct/17 3:05 PM,,,,,,,,,,fabric-sdk-py,,,,0,,,,,,,,,Cleanup old code to avoid misusing,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01rel:,,,,,,,,baohua,grapebaba,,,,,,,,,master,,,true,20/Oct/17 8:53 AM;baohua;https://gerrit.hyperledger.org/r/#/c/14727/,,,,,,,,,,,,,,,,,,,,,,,
configtxgen -printOrg does not properly marshal to JSON,FAB-6696,22707,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,19/Oct/17 7:58 PM,25/Oct/17 2:48 AM,26/Apr/18 6:50 AM,25/Oct/17 2:48 AM,,,,,,,v1.1,,,fabric-tools,,,,0,configtxgen,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01rd9:,,,,,,,,jyellick,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Instantiation fails in the network created by Network Launcher with TLS disabled,FAB-6692,22703,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,john.d.sheehan,shimos,shimos,19/Oct/17 6:39 PM,01/Nov/17 2:11 PM,26/Apr/18 6:50 AM,01/Nov/17 2:11 PM,v1.0.3,,,,,,v1.1,,,fabric-quality,,,,0,PTE,,,,,,,,"When I created a network by Network Launcher with TLS disabled as in the following command,

{noformat}
$ ./networkLauncher.sh -a up -o 3 -x 6 -r 6 -p 2 -k 4 -z 3 -n 3 -t kafka -f test -w localhost -S disabled {noformat}

PTE (samplecc) fails in chaincode instantiation by timeout as follows:

{noformat}
$ for json in SCFiles/*.json; do sed -i 's|grpcs://|grpc://|' $json; done
$ for json in sampleccInputs/*.json; do sed -i 's/""TLS"": ""enabled""/""TLS"": ""disabled""/' $json; done
$ ./pte_driver.sh sampleccInputs/runCases-chan-create-TLS.txt
(successful. output omitted)
$ ./pte_driver.sh sampleccInputs/runCases-chan-join-TLS.txt
(successful. output omitted)
$ ./pte_driver.sh sampleccInputs/runCases-chan-install-TLS.txt
(successful. output omitted)
$ ./pte_driver.sh sampleccInputs/runCases-chan-instantiate-TLS.txt
(snip)
info: [PTE 0 main]: [performance_main:Nid=2] Successfully enrolled user 'admin'
info: [PTE 0 main]: [chaincodeInstantiate] org= org5, org name=PeerOrg5, channel name=testorgschannel3
info: [PTE 0 main]: [chainAddOrderer] channel name:  testorgschannel3
info: [PTE 0 main]: [chainAddOrderer] channel orderers:  grpc.primary_user_agent=grpc-node/1.6.6, _url=grpc://localhost:5007, addr=localhost:5007, , _request_timeout=200000,
info: [PTE 0 main]: [channelAddPeer1] channel name: testorgschannel3, org: org5
info: [PTE 0 main]: [channelAddEvent] channel name:  testorgschannel3
info: [EventHub.js]: _connect - options {}
info: [PTE 0 main]: [channelAddEvent] requests: grpc://localhost:7069, events: grpc://localhost:6059
info: [PTE 0 main]: [performance_main:Nid=1] Successfully enrolled user 'admin'
info: [PTE 0 main]: [chaincodeInstantiate] org= org3, org name=PeerOrg3, channel name=testorgschannel2
info: [PTE 0 main]: [chainAddOrderer] channel name:  testorgschannel2
info: [PTE 0 main]: [chainAddOrderer] channel orderers:  grpc.primary_user_agent=grpc-node/1.6.6, _url=grpc://localhost:5006, addr=localhost:5006, , _request_timeout=200000,
info: [PTE 0 main]: [channelAddPeer1] channel name: testorgschannel2, org: org3
info: [PTE 0 main]: [channelAddEvent] channel name:  testorgschannel2
info: [EventHub.js]: _connect - options {}
info: [PTE 0 main]: [chaincodeInstantiate:Nid=2] Successfully initialize channel[testorgschannel3]
info: [PTE 0 main]: [channelAddEvent] requests: grpc://localhost:7065, events: grpc://localhost:6055
info: [PTE 0 main]: [chaincodeInstantiate:Nid=1] Successfully initialize channel[testorgschannel2]
error: [Peer.js]: sendProposal - timed out after:200000
error: [client-utils.js]: sendPeersProposal - Promise is rejected: Error: REQUEST_TIMEOUT
    at Timeout._onTimeout (/opt/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/fabric-client/lib/Peer.js:114:19)
    at ontimeout (timers.js:386:14)
    at tryOnTimeout (timers.js:250:5)
    at Timer.listOnTimeout (timers.js:214:5)
error: [PTE 0 main]: [chaincodeInstantiate] channelName(testorgschannel1) chaincode instantiation was bad
error: [PTE 0 main]: [chaincodeInstantiate] Failed to send instantiate Proposal or receive valid response. Response null or status is not 200. exiting...
info: [PTE 0 main]: Disconnecting the event hub: 0
error: [PTE 0 main]: [chaincodeInstantiate(Nid=0)] Failed to instantiate transaction on testorgschannel1 due to error:  Error: Failed to send instantiate Proposal or receive valid response. Response null or status is not 200. exiting...
    at /opt/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/test/PTE/pte-main.js:765:23
    at process._tickCallback (internal/process/next_tick.js:109:7)
(snip)
{noformat}",fabric-test 106d55e8bc1ca09df83b8369a82386654944ea64,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,0|i01rcd:,,,,,,,,dongming,shimos,,,,,,,,,master,,,true,24/Oct/17 2:20 PM;dongming;Please provide SCFiles and sampleccInputs/runCases-chan-instantiate-TLS.txt.,"26/Oct/17 1:54 PM;dongming;John, Thanks for looking into this.","30/Oct/17 9:53 PM;shimos;[~dongming] Sorry for my late reply. SC files and runCase file I used are ones in the fabric-test repository (the necessary changes are performed by the `sed` command above)

And I think the cause was for NL not to set CORE_PEER_ADDRESS, and so the CR ( https://gerrit.hyperledger.org/r/c/14707/ ) will fix this issue.",,,,,,,,,,,,,,,,,,,,,
Updating assets acting differently in playground versus in network,FAB-6691,22702,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,eacoeytaux,eacoeytaux,19/Oct/17 5:50 PM,24/Oct/17 12:02 PM,26/Apr/18 6:50 AM,24/Oct/17 12:02 PM,,,,,,,,,,,,,,0,Composer,,,,,,,,"{color:#333333}As the simple example attached in {color}{color:#333333}test{color}{color:#333333}.bna shows, when one tries to update an asset registry from a promise callback returned from a different asset registry, the original asset registry will not update, although there is no error thrown.  This only happens in playground, whereas when the same code is run in a deployed network the code runs correctly.{color}",,,,,,,,,,,,,,,,,,,,19/Oct/17 5:50 PM;eacoeytaux;test.bna;https://jira.hyperledger.org/secure/attachment/12700/test.bna,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01rc5:,,,,,,,,davidkel,denyeart,eacoeytaux,,,,,,,,,,,,24/Oct/17 10:47 AM;denyeart;[~davidkel] Where should composer issues get logged?  I assume not in Fabric jira...,"24/Oct/17 11:42 AM;davidkel;[~denyeart] They can raise a stackoverflow question and tag it with hyperledger-composer, an alternative could be to raise a github issue at github.com/hyperledger/composer.","24/Oct/17 12:02 PM;denyeart;Ok, closing since this is not a Fabric issue.  Please follow-up as suggested by Dave Kelsey.",,,,,,,,,,,,,,,,,,,,,
Incorrect attribute name in error message when attribute given during enroll found missing during registration,FAB-6688,22602,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,Nishi,Nishi,19/Oct/17 5:06 PM,19/Oct/17 8:20 PM,26/Apr/18 6:50 AM,19/Oct/17 8:18 PM,v1.0.3,,,,,,,,,fabric-ca,,,,0,quality,,,,,,,,"Used balance-transfer node sample program under github.com/hyperledger/fabric-samples/balance-transfer to test attributes:

Steps to Reproduce:

--------------------------

In github.com/hyperledger/fabric-samples/balance-transfer/app/helper.js

1. Have following attributes were defined during client registration:
{code:java}
attrs: [
{name: 'hf.Registrar.Roles', value: 'client'},
{name:'ibm',value:'raleigh', ecert:true},
{name:'test1attr',value:'1234', ecert:true},
{name:'test3attr',value:'0000', ecert:true}
]{code}
 

2. During enrollment had the following attributes:
{code:java}
attr_reqs: [
{name:'ibm', optional:false},
{name:'test1attr', optional:false},
{name:'test2attr', optional:false}
] {code}
 

3. Launch network from github.com/hyperledger/fabric-samples/balance-transfer/ ./runApp.sh

4. Test API from github.com/hyperledger/fabric-samples/balance-transfer ./testAPIs.sh

 

Expected Result: 

Error: chaincode error (status: 500, message: Attribute 'test2attr' was not found)

 

Actual Result:

Error: chaincode error (status: 500, message: Attribute 'ibm' was not found)",,,,,,,,,,,,,,,,,,,,19/Oct/17 5:16 PM;Nishi;ca1.log;https://jira.hyperledger.org/secure/attachment/12600/ca1.log,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01rbh:,,,,,,,,aambati,Nishi,,,,,,,,,,,,,"19/Oct/17 8:20 PM;aambati;this is working as expected. Looking at the test case, I see that enrollment fails, so trying to access any attributes in the chaincode is going to fail. Nishi needs to modify the test case so enrollment succeeds before invoking the chaincode.",,,,,,,,,,,,,,,,,,,,,,,
GossipState doesn't filter inter-peer messages by channel id ,FAB-6680,22492,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,thakkarparth007,thakkarparth007,thakkarparth007,18/Oct/17 11:04 PM,01/Feb/18 3:48 PM,26/Apr/18 6:50 AM,01/Feb/18 3:48 PM,v1.0.3,,,,,,,,,fabric-gossip,,,,0,,,,,,,,,"GossipState uses two go-channels, gossipChan and commChan. Both receive all gossip messages, and are supposed to process only relevant messages. commChan's filtering didn't have an explicit check to see if the message belonged to the same Fabric channel that this GossipState was handling. This caused an issue when lots of cross-channel messages are being sent (I was adding a peer to 8 channels at once - which didn't work)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01r8d:,,,,,,,,C0rWin,denyeart,scottz,thakkarparth007,yacovm,,,,,,master,,,true,"27/Nov/17 4:51 AM;denyeart;[~thakkarparth007] Do you intend to fix?
[~yacovm] [~C0rWin] FYI","27/Nov/17 6:47 AM;thakkarparth007;I did make a tiny change which _should_ fix it ([https://github.com/thakkarparth007/fabric/commit/0944ca6943fa1ec6afc6699a63aa8d2893c8b513),] but for some reason creating multiple channels at a time still fails. Not entirely sure why. I'll get back with more details shortly.","01/Dec/17 4:09 PM;thakkarparth007;Not entirely sure what's going on when I'm trying to create multiple channels at once. There seems to be a deadlock. Only one channel gets created, and the others just get stuck.

I'm using the command line scripts (a modified version of the byfn.sh) to create multiple channels at once. Creating the channels serially works, but in parallel doesn't seem to work. As far as I know the client side isn't at fault here, but not entirely sure of that. The reason I'm not sure is that invoking chaincodes across multiple channels in parallel works fine.

Just reporting the symptoms since I'm not sure what's going on behind the scene here.","20/Jan/18 9:18 AM;yacovm;[~thakkarparth007] channel creation isn't related to gossip.

[~scottz] , [~bmos299] - do you guys have a system test in which peers participate in multiple channels?","20/Jan/18 5:29 PM;scottz;Yes. The ones we've run most recently with PTE use 2 channels, but we've done more in the past. We use a script to create all the channels and then join all the peers to all of the channels. [~dongming] is busy with testing the block filtering feature, but I'll ask him to run a test with more channels this week.

I am curious to know exactly what is meant by ""serially"" versus ""in parallel"".  [~thakkarparth007], are you using go threads to drive the BYFN script to create the channels in parallel threads? And I haven't looked at it from that perspective, but, is it possible that script is not designed to be threadsafe?","01/Feb/18 3:48 PM;C0rWin;{quote}
commChan's filtering didn't have an explicit check to see if the message belonged to the same Fabric channel that this GossipState was handling
{quote}

so just to clarify, there is a code which explicitly checks whenever the message is belongs to particular channel gossip state responsible to handle, e.g.:

{code}
	remoteStateMsgFilter := func(message interface{}) bool {
		receivedMsg := message.(proto.ReceivedMessage)
		msg := receivedMsg.GetGossipMessage()
		if !(msg.IsRemoteStateMessage() || msg.GetPrivateData() != nil) {
			return false
		}
		// Ensure we  deal only with messages that belong to this channel
		if !bytes.Equal(msg.Channel, []byte(chainID)) {
			return false
		}
		connInfo := receivedMsg.GetConnectionInfo()
		authErr := services.VerifyByChannel(msg.Channel, connInfo.Identity, connInfo.Auth.Signature, connInfo.Auth.SignedData)
		if authErr != nil {
			logger.Warning(""Got unauthorized request from"", string(connInfo.Identity))
			return false
		}
		return true
	}
{code}

in particular those lines taking care of it:

{code}
		// Ensure we  deal only with messages that belong to this channel
		if !bytes.Equal(msg.Channel, []byte(chainID)) {
			return false
		}
{code}

Now, to the serial versus parallel channel creation:

{quote}
I'm using the command line scripts (a modified version of the byfn.sh) to create multiple channels at once. Creating the channels serially works, but in parallel doesn't seem to work. As far as I know the client side isn't at fault here, but not entirely sure of that. The reason I'm not sure is that invoking chaincodes across multiple channels in parallel works fine.
{quote}

[~thakkarparth007] Could you please open a separate JIRA item with more detailed explanation of what exactly do you mean while talking about parallel channel and how we actually could reproduce your issue?

Closing this item, since per JIRA description and details code works exactly as expected, i.e. gossip state filters inter-peer messages based on channel.",,,,,,,,,,,,,,,,,,
fabric-ca db lock errors in sqlite3,FAB-6675,22485,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,rennman,rennman,18/Oct/17 3:38 PM,31/Oct/17 7:48 PM,26/Apr/18 6:50 AM,31/Oct/17 7:48 PM,,,,,,,,,,fabric-ca,,,,0,,,,,,,,,"When sending multiple parallel requests to a fabric_ca server cluster that uses shared sqlite3 databases, the server occasionally returns a 'database locked' error.  This should be considered a transient failure, and not a fatal error. Although the code does attempt to account for this in NewUserRegistrySQLLite3() --
{code:java}
// Set maximum open connections to one. This is to share one connection
 // across multiple go routines. This will serialize database operations
 // with in a single server there by preventing ""database is locked""
 // error under load. The ""Database is locked"" error is still expected
 // when multiple servers are accessing the same database (but mitigated
 // by specifying _busy_timeout to 5 seconds).{code}
-- data from fvt test suggests that the timeout is insufficient for the load generated by the clustering fvt test.

The recommendation is to increase the timeout to 10 seconds:
{code:java}
@@ -43,7 +43,7 @@ func NewUserRegistrySQLLite3(datasource string) (*sqlx.DB, error) {
 return nil, errors.WithMessage(err, ""Failed to create SQLite3 database"")
 }
 
- db, err := sqlx.Open(""sqlite3"", datasource+""?_busy_timeout=5000"")
+ db, err := sqlx.Open(""sqlite3"", datasource+""?_busy_timeout=10000"")
 if err != nil {
 return nil, errors.Wrap(err, ""Failed to open sqlite3 DB"")
 } {code}
 

This has been empirically proven to work for the purposes of the test.

 

From the sqlite3 documentation:

int sqlite3_busy_timeout(sqlite3*, int ms);

This routine sets a [busy handler|https://sqlite.org/c3ref/busy_handler.html] that sleeps for a specified amount of time when a table is locked. The handler will sleep multiple times until at least ""ms"" milliseconds of sleeping have accumulated. After at least ""ms"" milliseconds of sleeping, the handler returns 0 which causes [sqlite3_step()|https://sqlite.org/c3ref/step.html] to return [SQLITE_BUSY|https://sqlite.org/rescode.html#busy].

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01r79:,,,,,,,,aambati,rennman,,,,,,,,,master,,,true,19/Oct/17 12:05 AM;aambati;https://gerrit.hyperledger.org/r/c/14673/,,,,,,,,,,,,,,,,,,,,,,,
Test scripts 'passwordsInLog_test.sh' not in correct location,FAB-6672,22482,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,skarim,skarim,18/Oct/17 1:59 PM,20/Oct/17 3:08 PM,26/Apr/18 6:50 AM,20/Oct/17 3:08 PM,v1.1,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"The test script 'passwordsInLog_test.sh' is currently located in 'fabric_ca/passwordsInLog_test.sh', which is not the appropriate location. The correct location for this fvt test is in the 'fabric_ca/scripts/' folder for this test case to get executed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01r6l:,,,,,,,,aambati,skarim,,,,,,,,,master,,,true,19/Oct/17 12:21 AM;aambati;https://gerrit.hyperledger.org/r/c/14675/,,,,,,,,,,,,,,,,,,,,,,,
Make sure that a tx with a txid which is equal to that of a previous tx in the same block is marked as invalid,FAB-6669,22479,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ales,ales,ales,18/Oct/17 10:17 AM,02/Nov/17 10:46 AM,26/Apr/18 6:50 AM,01/Nov/17 10:28 PM,,,,,,,v1.1,,,fabric-peer,,,,0,security,,,,,,,,"Currently, we validate transactions in a block as follow: given its txid, make sure the ledger doesn't have a transaction with the same txid. This is a problem because we still allow two transactions with the same txid in the same block. This JIRA tracks required changes to fix this behaviour.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01r5x:,,,,,,,,ales,jeffgarratt,,,,,,,,,master,,,true,26/Oct/17 7:49 PM;jeffgarratt;[~ales] let me know if any issues.,"27/Oct/17 2:31 PM;ales;none, the CR is ready https://gerrit.hyperledger.org/r/14631
Thx!",01/Nov/17 10:28 PM;jeffgarratt;[~ales] Closing as https://gerrit.hyperledger.org/r/14631 has been merged.,02/Nov/17 10:46 AM;ales;(y) thx!,,,,,,,,,,,,,,,,,,,,
peer channel join command description refers to chain instead of channel,FAB-6657,22467,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,wlahti,wlahti,17/Oct/17 3:46 PM,31/Oct/17 12:07 PM,26/Apr/18 6:50 AM,31/Oct/17 12:07 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"The description for the ""peer channel join"" command description should be updated to refer to a channel instead of a chain. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01r39:,,,,,,,,wlahti,,,,,,,,,,master,,,true,17/Oct/17 3:49 PM;wlahti;https://gerrit.hyperledger.org/r/#/c/14595/,,,,,,,,,,,,,,,,,,,,,,,
Getting a list of event hubs for an organisation,FAB-6654,22464,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,davidkel,davidkel,17/Oct/17 3:33 PM,24/Oct/17 11:11 PM,26/Apr/18 6:50 AM,24/Oct/17 11:11 PM,v1.1,,,,,,v1.1,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"In composer when a transaction is submitted to a set of peers, composer will then listen for events from all the peers it is allowed to connect to waiting for transaction committed events. Once it receives those events it returns to the caller. A CCP can contain peers in a channel for peers in multiple organisations, but the likelyhood is that you can only listen for events of peers in your own organisation. I used the following code to be able to register event listeners for just those peers as follows
{code}
    static getEventHubs(client) {
        let eventHubs = [];
        let orgConfig = HLFConnection.getOrgConfig(client);
        if (orgConfig) {
            let peers = orgConfig.getPeers();
            peers.forEach((peer) => {
                eventHubs.push(client.getEventHub(peer.getName()));
            });
        }
        return eventHubs;
    }
{code}
This is another helper method that might be worth providing above having to get the ClientConfig then the organisation",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01r2l:,,,,,,,,davidkel,harrisob@us.ibm.com,,,,,,,,,master,,,true,18/Oct/17 10:29 AM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/14633/,,,,,,,,,,,,,,,,,,,,,,,
It would be beneficial to have a helper method to get the MSPid of the client organisation,FAB-6653,22463,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,davidkel,davidkel,17/Oct/17 3:27 PM,24/Oct/17 11:26 AM,26/Apr/18 6:50 AM,24/Oct/17 11:25 AM,v1.1,,,,,,v1.1,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"Getting the MSPid directly may be a common requirement for clients. Worth considering a direct helper method on the client object.

 {code}
    static getMspId(client) {
        let orgConfig = HLFConnection.getOrgConfig(client);
        if (orgConfig) {
            return orgConfig.getMspid();
        }
        return null;
    }
{code}
The getOrgConfig get's the organisation from the ClientConfig definition as shown in https://jira.hyperledger.org/browse/FAB-6652",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01r2d:,,,,,,,,davidkel,harrisob@us.ibm.com,,,,,,,,,master,,,true,24/Oct/17 11:26 AM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/14659/,,,,,,,,,,,,,,,,,,,,,,,
Maintain Backwards Compatibility of Newly Added Attributes,FAB-6647,22455,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,skarim,skarim,17/Oct/17 1:45 PM,08/Dec/17 12:07 PM,26/Apr/18 6:50 AM,08/Dec/17 12:07 PM,v1.1,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"Need to make sure that backwards compatibility is maintained for identities, if any new attributes are added that affect current functionality. An example of this is the newly introduced 'hf.Registrar.Attributes' attribute that defines what attributes a registrar is allowed to register for a new identity. If the registrar does not have this attribute they will not be allowed to register an identity that is requesting attributes. Currently, registrar identities won't possess this newly added 'hf.Registrar.Attribute' attribute and will start to break when they try to register new identities.

*Proposal:*

Introduce versions on both the server configuration file and the database. During server startup, the version of the configuration file and database will be examined. If an older version is being used, actions will be taken on the identities to add any newly introduced attributes as appropriate. After a successful update, the version of the configuration file and database will be updated to the current version. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01r0t:,,,,,,,,Nishi,skarim,,,,,,,,,master,,,true,"27/Oct/17 11:04 PM;skarim;https://gerrit.hyperledger.org/r/#/c/14933/
https://gerrit.hyperledger.org/r/#/c/14935/",,,,,,,,,,,,,,,,,,,,,,,
Fabric Installation Error : Docker RUN not working,FAB-6638,22446,Bug,Unverified,FAB,Fabric,software,ChristopherFerris,,,Medium,,,capamaster,capamaster,17/Oct/17 5:07 AM,05/Apr/18 5:34 PM,26/Apr/18 6:50 AM,,v1.0.4,,,,,,Not a Bug,,,fabric-baseimage,,,,0,build-system,Command,fbric,Found,Host,not,RUN,,"Steps Followed :
 # Installed Pre-requisites : Go, Docker, Docker Compose, Pip
 # Clone of hyperledger-fabric :  

           ~> GOPATH=/usr/local/go

            ~> cd $GOPATH/src/github.com/hyperledger/fabric

            ~> make dist-clean all   

_--------------------------------------------------------------------------------------_

_warning: GOPATH set to GOROOT (/usr/local/go) has no effect_
 _warning: GOPATH set to GOROOT (/usr/local/go) has no effect_
 _warning: GOPATH set to GOROOT (/usr/local/go) has no effect_
 _Building docker javaenv-image_
 _docker build --build-arg 'http_proxy=[http://127.0.0.1:3128/]' --build-arg 'https_proxy=[https://127.0.0.1:3128/]' -t hyperledger/fabric-javaenv build/image/javaenv_
 _Sending build context to Docker daemon  45.06kB_
 _Step 1/15 : FROM hyperledger/fabric-baseimage:x86_64-0.3.2_
  _---> c92d9fdee998_
 _Step 2/15 : RUN curl -sSL [https://services.gradle.org/distributions/gradle-2.12-bin.zip] > /tmp/gradle-2.12-bin.zip_
  _---> Running in 3ba4808b2943_
 _curl: (7) Failed to connect to 127.0.0.1 port 3128: Connection refused_
 _The command '/bin/sh -c curl -sSL [https://services.gradle.org/distributions/gradle-2.12-bin.zip] > /tmp/gradle-2.12-bin.zip' returned a non-zero code: 7_
 _Makefile:279: recipe for target 'build/image/javaenv/.dummy-x86_64-1.0.4-snapshot-572dcd5' failed_
 _make: *** [build/image/javaenv/.dummy-x86_64-1.0.4-snapshot-572dcd5] Error 7_

---------------------------------------------------------------------------------------------------------------

Conclusion : Tried to RUN commands externally than Dockerfile it runs upto certain point, but while going forward it is must to run through docker only especially for javaenv folder (javabuild.sh). Looks like that the RUN commands are not working, Kindly help on the same.

 

 

 

 ","** Linux Ubuntu 16.04

** Fabric : 1.0.4

** Go : 1.9

** Docker version : 17.09.0-ce 

** pip : 9.0.1

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1185,0|i01qyt:,,,,,,,,capamaster,ChristopherFerris,luomin,mastersingh24,,,,,,,,,,,"20/Oct/17 2:13 AM;luomin;Can you see what DNS servers your NetworkManager is using?

#nmcli dev show | grep DNS

 

Simply comment out the line dns=dnsmasq in /etc/NetworkManager/NetworkManager.conf,

restart your nwmger:

sudo service network-manager restart

 

and try again?","24/Nov/17 10:13 PM;mastersingh24;[~capamaster] - Are you actually trying to use an HTTP proxy?  Looks like your proxy is running on your Ubuntu host on 127.0.0.1:3128.

When 127.0.0.1 is passed to the Docker RUN commands in the container, 127.0.0.1 refers to the container and not to the host (therefore is cannot connect your your proxy).   (curl uses the http_proxy / https_proxy env variables as do many Linux tools).

So if you really need to use a proxy, you need to make sure it is available at an address which the container can actually reach - for example you might want to bind your proxy to the Docker bridge network on your Ubuntu host.","05/Apr/18 5:34 PM;ChristopherFerris;[~capamaster] do you wish to keep this issue open or, can it be closed?",,,,,,,,,,,,,,,,,,,,,
.gitignore missing some build target locations,FAB-6622,22034,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,ChristopherFerris,ChristopherFerris,14/Oct/17 7:04 PM,27/Nov/17 4:48 AM,26/Apr/18 6:50 AM,27/Nov/17 4:48 AM,v1.0.3,,,,,,,,,fabric-build,,,,0,,,,,,,,,.gitignore missing some build target locations,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01qo5:,,,,,,,,ChristopherFerris,,,,,,,,,,master,,,true,14/Oct/17 7:25 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/c/14521/,,,,,,,,,,,,,,,,,,,,,,,
Read-Write set semantics - committing phase flow related,FAB-6618,22030,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,pvrbharg,pvrbharg,13/Oct/17 8:13 PM,17/Oct/17 2:56 PM,26/Apr/18 6:50 AM,17/Oct/17 1:51 PM,,,,,,,,,,fabric-endorser,fabric-peer,fabric-sdk-node,,0,,,,,,,,,"Hello team,

 

Customer needs clarification as the documentation is incomplete or unclear or both:

++++++++++++++++++++++++++

2 valid transactions that happen in micro second interval ; the 1^st^ transaction is successful while the 2^nd^ will fail since the key changed when it first read the state;
 * What happens to this transaction ? (according to what I read – it is marked as invalid transaction and inserted into the ledger [this does not look right])
 * How does the re-try happen ?
 * Will it go thro the entire flow of going thro the validation of endorsing peer etc ?

 

We need clarification around this.

++++++++++++++++++++++++++

 

References:

http://hyperledger-fabric.readthedocs.io/en/latest/readwrite.html?highlight=read%20write%20sets
Read-Write set semantics

http://hyperledger-fabric.readthedocs.io/en/latest/arch-deep-dive.html
Section 4.1

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01qn9:,,,,,,,,denyeart,pvrbharg,,,,,,,,,,,,,"13/Oct/17 8:17 PM;pvrbharg;Hi team,

 

Additionally - for the failed transactions (that are no fault of client) - what happens to client side logic? Should client application programatically/manually retry or client side SDK automatically retries with a configurable setting or if client side SDK retry reconfiguration settings are supported? (does it retry N number of times with delay configurable?) - which client side SDKs are supported if retry is allowed.

 

Thanks.","14/Oct/17 9:44 PM;pvrbharg;Dear team,

 

During my due diligence and own research - I came across this URL with a recommended sample/design pattern:

[https://github.com/hyperledger/fabric-samples/tree/release/high-throughput]

Is this the recommended IBM guidance for our customers? If so - please let me know.

 

Thanks.

 ","17/Oct/17 1:51 PM;denyeart;Please do not open defects for questions.

Most of your questions are answered here:

[https://hyperledger-fabric.readthedocs.io/en/latest/txflow.html]

"" The transactions within the block are validated to ensure endorsement policy is fulfilled and to ensure that there have been no changes to ledger state for read set variables since the read set was generated by the transaction execution. Transactions in the block are tagged as being valid or invalid.

Each peer appends the block to the channel’s chain, and for each valid transaction the write sets are committed to current state database. An event is emitted, to notify the client application that the transaction (invocation) has been immutably appended to the chain, as well as notification of whether the transaction was validated or invalidated.""

The client application can retry any transaction that was invalidated.

Yes, the link in your last comment is a valid approach when there are frequent collisions. When collisions are not frequent the client retry is sufficient.  Please ask any follow-up questions in rocket.chat.

 ","17/Oct/17 2:56 PM;pvrbharg;Thank you, Dave and I would follow your guidance. Best wishes.",,,,,,,,,,,,,,,,,,,,
TLS enroll command should not replace cert.pem file in the msp signcerts folder,FAB-6614,22025,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,aambati,aambati,13/Oct/17 5:52 PM,05/Jan/18 3:01 AM,26/Apr/18 6:50 AM,05/Jan/18 3:01 AM,v1.0.2,,,,,,v1.1,,,fabric-ca,,,,1,,,,,,,,,"fabric-ca-client enroll command for TLS profile overwrites cert.pem file (if one exists) in the msp signcerts folder.

One option is to write certificate as tls-cert.pem in to signcerts folder. But MSP does not support multiple certs in the signcerts folder. Also, it does not have equivalent to signcerts folder for tls.

Other option is to write the certificate and key to a location specified by the user. This probably will not work for HSM.

A work around for this problem is to use different MSP directory using -M option when invoking TLS enroll fabric-ca-client command.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01qm5:,,,,,,,,aambati,fredbi,,,,,,,,,,,,,19/Oct/17 3:21 PM;aambati;https://gerrit.hyperledger.org/r/c/14679/,"21/Oct/17 4:13 PM;fredbi;I confirm this behavior in rel 1.0.2: it is very annoying when simulating registration/enrollment uses cases mixing interactions with fabric-ca-client (CLI) and fabric-ca-client from fabric-node-sdk (TLS enabled)

For instance, an attempt to register a user from the CLI then enrolling it from a nodejs client is a messy process (overwrite breaks the config) although it works like a charm when performing both operations from the node client.","05/Jan/18 3:01 AM;aambati;After trying different solutions to fix this problem user friendly way, we decided that best way to fix this problem is to change MSP to support tlscerts and change peer to use the msp to get tls cert and key for TLS communication. Until then, best way to get around this problem is to use different MSP directory using -M option when invoking TLS enroll fabric-ca-client command",,,,,,,,,,,,,,,,,,,,,
Plugin test fails on ppc64le,FAB-6608,21847,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,divyank,divyank,divyank,13/Oct/17 1:33 AM,03/Nov/17 11:40 AM,26/Apr/18 6:50 AM,13/Oct/17 11:31 AM,,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,"Load endorser plugin test fails on ppc64le architecture.

Support is merged in for Go 1.10: [https://github.com/golang/go/issues/20756]


unit-tests_1 | --- FAIL: TestLoadAuthPlugin (0.05s)
 Error Trace: registry_plugin_test.go:41
unit-tesError:| Received unexpected error ""exit status 1""
unit-tesMessages: Could not build plugin: -buildmode=plugin not supported on linux/ppc64le",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01qf1:,,,,,,,,divyank,kchristidis,,,,,,,,,master,,,true,"03/Nov/17 11:40 AM;kchristidis;(Divyank, just an FYI for future reference: the ""review-needed"" label is for JIRAs proposing new features, where maintainers are asked to review and vote.)",,,,,,,,,,,,,,,,,,,,,,,
Caller name is not correct in log messages of balance-transfer,FAB-6606,21826,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,zhayujie,yuki-kon,yuki-kon,12/Oct/17 9:05 PM,29/Mar/18 8:45 AM,26/Apr/18 6:50 AM,10/Nov/17 7:45 PM,v1.0.3,,,,,,v1.0.5,,,fabric-samples,,,,0,,,,,,,,,"In balance-transfer, a function call “getOrgAdmin(org)” outputs incorrect user name in error message.

The following functions are executed by Admin due to access control.
- createChannel
- JoinChannel
- installChaincode
- instantiateChaincode
- getInstalledChaincodes

In these functions, helper.getOrgAdmin(org) is called to get enrollment for Admins.
However, non-admin user name is printed out in error messages if getOrgAdmin(org) fails.
Error messages should be modified to show that enrolling Admin fails.

This is an example.
{code:java}
                return helper.getOrgAdmin(org).then((user) => {
                                // read the config block from the orderer for the channel
                                // and initialize the verify MSPs based on the participating
                                // organizations
                                return channel.initialize();
                }, (err) => {
                                logger.error('Failed to enroll user \'' + username + '\'. ' + err);
                                throw new Error('Failed to enroll user \'' + username + '\'. ' + err);
{code}

In addition, an arg ""username"" is not used in functions above because caller name is assigned base on org name.
To make it easy to understand the code structure, the arg ""username"" should be removed.
",fabric-samples commit: 3685c4444ef85b56302c45a227369d664c8dc171,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01qbp:,,,,,,,,yuki-kon,,,,,,,,,,,,,,12/Oct/17 10:23 PM;yuki-kon;CR posted here: https://gerrit.hyperledger.org/r/#/c/14489/,"10/Nov/17 7:45 PM;yuki-kon;This JIRA is out of date because balance-transfer was totally updated to catch up v1.1-preview by this CR ([https://gerrit.hyperledger.org/r/#/c/14977/]).
This JIRA should be closed.",,,,,,,,,,,,,,,,,,,,,,
disable auction tests from daily test suite,FAB-6604,21824,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,12/Oct/17 8:26 PM,23/Oct/17 7:27 PM,26/Apr/18 6:50 AM,23/Oct/17 7:27 PM,v1.0.3,,,,,,v1.0.4,,,fabric-ci,,,,0,fabric-test,,,,,,,,disable auction tests from daily test suite.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01qb9:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,23/Oct/17 7:27 PM;rameshthoomu;Auction tests are now disabled from fabric test/regression/daily script,,,,,,,,,,,,,,,,,,,,,,,
"node-sdk test on Mac machine: Checking: for valid PIN failed with ::Error: dlopen(/temp, 1): image not found",FAB-6599,21800,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,davidkhala,davidkhala,davidkhala,12/Oct/17 10:51 AM,06/Mar/18 8:31 PM,26/Apr/18 6:50 AM,06/Mar/18 8:31 PM,v1.1.0-alpha,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"node-sdk  gulp test failed on Mac machine.

 

not ok 486 Checking: for valid PIN failed with ::Error: dlopen(/temp, 1): image not found at Error (native) Load:136
 ---
 operator: fail
 at: checkError (/Users/davidliu/Documents/fabric-sdk-node/test/unit/cryptosuite-pkcs11.js:91:6)
 stack: |-
 Error: Checking: for valid PIN failed with ::Error: dlopen(/temp, 1): image not found
 at Error (native) Load:136
 at Test.assert [as _assert] (/Users/davidliu/Documents/fabric-sdk-node/node_modules/tape/lib/test.js:225:54)
 at Test.bound [as _assert] (/Users/davidliu/Documents/fabric-sdk-node/node_modules/tape/lib/test.js:77:32)
 at Test.fail (/Users/davidliu/Documents/fabric-sdk-node/node_modules/tape/lib/test.js:318:10)
 at Test.bound [as fail] (/Users/davidliu/Documents/fabric-sdk-node/node_modules/tape/lib/test.js:77:32)
 at checkError (/Users/davidliu/Documents/fabric-sdk-node/test/unit/cryptosuite-pkcs11.js:91:6)
 at test (/Users/davidliu/Documents/fabric-sdk-node/test/unit/cryptosuite-pkcs11.js:101:3)
 at Test.<anonymous> (/Users/davidliu/Documents/fabric-sdk-node/node_modules/tape-promise/index.es5.js:21:13)
 at Test.bound [as _cb] (/Users/davidliu/Documents/fabric-sdk-node/node_modules/tape/lib/test.js:77:32)
 at Test.run (/Users/davidliu/Documents/fabric-sdk-node/node_modules/tape/lib/test.js:96:10)
 at Test.bound [as run] (/Users/davidliu/Documents/fabric-sdk-node/node_modules/tape/lib/test.js:77:32)
 at Immediate.next (/Users/davidliu/Documents/fabric-sdk-node/node_modules/tape/lib/results.js:71:15)
 at runCallback (timers.js:789:20)
 at tryOnImmediate (timers.js:751:5)
 at processImmediate [as _immediateCallback] (timers.js:722:5)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01q71:,,,,,,,,davidkhala,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
[CI] - update setuptools to 36.5.0 lftools-install.sh (relang-global-jjb),FAB-6595,21796,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ryjones,rameshthoomu,rameshthoomu,12/Oct/17 1:50 AM,19/Oct/17 4:05 PM,26/Apr/18 6:50 AM,19/Oct/17 4:05 PM,,,,,,,v1.0.4,,,fabric-ci,,,,0,fabric-ci,,,,,,,,"s390x Build are failing in CI with the below error
{code:java}
 00:17:48.077 Not overwriting existing python script /tmp/v/lftools/bin/python (you must use /tmp/v/lftools/bin/python2)

00:17:52.177 Command ""python setup.py egg_info"" failed with error code 1 in /tmp/pip-build-aySYu8/cryptography/
00:17:52.322 Build step 'Execute a set of scripts' changed build result to FAILURE
00:17:52.322 Build step 'Execute a set of scripts' marked build as failure
{code}
update required on setuptool version. Successfully worked with 36.5.0

 ",Jenkins s390x verify and merge jobs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01q65:,,,,,,,,rameshthoomu,ryjones,,,,,,,,,,,,,12/Oct/17 2:17 AM;ryjones;https://gerrit.linuxfoundation.org/infra/#/c/6813/,19/Oct/17 4:05 PM;rameshthoomu;this has been updated to newer version and log files are working as expected on z build nodes. This has been tested in sandbox z node. Will submit patch to update on all production z nodes (currently this has been disabled on production z nodes),,,,,,,,,,,,,,,,,,,,,,
NodeSDK - common config missing timeout settings,FAB-6593,21794,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,11/Oct/17 8:54 PM,19/Oct/17 2:23 PM,26/Apr/18 6:50 AM,19/Oct/17 2:23 PM,,,,,,,v1.0.4,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"The peer settings for timeouts have not been added to the NodeSDK, it is still using the configuration settings for these.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01q5p:,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,,,,,19/Oct/17 2:23 PM;harrisob@us.ibm.com;Will use FAB-6679 to track this work,,,,,,,,,,,,,,,,,,,,,,,
Refactor eventhub and channel service to use common event infrastructure,FAB-6591,21792,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,wlahti,wlahti,11/Oct/17 8:23 PM,27/Nov/17 4:47 AM,26/Apr/18 6:50 AM,27/Nov/17 4:47 AM,,,,,,,Future,,,fabric-peer,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-5695,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01q59:,,,,,,,,denyeart,wlahti,,,,,,,,,,,,,"27/Nov/17 4:47 AM;denyeart;This is not a bug, and channel service likely will not be utilized. Closing.",,,,,,,,,,,,,,,,,,,,,,,
Cannot validate certificate.Error is:the trustAnchors parameter must be non-empty,FAB-6573,21768,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,guo,guo,11/Oct/17 7:10 AM,26/Oct/17 10:13 AM,26/Apr/18 6:50 AM,18/Oct/17 3:04 PM,WON'T FIX,,,,,,WON'T FIX,,,fabric-sdk-java,,,,0,,,,,,,,,"when use sdk query or invoke the chaincode, it can get result correctly ,but it always have an Errors say:  sdk.security.CryptoPrimitives - Cannot validate certificate. Error is: the trustAnchors parameter must be non-empty.

 

i am running the sdk on centos 6 with openjdk 1.8",,,,,,,,,,,,,,,,,,,,11/Oct/17 2:33 PM;rickr;image-2017-10-11-10-33-03-853.png;https://jira.hyperledger.org/secure/attachment/12412/image-2017-10-11-10-33-03-853.png,11/Oct/17 7:10 AM;guo;sdk.PNG;https://jira.hyperledger.org/secure/attachment/12409/sdk.PNG,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01q05:,,,,,,,,guo,rickr,,,,,,,,,,,,,"11/Oct/17 2:33 PM;rickr;What is o.h.f.sdk.security.CryptoPrimitives ?

 

!image-2017-10-11-10-33-03-853.png!",18/Oct/17 3:05 PM;rickr;Does not appear error is being generated by a package that is provided by the SDK.,"26/Oct/17 10:13 AM;guo;org.hyperledger.fabric.sdk.security.CryptoPrimitives [~rickr]

use no SSL",,,,,,,,,,,,,,,,,,,,,
Samples - Update the fabcar with new easier flow,FAB-6568,21763,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,10/Oct/17 10:05 PM,04/Dec/17 11:07 AM,26/Apr/18 6:50 AM,30/Oct/17 6:47 PM,,,,,,,v1.0.5,v1.1,,fabric-docs,fabric-samples,,,0,Usability,,,,,,,,"Update the fabcar flow with more comments and make the flow for segmented where only one thing is done in a sample file
 * admin enroll
 * register and enroll new user
 * invoke
 * query",,,,,,,,,,,,,,,,,FAB-6902,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01pz1:,,,,,,,,harrisob@us.ibm.com,mastersingh24,,,,,,,,,release,release-1.0,master,true,"10/Oct/17 10:11 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/14395 (master)
https://gerrit.hyperledger.org/r/15049 (release)",,,,,,,,,,,,,,,,,,,,,,,
CA DB is left open in error case,FAB-6561,21752,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lehors,lehors,lehors,10/Oct/17 9:28 AM,20/Oct/17 4:32 PM,26/Apr/18 6:50 AM,20/Oct/17 4:32 PM,v1.0.3,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"In case an error occurs NewCA returns an error and nil, leaving the CA DB open with no way to access it anymore.
{code:java}
func NewCA(caFile string, config *CAConfig, server *Server, renew bool) (*CA, error) {
  ca := new(CA)
  ca.ConfigFilePath = caFile
  err := initCA(ca, filepath.Dir(caFile), config, server, renew)
  if err != nil {
    return nil, err
  }
  return ca, nil
}
{code}
This makes it impossible to delete the DB file on Windows (file is ""busy""), which then makes TestCAloadUsersTable fail:
{code:java}
--- FAIL: TestCAloadUsersTable (0.25s)
ca_test.go:708: ca.newCA error: Failed to load identity table: Code: 34 - Configuration Error: Max enrollment in registration request may not be less than -1, but was -10
ca_test.go:722: Remove failed: remove ../testdata/fabric-ca-server.db: text file busy
FAIL
exit status 1
FAIL github.com/hyperledger/fabric-ca/lib 0.088s

{code}",vagrant 1.9.5 / Windows 7,,,,,,,,,,,FAB-6529,,,,,FAB-6562,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01pwl:,,,,,,,,lehors,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Failed Building Fabric due to ltdl.h header file missing,FAB-6557,21743,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,luomin,luomin,luomin,10/Oct/17 5:47 AM,12/Nov/17 11:01 AM,26/Apr/18 6:50 AM,12/Nov/17 11:01 AM,,,,,,,v1.1,,,fabric-devenv,fabric-docs,,,0,build-system,Documentation,,,,,,,"ltdl.h header file missing error is reported when building fabric

Copy of the error msg:

/src/github.com/hyperledger/fabric$ make dist-clean all

-----------------------------------------------------------------------------------------

github.com/hyperledger/fabric/vendor/github.com/miekg/pkcs11
 vendor/github.com/miekg/pkcs11/pkcs11.go:29:18: fatal error: ltdl.h: No such file or directory
 compilation terminated.
 Makefile:233: recipe for target 'build/bin/peer' failed
 make: *** [build/bin/peer] Error 2

-----------------------------------------------------------------------------------------

 

Actually, what we need here is to install ""libtool"". 

Similar error was reported and solved in previous Issue:

e.g. -FAB-2684-, -FAB-2854-

However, their solution as adding library install & checking command into some pre-existed files are no longer available in current documentations.

 

That is why i open this issue and try to add the required info. for libtool.

e.g. you can add libtool and solve the error by

#apt-get install -y build-essential git make curl unzip g++ libtool

But it is better to have it in document.",ubuntu 16.04,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01put:,,,,,,,,luomin,,,,,,,,,,master,,,true,18/Oct/17 2:03 AM;luomin;https://gerrit.hyperledger.org/r/#/c/14529/,"08/Nov/17 6:39 AM;luomin;Hi, [~joe-alewine] , Appreciate very much for a review on [https://gerrit.hyperledger.org/r/#/c/14529/]","12/Nov/17 8:21 AM;luomin;Hi, [~mastersingh24], Appreciate very much for a review on [https://gerrit.hyperledger.org/r/#/c/14529/]",,,,,,,,,,,,,,,,,,,,,
New fabric-ca tests fail on vagrant/Windows,FAB-6529,21713,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lehors,lehors,lehors,09/Oct/17 1:29 PM,20/Oct/17 4:30 PM,26/Apr/18 6:50 AM,20/Oct/17 4:30 PM,v1.0.3,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,," 
{code:java}
$ go test -v
...
2017/10/09 13:22:28 [INFO] Initialized sqlite3 database at /opt/gopath/src/github.com/hyperledger/fabric-ca/testdata/fabric-ca-server.db
--- FAIL: TestCAloadUsersTable (0.25s)
ca_test.go:708: ca.NewCA error: Failed to load identity table: Code: 34 - Configuration Error: Max enrollment in registration request may not be less than -1, but was -10
ca_test.go:748: ca.loadUsersTable error: <nil>
ca_test.go:750: ca.loadUsersTable should have failed due to DB error <nil>
2017/10/09 13:23:40 [DEBUG] Closing server DBs
...
2017/10/09 13:23:40 [DEBUG] Closing server DBs
--- FAIL: TestSRVDefaultDatabase (10.14s)
server_test.go:2487: RemoveAll failed: remove ../testdata/fabric-ca-server.db: text file busy
...
2017/10/09 13:23:41 [DEBUG] Stop: successful stop on port 7054
--- FAIL: TestSRVDefaultAddrPort (1.16s)
server_test.go:2487: RemoveAll failed: remove ../testdata/fabric-ca-server.db: text file busy
server_test.go:2297: Empty bootstrap id: Empty identity name and/or pass not allowed
server_test.go:690: srv.Start err: <nil>
server_test.go:2297: Empty bootstrap id: Empty identity name and/or pass not allowed
server_test.go:706: srv.Start err: TCP listen failed for http://0.0.0.0:7054: listen tcp 0.0.0.0:7054: bind: address already in use
server_test.go:2297: Empty bootstrap id: Empty identity name and/or pass not allowed
server_test.go:726: srv.Start err: TLS listen failed for https://0.0.0.0:7054: listen tcp 0.0.0.0:7054: bind: address already in use
...
2017/10/09 13:23:55 [DEBUG] Stop: successful stop on port 7075
--- FAIL: TestSRVTLSAuthClient (12.70s)
server_test.go:2487: RemoveAll failed: remove ../testdata/fabric-ca-server.db: text file busy
...

{code}
 ","Vagrant 1.9.5 on Windows 7

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01po5:,,,,,,,,lehors,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Fetching config block from Orderer using TLS fails,FAB-6528,21710,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jeffgarratt,MShakeri,MShakeri,09/Oct/17 12:25 PM,27/Oct/17 10:58 AM,26/Apr/18 6:50 AM,27/Oct/17 10:58 AM,v1.0.1,,,,,,Not a Bug,,,fabric-peer,,,,0,won't-fix,,,,,,,,"I try to get config block from orderer using: 
{code:java}
peer channel fetch config config_block.pb -o 127.0.0.1:7050 -c testchainid --tls true --cafile $CAFILE{code}
here is the error:

{code:java}
trailing args detected  
{code}
Could this be the source of bug?
 [https://github.com/hyperledger/fabric/blob/release/peer/channel/fetchconfig.go#L60]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01pnh:,,,,,,,,denniskuhnert,jeffgarratt,MShakeri,,,,,,,,,,,,"26/Oct/17 7:48 PM;jeffgarratt;[~MShakeri] I have verified this command works given the sample below...

CORE_PEER_LOCALMSPID=peerOrg0 CORE_PEER_MSPCONFIGPATH=/var/hyperledger/bddtests/volumes/peer/$COMPOSE_PROJECT_NAME/pe
er0/localMspConfig peer channel fetch config b.block -c com.acme.blockchain.jdoe.channel1 -o 172.18.0.2:7050 --tls --cafile /var/hyperledger/bddtests/volumes/orderer/$COMPOSE_PROJECT_NAME/orderer0/localMspConfig/cacerts/ordererO
rg0.pem --logging-level DEBUG --ordererTLSHostnameOverride orderer0

Can you verify you are passing the parameters correctly.  You do not need the 'true' after --tls as well.  Will close this early next week unless you wish to keep open.","27/Oct/17 10:02 AM;MShakeri;Thank you [~jeffgarratt] for your comment.

I upgraded to Fabric 1.0.3 and now I get FORBIDDEN error for ""testchainid"".

And if I use my created channel id (As you have in your example) then it works.

I was following [Fabric documentation |http://hyperledger-fabric.readthedocs.io/en/latest/configtxlator.html]which looks like out of sync with source code. Or am I missing something? This testchainid is a bit annoying to understand what is really going on.

 

ps: You can close this issue.",,,,,,,,,,,,,,,,,,,,,,
fabric-ca golang 1.9 update breaks certification path validation in CI,FAB-6516,21401,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rennman,rennman,rennman,07/Oct/17 1:52 AM,17/Oct/17 9:04 PM,26/Apr/18 6:50 AM,17/Oct/17 9:04 PM,,,,,,,,,,fabric-ci,,,,0,,,,,,,,,"Whether it is 'broken' or 'fixed' depends on whether the EE cert should be considered as a trust anchor, but we pass it in to the verification algorithm as one of the certs in the root pool, so in theory, it is 'fixed' by 1.9. However, the CI relies on the 'broken' behavior, so the UT needs to be updated to account for it.

 

In 1.9, the EE cert is unilaterally accepted as a root:
 if opts.Roots.contains(c) \{
      candidateChains = append(candidateChains, []*Certificate\{c})
 } else \{
  ...
 while it 1.7, it is not:
     candidateChains, err := c.buildChains(make(map[int][][]*Certificate), []*Certificate\{c}, &opts)

The ca_test.go is updated to include a certificate chain which does not contain the EE certificate:

 -       ca.Config.CA.Chainfile = noCACert
+       ca.Config.CA.Chainfile = noUsageCert

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01pkl:,,,,,,,,denyeart,rennman,,,,,,,,,master,,,true,"07/Oct/17 2:30 AM;rennman;As an aside, the test was passing on z, but that is because as of 10/06/17 the s390 CI is running go1.7, while x86 is running go1.9",17/Oct/17 9:04 PM;denyeart;[https://gerrit.hyperledger.org/r/#/c/14289/] merged.,,,,,,,,,,,,,,,,,,,,,,
PTE script does not wait for workers to finish,FAB-6514,21381,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,shimos,shimos,shimos,06/Oct/17 9:21 PM,31/Oct/17 8:42 PM,26/Apr/18 6:50 AM,31/Oct/17 8:42 PM,v1.0.3,,,,,,v1.0.4,,,fabric-quality,,,,0,PTE,,,,,,,,"The current PTE scripts (pte-mgr.sh, pte-ctlr.sh, pte_driver.sh) do not wait for worker scripts to finish, but exit immediately.
This makes hard for users to know whether (and when) tests finished or not.
",fabric-test commit 21e5521225f834dbe3c69b1a68818e5cfcedc7eb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,0|i01pk5:,,,,,,,,dongming,shimos,,,,,,,,,master,,,true,06/Oct/17 10:07 PM;shimos;CR: https://gerrit.hyperledger.org/r/c/14287/,30/Oct/17 2:48 PM;dongming;This and FAB-5127 can be used to determine the completion of PTE and its status.,,,,,,,,,,,,,,,,,,,,,,
fabric-ca individual multicas should have unique DB names,FAB-6508,21375,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,rennman,rennman,06/Oct/17 7:12 PM,25/Oct/17 7:48 PM,26/Apr/18 6:50 AM,25/Oct/17 7:48 PM,v1.1,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"When starting fabric-ca with the --cacount option, the DB config is inherited by each CA in the pool. Consequently they all end up writing to the same DB. This doesn't fit with the design. Each CA should have a unique DB name.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01pj9:,,,,,,,,rennman,skarim,,,,,,,,,master,,,true,19/Oct/17 8:18 PM;skarim;https://gerrit.hyperledger.org/r/#/c/14715/,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - common config missing caname,FAB-6507,21374,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,06/Oct/17 6:10 PM,11/Oct/17 6:10 PM,26/Apr/18 6:50 AM,11/Oct/17 6:10 PM,,,,,,,v1.1,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,The common network configuration needs to include the caName field in the certificated authority section to properly build the request to the ca with a name that may be different what the CA is know as in the network.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01pj1:,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,master,,,true,09/Oct/17 6:49 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/14297/,,,,,,,,,,,,,,,,,,,,,,,
change coverage to work with node 8 instead of 6,FAB-6506,21373,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix@gmail.com,jimthematrix@gmail.com,jimthematrix@gmail.com,06/Oct/17 5:51 PM,07/Oct/17 9:05 AM,26/Apr/18 6:50 AM,07/Oct/17 9:05 AM,v1.1,,,,,,v1.1,,,fabric-sdk-node,,,,0,,,,,,,,,"npm 5 uses sym links for local dependencies (those that have a file:// path instead of a package name in the package.json dependency entry), as a result istanbul needs to instrument different set of files (those in the source folder instead of under ""node_modules"") in order to properly report coverage",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01pit:,,,,,,,,jimthematrix@gmail.com,mastersingh24,,,,,,,,,master,,,true,07/Oct/17 9:04 AM;mastersingh24;I think this will only be for v1.1?  ,,,,,,,,,,,,,,,,,,,,,,,
Fabric CA should report resource issue not auth failure,FAB-6481,21347,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,harrisob@us.ibm.com,harrisob@us.ibm.com,06/Oct/17 1:09 PM,09/Nov/17 4:24 PM,26/Apr/18 6:50 AM,09/Nov/17 4:24 PM,,,,,,,v1.1,,,fabric-ca,,,,0,MembershipServices,,,,,,,,"When the CA runs out of disk space, new enrollments fail with a \{{color:#444444}""code"":400,""message"":""Authorization failure""}{color}, it would be helpful to the client apps if they knew this was a resource issue not an authorization issue.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01pd9:,,,,,,,,harrisob@us.ibm.com,smithbk,,,,,,,,,,,,,"07/Nov/17 6:43 PM;smithbk;Bret, do you have server logs from this failure?  Or exactly what disk was running out of space?
The server's home directory?  This would help to reproduce, as it is not clear from the code how
this could happen.  It should be returning a 500 with an appropriate message for these kinds of errors.","09/Nov/17 4:20 PM;harrisob@us.ibm.com;This was an issue from rocketchat, no traces and the user solved it themselves.

 Sorry I do not have anything to help. If you feel that you can not reproduce, I will close it.","09/Nov/17 4:23 PM;smithbk;I don't have enough info to reproduce.  Yes, pls close.",,,,,,,,,,,,,,,,,,,,,
NodeSDK - block number decode should be readable,FAB-6480,21344,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,06/Oct/17 12:54 PM,24/Oct/17 9:37 AM,26/Apr/18 6:50 AM,23/Oct/17 7:02 PM,,,,,,,v1.0.4,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"The current decode of block numbers and transaction numbers is just the string output from the Node object, as {color:#333333}\{{color}{color:#dd1144}""low""{color}{color:#333333}:{color}{color:#008080}51{color}{color:#333333},{color}{color:#dd1144}""high""{color}{color:#333333}:{color}{color:#008080}0{color}{color:#333333},{color}{color:#dd1144}""unsigned""{color}{color:#333333}:true}{color} , this should be a readable integer like {color:#008080}51{color}{color:#333333}.{color}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01pcl:,,,,,,,,balaji.viswanathan,harrisob@us.ibm.com,,,,,,,,,master,,,true,23/Oct/17 7:02 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/14553/,"24/Oct/17 9:37 AM;balaji.viswanathan;This was fixed in grpc (verified with 1.6) with an option longsAsStrings (defaults to true). So, even though the toString() in patch is still valid...it is not required.",,,,,,,,,,,,,,,,,,,,,,
Could not find configtx.yaml on Win-10,FAB-6478,21341,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,nirmal1988,nirmal1988,06/Oct/17 11:08 AM,27/Nov/17 4:46 AM,26/Apr/18 6:50 AM,27/Nov/17 4:46 AM,,,,,,,v1.0.0,,,fabric-examples,,,,0,help-wanted,,,,,,,,"Environment: Windows 10- 64bit

I am using first-network application from([https://github.com/hyperledger/fabric-samples]).

When i run the command to generate(./byfn.sh -m generate) the channel artifacts it gives me following error.
[!https://user-images.githubusercontent.com/15016894/31226844-41ee05f2-a9c7-11e7-9fa6-722966adc01d.png!|https://user-images.githubusercontent.com/15016894/31226844-41ee05f2-a9c7-11e7-9fa6-722966adc01d.png]

However it already has exported FABRIC_CFG_PATH, but it still gives me this error.
FABRIC_CFG_PATH is already printed in screenshot as ""/c/apps/fabric-samples/first-network"".

Note: This works in Ubuntu 14 VM.

Please let me know what is the issuewith FABRIC_CFG_PATH??

Thanks in advance...","Win 10- 64 bit

!image-2017-10-06-11-06-48-433.png!",,,,,,,,,,,,,,,,,,,06/Oct/17 11:07 AM;nirmal1988;first-network.zip;https://jira.hyperledger.org/secure/attachment/12214/first-network.zip,06/Oct/17 11:06 AM;nirmal1988;image-2017-10-06-11-06-48-433.png;https://jira.hyperledger.org/secure/attachment/12215/image-2017-10-06-11-06-48-433.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01pc5:,,,,,,,,denyeart,mastersingh24,nirmal1988,,,,,,,,,,,,05/Nov/17 11:23 AM;mastersingh24;[~nirmal1988] - can you update your fabric-samples clone and try again?   I cannot seem to reproduce this on my Windows 10 system,"27/Nov/17 4:46 AM;denyeart;Since this cannot be reproduced and have not heard back from reporter, will have to close.  Please re-open if able to reproduce.",,,,,,,,,,,,,,,,,,,,,,
Ledger returns invalidation code instead of invalidation string,FAB-6476,21338,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,denyeart,denyeart,06/Oct/17 4:04 AM,06/Oct/17 4:08 AM,26/Apr/18 6:50 AM,06/Oct/17 4:08 AM,,,,,,,v1.1,,,fabric-ledger,,,,0,,,,,,,,," Ledger logs tran invalidation in two places.

This one gets it correct by logging the txid and the reason code string:

core/ledger/kvledger/txmgmt/validator/statebasedval/state_based_validator.go:            logger.Warningf(""Block [%d] Transaction index [%d] TxId [%s] marked as invalid by state validator. Reason code [%s]"" ...


 This one should be improved to return the txid and reason code string rather than the reason code number:

core/ledger/kvledger/txmgmt/validator/valimpl/helper.go:            logger.Warningf(""Block [%d] Transaction index [%d] marked as invalid by committer. Reason code [%d]"" ...

 

The txid and reason code string will make it much easier to troubleshoot invalidations.",,,,,,,,,,,,,,,,FAB-4842,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:zbi,,,,,,,,denyeart,,,,,,,,,,,,,,06/Oct/17 4:08 AM;denyeart;Will be worked in FAB-4842.,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - keep alive default need to be 6 minutes,FAB-6469,21328,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,05/Oct/17 2:56 PM,06/Oct/17 7:17 PM,26/Apr/18 6:50 AM,06/Oct/17 7:17 PM,v1.0.2,,,,,,v1.1,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,Any time less then 6 minutes will have issues from being rejected by the peer or not even polling,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01p9p:,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,master,,,true,06/Oct/17 7:17 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/14229/,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - handle certificates without proper newlines,FAB-6468,21327,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,05/Oct/17 2:39 PM,09/Nov/17 9:18 PM,26/Apr/18 6:50 AM,09/Nov/17 9:18 PM,v1.0.2,,,,,,v1.1,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,Certificates come in from many sources and are not always properly formed. To ease the user pain it would be easier for the SDK to fix the certs before using them.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01p9h:,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,master,,,true,03/Nov/17 7:39 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/15151/,,,,,,,,,,,,,,,,,,,,,,,
Improve GetID function of chaincode client library to return a unique ID across MSPs,FAB-6466,21325,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,smithbk,smithbk,05/Oct/17 9:33 AM,21/Feb/18 8:29 PM,26/Apr/18 6:50 AM,21/Feb/18 8:28 PM,,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"The GetID function currently returns:
{code}
base64 encoding of ""x509::<subjectDN>::<issuerDN>""
{code}
However, it is possible for a rogue MSP to create both a subjectDN and issuerDN to match that of an identity from another MSP.

In order to prevent this, the GetID function will be changed to return:
{code}
based 64 encoding of ""<MSPID>::<subjectDN>""
{code}
The <subjectDN> is unique within an MSP and the MSPID makes it unique across MSPs.
Since the MSPID is part of the serialized identity and is used to verify signature, it is impossible
for a rogue MSP to forge an ID which matches an ID of an identity in another MSP.
Also, use of the MSPID means we do not need to include the issuer's DN.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01p91:,,,,,,,,denyeart,smithbk,,,,,,,,,master,,,true,"05/Oct/17 9:44 AM;smithbk;https://gerrit.hyperledger.org/r/14225
https://gerrit.hyperledger.org/r/15353","19/Feb/18 6:51 PM;denyeart;Keith, if an API is going to change, it should be done before 1.1 gets released.  I've changed to 1.1 Bug so that this remains on the radar.",21/Feb/18 8:29 PM;smithbk;No API would change.  This is not needed for v1.1,,,,,,,,,,,,,,,,,,,,,
Make client ID library work on a v1.0 node,FAB-6465,21324,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,smithbk,smithbk,05/Oct/17 8:48 AM,07/Nov/17 6:32 PM,26/Apr/18 6:50 AM,07/Nov/17 6:32 PM,,,,,,,,,,fabric-ca,,,,0,,,,,,,,,"In v1.0, an x509 identity does not tag the PEM as a ""CERTIFICATE"", so remove this restriction
to allow this library to work from a v1.0 peer.  The following x509.ParseCertificate will fail if
it is not a certificate anyway, so it is safe.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01p8t:,,,,,,,,smithbk,,,,,,,,,,master,,,true,05/Oct/17 8:57 AM;smithbk;https://gerrit.hyperledger.org/r/14223,,,,,,,,,,,,,,,,,,,,,,,
Properly compute PKI-ID,FAB-6462,21321,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,04/Oct/17 10:05 PM,14/Oct/17 1:33 PM,26/Apr/18 6:50 AM,14/Oct/17 1:33 PM,v1.0.3,,,,,,v1.1,,,fabric-gossip,,,,0,,,,,,,,,"It's more accurate to compute the PKI-ID on the actual raw bytes of the cert than the PEM bytes.
Alternatively, we can use the IdentityIdentifier() method as an input instead of the PEM bytes.

However, instead of enforcing explicit sanitation of input for GetPKIidOfCert(), We will just make identities that have the wrong PEM type - invalid. This is much more efficient because the GetPKIidOfCert is called many times in the code, and sanitizing its input is therefore costly, while if we just make identities that have the wrong type - invalid, it would implicitly force sanitation of identities. Another argument for doing so, would be that the Validate() is costly anyway and is rarely performed in the peer's life cycle, therefore - adding an additional slight overhead to it doesn't affect much the cost of validating an identity. The BCCSP-MSP Serialize() method already puts the right PEM type as of an earlier commit that is targeted for v1.1 and isn't in v1.0.x",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01p85:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Some v1.0 channels are incapable of being upgraded,FAB-6449,21300,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,04/Oct/17 3:24 PM,05/Oct/17 11:33 AM,26/Apr/18 6:50 AM,05/Oct/17 11:33 AM,,,,,,,v1.1,,,fabric-orderer,,,,0,,,,,,,,,"Because of FAB-5309 and FAB-6080, channels which were created under the v1.0 channel framework had their config incorrectly initialized without the {{mod_policy}} on some elements being set.

The orderer has since been enhanced to enforce that the {{mod_policy}} is non-empty, but the existing channel configs are stuck in a state where they cannot be 'upgraded', because the {{mod_policy}} cannot be satisfied.

Although it is definitely a hack, we should modify these empty {{mod_policy}} fields to be defined to ""Admins"".  This implies custom upgrade processing of config, and violates the spirit of config updates with some 'magic', but this should be a one time hack to bring configuration into line so that we do not need to maintain some other 'magic' for coping with unset {{mod_policy}} which is otherwise disallowed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01p4d:,,,,,,,,jyellick,kchristidis,,,,,,,,,master,,,true,04/Oct/17 3:51 PM;kchristidis;https://gerrit.hyperledger.org/r/c/14205/,,,,,,,,,,,,,,,,,,,,,,,
swagger doc is missing the ecert field,FAB-6445,21296,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,smithbk,smithbk,04/Oct/17 3:04 PM,05/Oct/17 8:58 AM,26/Apr/18 6:50 AM,05/Oct/17 8:58 AM,,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"The swagger doc needs to be updated to include the ""ecert"" field indicating that
an attribute is to be included in an ecert by default.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01p3h:,,,,,,,,smithbk,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
can't pass make behave test on current master,FAB-6430,21279,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,luomin,luomin,04/Oct/17 3:26 AM,27/Nov/17 4:44 AM,26/Apr/18 6:50 AM,27/Nov/17 4:44 AM,,,,,,,v1.0.2,,,fabric-build,,,,0,build-system,,,,,,,,"luomin@luomin-fabric:/mnt/src/github.com/hyperledger/fabric$ make behave
mkdir -p build/image/peer/payload
cp build/docker/bin/peer build/sampleconfig.tar.bz2 build/image/peer/payload
mkdir -p build/image/ccenv/payload
cp build/docker/gotools/bin/protoc-gen-go build/bin/chaintool build/goshim.tar.bz2 build/image/ccenv/payload
mkdir -p build/image/javaenv/payload
cp build/javashim.tar.bz2 build/protos.tar.bz2 settings.gradle build/image/javaenv/payload
mkdir -p build/image/orderer/payload
cp build/docker/bin/orderer build/sampleconfig.tar.bz2 build/image/orderer/payload
mkdir -p build/image/testenv/payload
cp build/docker/bin/orderer build/docker/bin/peer build/sampleconfig.tar.bz2 images/testenv/install-softhsm2.sh build/image/testenv/payload
mkdir -p build/image/couchdb/payload
cp images/couchdb/docker-entrypoint.sh images/couchdb/local.ini images/couchdb/vm.args build/image/couchdb/payload
mkdir -p build/image/tools/payload
cp build/docker/bin/cryptogen build/docker/bin/configtxgen build/docker/bin/configtxlator build/docker/bin/peer build/sampleconfig.tar.bz2 build/image/tools/payload
Running behave tests
Exception ImportError: No module named 'StringIO'
Traceback (most recent call last):
 File ""/usr/local/bin/behave"", line 11, in <module>
 sys.exit(main())
 File ""/usr/local/lib/python3.5/dist-packages/behave/__main__.py"", line 109, in main
 failed = runner.run()
 File ""/usr/local/lib/python3.5/dist-packages/behave/runner.py"", line 672, in run
 return self.run_with_paths()
 File ""/usr/local/lib/python3.5/dist-packages/behave/runner.py"", line 677, in run_with_paths
 self.load_hooks()
 File ""/usr/local/lib/python3.5/dist-packages/behave/runner.py"", line 631, in load_hooks
 exec_file(hooks_path, self.hooks)
 File ""/usr/local/lib/python3.5/dist-packages/behave/runner.py"", line 304, in exec_file
 exec(code, globals, locals)
 File ""environment.py"", line 8, in <module>
 from steps.docgen import DocumentGenerator
 File ""/mnt/src/github.com/hyperledger/fabric/bddtests/steps/docgen.py"", line 16, in <module>
 from StringIO import StringIO
ImportError: No module named 'StringIO'
Makefile:183: recipe for target 'behave' failed
make: *** [behave] Error 1",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01p05:,,,,,,,,denyeart,luomin,,,,,,,,,,,,,27/Nov/17 4:44 AM;denyeart;I believe this has been fixed.  Please re-open if not.,,,,,,,,,,,,,,,,,,,,,,,
Go SDK configuration filename reused across calls to NewSDK,FAB-6423,21270,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sandrav,ScottMoynes,ScottMoynes,03/Oct/17 5:36 PM,05/Oct/17 7:25 PM,26/Apr/18 6:50 AM,05/Oct/17 7:25 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"When creating {{FabricSDK}}, the configuration filename is reused across calls.

For example, with this code:

{code:none}
package main

import (
	""log""

	deffab ""github.com/hyperledger/fabric-sdk-go/def/fabapi""
	deffabopt ""github.com/hyperledger/fabric-sdk-go/def/fabapi/opt""
)

func main() {
	opts := deffab.Options{
		ConfigFile: """",
		StateStoreOpts: deffabopt.StateStoreOpts{
			Path: ""/var/hyperledger/state"",
		},
	}

	opts.ConfigFile = ""does-not-exist.yaml""
	_, err := deffab.NewSDK(opts)
	if err != nil {
		log.Printf(""Unable to initialize SDK with %s: %s"", opts.ConfigFile, err)
		// => Unable to initialize SDK with does-not-exist.yaml: Failed to initialize config [Fatal error config file: open does-not-exist.yaml: no such file or directory]
	}

	opts.ConfigFile = ""client.yaml""
	_, err = deffab.NewSDK(opts)
	if err != nil {
		log.Printf(""Unable to initialize SDK with %s: %s"", opts.ConfigFile, err)
		// => Unable to initialize SDK with client.yaml: Failed to initialize config [fatal error config file: open does-not-exist.yaml: no such file or directory]
	}
}
{code}

The first call to {{NewSDK}} fails, as expected. However, the second call also fails even if {{client.yaml}} exists. The error message reveals that the previous value for {{opts.ConfigFile}} is reused which is quite unexpected.",,,,,,,,,,,,,,,,,,,,03/Oct/17 5:35 PM;ScottMoynes;sdk-bug.go;https://jira.hyperledger.org/secure/attachment/12203/sdk-bug.go,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:zb,,,,,,,,ScottMoynes,troyronda,ysim,,,,,,,,master,,,true,04/Oct/17 9:42 PM;troyronda;WIP fix at https://gerrit.hyperledger.org/r/#/c/14215/,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - npm warnings should be removed,FAB-6420,21264,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,03/Oct/17 3:21 PM,16/Oct/17 4:52 PM,26/Apr/18 6:50 AM,16/Oct/17 4:51 PM,v1.0.2,,,,,,v1.1,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"There are number of npm install warnings that indicate there are new versions of the packages that should be used.

{color:#333333}```
{color}{color:#333333}npm WARN deprecated node-uuid@{color}{color:#008080}1.4{color}{color:#333333}.{color}{color:#008080}8{color}{color:#333333}: {color}{color:#333333}Use{color}{color:#333333} uuid module instead{color}
{color:#333333}npm WARN deprecated crypto@{color}{color:#008080}0.0{color}{color:#333333}.{color}{color:#008080}3{color}{color:#333333}: This {color}{color:#333333}package{color} {color:#333333}is{color}{color:#333333} no longer supported. It{color}{color:#990073}'s{color}{color:#333333} now a built-{color}{color:#333333}in{color}{color:#333333} Node module. {color}{color:#333333}If{color}{color:#333333} you{color}{color:#990073}'ve{color}{color:#333333} depended {color}{color:#333333}on{color}{color:#333333} crypto, you should switch {color}{color:#333333}to{color}{color:#333333} the one that{color}{color:#990073}'s{color}{color:#333333} built-{color}{color:#333333}in{color}{color:#333333}.{color}
{color:#333333}npm WARN deprecated minimatch@{color}{color:#008080}2.0{color}{color:#333333}.{color}{color:#008080}10{color}{color:#333333}: Please update {color}{color:#333333}to{color}{color:#333333} minimatch {color}{color:#008080}3.0{color}{color:#333333}.{color}{color:#008080}2{color} {color:#333333}or{color}{color:#333333} higher {color}{color:#333333}to{color}{color:#333333} avoid a RegExp DoS issue{color}
{color:#333333}npm WARN deprecated minimatch@{color}{color:#008080}0.2{color}{color:#333333}.{color}{color:#008080}14{color}{color:#333333}: Please update {color}{color:#333333}to{color}{color:#333333} minimatch {color}{color:#008080}3.0{color}{color:#333333}.{color}{color:#008080}2{color} {color:#333333}or{color}{color:#333333} higher {color}{color:#333333}to{color}{color:#333333} avoid a RegExp DoS issue{color}
{color:#333333}npm WARN deprecated graceful-fs@{color}{color:#008080}1.2{color}{color:#333333}.{color}{color:#008080}3{color}{color:#333333}: graceful-fs v3.{color}{color:#008080}0.0{color} {color:#333333}and{color}{color:#333333} before will fail {color}{color:#333333}on{color}{color:#333333} node releases >= v7.{color}{color:#008080}0{color}{color:#333333}. Please update {color}{color:#333333}to{color}{color:#333333} graceful-fs@^{color}{color:#008080}4.0{color}{color:#333333}.{color}{color:#008080}0{color}{color:#333333} as soon as possible. {color}{color:#333333}Use{color} {color:#990073}'npm{color}{color:#333333} ls graceful-fs' {color}{color:#333333}to{color}{color:#333333} find it {color}{color:#333333}in{color}{color:#333333} the tree.{color}
{color:#333333}npm WARN deprecated wrench@{color}{color:#008080}1.3{color}{color:#333333}.{color}{color:#008080}9{color}{color:#333333}: wrench.js {color}{color:#333333}is{color}{color:#333333} deprecated! You should check {color}{color:#333333}out{color}{color:#333333} fs-extra (https://github.com/jprichardson/node-fs-extra) {color}{color:#333333}for{color}{color:#333333} any operations you were using wrench {color}{color:#333333}for{color}{color:#333333}. Thanks {color}{color:#333333}for{color} {color:#333333}all{color}{color:#333333} the usage over the years.{color}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ox9:,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,master,,,true,11/Oct/17 9:07 PM;harrisob@us.ibm.com;Only the {color:#333333}crypto{color} package was controllable by the NodeSDK,16/Oct/17 4:52 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/14437/,,,,,,,,,,,,,,,,,,,,,,
"has to replace the license header in ""sanitycheck.go""",FAB-6414,21257,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,luomin,luomin,luomin,03/Oct/17 11:41 AM,01/Dec/17 7:18 PM,26/Apr/18 6:50 AM,19/Oct/17 5:05 PM,v1.0.3,,,,,,v1.1,,,fabric-orderer,,,,0,build-system,,,,,,,,"has to replace the license header in

common/tools/configtxlator/sanitycheck/sanitycheck.go

 

otherwise, the error below comes out when building the fabric source code:

src/github.com/hyperledger/fabric$ make dist-clean all

....

Checking committed files for SPDX-License-Identifier headers ...
The following files are missing SPDX-License-Identifier headers:
.baseimage-release
common/tools/configtxlator/sanitycheck/sanitycheck.go

Please replace the Apache license header comment text with:
SPDX-License-Identifier: Apache-2.0
Makefile:111: recipe for target 'license' failed",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ovx:,,,,,,,,carlosho17,denyeart,luomin,,,,,,,,master,,,true,17/Oct/17 9:03 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/14171/,"01/Dec/17 7:18 PM;carlosho17;in ""release"" branch, same happens with 

common/ledger/blkstorage/fsblkstorage/blockfile_mgr.go

After replacing the header line, make license ends correctly

Checking committed files for SPDX-License-Identifier headers ...
All files have SPDX-License-Identifier headers

This is from a build tried today 1st Dec by cloning with  

git clone -b release  https://gerrit.hyperledger.org/r/fabric

 ",,,,,,,,,,,,,,,,,,,,,,
clarify that dev mode doesn't work with TLS,FAB-6407,21250,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,03/Oct/17 8:51 AM,03/Oct/17 11:42 AM,26/Apr/18 6:50 AM,03/Oct/17 11:42 AM,v1.1,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,It's best to clarify in the docs that chaincode dev mode cannot work with TLS. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01oud:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca-server does not handle absolute cert/key paths with --cacount,FAB-6405,21244,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,rennman,rennman,02/Oct/17 9:19 PM,26/Nov/17 3:49 PM,26/Apr/18 6:50 AM,26/Nov/17 3:49 PM,v1.1,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"If I use --cacount and absolute pathnames for ca certificate, the DN compare check fails, since the certificate for the top-level and the spawned CA is identical:


{code:java}
// /usr/local/bin/fabric-ca-server start -b admin:adminpw \
    --ca.certfile /tmp/fabric-ca/fabric-ca-cert.pem \
    --ca.keyfile /tmp/fabric-ca/fabric-ca-key.pem  \
    --cacount -2

2017/10/02 21:17:19 [DEBUG] Comparing DNs from certificates: /tmp/fabric-ca/fabric-ca-cert.pem and /tmp/fabric-ca/fabric-ca-cert.pem
2017/10/02 21:17:19 [DEBUG] Loading DNs from certificate /tmp/fabric-ca/fabric-ca-cert.pem
2017/10/02 21:17:19 [DEBUG] Loading DNs from certificate /tmp/fabric-ca/fabric-ca-cert.pem
2017/10/02 21:17:19 [DEBUG] Check to see if two DNs are equal - &{issuer:/C=US/ST=North Carolina/O=Hyperledger/OU=Fabric/CN=fabric-ca-server-ca2 subject:/C=US/ST=North Carolina/O=Hyperledger/OU=Fabric/CN=fabric-ca-server-ca2} and &{issuer:/C=US/ST=North Carolina/O=Hyperledger/OU=Fabric/CN=fabric-ca-server-ca2 subject:/C=US/ST=North Carolina/O=Hyperledger/OU=Fabric/CN=fabric-ca-server-ca2}
2017/10/02 21:17:19 [DEBUG] Issuer distinguished name already in use, checking for unique subject distinguished name
2017/10/02 21:17:19 [DEBUG] Closing server DBs
Error: Please modify CSR in /tmp/fabric-ca/fabric-ca-cert.pem and try adding CA again: Both issuer and subject distinguished name are already in use
{code}
 

However, if I use a relative pathname, it works:
{code:java}
/usr/local/bin/fabric-ca-server start -b admin:adminpw \
 --ca.certfile fabric-ca-cert.pem \
   --ca.keyfile fabric-ca-key.pem \
   --cacount 2
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ot1:,,,,,,,,rennman,smithbk,,,,,,,,,master,,,true,13/Nov/17 5:35 PM;smithbk;https://gerrit.hyperledger.org/r/15439 [FAB-6405] Fix cert/key paths with --cacount,,,,,,,,,,,,,,,,,,,,,,,
fabric-test repo behave tests for env variables cause subsequent test failures,FAB-6397,21236,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,latitiah,scottz,scottz,02/Oct/17 6:18 PM,17/Oct/17 8:44 PM,26/Apr/18 6:50 AM,17/Oct/17 8:44 PM,v1.0.2,,,,,,,,,fabric-quality,,,,0,,,,,,,,,"Behave Tests such as the following, which set config variables and verify their values by retrieving them from the peer/orderer/kafka nodes, seem to pass but must not clean up properly because all subsequent tests fail. I thnk the failures started happening when I added some more env variables to the testcase (which were already in the .env file but were not being verified). I added them so we could provide better coverage, to confirm we could set env variables that are defined in all of the yaml files (configtx, orderer, core).

For now, I inserted skip statements for these, but anyone can reproduce this problem when removing the skip statements and running `behave -t smoke` or `behave -t daily`

+bootstrap.feature+ : (let's insert this new FAB into this scenario title, which has no FAB yet):
 * Scenario: Setting of environment variables

+orderer.feature+
 * FAB-4808: Orderer_BatchTimeOut is honored, for <type> orderer
 * Actually, this test sets, but does not verify, the new value for batchtimeout. Now I don't remember confirming if this caused subsequent failures, but I skipped it anyways to be safe. That was probably unnecessary, because I just noticed that others in ledger and gossip files set env variables (without checking them) and they work fine.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01or9:,,,,,,,,scottz,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - eventHub does not reconnect,FAB-6396,21235,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,02/Oct/17 6:16 PM,05/Oct/17 10:24 AM,26/Apr/18 6:50 AM,05/Oct/17 10:24 AM,v1.0.2,,,,,,v1.1,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,When the event hub takes an error and the connection is shutdown it should be able to recover when a new registration comes in.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01or1:,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,master,,,true,02/Oct/17 6:45 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/14089/,,,,,,,,,,,,,,,,,,,,,,,
Update loopback-connector-fabric version in fabric-sdk-rest package.json,FAB-6395,21234,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,MartinC,rameshthoomu,rameshthoomu,02/Oct/17 6:00 PM,08/Nov/17 9:50 AM,26/Apr/18 6:50 AM,08/Nov/17 9:50 AM,,,,,,,,,,fabric-ci,,,,0,fabric-sdk-rest,,,,,,,,"Update loopback-connector-fabric version in fabric-sdk-rest package.json
{code:java}
00:04:29.527 npm ERR! argv ""/home/jenkins/.nvm/versions/node/v6.9.5/bin/node"" ""/home/jenkins/.nvm/versions/node/v6.9.5/bin/npm"" ""install"" ""fabric-rest""
00:04:29.527 npm ERR! node v6.9.5
00:04:29.528 npm ERR! npm v3.10.10
00:04:29.528 npm ERR! code ETARGET
00:04:29.531 
00:04:29.535 npm ERR! notarget No compatible version found: loopback-connector-fabric@^1.0.0
00:04:29.536 npm ERR! notarget Valid install targets:
00:04:29.536 npm ERR! notarget 1.0.0-snapshot
00:04:29.537 npm ERR! notarget 
00:04:29.538 npm ERR! notarget This is most likely not a problem with npm itself.
00:04:29.538 npm ERR! notarget In most cases you or one of your dependencies are requesting
00:04:29.539 npm ERR! notarget a package version that doesn't exist.
00:04:29.539 npm ERR! notarget 
00:04:29.539 npm ERR! notarget It was specified as a dependency of 'fabric-rest'
00:04:29.540 npm ERR! notarget 
00:04:29.556 {code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01oqt:,,,,,,,,MartinC,rameshthoomu,,,,,,,,,master,,,true,"03/Oct/17 8:45 AM;MartinC;[~rameshthoomu], I have updated the package.json dependency for fabric-rest to be:

""loopback-connector-fabric"": ""^1.0.0-snapshot"",

However it looks like the verify build for [https://gerrit.hyperledger.org/r/c/14111/] is still trying to use version 1.0.0 rather than 1.0.0-snapshot.

 

npm ERR! Linux 4.4.0-47-generic

npm ERR! argv ""/home/jenkins/.nvm/versions/node/v6.9.5/bin/node"" ""/home/jenkins/.nvm/versions/node/v6.9.5/bin/npm"" ""install"" ""fabric-rest""

npm ERR! node v6.9.5

npm ERR! npm v3.10.10

npm ERR! code ETARGET

npm ERR! notarget No compatible version found: loopback-connector-fabric@^1.0.0

npm ERR! notarget Valid install targets:

npm ERR! notarget 1.0.0-snapshot

 ","16/Oct/17 11:50 AM;MartinC;[~rameshthoomu] thanks for fixing the verify build.

I can see failures that look like the merge build is also failing because it is cloning the master branch. Do you want a separate work item for that problem?",16/Oct/17 3:47 PM;rameshthoomu;[~MartinC] seems the patch sets which are merged recently are not rebased based on the your fix. Please rebase patch and merge. It should work. Configuration for both verify and merge jobs are same and it works based on the change set.,,,,,,,,,,,,,,,,,,,,,
node.js chaincode docker build misses hidden files in chaincode package,FAB-6384,21222,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix@gmail.com,jimthematrix@gmail.com,jimthematrix@gmail.com,02/Oct/17 2:57 PM,05/Oct/17 3:39 PM,26/Apr/18 6:50 AM,03/Oct/17 7:40 AM,,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,"There is a bug in the fabric side. The command that copies the files from input to output doesn't copy hidden files
 ie
{noformat}
	err := util.DockerBuild(util.DockerBuildOptions{
		Cmd:          fmt.Sprint(""cp -R /chaincode/input/src/* /chaincode/output && cd /chaincode/output && npm install -production""),
		InputStream:  codepackage,
		OutputStream: binpackage,
	})
{noformat}
It's present in the input/src but not present in output and it's due to the use of * as a wild card delimiter I think, and it is. It looks like this should work
{noformat}
	err := util.DockerBuild(util.DockerBuildOptions{
		Cmd:          fmt.Sprint(""cp -R /chaincode/input/src/. /chaincode/output && cd /chaincode/output && npm install -production""),
		InputStream:  codepackage,
		OutputStream: binpackage,
	})
{noformat}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ood:,,,,,,,,jimthematrix@gmail.com,,,,,,,,,,master,,,true,02/Oct/17 6:24 PM;jimthematrix@gmail.com;https://gerrit.hyperledger.org/r/#/c/14083/,,,,,,,,,,,,,,,,,,,,,,,
Properly log x509 certificates - take II,FAB-6354,21096,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,29/Sep/17 7:50 PM,04/Oct/17 4:20 PM,26/Apr/18 6:50 AM,04/Oct/17 4:20 PM,v1.1,,,,,,,,,fabric-crypto,,,,0,,,,,,,,,"https://gerrit.hyperledger.org/r/#/c/12439/7/msp/identities.go removed the fix of https://gerrit.hyperledger.org/r/#/c/12321/

Now the bccsp msp once again logs certificates as:
{code}
2017-09-29 19:44:43.682 UTC [msp/identity] newIdentity -> DEBU 037 Creating identity instance for cert &{0�^B^X0�^A��^C^B^A^B^B^P4���^M��^@�9��^_ϻ^X0
^F^H*�H�=^D^C^B0s1^K0   ^F^CU^D^F^S^BUS1^S0^Q^F^CU^D^H^S
California1^V0^T^F^CU^D^G^S^MSan Francisco1^Y0^W^F^CU^D
^S^Porg2.example.com1^\0^Z^F^CU^D^C^S^Sca.org2.example.com0^^^W^M170929194441Z^W^M270927194441Z0[1^K0   ^F^CU^D^F^S^BUS1^S0^Q^F^CU^D^H^S
California1^V0^T^F^CU^D^G^S^MSan Francisco1^_0^]^F^CU^D^C^S^Vpeer1.org2.example.com0Y0^S^F^G*�H�=^B^A^F^H*�H�=^C^A^G^CB^@^D���|^@^Va&y^\+~��^T�
������P'WOJ�^S�n��^\��Vd�T�^F^C�[ITkY�B.z�D��P����\�M0K0^N^F^CU^]^O^A^A�^D^D^C^B^G�0^L^F^CU^]^S^A^A�^D^B0^@0+^F^CU^]#^D$0""� ��e5^AP�Dٞ^P�U9��T^YdƷ6dY^?���''V�0
^F^H*�H�=^D^C^B^CG^@0D^B ^O^D��S��t�-E^Z�q^U1^^S^K�^Z��g*�����@�^B f4Y�Uk������^E�qs6^L12>�)^@�b��y?^L| 0�^A��^C^B^A^B^B^P4���^M��^@�9��^_ϻ^X0
^F^H*�H�=^D^C^B0s1^K0   ^F^CU^D^F^S^BUS1^S0^Q^F^CU^D^H^S
California1^V0^T^F^CU^D^G^S^MSan Francisco1^Y0^W^F^CU^D
^S^Porg2.example.com1^\0^Z^F^CU^D^C^S^Sca.org2.example.com0^^^W^M170929194441Z^W^M270927194441Z0[1^K0   ^F^CU^D^F^S^BUS1^S0^Q^F^CU^D^H^S
California1^V0^T^F^CU^D^G^S^MSan Francisco1^_0^]^F^CU^D^C^S^Vpeer1.org2.example.com0Y0^S^F^G*�H�=^B^A^F^H*�H�=^C^A^G^CB^@^D���|^@^Va&y^\+~��^T�
������P'WOJ�^S�n��^\��Vd�T�^F^C�[ITkY�B.z�D��P����\�M0K0^N^F^CU^]^O^A^A�^D^D^C^B^G�0^L^F^CU^]^S^A^A�^D^B0^@0+^F^CU^]#^D$0""� ��e5^AP�Dٞ^P�U9��T^YdƷ6dY^?���''V� 0Y0^S^F^G*�H�=^B^A^F^H*�H�=^C^A^G^CB^@^D���|^@
^Va&y^\+~��^T�
������P'WOJ�^S�n��^\��Vd�T�^F^C�[ITkY�B.z�D��P����\ 0[1^K0      ^F^CU^D^F^S^BUS1^S0^Q^F^CU^D^H^S
California1^V0^T^F^CU^D^G^S^MSan Francisco1^_0^]^F^CU^D^C^S^Vpeer1.org2.example.com 0s1^K0      ^F^CU^D^F^S^BUS1^S0^Q^F^CU^D^H^S
California1^V0^T^F^CU^D^G^S^MSan Francisco1^Y0^W^F^CU^D
{code}


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ohh:,,,,,,,,yacovm,,,,,,,,,,master,,,true,29/Sep/17 8:01 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/13987/,,,,,,,,,,,,,,,,,,,,,,,
[fabric-test] Network Launcher fails due to missing parameters,FAB-6353,21095,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yuki-kon,yuki-kon,yuki-kon,29/Sep/17 6:38 PM,03/Nov/17 6:06 PM,26/Apr/18 6:50 AM,03/Nov/17 6:06 PM,v1.0.2,,,,,,,,,fabric-quality,,,,0,,,,,,,,,"Network Launcher fails due to missing parameters.
- Default value is different between scripts.
- Some parameters don’t have default value.
- The name of args to call a sub-script is not correct.

We need to modify Network Launcher to pass parameters correctly.
",fabric-test commit 551302eaed8dbbdeccdee497a5673e67fd9e86ae,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-6742,0|i01oh9:,,,,,,,,yuki-kon,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Unable to instantiate node chaincode ,FAB-6352,21094,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Ratnakar,Ratnakar,Ratnakar,29/Sep/17 6:38 PM,30/Sep/17 12:40 AM,26/Apr/18 6:50 AM,30/Sep/17 12:40 AM,,,,,,,,,,fabric-chaincode-node,,,,0,,,,,,,,,"integration tests are failing due to chaincode instantiation failure.

Due to recent changes in Fabric [FAB-6280|https://gerrit.hyperledger.org/r/#/c/13785/] ,  package.json expects the file name hence scripts need to be updated.

 Adding package.json with script will fix this issue.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01oh1:,,,,,,,,Ratnakar,,,,,,,,,,master,,,true,29/Sep/17 7:17 PM;Ratnakar;https://gerrit.hyperledger.org/r/#/c/13979/,,,,,,,,,,,,,,,,,,,,,,,
orderer version command not outputting proper version,FAB-6351,21093,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,29/Sep/17 6:26 PM,03/Oct/17 8:49 AM,26/Apr/18 6:50 AM,01/Oct/17 11:04 AM,v1.0.2,,,,,,v1.0.3,v1.1,,fabric-orderer,,,,0,,,,,,,,,"Running 
{code:java}
orderer version
{code}
is always outputting ""development build""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ogt:,,,,,,,,mastersingh24,,,,,,,,,,release-1.0,master,,true,"29/Sep/17 7:17 PM;mastersingh24;https://gerrit.hyperledger.org/r/13983
https://gerrit.hyperledger.org/r/13989",,,,,,,,,,,,,,,,,,,,,,,
DeliverService CI failure due to Server.RegisterService after Server.Serve,FAB-6350,21092,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,29/Sep/17 6:11 PM,04/Oct/17 4:20 PM,26/Apr/18 6:50 AM,04/Oct/17 4:20 PM,v1.0.2,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,"The orderer service mock in the deliver service package tries to register a gRPC server after serve might be called.

This is forbidden in the latest gRPC version.

the error is:
{code}
17:39:38 unit-tests_1  | 2017-09-29 17:39:38.437 UTC [grpc] Fatalf -> CRIT 06a grpc: Server.RegisterService after Server.Serve for ""orderer.AtomicBroadcast""
17:39:38 unit-tests_1  | FAIL	github.com/hyperledger/fabric/core/deliverservice	7.090s
17:39:38 unit-tests_1  | error: exit status 1
17:39:38 unit-tests_1  | panic: EOF
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ogl:,,,,,,,,yacovm,,,,,,,,,,master,,,true,29/Sep/17 6:30 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/13977/,,,,,,,,,,,,,,,,,,,,,,,
DEV Mode - Documentation to be corrected to start chaincode at right port,FAB-6349,21090,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Amjadnz,Amjadnz,Amjadnz,29/Sep/17 5:12 PM,30/Sep/17 11:45 AM,26/Apr/18 6:50 AM,30/Sep/17 11:45 AM,,,,,,,v1.1,,,,,,29/Sep/17 12:00 AM,0,,,,,,,,,"In the current setup guide in DEV MODE at [http://hyperledger-fabric.readthedocs.io/en/latest/peer-chaincode-devmode.html?highlight=dev-mode] the URL to start the Chaincode is provided as ""7051"" in essence as this port is already in use by PEER when starting up - a new port has to be provided.

So 7052 has to be used instead.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01og5:,,,,,,,,Amjadnz,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
nodehcaincode tests are failing due to recent merge of FAB-6280,FAB-6348,21088,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Ratnakar,Ratnakar,Ratnakar,29/Sep/17 4:53 PM,29/Sep/17 7:26 PM,26/Apr/18 6:50 AM,29/Sep/17 7:26 PM,,,,,,,,,,fabric-quality,,,,0,quality,,,,,,,,"Due to the recent merge of https://gerrit.hyperledger.org/r/#/c/13785/ nodechaincode related tests are failing. 
Need to add the chaincode name as part of the package.json will fix the issue. This also allows us to change the chaincode file name.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ofp:,,,,,,,,Ratnakar,,,,,,,,,,master,,,true,29/Sep/17 6:39 PM;Ratnakar;https://gerrit.hyperledger.org/r/#/c/13973/,,,,,,,,,,,,,,,,,,,,,,,
Change Printf to Log,FAB-6343,21075,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,troyronda,troyronda,29/Sep/17 2:14 AM,02/Oct/17 2:38 PM,26/Apr/18 6:50 AM,02/Oct/17 2:38 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"in non *_test.go:

pkg/fabric-ca-client/mocks/mockfabriccaserver.go: fmt.Println(""HTTP Server started on :"" + address)

pkg/fabric-client/credentialmgr/credentialmgr.go: fmt.Printf(""Reading file %s\n"", fullName)

pkg/fabric-client/events/consumer/consumer.go: fmt.Printf(""error on Register send %s\n"", err)

pkg/fabric-client/events/eventmocks.go: fmt.Printf(""MockCCBlockEventBuilder.buildPayload\n"")",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01od9:,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
DefaultLogger can print logger as caller,FAB-6342,21074,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,troyronda,troyronda,29/Sep/17 1:45 AM,29/Sep/17 6:30 PM,26/Apr/18 6:50 AM,29/Sep/17 6:30 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01od1:,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Is mkdocs.yml necessary?,FAB-6341,21073,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,nnao,nnao,28/Sep/17 9:28 PM,02/Nov/17 7:45 PM,26/Apr/18 6:50 AM,02/Nov/17 7:45 PM,v1.0.2,,,,,,v1.1,,,fabric-docs,,,,0,Documentation,,,,,,,,"Is mkdocs.yml necessary?
[https://github.com/hyperledger/fabric/blob/release/mkdocs.yml]

I think this file was used by GitHub. But now fabric uses sphinx.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01oct:,,,,,,,,joe-alewine,nnao,,,,,,,,,master,,,true,28/Sep/17 11:01 PM;nnao;https://gerrit.hyperledger.org/r/#/c/13947/,26/Oct/17 4:19 PM;joe-alewine;Have posted gerrit link in fabric-pr-review.,26/Oct/17 4:25 PM;nnao;[~joe-alewine] Thanks!,,,,,,,,,,,,,,,,,,,,,
Peer commands from CLI container fail when CORE_LOGGING_LEVEL is not set,FAB-6338,21070,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,wlahti,wlahti,28/Sep/17 7:45 PM,06/Nov/17 7:00 PM,26/Apr/18 6:50 AM,06/Nov/17 7:00 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"While modifying some logging parameters on the peer side and testing combinations of CORE_LOGGING_LEVEL set and not set, I found a bug where peer commands from the CLI, such as `peer channel fetch` in the e2e_cli example, fail when CORE_LOGGING_LEVEL is not set. This causes the e2e_cli to fail:
{code:java}
Channel name : mychannel
Check orderering service availability...
Attempting to fetch system channel 'testchainid' ...3 secs
Attempting to fetch system channel 'testchainid' ...7 secs
Attempting to fetch system channel 'testchainid' ...10 secs
.
.
.
Attempting to fetch system channel 'testchainid' ...62 secs
2017-09-27 12:56:40.485 UTC [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized
2017-09-27 12:56:40.488 UTC [main] main -> INFO 002 Exiting.....
!!!!!!!!!!!!!!! Ordering Service is not available, Please try again ... !!!!!!!!!!!!!!!!
================== ERROR !!! FAILED to execute End-2-End Scenario ==================

{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01oc5:,,,,,,,,jeffgarratt,wlahti,,,,,,,,,,,,,26/Oct/17 7:36 PM;jeffgarratt;[~wlahti] Is this one still an issue?,"06/Nov/17 7:00 PM;wlahti;After further inspection, this is just how the e2e_cli test for checkOSNAvailability() works. The log level for the CLI container must be set to debug in order to receive the message it looks for in the log:
{code:java}
2017-11-06 18:57:40.894 UTC [channelCmd] readBlock -> DEBU 034 Received block: 0{code}
If it isn't set or is set to any value other than debug, the e2e_cli will fail even though the command itself succeeded. ",,,,,,,,,,,,,,,,,,,,,,
Invoke fails intermittently even when kafka ISR_SET has only one broker in it.,FAB-6335,21066,Bug,Unverified,FAB,Fabric,software,ChristopherFerris,,,Medium,,latitiah,Nishi,Nishi,28/Sep/17 4:16 PM,26/Jan/18 12:33 AM,26/Apr/18 6:50 AM,,v1.0.2,,,,,,Future,,,fabric-quality,,,,0,ci_failure,kafka,quality,,,,,,"Fabric-Commit level: *7c12814766d4e613668b0460d709cca87e740a6a*

Steps to reproduce:

1. Build hyperledger fabric images
 2. Get fabric-test latest repo.
 3. From fabric-test folder run: git submodule update --init --recursive (only the first time)
 Note: If you build images subsequently please run : git submodule foreach git pull origin master
 4. cd ""github.com/hyperledger/fabric-test/feature""
 5. run: behave -n 4770 

Expected Result:
 All the test scenarios (stop/start, pause/unpause & connect/disconnect) to pass.

Actual Result:

--FAB-4770-- passes for stop/start, occasionally fails for pause/unpause, and connect/disconnect;

 

Please find kafka broker logs + orderer logs attached here.",,,,,,,,,,,,,,,,,,,,10/Oct/17 3:48 AM;sanchezl;Screen Shot 2017-10-09 at 11.39.29 PM.png;https://jira.hyperledger.org/secure/attachment/12404/Screen+Shot+2017-10-09+at+11.39.29+PM.png,10/Oct/17 3:48 AM;sanchezl;Screen Shot 2017-10-09 at 11.40.01 PM.png;https://jira.hyperledger.org/secure/attachment/12405/Screen+Shot+2017-10-09+at+11.40.01+PM.png,28/Sep/17 3:32 PM;Nishi;logs-4770.tar.gz;https://jira.hyperledger.org/secure/attachment/12147/logs-4770.tar.gz,10/Oct/17 3:52 AM;sanchezl;manager.sh;https://jira.hyperledger.org/secure/attachment/12406/manager.sh,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01obh:,,,,,,,,denyeart,kchristidis,latitiah,Nishi,sanchezl,scottz,,,,,master,,,true,"02/Oct/17 3:48 PM;scottz;I upgraded this to a High issue, since it is causing failure of test scenarios in fabric-test CI test suite. And because data integrity is potentially compromised, depending on subsequent sequence of events (although I am not sure about that).","08/Oct/17 3:18 PM;kchristidis;Thank you for including steps to reproduce and attaching logs to the bug report.

I need however two clarifications on the high-level description:
 # The issue here is that invoke commands _succeeds_ intermittently when only one broker is up when your expectation is that it should always fail. True/false?
 # Concretely, what is the line in the behave test (see FAB-4770) that triggers the error? As best as I can tell, you only invoke when all brokers are down. Let me know what I'm missing.","09/Oct/17 1:16 PM;scottz;# Correct. It succeeds when it should fail.
 # Refer to lines 220-225 in orderer.feature. We identify the 3 kafkabrokers in the RF set, take one down, invoke, take a 2nd one down, invoke (line 220). This is the step that succeeds instead of failing as expected. The subsequent query shows 970 instead of 980. https://github.com/hyperledger/fabric-test/blob/master/feature/orderer.feature#L225","10/Oct/17 3:53 AM;sanchezl;Observations during a run that reproduced the issue:

kafka0 & kafka3 were shutdown during the test:

!Screen Shot 2017-10-09 at 11.39.29 PM.png|thumbnail!

kafka3 did not contain a replica for behavesystest/0 , so behavesystest/0 still had 2 in-sync replicas:

!Screen Shot 2017-10-09 at 11.40.01 PM.png|thumbnail!

It seems that the step implementation for ""When I *stop* the current kafka topic partition leader"" sometimes picks the wrong kafka broker to stop.

 ",27/Nov/17 2:31 AM;denyeart;[~latitiah] Any update on this one?,"11/Dec/17 4:10 PM;latitiah;This is currently on my list, but lower priority at the time than my other tasks. I'll get to it as soon as I can.",08/Jan/18 2:50 AM;denyeart;Lowering to Medium since this is a lower priority test issue.,,,,,,,,,,,,,,,,,
fabric-ca-client should not require the user to specify -M option when msp is not in client home,FAB-6332,21047,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,aambati,aambati,28/Sep/17 3:18 PM,25/Oct/17 3:12 PM,26/Apr/18 6:50 AM,25/Oct/17 3:12 PM,v1.0.2,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"fabric-ca-client should not require the user to specify -M option when msp is not in client home

If msp directory (/tmp/msp) is not in the client home (~/caclient) when the bootstrap user was enrolled, then fabric-ca-client requires -M option to be specified every time another command is invoked. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01o79:,,,,,,,,aambati,,,,,,,,,,master,,,true,17/Oct/17 7:30 PM;aambati;https://gerrit.hyperledger.org/r/c/14023/,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca unit-tests leave crums all over,FAB-6328,21043,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lehors,lehors,lehors,28/Sep/17 12:34 PM,08/Jan/18 3:12 PM,26/Apr/18 6:50 AM,08/Jan/18 3:12 PM,v1.0.2,,,,,,v1.1.0-alpha,,,fabric-ca,,,,0,quality,,,,,,,,"The unit-tests are not independent from one another and don't clean up after themselves. A lot of temporary files are left behind, not just in /tmp but in the source hierarchy.

FAB-5426 moves us in the right direction but more needs to be done.

This can be demonstrated by doing the following for instance:

fabric-ca/lib $ go test -run CLIClient >log 2>&1

fabric-ca/lib $ git status

On branch master
Your branch is up-to-date with 'origin/master'.
Untracked files:
  (use ""git add <file>..."" to include in what will be committed)

    log
    testservers/
    ../testdata/msp/

nothing added to commit but untracked files present (use ""git add"" to track)

fabric-ca/lib $ go test >log 2>&1

fabric-ca/lib $ ls -l /tmp
total 44
drwxr-xr-x 2 lehors lehors 4096 Sep 28 14:36 dbtesting
drwx------ 2 lehors lehors 4096 Sep 28 14:35 keystore
drwxr-xr-x 2 lehors lehors 4096 Sep 28 14:35 signcerts
...",This is independent of the environment.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01o6d:,,,,,,,,lehors,smithbk,,,,,,,,,master,,,true,"07/Nov/17 6:34 PM;smithbk;Arnaud, is this already merged?  If yes, please mark as done; otherwise, please paste the change set here.","09/Nov/17 4:38 PM;lehors;Sorry, I submitted a CR a while ago for this but it became out of sync with master while waiting to be merged and I have not had a chance to fix it.

Unfortunately as new tests with similar flaws get added to the repo the situation gets worse making this effort a bit like a never ending chasing game.

I will try to get to it early next week. Here is the related CR:

https://gerrit.hyperledger.org/r/c/14191/",,,,,,,,,,,,,,,,,,,,,,
README.md license text is confusing,FAB-6326,21041,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,tkuhrt,tkuhrt,28/Sep/17 11:44 AM,17/Oct/17 8:59 PM,26/Apr/18 6:50 AM,17/Oct/17 8:59 PM,,,,,,,v1.0.4,v1.1,,,,,,0,,,,,,,,,"At the bottom of [https://github.com/hyperledger/fabric] it shows the README.md file, which states the following for license info: ""This work is licensed under a Creative Commons Attribution 4.0 International License.""
 
Although the separate LICENSE text file contains the Apache license text, downstream users of the project who see the README file may interpret this to say that all of the Hyperledger code is released under Creative Commons Attribution -- rather than just the documentation being CC-BY-4.0, and the code being Apache 2.0. The Hyperledger fabric-chaintool repo is somewhat clearer - see [https://github.com/hyperledger/fabric-chaintool] - but could be clarified a bit further.
 
I'd suggest changing the README.md file for each Hyperledger repo to the following:
{quote}Hyperledger Project source code files are made available under the Apache License, Version 2.0 (Apache-2.0), located in the LICENSE file. Hyperledger Project documentation files are made available under the Creative Commons Attribution 4.0 International License (CC-BY-4.0), available at [http://creativecommons.org/licenses/by/4.0/].{quote}
 
This can be used as the license information in the top-level README.md file for fabric, fabric-chaintool and any other Hyperledger codebase. Each codebase should then also contain the Apache 2.0 text in the top-level LICENSE file, as in the fabric codebase as an example.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01o5x:,,,,,,,,denyeart,tkuhrt,,,,,,,,,release,release-1.0,master,true,"17/Oct/17 8:59 PM;denyeart;Looks like all subtasks are merged, marking as Done.",,,,,,,,,,,,,,,,,,,,,,,
fabric-ca expects certificate chains in the wrong order,FAB-6321,21032,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,vdods,vdods,28/Sep/17 12:46 AM,29/Nov/17 2:59 PM,26/Apr/18 6:50 AM,29/Nov/17 2:59 PM,,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"TLS 1.2 RFC (see links below) specifies that a cert chain must come host-first, and that each successive cert must be the issuer of the previous.  See ""certificate_list"" and surrounding paragraphs on page 47/48
{noformat}
certificate_list
      This is a sequence (chain) of certificates.  The sender's
      certificate MUST come first in the list.  Each following
      certificate MUST directly certify the one preceding it.  Because
      certificate validation requires that root keys be distributed
      independently, the self-signed certificate that specifies the root
      certificate authority MAY be omitted from the chain, under the
      assumption that the remote end must already possess it in order to
      validate it in any case.{noformat}
This ordering is expected by golang's http package where, for example in mutual TLS, the https server would load the server's cert chain (server's cert first in the chain) and key when calling ListenAndServeTLS, e.g.
{code:java}
server.ListenAndServeTLS(""server-cert-chain.pem"", ""server-key.pem"")
{code}
and the client (also using golang's http package) would configure TLS by loading its cert chain (the client's cert first in the chain) and key, e.g.
{code:java}
tls.LoadX509KeyPair(""client-cert-chain.pem"", ""client-key.pem"")
{code}
However, the `ca.chainfile` config var in fabric-ca apparently requires the chain to come host-last, which directly contradicts the TLS RFC.  I recommend switching the order to what's expected by the RFC.

 

[http://www.rfc-base.org/rfc-5246.html]

[http://www.rfc-base.org/txt/rfc-5246.txt]

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01o4d:,,,,,,,,smithbk,vdods,,,,,,,,,master,,,true,07/Nov/17 6:36 PM;smithbk;https://gerrit.hyperledger.org/r/#/c/14841/,,,,,,,,,,,,,,,,,,,,,,,
Fix linter warning,FAB-6313,21022,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,troyronda,troyronda,27/Sep/17 2:54 PM,28/Sep/17 5:36 PM,26/Apr/18 6:50 AM,27/Sep/17 5:14 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01o25:,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Inconsistency in docs and source code structure ,FAB-6307,21011,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,joe-alewine,luomin,luomin,27/Sep/17 1:36 AM,31/Oct/17 1:27 PM,26/Apr/18 6:50 AM,27/Oct/17 12:15 PM,,,,,,,v1.0.2,v1.0.4,v1.1,fabric-docs,,,,0,Documentation,,,,,,,,"The source code under ""fabric-samples/fabcar"" directory has been changed while the description in the page of ""Writing Your First Application"" is not updated.

Old

You should see the following:
chaincode invoke.js network package.json query.js startFabric.sh
New

You should see the following:
creds invoke.js package.json query.js startFabric.sh",,,,7200,7200,,0%,7200,7200,,,,,,,,FAB-6789,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01o05:,,,,,,,,joe-alewine,luomin,,,,,,,,,release-1.0,master,,true,26/Oct/17 3:34 PM;joe-alewine;https://gerrit.hyperledger.org/r/c/14887/,"27/Oct/17 1:45 AM;luomin;[~joe-alewine], [~markparz] Hi, thanks for taking care of this issue. May I know the reason of this change? thank you!","27/Oct/17 12:26 PM;joe-alewine;A creds folder was added to allow a proper user enroll with fabcar (if you open up fabcar in a reader you'll see that the folder contains a private key, a cert, and a PeerAdmin that has the cert enrolled in it).

Fabcar now also leverages the ""basic-network"" instead of the network it used before (which is why the ""network"" and ""chaincode"" files are no longer there.",,,,,,,,,,,,,,,,,,,,,
Missing json tag for attribute on enrollment request,FAB-6302,21006,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,smithbk,smithbk,26/Sep/17 6:55 PM,05/Oct/17 9:00 AM,26/Apr/18 6:50 AM,05/Oct/17 9:00 AM,,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"The enrollment request is not recognizing the ""attr_reqs"" field of the enrollment request.
This is because there is no json tag on the struct that is deserialized by the server.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01nz9:,,,,,,,,smithbk,,,,,,,,,,master,,,true,26/Sep/17 7:11 PM;smithbk;https://gerrit.hyperledger.org/r/13853,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca-server index out of range for serverregister,FAB-6301,21005,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,rennman,rennman,26/Sep/17 5:26 PM,19/Oct/17 7:28 PM,26/Apr/18 6:50 AM,19/Oct/17 7:28 PM,,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"When handling register request, we aren't checking that hf.Registrar.Roles exists, only that no error is returned from ctx.GetUserInfo() :
 registrarRolesAttr, registrarAffiliation, err := ctx.GetUserInfo([]string\{""hf.Registrar.Roles""})
 if err != nil \{
 return """", fmt.Errorf(""Failed to get user info for registrar: %s"", err)
 }

Consequently, if hf.Registrar.Roles is not defined for the ID making the request, the servers panics:



2017/09/26 17:15:40 http: panic serving 127.0.0.1:57152: runtime error: index out of range
goroutine 20 [running]:
net/http.(*conn).serve.func1(0xc42041e500)
    /opt/go/src/net/http/server.go:1491 +0x12a
panic(0xab8d20, 0xc420016110)
    /opt/go/src/runtime/panic.go:458 +0x243
github.com/hyperledger/fabric-ca/lib.registerHandler(0xc42041e700, 0xc42041e700, 0x0, 0x0, 0x1)
    /opt/gopath/src/github.com/hyperledger/fabric-ca/lib/serverregister.go:65 +0x445
github.com/hyperledger/fabric-ca/lib.(*serverEndpoint).ServeHTTP(0xc42042a0f0, 0x10777c0, 0xc4203fcf70, 0xc42041a1e0)
    /opt/gopath/src/github.com/hyperledger/fabric-ca/lib/serverendpoint.go:44 +0xc93
net/http.(*ServeMux).ServeHTTP(0xc42042a030, 0x10777c0, 0xc4203fcf70, 0xc42041a1e0)
    /opt/go/src/net/http/server.go:2022 +0x7f
net/http.serverHandler.ServeHTTP(0xc42041e480, 0x10777c0, 0xc4203fcf70, 0xc42041a1e0)
    /opt/go/src/net/http/server.go:2202 +0x7d
net/http.(*conn).serve(0xc42041e500, 0x1078180, 0xc420426300)
    /opt/go/src/net/http/server.go:1579 +0x4b7
created by net/http.(*Server).Serve
    /opt/go/src/net/http/server.go:2293 +0x44d

 

A potential fix is to check that registrarRolesAttr isn't nil before using it:

 registrarRolesAttr, registrarAffiliation, err := ctx.GetUserInfo([]string\{""hf.Registrar.Roles""})
...

+ if len(registrarRolesAttr) >=0 \{
+ return """", fmt.Errorf(""Failed to get roles info for registrar: %s"", callerID)
+ }",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01nz1:,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca compareDN method incomplete,FAB-6299,21002,Bug,In Review,FAB,Fabric,software,ChristopherFerris,,,Medium,,rennman,rennman,rennman,26/Sep/17 4:55 PM,12/Apr/18 8:30 PM,26/Apr/18 6:50 AM,,,,,,,,Future,,,fabric-ca,,,,0,,,,,,,,,"The getDNFromCert() method from lib/server.go does not account for all of the potential RDNs that may be present in the certificate. The code currently iterates over the list returned by
(Name) [ToRDNSequence|https://golang.org/src/crypto/x509/pkix/pkix.go?s=3835:3882#L122]

However, this is only a subset of the potential RDN fields contained in the certificate, namely
Country
Province
Locality
StreetAddress
PostalCode
Organization
OrganizationalUnit
CommonName
SerialNumber

+ whatever happens to be in the ExtraNames list structure.
By iterating over all of the Names:
  for _, i := range namespace.Names 

the list will contain all of the RDNs in []Names",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9n6r,,,,,,,,ChristopherFerris,rennman,,,,,,,,,master,,,true,15/Nov/17 9:14 PM;rennman;[https://gerrit.hyperledger.org/r/#/c/13845/] – Update getDNFromCert() method,05/Apr/18 5:38 PM;ChristopherFerris;[~rennman] are you still pursuing this? [~smithbk] left some comments in the CR but has not been touched since.,"06/Apr/18 5:14 PM;rennman;There's been a difference of interpretation regarding the display of DNs.  Notwithstanding the dispute, this is actually good timing since I've been investigating the go1.10 release documentation including updates to crypto/x509/pkix. It now implements a String() method that formats the X.509 distinguished name in the standard RFC 2253 format. The fact still remains that the RDNs displayed are limited to those returned by toRDNSequence(), which apparently by design *only include the common elements* of a DN. While all elements stored in Names (including those which are non-standard) *are available* in the pkix.Name object, and  *can* be extracted from there, we chose not to. So it makes sense to exploit the pkix package-provided 
h3. func (Name) [String|https://golang.org/src/crypto/x509/pkix/pkix.go?s=6060:6089#L216]

method for simplicity and consistency. I've updated the CR accordingly.",,,,,,,,,,,,,,,,,,,,,
remove test TestStoreConcurrentReadWrite,FAB-6288,20988,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,25/Sep/17 6:57 PM,04/Oct/17 4:20 PM,26/Apr/18 6:50 AM,04/Oct/17 4:20 PM,v1.1,,,,,,v1.1,,,fabric-ledger,,,,0,,,,,,,,,"-The goroutine that performs a write might not finish in time and the test goroutine might finish before it - which would cleanup the ledger while the write is being performed - thus resulting in a panic.-

 

This test checks a specific concurrent execution path that
 resulted in a deadlock, but now after it is fixed, it makes
 no sense to keep this test anymore in CI.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01nvp:,,,,,,,,yacovm,,,,,,,,,,master,,,true,25/Sep/17 7:00 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/13815/,,,,,,,,,,,,,,,,,,,,,,,
There is no link from other pages,FAB-6276,20973,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,nnao,nnao,22/Sep/17 10:50 PM,28/Sep/17 6:53 AM,26/Apr/18 6:50 AM,28/Sep/17 6:53 AM,v1.0.2,,,,,,,,,fabric-docs,,,,0,,,,,,,,," I found this page. But there is no link from other pages. This document is old.

[http://hyperledger-fabric.readthedocs.io/en/latest/Setup/TLSSetup.html]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01nst:,,,,,,,,nnao,,,,,,,,,,master,,,true,23/Sep/17 5:40 AM;nnao;https://gerrit.hyperledger.org/r/#/c/13753/,,,,,,,,,,,,,,,,,,,,,,,
lscc - chain code name missing in error message,FAB-6267,20960,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Hangyu_FJH,harrisob@us.ibm.com,harrisob@us.ibm.com,22/Sep/17 12:46 PM,06/Nov/17 4:00 AM,26/Apr/18 6:50 AM,06/Nov/17 4:00 AM,v1.1,,,,,,v1.1,,,fabric-endorser,,,,0,,,,,,,,,"The chaincodeName should be used here not chainName in

*lscc.go*

    // check for existence of chaincode instance only (it has to exist on the channel)
    // we dont care about the old chaincode on the FS. In particular, user may even
    // have deleted it
    cdbytes, _ := lscc.getCCInstance(stub, chaincodeName)
    if cdbytes == nil \{
        return nil, NotFoundErr(chainName)
    }",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01nq5:,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
cryptogen should generate CA certificates which are valid 5 minutes in the past,FAB-6251,20943,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,21/Sep/17 12:15 AM,28/Sep/17 3:42 PM,26/Apr/18 6:50 AM,28/Sep/17 3:42 PM,v1.0.0,,,,,,v1.0.3,v1.1,,fabric-tools,,,,0,,,,,,,,,"cryptogen currently generates root CAs for each organization and uses the current time for the not valid before date.  This works fine when you only use cryptogen, but if you then try to use the CA certs with fabric-ca, clients who enroll will have their transactions rejected since their certificate will be valid before the CA which signed it  (fabric-ca sets not valid before to current time - 5 min).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01nn1:,,,,,,,,mastersingh24,,,,,,,,,,release-1.0,master,,true,23/Sep/17 12:48 PM;mastersingh24;Marking this as a bug since the original intent for cryptogen was to be able to use the root CA keypair to spin up a fabric-ca,"23/Sep/17 1:05 PM;mastersingh24;https://gerrit.hyperledger.org/r/13759

https://gerrit.hyperledger.org/r/13761",,,,,,,,,,,,,,,,,,,,,,
Kafka Orderer crashes when creating a channel,FAB-6250,20941,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,JohnWhitton,JohnWhitton,20/Sep/17 9:46 PM,19/Oct/17 9:13 PM,26/Apr/18 6:50 AM,17/Oct/17 12:32 AM,,,,,,,,,,fabric-orderer,,,,0,kafka,,,,,,,,"When I try to create a channel on a newly deployed network with a Kafka-backed orderer (via peer channel create), the orderer crashes and outputs ""producer/broker/0 state change to [open] on loyyalchannel/0"" and the error ""fatal error: unexpected signal during runtime execution"". 

I started with the example here [https://github.com/hyperledger/fabric/blob/master/test/feature/docker-compose/docker-compose-kafka.yml], and have adapted it to run within our deployment (k8s). Using the x86_64-1.0.2 Docker tag for orderer, peer, kafka, zookeeper; and single replica for zk and kafka for POC.

 

Here's a stack trace:

 
{noformat}
2017-09-20 17:41:45.704 UTC [fsblkstorage] newBlockfileMgr -> DEBU d7d newBlockfileMgr() initializing file-based block storage for ledger: loyyalchannel
2017-09-20 17:41:45.704 UTC [kvledger.util] CreateDirIfMissing -> DEBU d7e CreateDirIfMissing [/var/hyperledger/production/orderer/chains/loyyalchannel/]
2017-09-20 17:41:45.704 UTC [kvledger.util] logDirStatus -> DEBU d7f Before creating dir - [/var/hyperledger/production/orderer/chains/loyyalchannel/] does not exist
2017-09-20 17:41:45.704 UTC [kvledger.util] logDirStatus -> DEBU d80 After creating dir - [/var/hyperledger/production/orderer/chains/loyyalchannel/] exists
2017-09-20 17:41:45.716 UTC [fsblkstorage] syncCPInfoFromFS -> DEBU d81 Starting checkpoint=latestFileChunkSuffixNum=[0], latestFileChunksize=[0], isChainEmpty=[true], lastBlockNumber=[0]
2017-09-20 17:41:45.716 UTC [fsblkstorage] syncCPInfoFromFS -> DEBU d82 status of file [/var/hyperledger/production/orderer/chains/loyyalchannel/blockfile_000000]: exists=[false], size=[0]
2017-09-20 17:41:45.716 UTC [fsblkstorage] newBlockIndex -> DEBU d83 newBlockIndex() - indexItems:[[BlockNum]]
2017-09-20 17:41:45.716 UTC [fsblkstorage] newBlockfileStream -> DEBU d84 newBlockfileStream(): filePath=[/var/hyperledger/production/orderer/chains/loyyalchannel/blockfile_000000], startOffset=[0]
2017-09-20 17:41:45.716 UTC [fsblkstorage] nextBlockBytesAndPlacementInfo -> DEBU d85 Finished reading file number [0]
2017-09-20 17:41:45.716 UTC [fsblkstorage] nextBlockBytesAndPlacementInfo -> DEBU d86 blockbytes [0] read from file [0]
2017-09-20 17:41:45.717 UTC [fsblkstorage] indexBlock -> DEBU d87 Indexing block [blockNum=0, blockHash=[]byte{0x19, 0xf0, 0x98, 0xdb, 0x64, 0x9a, 0x48, 0xa0, 0xa9, 0xa, 0xa7, 0x22, 0xca, 0xfc, 0x3a, 0x8d, 0x5d, 0x3d, 0x63, 0x1c, 0xe3, 0x36, 0xd0, 0x45, 0xba, 0x2f, 0xbd, 0x5, 0x1f, 0x66, 0xea, 0xb3} txOffsets=
txId= locPointer=offset=39, bytesLength=21351
]
2017-09-20 17:41:45.717 UTC [fsblkstorage] updateCheckpoint -> DEBU d88 Broadcasting about update checkpointInfo: latestFileChunkSuffixNum=[0], latestFileChunksize=[21395], isChainEmpty=[false], lastBlockNumber=[0]
2017-09-20 17:41:45.717 UTC [fsblkstorage] retrieveBlockByNumber -> DEBU d89 retrieveBlockByNumber() - blockNum = [0]
2017-09-20 17:41:45.717 UTC [fsblkstorage] newBlockfileStream -> DEBU d8a newBlockfileStream(): filePath=[/var/hyperledger/production/orderer/chains/loyyalchannel/blockfile_000000], startOffset=[0]
2017-09-20 17:41:45.717 UTC [fsblkstorage] nextBlockBytesAndPlacementInfo -> DEBU d8b Remaining bytes=[21395], Going to peek [8] bytes
2017-09-20 17:41:45.717 UTC [fsblkstorage] nextBlockBytesAndPlacementInfo -> DEBU d8c Returning blockbytes - length=[21392], placementInfo={fileNum=[0], startOffset=[0], bytesOffset=[3]}
2017-09-20 17:41:45.717 UTC [orderer/multichain] newChainSupport -> DEBU d8d [channel: loyyalchannel] Retrieved metadata for tip of chain (blockNumber=0, lastConfig=0, lastConfigSeq=1):
2017-09-20 17:41:45.717 UTC [orderer/kafka] newChain -> INFO d8e [channel: loyyalchannel] Starting chain with last persisted offset -3 and last recorded block 0
2017-09-20 17:41:45.717 UTC [orderer/multichain] newChain -> INFO d8f Created and starting new chain loyyalchannel
2017-09-20 17:41:45.717 UTC [orderer/multichain] addBlockSignature -> DEBU d90 &{ledgerResources:0xc4202c4ee0 chain:0xc4203901b0 cutter:0xc420399540 filters:0xc4202c4f40 signer:0x1274e88 lastConfig:0 lastConfigSeq:0}
2017-09-20 17:41:45.717 UTC [orderer/kafka] setupProducerForChannel -> INFO d92 [channel: loyyalchannel] Setting up the producer for this channel...
2017-09-20 17:41:45.717 UTC [orderer/kafka] try -> DEBU d93 [channel: loyyalchannel] Connecting to the Kafka cluster
2017-09-20 17:41:45.717 UTC [orderer/multichain] addBlockSignature -> DEBU d91 &{}
2017-09-20 17:41:45.719 UTC [msp] GetLocalMSP -> DEBU d94 Returning existing local MSP
2017-09-20 17:41:45.719 UTC [msp] GetDefaultSigningIdentity -> DEBU d95 Obtaining default signing identity
2017-09-20 17:41:45.719 UTC [msp] GetLocalMSP -> DEBU d96 Returning existing local MSP
2017-09-20 17:41:45.719 UTC [msp] GetDefaultSigningIdentity -> DEBU d97 Obtaining default signing identity
2017-09-20 17:41:45.719 UTC [msp/identity] Sign -> DEBU d98 Sign: plaintext: 0A9B060A0A4F7264657265724D535012...E76C7DA33F05706BF5E452949E6E9966
2017-09-20 17:41:45.719 UTC [msp/identity] Sign -> DEBU d99 Sign: digest: 39ECFC4D692B833832D851DAE152173E531D5D43D20463AC43AC0B234DE5BE15
2017-09-20 17:41:45.719 UTC [msp] GetLocalMSP -> DEBU d9a Returning existing local MSP
2017-09-20 17:41:45.719 UTC [msp] GetDefaultSigningIdentity -> DEBU d9b Obtaining default signing identity
2017-09-20 17:41:45.719 UTC [orderer/multichain] addLastConfigSignature -> DEBU d9c [channel: testchainid] About to write block, setting its LAST_CONFIG to 0
2017-09-20 17:41:45.719 UTC [msp] GetLocalMSP -> DEBU d9d Returning existing local MSP
2017-09-20 17:41:45.719 UTC [msp] GetDefaultSigningIdentity -> DEBU d9e Obtaining default signing identity
2017-09-20 17:41:45.719 UTC [msp/identity] Sign -> DEBU d9f Sign: plaintext: 0A9B060A0A4F7264657265724D535012...E76C7DA33F05706BF5E452949E6E9966
2017-09-20 17:41:45.719 UTC [msp/identity] Sign -> DEBU da0 Sign: digest: 04989DE93C79F42CBE745270C099CADB19C1B6736FF531EC5E7BCCE57FC6047B
2017-09-20 17:41:45.720 UTC [fsblkstorage] indexBlock -> DEBU da1 Indexing block [blockNum=1, blockHash=[]byte{0xc9, 0xa6, 0xb9, 0x44, 0x2e, 0xf3, 0x66, 0xa9, 0x4e, 0x96, 0xde, 0xc0, 0x93, 0x21, 0x4d, 0x75, 0xac, 0x9e, 0x31, 0xc7, 0xf, 0x55, 0xaf, 0x5b, 0x1d, 0xec, 0x0, 0x32, 0xd7, 0xaf, 0xdb, 0xa3} txOffsets=
txId= locPointer=offset=71, bytesLength=22287
]
2017-09-20 17:41:45.720 UTC [fsblkstorage] updateCheckpoint -> DEBU da2 Broadcasting about update checkpointInfo: latestFileChunkSuffixNum=[0], latestFileChunksize=[42523], isChainEmpty=[false], lastBlockNumber=[1]
2017-09-20 17:41:45.721 UTC [orderer/multichain] WriteBlock -> DEBU da3 [channel: testchainid] Wrote block 1
2017-09-20 17:41:45.721 UTC [orderer/kafka] processRegular -> DEBU da4 [channel: testchainid] Batch filled, just cut block 1 - last persisted offset is now 1
2017-09-20 17:41:45.721 UTC [orderer/kafka] try -> DEBU da5 [channel: loyyalchannel] Error is nil, breaking the retry loop
2017-09-20 17:41:45.721 UTC [orderer/kafka] startThread -> INFO da6 [channel: loyyalchannel] Producer set up successfully
2017-09-20 17:41:45.721 UTC [orderer/kafka] sendConnectMessage -> INFO da7 [channel: loyyalchannel] About to post the CONNECT message...
2017-09-20 17:41:45.721 UTC [orderer/kafka] try -> DEBU da8 [channel: loyyalchannel] Attempting to post the CONNECT message...
[sarama] 2017/09/20 17:41:45.717716 client.go:110: Initializing new client
[sarama] 2017/09/20 17:41:45.717724 config.go:329: ClientID is the default of 'sarama', you should consider setting it to something application-specific.
[sarama] 2017/09/20 17:41:45.717751 config.go:329: ClientID is the default of 'sarama', you should consider setting it to something application-specific.
[sarama] 2017/09/20 17:41:45.717759 client.go:601: client/metadata fetching metadata for all topics from broker fabric-infra-fabric-kafka:9092
[sarama] 2017/09/20 17:41:45.719449 broker.go:146: Connected to broker at fabric-infra-fabric-kafka:9092 (unregistered)
[sarama] 2017/09/20 17:41:45.721733 client.go:397: client/brokers registered new broker #0 at fabric-infra-fabric-kafka-0.fabric-infra-fabric-kafka-headless.loyyal-network.svc.cluster.local:9092
[sarama] 2017/09/20 17:41:45.721752 client.go:154: Successfully initialized new client
[sarama] 2017/09/20 17:41:45.721992 client.go:599: client/metadata fetching metadata for [loyyalchannel] from broker fabric-infra-fabric-kafka:9092
[sarama] 2017/09/20 17:41:45.758622 client.go:610: client/metadata found some partitions to be leaderless
[sarama] 2017/09/20 17:41:45.758639 client.go:590: client/metadata retrying after 250ms... (3 attempts remaining)
2017-09-20 17:41:45.837 UTC [orderer/common/deliver] Handle -> WARN da9 [channel: loyyalchannel] Rejecting deliver request because of consenter error
2017-09-20 17:41:45.837 UTC [orderer/main] func1 -> DEBU daa Closing Deliver stream
2017-09-20 17:41:45.838 UTC [orderer/main] Deliver -> DEBU dab Starting new Deliver handler
2017-09-20 17:41:45.838 UTC [orderer/common/deliver] Handle -> DEBU dac Starting new deliver loop
2017-09-20 17:41:45.838 UTC [orderer/common/deliver] Handle -> DEBU dad Attempting to read seek info message
[sarama] 2017/09/20 17:41:46.008948 client.go:599: client/metadata fetching metadata for [loyyalchannel] from broker fabric-infra-fabric-kafka:9092
[sarama] 2017/09/20 17:41:46.014480 config.go:329: ClientID is the default of 'sarama', you should consider setting it to something application-specific.
fatal error: unexpected signal during runtime execution
[signal SIGSEGV: segmentation violation code=0x1 addr=0x47 pc=0x7f5ec665b259]

runtime stack:
runtime.throw(0xc72896, 0x2a)
/opt/go/src/runtime/panic.go:566 +0x95
runtime.sigpanic()
/opt/go/src/runtime/sigpanic_unix.go:12 +0x2cc

goroutine 212 [syscall, locked to thread]:
runtime.cgocall(0x9f3e50, 0xc420215df8, 0xc400000000)
/opt/go/src/runtime/cgocall.go:131 +0x110 fp=0xc420215db0 sp=0xc420215d70
net._C2func_getaddrinfo(0x7f5ec0000a00, 0x0, 0xc4208a6c90, 0xc42010e510, 0x0, 0x0, 0x0)
??:0 +0x68 fp=0xc420215df8 sp=0xc420215db0
net.cgoLookupIPCNAME(0xc420bae0e0, 0x5f, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)
/opt/go/src/net/cgo_unix.go:146 +0x37c fp=0xc420215f18 sp=0xc420215df8
net.cgoIPLookup(0xc420b96c00, 0xc420bae0e0, 0x5f)
/opt/go/src/net/cgo_unix.go:198 +0x4d fp=0xc420215fa8 sp=0xc420215f18
runtime.goexit()
/opt/go/src/runtime/asm_amd64.s:2086 +0x1 fp=0xc420215fb0 sp=0xc420215fa8
created by net.cgoLookupIP
/opt/go/src/net/cgo_unix.go:208 +0xb4{noformat}
 

And the command:

 
{noformat}
export POD_NS=$NAMESPACE
export GENESIS_BLOCK=/etc/crypto-config/crypto-config-dev/loyyal-network/channel-artifacts/loyyal-channel.tx
export POD_ID=`kubectl get pod --namespace=$POD_NS | grep fabric-network-peer0 | cut -f1 -d' '`
kubectl exec $POD_ID --namespace=$POD_NS -it --  bash -c ""CORE_PEER_MSPCONFIGPATH=/etc/crypto-config/crypto-config-dev/loyyal-network/crypto-config/peerOrganizations/$ORG_DOMAIN/users/Admin@$ORG_DOMAIN/msp && CORE_PEER_ADDRESS=0.0.0.0:7051 peer channel create -o $ORDERER_ADDR:7050 -c loyyalchannel -f $GENESIS_BLOCK""
{noformat}","Fabric docker images fabric-orderer, fabric-peer, fabric-kafka, fabric-zookeeper:  x86_64-1.0.2

Kubernetes 1.7.0 in minikube v0.21.0  – manifest:
{noformat}
---
# Source: fabric-infra/templates/fabric-orderer.yaml
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: fabric-infra-orderer-pvc
  namespace:
  labels:
    app: fabric-infra-orderer-pvc
spec:
  storageClassName: standard
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 8Gi
---
# Source: fabric-infra/templates/fabric-zookeeper.yaml
apiVersion: v1
kind: Service
metadata:
  name: fabric-infra-fabric-zookeeper-headless
  namespace: loyyal-network
  labels:
    app: fabric-infra-fabric-zookeeper
spec:
  ports:
  - port: 2888
    name: server
  - port: 3888
    name: leader-election
  selector:
    app: fabric-infra-fabric-zookeeper
  clusterIP: None
---
# Source: fabric-infra/templates/fabric-zookeeper.yaml
apiVersion: v1
kind: Service
metadata:
  name: fabric-infra-fabric-zookeeper
  namespace: loyyal-network
  labels:
    app: fabric-infra-fabric-zookeeper
spec:
  ports:
  - port: 2181
    name: client
  selector:
    app: fabric-infra-fabric-zookeeper
---
# Source: fabric-infra/templates/fabric-orderer.yaml
apiVersion: v1
kind: Service
metadata:
  name: orderer
  namespace: loyyal-network

spec:
  loadBalancerIP: 192.168.99.100
  externalIPs:
  - 192.168.99.100
  ports:
  - port: 7050
    protocol: TCP
  selector:
    service: fabric-infra-orderer
  type: LoadBalancer
---
# Source: fabric-infra/templates/fabric-kafka.yaml
apiVersion: v1
kind: Service
metadata:
  name: fabric-infra-fabric-kafka-headless
  labels:
    app: fabric-infra-fabric-kafka
  annotations:
    service.alpha.kubernetes.io/tolerate-unready-endpoints: ""true""
spec:
  ports:
  - name: broker
    port: 9092
  clusterIP: None
  selector:
    app: fabric-infra-fabric-kafka
---
# Source: fabric-infra/templates/fabric-kafka.yaml
apiVersion: v1
kind: Service
metadata:
  name: fabric-infra-fabric-kafka
  labels:
    app: fabric-infra-fabric-kafka
spec:
  ports:
  - name: broker
    port: 9092
  selector:
    app: fabric-infra-fabric-kafka
---
# Source: fabric-infra/templates/fabric-orderer.yaml
apiVersion: v1
kind: ReplicationController
metadata:
  labels:
    service: fabric-infra-orderer
  namespace: loyyal-network
  name: fabric-infra-orderer
spec:
  replicas: 1
  selector:
    service: fabric-infra-orderer
  template:
    metadata:
      labels:
        service: fabric-infra-orderer
      namespace: loyyal-network
    spec:
      hostAliases:
      - ip: ""192.168.99.100""
        hostnames:
        - ""orderer.loyyal-mainnet.com""
      containers:
      - command:
        - orderer
        #- cat
        #- /var/hyperledger/orderer/tls/server.key
        image: hyperledger/fabric-orderer:x86_64-1.0.2
        name: fabric-infra-orderer
        workingDir: /opt/gopath/src/github.com/hyperledger/fabric
        ports:
        - containerPort: 7050
        env:
        - name: ORDERER_GENERAL_LOGLEVEL
          value: debug
        - name: ORDERER_GENERAL_LISTENADDRESS
          value: 0.0.0.0
        - name: ORDERER_GENERAL_GENESISMETHOD
          value: file
        - name: ORDERER_GENERAL_GENESISFILE
          value:  /etc/crypto-config/crypto-config-dev/loyyal-network/channel-artifacts/loyyal-genesis.block
        - name: ORDERER_GENERAL_LOCALMSPID
          value: OrdererMSP
        - name: ORDERER_GENERAL_LOCALMSPDIR
          value: /etc/crypto-config/crypto-config-dev/loyyal-network/crypto-config/ordererOrganizations/loyyal-mainnet.com/orderers/orderer.loyyal-mainnet.com/msp
        - name: ORDERER_KAFKA_VERBOSE
          value: ""true""
#        - name: ORDERER_KAFKA_VERSION
#          value: ""0.10.1.0""
        volumeMounts:
          - mountPath: /var/run/docker.sock
            name: fabric-infra-docker-sock
          - mountPath: /etc/crypto-config
            name: fabric-infra-crypto-config
            readOnly: true
          - mountPath: /var/hyperledger/production
            name: fabric-infra-fabric-orderer
      volumes:
      - name: fabric-infra-docker-sock
        hostPath:
          path: /var/run/docker.sock
      - name: fabric-infra-fabric-orderer
        persistentVolumeClaim:
          claimName: fabric-infra-orderer-pvc
      - name: fabric-infra-crypto-config
        hostPath:
          path: /develop/loyyal
---
# Source: fabric-infra/templates/fabric-zookeeper.yaml
apiVersion: apps/v1beta1
kind: StatefulSet
metadata:
  name: fabric-infra-fabric-zookeeper
  namespace: loyyal-network
  labels:
    app: fabric-infra-fabric-zookeeper
spec:
  serviceName: fabric-infra-fabric-zookeeper-headless
  replicas: 1
  template:
    metadata:
      namespace: loyyal-network
      labels:
        app: fabric-infra-fabric-zookeeper
    spec:
      containers:
      - name: fabric-zookeeper
        imagePullPolicy: IfNotPresent
        image: hyperledger/fabric-zookeeper:x86_64-1.0.2
#        resources:
#          null

        ports:
        - containerPort: 2181
          name: client
        - containerPort: 2888
          name: server
        - containerPort: 3888
          name: leader-election
        env:
        - name: ZOO_MY_ID
          value: ""1""
        - name: ZOO_SERVERS
          value: ""server.1=fabric-infra-fabric-zookeeper-0:2888:3888""
#        readinessProbe:
#          exec:
#            command:
#            - ""zkOk.sh""
#          initialDelaySeconds:
#          timeoutSeconds:
#        livenessProbe:
#          exec:
#            command:
#            - ""zkOk.sh""
#          initialDelaySeconds:
#          timeoutSeconds:
        volumeMounts:
        - name: datadir
          mountPath: /var/lib/zookeeper
      #securityContext:
      #  runAsUser: 1000
      #  fsGroup: 1000
  volumeClaimTemplates:
  - metadata:
      name: datadir
    spec:
      accessModes: [ ""ReadWriteOnce"" ]
      resources:
        requests:
          storage: 8Gi
      storageClassName: standard
#
---
# Source: fabric-infra/templates/fabric-kafka.yaml
apiVersion: apps/v1beta1
kind: StatefulSet
metadata:
  name: fabric-infra-fabric-kafka
  labels:
    app: fabric-infra-fabric-kafka
spec:
  serviceName: fabric-infra-fabric-kafka-headless
  replicas: 1
  template:
    metadata:
      labels:
        app: fabric-infra-fabric-kafka
    spec:
      containers:
      - name: fabric-infra-fabric-kafka-broker
        image: hyperledger/fabric-kafka:x86_64-1.0.2
        imagePullPolicy: IfNotPresent
#        livenessProbe:
#          exec:
#            command:
#              - bin/kafka-topics.sh
#              - --zookeeper
#              - ""fabric-infra-zookeeper:2181""
#              - --list
#          initialDelaySeconds: 30
#          timeoutSeconds: 5
#        readinessProbe:
#          exec:
#            command:
#              - bin/kafka-topics.sh
#              - --zookeeper
#              - ""fabric-infra-zookeeper:2181""
#              - --list
#          initialDelaySeconds: 30
#          timeoutSeconds: 5
        ports:
        - containerPort: 9092
          name: kafka
        volumeMounts:
        - name: datadir
          mountPath: /opt/kafka/data
        env:
        - name: KAFKA_LOG_RETENTION_MS
          value: ""-1""
        - name: KAFKA_MESSAGE_MAX_BYTES
          value: ""103809024""
        - name: KAFKA_REPLICA_FETCH_MAX_BYTES
          value: ""103809024""
        - name: KAFKA_BROKER_ID
          value: ""0""
        - name: KAFKA_ZOOKEEPER_CONNECT
          value: ""fabric-infra-fabric-zookeeper-0.fabric-infra-fabric-zookeeper-headless.loyyal-network.svc.cluster.local:2181""
        - name: KAFKA_UNCLEAN_LEADER_ELECTION_ENABLE
          value: ""false""
        - name: KAFKA_DEFAULT_REPLICATION_FACTOR
          value: ""1""
        - name: KAFKA_MIN_INSYNC_REPLICAS
          value: ""1""
        - name: KAFKA_ADVERTISED_HOST_NAME
          value: ""fabric-infra-fabric-kafka""
        - name: KAFKA_ADVERTISED_PORT
          value: ""9092""
  volumeClaimTemplates:
  - metadata:
      name: datadir
    spec:
      accessModes: [ ""ReadWriteOnce"" ]
      storageClassName: standard
      resources:
        requests:
          storage: 2Gi
---
---
# Source: fabric-network/templates/fabric-peer0.yaml
kind: PersistentVolume
apiVersion: v1
metadata:
  name: loyyal-fabric-network-fabric-peer0-pv
  labels:
    type: local
#  annotations:
#    pv.beta.kubernetes.io/gid: ""999""
spec:
  storageClassName: manual
  capacity:
    storage: 8Gi
  accessModes:
    - ReadWriteOnce
    # fixme this should be more specific... how to replace .Release.Name in yaml values?
  hostPath:
    path: ""/data/loyyal-fabric-network-peer0-disk""
---
# Source: fabric-network/templates/fabric-peer0.yaml
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: loyyal-fabric-network-peer0-pvc
  namespace:
  labels:
    app: loyyal-fabric-network-peer0-pvc
#  annotations:
#    volume.alpha.kubernetes.io/storage-class: default

spec:
  storageClassName: manual
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 8Gi
---
# Source: fabric-network/templates/fabric-peer0.yaml
apiVersion: v1
kind: Service
metadata:
  name: peer0
  namespace:
spec:
  loadBalancerIP: 192.168.99.100
  externalIPs:
  - 192.168.99.100
  ports:
  - name: ""requests""
    port: 7051
    protocol: TCP
  - name: ""events""
    port: 7053
    protocol: TCP
  selector:
    service: loyyal-fabric-network-peer0
  type: LoadBalancer
---
# Source: fabric-network/templates/fabric-peer0.yaml
apiVersion: v1
kind: ReplicationController
metadata:
  labels:
    service: loyyal-fabric-network-peer0
  name: loyyal-fabric-network-peer0
  namespace:
spec:
  replicas: 1
  selector:
    service: loyyal-fabric-network-peer0
  template:
    metadata:
      labels:
        service: loyyal-fabric-network-peer0
      namespace:
    spec:
      hostAliases:
      - ip: ""192.168.99.100""
        hostnames:
        - ""orderer.loyyal-mainnet.com""
      containers:
      - command:
        - peer
        - node
        - start
        - --peer-defaultchain=false
        env:
        - name: CORE_VM_ENDPOINT
          value: unix:///var/run/docker.sock
        - name: CORE_LOGGING_LEVEL
          value: DEBUG
        - name: CORE_PEER_ID
          value: peer0.loyyal.loyyal-mainnet.com
        - name: CORE_PEER_ADDRESS
          value: 192.168.99.100:7051  
        - name: CORE_PEER_GOSSIP_EXTERNALENDPOINT
          value: 192.168.99.100:7051
        - name: CORE_PEER_MSPCONFIGPATH
          value: /etc/crypto-config/crypto-config-dev/loyyal-network/crypto-config/peerOrganizations/loyyal.loyyal-mainnet.com/peers/peer0.loyyal.loyyal-mainnet.com/msp
        - name: CORE_PEER_LOCALMSPID
          value: LoyyalMSP

        #- name: CORE_LEDGER_STATE_STATEDATABASE
        #  value: ""CouchDB""
        #- name: CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS
        #  value: ""peer0-couchdb:5984""
        image: hyperledger/fabric-peer:x86_64-1.0.2
        name: loyyal-fabric-network-peer0
        workingDir: /opt/gopath/src/github.com/hyperledger/fabric
        ports:
        - containerPort: 7051
        - containerPort: 7053
        volumeMounts:
        - mountPath: /var/run/docker.sock
          name: loyyal-fabric-network-docker-sock
        - mountPath: /etc/crypto-config
          name: loyyal-fabric-network-crypto-config
          readOnly: true
        - mountPath: /var/hyperledger/production
          name: loyyal-fabric-network-fabric
      volumes:
      - name: loyyal-fabric-network-docker-sock
        hostPath:
          path: /var/run/docker.sock
      - name: loyyal-fabric-network-fabric
        persistentVolumeClaim:
          claimName: loyyal-fabric-network-peer0-pvc
      - name: loyyal-fabric-network-crypto-config
        hostPath:
          path: /develop/loyyal{noformat}
 

And the configtx:

 
{noformat}
Profiles:
LoyyalOrdererGenesis:
Orderer:
<<: *OrdererDefaults
Organizations:
- *OrdererOrg
Consortiums:
LoyyalConsortium:
Organizations:
- *Loyyal

LoyyalChannel:
Consortium: LoyyalConsortium
Application:
<<: *ApplicationDefaults
Organizations:
- *Loyyal

################################################################################
#
# Section: Organizations
#
# - This section defines the different organizational identities which will
# be referenced later in the configuration.
#
################################################################################
Organizations:

# SampleOrg defines an MSP using the sampleconfig. It should never be used
# in production but may be used as a template for other definitions
- &OrdererOrg
# DefaultOrg defines the organization which is used in the sampleconfig
# of the fabric.git development environment
Name: OrdererOrg

# ID to load the MSP definition as
ID: OrdererMSP

# MSPDir is the filesystem path which contains the MSP configuration
MSPDir: crypto-config/ordererOrganizations/loyyal-mainnet.com/msp

AdminPrincipal: Role.ADMIN

- &Loyyal
# DefaultOrg defines the organization which is used in the sampleconfig
# of the fabric.git development environment
Name: Loyyal

# ID to load the MSP definition as
ID: LoyyalMSP

MSPDir: crypto-config/peerOrganizations/loyyal.loyyal-mainnet.com/msp

AdminPrincipal: Role.ADMIN

AnchorPeers:
# AnchorPeers defines the location of peers which can be used
# for cross org gossip communication. Note, this value is only
# encoded in the genesis block in the Application section context
- Host: peer0.loyyal.loyyal-mainnet.com
Port: 7051
- Host: peer1.loyyal.loyyal-mainnet.com
Port: 7051

Orderer: &OrdererDefaults

# Orderer Type: The orderer implementation to start
# Available types are ""solo"" and ""kafka""
OrdererType: kafka

Addresses:
- orderer.loyyal-mainnet.com:7050

# Batch Timeout: The amount of time to wait before creating a batch
BatchTimeout: 2s

# Batch Size: Controls the number of messages batched into a block
BatchSize:

# Max Message Count: The maximum number of messages to permit in a batch
MaxMessageCount: 10

# Absolute Max Bytes: The absolute maximum number of bytes allowed for
# the serialized messages in a batch.
AbsoluteMaxBytes: 768 KB

# Preferred Max Bytes: The preferred maximum number of bytes allowed for
# the serialized messages in a batch. A message larger than the preferred
# max bytes will result in a batch larger than preferred max bytes.
PreferredMaxBytes: 512 KB

Kafka:
# Brokers: A list of Kafka brokers to which the orderer connects
# NOTE: Use IP:port notation
Brokers:
- fabric-infra-fabric-kafka:9092

# Organizations is the list of orgs which are defined as participants on
# the orderer side of the network
Organizations:

Application: &ApplicationDefaults

# Organizations is the list of orgs which are defined as participants on
# the application side of the network
Organizations:{noformat}
 

 

 

 

 

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01nml:,,,,,,,,JohnWhitton,kchristidis,mastersingh24,,,,,,,,,,,,"01/Oct/17 1:14 PM;mastersingh24;[~JohnWhitton] - Looks like there is an issue with DNS resolution.  I've seen something similar before and a possible solution is to tell Go to use it's own DNS resolver.  You can do this by setting the GODEBUG env variable in your peer config:
{code:java}
env:
- name: GODEBUG
  value: ""netdns=go""
{code}
 ",13/Oct/17 11:58 PM;kchristidis;[~JohnWhitton]: Any update on this? Have you tried Gari's solution?,16/Oct/17 11:02 PM;kchristidis;Just a heads up that I will close this on Oct 23 if there are no updates in the meantime.,"16/Oct/17 11:47 PM;JohnWhitton;[~mastersingh24] - [~kchristidis] Thank you for the tip and the follow up.

We were in a workshop last week, but have now tested the proposed approached and it has resolved the issue.

I've included the Go Link as well [https://golang.org/pkg/net/#hdr-Name_Resolution]

This ticket can be marked as closed.","17/Oct/17 3:01 PM;kchristidis;Thanks for the update.

Just for my edification, the `net` pkg documentation states that the pure Go resolved is already used by default. Had you overwritten this somewhere? Is this documented in the artifacts provided here? Is this implied in a K8s setup? Again, this is just me trying to figure out how to detect this again in the future.","19/Oct/17 8:51 PM;JohnWhitton;[~kchristidis] - Here's our feedback

root cause for `net=cgo` enabling per the golang net/resolver documentation, from what I can tell, is

1) our hostname does not end with `.local` but

2) the specific features that trigger cgo resolving are not explicit in the doc, we do search in the `.local` domain;

I've included our files for reference.


doc:

> when /etc/resolv.conf or /etc/nsswitch.conf specify the use of features that the Go resolver does not implement, and when the name being looked up ends in .local or is an mDNS name.


our configs:

 

```
<fx0:/opt/gopath/src/github.com/hyperledger/fabric# cat /etc/resolv.conf
nameserver 10.0.0.10
search loyyal-network.svc.cluster.local svc.cluster.local cluster.local
options ndots:5
<fx0:/opt/gopath/src/github.com/hyperledger/fabric# cat /etc/nsswitch.conf
# /etc/nsswitch.conf
#
# Example configuration of GNU Name Service Switch functionality.
# If you have the `glibc-doc-reference' and `info' packages installed, try:
# `info libc ""Name Service Switch""' for information about this file.

passwd: compat
group: compat
shadow: compat
gshadow: files

hosts: files dns
networks: files

protocols: db files
services: db files
ethers: db files
rpc: db files

netgroup: nis
<fx0:/opt/gopath/src/github.com/hyperledger/fabric#
```",19/Oct/17 9:13 PM;kchristidis;A-ha! That is very helpful. Thank you for following up on this (and satisfying my curiosity). Much appreciated.,,,,,,,,,,,,,,,,,
Make docs not run as part of CI,FAB-6248,20939,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,skarim,skarim,20/Sep/17 8:26 PM,21/Mar/18 2:39 PM,26/Apr/18 6:50 AM,21/Mar/18 2:39 PM,v1.0.0,,,,,,v1.2,,,fabric-ca,fabric-ci,,,0,,,,,,,,,Make docs is not being run as part of CI. The CI does not error out if the docs are out of sync. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01nm5:,,,,,,,,rameshthoomu,sambhavdutt,skarim,,,,,,,,master,,,true,"03/Mar/18 8:17 PM;skarim;[~rameshthoomu] Hey Ramesh, in our makefile as part of ci-test we run make docs. When I run 'make ci-tests' locally I see that it executes make doc. However, in Jenkins this does not seem to be happening. I see failures locally related to make docs, I would expect to see the same failures in Jenkins. Do you know why this might be happening?","06/Mar/18 12:12 AM;sambhavdutt;Tried to execute the 
{code:java}
make ci-tests
{code}
in x86_ 64 platform for the fabric-ca, Observed the following errors,

{code:java}
21:05:54 ERROR: New readme files generated, commit changes before doing push
21:05:54 Makefile:114: recipe for target 'docs' failed
21:05:54 make: *** [docs] Error 1
21:05:54 Build step 'Execute shell' marked build as failure
{code}
","12/Mar/18 2:04 PM;skarim;Since the docs are out of sync in master, that error is expected when running 'make ci-tests'. There is a CR out there that is going to get the docs up to date. https://gerrit.hyperledger.org/r/#/c/18935/",21/Mar/18 2:39 PM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/19307/,,,,,,,,,,,,,,,,,,,,
Sanitize debug messages,FAB-6247,20938,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,aambati,aambati,20/Sep/17 8:23 PM,10/Oct/17 4:09 PM,26/Apr/18 6:50 AM,10/Oct/17 4:09 PM,,,,,,,v1.0.3,v1.1,,fabric-ca,,,,0,,,,,,,,,"Sanitize debug messages, make sure no sensitive information",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01nlx:,,,,,,,,aambati,,,,,,,,,,release-1.0,master,,true,20/Sep/17 8:24 PM;aambati;https://gerrit.hyperledger.org/r/c/13659/,05/Oct/17 3:42 PM;aambati;https://gerrit.hyperledger.org/r/c/14207/,,,,,,,,,,,,,,,,,,,,,,
Return type of BlockInfo.getTransactionActionInfos() does not match the method name,FAB-6245,20936,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rickr,clempo,clempo,20/Sep/17 4:18 PM,09/Oct/17 8:22 PM,26/Apr/18 6:50 AM,09/Oct/17 8:22 PM,v1.0.1,,,,,,v1.1,,,fabric-sdk-java,,,,0,,,,,,,,,"The method BlockInfo.getTransactionActionInfos() returns Iterable<EnvelopeInfo>, it does not return Iterable<TransactionActionInfo>. This is very confusing. I doubt it was ever meant to return Iterable<TransactionActionInfo>, so this is probably an error in the method name.
To fix this properly, we would also have to rename BlockInfo.TransactionInfoIterator 

Compare this to Iterable<TransactionActionInfo> TransactionEnvelopeInfo.getTransactionActionInfos() which makes a lot more sense.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01nlh:,,,,,,,,clempo,rickr,,,,,,,,,master,,,true,"25/Sep/17 4:48 PM;rickr;What does blockWalker in End2endIT do?
for (BlockInfo.TransactionEnvelopeInfo.TransactionActionInfo transactionActionInfo : transactionEnvelopeInfo.getTransactionActionInfos())

 

Seems to me its returning a TransactionActionInfo ","25/Sep/17 5:38 PM;clempo;Exactly, I said Iterable<TransactionActionInfo> TransactionEnvelopeInfo.getTransactionActionInfos() makes sense. The one that is broken is BlockInfo.getTransactionActionInfos()",04/Oct/17 4:58 PM;rickr;getTransactionActionInfos is just a duplicate of getEnvelopeInfos probably a forgotten cut paste.,"04/Oct/17 5:02 PM;clempo;Indeed, so let's remove BlockInfo.getTransactionActionInfos() and its support classes.",,,,,,,,,,,,,,,,,,,,
CompletableFuture can leak in Channel.sendTransaction(),FAB-6244,20935,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sgdev,clempo,clempo,20/Sep/17 4:02 PM,12/Oct/17 8:03 PM,26/Apr/18 6:50 AM,12/Oct/17 8:03 PM,v1.0.1,,,,,,v1.1,,,fabric-sdk-java,,,,0,,,,,,,,,"In this method of the class Channel
public CompletableFuture<TransactionEvent> sendTransaction(Collection<ProposalResponse> proposalResponses, Collection<Orderer> orderers, User userContext)
I believe the future sret leaks if communication with all the orderers fails, that's because sret is registered but no partner knows about it and therefore nothing can fire it.
The cleanup based on timeouts was removed a while ago so txListener will keep sret forever.

It might be interesting to take this opportunity to factor out this duplicated code into a separate private method.
                        Status status = resp.getStatus();
                        if (null != status) {
                            respdata.append(status.name());
                            respdata.append(""-"");
                            respdata.append(status.getNumber());
                        }

                        String info = resp.getInfo();
                        if (null != info && !info.isEmpty()) {
                            if (respdata.length() > 0) {
                                respdata.append("", "");
                            }

                            respdata.append(""Additional information: "").append(info);
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01nl9:,,,,,,,,clempo,rickr,sgdev,,,,,,,,master,,,true,"04/Oct/17 2:30 PM;rickr;Hi [~sharad.develop] Are you actively working on this ?  I ETA for a patch ?

If not, please unassign",05/Oct/17 6:08 PM;rickr;[~sharad.develop] I may take this over if I've not heard any word on progress.,07/Oct/17 10:21 PM;sgdev;Yes working on it,08/Oct/17 7:40 PM;sgdev;https://gerrit.hyperledger.org/r/#/c/14317/,"09/Oct/17 1:37 PM;rickr;[~sgdev] You need to have reviewers added to gerrit patches.

Changes MUST pass the build +1 Verify.  If it fails once you can put a comment *reverify* and post it and it will run again.

Do you have a rocket chat ID ?

 ",09/Oct/17 3:54 PM;sgdev;[~rickr] Thanks. I have added you as the reviewer. My rocket chat id is sgdev,,,,,,,,,,,,,,,,,,
NodeSDK - timeout setting not being passed,FAB-6217,20904,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,19/Sep/17 2:40 PM,02/Oct/17 5:30 PM,26/Apr/18 6:50 AM,02/Oct/17 5:30 PM,v1.1,,,,,,v1.1,,,fabric-sdk-node,,,,0,,,,,,,,,The timeout setting is not being passed from external API sendTransactionProposal() method to the internal sendTransactionProposal() method.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01nf9:,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,master,,,true,02/Oct/17 5:29 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/13613/,,,,,,,,,,,,,,,,,,,,,,,
Failing gossip state transfer test,FAB-6207,20892,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,19/Sep/17 3:47 AM,27/Nov/17 4:39 AM,26/Apr/18 6:50 AM,27/Nov/17 4:39 AM,,,,,,,,,,fabric-gossip,,,,0,active,gossip,,,,,,,"There is a gossip state transfer test failing after introducing commit for FAB-5084, 


{code}
unit-tests_1  | 2017-09-19 02:33:03.863 UTC [gossip/gossip#p1] NewGossipService -> WARN 286 External endpoint is empty, peer will not be accessible outside of its organization
unit-tests_1  | removing dir = /tmp/tests/ledger/node/ledgersData
unit-tests_1  | panic: runtime error: invalid memory address or nil pointer dereference
unit-tests_1  | [signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0xa6f4c9]
unit-tests_1  |
unit-tests_1  | goroutine 15374 [running]:
unit-tests_1  | github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).privateDataMessage(0xc42246e510, 0x12ce9a0, 0xc4239f9440)
unit-tests_1  |         github.com/hyperledger/fabric/gossip/state/_test/_obj_test/state.go:287 +0x119
unit-tests_1  | created by github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).listen
unit-tests_1  |         github.com/hyperledger/fabric/gossip/state/_test/_obj_test/state.go:265 +0x478
unit-tests_1  | FAIL    github.com/hyperledger/fabric/gossip/state      56.473s
unit-tests_1  | error: exit status 1
unit-tests_1  | panic: EOF
unit-tests_1  |
unit-tests_1  | goroutine 1 [running]:
unit-tests_1  | main.main()
unit-tests_1  |         /opt/gotools/obj/gopath/src/github.com/AlekSi/gocov-xml/gocov-xml.go:60 +0x14a4
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ncl:,,,,,,,,C0rWin,,,,,,,,,,master,,,true,19/Sep/17 4:40 AM;C0rWin;https://gerrit.hyperledger.org/r/#/c/13601/,,,,,,,,,,,,,,,,,,,,,,,
channel.sendTransaction().get() hangs forever,FAB-6198,20883,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rickr,PetrVlasek,PetrVlasek,18/Sep/17 5:40 PM,18/Sep/17 6:12 PM,26/Apr/18 6:50 AM,18/Sep/17 6:12 PM,v1.0.1,,,,,,WON'T FIX,,,fabric-sdk-java,,,,0,java-sdk,transaction,,,,,,,"I am using Hyperledger Fabric 1.0.1. Right now, I am playing with basic Java SDK capabilities against Fabric networks from ""first-network"" and ""fabCars"" samples.

I am able to connect to the channel or query the data but there is an issue when I want to send transaction in order to write some data. In fact, the data are written, however my code hangs in channel.sendTransaction().get() call - seems like some event is not properly fired or captured.

CompletableFuture<BlockEvent.TransactionEvent> txFuture = channel.sendTransaction(addCarProposals, client.getUserContext());
BlockEvent.TransactionEvent event = txFuture.get(600, TimeUnit.SECONDS);

If txFuture.get() call is commented out, the application proceeds further.

Just to note - query and invoke ran via Node.js SDK proceed without any issue. All Docker containers seem running fine, there are no networking issues... Any event handler needs to be initialized first for a channel? I have no clue.
 
Attached is the example source code I am using and part of the log from the peer showing that the data are written fine and new blocks created.
 
Regards
Petr","MacOS Sierra

Java 1.8.0_60-b27",,,,,,,,,,,,,,,,,,,18/Sep/17 5:33 PM;PetrVlasek;peer_log.txt;https://jira.hyperledger.org/secure/attachment/12123/peer_log.txt,18/Sep/17 5:33 PM;PetrVlasek;source_code.txt;https://jira.hyperledger.org/secure/attachment/12122/source_code.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01nb1:,,,,,,,,johncaboose,PetrVlasek,rickr,,,,,,,,,,,,18/Sep/17 6:11 PM;rickr;No EventHub nothing to process incoming events Future will not resolve.,,,,,,,,,,,,,,,,,,,,,,,
Remove snapshot reference from fabric-sdk-rest dockerfile,FAB-6196,20876,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jtclark,rameshthoomu,rameshthoomu,18/Sep/17 2:45 PM,11/Oct/17 9:09 PM,26/Apr/18 6:50 AM,11/Oct/17 9:09 PM,,,,,,,,,,fabric-baseos,,,,0,,,,,,,,,"Remove snapshot reference from fabric-sdk-rest dockerfile. 

[https://github.com/hyperledger/fabric-sdk-rest/blob/dbd44492687454ca8c467b316227bf2b760c7c93/docker/Dockerfile#L8]

keep only the supporting basejvm version  (x86_64-0.3.2)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01n9h:,,,,,,,,jtclark,rameshthoomu,,,,,,,,,master,,,true,"10/Oct/17 7:06 PM;jtclark;Update
======

Talked with [~rameshthoomu], [~chrispoole] about this task. I'll be submitting a patch that removes the snapshot reference, and uses the baseos image instead of basejvm. fabric-sdk-rest does not require the use of a JVM.",10/Oct/17 8:32 PM;jtclark;Patch has been submitted for review: https://gerrit.hyperledger.org/r/#/c/14389/,"11/Oct/17 9:00 PM;jtclark;This patch has been cherry-picked into the DEV branch, and merged into MASTER.",,,,,,,,,,,,,,,,,,,,,
No need to print statck trace on invalid stateinfo message.,FAB-6194,20870,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,17/Sep/17 8:07 PM,17/Oct/17 9:56 PM,26/Apr/18 6:50 AM,17/Oct/17 9:56 PM,,,,,,,,,,fabric-gossip,,,,0,active,gossip,,,,,,,"Currently gossip code which checks for validity of the StateInfoMessage output following stack trace:

{code}
16:52:35 unit-tests_1  | 2017-09-17 16:52:08.768 UTC [gossip/gossip#p4] validateMsg -> WARN 29d StateInfo message GossipMessage: tag:CHAN_OR_ORG state_info:<metadata:""\000\000\000\000\000\000\000\000"" timestamp:<inc_num:11651379494838206464 seq_num:1505667124723990546 > pki_id:""localhost:5613"" channel_MAC:""\253g\353XK\300\331\211\20024?R~z+g\247}\016\363TI\304\337\022\314:x\002\330\020"" properties:<> > , Envelope: 89 bytes, Signature: 89 bytes is found invalid: PKIID wasn't found
16:52:35 unit-tests_1  | github.com/hyperledger/fabric/gossip/identity.(*identityMapperImpl).Get
16:52:35 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/identity/identity.go:149
16:52:35 unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).validateStateInfoMsg
16:52:35 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:1194
16:52:35 unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).validateMsg
16:52:35 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:430
16:52:35 unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).handleMessage
16:52:35 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:352
16:52:35 unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).acceptMessages
16:52:35 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:333
16:52:35 unit-tests_1  | runtime.goexit
16:52:35 unit-tests_1  | 	/opt/go/src/runtime/asm_amd64.s:2337
16:52:35 unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).validateStateInfoMsg
16:52:35 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:1196
16:52:35 unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).validateMsg
16:52:35 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:430
16:52:35 unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).handleMessage
16:52:35 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:352
16:52:35 unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).acceptMessages
16:52:35 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:333
16:52:35 unit-tests_1  | runtime.goexit
16:52:35 unit-tests_1  | 	/opt/go/src/runtime/asm_amd64.s:2337
{code}

which is way too verbose and redundant. Therefore it will be enough to log only relevant information regarding validation w/o stack trace.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i01n85:,,,,,,,,C0rWin,,,,,,,,,,master,,,true,17/Sep/17 8:10 PM;C0rWin;https://gerrit.hyperledger.org/r/#/c/13567/,,,,,,,,,,,,,,,,,,,,,,,
MSP cache should not use read lock operations,FAB-6186,20861,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,16/Sep/17 4:23 AM,07/Dec/17 8:20 AM,26/Apr/18 6:50 AM,16/Sep/17 5:15 PM,v1.1,,,,,,v1.1,,,fabric-crypto,,,,0,,,,,,,,,"The MSP cache has RW locks and uses RLock when doing cache lookup, and WLock when doing cache updates.

This may result in the following error if done concurrently while the cache has more than 1 item and only cache lookups are performed, because the cache lookup operation shifts and moves items in the internal list of the cache (that specifies eviction order, since its an LRU cache): 

{code}
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x538863]

goroutine 1198 [running]:
container/list.(*List).remove(...)
	/home/yacovm/OBC/go/src/container/list/list.go:110
container/list.(*List).MoveToFront(0xc420085a70, 0xc420085bf0)
	/home/yacovm/OBC/go/src/container/list/list.go:169 +0x53
github.com/hyperledger/fabric/vendor/github.com/golang/groupcache/lru.(*Cache).Get(0xc420124d20, 0x75bc40, 0xc4203afeb8, 0x3, 0xc4203afe50, 0x3)
	/home/yacovm/OBC/shared/gopath/src/github.com/hyperledger/fabric/vendor/github.com/golang/groupcache/lru/lru.go:79 +0x97
github.com/hyperledger/fabric/msp/cache.(*cachedMSP).DeserializeIdentity(0xc4200f0b60, 0xc42008ccfc, 0x3, 0x3, 0x0, 0x0, 0x0, 0x0)
	/home/yacovm/OBC/shared/gopath/src/github.com/hyperledger/fabric/msp/cache/cache.go:64 +0xfb
github.com/hyperledger/fabric/msp/cache.TestDeserializeIdentity.func1(0xc420124d80, 0xc42008e1a8, 0xc42008cda0, 0xc42008cd98, 0xc42008cd30, 0x3, 0x3, 0xc4200908c0, 0xbd70e0, 0xc4200f0b60, ...)
	/home/yacovm/OBC/shared/gopath/src/github.com/hyperledger/fabric/msp/cache/cache_test.go:143 +0x107
created by github.com/hyperledger/fabric/msp/cache.TestDeserializeIdentity
	/home/yacovm/OBC/shared/gopath/src/github.com/hyperledger/fabric/msp/cache/cache_test.go:135 +0x658
{code}

or, in production:
{code}
goroutine 223839 [running]:
container/list.(*List).remove(...)
	/opt/go/src/container/list/list.go:111
container/list.(*List).MoveToFront(0xc42027bc20, 0xc421cdbf50)
	/opt/go/src/container/list/list.go:169 +0x75
github.com/hyperledger/fabric/vendor/github.com/golang/groupcache/lru.(*Cache).Get(0xc42032bcc0, 0xcd8ee0, 0xc421a70d40, 0x31e, 0xc4309a0700, 0x31e)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/golang/groupcache/lru/lru.go:79 +0x97
github.com/hyperledger/fabric/msp/cache.(*cachedMSP).DeserializeIdentity(0xc4200cacb0, 0xc4309a0000, 0x31e, 0x31e, 0x0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/msp/cache/cache.go:64 +0xfb
github.com/hyperledger/fabric/msp.(*mspManagerImpl).DeserializeIdentity(0xc420278660, 0xc4309a0000, 0x31e, 0x31e, 0x3, 0x3, 0xc42001f300, 0x7f6fb8068330)
	/opt/gopath/src/github.com/hyperledger/fabric/msp/mspmgrimpl.go:98 +0x1e1
github.com/hyperledger/fabric/common/cauthdsl.compile.func2(0xc4250bd838, 0x1, 0x1, 0xc423518498, 0x1, 0x1, 0xc421934600)
	/opt/gopath/src/github.com/hyperledger/fabric/common/cauthdsl/cauthdsl.go:87 +0x40b
github.com/hyperledger/fabric/common/cauthdsl.compile.func1(0xc4250bd838, 0x1, 0x1, 0xc423518449, 0x1, 0x1, 0x8)
	/opt/gopath/src/github.com/hyperledger/fabric/common/cauthdsl/cauthdsl.go:57 +0x320
github.com/hyperledger/fabric/common/cauthdsl.(*policy).Evaluate(0xc421b36630, 0xc4250bd838, 0x1, 0x1, 0x10, 0xcd8ee0)
	/opt/gopath/src/github.com/hyperledger/fabric/common/cauthdsl/policy.go:73 +0x78
github.com/hyperledger/fabric/common/policies.(*policyLogger).Evaluate(0xc4217ee340, 0xc4250bd838, 0x1, 0x1, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/common/policies/policy.go:190 +0x29d
github.com/hyperledger/fabric/common/policies.(*implicitMetaPolicy).Evaluate(0xc4225d9740, 0xc4250bd838, 0x1, 0x1, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/common/policies/implicitmeta.go:91 +0x149
github.com/hyperledger/fabric/common/policies.(*policyLogger).Evaluate(0xc4222c5d40, 0xc4250bd838, 0x1, 0x1, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/common/policies/policy.go:190 +0x29d
github.com/hyperledger/fabric/core/policy.(*policyChecker).CheckPolicyBySignedData(0xc420330210, 0xc423518470, 0x9, 0xe567c4, 0x1c, 0xc4250bd838, 0x1, 0x1, 0xc421a71568, 0xa6fa0e)
	/opt/gopath/src/github.com/hyperledger/fabric/core/policy/policy.go:180 +0x102
github.com/hyperledger/fabric/core/policy.(*policyChecker).CheckPolicy(0xc420330210, 0xc423518470, 0x9, 0xe567c4, 0x1c, 0xc42aab3aa0, 0x154ec20, 0xc420159180)
	/opt/gopath/src/github.com/hyperledger/fabric/core/policy/policy.go:104 +0x6ac
github.com/hyperledger/fabric/core/endorser.(*Endorser).checkACL(0xc42032a760, 0xc42aab3aa0, 0xc42aab8e10, 0xc42aab3b90, 0xc4222c5d00, 0xc420159180, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:81 +0x69
github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal(0xc42032a760, 0x7f6fb82fa6c0, 0xc42aab39b0, 0xc42aab3aa0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:445 +0x1a40
github.com/hyperledger/fabric/core/handlers/auth.(*filter).ProcessProposal(0xc42026f4e0, 0x7f6fb82fa6c0, 0xc42aab39b0, 0xc42aab3aa0, 0xc42026f4e0, 0x42acb9, 0xc42abc2830)
	/opt/gopath/src/github.com/hyperledger/fabric/core/handlers/auth/auth.go:38 +0x51
github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler(0xd34940, 0xc42026f4e0, 0x7f6fb82fa6c0, 0xc42aab39b0, 0xc42aab8cd0, 0x0, 0x0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:112 +0x276
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC(0xc420012b40, 0x1561d60, 0xc422590420, 0xc4225aff00, 0xc420330ea0, 0x153b310, 0xc42aab3a40, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:781 +0xab4
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc420012b40, 0x1561d60, 0xc422590420, 0xc4225aff00, 0xc42aab3a40)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:981 +0x1528
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc4230efe00, 0xc420012b40, 0x1561d60, 0xc422590420, 0xc4225aff00)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:551 +0x9f
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:549 +0xa1
{code}

The trivial solution would be to protect the cache only with a simple mutex.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01n6d:,,,,,,,,baohua,yacovm,,,,,,,,,master,,,true,16/Sep/17 4:32 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/13539/,16/Sep/17 4:40 AM;yacovm;[~adc] ,"07/Dec/17 7:01 AM;baohua;I guess this msp cache feature can be safely ported back to the 1.0.x version?

Any suggestion? I would like to offer a hand if no objection.

Thanks!",07/Dec/17 7:43 AM;yacovm;I generally think it might be a good idea but this JIRA is really not the place to ask that. Open a JIRA and tag all maintainers and then we can vote.,07/Dec/17 8:20 AM;baohua;Good idea!,,,,,,,,,,,,,,,,,,,
There is no byfn.tar.gz on nexus,FAB-6182,20856,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,nnao,nnao,15/Sep/17 7:00 PM,21/Sep/17 5:55 AM,26/Apr/18 6:50 AM,21/Sep/17 5:55 AM,v1.0.1,,,,,,v1.1,,,fabric-samples,fabric-tools,,,0,,,,,,,,,"I got an error as follows:

{code:java}
ubuntu@ubuntu-xenial:~/bin$ sh get-byfn.sh
===> Downloading Build Your First Network sample application
get-byfn.sh: 13: get-byfn.sh: VERSION: not found
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   995    0   995    0     0   1816      0 --:--:-- --:--:-- --:--:--  1815

gzip: stdin: not in gzip format
tar: Child returned status 1
tar: Error is not recoverable: exiting now
{code}

There is no examples directory.

{code:java}
Index of /repositories/releases/org/hyperledger/fabric
 
Name    Last Modified    Size        Description
Parent Directory
fabric-binary/    Mon Aug 28 13:48:39 UTC 2017               
hyperledger-fabric/        Thu Sep 07 01:30:01 UTC 2017
{code}

Is get-byfn.sh needed?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01n5h:,,,,,,,,nnao,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Chaintool based chaincode fails at runtime,FAB-6179,20853,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,greg.haskins,greg.haskins,greg.haskins,15/Sep/17 3:57 PM,22/Apr/18 1:49 PM,26/Apr/18 6:50 AM,22/Apr/18 1:49 PM,,,,,,,v1.2,,,fabric-chaintool,,,,0,,,,,,,,,chaincode: error while loading shared libraries: libltdl.so.7: cannot open shared object file: No such file or directory,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01n4t:,,,,,,,,ChristopherFerris,denyeart,greg.haskins,,,,,,,,master,,,true,"15/Sep/17 3:59 PM;greg.haskins;We can mitigate the problem for now by reverting 88e1e191.  Longer term, we should decide how to handle this.  Ideas would include platform conditionals, disabling +pkcs11, etc.",27/Nov/17 4:39 AM;denyeart;[~ecb] Do you intend to work on this one?,05/Apr/18 5:40 PM;ChristopherFerris;removed assignment.,,,,,,,,,,,,,,,,,,,,,
Update README and test setup script,FAB-6178,20852,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,15/Sep/17 2:37 PM,01/Nov/17 7:29 PM,26/Apr/18 6:50 AM,01/Nov/17 7:29 PM,,,,,,,v1.1,,,fabric-chaincode-node,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01n4l:,,,,,,,,,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Store root and intermediate certs for TLS in proper directory,FAB-6168,20834,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,skarim,skarim,14/Sep/17 6:03 PM,19/Sep/17 7:50 PM,26/Apr/18 6:50 AM,19/Sep/17 7:50 PM,v1.0.0,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"Currently, the root and intermediate certs that are used to sign TLS certificates are not stored properly in the tlscacerts and tlsintermediatecerts folders properly. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01n11:,,,,,,,,skarim,,,,,,,,,,master,,,true,19/Sep/17 7:50 PM;skarim;https://gerrit.hyperledger.org/r/#/c/13481/,,,,,,,,,,,,,,,,,,,,,,,
[MSP] identity serialization does not encode PEM type,FAB-6166,20832,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,bur,bur,bur,14/Sep/17 4:32 PM,18/Oct/17 3:48 PM,26/Apr/18 6:50 AM,18/Oct/17 3:48 PM,,,,,,,v1.1,,,fabric-peer,,,,0,msp,,,,,,,,"Currently a serialzed identity includes the MSPID and the PEM encoded cert. However, the PEM type is missing.

This looks like the following example:

 
{code:java}
peer-1�-----BEGIN -----
MIICKTCCAdCgAwIBAgIBAjAKBggqhkjOPQQDAjAvMQ8wDQYDVQQKDAZwZWVyLTEx
DzANBgNVBAsMBnBlZXItMTELMAkGA1UEAwwCQ0EwHhcNMTcwOTA1MTE0NTExWhcN
MzcwODMxMTE0NTExWjA8MQ8wDQYDVQQKDAZwZWVyLTExDzANBgNVBAsMBnBlZXIt
MTELMAkGA1UECwwCZ3cxCzAJBgNVBAMMAmd3MFkwEwYHKoZIzj0CAQYIKoZIzj0D
AQcDQgAEtUKUTDH2bUiL8iD6PmVHpMTghazjTI0YsCo+rbYTb3/xQX4CnMsedtlP
ntb6viBhgefib7zxH7I8KZb9Y2Hll6OBzzCBzDAJBgNVHRMEAjAAMBEGCWCGSAGG
+EIBAQQEAwIFoDAzBglghkgBhvhCAQ0EJhYkT3BlblNTTCBHZW5lcmF0ZWQgQ2xp
ZW50IENlcnRpZmljYXRlMB0GA1UdDgQWBBSPcil0OSyq4vkJACDUMpIyvtKrWjAf
BgNVHSMEGDAWgBS0CqebsJhPowEy+sQ9Uks5jocH4jAOBgNVHQ8BAf8EBAMCBeAw
JwYDVR0lBCAwHgYIKwYBBQUHAwIGCCsGAQUFBwMEBggrBgEFBQcDATAKBggqhkjO
PQQDAgNHADBEAiBQCD6vx4RflFdtZjPE9q5nUwe7lcWBKW3WSDMPjjsy2wIgdq3y
0C5XXDXvWz7y/lKdaAXvSwAYGuY61FdPwFTgThs=
-----END -----{code}
 

Attached, you can find a block retrieved from QSCC which shows that some cert PEMs do not have a type.

 

Here is a fix:

 
{code:java}
// Serialize returns a byte array representation of this identity
func (id *identity) Serialize() ([]byte, error) {
 // mspIdentityLogger.Infof(""Serializing identity %s"", id.id)
pb := &pem.Block{Type: ""CERTIFICATE"", Bytes: id.cert.Raw}
 pemBytes := pem.EncodeToMemory(pb)
 if pemBytes == nil {
 return nil, fmt.Errorf(""Encoding of identitiy failed"")
 }
// We serialize identities by prepending the MSPID and appending the ASN.1 DER content of the cert
 sId := &msp.SerializedIdentity{Mspid: id.id.Mspid, IdBytes: pemBytes}
 idBytes, err := proto.Marshal(sId)
 if err != nil {
 return nil, fmt.Errorf(""Could not marshal a SerializedIdentity structure for identity %s, err %s"", id.id, err)
 }
return idBytes, nil
}
{code}
 

 ",,,,,,,,,,,,,,,,,,,,14/Sep/17 4:23 PM;bur;mychannel-block0;https://jira.hyperledger.org/secure/attachment/12115/mychannel-block0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01n0l:,,,,,,,,bur,,,,,,,,,,,,,,15/Sep/17 6:17 PM;bur;https://gerrit.hyperledger.org/r/#/c/13473/,18/Oct/17 3:47 PM;bur;Fixed with [https://gerrit.hyperledger.org/r/#/c/13265/|https://gerrit.hyperledger.org/r/#/c/13265/],,,,,,,,,,,,,,,,,,,,,,
Log is muted for all fabric-ca unit-tests,FAB-6165,20831,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lehors,lehors,lehors,14/Sep/17 4:15 PM,07/Oct/17 6:46 AM,26/Apr/18 6:50 AM,07/Oct/17 6:46 AM,,,,,,,v1.1,,,fabric-ca-build,,,,0,,,,,,,,,"The benchmark tests need the log muted but the way this is currently done is via TestMain which turns the log off for all the unit-tests because they all are in the same package.

 ",This is independent of the environment.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01n0d:,,,,,,,,lehors,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
behave tests are failing in production CI,FAB-6162,20827,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,14/Sep/17 2:36 PM,15/Sep/17 7:17 PM,26/Apr/18 6:50 AM,15/Sep/17 7:17 PM,,,,,,,,,,fabric-ci,,,,0,,,,,,,,,"Observed *`behave`* tests are failing with CI configuration error. Below is the error
{code:java}
00:11:00.194     from OpenSSL import rand
00:11:00.194 ImportError: cannot import name rand{code}
[https://jenkins.hyperledger.org/view/fabric/job/fabric-verify-behave-x86_64/10774/console]

on pyOpenSSL version 17.3.0.. This worked earlier on pyOpenSSL version 17.2.0..",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01mzh:,,,,,,,,bsmita,rameshthoomu,,,,,,,,,master,,,true,15/Sep/17 7:17 PM;rameshthoomu;Patch has been submitted and merged.,,,,,,,,,,,,,,,,,,,,,,,
How to upgrade a chaincode without losing its storage?,FAB-6158,20821,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,crazyquark,crazyquark,14/Sep/17 9:04 AM,01/Oct/17 1:16 PM,26/Apr/18 6:50 AM,01/Oct/17 1:16 PM,,,,,,,Not a Bug,,,fabric-ledger,,,,0,,,,,,,,,"Hello,

 

Is there a way to re-deploy a chaincode and keep access to all its data on the ledger?

Right now, every time a chaincode is deployed, even if it uses the same keys for accessing the ledger the data is tabula rasa.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01myd:,,,,,,,,crazyquark,mastersingh24,,,,,,,,,,,,,17/Sep/17 8:20 AM;mastersingh24;You can perform a chaincode upgrade transaction:   http://hyperledger-fabric.readthedocs.io/en/latest/chaincode4noah.html?highlight=upgrade#upgrade,,,,,,,,,,,,,,,,,,,,,,,
Question: how to simulate Ethereum like contract to contract calls,FAB-6157,20820,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,crazyquark,crazyquark,14/Sep/17 9:01 AM,27/Nov/17 10:09 AM,26/Apr/18 6:50 AM,27/Nov/17 4:37 AM,,,,,,,,,,fabric-chaincode-node,,,,0,,,,,,,,,"Hello,

 

We are trying to mimic the setup from Ethereum where a contract instantiates another contract and calls other contract instances.

Right now I modeled this by using different structs inside a single chaincode and linking them together via code.

Is this the proper way to approach this? Should we use chaincode to chaincode calling instead and model each entity as a chaincode instance?

 

Thank you",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01my5:,,,,,,,,crazyquark,denyeart,zhaochy,,,,,,,,,,,,15/Sep/17 8:03 AM;zhaochy;shim.invokeChaincode,"15/Sep/17 1:45 PM;crazyquark;Hi,

Yes, I know that is the method used to call another chaincode BUT what I am asking is whether one chaincode equates to one Ethereum smart contract, see my comments above.",27/Nov/17 4:37 AM;denyeart;[~crazyquark] For questions please use hyperledger-fabric mailing list or rocket.chat rather than opening Bugs.,27/Nov/17 10:09 AM;crazyquark;I did use rocket.chat but nobody answered there either :),,,,,,,,,,,,,,,,,,,,
Go chaincode examples comments of chaincode id are out-of-date,FAB-6156,20818,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,cbl,cbl,cbl,14/Sep/17 2:33 AM,17/Oct/17 8:53 PM,26/Apr/18 6:50 AM,17/Oct/17 8:53 PM,,,,,,,,,,,,,,0,,,,,,,,,"Since we are using chaincode name in the ""install"" and ""instantiate"" phase, we should remove the old comments ""// WARNING - this chaincode's ID is hard-coded in chaincode_example04..."" from the following go chaincode examples:

[https://github.com/hyperledger/fabric/blob/release/examples/chaincode/go/chaincode_example02/chaincode_example02.go#L19]

[https://github.com/hyperledger/fabric/blob/release/examples/e2e_cli/examples/chaincode/go/chaincode_example02/chaincode_example02.go#L19]

[https://github.com/hyperledger/fabric/blob/release/examples/chaincode/go/eventsender/eventsender.go#L19]

[https://github.com/hyperledger/fabric/blob/release/examples/chaincode/go/invokereturnsvalue/invokereturnsvalue.go#L19]

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01mxp:,,,,,,,,cbl,,,,,,,,,,master,,,true,15/Sep/17 8:02 AM;cbl;https://gerrit.hyperledger.org/r/#/c/13449/,,,,,,,,,,,,,,,,,,,,,,,
Client peer TLS credentials include only a single cert rather than a chain,FAB-6155,20817,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,smithbk,smithbk,14/Sep/17 12:36 AM,01/Nov/17 3:16 PM,26/Apr/18 6:50 AM,01/Nov/17 3:16 PM,,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,"The GetPeerCredentials function in fabric/core/comm adds only a single certificate to the pool, but it should add multiple in order to handle certificates issued by an intermediate CA.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01mxh:,,,,,,,,jeffgarratt,smithbk,,,,,,,,,master,,,true,14/Sep/17 1:23 AM;smithbk;https://gerrit.hyperledger.org/r/13447,26/Oct/17 7:36 PM;jeffgarratt;[~smithbk]I assume we can close this now due to https://gerrit.hyperledger.org/r/#/c/13447/ being merged?,01/Nov/17 2:45 PM;jeffgarratt;Gonna close this one [~smithbk].. Assume it is good with the merge.  Please reopen if still an issue.,,,,,,,,,,,,,,,,,,,,,
getEventHubs() and getPeers() return empty set,FAB-6149,20808,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sajeevkhan,ChristopherFerris,ChristopherFerris,13/Sep/17 3:22 PM,14/Sep/17 9:59 AM,26/Apr/18 6:50 AM,14/Sep/17 9:59 AM,v1.0.2,,,,,,,,,fabric-sdk-java,,,,0,,,,,,,,,"Hi,

I am trying to fetch the complete details of a channel using JAVA SDK. The channel is already created successfully with multiple peers joined already on it. There are a couple of eventHubs added to the channel.

Later, I am trying to fetch the channels on the peer as follows

Set<String> channels = client.queryChannels(peer); And then I get the details of the Channel as follows:

Channel channel = client.newChannel(channelName);

 And then I try to get the Peers and Eventhubs as follows:

Collection<EventHub> eventHubs = channel.getEventHubs();

Collection<Peer> peers = channel.getPeers();

 However, the eventHubs and peers are always returned empty. Am I missing something here? 

Regards

Sajeev",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01mvp:,,,,,,,,ChristopherFerris,rickr,,,,,,,,,,,,,"13/Sep/17 3:40 PM;rickr;The client does not persist anything of the channel.  
 See examples

End2endIT  constructs an initial channel, joins peers executes chaincode etc.

End2endAndBackAgainIT recreates from an existing channel to execute chaincode etc.

 

Directly from the READM.md

Note, the SDK does ***not*** provide a means of persistence
  for the application defined channels and user artifacts on the client. This is left for the embedding application to best manage.",,,,,,,,,,,,,,,,,,,,,,,
[Fabric v1.0.2 Behave BDD Tests] 'module' object has no attribute 'ssl_channel_credentials',FAB-6127,20764,Bug,Monitor / On Hold,FAB,Fabric,software,ChristopherFerris,,,Medium,,,dragon82,dragon82,12/Sep/17 12:07 PM,08/Apr/18 11:30 PM,26/Apr/18 6:50 AM,,v1.0.2,,,,,,WON'T FIX,,,fabric-quality,,,,0,,,,,,,,,"The Behave BDD Test was conducted in vagrant box ubuntu/xenial64 (virtualbox, 20170830.1.1) development environment and yet it generate the following error:

 

""orderer0""                                                                                                                                                                  # steps/bootstrap_impl.py:271 0.002s
      Traceback (most recent call last):
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1456, in run
          match.run(runner.context)
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1903, in run
          self.func(context, *args, **kwargs)
        File ""steps/bootstrap_impl.py"", line 276, in step_impl
          user.connectToDeliverFunction(context, composeService, nodeAdminTuple=user.tags[certAlias])
        File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/orderer_util.py"", line 198, in connectToDeliverFunction
          composeService=composeService),
        File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/orderer_util.py"", line 231, in getABStubForComposeService
          channel = bdd_grpc_util.getGRPCChannel(ipAddress=ipAddress, port=port, root_certificates=root_certificates, ssl_target_name_override=composeService)
        File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/bdd_grpc_util.py"", line 22, in getGRPCChannel
          creds = grpc.ssl_channel_credentials(root_certificates=root_certificates)
      AttributeError: 'module' object has no attribute 'ssl_channel_credentials'
      
      Captured stdout:
      Will copy gensisiBlock over at this point

    And user ""configAdminOrdererOrg0"" retrieves the latest config update ""latestOrdererConfig"" from orderer ""orderer0"" for channel ""\{ordererSystemChannelId}""","ubuntu/xenial64 (virtualbox, 20170830.1.1)

asn1crypto (0.22.0)
 b3j0f.aop (0.8.4)
 b3j0f.utils (1.4.4)
 beautifulsoup4 (4.6.0)
 behave (1.2.5)
 cffi (1.10.0)
 CouchDB (1.0)
 cryptography (2.0.3)
 ecdsa (0.13)
 enum34 (1.1.6)
 Flask (0.10.1)
 Flask-Cors (2.0.1)
 futures (3.1.1)
 gevent (1.2.2)
 google (1.9.3)
 greenlet (0.4.12)
 grpcio (0.13.1)
 gyp (0.1)
 idna (2.6)
 ipaddress (1.0.18)
 itsdangerous (0.24)
 Jinja2 (2.9.6)
 kazoo (2.4.0)
 MarkupSafe (1.0)
 nose (1.3.7)
 ordereddict (1.1)
 parse (1.8.2)
 parse-type (0.3.4)
 pip (9.0.1)
 protobuf (3.4.0)
 pycparser (2.18)
 pykafka (2.6.0)
 pyOpenSSL (16.2.0)
 pysha3 (1.0b1)
 python-dateutil (2.2)
 python-slugify (1.2.4)
 pytz (2014.3)
 PyYAML (3.10)
 requests (2.4.3)
 setuptools (36.4.0)
 six (1.10.0)
 tabulate (0.7.7)
 Unidecode (0.4.21)
 Werkzeug (0.12.2)
 wheel (0.29.0)

 

 ",,,,,,,,,,,,,,,,,,,12/Sep/17 11:57 AM;dragon82;hyperledger-fabric_behave.txt;https://jira.hyperledger.org/secure/attachment/12081/hyperledger-fabric_behave.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1141,0|i01mmt:,,,,,,,,ChristopherFerris,dragon82,luomin,mastersingh24,,,,,,,,,,,"12/Jan/18 10:20 AM;luomin;Hi, [~dragon82] , I got the same issue, have you already got the reason of this ? Thank you in advance for your reply","08/Apr/18 5:09 PM;mastersingh24;This is pretty old and for v1.0.x.  We don't even run or maintain the BDD tests and they are not used for testing fixpacks.

I'm marking as WON'T FIX.

I put it on hold pending decision by [~ChristopherFerris] and [~denyeart]",08/Apr/18 11:30 PM;ChristopherFerris;[~mastersingh24] I tend to agree. [~dragon82] and [~luomin] is this still important to you?,,,,,,,,,,,,,,,,,,,,,
EventHub error thrown in channel creation with multi-organization,FAB-6101,20729,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,suganuma,suganuma,suganuma,11/Sep/17 2:49 PM,16/Oct/17 3:04 AM,26/Apr/18 6:50 AM,18/Sep/17 1:56 PM,WON'T FIX,,,,,,WON'T FIX,,,fabric-sdk-java,,,,0,java-SDK,,,,,,,,"When creating a channel that have peers and event hubs from two organizations (peerOrgs), we have to set the user context of the client instance to peerAdmin of the corresponding organization.

However, this causes an event hub error as shown below]:

2017-09-08 02:08:10,800 ERROR EventHub:208 - EventHub:peer0.org1.example.com terminated is false shutdown is false has error UNKNOWN: event message must be properly signed by an identity from the same organization as the peer: [failed deserializing event creator: [Expected MSP ID Org1MSP, received Org2MSP]]

This is because Channel.initialize() method simply tries to connect all event hubs with the same (current) user context. So the last setting of user context (Org2MSP in this case) was used for the connection to the event hub peer0.org1.example.com, causing an incorrect MSP ID error. To fix this problem, each EventHub instance should have its own user context to be used in the connection.",,,,,,,,,,,,,,,,,,,,13/Sep/17 7:51 AM;peoplehlj;eventhub-connect-own-usercontext.patch;https://jira.hyperledger.org/secure/attachment/12087/eventhub-connect-own-usercontext.patch,13/Sep/17 7:54 AM;peoplehlj;image-2017-09-13-15-53-59-635.png;https://jira.hyperledger.org/secure/attachment/12088/image-2017-09-13-15-53-59-635.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01mfh:,,,,,,,,peoplehlj,rickr,ryokawajp,suganuma,,,,,,,,,,,11/Sep/17 4:47 PM;rickr;Not a bug.  Not a valid use case.  One organization will not have another organizations credentials to listen to their eventhub.  There is a future change coming by the fabric with acl policies that allows another organization to listen to its evenhub. When that's in place and the acl have been done you should be able to do this with a single user context,"12/Sep/17 6:01 AM;suganuma;I think you don't mean that we have to create a separate channel for each organization, right? Otherwise, the endorsement policy from multiple organizations doesn't make sense.

I guess what you mean is that we have to use a separate client instance to add peers and event hubs from different organizations into a channel. Is this correct? If we look at node-sdk e2e example (fabric-sdk-node/test/integration/e2e/join-channel.js), it assumes multiple organizations, but uses a new instance of client and channel to add peers and event hubs for each organization.

In node-sdk, the event hub class has its own client context, which is used in connection (_sendRegistration(register)). My fixed code in java-sdk was just to do the same.","13/Sep/17 7:51 AM;peoplehlj;Hi [~suganuma] thank you for raising this issue, I encountered the same issue and also I asked in the chat as below. And then I fixed this issue like you mentioned: the event hub connect its own user context, and the code change is easy: [^eventhub-connect-own-usercontext.patch] .

!image-2017-09-13-15-53-59-635.png!","13/Sep/17 7:57 AM;peoplehlj;By the way [~suganuma], could you invoke chaincode in the channel of AND policy, I always met below error. If you could invoke successfully, could you give me some sample code, thanks in advance.
{code:java}
2017-09-11 08:34:29.936 UTC [txvalidator] VSCCValidateTxForCC -> ERRO 7c1 VSCC check failed for transaction txid=241cc77c3ecb0f988be4244ecfb5630f3b58bf582a39d6e1f9ac41d0f707dd45, error VSCC error: policy evaluation failed, err Failed to authenticate policy
2017-09-11 08:34:29.936 UTC [lockbasedtxmgr] Done -> DEBU 7c2 Done with transaction simulation / query execution [c613a69b-6f5c-48f1-8f38-09d323ca4da4]
2017-09-11 08:34:29.936 UTC [txvalidator] Validate -> ERRO 7c3 VSCCValidateTx for transaction txId = 241cc77c3ecb0f988be4244ecfb5630f3b58bf582a39d6e1f9ac41d0f707dd45 returned error VSCCValidateTxForCC failed for cc trace, error VSCC error: policy evaluation failed, err Failed to authenticate policy
{code}","13/Sep/17 1:12 PM;rickr;Saying it's not a valid use case. If your FORD and GM work on BC.  Ford WON'T have GM's credentials (user context credentials) and visa versa.  FORD can send to it's PEER's and GM's PEERs for endorsement.  But today only FORD can listen to it's own eventhub.  There's work in progress that will allow for example GM through access control policies allow FORD to listen to it's eventhub using it's OWN (FORD's) credentials (user context).  Set up that way when it's available WOULD allow you to add FORD and GM""S eventhub to the channel and initialize.",13/Sep/17 4:37 PM;rickr;https://jira.hyperledger.org/browse/FAB-5695  ACL eventhub,"14/Sep/17 7:05 AM;peoplehlj;Thank you [~rickr] for clarifying, I will watch the FAB-5695.","16/Oct/17 3:04 AM;ryokawajp;Hi [~rickr]  and [~suganuma], I had the same issue when sending usual Invoke transactions. And thank you for the patch, [~peoplehlj].

I agree that the event hub connection should be restricted the users of the same org, thus the peers to be listened are limited to one peer.

However, since I followed the guidance in the following document, I set the user's organization and the peer's organization to have different MSPIDs.
 * Sub-section 3) of Best Practice section [https://hyperledger-fabric.readthedocs.io/en/latest/msp.html#best-practices]

In the business level, the users and the peer are in the same organization (enterprise) but they could use different MSPIDs because of some administration purpose (So I assumed that it is ok to manage the user keys/certs of both orgs within a client).

Anyway, I will also be watching FAB-5695. Thank you.

 ",,,,,,,,,,,,,,,,
chaincode invoke timeout,FAB-6098,20722,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,brantzh,brantzh,11/Sep/17 9:11 AM,23/Oct/17 6:58 PM,26/Apr/18 6:50 AM,23/Oct/17 6:57 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"We instantiated a chaincode on one peer0 and try to invoke the chaincode.

 

We got following error from other peers

 

<dev-peer1-org2.1505112034187.svc.cibfintech.com-test8cc01-v1>), because of <no such image>...attempt to recreate image
2017-09-11 02:55:14.717 EDT [chaincode-platform] generateDockerfile -> DEBU 3b6
FROM hyperledger/fabric-baseos:s390x-0.3.1
ADD binpackage.tar /usr/local/bin
LABEL org.hyperledger.fabric.chaincode.id.name=""test8cc01"" \
 org.hyperledger.fabric.chaincode.id.version=""v1"" \
 org.hyperledger.fabric.chaincode.type=""GOLANG"" \
 org.hyperledger.fabric.version=""1.0.0"" \
 org.hyperledger.fabric.base.version=""0.3.1""
ENV CORE_CHAINCODE_BUILDLEVEL=1.0.0
ENV CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/peer.crt
COPY peer.crt /etc/hyperledger/fabric/peer.crt
2017-09-11 02:55:14.729 EDT [util] DockerBuild -> DEBU 3b7 Attempting build with image hyperledger/fabric-ccenv:s390x-1.0.0 

2017-09-11 03:04:02.581 EDT [dockercontroller] deployImage -> DEBU 3b8 Created image: dev-peer1-org2.1505112034187.svc.cibfintech.com-test8cc01-v1
2017-09-11 03:04:02.581 EDT [dockercontroller] Start -> DEBU 3b9 start-recreated image successfully
2017-09-11 03:04:02.582 EDT [dockercontroller] createContainer -> DEBU 3ba Create container: dev-peer1-org2.1505112034187.svc.cibfintech.com-test8cc01-v1
2017-09-11 03:04:02.906 EDT [dockercontroller] createContainer -> DEBU 3bb Created container: dev-peer1-org2.1505112034187.svc.cibfintech.com-test8cc01-v1
2017-09-11 03:04:03.813 EDT [dockercontroller] Start -> DEBU 3bc Started container dev-peer1-org2.1505112034187.svc.cibfintech.com-test8cc01-v1
2017-09-11 03:04:03.813 EDT [container] unlockContainer -> DEBU 3bd container lock deleted(dev-peer1-org2.1505112034187.svc.cibfintech.com-test8cc01-v1)
2017-09-11 03:09:03.814 EDT [chaincode] launchAndWaitForRegister -> DEBU 3be stopping due to error while launching Timeout expired while starting chaincode test8cc01:v1(networkid:dev,peerid:peer1-org2.1505112034187.svc.cibfintech.com,tx:7cf069d21c72b3759444c3d53ef28b3b65714aa41a769d4e00d72239bfd2d7f2)
2017-09-11 03:09:03.814 EDT [container] lockContainer -> DEBU 3bf waiting for container(dev-peer1-org2.1505112034187.svc.cibfintech.com-test8cc01-v1) lock
2017-09-11 03:09:03.814 EDT [container] lockContainer -> DEBU 3c0 got container (dev-peer1-org2.1505112034187.svc.cibfintech.com-test8cc01-v1) lock
2017-09-11 03:09:03.817 EDT [dockercontroller] stopInternal -> DEBU 3c1 Stop container dev-peer1-org2.1505112034187.svc.cibfintech.com-test8cc01-v1(Container not running: dev-peer1-org2.1505112034187.svc.cibfintech.com-test8cc01-v1)
2017-09-11 03:09:03.819 EDT [dockercontroller] stopInternal -> DEBU 3c2 Kill container dev-peer1-org2.1505112034187.svc.cibfintech.com-test8cc01-v1 (API error (500): \{""message"":""Cannot kill container dev-peer1-org2.1505112034187.svc.cibfintech.com-test8cc01-v1: Container 9f77735cf9492554a092bbc6ad37d57820b0a3f92ab7bd1734cda074e3737836 is not running""}
)
2017-09-11 03:09:03.938 EDT [dockercontroller] stopInternal -> DEBU 3c3 Removed container dev-peer1-org2.1505112034187.svc.cibfintech.com-test8cc01-v1
2017-09-11 03:09:03.938 EDT [container] unlockContainer -> DEBU 3c4 container lock deleted(dev-peer1-org2.1505112034187.svc.cibfintech.com-test8cc01-v1)
2017-09-11 03:09:03.938 EDT [chaincode] Launch -> ERRO 3c5 launchAndWaitForRegister failed Timeout expired while starting chaincode test8cc01:v1(networkid:dev,peerid:peer1-org2.1505112034187.svc.cibfintech.com,tx:7cf069d21c72b3759444c3d53ef28b3b65714aa41a769d4e00d72239bfd2d7f2)
2017-09-11 03:09:03.938 EDT [chaincode] ExecuteChaincode -> ERRO 3c6 Error executing chaincode: Timeout expired while starting chaincode test8cc01:v1(networkid:dev,peerid:peer1-org2.1505112034187.svc.cibfintech.com,tx:7cf069d21c72b3759444c3d53ef28b3b65714aa41a769d4e00d72239bfd2d7f2)
2017-09-11 03:09:03.938 EDT [endorser] callChaincode -> DEBU 3c7 Exit
2017-09-11 03:09:03.938 EDT [endorser] simulateProposal -> ERRO 3c8 failed to invoke chaincode name:""test8cc01"" on transaction 7cf069d21c72b3759444c3d53ef28b3b65714aa41a769d4e00d72239bfd2d7f2, error: Error executing chaincode: Timeout expired while starting chaincode test8cc01:v1(networkid:dev,peerid:peer1-org2.1505112034187.svc.cibfintech.com,tx:7cf069d21c72b3759444c3d53ef28b3b65714aa41a769d4e00d72239bfd2d7f2)
2017-09-11 03:09:03.938 EDT [endorser] simulateProposal -> DEBU 3c9 Exit
2017-09-11 03:09:03.939 EDT [lockbasedtxmgr] Done -> DEBU 3ca Done with transaction simulation / query execution [485ee8d9-bd45-44b3-8060-095549a2f873]
2017-09-11 03:09:03.939 EDT [endorser] ProcessProposal -> DEBU 3cb Exit

 

 

The chaincode container it built in exit status with following messages.

 

!image-2017-09-11-17-11-32-597.png!",,,,,,,,,,,,,,,,,,,,11/Sep/17 9:11 AM;brantzh;image-2017-09-11-17-11-32-597.png;https://jira.hyperledger.org/secure/attachment/12053/image-2017-09-11-17-11-32-597.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01mdx:,,,,,,,,brantzh,harrisob@us.ibm.com,,,,,,,,,,,,,23/Oct/17 6:58 PM;harrisob@us.ibm.com;Chaincode must be installed on all peers that will endorse a proposal,,,,,,,,,,,,,,,,,,,,,,,
can't simultaneously create channel,FAB-6097,20721,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,brantzh,brantzh,11/Sep/17 9:07 AM,23/Oct/17 6:54 PM,26/Apr/18 6:50 AM,23/Oct/17 6:53 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"We got following errors when create two channels from orderer.

!image-2017-09-11-17-04-50-683.png!

SDK side showed following error

!image-2017-09-11-17-05-37-084.png!",,,,,,,,,,,,,,,,,,,,11/Sep/17 9:04 AM;brantzh;image-2017-09-11-17-04-50-683.png;https://jira.hyperledger.org/secure/attachment/12052/image-2017-09-11-17-04-50-683.png,11/Sep/17 9:05 AM;brantzh;image-2017-09-11-17-05-37-084.png;https://jira.hyperledger.org/secure/attachment/12051/image-2017-09-11-17-05-37-084.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01mdp:,,,,,,,,brantzh,harrisob@us.ibm.com,,,,,,,,,,,,,"23/Oct/17 6:54 PM;harrisob@us.ibm.com;Only need to create the join on one peer, other peers will join the channel",,,,,,,,,,,,,,,,,,,,,,,
Gossip error: PKIID wasn't found,FAB-6092,20715,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,smithbk,smithbk,10/Sep/17 7:13 PM,17/Oct/17 9:30 PM,26/Apr/18 6:50 AM,17/Oct/17 9:30 PM,,,,,,,WON'T FIX,,,fabric-gossip,,,,0,,,,,,,,,"I am writing a fabric-ca sample and seeing the following errors and I can't figure out what I may be doing wrong.  Please help.

{code}
^[[33m2017-09-08 20:44:35.630 UTC [gossip/gossip] handleMessage -> WARN 418^[[0m Message GossipMessage: tag:EMPTY alive_msg:<membership:<endpoint:""peer2-org1:7051"" pki_id:""\010\222'\367\354\207\273tSK\370\377\260\245a(?\327+rK\370\000X&\213\227x~Hb\357"" > timestamp:<inc_num:1504903455606434130 seq_num:16 > > , Envelope: 71 bytes, Signature: 71 bytes isn't valid
^[[36m2017-09-08 20:44:38.807 UTC [gossip/channel] handleStateInfSnapshot -> DEBU 419^[[0m Channel mychannel : Couldn't find org identity of peer Äí?Ä^O^T<8a>lÃ¿à<9f>x<96>g^K¶Ëê^C^HL1^B<84>UU¤¨ø<88>^Z message sent from ÔqFîÞ¡9=^OQS¡ýùµ^G<8c>Pï     yå?3Ä¡6^[èÏÊú
^[[33m2017-09-08 20:44:40.380 UTC [gossip/gossip] handleMessage -> WARN 41a^[[0m Message GossipMessage: tag:EMPTY alive_msg:<membership:<endpoint:""peer1-org2:7051"" pki_id:""\304\355?\304\017\024\212l\303\277\340\237x\226g\013\266\313\352\003\010L1\002\204UU\244\250\370\210\032"" > timestamp:<inc_num:1504903455361523350 seq_num:22 > > , Envelope: 71 bytes, Signature: 70 bytes isn't valid
{code}

To reproduce, you have to deal with 3 repos (fabric, fabric-ca, and fabric-samples) as shown below.
{code}
1) Build *fabric* docker images from master if not already done.
     # cd $GOPATH/src/github.com/hyperledger/fabric
     # make docker

2) Build *fabric-ca* docker images
    # git clone github.com/hyperledger/fabric-ca and cd to fabric-ca
    # checkout https://gerrit.hyperledger.org/r/#/c/13195/
    # export USE_FABRIC_LATEST=true
    # make docker

3) Run the sample from fabric-samples repo:
   # Checkout https://gerrit.hyperledger.org/r/#/c/13213/ to your fabric-samples repo
   # cd to fabric-samples/fabric-ca
   # Run the ""start.sh"" script
{code}

After running the start script, it will eventually hang (and finally timeout) when trying to instantiate chaincode on peer2-org2.  The output will look similar to the following:
{code}
##### 2017-09-10 18:12:54 Instantiating chaincode on peer2-org2 ... #####
^[[36m2017-09-10 18:12:54.660 UTC [msp] GetLocalMSP -> DEBU 001^[[0m Returning existing local MSP
^[[36m2017-09-10 18:12:54.660 UTC [msp] GetDefaultSigningIdentity -> DEBU 002^[[0m Obtaining default signing identity
2017-09-10 18:12:54.666 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 003^[[0m Using default escc
2017-09-10 18:12:54.666 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 004^[[0m Using default vscc
^[[36m2017-09-10 18:12:54.668 UTC [msp/identity] Sign -> DEBU 005^[[0m Sign: plaintext: 0A8B080A6708031A0C08A681D6CD0510...324D53500A04657363630A0476736363
^[[36m2017-09-10 18:12:54.668 UTC [msp/identity] Sign -> DEBU 006^[[0m Sign: digest: 51ECE4574479C70F1C00AC65B0A71B7DD092CC51B5D042A5A4FE58049916B637
{code}

You can control-C out of this and then cd to the *data/logs* where you will see the logs from all of the containers.  The logs will contain the environment variables that were set when starting the peer.  For example, in data/logs/peer2-org2.log, you'll see the following, which is also the log file that contains the gossip errors mentioned previously.
{code}
##### 2017-09-10 18:12:46 Starting peer 'peer2-org2' with MSP at '/opt/gopath/src/github.com/hyperledger/fabric/peer/msp' #####
CORE_PEER_TLS_ROOTCERT_FILE=/data/org2-ca-chain.pem
CORE_PEER_TLS_KEY_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/tls/server.key
CORE_PEER_GOSSIP_ORGLEADER=false
CORE_PEER_PROFILE_ENABLED=true
CORE_PEER_LOCALMSPID=org2MSP
CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
CORE_PEER_TLS_CERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/tls/server.crt
CORE_PEER_TLS_ENABLED=true
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/msp
CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=net_fabric-ca
CORE_PEER_ID=peer2-org2
CORE_LOGGING_LEVEL=DEBUG
CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer2-org2:7051
CORE_PEER_ADDRESS=peer2-org2:7051
CORE_PEER_GOSSIP_USELEADERELECTION=true
CORE_PEER_GOSSIP_BOOTSTRAP=peer2-org2:7051
{code}

Note: In this sample, org0 is the orderer's org, and org1 and org2 are peer orgs.

I also added an attachment data.zip which contains my resulting data directory.
You may be able to tell from just looking at the logs.
The data directory also contains the configtx.yaml and other artifacts.",,,,,,,,,,,,,,,,,,,,10/Sep/17 7:33 PM;smithbk;data.zip;https://jira.hyperledger.org/secure/attachment/12050/data.zip,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01mcd:,,,,,,,,n-horiguchi,smithbk,yacovm,,,,,,,,,,,,"11/Sep/17 7:00 AM;yacovm;{quote}Created docker-compose.yml
Creating docker containers
Pulling setup (hyperledger/fabric-ca-tools:latest)...
Pulling repository docker.io/hyperledger/fabric-ca-tools
ERROR: Error: image hyperledger/fabric-ca-tools:latest not found
{quote}","11/Sep/17 7:22 AM;yacovm;When I run the e2e_cli I get these errors too:
{code}2017-09-11 07:12:21.319 UTC [gossip/gossip] handleMessage -> WARN 3ba Message GossipMessage: tag:EMPTY alive_msg:<membership:<endpoint:""peer1.org1.example.com:7051"" pki_id:""L\t2\256x\n\252\n\034\027wC\3468\336\236\031\223\022B^G%hX\324\207\325\350\177\271\345"" > timestamp:<inc_num:1505113916294937712 seq_num:20 > > , Envelope: 83 bytes, Signature: 70 bytes isn't valid
2017-09-11 07:12:23.693 UTC [gossip/gossip] validateMsg -> WARN 45e StateInfo message GossipMessage: tag:CHAN_OR_ORG state_info:<metadata:""\000\000\000\000\000\000\000\002"" timestamp:<inc_num:11651379494838206464 seq_num:1505113943180744558 > pki_id:""L\t2\256x\n\252\n\034\027wC\3468\336\236\031\223\022B^G%hX\324\207\325\350\177\271\345"" channel_MAC:""\321'\021w>\341{\362\227\272\254\376\017\376=\326\3469\003\0340\260\277\006n\033\335\013+\322\022-"" > , Envelope: 105 bytes, Signature: 71 bytes is found invalid: PKIID wasn't found
2017-09-11 07:12:23.693 UTC [gossip/gossip] handleMessage -> WARN 45f Message GossipMessage: tag:CHAN_OR_ORG state_info:<metadata:""\000\000\000\000\000\000\000\002"" timestamp:<inc_num:11651379494838206464 seq_num:1505113943180744558 > pki_id:""L\t2\256x\n\252\n\034\027wC\3468\336\236\031\223\022B^G%hX\324\207\325\350\177\271\345"" channel_MAC:""\321'\021w>\341{\362\227\272\254\376\017\376=\326\3469\003\0340\260\277\006n\033\335\013+\322\022-"" > , Envelope: 105 bytes, Signature: 71 bytes isn't valid
2017-09-11 07:12:23.693 UTC [gossip/gossip] validateMsg -> WARN 460 StateInfo message GossipMessage: tag:CHAN_OR_ORG state_info:<metadata:""\000\000\000\000\000\000\000\002"" timestamp:<inc_num:11651379494838206464 seq_num:1505113943180744558 > pki_id:""L\t2\256x\n\252\n\034\027wC\3468\336\236\031\223\022B^G%hX\324\207\325\350\177\271\345"" channel_MAC:""\321'\021w>\341{\362\227\272\254\376\017\376=\326\3469\003\0340\260\277\006n\033\335\013+\322\022-"" > , Envelope: 105 bytes, Signature: 71 bytes is found invalid: PKIID wasn't found
2017-09-11 07:12:23.693 UTC [gossip/gossip] handleMessage -> WARN 461 Message GossipMessage: tag:CHAN_OR_ORG state_info:<metadata:""\000\000\000\000\000\000\000\002"" timestamp:<inc_num:11651379494838206464 seq_num:1505113943180744558 > pki_id:""L\t2\256x\n\252\n\034\027wC\3468\336\236\031\223\022B^G%hX\324\207\325\350\177\271\345"" channel_MAC:""\321'\021w>\341{\362\227\272\254\376\017\376=\326\3469\003\0340\260\277\006n\033\335\013+\322\022-"" > , Envelope: 105 bytes, Signature: 71 bytes isn't valid
{code}

However, they only appear once and they don't appear periodically.
It's expected because identity replication in gossip is asynchronous and takes time.
If a peer receives a message signed by a peer it doesn't know about (yet) it can't verify the message and prints this warning. 

Do these errors appear constantly in your setup (once in a while) or just once? If it's constantly - we have a problem. ","11/Sep/17 7:26 AM;smithbk;Hmm ... step #2 in the instructions should build that image.  After doing the following, what does ""docker images"" show?

{code}
2) Build *fabric-ca* docker images
    # git clone github.com/hyperledger/fabric-ca and cd to fabric-ca
    # checkout https://gerrit.hyperledger.org/r/#/c/13195/
    # export USE_FABRIC_LATEST=true
    # make docker
{code}","11/Sep/17 7:38 AM;smithbk;The real problem I'm trying to solve is that chaincode instantiation fails and these are the only errors I see other than an eventual timeout.  I assumed the timeout was due to these gossip errors, but maybe I'm wrong.  See the timeout at the end.

{code}
^[[33m2017-09-10 18:13:41.223 UTC [gossip/gossip] handleMessage -> WARN 436^[[0m Message GossipMessage: tag:EMPTY alive_msg:<membership:<endpoint:""peer2-org1:7051"" pki_id:""\242\355\225\366\321\177\354\275&E\351\210\255*w\343\205\373/t#>\333&2\242H\n\313\227\232\\"" > timestamp:<inc_num:1505067166173445180 seq_num:49 > > , Envelope: 71 bytes, Signature: 70 bytes isn't valid
^[[36m2017-09-10 18:13:41.714 UTC [gossip/channel] handleStateInfSnapshot -> DEBU 437^[[0m Channel mychannel : Couldn't find org identity of peer ¢í<95>öÑ^?ì½&Eé<88>­*wã<85>û/t#>Û&2¢H
Ë<97><9a>\ message sent from m<80>*^G<8d>³c¸5Ö5¤j;ô^U³m9<89>^W<88><84>^_c@ãí<8d>Ö¡4
^[[36m2017-09-10 18:13:41.716 UTC [gossip/channel] handleStateInfSnapshot -> DEBU 438^[[0m Channel mychannel : Couldn't find org identity of peer ¢í<95>öÑ^?ì½&Eé<88>­*wã<85>û/t#>Û&2¢H
Ë<97><9a>\ message sent from èÌ@MtÕÛ¡üõKrÜ'ïBíæjT«)kN<88>7Ú£w.Zv
^[[33m2017-09-10 18:13:43.760 UTC [gossip/state] handleStateResponse -> WARN 439^[[0m Payload with sequence number 2 was received earlier
^[[36m2017-09-10 18:13:45.715 UTC [gossip/channel] handleStateInfSnapshot -> DEBU 43a^[[0m Channel mychannel : Couldn't find org identity of peer ¢í<95>öÑ^?ì½&Eé<88>­*wã<85>û/t#>Û&2¢H
Ë<97><9a>\ message sent from m<80>*^G<8d>³c¸5Ö5¤j;ô^U³m9<89>^W<88><84>^_c@ãí<8d>Ö¡4
^[[36m2017-09-10 18:13:45.718 UTC [gossip/channel] handleStateInfSnapshot -> DEBU 43b^[[0m Channel mychannel : Couldn't find org identity of peer ¢í<95>öÑ^?ì½&Eé<88>­*wã<85>û/t#>Û&2¢H
Ë<97><9a>\ message sent from èÌ@MtÕÛ¡üõKrÜ'ïBíæjT«)kN<88>7Ú£w.Zv
^[[33m2017-09-10 18:13:53.767 UTC [gossip/state] handleStateResponse -> WARN 43c^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:14:03.773 UTC [gossip/state] handleStateResponse -> WARN 43d^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:14:13.782 UTC [gossip/state] handleStateResponse -> WARN 43e^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:14:23.789 UTC [gossip/state] handleStateResponse -> WARN 43f^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:14:33.797 UTC [gossip/state] handleStateResponse -> WARN 440^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:14:43.804 UTC [gossip/state] handleStateResponse -> WARN 441^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:14:53.812 UTC [gossip/state] handleStateResponse -> WARN 442^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:15:03.818 UTC [gossip/state] handleStateResponse -> WARN 443^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:15:13.824 UTC [gossip/state] handleStateResponse -> WARN 444^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:15:23.832 UTC [gossip/state] handleStateResponse -> WARN 445^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:15:33.839 UTC [gossip/state] handleStateResponse -> WARN 446^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:15:43.338 UTC [gossip/state] handleStateResponse -> WARN 447^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:15:53.344 UTC [gossip/state] handleStateResponse -> WARN 448^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:16:03.349 UTC [gossip/state] handleStateResponse -> WARN 449^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:16:13.355 UTC [gossip/state] handleStateResponse -> WARN 44a^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:16:23.365 UTC [gossip/state] handleStateResponse -> WARN 44b^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:16:33.372 UTC [gossip/state] handleStateResponse -> WARN 44c^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:16:43.376 UTC [gossip/state] handleStateResponse -> WARN 44d^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:16:53.383 UTC [gossip/state] handleStateResponse -> WARN 44e^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:17:03.390 UTC [gossip/state] handleStateResponse -> WARN 44f^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:17:13.396 UTC [gossip/state] handleStateResponse -> WARN 450^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:17:23.403 UTC [gossip/state] handleStateResponse -> WARN 451^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:17:33.411 UTC [gossip/state] handleStateResponse -> WARN 452^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:17:43.417 UTC [gossip/state] handleStateResponse -> WARN 453^[[0m Payload with sequence number 2 was received earlier
^[[33m2017-09-10 18:17:53.422 UTC [gossip/state] handleStateResponse -> WARN 454^[[0m Payload with sequence number 2 was received earlier
^[[36m2017-09-10 18:17:54.894 UTC [chaincode] launchAndWaitForRegister -> DEBU 455^[[0m stopping due to error while launching Timeout expired while starting chaincode mycc:1.0(networkid:dev,peerid:peer2-org2,tx:c6de4530ae1216b0661f066cfc24916adf4b092038d1e49e8f203ed625a5f4dd)
{code}","11/Sep/17 7:42 AM;smithbk;And I see the following errors later in logs:
{code}
^[[33m2017-09-10 18:32:25.359 UTC [gossip/comm] sendToEndpoint -> WARN 514^[[0m Failed obtaining connection for peer2-org1:7051, PKIid:[162 237 149 246 209 127 236 189 38 69 233 136 173 42 119 227 133 251 47 116 35 62 219 38 50 162 72 10 203 151 154 92] reason: context deadline exceeded
^[[33m2017-09-10 18:32:25.359 UTC [gossip/discovery] expireDeadMembers -> WARN 515^[[0m Entering [[162 237 149 246 209 127 236 189 38 69 233 136 173 42 119 227 133 251 47 116 35 62 219 38 50 162 72 10 203 151 154 92]]
^[[33m2017-09-10 18:32:25.359 UTC [gossip/discovery] expireDeadMembers -> WARN 516^[[0m Closing connection to Endpoint: peer2-org1:7051, InternalEndpoint: , PKI-ID: [162 237 149 246 209 127 236 189 38 69 233 136 173 42 119 227 133 251 47 116 35 62 219 38 50 162 72 10 203 151 154 92], Metadata: []
^[[33m2017-09-10 18:32:25.359 UTC [gossip/discovery] expireDeadMembers -> WARN 517^[[0m Exiting
^[[33m2017-09-10 18:32:28.360 UTC [gossip/comm] sendToEndpoint -> WARN 518^[[0m Failed obtaining connection for peer2-org1:7051, PKIid:[162 237 149 246 209 127 236 189 38 69 233 136 173 42 119 227 133 251 47 116 35 62 219 38 50 162 72 10 203 151 154 92] reason: context deadline exceeded
^[[33m2017-09-10 18:32:31.361 UTC [gossip/comm] sendToEndpoint -> WARN 519^[[0m Failed obtaining connection for peer2-org1:7051, PKIid:[162 237 149 246 209 127 236 189 38 69 233 136 173 42 119 227 133 251 47 116 35 62 219 38 50 162 72 10 203 151 154 92] reason: context deadline exceeded
^[[33m2017-09-10 18:32:34.361 UTC [gossip/comm] sendToEndpoint -> WARN 51a^[[0m Failed obtaining connection for peer2-org1:7051, PKIid:[162 237 149 246 209 127 236 189 38 69 233 136 173 42 119 227 133 251 47 116 35 62 219 38 50 162 72 10 203 151 154 92] reason: context deadline exceeded
^[[33m2017-09-10 19:18:34.457 UTC [gossip/discovery] getDeadMembers -> WARN 51b^[[0m Haven't heard from [109 128 42 7 141 179 99 184 53 214 53 164 106 59 244 21 179 109 57 137 23 136 132 31 99 64 227 237 141 214 161 52] for 1m29.871687032s
^[[33m2017-09-10 19:18:34.458 UTC [gossip/discovery] getDeadMembers -> WARN 51c^[[0m Haven't heard from [232 204 64 77 116 213 219 161 252 245 75 114 220 39 239 66 237 230 106 84 171 41 107 78 136 55 218 163 119 46 90 118] for 1m29.869761927s
^[[33m2017-09-10 19:18:34.458 UTC [gossip/discovery] expireDeadMembers -> WARN 51d^[[0m Entering [[109 128 42 7 141 179 99 184 53 214 53 164 106 59 244 21 179 109 57 137 23 136 132 31 99 64 227 237 141 214 161 52] [232 204 64 77 116 213 219 161 252 245 75 114 220 39 239 66 237 230 106 84 171 41 107 78 136 55 218 163 119 46 90 118]]
^[[33m2017-09-10 19:18:34.458 UTC [gossip/discovery] expireDeadMembers -> WARN 51e^[[0m Closing connection to Endpoint: peer1-org1:7051, InternalEndpoint: , PKI-ID: [109 128 42 7 141 179 99 184 53 214 53 164 106 59 244 21 179 109 57 137 23 136 132 31 99 64 227 237 141 214 161 52], Metadata: []
^[[33m2017-09-10 19:18:34.458 UTC [gossip/discovery] expireDeadMembers -> WARN 51f^[[0m Closing connection to Endpoint: peer1-org2:7051, InternalEndpoint: peer1-org2:7051, PKI-ID: [232 204 64 77 116 213 219 161 252 245 75 114 220 39 239 66 237 230 106 84 171 41 107 78 136 55 218 163 119 46 90 118], Metadata: []
^[[33m2017-09-10 19:18:34.458 UTC [gossip/discovery] expireDeadMembers -> WARN 520^[[0m Exiting
{code}","11/Sep/17 9:29 AM;yacovm;It seems your setup isn't good:
{code}
docker logs peer2-org1 2>&1 | less -R
{code}
Searching for WARN I get:
{code}
2017-09-11 08:36:08.608 UTC [gossip/discovery] func1 -> WARN 19c Could not connect to {peer1-org1:7051 [] [] peer1-org1:7051} : x509: certificate signed by unknown authority
{code}

It seems there is an error in the setup. Also I didn't see any environment variables when I did docker inspect other than:
{code}
            ""Env"": [
                ""PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"",
                ""FABRIC_CFG_PATH=/etc/hyperledger/fabric""
            ],
{code}

What about the localMspId and mspConfigPath ?","11/Sep/17 8:34 PM;smithbk;The env vars are set in a script but I also display them so they appear in the logs.
For example, see the following in data/logs/peer2-org1.log:
{code}
##### 2017-09-10 18:12:45 Starting peer 'peer2-org1' with MSP at '/opt/gopath/src/github.com/hyperledger/fabric/peer/msp' #####
CORE_PEER_TLS_ROOTCERT_FILE=/data/org1-ca-chain.pem
CORE_PEER_TLS_KEY_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/tls/server.key
CORE_PEER_GOSSIP_ORGLEADER=false
CORE_PEER_PROFILE_ENABLED=true
CORE_PEER_LOCALMSPID=org1MSP
CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
CORE_PEER_TLS_CERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/tls/server.crt
CORE_PEER_TLS_ENABLED=true
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/msp
CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=net_fabric-ca
CORE_PEER_ID=peer2-org1
CORE_LOGGING_LEVEL=DEBUG
CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer2-org1:7051
CORE_PEER_ADDRESS=peer2-org1:7051
CORE_PEER_GOSSIP_USELEADERELECTION=true
CORE_PEER_GOSSIP_BOOTSTRAP=peer1-org1:7051
{code}

So when a non-anchor peer tries to connect to it's anchor peer (which is what appears to be happening above), where does the non-anchor peer get the TLS trusted certificate to use for the client side of the TLS connection?  I assume this is from the local MSP's tlscacerts and tlsintermediatecerts directories.  And if you could point me to the code that does that, it would be helpful.  I assume it will handle tlsintermediatecerts.","12/Sep/17 6:01 AM;yacovm;{quote}So when a non-anchor peer tries to connect to it's anchor peer (which is what appears to be happening above), where does the non-anchor peer get the TLS trusted certificate to use for the client side of the TLS connection?{quote}

If the the 2 peers are from different orgs, then it uses the channel's genesis block.
Else - they are in the same org, and then it uses the local MSP's cacerts.

However from what I recall - this happens at the beginning so it's not an anchor peer, but a bootstrap peer (the code path that connects to both of them is the same).
This implies that the local MSPs aren't setup right. ","12/Sep/17 10:16 AM;smithbk;I assume you meant it uses the ""local MSP's tlscacerts and tlsintermediatecerts"" and not the ""local MSP's cacerts"" to connect to a bootstrap peer.  Is this correct?",12/Sep/17 10:20 AM;yacovm;yeah. ,"14/Sep/17 1:36 AM;smithbk;The previous issue is fixed but now hitting this.  Look familiar or any ideas?  Where exactly does the PKIID value originate and what does that indicate may be wrong from a configuration perspective?

{code}
^[[33m2017-09-14 00:29:19.768 UTC [gossip/gossip] validateMsg -> WARN 417^[[0m StateInfo message GossipMessage: tag:CHAN_OR_ORG state_info:<metadata:""\000\000\000\000\000\000\000\002"" timestamp:<inc_num:11651379494838206464 seq_num:1505348957740534144 > pki_id:""\206\264\344\343\037\357\007\rZ\261\313\020y\221D\034\331\205g\265\303\233L\341\357\351*{\001C\275@"" channel_MAC:""\263\017u\206=\330\340\022]\005K\261O\241\""M\377\233\360\345\212\025\351\020\r*\260\251Q\177tv"" > , Envelope: 105 bytes, Signature: 70 bytes is found invalid: PKIID wasn't found
github.com/hyperledger/fabric/gossip/identity.(*identityMapperImpl).Get
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/identity/identity.go:149
github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).validateStateInfoMsg
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:1167
github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).validateMsg
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:413
github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).handleMessage
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:335
github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).acceptMessages
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:316
runtime.goexit
        /opt/go/src/runtime/asm_amd64.s:2086
github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).validateStateInfoMsg
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:1169
github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).validateMsg
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:413
github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).handleMessage
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:335
github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).acceptMessages
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:316
runtime.goexit
        /opt/go/src/runtime/asm_amd64.s:2086
{code}","14/Sep/17 12:28 PM;yacovm;{quote}The previous issue is fixed but now hitting this. Look familiar or any ideas? Where exactly does the PKIID value originate and what does that indicate may be wrong from a configuration perspective?{quote}

the PKI-ID is a representation of the certificate and MSP-ID in a minimized form (hashed). 

This warning happens when you get a message that is signed by someone who's certificate you don't have yet. ","14/Sep/17 1:31 PM;yacovm;I compiled your TLS fix and ran the stuff locally:
*docker logs peer1-org1 2>&1 | grep handleMessage | grep ""state_info_pull_req"" | less -R*
{code}
2017-09-14 13:27:34.663 UTC [gossip/gossip] handleMessage -> DEBU 71f9 Entering, 172.20.0.11:35466 [120 251 148 194 77 163 134 253 185 23 78 199 102 2 202 1 248 30 195 137 210 198 244 248 202 9 191 61 42 70 108 146] sent us GossipMessage: tag:CHAN_OR_ORG state_info_pull_req:<channel_MAC:""J\340\375\223\333e\207jj~7.d\212\356\016\003\230\316\026*\240\201\246\320o\364\313_@\200\223"" > , Envelope: 39 bytes, Signature: 0 bytes
2017-09-14 13:27:38.049 UTC [gossip/gossip] handleMessage -> DEBU 739d Entering, 172.20.0.13:7051 [155 246 100 223 180 182 74 172 98 195 198 117 236 235 67 209 36 103 16 222 152 173 185 103 30 205 166 181 133 247 103 94] sent us GossipMessage: tag:CHAN_OR_ORG state_info_pull_req:<channel_MAC:""\235\231\273\03306#&\203_\375\036R\002Z\245\270w\232\363\333\2033\033\310\006\273v\240\223\253!"" > , Envelope: 39 bytes, Signature: 0 bytes
2017-09-14 13:27:38.357 UTC [gossip/gossip] handleMessage -> DEBU 73a0 Entering, 172.20.0.10:7051 [63 220 180 239 242 247 96 167 177 230 60 77 182 78 73 248 10 213 125 184 62 207 163 224 192 154 29 190 13 131 9 21] sent us GossipMessage: tag:CHAN_OR_ORG state_info_pull_req:<channel_MAC:""\332\353\366\210z\342\006\246\313G\336\263i\330gBL\002\246B\0207\336\254\223\203{|:\346K\320"" > , Envelope: 39 bytes, Signature: 0 bytes
{code}

A similar output is in *peer2-org1* and in for org2. 

So it looks like the certificate replication works as expected, because if the peer sent ""us"" a request it means it verified our certificate. ","14/Sep/17 1:34 PM;yacovm;The instantiate doesn't work because:

{code}
2017-09-14 13:33:39.282 UTC [shim] userChaincodeStreamGetter -> ERRO 001 Error trying to connect to local peer: x509: certificate signed by unknown authority (possibly because of ""x509: ECDSA verification failure"" while trying to verify candidate authority certificate ""rca-org2-admin"")
Error starting Simple chaincode: Error trying to connect to local peer: x509: certificate signed by unknown authority (possibly because of ""x509: ECDSA verification failure"" while trying to verify candidate authority certificate ""rca-org2-admin"")

{code}
","04/Oct/17 4:19 PM;yacovm;[~smithbk]  I believe we can close this, right?",,,,,,,,,
remove deprecated --email from docker login,FAB-6086,20704,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,08/Sep/17 6:20 PM,10/Sep/17 10:57 AM,26/Apr/18 6:50 AM,10/Sep/17 10:57 AM,,,,,,,,,,fabric-baseimage,,,,0,,,,,,,,,Remove deprecated --email flag from docker login in fabric-baseimage repository.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01m9x:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
CA DBs aren't properly managed and left open,FAB-6085,20692,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lehors,lehors,lehors,08/Sep/17 12:57 PM,27/Sep/17 6:49 PM,26/Apr/18 6:50 AM,27/Sep/17 6:49 PM,v1.0.2,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"The DBs associated with the CA server aren't being properly managed in that they are left open. This leads to various failures exhibited by the unit-tests on Windows where files are locked until they are properly closed or the associated process exits.

A few related bug reports were open against the unit tests but having been looking at this issue for a while I've become convinced that this deserves more careful consideration because trying to fix this on a case by case basis isn't good enough.

Indeed, while this problem can be easily fixed for the most common case by ensuring that the server Stop() function closes its DB(s) there actually are many corner cases that this fails to address. So, for this problem to be properly addressed a general policy on when the DB(s) are to be closed and by whom needs to be developed.

I'm opening this ticket for this issue to be looked at. Unlike the related JIRA tickets that all focus on various unit-tests failing this is meant to highlight the fact that there is a problem with the code itself and not just the tests.",This problem is not platform dependent but the consequences are primarily seen on Windows platforms.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01m79:,,,,,,,,lehors,,,,,,,,,,master,,,true,"08/Sep/17 1:19 PM;lehors;The main issue has to do with opening DBs and never explicitly closing them. server.Init() opens the DB (there actually are more than one in case of a mutli-CA server but the problem is the same) and nothing/nobody closes it.

This problem can mostly be addressed by adding a server function to close its DB. The question is who should be responsible for calling this function and when?

server.Stop() can call it but in the case where server.Start() hasn't been called this isn't appropriate (server.Stop() will actually raise an error). So, one would need to call it after calling server.Init() if server.Start() is not called.

[~keithsmith] in a chat exchange ([https://chat.hyperledger.org/channel/fabric-pr-review?msg=CiELHAAL53ZFSA5Tv]) mentioned that Init shouldn't leave the DB open. However, closing it makes every subsequent operation, such as GetUser(), fails because they all assume that the DB is open. Should Init really close the DB then? If so when should it be reopened? When Start is called?

Besides, there are many error cases that have to be dealt with which raises again the question of when the DB should be closed. For instance, should server.Init() close the DB if it's returning an error? What about server.Start()?","08/Sep/17 6:48 PM;lehors;So here are two possible approaches that seem reasonable:

Approach #1:
 * Let Init() open the DB and leave it open unless an error is raised (if any error is returned the DB is closed if it ever were opened).
 * Add a public function called CloseDB() that must be explicitly called if Init() was called and didn't return any error, and Start() is never called.
 * Have Stop() call CloseDB() 

Approach #2:
 * Add a private function called closeDB()
 * Let Init() open the DB and close it before returning.
 * Have Start() reopen the DB and leave it open unless an error is raised ((if any error is returned the DB is closed)
 * Have Stop() call closeDB() 

The advantage of the latter is that it keeps this whole business away from the application. The disadvantage is that it requires closing and reopening the DB(s) (there are several of them in case of a multiCA server).

For what it's worth approach #1 is the easiest to implement because it is closer to how the code works today.","11/Sep/17 7:56 PM;lehors;I investigated both approaches and I'm now leaning towards #2 because it leaves the server API unchanged and keeps this DB management business internal to the server.

This does come at a cost in that the DB is closed and reopened if one explicitly calls Init() and then Start() as described above but this can be avoided in case Start() is called directly. So, all in all, this seems a reasonable trade-off.

 ",,,,,,,,,,,,,,,,,,,,,
Channel reconfig to add a new MSP but MSP unknown during instantiate-chaincode,FAB-6084,20690,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,davidkhala,davidkhala,08/Sep/17 10:44 AM,27/Oct/17 7:59 AM,26/Apr/18 6:50 AM,27/Oct/17 7:59 AM,v1.0.1,,,,,,,,,fabric-ca,,,,0,fabric-ca,,,,,,,,"create channel with org1,org2
join-channel for all peers under org1, org2
channel update: add new MSP with id AMMSP for org: orgAM
join-channel for peer: peer0AM under orgAM
install-chaincode on peer0AM
instantiate using admin identity on peer0AM
then we can get


{code:java}
error: [client-utils.js]: sendPeersProposal - Promise is rejected: Error: Failed to deserialize creator identity, err MSP AMMSP is unknown
    at /home/david/Documents/delphi-fabric/node_modules/grpc/src/node/src/client.js:434:17
[2017-09-08 18:39:59.433] [ERROR] instantiate-chaincode - instantiate was bad for [0] { Error: Failed to deserialize creator identity, err MSP AMMSP is unknown
    at /home/david/Documents/delphi-fabric/node_modules/grpc/src/node/src/client.js:434:17 code: 2, metadata: Metadata { _internal_repr: {} } }
(node:22267) UnhandledPromiseRejectionWarning: Unhandled promise rejection (rejection id: 2): Error: Failed to deserialize creator identity, err MSP AMMSP is unknown
{code}
","
https://github.com/davidkhala/delphi-fabric

./docker.sh to restart containers
node app/testChannel.js to create-channel and join-channel for org1,org2
./testNewPeer.sh to create new org, create new peer, update channel and do the rest",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01m6t:,,,,,,,,davidkhala,,,,,,,,,,,,,,"27/Oct/17 7:58 AM;davidkhala;Solved: 
In my previous setting, property 'anchor peer' is not set in the temp crypto-config.yaml for generating the new MSP, So I have to set CORE_PEER_GOSSIP_ORGLEADER=true for the new container for the new organization.",,,,,,,,,,,,,,,,,,,,,,,
Not recognising platform specific tar ball package,FAB-6083,20687,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lehors,sdcho,sdcho,08/Sep/17 7:05 AM,16/Dec/17 11:52 AM,26/Apr/18 6:50 AM,16/Dec/17 11:52 AM,,,,,,,v1.1,,,fabric-samples,,,,0,,,,,,,,,"After cloning the fabric-sample, and try downloading a platform specific binaries by executing the following command from PowerShell

{color:#205081}*curl -sSL [https://goo.gl/Gci9ZX] |* {color}{color:#205081}*bash*{color}

This command does not download the tar ball on windows 10, which also has CygWin installed.

This is due to the script expecting *mingw64_nt.** in the string returned by *uname -s* on line 9.

This needs to be changed to as follows for the machine with *CygWin(x64)* installed.

{color:#d04437}*Before:*{color} export ARCH=$(echo ""$(uname -s|tr '[:upper:]' '[:lower:]'|sed 's/*mingw64_nt.**/windows/')$(uname -m | sed 's/x86_64/amd64/g')"" | awk '\{print tolower($0)}')
 *{color:#205081}After:{color}* export ARCH=$(echo ""$(uname -s|tr '[:upper:]' '[:lower:]'|sed 's/*cygwin_nt-10.0*/windows/')$(uname -m | sed 's/x86_64/amd64/g')"" | awk '\{print tolower($0)}')

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01m65:,,,,,,,,denyeart,lehors,sdcho,,,,,,,,master,,,true,"28/Sep/17 4:04 AM;sdcho;For windows 10 with powershell, the mingw64 above need to be changed to mingw32 instead.

{color:#d04437}*Before:*{color} export ARCH=$(echo ""$(uname -s|tr '[:upper:]' '[:lower:]'|sed 's/*mingw64_nt.**/windows/')$(uname -m | sed 's/x86_64/amd64/g')"" | awk '\{print tolower($0)}')
 *{color:#205081}After:{color}* export ARCH=$(echo ""$(uname -s|tr '[:upper:]' '[:lower:]'|sed 's/*{color:#ff0000}mingw32_nt{color}.**/windows/')$(uname -m | sed 's/x86_64/amd64/g')"" | awk '\{print tolower($0)}')",27/Nov/17 4:35 AM;denyeart;[~lehors] Do you have advice on this one?,"27/Nov/17 5:34 AM;sdcho;Please refer to the latest comment.

It looks like the PowerShell on Windows 10 (64bit) still identified as *{color:#d04437}MINGW32_NT-6.2{color}*

{color:#333333}So the script should be changed to reflect that as in the above comment made by me on 28/Sep/2017.
{color}","27/Nov/17 12:48 PM;lehors;[~sdcho] could you please describe your environment a bit more? I'm confused as to how you make use of Cygwin if you're using Windows PowerShell. You're not using Cygwin's bash? If not, have you tried using it?

And you could you please give us the output of uname -a?

Thanks.","27/Nov/17 1:36 PM;sdcho;Sorry for the confusion.

Please ignore about the comment using Cygwin.

Initially I tried use Cygwin and succeeded the downloading by changing as described earlier.

But further investigation shows Windows 10 PowerShell returns *{color:#d04437}MINGW32_NT-6.2{color}*{color:#333333}.{color}

{color:#333333}So I think it should be better using Windows 10's native environment rather than the Cygwin's emulated environment.{color}

{color:#d04437}*So please disregard the comment about using Cygwin shell.{color:#205081} Instead using PowerShell.{color}*{color}","27/Nov/17 2:14 PM;sdcho;Output of uname -a in PowerShell:

MINGW32_NT-6.2 MYHOMEPC 1.0.12(0.46/3/2) 2012-07-05 14:56 i686 unknown","27/Nov/17 2:28 PM;lehors;Where does your uname command come from?

And which version of the PowerShell are you running? 32 or 64?

Thanks.

 ","27/Nov/17 3:13 PM;sdcho;The uname I am using is from the GIT installation {color:#d04437}*C:/Program Files (x86)/Git/bin/uname.exe*{color:#333333}, w{color}{color}{color:#d04437}{color:#333333}hich is 32 bit.{color}{color}

{color:#d04437}{color:#333333}This may explain why my system returns the *{color:#d04437}MINGW32_NT-6.2{color}* regardless of the PowerShell version whether 32 bit or 64 bit.{color}{color}

 

 ","27/Nov/17 3:20 PM;sdcho;I installed 64 bit version of Git (v2.15.0) just now and rerun the uname -a command from the git bash terminal and got following result for {color:#205081}*uname -a*{color} command:

{color:#14892c}*MINGW64_NT-10.0 MyHomePC 2.9.0(0.318/5/3) 2017-10-05 15:05 x86_64 Msys*{color}

{color:#333333}So the original script is correct but need to be indicated that there is another requirement to get the correct System properties such as the result of the {color:#205081}*uname -a*{color} command.{color}","27/Nov/17 3:32 PM;lehors;Ok, that makes sense. There are so many possible setups on Windows that it's a bit tricky to get the script do the right thing for all cases. That's why I wanted to understand exactly your setup before changing anything.

Thanks.

 ","27/Nov/17 4:21 PM;lehors;I just submitted a change to the doc to clarify:

https://gerrit.hyperledger.org/r/#/c/15727/

Thanks",,,,,,,,,,,,,
Channel mod_policy not set correctly for new channels,FAB-6080,20684,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,08/Sep/17 2:32 AM,05/Oct/17 11:32 AM,26/Apr/18 6:50 AM,05/Oct/17 11:32 AM,,,,,,,v1.1,,,fabric-orderer,,,,0,configuration,,,,,,,,"For all channels created by the v1.0.x orderer, the Channel group's {{mod_policy}} was left unset.  Although the channel is functional, it is not possible to add config elements to the channel level.

Although it would be nice to simply change this behavior in v1.1, unfortunately, because the v1.0 orderers validate that the config computed for the new channel is correct, based on this flawed generation scheme, v1.1 orderers would accept the config as correct, but v1.0 would not.  This could allow the same channel name when referenced on different orderers to have different backing blockchains and is not acceptable.

Therefore, this fix must be gated behind a capability flag.  It is a simple change and so is a good candidate for first user of capabilities flags.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01m5h:,,,,,,,,jyellick,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Fix typo in log message for implicit policies,FAB-6076,20678,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,07/Sep/17 5:45 PM,21/Sep/17 3:40 PM,26/Apr/18 6:50 AM,21/Sep/17 3:40 PM,,,,,,,v1.1,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01m45:,,,,,,,,jyellick,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
User state should only be incremented after all checks are performed,FAB-6068,20670,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,skarim,skarim,07/Sep/17 2:45 PM,19/Sep/17 7:50 PM,26/Apr/18 6:50 AM,19/Sep/17 7:50 PM,v1.0.0,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"Currently, the user state gets updated if the user provides the correct username and password, this happens when the basic authorization is performed. However, there are subsequent enrollment checks that are performed after the username and password have been validated. If one of these enrollment checks fail the enrollment of the user will not succeed but the state would have been updated. Need to increment state only after all the appropriate checks have succeeded. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01m2d:,,,,,,,,skarim,,,,,,,,,,master,,,true,11/Sep/17 2:16 PM;skarim;https://gerrit.hyperledger.org/r/#/c/13293/,,,,,,,,,,,,,,,,,,,,,,,
ledger regression tests are failing in daily CI build,FAB-6067,20669,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,AdnanChoudhury,rameshthoomu,rameshthoomu,07/Sep/17 2:45 PM,19/Sep/17 3:26 PM,26/Apr/18 6:50 AM,19/Sep/17 3:26 PM,,,,,,,,,,fabric-ledger,,,,0,,,,,,,,,"Observed ledger regression tests are failing in daily CI build.. Below is the log and build output

[https://jenkins.hyperledger.org/view/Daily/job/fabric-daily-tests-x86_64/79/console]
{code:java}
../chainmgmt/chains.go:112: c.PeerLedger.Commit undefined (type ""github.com/hyperledger/fabric/core/ledger"".PeerLedger has no field or method Commit){code}",,,,,,,,,,,,,,,,,FAB-6171,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01m25:,,,,,,,,AdnanChoudhury,rameshthoomu,,,,,,,,,master,,,true,14/Sep/17 8:50 PM;AdnanChoudhury;https://gerrit.hyperledger.org/r/#/c/13485/,,,,,,,,,,,,,,,,,,,,,,,
Node.js SDK leaks file handles,FAB-6062,20655,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,sstone1,sstone1,07/Sep/17 7:43 AM,27/Nov/17 4:34 AM,26/Apr/18 6:50 AM,27/Nov/17 4:34 AM,,,,,,,v1.0.5,,,fabric-sdk-node,,,,1,,,,,,,,,"We are seeing that as expected, the Node.js SDK creates file handles for communicating with the peer and ordering service. These can be seen using lsof:
{code:java}
node    83189 sstone1   15u    IPv6 0xed59cbca3b63aaf7       0t0      TCP localhost:64262->localhost:7053 (ESTABLISHED)
node    83189 sstone1   16u    IPv6 0xed59cbca43de85b7       0t0      TCP localhost:64263->localhost:7051 (ESTABLISHED)
{code}
There is no way to close these file handles using the Node.js SDK. The only ""close"" or ""disconnect"" method available is for the event hub, and it does not remove the underlying file handle.

This is causing a file handle leak in any program that creates/closes multiple Fabric connections during its life time.

A bit of experimentation with the event hub shows that adding the following code to EventHub._disconnect removes the file handle for the event hub:
{code:java}
this._event_client.close();
{code}
The Node.js SDK needs to offer ""close"" or ""disconnect"" methods that close all connections and remove all of the created file handles for the peers and orderers. Guessing the CA is OK as it uses HTTP instead of gRPC.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01lzh:,,,,,,,,chrisf,harrisob@us.ibm.com,sstone1,,,,,,,,master,,,true,"05/Oct/17 8:14 PM;harrisob@us.ibm.com;In running a test that loops continuously on invoking and querying, I do see that node based IPv6 handlers go up, however after about 2 minutes they are cleaned up and the number drops to just a few.","03/Nov/17 7:34 PM;harrisob@us.ibm.com;Thanks for the pointer to the .close() method... seems that all services (clients) have this method

[https://github.com/grpc/grpc/issues/8881]

Will add to Peer and Orderer, however on the EventHub will just add it to the disconnect()",03/Nov/17 7:42 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/15185/,,,,,,,,,,,,,,,,,,,,,
Node.js SDK rewrites user and public key files during getUserContext,FAB-6061,20654,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,sstone1,sstone1,07/Sep/17 7:25 AM,05/Oct/17 10:23 AM,26/Apr/18 6:50 AM,05/Oct/17 10:23 AM,,,,,,,v1.0.4,,,fabric-sdk-node,,,,0,,,,,,,,,"In Composer, we use the getUserContext call to load a user from the state store.

If the user is already enrolled, and we already have certificates/keys for that user, I would not expect the Node.js SDK to write any files to disk.

However, it seems that getUserContext rewrites the user file (admin, PeerAdmin, WebAppAdmin, etc) and the public key file. The private key file does not get overwritten. As far as I can see the contents being written are always the same.

This is easy to recreate using chmod - just chmod 400 (read-only) the files in the keyValStore. When I use the following files and permissions:
{code:java}
$ ls -lart
total 24
drwxr-xr-x+ 115 sstone1  staff  3910  5 Sep 09:44 ..
-r--r--r--    1 sstone1  staff   246  7 Sep 08:07 114aab0e76bf0c78308f89efc4b8c9423e31568da0c340ca187a9b17aa9a4457-priv
drwxr-xr-x    5 sstone1  staff   170  7 Sep 08:07 .
-r--r--r--    1 sstone1  staff  1024  7 Sep 08:13 PeerAdmin
-r--r--r--    1 sstone1  staff   182  7 Sep 08:13 114aab0e76bf0c78308f89efc4b8c9423e31568da0c340ca187a9b17aa9a4457-pub{code}
I see the following error when calling getUserContext:
{code:java}
Error trying login and get user Context. Error: EACCES: permission denied, open '/Users/sstone1/.composer-credentials/114aab0e76bf0c78308f89efc4b8c9423e31568da0c340ca187a9b17aa9a4457-pub'
{code}
If I chmod 644 the public key file, I then see the following error when calling getUserContext:
{code:java}
Error trying login and get user Context. Error: EACCES: permission denied, open '/Users/sstone1/.composer-credentials/PeerAdmin'
{code}
I believe this is happening because getUserContext calls setUserContext, but does not set persistence to false, meaning setUserContext calls saveUserToStateStore.

We have experienced difficulties with sharing keyValStore directories across multiple machines using Docker, as you have to always chmod/chown the directories so that they can be written to - even if they contain enough information to submit transactions.

Another team has also seen sporadic errors around trying to call getUserContext, where one of the files seems to be missing, truncated, or contain invalid JSON. This scenario is a bit unusual, where they were calling getUserContext on a regular basis across multiple parallel requests. I suspect that it's possible that as the SDK rewrites the file there is a timing window where another request sees a deleted or truncated file and then fails.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01lz9:,,,,,,,,harrisob@us.ibm.com,sstone1,,,,,,,,,master,,,true,02/Oct/17 6:44 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/14089/,,,,,,,,,,,,,,,,,,,,,,,
"Undefined name ""containers"" can raise NameError at runtime",FAB-6059,20652,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lhaskins,cclauss,cclauss,06/Sep/17 10:05 PM,15/Feb/18 4:03 PM,26/Apr/18 6:50 AM,15/Feb/18 3:33 PM,,,,,,,Future,,,fabric-quality,,,,0,,,,,,,,,"In the context of https://github.com/hyperledger/fabric/blob/release/test/feature/environment.py#L53 containers is an undefined name and can raise a NameError at runtime in the statement getLogFiles(containers, fileSuffix)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01lyt:,,,,,,,,cclauss,latitiah,,,,,,,,,,,,,"15/Feb/18 3:33 PM;latitiah;This code has been moved and fixed in a separate repository. See fix at [https://github.com/hyperledger/fabric-test/blob/master/feature/environment.py#L42]

This said, I would like to remove this code, since it is no longer being supported in the fabric repo, but in fabric-test instead.

 ",15/Feb/18 4:03 PM;latitiah;https://jira.hyperledger.org/browse/FAB-7721 has already been open to clean up the code in this repo.,,,,,,,,,,,,,,,,,,,,,,
Typo in variable name: ordererContext instead of context,FAB-6058,20651,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,cclauss,cclauss,06/Sep/17 9:56 PM,30/Jan/18 12:57 PM,26/Apr/18 6:50 AM,30/Jan/18 12:57 PM,v1.0.5,v1.1,,,,,v1.0.6,v1.1,,fabric-quality,,,,0,,,,,,,,,https://github.com/hyperledger/fabric/blob/release/bddtests/steps/orderer_util.py#L255 is the only instance of the text ordererContext in the entire repo and is an undefined name in this context.  Should this be context?,,,,144000,144000,,0%,144000,144000,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01lyl:,,,,,,,,cclauss,denyeart,,,,,,,,,release-1.0,master,,true,17/Oct/17 8:49 PM;denyeart;[~jeffgarratt] Feel free to reassign if somebody else is looking after this now.,,,,,,,,,,,,,,,,,,,,,,,
Fix gossip comm UT failure - premature gRPC servicing,FAB-6048,20640,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,06/Sep/17 10:43 AM,04/Oct/17 4:19 PM,26/Apr/18 6:50 AM,04/Oct/17 4:19 PM,v1.1,,,,,,v1.1,,,fabric-gossip,,,,0,,,,,,,,,"After we upgraded to go 1.9, the gossip comm module sometimes registers the gRPC service after starting the gRPC server and this results in the following:

{code}
08:54:22 unit-tests_1  | 2017-09-06 08:54:21.898 UTC [gossip/comm#2000] SetDialOpts -> WARN 006 Given an empty set of grpc.DialOption, aborting
08:54:22 unit-tests_1  | 2017-09-06 08:54:21.898 UTC [gossip/comm#3000] SetDialOpts -> WARN 007 Given an empty set of grpc.DialOption, aborting
08:54:22 unit-tests_1  | 2017-09-06 08:54:22.901 UTC [grpc] Fatalf -> CRIT 008 grpc: Server.RegisterService after Server.Serve for ""gossip.Gossip""
08:54:22 unit-tests_1  | FAIL	github.com/hyperledger/fabric/gossip/comm	20.194s
08:54:22 unit-tests_1  | error: exit status 1
08:54:22 unit-tests_1  | panic: EOF
08:54:22 unit-tests_1  | 
08:54:22 unit-tests_1  | goroutine 1 [running]:
08:54:22 unit-tests_1  | panic(0x4daca0, 0xc42000a0f0)
08:54:22 unit-tests_1  | 	/opt/go/src/runtime/panic.go:500 +0x1a1
08:54:22 unit-tests_1  | main.main()
08:54:22 unit-tests_1  | 	/opt/gotools/obj/gopath/src/github.com/AlekSi/gocov-xml/gocov-xml.go:60 +0x15fd
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01lw5:,,,,,,,,harsha544,yacovm,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Fabric-SDK-Go doesn't log properly as per the config,FAB-6041,20621,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Baha-sk,Baha-sk,Baha-sk,05/Sep/17 9:11 PM,13/Sep/17 1:44 PM,26/Apr/18 6:50 AM,13/Sep/17 1:44 PM,,,,,,,,,,,,,,0,,,,,,,,,"Current when changing the client's log level in config.yaml, the peer doesn't log the GO-SDK entries.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01lsd:,,,,,,,,Baha-sk,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca registration affiliation checking,FAB-6038,20618,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,05/Sep/17 8:05 PM,07/Sep/17 2:30 PM,26/Apr/18 6:50 AM,07/Sep/17 2:30 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"{code}
19:53:53 not ok 773 Error: fabric-ca request register failed with errors [[{""code"":0,""message"":""Registration of 'auditor' failed in affiliation validation: Registrar does not have authority to request 'org2.department1' affiliation""}]] at IncomingMessage.<anonymous> (/w/workspace/fabric-sdk-node6-verify-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/fabric-ca-client/lib/FabricCAClientImpl.js:9:22050) at emitNone (events.js:91:20) at IncomingMessage.emit (events.js:185:7) at endReadableNT (_stream_readable.js:974:12) at _combinedTickCallback (internal/process/next_tick.js:74:11) at process._tickDomainCallback (internal/process/next_tick.js:122:9)
19:53:53   ---
19:53:53     operator: fail
19:53:53     at: caService.enroll.then.then.then.then.then.then.then.then.then.then.then.then.then.then.then.then.then.then.catch (/w/workspace/fabric-sdk-node6-verify-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/fabric-ca-services-tests.js:239:6)
19:53:53     stack: |-
19:53:53       Error: Error: fabric-ca request register failed with errors [[{""code"":0,""message"":""Registration of 'auditor' failed in affiliation validation: Registrar does not have authority to request 'org2.department1' affiliation""}]]
19:53:53           at IncomingMessage.<anonymous> (/w/workspace/fabric-sdk-node6-verify-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/fabric-ca-client/lib/FabricCAClientImpl.js:9:22050)
19:53:53           at emitNone (events.js:91:20)
19:53:53           at IncomingMessage.emit (events.js:185:7)
19:53:53           at endReadableNT (_stream_readable.js:974:12)
19:53:53           at _combinedTickCallback (internal/process/next_tick.js:74:11)
19:53:53           at process._tickDomainCallback (internal/process/next_tick.js:122:9)
19:53:53           at Test.assert [as _assert] (/w/workspace/fabric-sdk-node6-verify-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:212:54)
19:53:53           at Test.bound [as _assert] (/w/workspace/fabric-sdk-node6-verify-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:64:32)
19:53:53           at Test.fail (/w/workspace/fabric-sdk-node6-verify-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:277:10)
19:53:53           at Test.bound [as fail] (/w/workspace/fabric-sdk-node6-verify-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:64:32)
19:53:53           at caService.enroll.then.then.then.then.then.then.then.then.then.then.then.then.then.then.then.then.then.then.catch (/w/workspace/fabric-sdk-node6-verify-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/fabric-ca-services-tests.js:239:6)
19:53:53           at process._tickDomainCallback (internal/process/next_tick.js:129:7)
19:53:53   ...
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01lrp:,,,,,,,,,,,,,,,,,,master,,,true,06/Sep/17 4:15 AM;jimthematrix;https://gerrit.hyperledger.org/r/#/c/13169/,,,,,,,,,,,,,,,,,,,,,,,
Update Reporting Bugs section in Contributing.rst document,FAB-6031,20608,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nickgaski,rameshthoomu,rameshthoomu,05/Sep/17 4:05 PM,26/Oct/17 3:10 PM,26/Apr/18 6:50 AM,26/Oct/17 3:10 PM,,,,,,,,,,fabric-docs,,,,0,,,,,,,,,"With the recent updates, #fabric-maintainers RC channel become read only to non maintainers. Reporting bugs in contributing.rst has to change.

[http://hyperledger-fabric.readthedocs.io/en/latest/CONTRIBUTING.html#reporting-bugs. |http://hyperledger-fabric.readthedocs.io/en/latest/CONTRIBUTING.html#reporting-bugs]

Please read the below content from the above reference link.

 
{code:java}
 If not, please bump the issue with a comment and request that it be reviewed. You can also post to the #fabric-maintainers channel in chat.{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01lpp:,,,,,,,,joe-alewine,rameshthoomu,,,,,,,,,master,,,true,"26/Oct/17 3:10 PM;joe-alewine;Has been merged.

 

https://gerrit.hyperledger.org/r/c/13163/",,,,,,,,,,,,,,,,,,,,,,,
fabric client: Channel.queryInfo() returns identical hash strings for current and previous blocks,FAB-6027,20601,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,denyeart,pfuntner,pfuntner,05/Sep/17 12:21 PM,01/Nov/17 2:44 PM,26/Apr/18 6:50 AM,01/Nov/17 2:44 PM,v1.0.1,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,"While trying to use the fabric-client 1.0.0-rc1 package with a Node.js app to get some information from a 1.0 blockchain network, I was using the {{Channel.queryInfo()}} API to get the height of the block and hashes of the current block and previous block, the hashes are identical. They should usually be different, shouldn't they?

 {code:java}
{
""height"": {
""low"": 12,
""high"": 0,
""unsigned"": true
},
""currentBlockHash"": {
""buffer"": {
""type"": ""Buffer"",
""data"": [ 8, 12, 18, 32, 218, 132, 75, 232, 0, 218, 95, 96, 28, 61, 133, 36, 146, 118, 89, 111, 68, 153, 67, 111, 130, 153, 7, 218, 34, 191, 84, 18, 101, 38, 178, 163, 26, 32, 92, 40, 64, 249, 117, 213, 168, 4, 82, 165, 81, 126, 219, 211, 115, 139, 15, 167, 128, 60, 76, 245, 78, 22, 167, 115, 73, 200, 58, 80, 230, 157 ]
},
""offset"": 4,
""markedOffset"": -1,
""limit"": 36,
""littleEndian"": true,
""noAssert"": false
},
""previousBlockHash"": {
""buffer"": {
""type"": ""Buffer"",
""data"": [ 8, 12, 18, 32, 218, 132, 75, 232, 0, 218, 95, 96, 28, 61, 133, 36, 146, 118, 89, 111, 68, 153, 67, 111, 130, 153, 7, 218, 34, 191, 84, 18, 101, 38, 178, 163, 26, 32, 92, 40, 64, 249, 117, 213, 168, 4, 82, 165, 81, 126, 219, 211, 115, 139, 15, 167, 128, 60, 76, 245, 78, 22, 167, 115, 73, 200, 58, 80, 230, 157 ]
},
""offset"": 38,
""markedOffset"": -1,
""limit"": 70,
""littleEndian"": true,
""noAssert"": false
}
}
{code}

I'm attaching:
* a JSON of the result from {{queryInfo()}} since Jira wasn't retaining the leading blanks
* {{package.json}} from {{fabric-client/}} after installing it on the Ubuntu machine where the Node.js application was run","My Node.js app is running on Ubuntu 16.04.2 LTS.

The Blockchain network I originally used was created through an IBM Blockchain service on Bluemix.

Later, I reproduced this issue with a local network running in Docker containers on my Ubuntu machine.",,,,,,,,,,,,,,,,,,,05/Sep/17 3:23 PM;pfuntner;blockinfo.js;https://jira.hyperledger.org/secure/attachment/12039/blockinfo.js,05/Sep/17 12:18 PM;pfuntner;package.json;https://jira.hyperledger.org/secure/attachment/12037/package.json,05/Sep/17 12:18 PM;pfuntner;queryInfo.json;https://jira.hyperledger.org/secure/attachment/12036/queryInfo.json,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01lo5:,,,,,,,,harrisob@us.ibm.com,jeffgarratt,pfuntner,,,,,,,,,,,,"05/Sep/17 3:24 PM;pfuntner;I did the following:
 * Set up a local network on my Ubuntu as per [Use Local Hyperledger Network|https://github.com/IBM-Blockchain/marbles/blob/v4.0/docs/use_local_hyperledger.md] of the Marbles demo chaincode
 * Tested the network with {{query.js}}
 * Used {{query.js}} as a basis for a new application [^blockinfo.js]
 * Ran {{blockinfo.js}} and observed this output:

{code:java}
Create a client and set the wallet location
Set wallet path, and associate user PeerAdmin with application
Check user is enrolled, and set a query URL in the network
Calling queryInfo()
blockchain info: {
 ""height"": {
 ""low"": 3,
 ""high"": 0,
 ""unsigned"": true
 },
 ""currentBlockHash"": {
 ""buffer"": {
 ""type"": ""Buffer"",
 ""data"": [ 8, 3, 18, 32, 142, 65, 206, 83, 210, 110, 120, 84, 145, 10, 67, 108, 26, 97, 168, 234, 207, 1, 209, 99, 197, 10, 157, 163, 138, 80, 166, 224, 142, 238, 51, 241, 26, 32, 80, 38, 156, 193, 20, 9, 87, 220, 118, 36, 0, 235, 171, 17, 189, 123, 106, 170, 67, 209, 57, 144, 67, 26, 227, 41, 254, 199, 165, 17, 144, 8 ]
 },
 ""offset"": 4,
 ""markedOffset"": -1,
 ""limit"": 36,
 ""littleEndian"": true,
 ""noAssert"": false
 },
 ""previousBlockHash"": {
 ""buffer"": {
 ""type"": ""Buffer"",
 ""data"": [ 8, 3, 18, 32, 142, 65, 206, 83, 210, 110, 120, 84, 145, 10, 67, 108, 26, 97, 168, 234, 207, 1, 209, 99, 197, 10, 157, 163, 138, 80, 166, 224, 142, 238, 51, 241, 26, 32, 80, 38, 156, 193, 20, 9, 87, 220, 118, 36, 0, 235, 171, 17, 189, 123, 106, 170, 67, 209, 57, 144, 67, 26, 227, 41, 254, 199, 165, 17, 144, 8 ]
 },
 ""offset"": 38,
 ""markedOffset"": -1,
 ""limit"": 70,
 ""littleEndian"": true,
 ""noAssert"": false
 }
}
{code}","06/Sep/17 10:08 PM;harrisob@us.ibm.com;In looking at the NodeSDK code, we do not manipulate the results of the query, results are returned as provided by the fabric peer. Therefore the duplicate results must be coming from the fabric peer side.",26/Oct/17 7:33 PM;jeffgarratt;[~harrisob@us.ibm.com] [~pfuntner] I have tested this on the latest master and cannot reproduce from the peer interface.  Can you reproduce this on the latest?,"27/Oct/17 12:46 PM;pfuntner;I don't know how to set up a blockchain with the latest code.  I tried going through the same steps I laid out earlier but I got the same results.

I am leaving IBM today and the email I registered with this Jira server will soon stop working.  Jira doesn't seem to give me a way to change it so I emailed the helpdesk for assistance.",01/Nov/17 2:44 PM;jeffgarratt;[~pfuntner]... I have verified correctness on latest master.. Will go ahead close.  Please reopen if you find it still an issue with latest code.,,,,,,,,,,,,,,,,,,,
Fix race condition in eventhub,FAB-6013,20579,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,biljana.lukovic,biljana.lukovic,01/Sep/17 5:35 PM,18/Sep/17 1:44 AM,26/Apr/18 6:50 AM,18/Sep/17 1:44 AM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"Issue was identified while running unit test (TestDeadlock (20 threads & 100 events per thread))

EventHub Concurrency test

WARNING: DATA RACE
03:48:09 Read at 0x00c4201d6fd4 by goroutine 18:
03:48:09 github.com/hyperledger/fabric-sdk-go/pkg/fabric-client/events.TestDeadlock()

I",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01lj9:,,,,,,,,biljana.lukovic,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Documentation typos - Reconfiguring with configtxlator section content,FAB-6010,20574,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,luomin,pvrbharg,pvrbharg,01/Sep/17 1:37 PM,03/Oct/17 9:01 AM,26/Apr/18 6:50 AM,02/Oct/17 12:49 PM,v1.0.2,,,,,,v1.0.3,v1.1,,fabric-docs,,,,0,Documentation,,,,,,,,"Please note - this is one JIRA issue to track few documentation inaccuracies. Thanks.

 

https://github.com/hyperledger/fabric/tree/master/examples/configtxupdate

 

script fabric/example/configtxupdate/bootstrap_batchsize/script.sh        <--    We have this in more than one place in the Git URL that should have ""examples"" instead in the path


fabric/example/configtxupdate/reconfigure_batchsize/                    <--    We have this path on the file system as ""reconfig_batchsize"" and needs fixing",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01li5:,,,,,,,,pvrbharg,,,,,,,,,,release-1.0,master,,true,,,,,,,,,,,,,,,,,,,,,,,,
Syntax Error in end_to_end_test.go,FAB-6008,20572,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,chaibaoyang,akarshagrawal792,akarshagrawal792,01/Sep/17 12:01 PM,07/Dec/17 9:38 AM,26/Apr/18 6:50 AM,07/Dec/17 9:38 AM,,,,,,,,,,fabric-sdk-go,,,,1,,,,,,,,,"The file test/integration/end_to_end_test.go contains the following errors and the corrections have been provided below.

Line 21: Missing an '&' for the BaseSetupImpl. This gives error of: ""undefined: BaseSetupImpl"", when we run the command: ""go test end_to_end_test.go base_test_setup.go""

Line 49: Extra '&' for the 'testSetup' variable. It gives an error of: ""cannot use &testSetup (type **BaseSetupImpl) as type *BaseSetupImpl in argument to moveFunds"", when we run the command: ""go test end_to_end_test.go base_test_setup.go""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01lhp:,,,,,,,,akarshagrawal792,gamer1181,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
'Leaderless Partitions found' while setting up ZK-Kafka and Orderers in different machines,FAB-6002,20564,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,htyagi90,htyagi90,31/Aug/17 3:16 PM,11/Dec/17 7:41 PM,26/Apr/18 6:50 AM,01/Sep/17 8:00 PM,,,,,,,,,,,,,,0,consensus,docker-swarm-mode,,,,,,,"Trying to setup a distributed ordering service using zk-kafka cluster. Following is the setup :
 1. 3 zookeeper, 3 kafka docker containers on first server. 
 2. 3 orderers , 1 Organisation with 3 peers on second server.

Using docker swarm to create an overlay network between the two machines. Following is a snippet of the docker-compose for the respective services:

zookeeper_i:
{code:java}
// zookeeper0:
    container_name: zookeeper0
    image: hyperledger/fabric-zookeeper:x86_64-1.0.0
    environment:
        - ZOO_MY_ID=1
        - ZOO_SERVERS=server.1=zookeeper0:2888:3888 server.2=zookeeper1:2888:3888 server.3=zookeeper2:2888:3888
    ports:
      - 2181
      - 2888
      - 3888

    networks:
      - b2b-net
      - b2b-bridge
{code}
kafka_i:

 
{code:java}
// # three Kafka Nodes 
  kafka0:
    image: hyperledger/fabric-kafka:x86_64-1.0.0
    container_name: kafka0
    environment:
      - KAFKA_LOG_RETENTION_MS=-1
      - KAFKA_MESSAGE_MAX_BYTES=103809024
      - KAFKA_REPLICA_FETCH_MAX_BYTES=103809024
      - KAFKA_BROKER_ID=0
      - KAFKA_ZOOKEEPER_CONNECT=zookeeper0:2181,zookeeper1:2181,zookeeper2:2181
      - KAFKA_UNCLEAN_LEADER_ELECTION_ENABLE=false
      - KAFKA_DEFAULT_REPLICATION_FACTOR=3
      - KAFKA_MIN_INSYNC_REPLICAS=2
      - KAFKA_ADVERTISED_HOST_NAME=9.167.110.93
      - KAFKA_ADVERTISED_PORT=32797
    ports:
      - 32797:9092
    depends_on:
      - zookeeper0
      - zookeeper1
      - zookeeper2
    links:
      - zookeeper0:zookeeper0
      - zookeeper1:zookeeper1
      - zookeeper2:zookeeper2
    networks:
      - b2b-net
      - b2b-bridge
{code}
KAFKA_ADVERTISED_HOST_NAME is the public IP of the machine hosting the kafka and zookeeper containers.

 

orderer_i :
{code:java}
// orderer0.example.com:
    container_name: orderer0.example.com
    image: hyperledger/fabric-orderer:x86_64-1.0.0
    environment:
      - ORDERER_GENERAL_LOGLEVEL=debug
      - ORDERER_GENERAL_LISTENADDRESS=0.0.0.0
      - ORDERER_GENERAL_GENESISMETHOD=file
      - ORDERER_GENERAL_GENESISFILE=/etc/hyperledger/configtx/genesis.block
      - ORDERER_GENERAL_LOCALMSPID=OrdererMSP
      - ORDERER_GENERAL_LOCALMSPDIR=/etc/hyperledger/msp/orderer0/msp
      - ORDERER_KAFKA_RETRY_SHORTTOTAL=30s
      - ORDERER_KAFKA_RETRY_LONGINTERVAL=10s
      - ORDERER_KAFKA_RETRY_LONGTOTAL=100s
      - ORDERER_KAFKA_VERBOSE=true
      - ORDERER_KAFKA_BROKERS=[9.167.110.93:32797,9.167.110.93:32800,9.167.110.93:32798]
{code}
The kafka brokers are in `IP:Port` notation, where IP is the public IP of the machine hosting the zookeeper-kafka containers, and the port is the forwarded port.

Following is a snippet of configtx.yaml under the OrdererDefaults section.
{code:java}
// Kafka:
        # Brokers: A list of Kafka brokers to which the orderer connects
        # NOTE: Use IP:port notation
        Brokers:
            - 9.167.110.93:32797
            - 9.167.110.93:32800
            - 9.167.110.93:32798
{code}
On inspecting the genesis block, and it corresponds to the above kafka broker(s) details.

Started the zoo-kafka containers first and then the orderers. But keep getting a SERVICE_UNAVAILABLE error on peer channel create.
 !Screen Shot 2017-08-31 at 11.01.21 AM.png|width=596,height=198!

On checking orderer logs, I see that there is a persistent message of ""found some partitions to be leaderless"". This shows up after the producer is setup successfully and the co-op CONNECT message is sent. Snippet of the orderer log is as follows:
{code:java}
// 2017-08-31 15:02:03.145 UTC [orderer/kafka] try -> DEBU 594 [channel: testchainid] Attempting to post the CONNECT message...
[sarama] 2017/08/31 15:02:03.146023 client.go:599: client/metadata fetching metadata for [testchainid] from broker 9.167.110.93:32800
[sarama] 2017/08/31 15:02:03.292812 client.go:610: client/metadata found some partitions to be leaderless
[sarama] 2017/08/31 15:02:03.292835 client.go:590: client/metadata retrying after 250ms... (3 attempts remaining)
[sarama] 2017/08/31 15:02:03.542941 client.go:599: client/metadata fetching metadata for [testchainid] from broker 9.167.110.93:32800
[sarama] 2017/08/31 15:02:03.689610 client.go:610: client/metadata found some partitions to be leaderless
[sarama] 2017/08/31 15:02:03.689628 client.go:590: client/metadata retrying after 250ms... (2 attempts remaining)
[sarama] 2017/08/31 15:02:03.939719 client.go:599: client/metadata fetching metadata for [testchainid] from broker 9.167.110.93:32800
[sarama] 2017/08/31 15:02:04.086501 client.go:610: client/metadata found some partitions to be leaderless
[sarama] 2017/08/31 15:02:04.086518 client.go:590: client/metadata retrying after 250ms... (1 attempts remaining)
[sarama] 2017/08/31 15:02:04.336627 client.go:599: client/metadata fetching metadata for [testchainid] from broker 9.167.110.93:32800
[sarama] 2017/08/31 15:02:04.484268 client.go:610: client/metadata found some partitions to be leaderless
2017-08-31 15:02:04.484 UTC [orderer/kafka] startThread -> CRIT 595 [channel: testchainid] Cannot post CONNECT message = kafka server: In the middle of a leadership election, there is currently no leader for this partition and hence it is unavailable for writes.
panic: [channel: testchainid] Cannot post CONNECT message = kafka server: In the middle of a leadership election, there is currently no leader for this partition and hence it is unavailable for writes.

goroutine 9 [running]:
panic(0xb31bc0, 0xc420944e30)
    /opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panicf(0xc42019ff20, 0xc700bc, 0x2e, 0xc420948d20, 0x2, 0x2)
    /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:194 +0x127
github.com/hyperledger/fabric/orderer/kafka.startThread(0xc4208786c0)
    /opt/gopath/src/github.com/hyperledger/fabric/orderer/kafka/chain.go:159 +0xe57
created by github.com/hyperledger/fabric/orderer/kafka.(*chainImpl).Start
    /opt/gopath/src/github.com/hyperledger/fabric/orderer/kafka/chain.go:94 +0x3f
{code}
Kafka container logs show that zookeeper-kafka connection is setup correctly.

Kafka leaders should be elected automatically.","* Docker swarm
 * Orderer containers host  : RHEL 7.3
 * Zk-Kafka containers host : Ubuntu 16.04",,,,,,,,,,,,,,,,,,,31/Aug/17 3:01 PM;htyagi90;Screen Shot 2017-08-31 at 11.01.21 AM.png;https://jira.hyperledger.org/secure/attachment/12007/Screen+Shot+2017-08-31+at+11.01.21+AM.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9,,,,,,,,htyagi90,,,,,,,,,,,,,,"01/Sep/17 8:00 PM;htyagi90;got it working. the catch was removing the `kafka_advertised_host_name` and `kafka_advertised_port` from the kafka docker-compose settings and add port forwarding from the docker host to the kafka containers.

```port:
          xxxx:9092
```

 ",,,,,,,,,,,,,,,,,,,,,,,
Fully secure TLS connection not demonstrated in balance-transfer example in fabric-samples,FAB-5980,20536,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,skarim,vdods,vdods,31/Aug/17 12:57 AM,07/Mar/18 7:46 PM,26/Apr/18 6:50 AM,,v1.0.5,v1.1,,,,,v1.2,,,fabric-samples,,,,0,,,,,,,,,"In the balance-transfer example, the TLS connection to the CA from the client does not perform certificate validation.

In typescript/artifacts/network-config.yaml, the verify option in 'httpOptions' is set to false:

{code:none}
certificateAuthorities:
  ca-org1:
    url: https://localhost:7054
    # the properties specified under this object are passed to the 'http' client verbatim when
    # making the request to the Fabric-CA server
    httpOptions:
      verify: false
    tlsCACerts:
      path: artifacts/channel/crypto-config/peerOrganizations/org1.example.com/ca/ca.org1.example.com-cert.pe
{code}

This will not verify that the TLS server's cert is signed by a trusted CA (ostensibly those specified by trustedRoots). More documentation on the feature and a working demonstration is necessary.

As it stands, while TLS encryption is enabled, it is susceptible to man-in-the-middle attacks, and therefore is a security vulnerability.  Showing, via examples and documentation, correct and secure operation of Fabric is necessary for users to make robust applications, and that's why this is filed as a bug.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01la5:,,,,,,,,denyeart,mastersingh24,skarim,vdods,,,,,,,,,,,"31/Aug/17 1:01 AM;vdods;Here's a useful link:

[https://stackoverflow.com/questions/31861109/tls-what-exactly-does-rejectunauthorized-mean-for-me]

 ","09/Dec/17 1:15 PM;mastersingh24;[~vdods] - The tricky part here is that the CAs, peers and orderer are all running in Docker containers and the balance transfer app is running locally on the host. The common names set in the TLS server certs for all of these containers match the container_ids set via docker-compose.yaml. But the host machine will not be able to resolve these DNS names and therefore the app uses ""localhost"" as the address for all of the containers (ports are exposed on the host in docker-compose.yaml). But then the issue is that the CN in the certificate will not match the hostname(s) the client / app uses to communicate with the container(s) and the connection will fail.

The sample uses the *ssl-target-name-override* property for the gRPC settings ( [https://github.com/hyperledger/fabric-samples/blob/release/balance-transfer/app/helper.js#L65] ) to overcome this for communicating with the peer / orderer nodes. For the the connection to the CA, as you noted the sample used rejectUnauthorized. We can emulate the behavior of the gRPC connections by using the *checkServerIdentity(servername, cert)* option instead.

Of course the other option would be to add *localhost* to the *SANs* defined in the certificates we generate as well",10/Dec/17 6:54 AM;vdods;That issue is dealt with easily by running the balance transfer app also in a docker container.,14/Feb/18 4:57 PM;denyeart;[~aambati] Can you take a look and provide an opinion?,"21/Feb/18 2:42 PM;mastersingh24;I'd suggest that when we generate the crypto artifacts we specify ""localhost"" as one of the SANs.  There is an option to do this when running cryptogen","07/Mar/18 7:40 PM;skarim;I am trying to add ""localhost"" as one of the SANs for the CA certificates but cryptogen does not seem to be picking it up. 

In my cryptogen.yaml file I have a section like:

{code:none}
  - Name: Org2
    Domain: org2.example.com
    CA:
       Hostname: ca # implicitly ca.org1.example.com
       SANS:
        - ""localhost""

    Template:
      Count: 2
      SANS:
        - ""localhost""
    Users:
      Count: 1
{code}

But when I look at the ca certificate that is generated, it does not contain SANs. [~mastersingh24] [~adc]
",,,,,,,,,,,,,,,,,,
behave test fmwk fails to bring up a kafka network when all peers are org-leaders,FAB-5975,20530,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,latitiah,Nishi,Nishi,30/Aug/17 3:17 PM,30/Aug/17 3:19 PM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-quality,,,,0,,,,,,,,,"In the attached docker-compose set all peers with following attributes.

- CORE_PEER_GOSSIP_ORGLEADER=true
 - CORE_PEER_GOSSIP_USELEADERELECTION=false

 

When I run attached feature file - it fails to bring up a kafka network.

A solo network when all peers were leaders was run successfully.

 

fabric commit level *297d393b75868b11f75272d91ff5234b0fcfb4fa*

fabric-test commit level: *4bdb7ceb86bbd2953f212d13f4ae8491af32b8dd*",,,,,,,,,,,,,,,,,,,,30/Aug/17 3:19 PM;Nishi;101.feature;https://jira.hyperledger.org/secure/attachment/11994/101.feature,30/Aug/17 3:17 PM;Nishi;docker-compose-kafka.yml;https://jira.hyperledger.org/secure/attachment/11993/docker-compose-kafka.yml,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01l8t:,,,,,,,,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
unable to install go chaincode that uses C,FAB-5972,20527,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,ftgha,ftgha,30/Aug/17 2:08 PM,16/Sep/17 5:14 PM,26/Apr/18 6:50 AM,16/Sep/17 5:14 PM,v1.0.2,,,,,,v1.1,,,fabric-peer,,,,0,Golang,peer,,,,,,,"Hello, I'm trying to write chaincode that calls C code and am failing to get peers to install it. I'm using the chaincode-docker-devmode environment and after running

{code:none} peer chaincode install -p chaincodedev/chaincode/chaincode_example02 -n mycc -v 0
{code}

get the following error: 
{code:none} 
2017-08-30 13:56:48.844 UTC [golang-platform] getCodeFromFS -> DEBU 005 getCodeFromFS chaincodedev/chaincode/chaincode_example02
2017-08-30 13:56:49.061 UTC [golang-platform] func1 -> DEBU 006 Accepting import: C
2017-08-30 13:56:49.061 UTC [golang-platform] func1 -> DEBU 007 Discarding GOROOT package fmt
2017-08-30 13:56:49.061 UTC [golang-platform] func1 -> DEBU 008 Discarding provided package github.com/hyperledger/fabric/core/chaincode/shim
2017-08-30 13:56:49.061 UTC [golang-platform] func1 -> DEBU 009 Discarding provided package github.com/hyperledger/fabric/protos/peer
2017-08-30 13:56:49.062 UTC [golang-platform] func1 -> DEBU 00a Discarding GOROOT package strconv
Error: Error getting chaincode code chaincode: Error getting chaincode package bytes: Error obtaining dependencies for C: <go, [list -f {{ join .Deps ""\n""}} C]>: failed with error: ""exit status 1""
can't load package: package C: cannot find package ""C"" in any of:
        /opt/go/src/C (from $GOROOT)
        /opt/gopath/src/C (from $GOPATH)
{code} 
All I did was to include this small snippet of C in the chaincode_example02: 

{code:none}
/*
#include <stdio.h>

void foo() {
	printf(""Hello, World!\n"");
}
*/
import ""C""
{code} ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01l85:,,,,,,,,ftgha,mastersingh24,muralisr,,,,,,,,master,,,true,07/Sep/17 7:46 PM;muralisr;[~ftgha] Did you try vendoring to get over this problem ?,"07/Sep/17 8:00 PM;ftgha;""C"" is a pseudo package. I'm almost certain that it cannot be vendored, but please correct me if I am wrong.
My intuition would be that it can be skipped safely if peers come with a full go installation but I don't know enough about the internals of fabric.",16/Sep/17 12:02 PM;mastersingh24;https://gerrit.hyperledger.org/r/13545,16/Sep/17 12:22 PM;muralisr;[~ftgha] you are right (wish I can take back the thoughtless comment :-) )... (thanks [~mastersingh24] ),,,,,,,,,,,,,,,,,,,,
chaincode unit test fails due to missing TLS Certificate,FAB-5965,20520,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,Senthil1,Senthil1,30/Aug/17 4:11 AM,25/Oct/17 6:04 PM,26/Apr/18 6:50 AM,25/Oct/17 6:01 PM,,,,,,,,,,fabric-endorser,,,,0,chaincode,,,,,,,,"Due to -FAB-5406-] Mutual TLS in chaincode service-P3, exectransaction_test.go fails with the following errors.

`2017-08-30 09:24:33.085 IST [accessControl] authenticate -> WARN 019 TLS is active but chaincode tmap:0 didn't send certificate` 
 launchAndWaitForRegister failed Timeout expired while starting chaincode tmap:0(networkid:dev,peerid:jdoe,tx:75c6ffaf-2d81-4fbb-9a52-e3e27d473f26)
 Error initializing chaincode tmap(Error deploying chaincode(2): Timeout expired while starting chaincode tmap:0(networkid:dev,peerid:jdoe,tx:75c6ffaf-2d81-4fbb-9a52-e3e27d473f26))

To reproduce above errors, enable TestQueries() unit test in exectransaction_test.go by commenting out testForSkip(t) ([https://github.com/hyperledger/fabric/blob/master/core/chaincode/exectransaction_test.go#L1075|https://github.com/hyperledger/fabric/blob/master/core/chaincode/exectransaction_test.go#L1075)])

After commenting out error in access.go ([https://github.com/hyperledger/fabric/blob/master/core/chaincode/accesscontrol/access.go#L104|https://github.com/hyperledger/fabric/blob/master/core/chaincode/accesscontrol/access.go#L104),] ), unit-test ran successfully. 

Looks like exectransaction_test.go needs to be changed but not sure what the changes should be. We need TestQueries() for end to end testing which cannot be done by chaincode_support_test.go. ",,,,,,,,,,,,,,,,,FAB-6761,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01l6l:,,,,,,,,denyeart,muralisr,Senthil1,yacovm,,,,,,,,,,,30/Aug/17 4:12 AM;Senthil1;[~denyeart],"30/Aug/17 7:51 AM;yacovm;Yes, I added TLS mutual authentication for chaincode shim, but I don't see how it follows from here that I should be assigned to this JIRA item that re-introduces a test that has been disabled for ages?
Also - why is this a HIGH priority bug? It doesn't affect production. ",30/Aug/17 12:13 PM;Senthil1;exectransaction_test.go was disabled as it was taking significant time. We have been using this unit test internally to perform e2e test of Chaincode APIs. It was working fine till FAB-5406 got merged. ,"30/Aug/17 1:40 PM;yacovm;{quote}We have been using this unit test internally to perform e2e test of Chaincode APIs.{quote}

Who is we? I have no knowledge of this test being used anywhere.","30/Aug/17 1:52 PM;Senthil1;'We' refers to ledger team. We run this test manually by explicitly enabling TestQueries() in exectransaction_test.go and run the test from fabric/core/chaincode using `$ go test -ldflags ""-X github.com/hyperledger/fabric/common/metadata.Version=1.1.0-snapshot-238e155 -X github.com/hyperledger/fabric/common/metadata.BaseVersion=0.3.2 -X github.com/hyperledger/fabric/common/metadata.BaseDockerLabel=org.hyperledger.fabric -X github.com/hyperledger/fabric/common/metadata.DockerNamespace=hyperledger -X github.com/hyperledger/fabric/common/metadata.BaseDockerNamespace=hyperledger"" -run Queries`

`make test-cmd` provides the above go test flags. CI does not run any unit test in exectransaction_test.go.

Anyway, we are enabling TestQueries() in CI mainly to avoid future problems. [https://gerrit.hyperledger.org/r/#/c/12257/] fails because of missing TLS certificate. Temporarily, I can fix this error by setting tls to false in initPeer() as it will not affect query API testing. ",07/Sep/17 5:37 PM;muralisr;Need to investigate what needs to be done to disable TLS for this UT that is needed for Side DB.,"07/Sep/17 5:37 PM;denyeart;exectransation is re-enabled in: [https://gerrit.hyperledger.org/r/#/c/12257/18/core/chaincode/exectransaction_test.go] , but with viper.Set(""peer.tls.enabled"", false).

This work item will make exectransation work with TLS.",25/Oct/17 4:00 PM;muralisr;[~denyeart] exectransaction_test.go was retired so was not kept up-to-date with other changes such as TLS. Is the work around to disable TLS you mention sufficient to close this bug ?,"25/Oct/17 4:26 PM;denyeart;[~muralisr] exectransaction_test.go was brought out of retirement to help test queries.  As far as I am concerned, it is serving our purpose without TLS enabled.  If there is TLS coverage elsewhere, then I agree you can close this one.","25/Oct/17 4:58 PM;muralisr;[~denyeart] There is some ... in particular that touch various aspects of TLS support in the chaincode
https://gerrit.hyperledger.org/r/#/c/13451/
https://gerrit.hyperledger.org/r/#/c/11913/

While there's nothing that actually tests peer-CC TLS communication, vote we open a separate JIRA to implement that on the new chaincode test framework (given exectransaction_test.go was retired) and close this JIRA ?","25/Oct/17 5:40 PM;denyeart;[~muralisr] Agreed - go ahead and close this defect and open a new feature/task for peer-CC TLS communication test on the new chaincode test framework.  (I'd do it, but I'm sure you'll word it better than me!)","25/Oct/17 5:52 PM;denyeart;[~muralisr] Yacov mentioned that TLS is tested during e2e CI already, so probably ok not to have a separate unit test.",25/Oct/17 6:01 PM;muralisr;[~denyeart] Absolutely.  created/linked https://jira.hyperledger.org/browse/FAB-6761. I made it an improvement and not a bug as there were already tests... but if I can see it as a bug too. Feel free to change it bug if that's a better characterization.,"25/Oct/17 6:04 PM;muralisr;[~denyeart] Our comments crossed... as I opneed it as an improvement, perhaps let it be there. It will be a good one for someone to pick and contribute (and I can help).",,,,,,,,,,
Composer Playground - Could not Issue New ID,FAB-5957,20495,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,Venkatr,Venkatr,29/Aug/17 10:42 AM,02/Oct/17 11:43 AM,26/Apr/18 6:50 AM,02/Oct/17 11:43 AM,,,,,,,WON'T FIX,,,,,,,0,,,,,,,,,"'Issue New ID' link pops up a windows with IDName and Participant fields. When filled up and choose to 'Create New', there is no response. No error message either.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01l1x:,,,,,,,,kchristidis,Venkatr,,,,,,,,,,,,,"02/Oct/17 11:42 AM;kchristidis;Hi Ven, please use [https://github.com/hyperledger/composer/issues] to report this.",,,,,,,,,,,,,,,,,,,,,,,
Fix check_license script error on empty check file list,FAB-5948,20476,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,troyronda,troyronda,troyronda,29/Aug/17 1:11 AM,29/Aug/17 3:37 AM,26/Apr/18 6:50 AM,29/Aug/17 3:37 AM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"On linux systems, you get the following error when the check list is empty:

grep: .: Is a directory",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ky5:,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Fix compatibility information in README.md,FAB-5947,20475,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aleksandar.likic,aleksandar.likic,aleksandar.likic,28/Aug/17 9:55 PM,29/Aug/17 5:37 PM,26/Apr/18 6:50 AM,29/Aug/17 5:37 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01kxx:,,,,,,,,aleksandar.likic,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
default CSCC.GetConfigBlock should be a channel specific resource,FAB-5945,20473,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,muralisr,muralisr,28/Aug/17 8:02 PM,08/Sep/17 4:23 PM,26/Apr/18 6:50 AM,29/Aug/17 6:41 PM,,,,,,,,,,fabric-endorser,,,,0,,,,,,,,,CSCC.GetConfigBlock is listed as a peer wide resource. It should be channel specific.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01kxh:,,,,,,,,muralisr,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Transaction Simulator getting used even after calling done,FAB-5939,20465,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,muralisr,manish-sethi,manish-sethi,28/Aug/17 3:01 PM,01/Feb/18 1:43 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-endorser,,,,0,,,,,,,,,"In V1.0 code, peer panics if a transaction simulator instance is accessed after calling `Done()` on the instance - See FAB-5830.

As a fix for FAB-5830, the above mentioned panic has been replaced by an error - (https://gerrit.hyperledger.org/r/#/c/12851/)

This JIRA item exists so that the actual cause can be fixed in the chaincode framework - i.e., the chaincode framework should not use the simulator after calling `Done` function on this.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01kvp:,,,,,,,,manish-sethi,muralisr,yacovm,,,,,,,,,,,,"01/Feb/18 12:25 PM;yacovm;[~muralisr] I think this should be tabled to be solved in v1.2 after your FSM refactoring, no?",01/Feb/18 1:43 PM;muralisr;[~yacovm] Agreed. This belongs to the cleanup.,,,,,,,,,,,,,,,,,,,,,,
Bad default mod_policy for policy /Channel/Consortiums/Admins,FAB-5937,20463,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,28/Aug/17 2:51 PM,03/Sep/17 1:53 PM,26/Apr/18 6:50 AM,31/Aug/17 7:16 AM,v1.0.0,v1.0.1,,,,,v1.0.2,v1.1,,fabric-tools,,,,0,configtxgen,,,,,,,,"The {{mod_policy}} for {{/Channel/Consortiums/Admins}} currently defaults to itself, {{Admins}}, but this should really be the orderer admins policy.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01kv9:,,,,,,,,jyellick,,,,,,,,,,release-1.0,master,,true,"28/Aug/17 2:56 PM;jyellick;Fix for v1.1 https://gerrit.hyperledger.org/r/#/c/12855/
Fix for v1.0.2 https://gerrit.hyperledger.org/r/#/c/12857/",,,,,,,,,,,,,,,,,,,,,,,
make unit-tests fails TestSRVServerInit on vagrant,FAB-5935,20461,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lehors,lehors,lehors,28/Aug/17 1:27 PM,14/Sep/17 9:38 PM,26/Apr/18 6:50 AM,14/Sep/17 9:38 PM,v1.0.1,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"Similar to FAB-5427, TestSRVServerInit relies on being able to change a file access mode. Unfortunately on vagrant this doesn't work because, at least on Windows, all files on shared volumes appear with a 777 mode which cannot be changed.

This makes the test fail.

A simple fix is to use a directory on a local volume so that its access control can effectively be changed as desired.
{code:java}
$ go test -v -run TestSRVServerInit
=== RUN TestSRVServerInit
2017/08/28 13:04:32 [DEBUG] CA Home Directory: /opt/gopath/src/github.com/hyperledger/fabric-ca/lib/rootDir
...
--- FAIL: TestSRVServerInit (0.33s)
server_test.go:111: Current dir: .
server_test.go:112: Current curd: /opt/gopath/src/github.com/hyperledger/fabric-ca/testdata/ServerInitStat216613874
server_test.go:119: Server.Init error: <nil>
server_test.go:121: Server init should have failed (permission error)
FAIL
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01kut:,,,,,,,,lehors,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Store peer StateInfo,FAB-5934,20457,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,gennadyl,gennadyl,gennadyl,28/Aug/17 12:07 PM,31/Aug/17 8:46 AM,26/Apr/18 6:50 AM,31/Aug/17 8:46 AM,,,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,,"While storing peer StateInfo in channel, is stored in message store and in case of successful parsing, stored in special filed for quick access. The idea is to move storage to message store after parsing. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i01ktx:,,,,,,,,gennadyl,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Hyperledger tests fail after build,FAB-5933,20456,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,hl-admin,mudlee,mudlee,28/Aug/17 11:39 AM,05/Nov/17 11:26 AM,26/Apr/18 6:50 AM,05/Nov/17 11:26 AM,,,,,,,Unverifiable,,,fabric-build,,,,0,,,,,,,,,"I followed the doc how to build my own binaries, despite everything went fine when I ran make dist-clean all, however some of the tests failed. See the atteched logs.",CentOS 7,,,,,,,,,,,,,,,,,,,28/Aug/17 11:39 AM;mudlee;log.rtf;https://jira.hyperledger.org/secure/attachment/11959/log.rtf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:zi,,,,,,,,mastersingh24,mudlee,,,,,,,,,,,,,"04/Sep/17 11:43 AM;mastersingh24;This is hard to reproduce.  Unfortunately, some of the tests will randomly timeout.
Looks like you were just running *make unit-tests* ?  Did you try multiple times and fail each time?",05/Nov/17 11:26 AM;mastersingh24;No response in over 60 days so I'm going to close this.  [~mudlee]  - hopefully you've been refreshing your close and things are working.,,,,,,,,,,,,,,,,,,,,,,
Chaincode invoke across channels to same chaincode fails,FAB-5921,20421,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,jeffgarratt,jeffgarratt,25/Aug/17 7:15 PM,09/Nov/17 10:25 PM,26/Apr/18 6:50 AM,09/Nov/17 10:25 PM,,,,,,,,,,fabric-endorser,,,,0,chaincode,,,,,,,,It appears there is an issue invoking the same chaincode across channels wrt to context management.  [~muralisr] has tentatively confirmed and will be assigned.  This was identified during safe asset transfer development.,,,,,,,,,,,,FAB-5999,,,,,FAB-6889,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01kr1:,,,,,,,,denyeart,jeffgarratt,mastersingh24,muralisr,,,,,,,master,,,true,"28/Aug/17 3:53 PM;muralisr;This is an issue with the narrow case of a chaincode calling the SAME chaincode on another channel. Currently the code prevents loops in chaincode invocation by tracking transaction IDs in use. It does not disambiguate the case of the same chaincode being called on another channel (which is not really a ""loop"").

Two ways to handle this
# add channel id to txid tracker to disambiguate - this is a clean solution but would need all chaincode platforms to pass back channelID on GET,PUT,... requests to the peer. This will break compatibility with 1.0 chaincode deployments as they will not be passing back channel ID. 
# create a new transaction (txid+channel) to associate with the called chaincode (same chaincode on another channel). This is not a bad solution especially since the cross channel chaincode call is read-only. This will not break compatibility. The only negative is that if the chaincode calls GetTxID it will see ""channel+txid"".  But as this a read only call that does not affect state, this may be ok.

This is a bug and not really a feature we could introduce via compatibility work. So if we are doing (1) we better do so immediately. 

[~binhn] [~mastersingh24] [~jeffgarratt]","29/Aug/17 3:40 PM;jeffgarratt;Spoke with [~muralisr], asked that we try with the chaincode on channel 2 having a different name.  Gonna give that a go.",07/Sep/17 7:41 PM;muralisr;option 1 would cause compatibility issues with deployed chaincode images...linking to JIRA-5999,"26/Oct/17 5:38 PM;muralisr;[~jimthematrix@gmail.com]  [~sanchezl]  [~denyeart] [~mastersingh24]  fixing this properly per option 1 would need change to proto.ChaincodeMessage to have a channel field. On the plus side we can now have a GetChannelID query on the chaincode. On the minus side we would have to change java and node chaincode shims. My recommendation would be to bite the bullet and change now (I have the code ready for GO side and can coordinate to work on node and java chaincodes as well). 

These changes won't affect SDKs or CLI.",26/Oct/17 7:13 PM;mastersingh24;[~muralisr]  it seems that adding the channel field is the right call.  Should not be too hard to modify the NodeJS and Java shims for this.,"26/Oct/17 7:21 PM;denyeart;There is already no compatibility between 1.1 peer and 1.0 chaincode image (due to TLS and private data collections that were added to proto).  Chaincode image will have to be removed and rebuilt upon peer upgrade to 1.1.  So I don't think we need to be concerned about yet another compatibility break, and I therefore agree with Gari that we can go ahead and add the channel field.",,,,,,,,,,,,,,,,,,
Fix build status on CI ,FAB-5918,20415,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,biljana.lukovic,biljana.lukovic,biljana.lukovic,25/Aug/17 1:48 PM,25/Aug/17 3:57 PM,26/Apr/18 6:50 AM,25/Aug/17 3:36 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,Currently build reports 'SUCCESS' even when test case fails.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01kp9:,,,,,,,,biljana.lukovic,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
common/tools/cryptogen has some spelling error,FAB-5916,20410,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,TopJohn,TopJohn,TopJohn,25/Aug/17 5:36 AM,17/Oct/17 10:08 PM,26/Apr/18 6:50 AM,17/Oct/17 10:08 PM,,,,,,,,,,fabric-crypto,,,,0,common-components,,,,,,,,common/tools/cryptogen has some spelling error,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01kot:,,,,,,,,TopJohn,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Some error log in chaincode handler is not formatted properly,FAB-5914,20407,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,shimos,shimos,shimos,24/Aug/17 11:33 PM,30/Sep/17 6:24 PM,26/Apr/18 6:50 AM,30/Sep/17 6:24 PM,v1.0.0,v1.0.1,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,"Some error messages in the chaincode handler are not formatted correctly.
For example, a CouchDB query in the transaction which has been timed out produced error log like:

{noformat}
2017-08-24 22:36:48.521 UTC [chaincode] afterQueryStateClose -> DEBU 5805f Received QUERY_STATE_CLOSE, invoking query state close from ledger
2017-08-24 22:36:48.521 UTC [chaincode] afterQueryStateClose -> DEBU 58060 Exiting QUERY_STATE_CLOSE
2017-08-24 22:36:48.521 UTC [chaincode] filterError -> DEBU 58061 Ignoring NoTransitionError: no transition
2017-08-24 22:36:48.521 UTC [chaincode] 2 -> ERRO 58062 [[fe8f960c ERROR]]Failed to get transaction context. Sending %!s(MISSING)
2017-08-24 22:36:48.521 UTC [chaincode] 1 -> DEBU 58063 [fe8f960c]handleQueryStateClose serial send ERROR
{noformat}

""%!s(MISSING)"" definitely comes from wrong formatting in golang.
",fabric commit 22f39c7899da3c9974b37df4956f909fb44032e1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ko5:,,,,,,,,shimos,,,,,,,,,,master,,,true,24/Aug/17 11:49 PM;shimos;CR: https://gerrit.hyperledger.org/r/12769,,,,,,,,,,,,,,,,,,,,,,,
chaincode tests are failing,FAB-5912,20393,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,muralisr,muralisr,24/Aug/17 6:42 PM,17/Oct/17 8:44 PM,26/Apr/18 6:50 AM,17/Oct/17 8:44 PM,,,,,,,,,,fabric-endorser,,,,0,,,,,,,,,Merge of https://gerrit.hyperledger.org/r/#/c/12515  crossed another previous merge (not the fault of either but purely due to 12515 being on hold for a while) which required chaincode framework's authenticator to be initialized.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01kl9:,,,,,,,,denyeart,muralisr,,,,,,,,,master,,,true,17/Oct/17 8:43 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/12763/,,,,,,,,,,,,,,,,,,,,,,,
"Modify logrus vendoring to use lowercase ""sirupsen""",FAB-5910,20390,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jmcnevin,jmcnevin,24/Aug/17 2:53 PM,20/Sep/17 6:31 PM,26/Apr/18 6:50 AM,20/Sep/17 6:31 PM,v1.0.1,,,,,,,,,fabric-peer,fabric-sdk-go,,,0,,,,,,,,,"At some point in the past, the logrus repo owner changed the account name to lowercase, and this has caused some issues with go dependency tools on case-insensitive filesystems (like MacOS).

See:
 * [https://github.com/sirupsen/logrus/issues/570]
 * [https://github.com/golang/dep/issues/806]",,,,,,,,,,,,,,,,,FAB-4893,FAB-6184,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:rhwgr6o,,,,,,,,jmcnevin,muralisr,troyronda,,,,,,,,,,,,"24/Aug/17 11:39 PM;troyronda;The CS that includes support for dep addresses the sirupsen issue (at least when you use dep to populate vendor):

[https://gerrit.hyperledger.org/r/#/c/12725/]

(not yet merged, but please provide feedback).

Note: sirupsen/logrus is a dependency of docker/moby which is a dependency of fabric (so becomes a transitive dependency of the SDK). docker/moby fixes the import case sensitivity in their latest code...",25/Aug/17 4:13 PM;troyronda;The Go Dep CS has been merged.,07/Sep/17 7:21 PM;muralisr;[~jmcnevin] [~troyronda] are we saying we need fabric to change the Sirupsen vendor package ? ,"08/Sep/17 2:11 PM;troyronda;[~muralisr] The GoPkg.toml in the Go SDK is currently overriding fabric dependencies to achieve a build that only has the lowercase sirupsen vendoring.

[https://github.com/hyperledger/fabric-sdk-go/blob/master/Gopkg.toml]

Go dep tool: [https://github.com/golang/dep]

We are also hoping to remove the vendor folder from the SDK's version control soon. The make populate target can recreate it using dep (and that generated vendor folder has the lowercase sirupsen). [https://github.com/hyperledger/fabric-sdk-go/blob/master/Makefile]

It would be nice if Fabric, itself, also included GoPkg.* at some point.","08/Sep/17 8:27 PM;troyronda;update: the vendor folder has now been removed from git.

make populate generates the vendor folder with the updated sirupsen pkg.",20/Sep/17 6:31 PM;troyronda;The downstream dependency that used the mismatched Sirupsen has been removed (FAB-6184). The Go SDK could directly import the lowercase sirupsen in the future.,,,,,,,,,,,,,,,,,,
"byfn.sh error. ""ERRO 003 Could not find configtx.yaml. Please make sure that FABRIC_CFG_PATH is set to a path which contains configtx.yaml Failed to generate orderer genesis block...""",FAB-5901,20378,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,hazim-j,hazim-j,24/Aug/17 5:52 AM,14/Feb/18 2:54 PM,26/Apr/18 6:50 AM,14/Feb/18 2:54 PM,v1.0.0,,,,,,v1.1,,,fabric-tools,,,,0,,,,,,,,,"Trying to follow the ""Building your first network"" tutorial and ran into this issue when executing '

byfn.sh -m generate' command.

 
{code:java}
$ sh byfn.sh -m generate

Generating certs and genesis block for with channel 'mychannel' and CLI timeout of '10000'
Continue (y/n)? y
proceeding ...
/cygdrive/c/Users/user/Desktop/fabric-samples/bin/cryptogen

##########################################################
##### Generate certificates using cryptogen tool #########
##########################################################
org1.example.com
org2.example.com

sed: -e expression #1, char 85: unterminated `s' command
sed: -e expression #1, char 85: unterminated `s' command
/cygdrive/c/Users/user/Desktop/fabric-samples/bin/configtxgen
##########################################################
######### Generating Orderer Genesis block ##############
##########################################################
2017-08-24 15:40:41.268 AEST [common/configtx/tool] main -> INFO 001 Loading configuration
2017-08-24 15:40:41.268 AEST [common/configtx/tool/localconfig] Load -> CRIT 002 Error reading configuration: Unsupported Config Type """"
2017-08-24 15:40:41.269 AEST [common/configtx/tool] func1 -> ERRO 003 Could not find configtx.yaml. Please make sure that FABRIC_CFG_PATH is set to a path which contains configtx.yaml
Failed to generate orderer genesis block...{code}","Running on windows 10 64bit,

Docker version 17.06.1-ce, build 874a737,

docker-compose version 1.14.0, build c7bdf9e3,

go version go1.8.3 windows/amd64,

curl 7.55.1 (x86_64-pc-win32)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01kh1:,,,,,,,,gregnotso,hazim-j,kchristidis,mastersingh24,sdcho,,,,,,master,,,true,"28/Aug/17 12:28 AM;mastersingh24;[~hazim-j] 
Can you try 
*./byfn.sh -m generate*
instead of 
*sh byfn.sh -m generate*?","04/Sep/17 12:28 PM;mastersingh24;[~hazim-j] Not sure if you are still having issues.  You might want to try the following:

1) Use Git Bash (I think you are using Cygwin?)
2) Pull down the latest version of fabric-samples and also install the [latest binaries|http://hyperledger-fabric.readthedocs.io/en/latest/samples.html#download-platform-specific-binaries]

We'll leave this open for a couple of days, but after that we'll close this as using the prereqs with the latest samples and binaries works fine on Windows 10","08/Sep/17 6:34 AM;sdcho;I also have the exactly the same issue.

I was using bash from PowerShell.

I am using the latest binaries.",08/Sep/17 2:37 PM;sdcho;The problem resolved by running the script under bash provided by git.,"16/Sep/17 12:41 PM;sdcho;By running the *byfn.sh*, all the required environment variables such as FABRIC_CFG_PATH is set within the script.

What was preventing the proper running of the script seems like due to different version of sed.

By using git bash instead of cygwin bash did not have any issues.

The difference there is the version of sed.

sed versions:

git sed: 5.4.2

cygwin sed: 4.4",10/Dec/17 6:08 PM;gregnotso;this seems unresolved for 3 months now and still shows up in the latest release or 1.0.5,"14/Feb/18 4:42 AM;kchristidis;I know what's wrong here. Will push a fix tomorrow.

The prompt for this was the message posted to the mailing list yesterday: https://lists.hyperledger.org/pipermail/hyperledger-fabric/2018-February/002821.html",14/Feb/18 5:48 AM;kchristidis;https://gerrit.hyperledger.org/r/c/17901/,,,,,,,,,,,,,,,,
unable to use signed install package ,FAB-5899,20376,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,muralisr,muralisr,24/Aug/17 3:26 AM,11/Jan/18 10:53 AM,26/Apr/18 6:50 AM,31/Aug/17 7:22 AM,v1.0.0,v1.0.1,,,,,v1.0.2,v1.1,,fabric-endorser,,,,0,,,,,,,,,"From description of the problem in Rocket Chat
{code:java}
Then i go to cli and try to create package:
`peer chaincode package -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v 2.0 -s -S -i ""AND('Org1MSP.admin')"" ccpack.out`
it creates ccpack.out, then 
`peer chaincode install ccpack.out`
return
`Error: Error endorsing chaincode: rpc error: code = Unknown desc = proto: bad wiretype for field peer.ChaincodeSpec.Type: got wiretype 2, want 0`
{code}

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01kgl:,,,,,,,,cotofei,muralisr,,,,,,,,,release-1.0,master,,true,"24/Aug/17 6:24 AM;cotofei;[~muralisr]

Thank you very much!",,,,,,,,,,,,,,,,,,,,,,,
Document security implications of the default chaincode endorsement policy,FAB-5896,20370,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,23/Aug/17 7:50 PM,07/Sep/17 2:20 PM,26/Apr/18 6:50 AM,07/Sep/17 2:20 PM,,,,,,,v1.1,,,fabric-sdk-node,,,,0,,,,,,,,,"basically the default endorsement policy allows an application to complete bypass the proposal endorsement phase and manually construct an arbitrary read-write set, sign it with its own key and send it to the orderer directly. should make it more explicit that this is not recommended for production.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01kfh:,,,,,,,,,,,,,,,,,,release-1.0,master,,true,07/Sep/17 2:20 PM;jimthematrix;https://gerrit.hyperledger.org/r/#/c/12719/,,,,,,,,,,,,,,,,,,,,,,,
Need to enhance peer logging for policy evaluation failed,FAB-5895,20369,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,jkirke,jkirke,23/Aug/17 5:55 PM,01/Feb/18 10:26 PM,26/Apr/18 6:50 AM,01/Feb/18 10:26 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"Need to enhance peer logging for policy evaluation failed. Executed on Fabric 1.0.1

Steps:
Create channel with org01 and org02
Join each org to channel
Add 2 peers per org
Attempt to join channel with org03 (fails appropriately)
Edit channel and add org03
Join org03 to channel
Add 2 peers for org03
Install cc on all 6 peers
Instantiate on org01 peer
Query on all 6 peers
Invoke on all 6 peers
Query on all 6 peers
Attempt to join channel with org04 (fails appropriately)
Edit channel and add org04
Join org04 to channel
Add 2 peers for org04
Install cc on all org04 peers
Query on all 8 peers
Invoke on all 8 peers (fails on org04 peers)

In peers logs I can see:
failed, err Failed to authenticate policy
�[31m2017-08-22 15:22:39.049 UTC [txvalidator] Validate -> ERRO 0b1�[0m VSCCValidateTx for transaction txId = 4894d1a43cc538f47cfa9e6aac4c541e0ee8262a141a345bbe518d9c69c04782 returned error VSCC error: policy evaluation failed, err Failed to authenticate policy
�[33m2017-08-22 15:22:39.049 UTC [statevalidator] ValidateAndPrepareBatch -> WARN 0b2�[0m Block [20] Transaction index [0] marked as invalid by committer. Reason code [10]
2017-08-22 15:22:39.052 UTC [kvledger] Commit -> INFO 0b3�[0m Channel [lateadd]: Created block [20] with 1 transaction(s)
2017-08-22 15:22:39.052 UTC [eventhub_producer] SendProducerBlockEvent -> INFO 0b4�[0m Channel [lateadd]: Sending event for block number [20]",,,,,,,,,,,,,,,,,,,,23/Aug/17 5:56 PM;jkirke;1d9e710fcbc7443fa7fc2a3d1b9b2938_Logs.zip;https://jira.hyperledger.org/secure/attachment/11926/1d9e710fcbc7443fa7fc2a3d1b9b2938_Logs.zip,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01kf9:,,,,,,,,jeffgarratt,jkirke,muralisr,wlahti,,,,,,,master,,,true,23/Aug/17 5:56 PM;jkirke;Added logs for all components.,07/Sep/17 7:17 PM;muralisr;[~wlahti] part of the serviceability work...assigning to you.,13/Sep/17 4:32 PM;wlahti;[~jkirke] Can you provide more details of the information you'd like to see logged? Just the reason the policy evaluation failed? The name of the policy?,14/Sep/17 10:17 PM;jkirke;In this instance the failure is that an org added late cannot execute in the channel and the logging fails to give specifics about the nature of the failure. As a user I would like additional information on the nature of the failure and the policy name so that it can be modified in needed.,26/Oct/17 7:28 PM;jeffgarratt;[~wlahti] any updates on this one?,06/Nov/17 3:11 PM;wlahti;I'll start looking into this again today and hopefully have a fix within a day or two.,"16/Nov/17 7:01 PM;wlahti;Looking deeper into the policy code, I think some useful logging is already available in the v1.1 code but it's at the debug level. See common/policies/policy.go, particularly the Evaluate function starting at line 184, in this CR: [https://github.com/hyperledger/fabric/commit/e503a08d79219735d84a9c57f1b3276dd084675f]

[~jkirke]-, if you are able to, can you try setting CORE_LOGGING_POLICIES=debug in a v1.1 environment and recreate the scenario?- I'll try recreating this myself and post the logging messages here. I think it will provide most if not all of what you're looking for. If so, the solution is likely to wrap the error message with the information from line 192 to ensure the information is more readily available in the logs in the event of a failure. 

 ",16/Nov/17 9:44 PM;wlahti;Successfully recreated this scenario. The logs from the policies modules are too noisy to really be useful for this situation. I'll try to determine the best way to provide relevant information to allow an end user to take the necessary action in the event of a policy authentication failure. ,"30/Jan/18 9:26 PM;wlahti;No longer able to reproduce this in master. Previously, I took the e2e_cli network with two orgs, added a third org to the channel, and hit the same policy error when invoking. Now, the invoke goes through successfully, making me think there may have been a bug somewhere else in the policy logic leading to this situation. 

I'll see if there are any similar situations I can come up with that or at least try to add in helpful information to the reported error message. ","01/Feb/18 8:01 PM;wlahti;On closer look, I actually can reproduce the issue. 

I plan to update the log messages from
{code:java}
2018-01-31 03:10:56.323 UTC [committer/txvalidator] VSCCValidateTxForCC -> ERRO b67 VSCC check failed for transaction txid=54fbbb08124f6d0bbeb1c4e451e6db3442d046691fdeff7922fce06ef66f641b, error VSCC error: policy evaluation failed, err Failed to authenticate policy
.
.
.
2018-01-31 03:10:56.323 UTC [committer/txvalidator] validateTx -> ERRO b6b VSCCValidateTx for transaction txId = 54fbbb08124f6d0bbeb1c4e451e6db3442d046691fdeff7922fce06ef66f641b returned error VSCC error: policy evaluation failed, err Failed to authenticate policy{code}
to
{code:java}
2018-01-31 05:06:44.360 UTC [committer/txvalidator] validateTx -> ERRO 92c VSCCValidateTx for transaction txId = 8e845b946bf120b12ed09a0cdddaf78d6d263cd4d4de1e7a4d8038f9d67733a4 returned error: VSCC error: endorsement policy failure, err: signature set did not satisfy policy{code}
which makes it clear that it was the endorsement policy that failed and the reason why it failed (""signature set did not satisfy policy"" instead of the vague ""Failed to authenticate policy"").",01/Feb/18 9:30 PM;wlahti;https://gerrit.hyperledger.org/r/c/17451/,,,,,,,,,,,,,
invokes fail on org added after chaincode is instantiated,FAB-5893,20367,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,jkirke,jkirke,23/Aug/17 5:43 PM,19/Feb/18 8:58 PM,26/Apr/18 6:50 AM,19/Feb/18 8:58 PM,,,,,,,v1.1,,,fabric-docs,,,,0,,,,,,,,,"Invokes fail on org added after chaincode is instantiated. Executed on Fabric 1.0.1

Steps:
Create channel with org01 and org02
Join each org to channel
Add 2 peers per org
Attempt to join channel with org03 (fails appropriately)
Edit channel and add org03
Join org03 to channel
Add 2 peers for org03
Install cc on all 6 peers
Instantiate on org01 peer
Query on all 6 peers
Invoke on all 6 peers
Query on all 6 peers
Attempt to join channel with org04 (fails appropriately)
Edit channel and add org04
Join org04 to channel
Add 2 peers for org04
Install cc on all org04 peers
Query on all 8 peers
Invoke on all 8 peers (fails on org04 peers)

SDK output:

root@JasonHSBN1:/home/ibmadmin/quality/v1.0_sdk_tests# node app.js invoke -c lateadd -i lateadd -v 1 -m 1 -o b -p fabric-peer-org4-28780c info: Clearing Cached Key Value Stores TAP version 13 # ***** invoke transaction to move money ***** # getMember, name: admin, client.getUserContext(admin, true) ok 1 Successfully enrolled user 'admin' ok 2 Successfully enrolled org: PeerOrg4 info: [invoke-chaincode]: create new peer grpcs://tor-zbc06c.3.secure.blockchain.ibm.com:28780 info: [invoke-chaincode]: create new eventhub grpcs://tor-zbc06c.3.secure.blockchain.ibm.com:22572 info: [EventHub.js]: _connect - options \{} info: [invoke-chaincode]: setConfigSetting(""E2E_TX_ID"") = 4894d1a43cc538f47cfa9e6aac4c541e0ee8262a141a345bbe518d9c69c04782 # Sending transaction ""4894d1a43cc538f47cfa9e6aac4c541e0ee8262a141a345bbe518d9c69c04782"" # ***************************************************************************** # stop and start the peer event hub ---- N O W ----- you have 0 millis # ***************************************************************************** ok 3 transaction proposal has response status of good ok 4 transaction proposal signature and endorser are valid ok 5 compareProposalResponseResults execution did not throw an error ok 6 All proposals have a matching read/writes sets ok 7 Successfully sent Proposal and received ProposalResponse: Status - 200, message - ""OK"", metadata - """", endorsement signature: 0D ""▒▒r)d )?�""o8'��;f����� V˚��k7k����\{��T��&���P y��� not ok 8 The balance transfer transaction was invalid, code = ENDORSEMENT_POLICY_FAILURE --- operator: fail at: EventHub._processTxOnEvents (/home/ibmadmin/quality/v1.0_sdk_tests/node_modules/fabric-client/lib/EventHub.js:775:5) stack: |- Error: The balance transfer transaction was invalid, code = ENDORSEMENT_POLICY_FAILURE at Test.assert [as _assert] (/home/ibmadmin/quality/v1.0_sdk_tests/node_modules/tape/lib/test.js:212:54) at Test.bound [as _assert] (/home/ibmadmin/quality/v1.0_sdk_tests/node_modules/tape/lib/test.js:64:32) at Test.fail (/home/ibmadmin/quality/v1.0_sdk_tests/node_modules/tape/lib/test.js:277:10) at Test.bound [as fail] (/home/ibmadmin/quality/v1.0_sdk_tests/node_modules/tape/lib/test.js:64:32) at /home/ibmadmin/quality/v1.0_sdk_tests/tests.js:976:39 at EventHub._processTxOnEvents (/home/ibmadmin/quality/v1.0_sdk_tests/node_modules/fabric-client/lib/EventHub.js:775:5) at ClientDuplexStream. (/home/ibmadmin/quality/v1.0_sdk_tests/node_modules/fabric-client/lib/EventHub.js:310:10) at emitOne (events.js:96:13) at ClientDuplexStream.emit (events.js:188:7) at readableAddChunk (_stream_readable.js:176:18) ... not ok 9 Failed to send transaction and get notifications within the timeout period. --- operator: fail at: process._tickCallback (internal/process/next_tick.js:109:7) stack: |- Error: Failed to send transaction and get notifications within the timeout period. at Test.assert [as _assert] (/home/ibmadmin/quality/v1.0_sdk_tests/node_modules/tape/lib/test.js:212:54) at Test.bound [as _assert] (/home/ibmadmin/quality/v1.0_sdk_tests/node_modules/tape/lib/test.js:64:32) at Test.fail (/home/ibmadmin/quality/v1.0_sdk_tests/node_modules/tape/lib/test.js:277:10) at Test.bound [as fail] (/home/ibmadmin/quality/v1.0_sdk_tests/node_modules/tape/lib/test.js:64:32) at /home/ibmadmin/quality/v1.0_sdk_tests/tests.js:1003:27 at process._tickCallback (internal/process/next_tick.js:109:7) ... not ok 10 Error: Failed to send transaction and get notifications within the timeout period. at /home/ibmadmin/quality/v1.0_sdk_tests/tests.js:1004:31 at process._tickCallback (internal/process/next_tick.js:109:7) --- operator: fail at: process._tickCallback (internal/process/next_tick.js:109:7) stack: |- Error: Error: Failed to send transaction and get notifications within the timeout period. at /home/ibmadmin/quality/v1.0_sdk_tests/tests.js:1004:31 at process._tickCallback (internal/process/next_tick.js:109:7) at Test.assert [as _assert] (/home/ibmadmin/quality/v1.0_sdk_tests/node_modules/tape/lib/test.js:212:54) at Test.bound [as _assert] (/home/ibmadmin/quality/v1.0_sdk_tests/node_modules/tape/lib/test.js:64:32) at Test.fail (/home/ibmadmin/quality/v1.0_sdk_tests/node_modules/tape/lib/test.js:277:10) at Test.bound [as fail] (/home/ibmadmin/quality/v1.0_sdk_tests/node_modules/tape/lib/test.js:64:32) at /home/ibmadmin/quality/v1.0_sdk_tests/tests.js:1032:15 at process._tickCallback (internal/process/next_tick.js:109:7) ... info: [invoke-chaincode]: Disconnecting the event hub not ok 11 Error: Error: Failed to send transaction and get notifications within the timeout period. at /home/ibmadmin/quality/v1.0_sdk_tests/tests.js:1004:31 at process._tickCallback (internal/process/next_tick.js:109:7) --- operator: error expected: |- undefined actual: |- [Error: Error: Failed to send transaction and get notifications within the timeout period. at /home/ibmadmin/quality/v1.0_sdk_tests/tests.js:1004:31 at process._tickCallback (internal/process/next_tick.js:109:7)] at: Test.onetime (/home/ibmadmin/quality/v1.0_sdk_tests/node_modules/onetime/index.js:22:12) stack: |- Error: Error: Failed to send transaction and get notifications within the timeout period. at /home/ibmadmin/quality/v1.0_sdk_tests/tests.js:1004:31 at process._tickCallback (internal/process/next_tick.js:109:7) at /home/ibmadmin/quality/v1.0_sdk_tests/tests.js:1033:19 at process._tickCallback (internal/process/next_tick.js:109:7) ... 1..11 # tests 11 # pass 7 # fail 4",,,,,,,,,,,,,,,,,FAB-8053,,,23/Aug/17 5:45 PM;jkirke;1d9e710fcbc7443fa7fc2a3d1b9b2938_Logs.zip;https://jira.hyperledger.org/secure/attachment/11925/1d9e710fcbc7443fa7fc2a3d1b9b2938_Logs.zip,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ket:,,,,,,,,angelo.decaro,denyeart,jkirke,muralisr,,,,,,,master,,,true,"23/Aug/17 5:44 PM;jkirke;n peers logs I can see:
failed, err Failed to authenticate policy
�[31m2017-08-22 15:22:39.049 UTC [txvalidator] Validate -> ERRO 0b1�[0m VSCCValidateTx for transaction txId = 4894d1a43cc538f47cfa9e6aac4c541e0ee8262a141a345bbe518d9c69c04782 returned error VSCC error: policy evaluation failed, err Failed to authenticate policy
�[33m2017-08-22 15:22:39.049 UTC [statevalidator] ValidateAndPrepareBatch -> WARN 0b2�[0m Block [20] Transaction index [0] marked as invalid by committer. Reason code [10]
2017-08-22 15:22:39.052 UTC [kvledger] Commit -> INFO 0b3�[0m Channel [lateadd]: Created block [20] with 1 transaction(s)
2017-08-22 15:22:39.052 UTC [eventhub_producer] SendProducerBlockEvent -> INFO 0b4�[0m Channel [lateadd]: Sending event for block number [20]",23/Aug/17 5:47 PM;jkirke;I have attached the logs. In them the errors can be seen. I found that I could fix the problem by executing an update chaincode so towards the end of the logs the failure to invoke no longer occurs.,"28/Jan/18 12:48 PM;muralisr;[~jkirke] as its been a while, thought I'll check if this is still an issue.","29/Jan/18 4:23 PM;jkirke;Still happens with level 1.0.5 of fabric. 
1. Create channel with org01
2. Add peers, install CC, instantiate CC, execute invokes

3. Create org02 

4. Add org02 to channel

5. Add org02 peer, install CC, execute a query on org02 peer to start CC (works)

6. Attempt to execute invoke on org02 peer



[33m2018-01-29 16:12:38.120 UTC [vscc] Invoke -> WARN b5cc[0m Endorsement policy failure for transaction txid=94a9bb418baad2a0670cad428fb956fea8b1025bdcb9908f95ffc303b09c9e75, err: Failed to authenticate policy [31m2018-01-29 16:12:38.120 UTC [txvalidator] VSCCValidateTxForCC -> ERRO b5cd[0m VSCC check failed for transaction txid=94a9bb418baad2a0670cad428fb956fea8b1025bdcb9908f95ffc303b09c9e75, error VSCC error: policy evaluation failed, err Failed to authenticate policy [31m2018-01-29 16:12:38.120 UTC [txvalidator] Validate -> ERRO b5ce[0m VSCCValidateTx for transaction txId = 94a9bb418baad2a0670cad428fb956fea8b1025bdcb9908f95ffc303b09c9e75 returned error VSCC error: policy evaluation failed, err Failed to authenticate policy [33m2018-01-29 16:12:38.120 UTC [statevalidator] ValidateAndPrepareBatch -> WARN b5cf[0m Block [23235] Transaction index [0] marked as invalid by committer. Reason code [10] 2018-01-29 16:12:38.125 UTC [kvledger] Commit -> INFO b5d0[0m Channel [throughui01]: Created block [23235] with 1 transaction(s) 2018-01-29 16:12:38.129 UTC [eventhub_producer] SendProducerBlockEvent -> INFO b5d1[0m Channel [throughui01]: Sending event for block number [23235]","30/Jan/18 12:26 AM;muralisr;[~jkirke] Currently we do not support endorsement policies of the form ""ANY admin of the channel"". It has to be specified in terms of MSPs. If you don't specifically set the endorsement policy at the time of instantiate, it'll compute a default endorsement policy with any member of the MSPs in the channel {color:#d04437}*at the time of instantiation*.{color} 

Only way to have some flexibility is to create a forward thinking endorsement policy using Org2MSP even before adding it to the channel, which will work albeit ugly as heck.

 CORE_PEER_ADDRESS=192.168.1.81:7051 peer chaincode instantiate -n mycc -v 0 -c '\{""Args"":[""init"",""a"",""100"",""b"",""200""]}' -C myc -o orderer.example.com:7050 -P ""OR('Org1MSP.admin', {color:#d04437}*'Org2MSP.admin'*{color})"".

Bottom line, this is working as designed but a feature request for a *{color:#d04437}""*.admin""{color}* type of policy many not be a bad idea.",30/Jan/18 12:46 AM;jkirke;[~muralisr] The endorsement policy is updated when the second org is added but it is not working correctly. The channel is being updated. I can further see this by updating the chaincode to a new version which corrects the problem and allows both organizations to execute invokes on the channel. Reach out to me [jkirke@us.ibm.com|mailto:jkirke@us.ibm.com] if you would like to discuss.,"30/Jan/18 12:57 AM;muralisr;[~jkirke] How do you mean ""_The endorsement policy is updated when the second org is added"" ..._ your instructions above do not indicate endorsement policy update after the new Org is added. 

Pinged you on RC for offline discussion.","30/Jan/18 8:37 PM;muralisr;[~jkirke] per offline discussion, I think we are on the same page - this is working as designed but needs doc and possibly new feature request.

If not in the docs already, suggest we doc this ...

{code:java}
Endorsement policy is specified at the time of chaincode instantiation. It is used at commit time to validate transactions signed by the endorsing peer against the endorsement policy.

A new Organization added to the channel after the instantiation maybe able to query a chaincode successfully but not commit a transaction per endorsement policy specified at chaincode instantiation time.
{code}

[~denyeart] [~ales] [~angelo.decaro] [~elli-androulaki] We may want to consider some feature request to allow a more flexible endorsement policy
* endorsement policies with wild cards (e.g., ""*.admin"")
* allow updaing endorsement policy for an instantiated CC



","31/Jan/18 10:30 PM;denyeart;I agree [~muralisr] .  Let's use this JIRA to clarify the documentation.

And we will write up a new JIRA feature for dynamic endorsement policies (multiple options to consider), and then link this JIRA and the new JIRA item.","02/Feb/18 8:55 AM;angelo.decaro;As a general line of thoughts, I think, we should first understand which problem we want to try to solve and see if there are already solutions available in the literature. For instance, Corda has an interesting setting that we might want to replicate.","04/Feb/18 5:22 PM;muralisr;created FAB-8053 to continue this discussion as a possible feature improvement.

 _see if there are already solutions available in the literature._

[~angelo.decaro] could you comment on the above (and anything else) in that JIRA pretty please ? ","14/Feb/18 5:43 PM;denyeart;[~muralisr] Can you proceed with the doc update for 1.1, now that the future feature has been created.",18/Feb/18 2:03 PM;muralisr;https://gerrit.hyperledger.org/r/#/c/18011/,,,,,,,,,,,
chaintool::package crash if imported package is missing,FAB-5852,20303,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,greg.haskins,greg.haskins,greg.haskins,20/Aug/17 3:12 AM,02/Oct/17 2:54 PM,26/Apr/18 6:50 AM,02/Oct/17 2:54 PM,,,,,,,,,,fabric-chaintool,,,,0,,,,,,,,,"Running ""chaintool package"" on a project with missing imports in the $GOPATH will result in a crash with a very cryptic stack trace.  Instead, we should inform the user what is actually wrong with their project. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01k25:,,,,,,,,greg.haskins,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
missing gossip logs for org leaders,FAB-5850,20301,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,scottz,scottz,19/Aug/17 3:39 PM,06/Sep/17 11:14 AM,26/Apr/18 6:50 AM,06/Sep/17 11:14 AM,v1.0.1,,,,,,,,,fabric-gossip,fabric-peer,,,0,,,,,,,,,"Operations personnel need to be able to see which peers are gossip org leaders, and which are not - and when the change occurs. This information will aid in debugging efforts, as well as network configuration/setup because they might wish to assign more powerful servers as their orgleaders. We noticed there is a gossip related log at debug level saying ""Become a leader"" when a peer wins election and becomes a leader. This should be printed at the default level (it seems the gossip default mode is WARNING level).

In addition,we noticed in code there is a log ""Stop being a leader"", but we never saw this log during our tests. This needs to be printed when an orgleader abdicates to another peer. And this log should be printed at the default (WARNING) level too.  _(8/28 edit: we did finally see this log, when using appropriate configuration settings. But it is still only a DEBUG log, and should be printed at WARNING level.)_ 

In summary: please print a gossip log at default (warning) level in peer whenever peer becomes a leader or whenever peer stops being a leader.The other similar logs may remain at debug level (such as whenever a peer merely checks to see if IsLeader"").

Printing these logs as requested will also facilitate automation testing.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01k1p:,,,,,,,,scottz,suryalnvs,yacovm,,,,,,,,master,,,true,"28/Aug/17 2:37 PM;yacovm;{quote}This should be printed at the default level (it seems the gossip default mode is WARNING level).{quote}

But this isn't a warning though. I don't agree with this statement that it should be printed in the default level. 
Do you want me to make it INFO?

{quote}Printing these logs as requested will also facilitate automation testing.{quote}
I don't see what's the issue with just grepping the lines from the log. If the log is in INFO then it shouldn't take more time 

{quote}In addition,we noticed in code there is a log ""Stop being a leader"", but we never saw this log during our tests. This needs to be printed when an orgleader abdicates to another peer. And this log should be printed at the default (WARNING) level too.{quote}
This isn't a warning though. I can make it info if you want. ","28/Aug/17 3:47 PM;scottz;We requested WARNING because I do not know if INFO will be sufficient in some environments where they run at the ERROR or WARNING level.

However, I agree it seems to fit better architecturally into INFO level, so I think we can be satisfied with INFO for occasional config and operational logs.",28/Aug/17 8:08 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/12871/,,,,,,,,,,,,,,,,,,,,,
Identity pull digests are logged in gibberish,FAB-5848,20299,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,19/Aug/17 11:33 AM,22/Aug/17 10:49 AM,26/Apr/18 6:50 AM,22/Aug/17 10:49 AM,v1.0.1,,,,,,v1.1,,,fabric-gossip,,,,0,,,,,,,,,"In gossip, when logs are in DEBUG level - the pull digest message is logged.
Identities are replicated via pull (as well) and the digest that is printed is printed in gibberish, since the digest is hash(identity bytes).

We can't make the computation of the digest be different since that would remove compatibility with v1.0.x, but we can at least make the digests of identities be printed not in gibberish.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01k19:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Trusted roots population should not assume separation between orderer orgs and application orgs,FAB-5845,20294,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,18/Aug/17 8:25 PM,06/Sep/17 7:43 PM,26/Apr/18 6:50 AM,19/Aug/17 9:12 PM,v1.0.1,,,,,,v1.0.2,v1.1,,fabric-peer,,,,0,,,,,,,,,"The code in *core/peer/peer.go* has the following logic:

{code}
				for _, root := range v.GetTLSRootCerts() {
					// check to see of this is an app org MSP
					if _, ok := appOrgMSPs[k]; ok {
						peerLogger.Debugf(""adding app root CAs for MSP [%s]"", k)
						appRootCAs = append(appRootCAs, root)
					} else {
						peerLogger.Debugf(""adding orderer root CAs for MSP [%s]"", k)
						ordererRootCAs = append(ordererRootCAs, root)
					}
				}
{code}

This assumes that the application orgs and the orderer orgs are separate, but a peer and an orderer may be in the same org and then this code might not (for example) populate the orderer TLS root CA certs. 

The implication, is that a peer might not be able to connect to an orderer.
I think this is the case with the [following |https://stackoverflow.com/questions/45736954/setting-up-tls-communication-between-orderers-and-peers]stackoverflow issue.

[~jyellick] [~mastersingh24]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01k05:,,,,,,,,jyellick,mastersingh24,scottz,yacovm,,,,,,,release-1.0,master,,true,18/Aug/17 8:39 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/12607/,"19/Aug/17 9:11 PM;mastersingh24;Yes - good find.  At the time the code was written, there was no way to actually get the ordererconfig from the cm","05/Sep/17 11:08 PM;scottz;There were no UT tests added with this fix. I am surprised this was merged into release v1.0.2 without any documented test coverage.

[~yacovm] - Could you describe for our customers the tests you performed after fixing this issue? (And, if there is any additional testing our team can do to ensure completeness of testing, let us know.)","06/Sep/17 8:37 AM;yacovm;This can be tested by co-locating the orderer and peer x509 material in the same organization and creating a single organization in the consortium and in the channel and then doing the standard flow (create channel, join peers, invoke, query, etc. etc.) while TLS is enabled.","06/Sep/17 8:39 AM;yacovm;If you want to test it - my recommendation is simply using cryptogen and having 2 CA trees (orderer org tree and peer org tree) in the same organization - this would allow the peers and the orderers identify each other under the same org although having different root CAs. 

(It worked when I tried...) ",06/Sep/17 7:43 PM;scottz;Excellent. Thanks!,,,,,,,,,,,,,,,,,,
CI Failure in Chaincode Tests,FAB-5844,20293,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,jyellick,jyellick,18/Aug/17 6:13 PM,07/Sep/17 7:15 PM,26/Apr/18 6:50 AM,07/Sep/17 7:15 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"From https://jenkins.hyperledger.org/job/fabric-verify-x86_64/15831/console

{noformat}
16:04:08 unit-tests_1  | 2017-08-18 16:04:06.716 UTC [shim] SetupChaincodeLogging -> INFO 04e Chaincode log level not provided; defaulting to: INFO
16:04:08 unit-tests_1  | 2017-08-18 16:04:06.716 UTC [shim] SetupChaincodeLogging -> INFO 04f Chaincode (build level: ) starting up ...
16:04:08 unit-tests_1  | 2017-08-18 16:04:06.716 UTC [shim] SetupChaincodeLogging -> WARN 050 Error: logger: invalid log level for shim log level: war
16:04:08 unit-tests_1  | 2017-08-18 16:04:06.716 UTC [shim] SetupChaincodeLogging -> INFO 051 Chaincode (build level: ) starting up ...
16:04:08 unit-tests_1  | 2017-08-18 16:04:06.716 UTC [shim] SetupChaincodeLogging -> WARN 052 Error: 'logger: invalid log level' for chaincode log level: deb; defaulting to INFO
16:04:08 unit-tests_1  | 2017-08-18 16:04:06.717 UTC [shim] SetupChaincodeLogging -> INFO 053 Chaincode log level not provided; defaulting to: INFO
16:04:08 unit-tests_1  | 2017-08-18 16:04:06.717 UTC [shim] SetupChaincodeLogging -> INFO 054 Chaincode log level not provided; defaulting to: INFO
16:04:08 unit-tests_1  | panic: send on closed channel
16:04:08 unit-tests_1  | 
16:04:08 unit-tests_1  | goroutine 41 [running]:
16:04:08 unit-tests_1  | panic(0x95c7e0, 0xc4202a5c50)
16:04:08 unit-tests_1  | 	/opt/go/src/runtime/panic.go:500 +0x1a1
16:04:08 unit-tests_1  | github.com/hyperledger/fabric/core/chaincode/shim.(*inProcStream).Send(0xc4202ac830, 0xc4201a11d0, 0xc420288b78, 0xc4201a1101)
16:04:08 unit-tests_1  | 	github.com/hyperledger/fabric/core/chaincode/shim/_test/_obj_test/inprocstream.go:20 +0x59
16:04:08 unit-tests_1  | github.com/hyperledger/fabric/core/chaincode/shim.(*Handler).serialSend(0xc420288b60, 0xc4201a11d0, 0x0, 0x0)
16:04:08 unit-tests_1  | 	github.com/hyperledger/fabric/core/chaincode/shim/_test/_obj_test/handler.go:61 +0x9d
16:04:08 unit-tests_1  | github.com/hyperledger/fabric/core/chaincode/shim.(*Handler).serialSendAsync.func1(0xc420288b60, 0xc4201a11d0, 0x0)
16:04:08 unit-tests_1  | 	github.com/hyperledger/fabric/core/chaincode/shim/_test/_obj_test/handler.go:75 +0x43
16:04:08 unit-tests_1  | created by github.com/hyperledger/fabric/core/chaincode/shim.(*Handler).serialSendAsync
16:04:08 unit-tests_1  | 	github.com/hyperledger/fabric/core/chaincode/shim/_test/_obj_test/handler.go:80 +0x5d
16:04:08 unit-tests_1  | FAIL	github.com/hyperledger/fabric/core/chaincode/shim	2.048s
16:04:08 unit-tests_1  | error: exit status 1
16:04:08 unit-tests_1  | panic: EOF
16:04:08 unit-tests_1  | 
16:04:08 unit-tests_1  | goroutine 1 [running]:
16:04:08 unit-tests_1  | panic(0x4daca0, 0xc42000a0f0)
16:04:08 unit-tests_1  | 	/opt/go/src/runtime/panic.go:500 +0x1a1
16:04:08 unit-tests_1  | main.main()
16:04:08 unit-tests_1  | 	/opt/gotools/obj/gopath/src/github.com/AlekSi/gocov-xml/gocov-xml.go:60 +0x15fd
16:04:10 unittest_unit-tests_1 exited with code 2
16:04:10 Stopping couchdb ... 
16:04:10 Stopping unittest_vp_1 ... 
16:04:10 
Stopping unittest_vp_1 ... done
{noformat}

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01jzx:,,,,,,,,jyellick,muralisr,,,,,,,,,master,,,true,18/Aug/17 6:15 PM;muralisr;this is related to https://jira.hyperledger.org/browse/FAB-1632. The fabric side of the send was fixed in [https://gerrit.hyperledger.org/r/#/c/12393/.] Need to fix the shim side.,07/Sep/17 7:15 PM;muralisr;fixed in https://gerrit.hyperledger.org/r/#/c/12603/,,,,,,,,,,,,,,,,,,,,,,
there's no way to detect the loss of the event RPC connection,FAB-5838,20285,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,divyank,smanolache,smanolache,18/Aug/17 3:11 PM,19/Mar/18 8:56 PM,26/Apr/18 6:50 AM,19/Mar/18 8:56 PM,,,,,,,,,,fabric-sdk-go,,,,1,,,,,,,,,"Hello,

I'm using the lastest code as of 2017-08-18. Git commit id: 110bf21bf3ab0a9a084f46d9698e1daeeda68a59

In the eventsClient.processEvents function:

When there's an error in the eventsClient.stream then adapter.Disconnected() is called. However eventHub.Disconnected() does not do much, it just logs the connection loss. eventHub.IsConnected() still returns true. Applications cannot find out that the connection was lost, so they will not reinitialize the connection by calling eventHub.Connect().

I propose to call a kind of eventHub.Disconnect() from Disconnected(). However Disconnect() cannot be used because it exits on the first error. We would need to execute all that Disconnect() does (UnregisterAsync() and Stop()) disregarding the errors. eventsClient.Stop() must be changed too. It should not return on the first error. In my opinion it should attempt both ec.stream.CloseSend() and ec.clientConn.Close(). Only then it should return one of the encountered errors.

 

Best regards,

Sorin",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:rhwgrs,,,,,,,,antitoine,smanolache,troyronda,,,,,,,,,,,,19/Mar/18 8:46 PM;troyronda;CC: [~bstasyszyn],19/Mar/18 8:55 PM;troyronda;Should be resolved in the latest SDK. FYI: the event mechanism has been rewritten. Please re-open if you continue to have issues.,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - update with latest protos,FAB-5837,20279,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,18/Aug/17 2:10 PM,02/Oct/17 5:26 PM,26/Apr/18 6:50 AM,02/Oct/17 5:26 PM,,,,,,,v1.1,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,Pull in and update code to latest fabric protos,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01jx9:,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,master,,,true,07/Sep/17 2:19 PM;jimthematrix;https://gerrit.hyperledger.org/r/#/c/12591/,,,,,,,,,,,,,,,,,,,,,,,
Fix broken orderer sample clients,FAB-5836,20276,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,18/Aug/17 1:06 PM,24/Aug/17 3:00 PM,26/Apr/18 6:50 AM,24/Aug/17 3:00 PM,,,,,,,v1.1,,,fabric-orderer,,,,0,,,,,,,,,"The sample clients for the orderer have fallen into a mild state of disrepair.

{{single_tx_client}} has not worked in a long time, and {{broadcast_msg}} has a bad sleep that crept in, and {{deliver_stdout}} does not support signing messages.

This bug is to fix these problems.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01jwl:,,,,,,,,jyellick,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"Ownership difference  makes chaincode instantiate failure due to ""chaincode fingerprint mismatch data mismatch""",FAB-5835,20265,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,barry_liang,barry_liang,18/Aug/17 4:07 AM,18/Feb/18 1:48 PM,26/Apr/18 6:50 AM,18/Feb/18 1:48 PM,v1.0.0,,,,,,v1.1,,,fabric-endorser,,,,0,install,,,,,,,,"In fabric 1.0.  Install chaincode by cli (fabric-tools),  peer will package the chaincode to codepackage ,  include the file name, path , mode, change time, owner(also id), ownergroup(aslo id) .   if we start two cli container in different VM  and mount the chaincode with different owner.  when we install the same chaincode , the two cli container will get different codePackage.   and peer will startup fail.  give error like this:

{color:#ff0000}Error executing chaincode: Could not get deployment transaction from LSCC for mycc:1.0 - Get ChaincodeDeploymentSpec for mycc/bancassurance from LSCC error: chaincode fingerprint mismatch data mismatch{color}

 

repeated step:

1,start a blockchain network with 2 peer (peer1  peer2). (i test in docker swarm , create service, i think docker compose will be the same)

2,start two cli container in different VM,  and mount chaincode to cli container.

(for example :--mount type=bind,source=/app/hyperledger/chaincodes/src/chaincode,destination=/opt/gopath/src/chaincode \)

make sure, in the two VM,  example chaincode is the same .  and   chaincode 's owner is different. (change by chown )

3. enter one cli container ,and createchannel ,and join 2 peers to the channel.

4,enter cli 1  ,and install the example chaincode to peer1.

5,enter cli 2, install the example chaincode to peer2

6, enter cli 1, init the chaincode in peer1.  it works ,  peer1 can start chaincode container ,and can invoke, query.

7, enter cli 2,  query the chaincode in peer2.  peer2 start chaincode container failed.  and give the error message:

Error executing chaincode: Could not get deployment transaction from LSCC for mycc:1.0 - Get ChaincodeDeploymentSpec for mycc/bancassurance from LSCC error: chaincode fingerprint mismatch data mismatch

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01jw5:,,,,,,,,baohua,barry_liang,denyeart,muralisr,,,,,,,,,,,"21/Aug/17 3:27 AM;baohua;Would be helpful to help attach the compose files needed.

Thanks!","07/Sep/17 7:14 PM;muralisr;[~barry_liang] there's a ""peer chaincode package"" command to precompute the chaincode package once which can later be used to install on all peers consistently using the ""peer chaincode install <package.file>"". Can you try that method and update please ?","11/Sep/17 4:02 AM;barry_liang;1,peer chaincode package -n mycc -v 1.0.0 -s package.file -p chaincode/go/chaincode_example02/

2, peer chaincode install package.file

 

get error :

Error: Error endorsing chaincode: rpc error: code = Unknown desc = proto: bad wiretype for field peer.ChaincodeSpec.Type: got wiretype 2, want 0",12/Sep/17 1:25 PM;muralisr;[~barry_liang] this is fixed in https://gerrit.hyperledger.org/r/#/c/12727/  and should be available in 1.0.2 (or latest).,"19/Sep/17 9:07 AM;barry_liang;[~muralisr] thanks for your  info，，   i sure  peer chaincode package will be ok in new version.

but if two orgs setup a blockchain network ,  maybe they want to install the chaincode from src(the go chaincode).

so  i think it will be better if solve the bug 

 ",19/Sep/17 11:50 AM;muralisr;[~barry_liang] agreed. Suggestion above was just a work around and this JIRA is in my queue.,28/Jan/18 12:52 AM;muralisr;[~barry_liang] this is likely fixed by FAB-7434 . Can you check please ?,"14/Feb/18 5:26 PM;denyeart;[~muralisr] Since 1.1 is closing down and we have not heard back from reporter, could you give it a try and confirm this is fixed now?","18/Feb/18 12:19 AM;muralisr;[~denyeart] [~barry_liang] this appears to be fixed in latest master.

Change e2e_cli/scripts/script.sh as follows

{code:java}
...

#list the sample to show owner/group
ls -ltr /opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02

## Install chaincode on Peer0/Org1 and Peer2/Org2
echo ""Installing chaincode on org1/peer0...""
installChaincode 0
echo ""Sleeping..change owner of the examples folder and contemts""
sleep 120
echo ""Awake...""

#list the sample to show new owner/group
ls -ltr /opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02

echo ""Install chaincode on org2/peer2...""
installChaincode 2

#Instantiate chaincode on Peer0/Org1
echo ""Instantiating chaincode on org1/peer0...""
instantiateChaincode 0
{code}

execute e2e_cli. When the script sleeps before installing the CC on second peer, login to CLI container and do

{code:java}
useradd someuser
groupadd somegroup
cd ..
chown -R someuser.somegroup examples/
 ls -ltr examples/chaincode/go/chaincode_example02
total 12
-rw-r--r-- 1 someuser somegroup 3165 Jan 28 00:31 chaincode_example02_test.go
-rw-r--r-- 1 someuser somegroup 5078 Jan 28 00:31 chaincode_example02.go
{code}

The script wakes up and runs to completion successfully.

The logs indicate user change on the chaincode before the new install
{code:java}
...
...
total 12
-rw-r--r-- 1 root root 3165 Jan 28 00:31 chaincode_example02_test.go
-rw-r--r-- 1 root root 5078 Jan 28 00:31 chaincode_example02.go
Installing chaincode on org1/peer0...
...
...
===================== Chaincode is installed on remote peer PEER0 =====================

Sleeping..change owner of the examples folder and contemts
Awake...
total 12
-rw-r--r-- 1 someuser somegroup 3165 Jan 28 00:31 chaincode_example02_test.go
-rw-r--r-- 1 someuser somegroup 5078 Jan 28 00:31 chaincode_example02.go
Install chaincode on org2/peer0...
...
...

{code}
",18/Feb/18 1:48 PM;denyeart;[~muralisr] Thank you for testing!  Marking Done.,,,,,,,,,,,,,,
Peer crashes on getState,FAB-5830,20259,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,manish-sethi,palani.kodeswaran,palani.kodeswaran,17/Aug/17 7:06 PM,09/Feb/18 1:55 PM,26/Apr/18 6:50 AM,18/Oct/17 1:22 PM,,,,,,,,,,fabric-ledger,,,,0,Ledger,,,,,,,,"We are running a four peer alpha2-network, and 2/4 of the peers crash with the following message on getState()




[36m2017-08-15 19:03:58.432 UTC [chaincode] func1 -> DEBU 124e[0m [e0e01909] getting state for chaincode wfmgr, key 11ffc294a8a744edad6c224061fa7dc0, channel beta
panic: This instance should not be used after calling Done()
 panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x30 pc=0x67f194]

goroutine 3373340 [running]:
panic(0xc73460, 0xc420016040)
 /opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/core/chaincode.(*Handler).handleGetState.func1.1(0xc4213d6ab0, 0xc421a6c1e0, 0xc422561e68)
 /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:621 +0x74
panic(0xc25580, 0xc422430980)
 /opt/go/src/runtime/panic.go:458 +0x243
github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr.(*queryHelper).checkDone(0xc420176500)
 /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/helper.go:119 +0x84
github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr.(*queryHelper).getState(0xc420176500, 0xc421cf2563, 0x5, 0xc4223a1c00, 0x20, 0xc4224308d0, 0xc422b99180, 0x4, 0x4, 0xc4224308d0)
 /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/helper.go:38 +0x2f
github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr.(*lockBasedTxSimulator).GetState(0xc42266b940, 0xc421cf2563, 0x5, 0xc4223a1c00, 0x20, 0x4, 0x2, 0x2, 0xc422b4e050, 0x0)
 /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/lockbased_tx_simulator.go:42 +0x5d
github.com/hyperledger/fabric/core/chaincode.(*Handler).handleGetState.func1(0xc4213d6ab0, 0xc421a6c1e0)
 /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:639 +0x502
created by github.com/hyperledger/fabric/core/chaincode.(*Handler).handleGetState
 /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:660 +0x49

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01jv1:,,,,,,,,alacambra-db,denyeart,manish-sethi,palani.kodeswaran,praveen.j,,,,,,master,,,true,24/Aug/17 1:53 PM;denyeart;[~manish-sethi] This bug was opened against alpha2.  Do you think this problem could occur in 1.0.0 code?,"24/Aug/17 3:04 PM;manish-sethi;Yes this could still happen in 1.0.0. I'll replace this panic by error.

In addition I'll open a separate JIRA for fixing the chaincode framework that causes this situation. However, chaincode framework fix will not be as critical.",25/Aug/17 5:22 PM;praveen.j;Thanks [~manish-sethi] for looking into this. Can you briefly explain why you think this is happening? Do you have an outlook for when it will be fixed?,"25/Aug/17 5:52 PM;manish-sethi;Hi [~praveen.j] - I'll submit a CR for this by Monday. In brief, this happens because of a race condition in the chaincode framework. If a call is made after the chaincode times out, it results into this error.","28/Aug/17 3:05 PM;manish-sethi;Submitted the CR (https://gerrit.hyperledger.org/r/#/c/12851/) for replacing this panic by an error return.

Also, opened an additional JIRA FAB-5939.",,,,,,,,,,,,,,,,,,,
RSCC should not use ledger hook for config updates,FAB-5824,20253,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,muralisr,muralisr,17/Aug/17 4:41 PM,24/Jan/18 5:07 PM,26/Apr/18 6:50 AM,24/Jan/18 5:07 PM,,,,,,,,,,fabric-endorser,,,,0,,,,,,,,,RSCC should use the existing ledger hook only for join time setup. It should ignore later updates.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01jtp:,,,,,,,,muralisr,,,,,,,,,,master,,,true,24/Jan/18 5:07 PM;muralisr;This was committed a while back. Closing.,,,,,,,,,,,,,,,,,,,,,,,
"Config.PeerConfig(org, name) of inexistent name does not return nil, error",FAB-5820,20240,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Baha-sk,smanolache,smanolache,17/Aug/17 8:00 AM,05/Dec/17 9:06 PM,26/Apr/18 6:50 AM,05/Dec/17 9:06 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"Hello,

apiconfig.Config.PeerConfig(org, name) of inexistent name returns an empty PeerConfig object and no error.

I think it should return nil and some error.

 

Best regards,

Sorin",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01jr1:,,,,,,,,Baha-sk,smanolache,,,,,,,,,,,,,"05/Dec/17 2:44 PM;Baha-sk;not sure what you mean by 'inexistent name return an empty PeerConfig object and no error'

 

but currently if the peer name is not found in the list of peers of the passed in org, you will get an error:

as per this line, an error is returned if the name is not found:

*return nil, errors.Errorf(""peer %s is not part of organization %s"", name, org)* in config.go


please elaborate/provide an example..","05/Dec/17 5:23 PM;smanolache;You are right about the current code and you may close the bug report.

The bug report was filed in August and regarded commit id 110bf21bf3ab0a9a084f46d9698e1daeeda68a59.","05/Dec/17 9:06 PM;Baha-sk;Thanks, issue closed",,,,,,,,,,,,,,,,,,,,,
Order of requires breaks default config,FAB-5805,20224,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,vdods,vdods,17/Aug/17 12:49 AM,27/Nov/17 4:25 AM,26/Apr/18 6:50 AM,27/Nov/17 4:25 AM,,,,,,,,,,fabric-sdk-node,,,,0,help-wanted,,,,,,,,"The following code causes fabric-ca-client/config/default.json to be loaded as the default config instead of fabric-client/config/default.json:

```const FabricCAServices = require('fabric-ca-client');

const FabricClient = require('fabric-client');

```

In particular, this caused the following line in fabric-client/lib/Client.js to assign undefined to process.env.GRPC_SSL_CIPHER_SUITES, because 'grpc-ssl-cipher-suites' is defined in fabric-client/config/default.json and not fabric-ca-client/config/default.json, thereby causing some GRPC calls to fail with little indication of why.

`process.env.GRPC_SSL_CIPHER_SUITES = sdkUtils.getConfigSetting('grpc-ssl-cipher-suites');`

 

Related: the function fabric-client/lib/utils.js:getConfig assigns a config singleton to `global.hfc`, which makes a bad assumption that `global.hfc` refers to the module.  However, this requires the importer of fabric-client to assign it to the global var `hfc`, which e.g. I didn't do.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01jnh:,,,,,,,,denyeart,harrisob@us.ibm.com,mastersingh24,vdods,,,,,,,master,,,true,"08/Nov/17 8:20 PM;harrisob@us.ibm.com;Thanks for finding this ... here is the Garrit item where the fix is going in

https://gerrit.hyperledger.org/r/#/c/15325/","27/Nov/17 4:25 AM;denyeart;Merged.  Marking done, if anything else remains please open another Jira item.",,,,,,,,,,,,,,,,,,,,,,
BCCSP yaml parsing in peer should be weakly-typed,FAB-5804,20223,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,vpaprots,vpaprots,vpaprots,17/Aug/17 12:48 AM,03/Oct/17 8:40 AM,26/Apr/18 6:50 AM,28/Sep/17 10:42 AM,v1.0.2,,,,,,v1.0.3,,,fabric-orderer,fabric-peer,,,1,,,,,,,,,"Fix BCCSP yaml parsing to be weakly-typed. Found this when 

{{BCCSP:}}
{{  PKCS11:}}
{{     SoftwareVerify: true #<< would not parse bool}}

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01jn9:,,,,,,,,jyellick,mastersingh24,vpaprots,,,,,,,,release-1.0,master,,true,"14/Sep/17 2:12 PM;jyellick;Added the review-needed tag.  From the discussion on the CR:

{noformat}
Jason Yellick
Sep 9 11:46 PM
Looking at the documentation here:
https://godoc.org/github.com/mitchellh/mapstructure#DecoderConfig
It looks like this brings some other potentially undesirable behavior, in particular:
    //   - negative numbers to overflowed uint values (base 10)
    //   - slice of maps to a merged map
I'm personally a little torn.  It seems like the behavior is generally desirable, but also a little odd in some cases.  Thoughts?
{noformat}


{noformat}
Volodymyr Paprotski
Sep 11 5:16 AM
Interesting, didnt see that blurb before, thanks for the link, pretty useful.
negative numbers.. don't have anything like that today (all positive like port address. Pin is treated like a string.) So I am not necessarily opposed to that interpretation.. Thats probably the
This looks esoteric (until one needs it I suppose, when its very frustrating 'bug', but still appears a corner case. Am I wrong?)
On other hand, not able to specify a bool in any way.. I guess the alternative is to write a custom parser?
So, in my, non-maintainer opinion, i am ok with that interpretation..
{noformat}
",16/Sep/17 12:33 PM;mastersingh24;The proposed change https://gerrit.hyperledger.org/r/#/c/12533/2/common/viperutil/config_util.go@320  seems fine to me based on the fact we also use a similar mechanism already in the other unmarshal mathod,,,,,,,,,,,,,,,,,,,,,,
Command to update anchor peers missing,FAB-5799,20215,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nickgaski,sanchezl,sanchezl,16/Aug/17 3:16 PM,27/Oct/17 2:48 PM,26/Apr/18 6:50 AM,27/Oct/17 2:48 PM,,,,,,,,,,fabric-docs,,,,0,Documentation,,,,,,,,The [Create & Join Channel section of the Building Your First Network|http://hyperledger-fabric.readthedocs.io/en/latest/build_network.html#create-join-channel] document is missing the command line examples for submitting the anchor peer update transactions generated in the [Manually generate the artifacts|http://hyperledger-fabric.readthedocs.io/en/latest/build_network.html#manually-generate-the-artifacts] section.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01jlh:,,,,,,,,nickgaski,sanchezl,,,,,,,,,,,,,27/Oct/17 2:48 PM;nickgaski;This has been updated now... manual instructions to join a peer from each org to the channel and then send the channel update calls to define each org's anchor peer.,,,,,,,,,,,,,,,,,,,,,,,
configtxlator Error in curl .../configtxlator/compute/update-from-configs,FAB-5795,20209,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,davidkhala,davidkhala,16/Aug/17 9:21 AM,17/Oct/17 8:42 PM,26/Apr/18 6:50 AM,17/Oct/17 8:42 PM,v1.0.0,v1.0.1,,,,,,,,,,,,0,configtxlator,,,,,,,," 

 

^When I run testConfigtxlator.sh, try to compute config update, it throw out error:^

{color:#0073bf}Error with field 'original': error unmarshaling field bytes: proto: bad wiretype for field common.Config.Sequence: got wiretype 2, want 0{color}","$ configtxlator version

>>configtxlator:
 Version: 1.0.0
 Go version: go1.7
 OS/Arch: linux/amd64

[^testConfigtxlator.sh][^genesis.block]",,,,,,,,,,,,,,,,,,,16/Aug/17 9:17 AM;davidkhala;genesis.block;https://jira.hyperledger.org/secure/attachment/11892/genesis.block,16/Aug/17 9:17 AM;davidkhala;testConfigtxlator.sh;https://jira.hyperledger.org/secure/attachment/11893/testConfigtxlator.sh,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01jk5:,,,,,,,,davidkhala,,,,,,,,,,,,,,"17/Aug/17 7:33 AM;davidkhala; Now I know the reason, I cannot use entire block file as input for 'compute' api. Currently, only pb file encoded from partial config, in a hierarchy of .data.data[0].payload.data.config can be compared for 'compute' api.",,,,,,,,,,,,,,,,,,,,,,,
Mask DB credentials in debug messages,FAB-5794,20208,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,smithbk,smithbk,16/Aug/17 1:56 AM,28/Aug/17 11:32 AM,26/Apr/18 6:50 AM,28/Aug/17 10:43 AM,v1.0.0,v1.0.1,,,,,v1.0.2,v1.1,,fabric-ca,,,,0,,,,,,,,,"While this would generally not have been an issue, in the case where fabric-ca is being hosted / managed by 3rd party operators need to ensure that credentials are masked as the people monitoring the service may not be the same people who have administrative rights",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01jjx:,,,,,,,,mastersingh24,smithbk,,,,,,,,,release-1.0,master,,true,16/Aug/17 2:03 AM;smithbk;[https://gerrit.hyperledger.org/r/12501] for 1.1+,25/Aug/17 10:05 AM;mastersingh24;https://gerrit.hyperledger.org/r/12779 for 1.0.2,,,,,,,,,,,,,,,,,,,,,,
fabric CA DB initialization should be more resilient,FAB-5786,20198,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,smithbk,smithbk,15/Aug/17 4:35 PM,20/Nov/17 8:43 PM,26/Apr/18 6:50 AM,19/Sep/17 7:48 PM,v1.0.0,,,,,,v1.1,,,fabric-ca,,,,0,Release-planning-1.1,,,,,,,,"Handle the following scenarios:
1) DB exists but tables have not been created
2) DB exists and table exists but table is empty
3) DB exists, table exists, is non-empty but identity is not found, then add it

Basically, it should work as follows:
For each CA in the server, try to initialize the DB at server startup and when each request is received thereafter,
until it successfully initializes.   If it fails during startup and again when a request is received, the DB initialization error is logged and returned to the client.  Each attempt to initialize does the following:
1) Try to create the DB.  If it fails for any other reason than it already exists, fail initialization and return the error.
2) Try to create each table (certificate, user, affiliation).  If any fails for any other reason than it already exists, fail initialization and return the error.
3) For each affiliation in the affiliations section, try to insert the affiliation into the affiliations table.  If it fails for any other reason than it already exists, fail initialization and return the error.
4) If LDAP is not enabled, for each identity in the register.identities section of the config file, try to insert the identity into the users table.
    If it fails for any other reason than it already exists, fail initialization and return the error.

If it makes it thru all of these steps without error, then initialization was successful and we don't try to initialize the DB again, until the server is restarted.

NOTE: This means that you can register new identities or affiliations by adding them to the config file and restarting the server.  If you are running in a cluster, you only need to do this for one cluster member.  Removing an identity from the config file does NOT remove it from the database.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01jhp:,,,,,,,,skarim,smithbk,,,,,,,,,release-1.0,master,,true,22/Aug/17 7:30 PM;skarim;https://gerrit.hyperledger.org/r/#/c/12611/,,,,,,,,,,,,,,,,,,,,,,,
FABRIC CA init not correctly initializing remote postgres,FAB-5782,20193,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,keysjrw,keysjrw,15/Aug/17 11:59 AM,28/Oct/17 9:38 AM,26/Apr/18 6:50 AM,28/Oct/17 9:38 AM,v1.1,,,,,,v1.1,,,fabric-ca,,,,0,fabric-ca,,,,,,,,"PostgreSQL always expects to connect to a database, it does not allow establishing a connection just to the server itself. This causes issues when you specify a database in the connection string that does not exist. Fabric-ca-server is capable of creating the database if it does not exist. However, Postgres will complain if you established a connection with a database that did not exist and then try to create a new database. It should be noted that if in the connection string has no database is specified, it uses the username for the database name. 

The solution to this is multiple attempts at establishing a connection. A default PostgresSQL installation comes with two default database that can be used to establish a connection - ""template1"" and ""postgres"". The retry logic would work as follows:

1. Connect to database specified in connection string
2. If 1 fails, connect to ""postgres"" database
3. If 2 fails, connect to ""template1"" database
4. If 1-3 fail, throw an error indicating database initialization failed and that database needs to be created manually. The server will continue to start but will try to reinitialize the database on the next request the server receives. 

*Original Description:*
FABRIC Ca on 1 server and postgres on another. No docker. init does not create the database or tables or insert rows. No errors from init (or start). I've tried as root and as me. I've rebuilt the ca server many times. A set of representative logs included.",Ubuntu 16.04. IBM BM VMs. Fabric ca cloned form github a week ago.,,,,,,,,,,,,,,,,,,,15/Aug/17 11:58 AM;keysjrw;fabric-ca-init.txt;https://jira.hyperledger.org/secure/attachment/11886/fabric-ca-init.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01jgl:,,,,,,,,keysjrw,skarim,,,,,,,,,master,,,true,"28/Aug/17 9:18 AM;keysjrw;Experienced the same issue with a local postgres. Identified that it works when using user postgress with a password. Also works remotely with user postgres. I assigned full access to a custom username in postgres, but it would not work. Either I failed to properly assign rights to this custom user or something is hard-coded to user postgres. I could not identify which. Init, start, register, and enroll now work using 2 CA VMs with a third VM running postgres for both with username postgres and a password. If it can be shown that a custom username works then this issue should be closed. Else it should be noted why user postgres is required or modified to allow custom user names in postgres.",22/Oct/17 10:48 PM;skarim;https://gerrit.hyperledger.org/r/#/c/14763/,,,,,,,,,,,,,,,,,,,,,,
[sdk-node] grpc node module should be updated,FAB-5775,20186,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,shimos,shimos,shimos,14/Aug/17 9:42 PM,08/Jan/18 11:02 PM,26/Apr/18 6:50 AM,21/Aug/17 8:01 PM,v1.0.1,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"The current fabric-sdk-node uses grpc 1.2.4 (the latest version before 1.3.0), which is old and has several potential bugs.
One example of such bugs is https://github.com/grpc/grpc/issues/11015, which may crash long-running applications.

It seems that the connection issue reported in https://jira.hyperledger.org/browse/FAB-5464 is also fixed in the latest version.

Moreover, the compatibility issue in v1.3.0 addressed by https://jira.hyperledger.org/browse/FAB-3491 and https://jira.hyperledger.org/browse/FAB-3492 is fixed in v1.3.1 (see https://github.com/grpc/grpc/releases/tag/v1.3.1 ), and 'gulp test' works well with the latest version of grpc.

It seems that there is no showstopper to update grpc node module to the latest one (v1.4.1).
","fabric commit 303ee1f336df0cd78ded29241635120a71555a9c

fabric-sdk-node commit 9fe8114c46f8dcb7c3ff0348a4fca7fc16294ea5",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01jf1:,,,,,,,,shimos,,,,,,,,,,release-1.0,master,,true,14/Aug/17 9:52 PM;shimos;CR: https://gerrit.hyperledger.org/r/#/c/12449/,,,,,,,,,,,,,,,,,,,,,,,
Invoke never disconnects from eventhub when Orderer is down,FAB-5772,20182,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,ldfreema,ldfreema,14/Aug/17 7:16 PM,25/Oct/17 4:28 PM,26/Apr/18 6:50 AM,25/Oct/17 4:27 PM,v1.0.1,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"When performing Invokes when the orderer is unavailable, the following error is displayed, but the invoke never completes due to the eventhub never being disconnected...

 

***** invoke transaction to move money *****
ok 1 Successfully enrolled user 'admin'
info: [invoke-chaincode]: create new peer grpcs://tor-zbc01c.3.secure.blockchain.ibm.com:28000
info: [invoke-chaincode]: create new eventhub grpcs://tor-zbc01c.3.secure.blockchain.ibm.com:12093
info: [EventHub.js]: _connect - options \{}
error: [Orderer.js]: sendDeliver - on error code 14: ""Error: Connect Failed\n at ClientDuplexStream._emitStatusIfDone (/ctc/keeper/node_modules/grpc/src/node/src/client.js:201:19)\n at ClientDuplexStream._readsDone (/ctc/keeper/node_modules/grpc/src/node/src/client.js:169:8)\n at readCallback (/ctc/keeper/node_modules/grpc/src/node/src/client.js:229:12)""
error: [Channel.js]: getChannelConfig - Failed Proposal. Error: Error: SERVICE_UNAVAILABLE
 at ClientDuplexStream.<anonymous> (/ctc/keeper/node_modules/fabric-client/lib/Orderer.js:258:23)
 at emitOne (events.js:96:13)
 at ClientDuplexStream.emit (events.js:188:7)
 at ClientDuplexStream._emitStatusIfDone (/ctc/keeper/node_modules/grpc/src/node/src/client.js:204:12)
 at ClientDuplexStream._readsDone (/ctc/keeper/node_modules/grpc/src/node/src/client.js:169:8)
 at readCallback (/ctc/keeper/node_modules/grpc/src/node/src/client.js:229:12)
error: [Channel.js]: Error: SERVICE_UNAVAILABLE
 at ClientDuplexStream.<anonymous> (/ctc/keeper/node_modules/fabric-client/lib/Orderer.js:258:23)
 at emitOne (events.js:96:13)
 at ClientDuplexStream.emit (events.js:188:7)
 at ClientDuplexStream._emitStatusIfDone (/ctc/keeper/node_modules/grpc/src/node/src/client.js:204:12)
 at ClientDuplexStream._readsDone (/ctc/keeper/node_modules/grpc/src/node/src/client.js:169:8)
 at readCallback (/ctc/keeper/node_modules/grpc/src/node/src/client.js:229:12)
not ok 2 Failed to enroll user 'admin'. Error: Error: SERVICE_UNAVAILABLE
 ---
 operator: fail
 at: process._tickCallback (internal/process/next_tick.js:103:7)
 stack: |-
 Error: Failed to enroll user 'admin'. Error: Error: SERVICE_UNAVAILABLE
 at Test.assert [as _assert] (/ctc/keeper/node_modules/tape/lib/test.js:212:54)
 at Test.bound [as _assert] (/ctc/keeper/node_modules/tape/lib/test.js:64:32)
 at Test.fail (/ctc/keeper/node_modules/tape/lib/test.js:277:10)
 at Test.bound [as fail] (/ctc/keeper/node_modules/tape/lib/test.js:64:32)
 at /ctc/keeper/node_sdk/tests.js:899:15
 at process._tickCallback (internal/process/next_tick.js:103:7)
 ...
not ok 3 Error: Failed to enroll user 'admin'. Error: Error: SERVICE_UNAVAILABLE at /ctc/keeper/node_sdk/tests.js:900:19 at process._tickCallback (internal/process/next_tick.js:103:7)
 ---
 operator: fail
 at: process._tickCallback (internal/process/next_tick.js:103:7)
 stack: |-
 Error: Error: Failed to enroll user 'admin'. Error: Error: SERVICE_UNAVAILABLE
 at /ctc/keeper/node_sdk/tests.js:900:19
 at process._tickCallback (internal/process/next_tick.js:103:7)
 at Test.assert [as _assert] (/ctc/keeper/node_modules/tape/lib/test.js:212:54)
 at Test.bound [as _assert] (/ctc/keeper/node_modules/tape/lib/test.js:64:32)
 at Test.fail (/ctc/keeper/node_modules/tape/lib/test.js:277:10)
 at Test.bound [as fail] (/ctc/keeper/node_modules/tape/lib/test.js:64:32)
 at /ctc/keeper/node_sdk/tests.js:1009:15
 at process._tickCallback (internal/process/next_tick.js:103:7)
 ...
not ok 4 Error: Error: Failed to enroll user 'admin'. Error: Error: SERVICE_UNAVAILABLE at /ctc/keeper/node_sdk/tests.js:900:19 at process._tickCallback (internal/process/next_tick.js:103:7) at /ctc/keeper/node_sdk/tests.js:1010:19 at process._tickCallback (internal/process/next_tick.js:103:7)
 ---
 operator: fail
 at: process._tickCallback (internal/process/next_tick.js:103:7)
 stack: |-
 Error: Error: Error: Failed to enroll user 'admin'. Error: Error: SERVICE_UNAVAILABLE
 at /ctc/keeper/node_sdk/tests.js:900:19
 at process._tickCallback (internal/process/next_tick.js:103:7)
 at /ctc/keeper/node_sdk/tests.js:1010:19
 at process._tickCallback (internal/process/next_tick.js:103:7)
 at Test.assert [as _assert] (/ctc/keeper/node_modules/tape/lib/test.js:212:54)
 at Test.bound [as _assert] (/ctc/keeper/node_modules/tape/lib/test.js:64:32)
 at Test.fail (/ctc/keeper/node_modules/tape/lib/test.js:277:10)
 at Test.bound [as fail] (/ctc/keeper/node_modules/tape/lib/test.js:64:32)
 at /ctc/keeper/node_sdk/tests.js:1027:15
 at process._tickCallback (internal/process/next_tick.js:103:7)
 ...
not ok 5 Error: Error: Error: Failed to enroll user 'admin'. Error: Error: SERVICE_UNAVAILABLE at /ctc/keeper/node_sdk/tests.js:900:19 at process._tickCallback (internal/process/next_tick.js:103:7) at /ctc/keeper/node_sdk/tests.js:1010:19 at process._tickCallback (internal/process/next_tick.js:103:7)
 ---
 operator: error
 expected: |-
 undefined
 actual: |-
 [Error: Error: Error: Failed to enroll user 'admin'. Error: Error: SERVICE_UNAVAILABLE
 at /ctc/keeper/node_sdk/tests.js:900:19
 at process._tickCallback (internal/process/next_tick.js:103:7)
 at /ctc/keeper/node_sdk/tests.js:1010:19
 at process._tickCallback (internal/process/next_tick.js:103:7)]
 at: Test.onetime (/ctc/keeper/node_modules/onetime/index.js:22:12)
 stack: |-
 Error: Error: Error: Failed to enroll user 'admin'. Error: Error: SERVICE_UNAVAILABLE
 at /ctc/keeper/node_sdk/tests.js:900:19
 at process._tickCallback (internal/process/next_tick.js:103:7)
 at /ctc/keeper/node_sdk/tests.js:1010:19
 at process._tickCallback (internal/process/next_tick.js:103:7)
 at /ctc/keeper/node_sdk/tests.js:1028:19
 at process._tickCallback (internal/process/next_tick.js:103:7)
 ...

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01jed:,,,,,,,,harrisob@us.ibm.com,ldfreema,,,,,,,,,,,,,"25/Oct/17 4:28 PM;harrisob@us.ibm.com;This is working as designed. The eventhub is on the peer, so it still has a connection. Using a timer on the callback setup would shut it down if there is not an event posted in reasonable about of time.",,,,,,,,,,,,,,,,,,,,,,,
Ledger LTE tests are failing on latest commits,FAB-5770,20180,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,AdnanChoudhury,rameshthoomu,rameshthoomu,14/Aug/17 7:01 PM,25/Aug/17 6:35 PM,26/Apr/18 6:50 AM,24/Aug/17 1:50 PM,v1.0.1,,,,,,,,,fabric-ledger,,,,0,Ledger,,,,,,,,"Observed ledger LTE tests are failing on latest fabric commits. Daily tests are failing since 3 days with these failures.

*Fabric Commit# 762fdfb*

*Build# https://jenkins.hyperledger.org/view/Daily/job/fabric-daily-tests-x86_64/52/consoleFull*",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01jdx:,,,,,,,,AdnanChoudhury,denyeart,rameshthoomu,,,,,,,,master,,,true,15/Aug/17 8:35 PM;AdnanChoudhury;https://gerrit.hyperledger.org/r/#/c/12499/,"24/Aug/17 1:51 PM;denyeart;[~AdnanChoudhury] This one was merged, I'm marking as Done but please confirm it works now.",25/Aug/17 6:32 PM;AdnanChoudhury;https://gerrit.hyperledger.org/r/#/c/12499/,25/Aug/17 6:35 PM;AdnanChoudhury;[~denyeart] Latest tests are working (logs can be viewed here https://jenkins.hyperledger.org/view/Daily/job/fabric-daily-tests-x86_64/),,,,,,,,,,,,,,,,,,,,
Fix ldap debug messages,FAB-5761,20171,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,smithbk,smithbk,14/Aug/17 4:36 PM,15/Aug/17 7:12 PM,26/Apr/18 6:50 AM,15/Aug/17 7:12 PM,,,,,,,,,,fabric-ca,,,,0,,,,,,,,,Some LDAP messages need fixing,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01jbx:,,,,,,,,smithbk,,,,,,,,,,master,,,true,14/Aug/17 4:39 PM;smithbk;https://gerrit.hyperledger.org/r/12433 [FAB-5761] Fix a couple of debug messages,,,,,,,,,,,,,,,,,,,,,,,
byfn e2e test fails on latest commit,FAB-5759,20169,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,14/Aug/17 2:11 PM,30/Aug/17 1:52 PM,26/Apr/18 6:50 AM,30/Aug/17 1:52 PM,,,,,,,,,,fabric-samples,,,,0,fabric-samples,,,,,,,,"byfn e2e test fails on latest fabric-samples commit.. On the below commit there is an extra line left over and causing e2e test failures

https://github.com/hyperledger/fabric-samples/commit/419a083a2e8d62485eb66b05aad71299e7b2f1e3#diff-98c80bc3c91a7cb33f33ac5f137c1360R113",x86_64,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01jbh:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,30/Aug/17 1:51 PM;rameshthoomu;Working as expected after the fix.,30/Aug/17 1:52 PM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/12373/,,,,,,,,,,,,,,,,,,,,,,
"PTE show instantiate successfully, but it didn't actually",FAB-5757,20160,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wsh_bob,wsh_bob,wsh_bob,14/Aug/17 8:48 AM,14/Aug/17 9:29 AM,26/Apr/18 6:50 AM,14/Aug/17 9:29 AM,,,,,,,,,,fabric-quality,,,,0,,,,,,,,,"1. Instantiate chaincode
info: [PTE 0 main]: [chaincodeInstantiate:Nid=0] Successfully initialize channel[mychannel]
info: [PTE 0 main]: [chaincodeInstantiate] channelName(mychannel) chaincode instantiation was good
info: [PTE 0 main]: [chaincodeInstantiate] Successfully sent chaincode instantiation Proposal and received ProposalResponse: Status - 200
info: [PTE 0 main]: [chaincodeInstantiate] Promise.all tCurr=1502239013760
info: [PTE 0 main]: [chaincodeInstantiate] Event promise all complete and testing complete
info: [PTE 0 main]: [chaincodeInstantiate(Nid=0)] Successfully instantiate transaction on mychannel.

2. constant invoke

^[[32minfo^[[39m: [PTE 0 main]: stdout: ^[[32minfo^[[39m: [PTE 0 exec]: recHist: HIST

^[[32minfo^[[39m: [PTE 0 main]: stdout: ^[[32minfo^[[39m: [PTE 0 exec]: [Nid:chan:org:id=0:mychannel:org2:0 execModeConstant] tStart 1502239099513, tLocal 1502239099578
^[[32minfo^[[39m: [PTE 0 exec]: [Nid:chan:org:id=0:mychannel:org2:0 execModeConstant] Constant Freq: 0 ms, variance Freq: 0 ms

^[[32minfo^[[39m: [PTE 0 main]: stderr: ^[[31merror^[[39m: [client-utils.js]: sendPeersProposal - Promise is rejected: Error: could not find chaincode with name 'sample_cc_ch1' - make sure the chaincode sample_cc_ch1 has been successfully instantiated and try again
 at /root/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:434:17",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,0|i01j9h:,,,,,,,,wsh_bob,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
De-duplicate identities in cauthdsl policy evaluation.,FAB-5753,20155,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,13/Aug/17 5:49 PM,22/Sep/17 12:15 PM,26/Apr/18 6:50 AM,31/Aug/17 7:15 AM,,,,,,,v1.0.2,v1.1,,fabric-orderer,,,,0,common-components,Release-planning-1.1,,,,,,,The identity deduplication was only fixed in the VSCC for v1.0.  This should have been done in the core policy code and needs to be addressed there.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01j8d:,,,,,,,,jyellick,yoheiueda,,,,,,,,,release-1.0,master,,true,"28/Aug/17 3:27 PM;jyellick;For v1.1: https://gerrit.hyperledger.org/r/#/c/12859/
For v1.0.2: https://gerrit.hyperledger.org/r/#/c/12861/",,,,,,,,,,,,,,,,,,,,,,,
Invalid assertion in ca integration test after decode the public cert,FAB-5750,20151,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,genggjh,genggjh,genggjh,13/Aug/17 1:57 AM,13/Aug/17 2:29 AM,26/Apr/18 6:50 AM,13/Aug/17 2:29 AM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"We need check whether the block is nil after decode the public cert

certPem, _ := pem.Decode(cert)
 if err != nil \{
 t.Fatalf(""pem Decode return error: %v"", err)
 }

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01j7h:,,,,,,,,genggjh,,,,,,,,,,master,,,true,13/Aug/17 2:28 AM;genggjh;Changes has been merged: https://gerrit.hyperledger.org/r/#/c/12339/,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca-server outputs mangled message on startup,FAB-5749,20150,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,12/Aug/17 6:51 PM,19/Aug/17 10:50 AM,26/Apr/18 6:50 AM,19/Aug/17 10:50 AM,v1.0.1,v1.1,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"fabric-ca-server outputs
{noformat}
Listening on %!s(int=7054)%!(EXTRA string=http://0.0.0.0:7054){noformat}
Should be
{noformat}
Listening on http://0.0.0.0:7054{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01j79:,,,,,,,,mastersingh24,,,,,,,,,,master,,,true,"15/Aug/17 11:13 AM;mastersingh24;[https://gerrit.hyperledger.org/r/#/c/12469/]

 ",,,,,,,,,,,,,,,,,,,,,,,
Build is broken due to merge conflict,FAB-5748,20149,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,12/Aug/17 4:33 PM,12/Aug/17 5:43 PM,26/Apr/18 6:50 AM,12/Aug/17 5:43 PM,,,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01j71:,,,,,,,,jyellick,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
[CI] - gerrit checkout is failing inconsistently on Jenkins x86_64 build nodes,FAB-5741,20142,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ryjones,rameshthoomu,rameshthoomu,11/Aug/17 8:35 PM,27/Nov/17 10:22 PM,26/Apr/18 6:50 AM,27/Nov/17 10:22 PM,,,,,,,,,,fabric-ci,,,,0,build-system,,,,,,,,"Observed below issue inconsistently on x86_64 build nodes and causing build failures.
{code:java}
00:01:10.219 JENKINS-19022: warning: possible memory leak due to Git plugin usage; see: https://wiki.jenkins-ci.org/display/JENKINS/Remove+Git+Plugin+BuildsByBranch+BuildData
00:01:10.221 Checking out Revision 82f0bd94c9ef489ade6075d3e322a7cbac4bbb0d (refs/changes/21/12321/5){code}
Build Failure Reference#

[https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-x86_64/2383/console]",Jenkins Environment,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01j5h:,,,,,,,,denyeart,rameshthoomu,,,,,,,,,,,,,"27/Nov/17 4:24 AM;denyeart;[~rameshthoomu] [~ryjones] Is this still an issue? If not, please mark Done.",,,,,,,,,,,,,,,,,,,,,,,
[CI] - failure in downloading maven pkgs using curl or wget commands causing build failures inconsistently,FAB-5739,20140,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,11/Aug/17 6:09 PM,17/Aug/17 6:05 PM,26/Apr/18 6:50 AM,17/Aug/17 6:05 PM,,,,,,,,,,fabric-build,,,,1,build-system,,,,,,,,"Observed fabric builds are failing inconsistently with below errors. *curl* command fails inconsistently without downloading the complete file. Could be some instability in the infra causing these issues.
{code:java}
00:04:52.644 Step 7/15 : RUN mkdir -p /usr/share/maven /usr/share/maven/ref   && curl -fsSL http://apache.osuosl.org/maven/maven-3/$MAVEN_VERSION/binaries/apache-maven-$MAVEN_VERSION-bin.tar.gz     | tar -xzC /usr/share/maven --strip-components=1   && ln -s /usr/share/maven/bin/mvn /usr/bin/mvn
00:04:52.710  ---> Running in 1fe3acf6a0af
00:09:12.512 curl: (18) transfer closed with 1338842 bytes remaining to read
00:09:12.513 
00:09:12.513 gzip: stdin: unexpected end of file
00:09:12.514 tar: Unexpected EOF in archive
00:09:12.514 tar: Unexpected EOF in archive
00:09:12.514 tar: Error is not recoverable: exiting now{code}",on all Jenkins x86_64 nodes,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01j51:,,,,,,,,harsha544,rameshthoomu,ryjones,,,,,,,,master,,,true,11/Aug/17 6:10 PM;rameshthoomu;@ry could you please look into this or ask infra team to look into this inconsistent failures with the network instability.,"11/Aug/17 6:45 PM;rameshthoomu;The above failure is while building java env image from fabric repository

https://github.com/hyperledger/fabric/blob/ae4e37dbafe74997534ab317dec5c3f4f53b6a84/images/javaenv/Dockerfile.in#L12","11/Aug/17 6:48 PM;harsha544;I see this would be down to mirror site from where we are downloading. i.e 
Tried downloading from here it happened faster [http://www-us.apache.org/dist/maven/maven-3/3.3.9/binaries/]",11/Aug/17 8:30 PM;rameshthoomu;Tested new URL on x86_64 builds nodes and it's working as expected.. Submitted patch with new URL https://gerrit.hyperledger.org/r/#/c/12369/,11/Aug/17 8:43 PM;ryjones;awaiting merge,"11/Aug/17 9:21 PM;rameshthoomu;Below are the improvement in build time with the new URL

new URL:{color:#14892c} *2-3 secs*{color}

*{color:#d04437}00:04:13.951{color}* Step 7/15 : RUN mkdir -p /usr/share/maven /usr/share/maven/ref   && curl -fsSL http://www-us.apache.org/dist/maven/maven-3/$MAVEN_VERSION/binaries/apache-maven-$MAVEN_VERSION-bin.tar.gz     | tar -xzC /usr/share/maven --strip-components=1   && ln -s /usr/share/maven/bin/mvn /usr/bin/mvn
{color:#d04437}*00:04:14.038*{color}  ---> Running in f3ef9c26acf3
{color:#d04437}*00:04:16.402*{color}  ---> de34acefff41

OLD URL: {color:#14892c}*4 mins 38 secs*{color}

{color:#d04437}*00:04:17.105*{color} Step 7/15 : RUN mkdir -p /usr/share/maven /usr/share/maven/ref   && curl -fsSL http://apache.osuosl.org/maven/maven-3/$MAVEN_VERSION/binaries/apache-maven-$MAVEN_VERSION-bin.tar.gz     | tar -xzC /usr/share/maven --strip-components=1   && ln -s /usr/share/maven/bin/mvn /usr/bin/mvn
{color:#d04437}*00:04:17.181*{color}  ---> Running in 0412d19fa11f
{color:#d04437}*00:08:55.328*{color}  ---> c535860866ce
{color:#d04437}*00:08:55.352*{color} Removing intermediate container 0412d19fa11f

 ",14/Aug/17 11:58 PM;ryjones;is this merged and done now?,15/Aug/17 1:47 PM;rameshthoomu;[~ryjones] Still in-review.. Waiting for one more +2..,"17/Aug/17 6:05 PM;rameshthoomu;Patch has been merged,.. https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-x86_64/2414/consoleFull


*{color:#d04437}00:04:55.280{color}* Step 7/15 : RUN mkdir -p /usr/share/maven /usr/share/maven/ref   && curl -fsSL http://www-us.apache.org/dist/maven/maven-3/$MAVEN_VERSION/binaries/apache-maven-$MAVEN_VERSION-bin.tar.gz     | tar -xzC /usr/share/maven --strip-components=1   && ln -s /usr/share/maven/bin/mvn /usr/bin/mvn
00:04:55.350  ---> Running in 095aafbd8933
*{color:#d04437}00:04:59.819{color}*  ---> 6b8e2973708a {color:#d04437}*(Took 4 secs to complete this process)*{color}
00:04:59.839 Removing intermediate container 095aafbd8933
{color:#333333}00:04:59.840{color} Step 8/15 : ENV MAVEN_HOME /usr/share/maven",,,,,,,,,,,,,,,
fabric/core package unit tests do not run in parallel,FAB-5723,20117,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jyellick,jyellick,11/Aug/17 2:01 AM,31/Jan/18 8:55 PM,26/Apr/18 6:50 AM,31/Jan/18 8:55 PM,,,,,,,,,,fabric-quality,,,,0,ci,Release-planning-1.2,,,,,,,"For some reason, we cannot run the unit tests in {{fabric/core}} in parallel.  I believe it may be related to some of the same reasons in FAB-5722, but I'm not generally certain of a root cause.

This is a serious hindrance on development because it multiplies the testing time by at least the number of available cores, if not substantially more.

Doing a comparison on my local laptop testing {{fabric/orderer/...}} and {{fabric/common/...}} natively with parallelization on takes 15 seconds.  Doing the same natively without parallization takes 1 minute.

The change is not quite as significant, but still noticeable when running {{make unit-test}}.  With {{-p 1}} set as is required today, those unit tests take 8 minutes, with that flag removed, the speed doubles to 4 minutes.  As this is the path of our CI, this might also double the speed of our CI which would be very welcomed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01j0l:,,,,,,,,denyeart,jeffgarratt,jyellick,kchristidis,sheehan,,,,,,,,,,01/Nov/17 3:25 PM;jeffgarratt;[~muralisr] could you take a look at this?,31/Jan/18 7:09 PM;denyeart;Moving to fabric-quality since this is a test improvement rather than a product bug that would impact users.,"31/Jan/18 7:38 PM;sheehan;I'm not sure I understand this bug or maybe it's something that was resolved?

I think this bug is suggesting that the `-p 1` flag is set when running `make unit-test` for the fabric/core package. If you look at unit-test/run.sh it seems the flag is only used with the gossip package and the core package tests are run in parallel.","31/Jan/18 8:55 PM;jyellick;Yes, it looks like this has been resolved for the core packages, at the time of its writing (August 2017) this was not the case.  Closing.",,,,,,,,,,,,,,,,,,,,
fabric/core package unit tests do not run with 'go test ./core/...',FAB-5722,20116,Bug,Duplicate,FAB,Fabric,software,ChristopherFerris,,,Medium,,,jyellick,jyellick,11/Aug/17 1:50 AM,05/Apr/18 5:24 PM,26/Apr/18 6:50 AM,,,,,,,,Future,,,fabric-peer,,,,0,Release-planning-1.2,,,,,,,,"For almost the entirety of the fabric codebase, a developer who is updating code may simply run {{go test ./...}} and the tests will appropriately run.

However, for the {{fabric/core}} code this is not the case. Instead, these tests must be executed via the {{make unit-test}} command, or with other mysterious prereqs in place (I believe a running peer process is required for some, and an instance of couch for others, but there may be other depenencies).

This makes hacking on fabric generally much more tedious than it needs to be. Especially for changes which may induce compile errors in the {{fabric/core}} packages.

Even running a command like ""go test -run='^$' ./core/..."" which should execute no tests, but simply compile them manages to fail.

Being forced to run the unit test via {{make unit-test}} is also astonishingly slower than via the {{go test}} natively. A quick check comparing testing {{go test ./orderer/... ./common/...}} on my laptop takes 15 seconds. The equivalent {{make unit-test}} command takes 8 minutes if the containers are already built, 10 if they must be built. Even enforcing {{-p 1}} as {{make unit-test}} does the native command still completes in under a minute.

Hence, I consider this a very real bug, that being forced to rely on {{make unit-test}} slows a developer's workflow by up to around 100 times in the worst case, or 10 times in the best case.",,,,,,,,,,,,,,,,,FAB-8418,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01j0d:,,,,,,,,ChristopherFerris,jeffgarratt,jyellick,kchristidis,n-horiguchi,,,,,,,,,,01/Nov/17 3:25 PM;jeffgarratt;[~muralisr] could you take a look at this?,21/Mar/18 5:11 PM;wlahti;I added a link to FAB-8418 which has a number of subtasks which collectively will resolve this. ,05/Apr/18 5:24 PM;ChristopherFerris;Going to close this as FAB-8418 will resolve.,,,,,,,,,,,,,,,,,,,,,
newIdentity outputs gibberish to log,FAB-5713,20106,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,10/Aug/17 3:21 PM,28/Aug/17 9:37 PM,26/Apr/18 6:50 AM,12/Aug/17 1:39 PM,v1.0.2,,,,,,v1.0.2,v1.1,,fabric-crypto,,,,0,,,,,,,,,"When the peer 's msp is in DEBUG it outputs the following:
{code}
2017-08-10 14:02:37.226 UTC [msp/identity] newIdentity -> DEBU 02f Creating identity instance for cert &{0�^B^Y0�^A��^C^B^A^B^B^P^\�u*��<U+05FD>Q,b�K�4 0
^F^H*�H�=^D^C^B0s1^K0   ^F^CU^D^F^S^BUS1^S0^Q^F^CU^D^H^S
California1^V0^T^F^CU^D^G^S^MSan Francisco1^Y0^W^F^CU^D
^S^Porg1.example.com1^\0^Z^F^CU^D^C^S^Sca.org1.example.com0^^^W^M170810140234Z^W^M270808140234Z0[1^K0   ^F^CU^D^F^S^BUS1^S0^Q^F^CU^D^H^S
California1^V0^T^F^CU^D^G^S^MSan Francisco1^_0^]^F^CU^D^C^S^Vpeer0.org1.example.com0Y0^S^F^G*�H�=^B^A^F^H*�H�=^C^A^G^CB^@^DT��^?�2���_^R���^G^HVD�M�-��3R�n�^P~l�i��DA^F����T1fx蠽�i�R�`�moGK^D2��M0K0^N^F^CU
^]^O^A^A�^D^D^C^B^G�0^L^F^CU^]^S^A^A�^D^B0^@0+^F^CU^]#^D$0""� m5���$'�2YVh��{^E�^G
^�4^Pn$^U)c�z^L^M0
^F^H*�H�=^D^C^B^CH^@0E^B!^@����X��]�^C�j^Z^TLm��f�y^F{(i��ݭ$��^B iaDI��Y1N��p��1��-��5ѱ)���^CPr 0�^A��^C^B^A^B^B^P^\�u*��<U+05FD>Q,b�K�4 0
^F^H*�H�=^D^C^B0s1^K0   ^F^CU^D^F^S^BUS1^S0^Q^F^CU^D^H^S
California1^V0^T^F^CU^D^G^S^MSan Francisco1^Y0^W^F^CU^D
^S^Porg1.example.com1^\0^Z^F^CU^D^C^S^Sca.org1.example.com0^^^W^M170810140234Z^W^M270808140234Z0[1^K0   ^F^CU^D^F^S^BUS1^S0^Q^F^CU^D^H^S
California1^V0^T^F^CU^D^G^S^MSan Francisco1^_0^]^F^CU^D^C^S^Vpeer0.org1.example.com0Y0^S^F^G*�H�=^B^A^F^H*�H�=^C^A^G^CB^@^DT��^?�2���_^R���^G^HVD�M�-��3R�n�^P~l�i��DA^F����T1fx蠽�i�R�`�moGK^D2��M0K0^N^F^CU^]^O^A^A�^D^D^C^B^G�0^L^F^CU^]^S^A^A�^D^B0^@0+^F^CU^]#^D$0""� m5���$'�2YVh��{^E�^G
^�4^Pn$^U)c�z^L^M 0Y0^S^F^G*�H�=^B^A^F^H*�H�=^C^A^G^CB^@^DT��^?�2���_^R���^G^HVD�M�-��3R�n�^P~l�i��DA^F����T1fx蠽�i�R�`�moGK^D2� 0[1^K0 ^F^CU^D^F^S^BUS1^S0^Q^F^CU^D^H^S
California1^V0^T^F^CU^D^G^S^MSan Francisco1^_0^]^F^CU^D^C^S^Vpeer0.org1.example.com 0s1^K0      ^F^CU^D^F^S^BUS1^S0^Q^F^CU^D^H^S
California1^V0^T^F^CU^D^G^S^MSan Francisco1^Y0^W^F^CU^D
^S^Porg1.example.com1^\0^Z^F^CU^D^C^S^Sca.org1.example.com 0E^B!^@����X��]�^C�j^Z^TLm��f�y^F{(i��ݭ$��^B iaDI��Y1N��p��1��-��5ѱ)���^CPr ECDSA-SHA256 %!s(x509.PublicKeyAlgorithm=3) %!s(*ecdsa.PublicKey=&{{0xc4200147c0} 0xc42033e540 0xc42033e560}) %!s(int=3) 38300758076570420811073574975538672672 {[US] [org1.example.com] [] [San Francisco] [California] [] []  ca.org1.example.com [{2.5.4.6 US} {2.5.4.8 California} {2.5.4.7 San Francisco} {2.5.4.10 org1.example.com} {2.5.4.3 ca.org1.example.com}] []} {[US] [] [] [San Francisco] [California] [] []  peer0.org1.example.com [{2.5.4.6 US} {2.5.4.8 California} {2.5.4.7 San Francisco} {2.5.4.3 peer0.org1.example.com}] []} 2017-08-10 14:02:34 +0000 UTC 2027-08-08 14:02:34 +0000 UTC %!s(x509.KeyUsage=1) [{2.5.29.15 %!s(bool=true) ^C^B^G�} {2.5.29.19 %!s(bool=true) 0^@} {2.5.29.35 %!s(bool=false) 0""� m5���$'�2YVh��{^E�^G

{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01iy5:,,,,,,,,yacovm,,,,,,,,,,release-1.0,master,,true,,,,,,,,,,,,,,,,,,,,,,,,
LastOffsetPersisted should be inserted to block in config update path,FAB-5711,20103,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,guoger,guoger,guoger,10/Aug/17 3:00 PM,14/Aug/17 2:11 PM,26/Apr/18 6:50 AM,14/Aug/17 2:11 PM,v1.0.1,,,,,,v1.1,,,fabric-orderer,,,,0,kafka,,,,,,,,"{code:java}
case msgprocessor.ConfigUpdateMsg:
	_, err := support.ProcessNormalMsg(env)
	if err != nil {
		logger.Warningf(""[channel: %s] Discarding bad config message: %s"", support.ChainID(), err)
		break
	}

	batch := support.BlockCutter().Cut()
	if batch != nil {
		block := support.CreateNextBlock(batch)
		support.WriteBlock(block, nil)
	}
	block := support.CreateNextBlock([]*cb.Envelope{env})
	support.WriteConfigBlock(block, nil)
	*timer = nil
{code}
In current implementation of config processing path, {{LastOffsetPersisted}} is not inserted into newly created block, neither is {{lastCutBlockNumber}} incremented by 1.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ixh:,,,,,,,,guoger,kchristidis,,,,,,,,,master,,,true,10/Aug/17 11:44 PM;kchristidis;https://gerrit.hyperledger.org/r/#/c/12309/,,,,,,,,,,,,,,,,,,,,,,,
LastOffsetPersisted is off by 1 in a corner case,FAB-5709,20101,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,guoger,guoger,guoger,10/Aug/17 2:52 PM,28/Aug/17 2:03 PM,26/Apr/18 6:50 AM,14/Aug/17 2:11 PM,v1.0.1,,,,,,v1.0.2,v1.1,,fabric-orderer,,,,0,kafka,,,,,,,,"{{LastOffsetPersisted}} is calculated with formula:
{code:java}
// If more than one batch is produced, exactly 2 batches are produced.
// The receivedOffset for the first batch is one less than the supplied
// offset to this function.
offset := receivedOffset - int64(len(batches)-i-1)
{code}
This is not alway correct. Consider following case:
- there are 2 tx in {{blockcutter.receiver}}'s {{pendingBatch}}, {{MaxMessageCount}} is 5
- total size of these 2 tx is _8KB_, {{PreferredMaxBytes}} is _10KB_
- now, a new tx comes in, whose {{receivedOffset}} is *x+1*, size is _5KB_
- {{Ordered}} cuts {{pendingBatch}} into *one* batch because of size overflow. Latest tx, however, is enqueued into {{pendingBatch}}
- according to the formula aforementioned, {{LastOffsetPersisted = receivedOffset - int64(len(batches)-i-1) = (x+1) - (1-0-1) = x+1}}, however the actual {{LastOffsetPersisted}} should be *x*. It ends up being off by 1

So, we need to precisely determine *if the newest tx is encapsulated into current batch or not*, in order to infer correct {{LastOffsetPersisted}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ix1:,,,,,,,,guoger,kchristidis,mastersingh24,,,,,,,,release-1.0,master,,true,"10/Aug/17 11:39 PM;kchristidis;[~guoger]: Thanks for reporting this, great catch.

We could inspect the last envelope in the last slice of envelopes returned by the blockcutter during the Orderer call and compare it to the just-processed transaction but that would be too expensive.

A better way to address this is to modify the blockcutter.Orderer signature so that it returns one additional boolean, indicating whether there is a non-empty pending batch or not. I am skeptical however because this change is a bit more drastic than I'd like it to be.

Is there an easier, less expensive, more obvious fix that I'm missing?

Also note that no matter how we end up fixing this, we need to backport the fix to 1.0.x as well.","11/Aug/17 2:15 AM;guoger;[~kchristidis] Option 2 is what I thought about too, I don't know any less invasive solution...","11/Aug/17 7:43 AM;guoger;https://gerrit.hyperledger.org/r/#/c/12349/ against master branch
https://gerrit.hyperledger.org/r/#/c/12355/ against release branch

cc [~mastersingh24]: I believe this bug affects v1.0.1 and needs to be backported. Please take a look, thank you!",11/Aug/17 10:58 AM;mastersingh24;Added 1.0.2 as fix version as well,,,,,,,,,,,,,,,,,,,,
Documentation reference byfn.sh script but no mention of where to get it,FAB-5706,20097,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,paul.sitoh,paul.sitoh,10/Aug/17 1:03 PM,26/Oct/17 4:20 PM,26/Apr/18 6:50 AM,26/Oct/17 4:20 PM,,,,,,,,,,fabric-docs,,,,0,,,,,,,,,"Please refer to this page [https://hyperledger-fabric.readthedocs.io/en/latest/build_network.html#install-prerequisites]

In the section ""want to run it now?"" it mentions the script 'byfn.sh' but no reference to where I can get it.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01iw5:,,,,,,,,markparz,paul.sitoh,wl6g11li,,,,,,,,,,,,"07/Sep/17 3:00 AM;wl6g11li;If you finish the section of *Install prerequisites*, you can find this file in the *fabric-samples\first-network* file.","26/Oct/17 4:20 PM;markparz;Yes, this was resolved with adding the cd first-network as mentioned ^^^above^^^ going to close this out.",,,,,,,,,,,,,,,,,,,,,,
PTE won't finish sometime when invoke to more than 1 org per org in a single trx,FAB-5702,20089,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wsh_bob,wsh_bob,wsh_bob,10/Aug/17 6:15 AM,10/Aug/17 6:38 AM,26/Apr/18 6:50 AM,10/Aug/17 6:38 AM,,,,,,,,,,fabric-quality,,,,0,,,,,,,,,evtRcv has been double counted in an org scope,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,0|i01iul:,,,,,,,,wsh_bob,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
unable to install packages from fabric-chaincode-node repo,FAB-5699,20086,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,rameshthoomu,rameshthoomu,09/Aug/17 8:48 PM,28/Aug/17 11:27 AM,26/Apr/18 6:50 AM,17/Aug/17 7:17 PM,,,,,,,v1.1,,,,,,,0,node-SDK,,,,,,,,"getting below error while executing `npm install` from fabric-chaincode-node root directory.
{code:java}
00:12:27.335 npm ERR! addLocal Could not install /w/workspace/fabric-chaincode-node-verify-x86_64/gopath/src/github.com/hyperledger/src{code}
Observed extra ../src in the below line causing above error

https://github.com/hyperledger/fabric-chaincode-node/blob/906a87ca58fe5b0943f321806e54eb9b297a5090/package.json#L13",Jenkins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01itx:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,17/Aug/17 7:17 PM;rameshthoomu;patch has been submitted and merged.,,,,,,,,,,,,,,,,,,,,,,,
Cannot verify signature. Error is: Wrong key usage using Java SDK,FAB-5696,20083,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ptippett,ptippett,ptippett,09/Aug/17 7:57 PM,18/Oct/17 6:00 PM,26/Apr/18 6:50 AM,18/Oct/17 6:00 PM,,,,,,,,,,fabric-ca,,,,0,HSBN,,,,,,,,"From everything I'm seeing it's looking like Java isn't having a good time with the certs it's getting from the fabric CA. The ""Wrong key usage"" is thrown in the `Signature.initVerify()` method in the JDK which apparently complains if the certificate is marked as not being appropriate for signing (see line 473 of http://www.atetric.com/atetric/javadoc/openjdk/jdk/7u79/src-html/java/security/Signature.html). I'm getting this error on both a Linux VM using OpenJDK and on my Mac with the IBM JDK.

I managed to get the info of the certificate the SDK was erroring on. (I had to do a little fiddling with it because the cert as displayed in the Java exception was giving me `-----BEGIN -----` instead of `-----BEGIN CERTIFICATE-----`, like wise for `END`). It's looking like the cert I'm getting from the Bluemix instance of the ledger when trying to send a transaction proposal in fact does not support digital signatures (though it supports certificate signing).

 

Here's the stack trace from Java:

ERROR 2017-08-09 14:12:19,717 7222 org.hyperledger.fabric.sdk.security.CryptoPrimitives [main] Cannot verify signature. Error is: Wrong key usage
Certificate: 2D2D...2D0A
org.hyperledger.fabric.sdk.exception.CryptoException: Cannot verify signature. Error is: Wrong key usage
Certificate: 2D2D...2D0A
 at org.hyperledger.fabric.sdk.security.CryptoPrimitives.verify(CryptoPrimitives.java:187)
 at org.hyperledger.fabric.sdk.ProposalResponse.verify(ProposalResponse.java:106)
 at org.hyperledger.fabric.sdk.Channel.sendProposalToPeers(Channel.java:2040)
 at org.hyperledger.fabric.sdk.Channel.sendProposal(Channel.java:1955)
 at org.hyperledger.fabric.sdk.Channel.sendTransactionProposal(Channel.java:1889)
 at com.ibm.hyperledger.HyperledgerClient.storeDocument(HyperledgerClient.java:134)
 at com.ibm.hyperledger.Main.testCommunications(Main.java:72)
 at com.ibm.hyperledger.Main.main(Main.java:22)
Caused by: java.security.InvalidKeyException: Wrong key usage
 at java.security.Signature.initVerify(Signature.java:501)
 at org.hyperledger.fabric.sdk.security.CryptoPrimitives.verify(CryptoPrimitives.java:180)
 ... 7 more
ERROR 2017-08-09 14:12:19,718 7223 org.hyperledger.fabric.sdk.ProposalResponse [main] verify: Cannot retrieve peer identity from ProposalResponse. Error is: Cannot verify signature. Error is: Wrong key usage
Certificate: 2D2D...2D0A
org.hyperledger.fabric.sdk.exception.CryptoException: Cannot verify signature. Error is: Wrong key usage
Certificate: 2D2D...2D0A
 at org.hyperledger.fabric.sdk.security.CryptoPrimitives.verify(CryptoPrimitives.java:187)
 at org.hyperledger.fabric.sdk.ProposalResponse.verify(ProposalResponse.java:106)
 at org.hyperledger.fabric.sdk.Channel.sendProposalToPeers(Channel.java:2040)
 at org.hyperledger.fabric.sdk.Channel.sendProposal(Channel.java:1955)
 at org.hyperledger.fabric.sdk.Channel.sendTransactionProposal(Channel.java:1889)
 at com.ibm.hyperledger.HyperledgerClient.storeDocument(HyperledgerClient.java:134)
 at com.ibm.hyperledger.Main.testCommunications(Main.java:72)
 at com.ibm.hyperledger.Main.main(Main.java:22)
Caused by: java.security.InvalidKeyException: Wrong key usage
 at java.security.Signature.initVerify(Signature.java:501)
 at org.hyperledger.fabric.sdk.security.CryptoPrimitives.verify(CryptoPrimitives.java:180)
 ... 7 more
ERROR 2017-08-09 14:12:19,719 7224 main [main] Main errored.
java.lang.Exception: Invoke transaction proposal failed
 at com.ibm.hyperledger.HyperledgerClient.storeDocument(HyperledgerClient.java:143)
 at com.ibm.hyperledger.Main.testCommunications(Main.java:72)
 at com.ibm.hyperledger.Main.main(Main.java:22)

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01it9:,,,,,,,,ashutosh_kumar,ptippett,rickr,smithbk,,,,,,,,,,,09/Aug/17 8:12 PM;rickr;How is this different when running the Integration suite that passes with using the fabricca ?,"09/Aug/17 8:19 PM;rickr;Did you follow the README.md and the java defines needed for IBM JDK?

Those are for TLS .. should not apply but make sure they're set","09/Aug/17 8:45 PM;jimthematrix;had a discussion with [~ashku], this is the problem with the certificate:
{code}
X509v3 extensions:
            X509v3 Key Usage: critical
                Certificate Sign
            X509v3 Basic Constraints: critical
                CA:FALSE
{code}

If the key usage is ""Certificate Sign"" then the next field must be ""CA:TRUE"". Or the key usage should have been ""Digital Signature"".

Essentially Java is pointing out a legitimate problem with the certificate. Please have the developer double check on the certificate and how it got generated.",09/Aug/17 8:45 PM;rickr;Talking to [~jimthematrix]  and [~ashku] this certificate which you did no include in the defect is not valid for signing.  Assigning defect to you,"09/Aug/17 9:07 PM;ashutosh_kumar;For signature validation , the Key Usage should be Digital Signature and CA should be false.Java is unforgiving , unfortunately.",10/Aug/17 12:48 AM;ptippett;[~smithbk] Hi Keith.  Is this something we can control in the CA template or does it need a fix in the CA? ,"10/Aug/17 3:30 PM;smithbk;How was this cert created?  The default usage should be ""digital signature"" (see below).  Did you add new profiles or pass in a different profile name to your enroll request?

signing:
    default:
      usage:
        - digital signature
      expiry: 8760h
    profiles:
      ca:
         usage:
           - cert sign
         expiry: 43800h
         caconstraint:
           isca: true
           maxpathlen: 0
      tls:
         usage:
            - signing
            - key encipherment
            - server auth
            - client auth
            - key agreement
         expiry: 8760h
","10/Aug/17 5:53 PM;smithbk;Will just showed me your config and it is not what we generate by default.
The value of ""signing.default.usage"" should be ""digital signature"" not ""cert sign"".",14/Aug/17 6:30 PM;rickr;Moved to fabric-ca – update if it turns out to be sdk issue,"26/Sep/17 4:41 PM;smithbk;Paul, can you provide an update?  Is this problem resolved?  Was your fabric-ca-server-config.yaml incorrect?",18/Oct/17 6:00 PM;smithbk;Closed because of no response.  Pls reopen if there is still a problem,,,,,,,,,,,,,
Registration of the empty string affiliation should not return an error,FAB-5679,20065,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,smithbk,smithbk,09/Aug/17 1:54 PM,12/Sep/17 1:58 PM,26/Apr/18 6:50 AM,05/Sep/17 1:47 PM,,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"The empty string is the root of the affiliation hierarchy.
The empty string affiliation should be recognized as an affiliation on the following command, and assuming the user is authorized to register an identity with this affiliation, it should not return an error as shown below.

{code}
# fabric-ca-client enroll -u http://admin:adminpw@localhost:7054
# fabric-ca-client register --id.name foo --id.type peer --id.affiliation """"
2017/08/09 09:37:38 [INFO] User provided config file: /Users/keith/.fabric-ca-client/fabric-ca-client-config.yaml
2017/08/09 09:37:38 [INFO] Configuration file location: /Users/keith/.fabric-ca-client/fabric-ca-client-config.yaml
Error: Registration request does not have an affiliation
{code}

The easiest work-around is to use the bootstrap username and password to enroll since this identity has the empty string as it's affiliation.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01iph:,,,,,,,,denyeart,skarim,smithbk,,,,,,,,master,,,true,16/Aug/17 1:25 PM;skarim;https://gerrit.hyperledger.org/r/#/c/12363/,"12/Sep/17 1:58 PM;denyeart;Bugs don't need a release planning label, removed.",,,,,,,,,,,,,,,,,,,,,,
"Unable to instantiate example04 and example05 chaincode - ""use of vendored package not allowed""",FAB-5663,20036,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,latitiah,latitiah,08/Aug/17 4:02 PM,05/Jan/18 2:32 AM,26/Apr/18 6:50 AM,13/Oct/17 11:16 PM,v1.0.1,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,"*Fabric Commit:* d788450
*Chaincode Commit:* 7a480cec898f89d2e41c4a3ddb70f4124d922374
*API:* cli

When attempting to instantiate example04 and example05 chaincode using the CLI, the following error is received:

{code:None}
Error: Error endorsing chaincode: rpc error: code = Unknown desc = Error starting container: Failed to generate platform-specific docker build: Error returned from build: 1 ""package github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example05
      	imports github.com/hyperledger/fabric/core/chaincode/shim
      	imports github.com/hyperledger/fabric/core/comm
      	imports google.golang.org/grpc
      	imports google.golang.org/grpc/status
      	imports google.golang.org/genproto/googleapis/rpc/status
      	imports github.com/golang/protobuf/ptypes/any
      	imports github.com/golang/protobuf/proto: use of vendored package not allowed
      package github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example05
      	imports github.com/hyperledger/fabric/core/chaincode/shim
      	imports github.com/hyperledger/fabric/common/ledger
      	imports github.com/hyperledger/fabric/protos/common
      	imports github.com/hyperledger/fabric/common/util
      	imports github.com/golang/protobuf/ptypes/timestamp: use of vendored package not allowed
{code}

This worked in previous versions using the system behave framework.",,,,,,,,,,,,,,,,,FAB-7608,,,27/Sep/17 3:33 PM;Ratnakar;peer-logs.txt;https://jira.hyperledger.org/secure/attachment/12146/peer-logs.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01il1:,,,,,,,,Hangyu_FJH,latitiah,muralisr,Nishi,Ratnakar,scottz,,,,,master,,,true,"08/Aug/17 4:04 PM;latitiah;One of the failing scenarios:
{code:None}
Scenario: FAB-3509: Test chaincode calling chaincode - fabric/examples/chaincode_example04
    Given I have a bootstrapped fabric network of type kafka
    And I wait ""60"" seconds
    When a user deploys chaincode at path ""github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example04"" with [""init"",""Event"",""1""] with name ""myex04""
    And I wait ""30"" seconds
    Then the chaincode is deployed
    When a user deploys chaincode at path ""github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02"" with [""init"",""a"",""1000"",""b"",""2000""] with name ""myex02_a"" on channel ""channel2""
    And I wait ""30"" seconds
    Then the chaincode is deployed
    When a user queries on the chaincode named ""myex02_a"" on channel ""channel2"" with args [""query"",""a""]
    Then a user receives a success response of 1000
    When a user queries on the chaincode named ""myex04"" with args [""query"",""Event"", ""myex02_a"", ""a"", ""channel2""]
    Then a user receives a success response of 1000
{code}

(executed using code located in CR: https://gerrit.hyperledger.org/r/#/c/10961/ )","08/Aug/17 5:31 PM;latitiah;Failing scenarios when executing system behave tests:
  chaincodes.feature:39  FAB-3509: Test chaincode calling chaincode - fabric/examples/chaincode_example04
  chaincodes.feature:55  FAB-3510-1: Test chaincode calling chaincode - fabric/examples/chaincode_example05
  chaincodes.feature:71  FAB-3510-2: Test chaincode calling chaincode - fabric/examples/chaincode_example05

Steps: 
1. checkout code located in CR https://gerrit.hyperledger.org/r/#/c/10961/ 
2. go to /path/to/fabric/test/feature
3. type ""behave chaincodes.feature"" (you must have behave installed using python 2.7 with prereqs - see README in directory)","09/Sep/17 4:17 PM;muralisr;[~latitiah] Vendoring example04 and example05 solves this.

so 

{code:java}
cd examples/chaincode/go/chaincode_example04
govendor init
govendor add +external
{code}


and

{code:java}
cd examples/chaincode/go/chaincode_example05
govendor init
govendor add +external
{code}

I'll provide a CR with this fix soon.",12/Sep/17 7:09 PM;muralisr;Assigning to [~Nishi] ,12/Sep/17 7:18 PM;muralisr;a misunderstanding... assigning it back to self.,"23/Sep/17 7:49 PM;scottz;We tagged some Behave tests that are failing in fabric-test repo, so (per Latitia's earlier instructions) we can use them to verify this issue by executing:

behave -n FAB-5663

 ","27/Sep/17 3:34 PM;Ratnakar;[~muralisr]

I ran this with e2e_cli setup and I do see the following errors in [^peer-logs.txt] on commit level *42da28ddc897d40804c5c009ebe9c683cdb7a82d*

 
{code:java}
2017-09-27 15:08:22.152 UTC [chaincode] 2 -> ERRO 950 [06162488] C-call-C mycc02 on channel mychannel1 failed check ACL [proposal_bytes:""\n\221\007\nc\010\003\032\013\010\346\375\256\316\005\020\351\367\220G\""\004xyz2*@06162488c56d3bac0a2118c9f2f8c5d525742ba06f7edcdcfa1f8d7bd561bd17:\n\022\010\022\006mycc05\022\251\006\n\214\006\n\007Org2MSP\022\200\006-----BEGIN -----\nMIICGjCCAcCgAwIBAgIRAKJMBejdYnNJ3k2+AGK7wTowCgYIKoZIzj0EAwIwczEL\nMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBG\ncmFuY2lzY28xGTAXBgNVBAoTEG9yZzIuZXhhbXBsZS5jb20xHDAaBgNVBAMTE2Nh\nLm9yZzIuZXhhbXBsZS5jb20wHhcNMTcwOTI3MTUwMTI1WhcNMjcwOTI1MTUwMTI1\nWjBbMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMN\nU2FuIEZyYW5jaXNjbzEfMB0GA1UEAwwWQWRtaW5Ab3JnMi5leGFtcGxlLmNvbTBZ\nMBMGByqGSM49AgEGCCqGSM49AwEHA0IABEIADK+B96l1kIpZX1Ad4ai8b3/ezH+N\nmCFP6uPkimXsL6Q+fq1pAS95jBGNnxWHFftV1ycUfEguGXww32OCNq+jTTBLMA4G\nA1UdDwEB/wQEAwIHgDAMBgNVHRMBAf8EAjAAMCsGA1UdIwQkMCKAILHulxpw3DtO\niiCRIUnbB8/X1JDMRmnWyQA8a21CUmrJMAoGCCqGSM49BAMCA0gAMEUCIQCC/VlU\nQyP1NsiqmCVRypuExj1AiI9jTSwnBZXgxgW1OgIgLVxz3DNvb3u+cZhRbCjRQf+D\nfe8RMt9nrOhXlEguSAg=\n-----END -----\n\022\030\253\214\245\366O(U\273\260&\200k\036\356\247\275\220\320K(X*\210M\0222\n0\n.\010\001\022\010\022\006mycc05\032 \n\005query\n\006mycc02\n\003sum\n\nmychannel1"" signature:""0D\002 $\313\\\250\257\""c\2430&\021\232\346K\310!\363\\O\\@\210\326\275%O\202\237\202\324\233\375\002 o\260C\240\317\346\007z\025\257\355\360bR5\306\270\234\217`CH\345\231\335\371\023b4\264\\\324"" ]: [Failed to get policy manager for channel [mychannel1]]
2017-09-27 15:08:22.152 UTC [chaincode] 1 -> DEBU 951 [06162488]enterBusyState trigger event ERROR
2017-09-27 15:08:22.152 UTC [chaincode] processStream -> DEBU 952 [06162488]Move state message ERROR
2017-09-27 15:08:22.152 UTC [chaincode] HandleMessage -> DEBU 953 [06162488]Fabric side Handling ChaincodeMessage of type: ERROR in state ready
2017-09-27 15:08:22.152 UTC [chaincode] HandleMessage -> DEBU 954 [06162488c56d3bac0a2118c9f2f8c5d525742ba06f7edcdcfa1f8d7bd561bd17]HandleMessage- COMPLETED. Notify
2017-09-27 15:08:22.153 UTC [chaincode] notify -> DEBU 955 notifying Txid:06162488c56d3bac0a2118c9f2f8c5d525742ba06f7edcdcfa1f8d7bd561bd17
2017-09-27 15:08:22.153 UTC [chaincode] processStream -> DEBU 956 [06162488]sending state message ERROR
2017-09-27 15:08:22.153 UTC [chaincode] Execute -> DEBU 957 Exit
2017-09-27 15:08:22.153 UTC [chaincode] ExecuteChaincode -> ERRO 958 Error executing chaincode: transaction returned with failure: Failed to get policy manager for channel [mychannel1]
2017-09-27 15:08:22.153 UTC [endorser] callChaincode -> DEBU 959 Exit
2017-09-27 15:08:22.153 UTC [endorser] simulateProposal -> ERRO 95a failed to invoke chaincode name:""mycc05"" on transaction 06162488c56d3bac0a2118c9f2f8c5d525742ba06f7edcdcfa1f8d7bd561bd17, error: transaction returned with failure: Failed to get policy manager for channel [mychannel1]
github.com/hyperledger/fabric/core/chaincode.Execute
 /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/exectransaction.go:83
github.com/hyperledger/fabric/core/chaincode.ExecuteChaincode
 /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincodeexec.go:85
github.com/hyperledger/fabric/core/endorser.(*Endorser).callChaincode
 /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:125
github.com/hyperledger/fabric/core/endorser.(*Endorser).simulateProposal
 /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:265
github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal
 /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:480
github.com/hyperledger/fabric/core/handlers/auth.(*filter).ProcessProposal
 /opt/gopath/src/github.com/hyperledger/fabric/core/handlers/auth/auth.go:38
github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler
 /opt/gopath/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:112
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC
 /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:781
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream
 /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:981
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1
 /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:551
runtime.goexit
 /opt/go/src/runtime/asm_amd64.s:2337
error executing chaincode
{code}
 

Do we need to make specific changed to avoid these ACL errors ?","28/Sep/17 11:55 AM;muralisr;[~Ratnakar] I believe what you are seeing is the result of Serviceability work from [~wlahti] where stack traces are dumped with errors. 

Not sure what you are running into but the original error - unable to create ex05 and ex04 - is gone I think. If you agree, that takes care of this JIRA.","28/Sep/17 2:03 PM;Ratnakar;[~muralisr] Apologies Murali.

This is not the issue described in this bug and seems a different issue. 
I will create a new Jira Item for this.","06/Oct/17 4:01 AM;Hangyu_FJH;Same thing happened with example passthru

I commit a changeSet by referring to [~muralisr] 's fix

https://gerrit.hyperledger.org/r/#/c/14247/",,,,,,,,,,,,,,
check duplicated signatures when evaluating policies,FAB-5662,20035,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,xixuejia,xixuejia,xixuejia,08/Aug/17 3:40 PM,28/Aug/17 11:26 AM,26/Apr/18 6:50 AM,09/Aug/17 9:46 AM,v1.0.0,,,,,,Abandoned,,,fabric-peer,,,,0,,,,,,,,,"Regarding to [comments|https://jira.hyperledger.org/browse/FAB-4252?focusedCommentId=26251&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-26251] in FAB-4252, the fix for FAB-4252 was doing the check when evaluating endorsement policy and it leaves out the same issue for other policies evaluation, like system related policies, instantiate policy, etc...

A more reasonable fix should do the check at policy evaluation level so that all policies evaluation could reuse this security check",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ikt:,,,,,,,,xixuejia,,,,,,,,,,,,,,09/Aug/17 9:22 AM;xixuejia;https://gerrit.hyperledger.org/r/#/c/12273/,09/Aug/17 9:47 AM;xixuejia;implementing in https://jira.hyperledger.org/browse/FAB-5558,,,,,,,,,,,,,,,,,,,,,,
Make chaincode accesscontrol use BCCSP,FAB-5657,20024,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,08/Aug/17 8:18 AM,08/Aug/17 9:40 AM,26/Apr/18 6:50 AM,08/Aug/17 9:40 AM,v1.1,,,,,,v1.1,,,fabric-crypto,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01iit:,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Gossip-non-leader peer unexpectedly receives blocks from a source other than gossip-leader-peer,FAB-5651,20018,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,gennadyl,AdnanChoudhury,AdnanChoudhury,07/Aug/17 9:35 PM,28/Aug/17 2:37 PM,26/Apr/18 6:50 AM,28/Aug/17 2:37 PM,,,,,,,,,,fabric-gossip,,,,0,gossip,gossip_component,quality,,,,,,"A non-leader peer is expected to receive blocks only from the leader peer, but it is observed that it receives blocks from the orderer directly.

*Steps:*
 1) Spin up a 2org-4peer network (please see attached docker-compose and configtx file). peer0 of both org is defined as anchor and leader of corresponding org. Gossip leader election is false in all 4 peers.
 2) Install and invoke chaincode ""example02""
 3)After few seconds, stop all the peers except org2 leader (i.e. peer0.org2.example.com is alive, others 3 peers are stopped).
 4) 3 transactions on chaincode via peer0org2.
 5) In the peer0org2, Corrupt the last block in ledgerfile (/var/hyperledger/production/ledgersData/chains/chains/behavesystest/blockfile_000000) 
 6) Bring back up the non-leader of org2 (peer1Org2.example.com) 
 7) Query this non-leader peer.

*Expected*: 
 The non-leader is supposed to get blocks from the leader only, and thus should have a corrupted/incomplete ledger.

*Observed*:
 The non-leader peer contains a correct/complete ledger. If the orderer is turned off before non-leader comes back up, it ends up with the expected in-complete ledger, which indicates that  its getting the blocks directly from the orderer.

Non-leader and leader peer logs are attached.",,,,,,,,,,,,,,,,,,,,07/Aug/17 9:35 PM;AdnanChoudhury;configtx.yaml;https://jira.hyperledger.org/secure/attachment/11840/configtx.yaml,07/Aug/17 9:35 PM;AdnanChoudhury;docker-compose-solo.yml;https://jira.hyperledger.org/secure/attachment/11839/docker-compose-solo.yml,09/Aug/17 3:40 PM;AdnanChoudhury;leader-ledger_2ndrun;https://jira.hyperledger.org/secure/attachment/11852/leader-ledger_2ndrun,09/Aug/17 3:40 PM;AdnanChoudhury;leader-ledger_3rdrun;https://jira.hyperledger.org/secure/attachment/11853/leader-ledger_3rdrun,07/Aug/17 9:33 PM;AdnanChoudhury;leader-log.txt;https://jira.hyperledger.org/secure/attachment/11842/leader-log.txt,09/Aug/17 3:40 PM;AdnanChoudhury;leader-log_2ndrun.txt;https://jira.hyperledger.org/secure/attachment/11854/leader-log_2ndrun.txt,09/Aug/17 3:40 PM;AdnanChoudhury;leader-log_3rdrun.txt;https://jira.hyperledger.org/secure/attachment/11855/leader-log_3rdrun.txt,09/Aug/17 3:40 PM;AdnanChoudhury;non-leader-ledger_2ndrun;https://jira.hyperledger.org/secure/attachment/11856/non-leader-ledger_2ndrun,09/Aug/17 3:40 PM;AdnanChoudhury;non-leader-ledger_3rdrun;https://jira.hyperledger.org/secure/attachment/11857/non-leader-ledger_3rdrun,07/Aug/17 9:33 PM;AdnanChoudhury;non-leader-log.txt;https://jira.hyperledger.org/secure/attachment/11841/non-leader-log.txt,09/Aug/17 3:40 PM;AdnanChoudhury;non-leader-log_2ndrun.txt;https://jira.hyperledger.org/secure/attachment/11858/non-leader-log_2ndrun.txt,09/Aug/17 3:40 PM;AdnanChoudhury;non-leader-log_3rdrun.txt;https://jira.hyperledger.org/secure/attachment/11859/non-leader-log_3rdrun.txt,,,,,,,,,,,,,,,,,,,,0|i01ihh:,,,,,,,,AdnanChoudhury,gennadyl,yacovm,,,,,,,,,,,,07/Aug/17 9:38 PM;AdnanChoudhury;[~C0rWin],"09/Aug/17 3:40 PM;AdnanChoudhury;Attaching logs from 2 more runs, they differ in how the ledgerfile is edited in step 5:
1) in the 2nd run, In the leader peer ledger file,  values of one of the invokes is edited.
2) in the 3rd run, In the leader peer ledger file,  The entire ledger file contents are deleted except 1st line.

The non-leader, in both cases, end up with error-free ledger (ledgers for both runs are also attached.)","16/Aug/17 12:57 PM;gennadyl;Hi [~AdnanChoudhury]. Based what I saw in logs, peer1Org2.example.com get missing blocks using pull mechanism from peer0Org2.example.com, so system works as expected. Pull mechanism keep in-memory blocks cache (for latest blocks) and this way not affected by blocks stored on disk.","16/Aug/17 1:03 PM;gennadyl;In any case, non-leader can't have corrupted ledger, only in-complete - each block validated in state transfer/pull upon receive.  
Here how last block verification fails during state transfer:

017-08-07 21:30:14.087 UTC [gossip/state] handleStateResponse -> WARN a37 Error verifying block with sequence number 4, due to Header.DataHash is different from Hash(block.Data) for block with id [4] on channel [behavesystest]
2017-08-07 21:30:14.087 UTC [gossip/state] requestBlocksInRange -> WARN a38 Wasn't able to process state response for blocks [4...4], due to Header.DataHash is different from Hash(block.Data) for block with id [4] on channel [behavesystest]","16/Aug/17 2:14 PM;AdnanChoudhury;Thanks for the update [~gennadyl] Upon closer look at the log, came to the same conclusion few hours back, that it is indeed receiving all the blocks from the leader peer (peer0Org2).
 Just a clarification, when you mention that pull mechanism keep in-memory blocks cache, do you mean the cache is in the peer that *has* the blocks, *not* in the peer that requests the pull, right?
 In any case, I would now consider this jira ""working as  expected"" and not a bug. ","16/Aug/17 2:46 PM;AdnanChoudhury;-Let me run some additional test cases to confirm, will update soon.-","16/Aug/17 3:18 PM;gennadyl;Yes, in peer that has the blocks","16/Aug/17 3:20 PM;AdnanChoudhury;[~gennadyl] thanks, Is there a way to know/calculate how many blocks will be in memory?","17/Aug/17 6:42 AM;gennadyl;[~AdnanChoudhury]
Yes, it is possible. The block stay in memory for core.peer.gossip.pullInterval * 100 seconds. In current configuration it set to 400 seconds, but give it some extra time, to make eviction goroutine time to run. In addition, cache has limited capacity - core.peer.gossip.maxBlockCountToStore, now it is 100 blocks. ",17/Aug/17 3:31 PM;AdnanChoudhury;Thanks [~gennadyl],28/Aug/17 2:33 PM;yacovm;can we close this? or - what is the status on this?,"28/Aug/17 2:37 PM;AdnanChoudhury;Closing it.

 ",,,,,,,,,,,,
The default CLI timeout is wrong.,FAB-5640,19985,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,TopJohn,TopJohn,07/Aug/17 3:38 AM,03/Dec/17 3:15 PM,26/Apr/18 6:50 AM,03/Dec/17 3:15 PM,v1.0.0,,,,,,v1.0.5,v1.1,,fabric-samples,,,,0,fabric-cli,,,,,,,,"CLI timeout duration is in second not in microseconds.The defaults to 10000 ,it means the CLI container should exit after 10000 seconds,I think the ordinal design is 10 seconds eq 10000 millseconds,so I suggest to set 10 seconds.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ia5:,,,,,,,,denyeart,mastersingh24,TopJohn,,,,,,,,,,,,"05/Nov/17 12:48 PM;mastersingh24;[~TopJohn]  - Do you want to fix this?  If not, just assign it to me.  I have a fix ready anyway",27/Nov/17 4:21 AM;denyeart;[~TopJohn] Do you intend to fix?,"03/Dec/17 2:37 PM;mastersingh24;https://gerrit.hyperledger.org/r/15885   (master)
https://gerrit.hyperledger.org/r/15883   (release)",,,,,,,,,,,,,,,,,,,,,
how can I convert the byte array of currentBlockHash to string,FAB-5639,19984,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,oujunketu,oujunketu,07/Aug/17 12:52 AM,05/Nov/17 11:09 AM,26/Apr/18 6:50 AM,05/Nov/17 11:09 AM,v1.0.0,,,,,,Not a Bug,,,fabric-sdk-node,,,,0,,,,,,,,,"Hello,

I've checked the type definitions in the latest Hyperledger Fabric SDK document. It seems that only BlockchainInfo includes currentBlockHash and previousBlockHash which are array<bytes> type.

However, I want them in string type but I do not know where I can get them. Shall I convert them to string by myself and how? 
And I got the array<bytes> value of currentBlockHash  which is the same as the value of previousBlockHash in my test. (see the attachment.). That is strange.

I need your help.

Thank you",,,,,,,,,,,,,,,,,,,,07/Aug/17 12:36 AM;oujunketu;ret.PNG;https://jira.hyperledger.org/secure/attachment/11835/ret.PNG,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01i9x:,,,,,,,,mastersingh24,oujunketu,,,,,,,,,,,,,"30/Sep/17 7:13 PM;mastersingh24;You should be able to use 
{code:java}
Buffer.from(...).toString()
{code}
",05/Nov/17 11:08 AM;mastersingh24;This has been out there for over a month with no feedback.  [~oujunketu] - I'm going to close this.  If the above did not resolve the issue either re-open or post in #fabric-sdk-node in RocketChat,,,,,,,,,,,,,,,,,,,,,,
Add logging to deliverservice/client.go,FAB-5633,19978,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,06/Aug/17 12:00 PM,28/Aug/17 9:07 PM,26/Apr/18 6:50 AM,12/Aug/17 1:39 PM,v1.0.0,v1.0.1,,,,,v1.0.2,v1.1,,fabric-peer,,,,0,,,,,,,,,"The deliveryservice/client.go stores retry logic that plays a role when the ordering service node is unreachable or malfunctioning. 

It lacks logging, and thus makes it hard to analyze postmortem and live situations.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01i8l:,,,,,,,,yacovm,,,,,,,,,,release-1.0,master,,true,06/Aug/17 12:12 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/12181/,,,,,,,,,,,,,,,,,,,,,,,
Make sure couchdb is running while starting peer for FabCar sample application.,FAB-5631,19976,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,06/Aug/17 9:53 AM,06/Aug/17 12:31 PM,26/Apr/18 6:50 AM,06/Aug/17 12:31 PM,,,,,,,,,,,,,,0,,,,,,,,,"Currently {{docker-compose.yaml}} file of the basic-network setup doesn't defines dependencies between peer and couch db container. Which might lead to the errors in cases where it takes few moments longer to couchdb container to start, for example issue reported at [SO|https://stackoverflow.com/questions/45530104/hyperledger-fabric-fabcar-error/45530696#45530696].

{code}
  peer0.org1.example.com:
    container_name: peer0.org1.example.com
    image: hyperledger/fabric-peer:x86_64-1.0.0
    environment:
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      - CORE_PEER_ID=peer0.org1.example.com
      - CORE_LOGGING_PEER=debug
      - CORE_CHAINCODE_LOGGING_LEVEL=DEBUG
      - CORE_PEER_LOCALMSPID=Org1MSP
      - CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/msp/peer/
      - CORE_PEER_ADDRESS=peer0.org1.example.com:7051
      # # the following setting starts chaincode containers on the same
      # # bridge network as the peers
      # # https://docs.docker.com/compose/networking/
      - CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=${COMPOSE_PROJECT_NAME}_basic
      - CORE_LEDGER_STATE_STATEDATABASE=CouchDB
      - CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=couchdb:5984
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric
    command: peer node start
    # command: peer node start --peer-chaincodedev=true
    ports:
      - 7051:7051
      - 7053:7053
    volumes:
        - /var/run/:/host/var/run/
        - ./crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/msp:/etc/hyperledger/msp/peer
        - ./crypto-config/peerOrganizations/org1.example.com/users:/etc/hyperledger/msp/users
        - ./config:/etc/hyperledger/configtx
    depends_on:
      - orderer.example.com
    networks:
      - basic
{code}

Therefore need to add {{couchdb}} into {{depends_on}} section to make sure couchdb started prior to the peer container

{code}
    depends_on:
      - orderer.example.com
      - couchdb
{code}

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01i85:,,,,,,,,C0rWin,,,,,,,,,,,,,,06/Aug/17 12:31 PM;C0rWin;https://gerrit.hyperledger.org/r/#/c/12179/,,,,,,,,,,,,,,,,,,,,,,,
Missing index checks in endorser.go,FAB-5627,19970,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,04/Aug/17 9:01 PM,05/Aug/17 12:32 PM,26/Apr/18 6:50 AM,05/Aug/17 12:32 PM,v1.0.0,v1.0.1,,,,,v1.0.1,,,fabric-peer,,,,0,,,,,,,,,"There is a missing check of *cis.ChaincodeSpec.Input.Args*'s length

Can cause a peer to crash:
{code}
panic: runtime error: index out of range

goroutine 259 [running]:
panic(0xbf31c0, 0xc4200100c0)
        /home/yacovm/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/core/endorser.(*Endorser).disableJavaCCInst(0xc42026e950, 0xc421b56300, 0xc421b5e000, 0x0, 0x4)
        /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:189 +0x275
github.com/hyperledger/fabric/core/endorser.(*Endorser).simulateProposal(0xc42026e950, 0x7feff1964788, 0xc421afbdd0, 0x0, 0x0, 0xc421b50dc0, 0x40, 0xc421afbec0, 0xc421b12e60, 0xc421b56300, ...)
        /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:216 +0x2e0
github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal(0xc42026e950, 0x7feff1964788, 0xc421afbdd0, 0xc421afbec0, 0x0, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:454 +0x70c
github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler(0xc88320, 0xc42026e950, 0x7feff1964788, 0xc421afbdd0, 0xc421b12dc0, 0x0, 0x0, 0x0, 0xd6e1c3, 0xd6e1c2)
        /opt/gopath/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:112 +0x27d
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC(0xc4201a28c0, 0x131a540, 0xc421b08580, 0xc4201b0100, 0xc420225c50, 0x12f8ea0, 0xc421afbe60, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:797 +0xd14
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc4201a28c0, 0x131a540, 0xc421b08580, 0xc4201b0100, 0xc421afbe60)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:997 +0x7a0
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc421b109c0, 0xc4201a28c0, 0x131a540, 0xc421b08580, 0xc4201b0100)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:561 +0xab
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:562 +0xa3

{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01i6t:,,,,,,,,mastersingh24,yacovm,,,,,,,,,release-1.0,master,,true,"05/Aug/17 9:26 AM;mastersingh24;[https://gerrit.hyperledger.org/r/#/c/12155/] for master

[https://gerrit.hyperledger.org/r/12165] for release",,,,,,,,,,,,,,,,,,,,,,,
"InstallProposalBuilder always throw exception ""chaincodePath must be null for Java chaincode""",FAB-5610,19945,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,guo,guo,04/Aug/17 9:41 AM,28/Aug/17 9:35 AM,26/Apr/18 6:50 AM,08/Aug/17 1:59 PM,v1.0.0,,,,,,WON'T FIX,,,fabric-sdk-java,,,,0,,,,,,,,,"also 1.0.0 not support java chaincode, but it will be later, there is one bug for java sdk 

in org.hyperledger.fabric.sdk.transaction.InstallProposalBuilder.java 

line 144-146:

// Verify that chaincodePath is null
 if (null != chaincodePath) \{
 throw new IllegalArgumentException(""chaincodePath must be null for Java chaincode"");
 }

if chaincodePath not null it will throw exception, but when we set it as null like this way :

installProposalRequest.setChaincodePath(null);

it still not work,

because in Channel.java  

line 1234 : installProposalbuilder.chaincodePath(installProposalRequest.getChaincodePath()); 

it will call TransactionRequest's getChaincodePath,

let's see org.hyperledger.fabric.sdk.TransactionRequest.java

line: 113-115  

public String getChaincodePath() \{
 return null == chaincodePath ? """" : chaincodePath;
 }

so chaincodePath will be always """"  if set it as null 

need change in org.hyperledger.fabric.sdk.transaction.InstallProposalBuilder.java 

line 144-146 like :

// Verify that chaincodePath is null
 if (null !=StringUtils.trimToNull(chaincodePath)) \{
 throw new IllegalArgumentException(""chaincodePath must be null for Java chaincode"");
 }

 

 

 ",,,,,,,,,,,,,,,,FAB-5440,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01i19:,,,,,,,,guo,rickr,,,,,,,,,,,,,08/Aug/17 1:59 PM;rickr;Not fixing till Java Chaincode is offically supported in the Fabric.,,,,,,,,,,,,,,,,,,,,,,,
[Daily Tests] Auction Chaincode tests are failing,FAB-5608,19939,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sandp125,rameshthoomu,rameshthoomu,03/Aug/17 10:11 PM,11/Aug/17 1:50 PM,26/Apr/18 6:50 AM,11/Aug/17 1:50 PM,v1.0.0-rc1,,,,,,v1.0.2,,,,,,,0,,,,,,,,,"[Daily Tests] Auction Chaincode tests are failing. Observed create channel is successful but Join channel is failed. Below are the logs

[https://jenkins.hyperledger.org/view/Daily/job/fabric-daily-tests-x86_64/39/console]
*01:15:19.624* Error: genesis block file not found open channel0.block: no such file or directory*01:15:19.624* Usage:*01:15:19.624*   peer channel join [flags]*01:15*",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01hzx:,,,,,,,,rameshthoomu,sandp125,,,,,,,,,master,,,true,"08/Aug/17 1:42 PM;rameshthoomu;Sandeep, I see daily tests are still failing with this error.. Could you please check this and update the status pls.",09/Aug/17 3:14 AM;sandp125;Added a patch for this https://gerrit.hyperledger.org/r/#/c/12275/,11/Aug/17 1:50 PM;rameshthoomu;After patch is merged this issue is fixed.,,,,,,,,,,,,,,,,,,,,,
Event Completions severly delayed post ledger commits,FAB-5607,19938,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,dongming,dinotone,dinotone,03/Aug/17 9:19 PM,24/Apr/18 5:39 PM,26/Apr/18 6:50 AM,24/Apr/18 5:38 PM,,,,,,,,,,fabric-quality,,,,0,quality,,,,,,,,"Running PTE with Single Network, 8  channels, 2 ccs, 96 threads,  with duration of 60 minutes. After 60 minutes all the transactions have been committed to all ledgers (confirmed via peer logs), yet  20 minutes later PTE still only got EventHub completions for 8 of the 96 threads",HSBN,,,,,,,,,,,,,,,,,,,03/Aug/17 9:19 PM;dinotone;B70803D1.perf_driver.out;https://jira.hyperledger.org/secure/attachment/11826/B70803D1.perf_driver.out,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,0|i01hzp:,,,,,,,,dinotone,dongming,,,,,,,,,,,,,06/Nov/17 9:18 PM;dongming;I can recreate this issue with fabric v.1.0.0. But do not see the issue with fabric 448d384e50ba1d929648bbdcd1eaafe00d6750f7 from master branch.,21/Nov/17 2:31 PM;dongming;Leave open until the originator has a fabric image on Z to verify,"24/Apr/18 5:39 PM;dongming;Close now since the issue is not seen for a very long time.

Re-open if the issue is seen again with v1.1 or later.",,,,,,,,,,,,,,,,,,,,,
Remove all traces of testchainid,FAB-5604,19932,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,sanchezl,sanchezl,03/Aug/17 6:17 PM,26/Nov/17 1:44 PM,26/Apr/18 6:50 AM,26/Nov/17 1:44 PM,,,,,,,v1.1,,,fabric-peer,,,,1,candidate,help-wanted,,,,,,,"There are still some remnants of the default channel named {{testchainid}} in the code. We should find and remove them as to clarify that we really did mean to remove it.

For example:
 * {{peer start}} command still describes a {{-peerDefaultChain}} option, but it does nothing in the code.
 * Various {{peer chaincode}} commands such as {{peer chaincode invoke}} and {{peer chaincode instantiate}} default to a {{-C/-channelID}} parameter value of {{testchainid}} and should instead make the {{-C/-channelID}} parameter a required parameter.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01hyd:,,,,,,,,aambati,jeffgarratt,muralisr,sanchezl,,,,,,,master,,,true,26/Oct/17 7:27 PM;jeffgarratt;[~muralisr] any thoughts on this one?,"26/Oct/17 8:37 PM;muralisr;[~jeffgarratt] I think the proposal is reasonable ... but there is no compatibility issue, would be ok to postpone too. Perhaps we should make this help-wanted (and you or I can help an interested new contributor) ?",01/Nov/17 2:42 PM;jeffgarratt;Perhaps look at this [~aambati]?,03/Nov/17 6:26 PM;aambati;https://gerrit.hyperledger.org/r/c/15169/,04/Nov/17 1:54 AM;jeffgarratt;[~aambati] I could not find the above CR?  Is it correct?,"06/Nov/17 4:31 PM;aambati;[~jeffgarratt] yes that is correct. Probably you are using old UI, if so, pls use this link:



https://gerrit.hyperledger.org/r/#/c/15169/",,,,,,,,,,,,,,,,,,
Forgotten f on switch definition on byfn.sh script,FAB-5603,19931,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,dsanchezseco,dsanchezseco,dsanchezseco,03/Aug/17 6:11 PM,27/Nov/17 4:20 AM,26/Apr/18 6:50 AM,27/Nov/17 4:19 AM,v1.0.2,,,,,,,,,fabric-samples,,,,0,,,,,,,,,With all the code merge I forgot to add the option f on the switch of the script,,,,0,0,,0%,0,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2276,0|i01hy5:,,,,,,,,denyeart,dsanchezseco,,,,,,,,,master,,,true,27/Nov/17 4:20 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/12131/,,,,,,,,,,,,,,,,,,,,,,,
Update stale maintainer emails,FAB-5598,19926,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,greg.haskins,greg.haskins,greg.haskins,03/Aug/17 3:04 PM,02/Oct/17 2:55 PM,26/Apr/18 6:50 AM,02/Oct/17 2:55 PM,,,,,,,,,,fabric-chaintool,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01hx1:,,,,,,,,greg.haskins,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Typos reported by community members,FAB-5597,19925,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jimthematrix,jimthematrix,03/Aug/17 2:47 PM,07/Sep/17 2:06 PM,26/Apr/18 6:50 AM,07/Sep/17 2:06 PM,,,,,,,v1.0.2,,,fabric-sdk-node,,,,0,,,,,,,,,"https://chat.hyperledger.org/channel/fabric-sdk-node?msg=hEqX5DZYZpAC5b79f
https://chat.hyperledger.org/channel/fabric-sdk-node?msg=9oaGieGZJr8Y7TXCq",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01hwt:,,,,,,,,,,,,,,,,,,release-1.0,master,,true,07/Sep/17 2:06 PM;jimthematrix;https://gerrit.hyperledger.org/r/#/c/12127/,,,,,,,,,,,,,,,,,,,,,,,
Error in the end_to_end_test.go file,FAB-5595,19919,Bug,Unverified,FAB,Fabric,software,ChristopherFerris,,,Medium,,,akarshagrawal792,akarshagrawal792,03/Aug/17 11:47 AM,05/Feb/18 3:39 PM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-sdk-go,,,,0,go-SDK,,,,,,,,"The file end_to_end_test.go has the following error:

1. Line 21: testSetup := BaseSetupImpl\{
             It should be: 
                  testSetup := &BaseSetupImpl\{
             There is an '&' missing in the line and that causes the error while running end_to_end_test.go:
                  ./end_to_end_test.go:21: undefined: BaseSetupImpl",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i022u5:,,,,,,,,akarshagrawal792,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
failed to send invokes after instantiating the chaincode on a channel,FAB-5591,19910,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,cbl,suryalnvs,suryalnvs,02/Aug/17 9:49 PM,25/Oct/17 8:43 PM,26/Apr/18 6:50 AM,25/Oct/17 6:53 AM,,,,,,,,,,fabric-endorser,,,,0,chaincode,peer,quality,,,,,,"After instantiating the chaincode on a channel, failing to send invokes to the peer on that channel.

Tested on August 2, 2017 using:

*commit* 2cab745abf031d8ff5d3e8f4fa7a5e5af8907fad
 *Date:*   Sun Jul 30 08:40:19 2017 -0400

*Steps:*
 # Launched the network with 3 orderers, 5 kafka brokers, 3 zookeepers, 6 organizations with 2 peers each, 1 ca for each organization
 # Created 30 channels, joined org1, org2 to first 10 channels, joined org3, org4 to second 10 channels, joined org5, org6 to last 10 channels
 # Used PTE to install sample_cc_ch12:v0 chaincode on org1, org2 peers. Similary sample_cc_ch34:v0 on org3, org4 peers and sample_cc_ch56:v0 on org5, org6 peers
 # Instantiated on channel12-0, channel34-0, channel56-0 using PTE and saw chaincode containers running after some time.
 # Tried to send invokes to peer0 of org1 and org2 which were failed saying
{code:java}
18:35:54.018 UTC [lscc] Invoke -> ERRO 27cf^[[0m error getting chaincode sample_cc_ch12 on channel: mychannel12-0(err:could not find chaincode with name 'sample_cc_ch12') {code}

 

*Note:* I noticed building chaincode image took quite a long time (around 9 minutes). 
{code:java}
 [36m2017-08-02 18:22:25.497 UTC [util] DockerBuild -> DEBU 1722^[[0m Attempting build with image hyperledger/fabric-ccenv:x86_64-1.0.1-snapshot-2cab745
^[[36m2017-08-02 18:31:37.698 UTC [dockercontroller] deployImage -> DEBU 1723^[[0m Created image: dev-peer0.org1.example.com-sample_cc_ch12-v0-2bee90c54732ea5204cee1b7e2fddab81a42dc12e34affc0aa2e4f3af8c4ca6f {code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01hu5:,,,,,,,,cbl,muralisr,scottz,suryalnvs,,,,,,,master,,,true,"07/Aug/17 2:57 PM;scottz;Initial investigations revealed:
 # traffic tool PTE timed out after waiting 2 minutes for the instantiation, and then could not send invokes. PTE does not wait 10 minutes. If we increased PTE timeout value, it should work.
 # We suspect a bad wireless network and/or resource issue on the tester's laptop. Same test passed another day on same machine.
 # In the failing test, the logs indicated that the chaincode container was successfully started eventually - after 9 minutes.
 # core.yaml config parameter CORE_CHAINCODE_STARTUPTIMEOUT=300s (as shown in the text box below), but the peer did not report an error 5 minutes after receiving the instantiation request. This was suspicious. Murali confirmned that this timer covers only the startup phase - and does not include building the chaincode image, which can also occur (first) when receiving the instantiation request. he suggested revisiting this timer, to ensure it is started before trying to build the image, so that the timer is all-encompassing and it would make more sense from the user's perspective to represent the time from beginning to end of the instantiation request msg. As written in core.yaml comments (below), one might argue that it is technically accurate `...for starting up a container...` but as discussed previously it is not a user-friendly definition when the image must also be built. We propose to change the code to start the timer earlier, to encompass the time for building an image, and optionally reword this comment too.

{noformat}
# Timeout duration for starting up a container and waiting for Register
# to come through. 1sec should be plenty for chaincode unit tests
  startuptimeout: 300s{noformat}",25/Sep/17 1:20 PM;muralisr;[~cbl] thanks for taking a look at this! Let me know if you need pointers.,"13/Oct/17 2:51 AM;cbl;Working on that:

https://gerrit.hyperledger.org/r/#/c/13835/",,,,,,,,,,,,,,,,,,,,,
Network setup in PTE README fails,FAB-5562,19640,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,dongming,ynamiki,ynamiki,01/Aug/17 6:26 AM,29/Nov/17 2:32 PM,26/Apr/18 6:50 AM,29/Nov/17 2:32 PM,v1.0.0,,,,,,,,,fabric-quality,,,,0,PTE,,,,,,,,"Steps in ""Creating a local Fabric network"" section of test/tools/PTE/README.md cause an error.
docker-compose-e2e.yaml, the document says to use, does not provide a container named ""cli"".

{noformat}
$ ./network_setup.sh up # COMPOSE_FILE=docker-compose-e2e.yaml
...
Creating network ""e2ecli_default"" with the default driver
Creating orderer.example.com
Creating peer0.org1.example.com
Creating ca_peerOrg1
Creating ca_peerOrg2
Creating peer1.org1.example.com
Creating peer0.org2.example.com
Creating peer1.org2.example.com
Error: No such container: cli
{noformat}",fabric tag v1.0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,0|i01g6t:,,,,,,,,denyeart,dongming,ynamiki,,,,,,,,master,,,true,"03/Aug/17 9:10 PM;dongming;In the network_setup.sh, need to comment out

#docker logs -f cli

when choosing docker-compose-e2e.yaml

Moreover, this is just a scrip error message and has no effect on any docker container or the network.",03/Aug/17 9:11 PM;dongming;Will update README in next release.,27/Nov/17 4:18 AM;denyeart;[~dongming] Can you push a fix?,,,,,,,,,,,,,,,,,,,,,
MockStub cannot support inter-chaincode invocation,FAB-5554,19631,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,ShermanHLee,ShermanHLee,31/Jul/17 6:18 PM,10/Feb/18 10:01 PM,26/Apr/18 6:50 AM,10/Feb/18 10:01 PM,v1.0.0-rc1,,,,,,,,,fabric-endorser,,,,0,Golang,test,,,,,,,"Unable to locally perform unit-test for developer's own chaincode with 
{code:java}
// go test{code}
Chaincode dependencies being vendored in separate folders do not allow cross-referencing in import statements as done in example05.

[https://stackoverflow.com/questions/45196860/hyperledger-fabric-unit-test-cross-chaincode-invocation-without-collapsing-vendo]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01g51:,,,,,,,,muralisr,ShermanHLee,,,,,,,,,,,,,"07/Sep/17 8:28 PM;muralisr;Based on the discussion in stackoverflow vendoring the shim in two chaincode packages has you dealing with two types. This is not something we can fix by a change to the Mock chaincode system (better fixed with doing some common vendoring in your code, Id think). Lowering the priority.","30/Jan/18 11:23 PM;muralisr;[~ShermanHLee] Not sure if this is still an issue but as discussed in the stackoverflow, this has to be handled by some approach that relies on common vendoring. Can we close this ?",07/Feb/18 7:03 PM;Clayton Sims;Moving to Monitor /Hold until we hear back from Sherman. [~ShermanHLee] ?,09/Feb/18 7:21 PM;Clayton Sims;[~ShermanHLee]  any updates?,09/Feb/18 9:39 PM;ShermanHLee;[~Clayton Sims] the workaround is still the same as [~muralisr] mentioned earlier,09/Feb/18 9:55 PM;Clayton Sims;Murali is asking if this can be closed?,10/Feb/18 9:56 PM;ShermanHLee;[~Clayton Sims] Yes I think so,"10/Feb/18 10:00 PM;muralisr;Thanks [~ShermanHLee]., closing it.",,,,,,,,,,,,,,,,
Check ChaincodeId in HeaderExtension,FAB-5529,19600,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,29/Jul/17 9:30 PM,30/Jul/17 1:22 PM,26/Apr/18 6:50 AM,30/Jul/17 10:30 AM,v1.0.0,,,,,,v1.0.1,,,fabric-peer,,,,0,,,,,,,,,"There is a missing check in the endorser code.

{code}
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x10 pc=0x78e274]

goroutine 938 [running]:
panic(0xbeee20, 0xc420012090)
        /home/yacovm/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal(0xc4200ace00, 0x7f0db6c3bca8, 0xc4202d41b0, 0xc4202d42d0, 0x0, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:384 +0x364
github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler(0xc83d00, 0xc4200ace00, 0x7f0db6c3bca8, 0xc4202d41b0, 0xc4202b1f40, 0x0, 0x0, 0x0, 0x4, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:112 +0x27d
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC(0xc4201a68c0, 0x1314540, 0xc4201811e0, 0xc42000bf00, 0xc4200a9d40, 0x12f2ea0, 0xc4202d4270, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:797 +0xd14
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc4201a68c0, 0x1314540, 0xc4201811e0, 0xc42000bf00, 0xc4202d4270)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:997 +0x7a0
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc4202c5570, 0xc4201a68c0, 0x1314540, 0xc4201811e0, 0xc42000bf00)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:561 +0xab
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:562 +0xa3
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01fyt:,,,,,,,,C0rWin,yacovm,,,,,,,,,release-1.0,master,,true,29/Jul/17 9:55 PM;C0rWin;[~yacovm] can you please add some details on how this exception could be reproduced?,"29/Jul/17 10:07 PM;yacovm;Yes. You need to write custom code that sends a proposal with a nil chaincodeID.
I was in a hurry so I didn't add too many details.
Now I also uploaded a test.",,,,,,,,,,,,,,,,,,,,,,
Configuration Timeouts Ignored,FAB-5523,19562,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,divyank,divyank,divyank,28/Jul/17 7:02 PM,01/Aug/17 12:44 AM,26/Apr/18 6:50 AM,01/Aug/17 12:44 AM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,The timeouts in the configuration file are ignored and the default value is always used.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01fwt:,,,,,,,,divyank,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca-fvt CI image builds failing on x86,FAB-5521,19560,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rennman,rennman,rennman,28/Jul/17 4:58 PM,07/Oct/17 2:49 AM,26/Apr/18 6:50 AM,04/Sep/17 1:19 PM,,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"The builds on x85 are now so slow that ldap isn't initializing before the first invocation of an ldap utility.

To address this, the ldap setup script will now add polling after ldap startup to ensure that there is a listener on the ldap port before attempting to contact the server.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01fwd:,,,,,,,,rennman,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Unnecessary code,FAB-5511,19544,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,liuwenliang0632,liuwenliang0632,liuwenliang0632,28/Jul/17 4:28 AM,19/Feb/18 9:39 PM,26/Apr/18 6:50 AM,28/Jul/17 12:20 PM,,,,,,,v1.0.1,,,fabric-sdk-java,,,,0,java-SDK,,,,,,,,"i want to delete this line in UpdateChannelIT.java

{code:java}
//HttpClients.createDefault();
HttpClient httpclient = HttpClients.createDefault();
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01fst:,,,,,,,,liuwenliang0632,rickr,,,,,,,,,master,,,true,28/Jul/17 12:20 PM;rickr;Thanks.,,,,,,,,,,,,,,,,,,,,,,,
Identity password is printed in clear when server is run with debug,FAB-5510,19542,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,aambati,aambati,27/Jul/17 10:28 PM,31/Jul/17 10:03 AM,26/Apr/18 6:50 AM,31/Jul/17 8:52 AM,v1.0.1,,,,,,v1.0.1,,,fabric-ca,,,,0,,,,,,,,,"Identity password is printed in clear when ca config is printed to the log. For example in the ""Init CA with home"" debug statement",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01fsd:,,,,,,,,aambati,JonathanLevi,,,,,,,,,release-1.0,master,,true,27/Jul/17 10:47 PM;aambati;https://gerrit.hyperledger.org/r/#/c/11995/,28/Jul/17 1:36 AM;JonathanLevi;Thanks for this. Can we outline here the proposed solution?,"28/Jul/17 2:49 AM;aambati;[~JonathanLevi]  The root cause of the problem is that String method was defined for CAConfigIdentity as pointer receiver instead of non-pointer receiver. Because _CAConfig.Register.Identities_ is an array of CAConfigIdentity, when CAConfig is logged, String method of CAConfigIdentity is not being used. After I changed String method to non-pointer receiver, it started using String method when CAConfig is logged. String method of CAConfigIdentity will mask the field that is tagged 'secret'",,,,,,,,,,,,,,,,,,,,,
Inconsistent treatment of executable paths in fabric-ca go tool scripts,FAB-5508,19538,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rennman,rennman,rennman,27/Jul/17 7:44 PM,26/Sep/17 5:04 PM,26/Apr/18 6:50 AM,26/Sep/17 5:04 PM,,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"Two of the go tools script files that run as part of the unit tests do not use the absolute path of the executables consistently, resulting in failure on some systems:
{code:java}
./scripts/check_imports
Installing goimports ...
Checking imports ...
./scripts/check_imports: line 13: goimports: command not found

./scripts/check_lint
Installing golint ...
Running lint ...
./scripts/check_lint: line 15: golint: command not found{code}
The check for the exec uses the absolute path:


{code:java}
if [ ! -f $GOPATH/bin/golint ]; then
 echo ""Installing golint ...""
 go get -u github.com/golang/lint/golint
fi{code}
but the invocation does not:
{code:java}
golint $dir/...{code}
Consequently, if $GOPATH/bin is not in the users PATH envar, the scripts fail.

 

This fixes the scripts to user the absolute path in each case.",,,,,,,,,,,,,,,,,,,,26/Sep/17 5:02 PM;rennman;image-2017-09-26-13-02-44-295.png;https://jira.hyperledger.org/secure/attachment/12143/image-2017-09-26-13-02-44-295.png,26/Sep/17 5:03 PM;rennman;image-2017-09-26-13-03-03-158.png;https://jira.hyperledger.org/secure/attachment/12144/image-2017-09-26-13-03-03-158.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01frx:,,,,,,,,rennman,smithbk,,,,,,,,,,,,,"25/Sep/17 9:10 PM;smithbk;Allen, pls update status.  Is there a change set?","26/Sep/17 5:04 PM;rennman;Fixed as part of CR 9407, [FAB-3924] Improve test coverage of lib
  
 
 
 
 
 
 ",,,,,,,,,,,,,,,,,,,,,,
TestLeaderYield CI failure,FAB-5503,19531,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,27/Jul/17 2:41 PM,28/Nov/17 12:27 PM,26/Apr/18 6:50 AM,28/Nov/17 12:27 PM,,,,,,,v1.1,,,fabric-gossip,,,,0,active,gossip,,,,,,,"{code}
02:39:31 unit-tests_1  | --- FAIL: TestLeaderYield (45.01s)
02:39:31 unit-tests_1  | 	integration_test.go:129: p0 started its delivery service
02:39:31 unit-tests_1  | 	assertions.go:225: 
                        
	Error Trace:	integration_test.go:115
02:39:31 unit-tests_1  | 		
			integration_test.go:131
02:39:31 unit-tests_1  | 		
	Error:		Should be false
02:39:31 unit-tests_1  | 		
02:39:31 unit-tests_1  | 	integration_test.go:134: p0 stopped its delivery service
02:39:31 unit-tests_1  | 	integration_test.go:139: p1 started its delivery service
02:39:31 unit-tests_1  | 	assertions.go:225: 
                        
	Error Trace:	integration_test.go:141
02:39:31 unit-tests_1  | 		
	Error:		Not equal: 1 (expected)
02:39:31 unit-tests_1  | 			        != -1 (actual)
02:39:31 unit-tests_1  | 		
02:39:31 unit-tests_1  | 2017-07-27 02:39:30.308 UTC [gossip/service] configUpdated -> ERRO 0e9 Tried joining channel A but our org( OrgMSP0 ), isn't among the orgs of the channel: [Org0] , aborting.
02:39:31 unit-tests_1  | FAIL
02:39:31 unit-tests_1  | coverage: 88.0% of statements
02:39:31 unit-tests_1  | FAIL	github.com/hyperledger/fabric/gossip/service	130.297s
02:39:31 unit-tests_1  | error: exit status 1
02:39:31 unit-tests_1  | panic: EOF
02:39:31 unit-tests_1  | 
02:39:31 unit-tests_1  | goroutine 1 [running]:
02:39:31 unit-tests_1  | panic(0x11ae00, 0xc42000a0f0)
02:39:31 unit-tests_1  | 	/opt/go/src/runtime/panic.go:500 +0x408
02:39:31 unit-tests_1  | main.main()
02:39:31 unit-tests_1  | 	/opt/gotools/obj/gopath/src/github.com/AlekSi/gocov-xml/gocov-xml.go:60 +0x13a
02:39:31 unittest_unit-tests_1 exited with code 2
{code}

https://jenkins.hyperledger.org/job/fabric-verify-z/10233/console",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i01fqd:,,,,,,,,yacovm,,,,,,,,,,master,,,true,30/Jul/17 8:07 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/12043/,06/Aug/17 11:57 AM;yacovm;Looks like the commit above didn't fix it.,"07/Aug/17 9:26 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/12237/ 
disabling first to not interfere with CI",14/Aug/17 11:54 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/12419/,,,,,,,,,,,,,,,,,,,,
Missing RLock in on gossip service - StatusChangeFactory,FAB-5498,19524,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,27/Jul/17 11:57 AM,30/Jul/17 1:22 PM,26/Apr/18 6:50 AM,28/Jul/17 8:30 AM,,,,,,,v1.0.1,,,fabric-gossip,,,,0,,,,,,,,,"There is a [map access|https://github.com/hyperledger/fabric/blob/master/gossip/service/gossip_service.go#L286] that isn't protected by a lock that was introduced in a [recent commit|https://gerrit.hyperledger.org/r/#/c/11751/] 

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01fot:,,,,,,,,mastersingh24,yacovm,,,,,,,,,release-1.0,master,,true,27/Jul/17 5:30 PM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/11973/,,,,,,,,,,,,,,,,,,,,,,,
Could not parse enrollment response,FAB-5495,19518,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,zhaochy,Yogendrasri,Yogendrasri,27/Jul/17 4:57 AM,09/Nov/17 9:15 PM,26/Apr/18 6:50 AM,09/Nov/17 9:14 PM,,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"Caught Error Error: Could not parse enrollment response [404 page not found
 ] as JSON due to error [SyntaxError: Unexpected token p in JSON at position 4]
     at IncomingMessage.<anonymous> (/Users/yogendra/blockchain-first-example/fabric-samples/
 fabcar/node_modules/fabric-ca-client/lib/FabricCAClientImpl.js:704:14)
     at emitNone (events.js:91:20)
     at IncomingMessage.emit (events.js:185:7)

I am facing this error with ""fabric-ca-client"": "">=1.0.0-rc1 <1.0.0-rc1.10"", ""fabric-client"": "">=1.0.0-rc1 <1.0.0-rc1.10"".

with v1.0.0-alpha it is working fine.

Thanks,

Yogendra

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01fnh:,,,,,,,,harrisob@us.ibm.com,mastersingh24,Yogendrasri,zhaochy,,,,,,,,,,,"07/Aug/17 8:06 AM;mastersingh24;[~Yogendrasri]

Is it possible that you don't have the latest fabric-ca Docker image?

Are you just running the sample or doing something else?","07/Aug/17 8:25 AM;Yogendrasri;Thank you for your response!!

I was testing it on HSBN which is deployed on IBM cloud. I identified that fabric version on HSBN is different than Fabric client I was running in my local.

 

 

 ",31/Oct/17 10:28 PM;harrisob@us.ibm.com;[~zhaochy] would you be able to look at this one. Start with this one and if you feel comfortable working with the Fabric-ca-client there are few new features that are needed to be added to the client.,"01/Nov/17 2:15 AM;zhaochy;I tried the latest _fabric-samples/fabcar_, but can't replay this error.

[~Yogendrasri]

Can you provide more details on how you get this error? Are your just running the ""startFabric.sh"" ?",09/Nov/17 9:15 PM;harrisob@us.ibm.com;Marking this done. If you feel this is still a problem please reopen.,,,,,,,,,,,,,,,,,,,
Hash in chaincode docker image name should be computed before replacing any characters,FAB-5485,19508,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,wlahti,wlahti,26/Jul/17 7:58 PM,31/Jul/17 3:38 PM,26/Apr/18 6:50 AM,31/Jul/17 3:38 PM,,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,"FAB-5329 recently fixed an issue with chaincode container names where lowercasing the name resulted in a chaincode instantiated later taking over the container name and destroying the earlier chaincode's container. This was done by adding a hash to the image name and returning the container name to include the capitalization from the end user. 

The problem here arises because special characters in the peer and network ids are replaced with ""-"" before computing the hash. This can lead to the same issue as before since peer id ""peer-2"" and ""peer*2"" would convert to the same peer id in the container name. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01flh:,,,,,,,,wlahti,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Documentation is wrong for Windows 10,FAB-5484,19507,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lehors,lehors,lehors,26/Jul/17 6:10 PM,30/Jul/17 1:22 PM,26/Apr/18 6:50 AM,27/Jul/17 7:14 PM,v1.0.0,,,,,,v1.0.1,v1.1,,fabric-docs,,,,0,,,,,,,,,"The current documentation instructs Windows users to use Git Bash but this is not what people should use on Windows 10. As reported by one user on Stackoverflow, one should really use the Docker Quickstart Terminal:

[https://stackoverflow.com/questions/45316044/please-troubleshoot-error-message-i-am-facing-during-follwing-getting-started]

In fact, this is also true for Windows 7 users using Dockert Toolbox.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01fl9:,,,,,,,,lehors,,,,,,,,,,release-1.0,master,,true,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode install path is used in fingerprint calculation,FAB-5476,19497,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,dshuffma,dshuffma,26/Jul/17 1:18 PM,02/Feb/18 5:13 PM,26/Apr/18 6:50 AM,02/Feb/18 5:13 PM,v1.0.0,,,,,,Not a Bug,WON'T FIX,,fabric-endorser,,,,1,HSBN,,,,,,,,"When installing chaincode you provide a path, ID, and version.  All three attributes become part of a ""fingerprint"" that must match when invoking chaincode. The issue appears when you install the same chaincode but used a *different* path.  This situation will happen organically when different people on the same channel want to run the chaincode independently.  example:

person A installs on Peer1 with:
*path* - /uhoh/chaincode/marbles/dir,
*id* - marbles
*version* - v1

and person B installs on Peer2 with:
*path* - /marbles
*id* - marbles
*version* - v1

then lets pick Person A to instantiate the chaincode on a channel both peers have joined. the intent was that each person would have their own chaincode running, but b/c the path is different invokes will fail to run on person B's peer.

the error in the peer:

{code}
error: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error executing chaincode: Could not get deployment transaction from LSCC for uisdk:v - Get ChaincodeDeploymentSpec for uisdk/uisdk from LSCC error: chaincode fingerprint mismatch data mismatc
{code}

everything works normally if the paths are identical.

this was tested with v1.0.0 fabric and v1.0.0 fabric-client (sdk).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01fj1:,,,,,,,,dshuffma,habpy,mastersingh24,muralisr,,,,,,,,,,,"27/Jul/17 11:46 AM;Clayton Sims;Late yesterday, Murali said he talked to David and this this is not considered a must fix.","07/Sep/17 7:46 AM;habpy;Issue also manifests itself if `chain code`  is changed slightly, e.g. removing a comment even if paths are identical. Changing version or id is not ideal, because when working with CouchDB all data are lost.",07/Sep/17 6:42 PM;muralisr;[~mastersingh24] what do think the disposition should be for this ?,02/Feb/18 5:13 PM;mastersingh24;I don't think this is a bug.  I think perhaps the documentation could be clearer in that PATH is supposed to be the actual chaincode package.,,,,,,,,,,,,,,,,,,,,
Various entries in generated fabric-ca-server-config.yaml don't point to real files,FAB-5462,19480,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,vdods,vdods,25/Jul/17 8:48 PM,29/Nov/17 2:58 PM,26/Apr/18 6:50 AM,29/Nov/17 2:58 PM,,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"Run `fabric-ca-server init -b admin:adminpw` and it will create several files within the FABRIC_CA_HOME directory, and a corresponding fabric-ca-server-config.yaml file, but several of the entries in that config file point to non-existent files, including (but not limited to):

ca.keyfile

ca.chainfile

tls.keyfile

 

The generated config file should point those entries to the actual files (e.g. ca.keyfile would point to msp/keystore/XYZ_sk, or whatever the actual filename is).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ffh:,,,,,,,,smithbk,vdods,,,,,,,,,master,,,true,10/Nov/17 4:08 PM;smithbk;https://gerrit.hyperledger.org/r/15373 [FAB-5462] Remove non-existent files from yaml,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - unable to query certain blocks,FAB-5457,19475,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,AngelMilanov,AngelMilanov,25/Jul/17 3:01 PM,09/Aug/17 7:42 PM,26/Apr/18 6:50 AM,27/Jul/17 7:11 PM,,,,,,,v1.0.1,,,fabric-sdk-node,,,,0,,,,,,,,,"When using Fabric 1.0.0 with Fabric Node SDK 1.0.0, at some point the contents of certain blocks cannot be acquired from the peers through the Channel#queryBlock(blockNumber, target) function.

Invoking the function results in a TypeError with the following stacktrace:
 *error: [BlockDecoder.js]: TypeError: Cannot read property 'max_degree' of null*
 *at decodeRangeQueryInfo (...fabric-client/lib/BlockDecoder.js:1248:31)*
 *at decodeKVRWSet (...fabric-client/lib/BlockDecoder.js:1203:27)*
 *at decodeReadWriteSets (...fabric-client/lib/BlockDecoder.js:1172:22)*
 *at decodeChaincodeAction (...fabric-client/lib/BlockDecoder.js:1144:29)*
 *at decodeProposalResponsePayload (...fabric-client/lib/BlockDecoder.js:1136:40)*
 *at decodeChaincodeEndorsedAction (...fabric-client/lib/BlockDecoder.js:1114:37)*
 *at decodeChaincodeActionPayload (...fabric-client/lib/BlockDecoder.js:1098:19)*
 *at decodeEndorserTransaction (...fabric-client/lib/BlockDecoder.js:665:21)*
 *at decodeBlockDataEnvelope (...fabric-client/lib/BlockDecoder.js:649:27)*
 *at decodeBlockData (...fabric-client/lib/BlockDecoder.js:566:18)*",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01fed:,,,,,,,,AngelMilanov,harrisob@us.ibm.com,,,,,,,,,release-1.0,master,,true,25/Jul/17 3:32 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/11907/,,,,,,,,,,,,,,,,,,,,,,,
PTE - All Threads not completing 4 channel measurement,FAB-5454,19469,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wsh_bob,dinotone,dinotone,25/Jul/17 12:30 PM,03/Aug/17 2:12 PM,26/Apr/18 6:50 AM,03/Aug/17 2:12 PM,,,,,,,,,,fabric-quality,,,,0,,,,,,,,,For 4 channel PTE measurement  with moderate load (aggregate of 48 Invoke request rate) only 41 of 48 PTE threads get completion messages.  PTE logs will be added shortly,,,,,,,,,,,,,,,,,,,,25/Jul/17 12:58 PM;dinotone;B70724D1.perf_driver.out;https://jira.hyperledger.org/secure/attachment/11770/B70724D1.perf_driver.out,25/Jul/17 1:06 PM;dinotone;B70724D_peer1.lpara.log;https://jira.hyperledger.org/secure/attachment/11771/B70724D_peer1.lpara.log,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,0|i01fdh:,,,,,,,,dinotone,wsh_bob,,,,,,,,,,,,,02/Aug/17 3:55 AM;wsh_bob;Fixed in v1performance repo after commit 6023ca9b3f2ba1071eded2a41e8e07b61db39aa8,,,,,,,,,,,,,,,,,,,,,,,
Orderer Org shows up in the getOrganization call when they are not part of the channel,FAB-5447,19458,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,varadatibm,varadatibm,24/Jul/17 9:21 PM,09/Aug/17 7:42 PM,26/Apr/18 6:50 AM,27/Jul/17 7:11 PM,,,,,,,v1.0.1,,,fabric-sdk-node,,,,0,,,,,,,,,"Orderer Org shows up in the getOrganization call when they are not part of the channel

 

Create a channel with Org1MSP and Org2MSP as part of the channel

Call getOrganizations on channel returns OrdererMSP, Org1MSP, Org2MSP

 

It should not return OrdererMSP since it is not part of the channel definition",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01fb9:,,,,,,,,harrisob@us.ibm.com,varadatibm,,,,,,,,,release-1.0,master,,true,25/Jul/17 9:36 AM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/11899/,,,,,,,,,,,,,,,,,,,,,,,
Orderer metadata test broken for dev builds,FAB-5446,19455,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,24/Jul/17 8:50 PM,30/Jul/17 1:22 PM,26/Apr/18 6:50 AM,26/Jul/17 1:06 PM,,,,,,,v1.0.1,v1.1,,fabric-orderer,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01fat:,,,,,,,,jyellick,,,,,,,,,,release-1.0,master,,true,24/Jul/17 8:53 PM;jyellick;In review via https://gerrit.hyperledger.org/r/11887,,,,,,,,,,,,,,,,,,,,,,,
Have configtxlator return default values,FAB-5443,19447,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,24/Jul/17 4:49 PM,27/Jul/17 8:44 PM,26/Apr/18 6:50 AM,27/Jul/17 8:44 PM,,,,,,,v1.1,,,fabric-tools,,,,0,configtxlator,,,,,,,,"The configtxlator tool currently does not emit default field values when decoding.

This decision was originally made because printing these fields make the output much more verbose.

However, there has been feedback from multiple users that this is confusing.  So, this field should be toggled.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01f9p:,,,,,,,,jyellick,,,,,,,,,,master,,,true,24/Jul/17 4:56 PM;jyellick;https://gerrit.hyperledger.org/r/#/c/11877/,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure during join channel ,FAB-5442,19446,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,divyank,divyank,divyank,24/Jul/17 3:22 PM,25/Jul/17 1:36 PM,26/Apr/18 6:50 AM,25/Jul/17 1:36 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"Noticed that the CI was failing with this output:

*20:29:38* — FAIL: TestOrgsEndToEnd (0.68s)
*20:29:38* test_setup.go:225: Error getting genesis block: Error sending envelope: error returned from orderer service: Got error status from ordering service: NOT_FOUND
 *20:29:38*  FAIL

 

This is most likely because the OrgsEndToEnd test does not wait long enough between create and join channel. Adding a longer timeout would give the ordering service enough time to create the genesis block. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01f9h:,,,,,,,,divyank,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
JAVA SDK not able to deploy Java Chaincode,FAB-5440,19444,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,netfox5,netfox5,24/Jul/17 1:46 PM,28/Aug/17 9:35 AM,26/Apr/18 6:50 AM,26/Jul/17 1:45 PM,v1.0.0,,,,,,WON'T FIX,,,fabric-sdk-java,,,,0,java-SDK,,,,,,,,"Method createNetModeTransaction of class org.hyperledger.fabric.sdk.transaction.InstallProposalBuilder has the following line:

{{            case JAVA:}}

{{                // chaincodePath is not applicable and must be null}}
{{                // chaincodeSource may be a File or InputStream}}

{{                //   Verify that chaincodePath is null}}
{{                if (null != chaincodePath) \{}}
{{                    throw new IllegalArgumentException(""chaincodePath must be null for Java chaincode"");}}
{{                }}}

However, {{chaincodePath}} can never be null because getChaincodePath of org.hyperledger.fabric.sdk.TransactionRequest always returns an empty String and not null:

{{    public String getChaincodePath() \{}}
{{        return null == chaincodePath ? """" : chaincodePath;}}
{{    }}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01f91:,,,,,,,,netfox5,rickr,,,,,,,,,,,,,24/Jul/17 2:00 PM;rickr;Java chain code is not supported by fabric and thus not the SDK,,,,,,,,,,,,,,,,,,,,,,,
Missing parameter description in docs,FAB-5432,19432,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,vdods,vdods,22/Jul/17 9:41 PM,27/Jul/17 1:38 PM,26/Apr/18 6:50 AM,27/Jul/17 1:38 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"The requirement to specify the ""targets"" key in the ChaincodeInstallRequest argument of client.installChaincode is not present in the documentation.",,,,,,,,,,,,,,,,FAB-5409,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01f6l:,,,,,,,,ericmvaughn,vdods,,,,,,,,,,,,,24/Jul/17 3:02 PM;ericmvaughn;[~jimthematrix] this looks the same as one I submitted (FAB-5409) and I'd be happy to make the change if you'd like. ,"27/Jul/17 1:34 PM;ericmvaughn;Fixed by [https://gerrit.hyperledger.org/r/#/c/11919/]

 ",,,,,,,,,,,,,,,,,,,,,,
Peers do not seem to switch properly when orderer is stopped.,FAB-5429,19429,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jkirke,ptippett,ptippett,22/Jul/17 6:49 PM,07/Sep/17 6:11 PM,26/Apr/18 6:50 AM,07/Sep/17 6:11 PM,,,,,,,,,,fabric-peer,,,,0,HSBN,,,,,,,,"The peers should switch to another orderer when the orderer is stopped. That does not seem to be happening in our environment.

Abstract: I am performing testing to ensure that I am still able to perform channel create, channel join, install / instantiate chaincode, invokes, and queries when one of our 3 orderers is stopped.

Details: I am successfully executing invokes on my two peers: fabric-peer-org1-15999a and fabric-peer-org1-15999c. I am then stopping fabric-orderer-18193b (I have two other orderers: fabric-orderer-18193a and fabric-orderer-18193c). Once fabric-orderer-18193b is stopped I cannot successfully complete any invokes to either peer.

SDK.txt lists is the sdk output during this problem.

You should be able to reproduce this by having 2 orderers and a peer that is being sent continuous transactions via the SDK, if you stop the orderer the peer is using, transactions will stop and the peer will not fail over to the other orderer.

I've attached logs but noticed he peer logs didn't successfully upload.  I've asked the person who found this to reattach the peer logs.",,,,,,,,,,,,,,,,,,,,24/Jul/17 12:15 AM;jkirke;d0570fc3fd6645c78b2ef794965e1971_Logs-1.zip;https://jira.hyperledger.org/secure/attachment/11748/d0570fc3fd6645c78b2ef794965e1971_Logs-1.zip,25/Jul/17 1:23 AM;jkirke;fabric-orderer-22240a_configtx.yaml;https://jira.hyperledger.org/secure/attachment/11767/fabric-orderer-22240a_configtx.yaml,25/Jul/17 1:23 AM;jkirke;fabric-orderer-22240a_orderer.yaml;https://jira.hyperledger.org/secure/attachment/11769/fabric-orderer-22240a_orderer.yaml,25/Jul/17 1:23 AM;jkirke;fabric-orderer-22240c_configtx.yaml;https://jira.hyperledger.org/secure/attachment/11766/fabric-orderer-22240c_configtx.yaml,25/Jul/17 1:23 AM;jkirke;fabric-orderer-22240c_orderer.yaml;https://jira.hyperledger.org/secure/attachment/11768/fabric-orderer-22240c_orderer.yaml,22/Jul/17 6:49 PM;ptippett;peer_failover.zip;https://jira.hyperledger.org/secure/attachment/11744/peer_failover.zip,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01f5x:,,,,,,,,C0rWin,denyeart,harsha544,jkirke,jyellick,kchristidis,mastersingh24,muralisr,ptippett,,,,,,"22/Jul/17 10:17 PM;kchristidis;Paul, thanks for submitting this.

A couple of observations:

In our internal thread, [~jkirke] wrote:
{quote}In the example I gave, my invokes follow either the peer A / orderer A path or the peer C / orderer C path but stopping orderer B caused a complete inability to perform invokes on either orderer A or orderer C.
{quote}
This contradicts the description here:
{quote}if you stop the orderer the peer is using, transactions will stop and the peer will not fail over to the other orderer.
{quote}
So, let's clarify first which one is it.

Furthermore, based on the description, the issue is easily reproducible.

[~jkirke]: Can you please perform the following experiment, then attach the corresponding logs:
 # Set the logging to DEBUG level for both peer and orderer.
 # Recreate the problem in the shortest amount of steps possible. (I'd assume that would be ""invoke once successfully, stop orderer, invoke again unsuccessfully, STOP"")

In the logs that I see, the logs are not set to DEBUG level, and there is more noise than there should be. For instance, I see an orderer being restarted 5 times.

--

As best as I can tell, and as I also stated in the internal thread, this does not seem to be an issue with the orderer. (If Jason's version of events is accurate – see request for clarification above –, the stopped orderer doesn't participate in ordering in any way, so its failure is irrelevant to the process. If Paul's version of events is accurate we should look into why the peer is not performing a failover.)

I am therefore un-assigning myself from this, but I'll gladly look into it if in the end it turns out to be an orderer bug.","23/Jul/17 4:00 PM;jkirke;{quote}In the example I gave, my invokes follow either the peer A / orderer A path or the peer C / orderer C path but stopping orderer B caused a complete inability to perform invokes on either orderer A or orderer C.
{quote}
{quote}if you stop the orderer the peer is using, transactions will stop and the peer will not fail over to the other orderer.
{quote}
These statements are not contradictory. No fail over occurs in any case. In addition to no fail over occurring, taking down an orderer that is not being directly called (orderer b) in my example can prevent executions even thought the other two orderers are availablie.

 ",23/Jul/17 4:01 PM;Clayton Sims;Based on text exchange with Kostis yesterday....moving to Murali.,23/Jul/17 5:14 PM;Clayton Sims;Sunday checkpoint call:  Paul to work with team to provide requested logs,"23/Jul/17 8:11 PM;kchristidis;{quote}These statements are not contradictory. No fail over occurs in any case.
{quote}
You're saying that you kill an orderer that no peer is using (you do peer A / orderer A and peer C / orderer C and you kill orderer B), while Paul says ""kill an orderer that the peer is using"". -How is this not contradictory?- Perhaps contradictory is the wrong word. Is ""quite different"" better?

Also, in your case, why would there be a need for a failover to begin with? Nobody is using that orderer.","24/Jul/17 12:14 AM;jkirke;Understood. Perhaps there are two issues really then because: 1. fail over does not work and 2. sometimes stopping a single orderer prevents any orders from working.

Will enabled DEBUG logging and tried this out this afternoon. According to him he stopped orderer C and saw the failure. Here are the logs he sent added as an attachment.",24/Jul/17 12:37 PM;mastersingh24;Are we sure that the peers know about the other orderer endpoints?,"24/Jul/17 8:30 PM;jkirke;I am not confident that the way the SDK uses our peers and orderers facilitates fail over. I am honestly more concerned with issue 2. (sometimes stopping a single orderer prevents any orders from working). In this case it is impossible to perform any invokes until all the orderers and peers are restarted.

For issue 1, fail over does not work, if we are specifying a single orderer using the SDK and that orderer is down is there anything that would allow for fail over? ","24/Jul/17 9:43 PM;muralisr;Assumptions
 * peer is configured to multiple orderers A, B and C
 * SDK is sending transactions to an orderer which is NOT killed (just to eliminate any app errors)
 * killed one of the other orderers

Expect peer to switch to one of the other running orderers and pick up.

If that's not happening first place to look at is deliveryservice ... [~C0rWin] can you take a look at this please ?

[~jkirke] [~ptippett] Can you verify the above assumptions ?","24/Jul/17 10:07 PM;kchristidis;{quote}I am not confident that the way the SDK uses our peers and orderers facilitates fail over. I am honestly more concerned with issue 2. (sometimes stopping a single orderer prevents any orders from working). In this case it is impossible to perform any invokes until all the orderers and peers are restarted.

For issue 1, fail over does not work, if we are specifying a single orderer using the SDK and that orderer is down is there anything that would allow for fail over? 
{quote}
This is not helping. Let's please identify _the single issue_ that we wish to address with this JIRA.","24/Jul/17 10:39 PM;jkirke;I think it is helping since I am attempting to make sure we are using this issue for the issue I reported. The focus should be on the issue where stopping a single orderer prevents all invokes from running on any orderer.

I cannot locate Kostas or Murali on Rocket or Slack to discuss the issue to avoid churn on this issue. Please contact me on either to discuss.",24/Jul/17 10:55 PM;muralisr;[~jkirke] can you verify the assumptions in my previous comment are correct ?,"24/Jul/17 11:38 PM;jkirke;I talked with Murali on the phone and will gather the configuration information he has requested.

 ",25/Jul/17 1:23 AM;jkirke;Here are the configtx.yaml and orderer.yaml files from orderer A and orderer C. Orderer B is off and is has caused invokes to not function on my peer C currently. It also has caused the ledger values for peer A and C to not agree so I do not want to restart it since I am hoping you can meet me tomorrow to look at the issue.,25/Jul/17 1:51 AM;Clayton Sims;Artem - this is an HSBN defect and we want to have all defects included  for 7/26 cutoff for v1.0.1.   I would like to ask you to prioritize this to include into v1.0.1. ,"25/Jul/17 2:14 AM;jyellick;I see one significant problem immediately based off the files you have uploaded.

Bootstrapping the ordering network must be done **once** and once only. Running {{configtxgen}} multiple times to generate multiple orderer genesis blocks will almost always produce different blocks at each invocation.

I also see in the {{orderer.yaml}} that the {{provisional}} genesis method is specified. This should *never* be used in a production environment, as it causes the genesis block to be dynamically generated (which again, will usually be different at each invocation).

Essentially, what I believe you have done is start three disparate blockchains which were forked at genesis. When a failure occurs, there is no way for the peer to failover, because all blocks from other orderers will not chain with the peer's existing chain.","25/Jul/17 2:44 AM;muralisr;[~jkirke] lets take a step back and walk through the configuration and setup tomorrow ? 

Moving this back to you just for now. Once we meet up tomorrow we can move to the right owner.","25/Jul/17 6:12 AM;C0rWin;[~Clayton Sims] will make sure to get it right priority, meanwhile it looks like there is misconfiguration issue, will test delivery service fail-over test regardless of this issue, waiting for confirmation about setup and configuration from [~muralisr].","25/Jul/17 2:51 PM;muralisr;Worked with [~jkirke] to understand the config better. It does appear [~jyellick] comment is in play here

{code:java}
I also see in the orderer.yaml that the provisional genesis method is specified. This should never be used in a production environment, as it causes the genesis block to be dynamically generated (which again, will usually be different at each invocation).
{code}

[~jkirke] lets test with the recommended configuration approach (using a common orderer config file, making sure bootstrapping is done once etc) and test to make sure system behaves as expected (or recreate the problem) and go from there please ?",05/Aug/17 3:52 PM;Clayton Sims;[~jkirke]  can we close this now?,30/Aug/17 3:47 AM;muralisr;[~jkirke] can we close this now ?,"07/Sep/17 5:31 PM;denyeart;Based on prior comments, switching to medium until we here back from reporter.",07/Sep/17 6:09 PM;kchristidis;(Pinged Jason and asked him to update this.),07/Sep/17 6:11 PM;jkirke;This issue can be closed. It is no longer occurring with current environment.
Modify misspell function name in test class.,FAB-5428,19427,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,xiejunxi,xiejunxi,xiejunxi,21/Jul/17 11:12 PM,21/Jul/17 11:13 PM,26/Apr/18 6:50 AM,21/Jul/17 11:13 PM,,,,,,,,,,fabric-sdk-java,,,,0,,,,,,,,,"there are some misspell function name in test class. for example getTestChannlePath should write getTestChannelPath.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01f5h:,,,,,,,,xiejunxi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
make unit-tests fails TestNewUserRegistryMySQL on vagrant,FAB-5427,19426,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lehors,lehors,lehors,21/Jul/17 10:11 PM,14/Sep/17 2:09 PM,26/Apr/18 6:50 AM,14/Sep/17 2:09 PM,v1.0.0,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"TestNewUserRegistryMySQL relies on being able to change a file access mode to be readonly. Unfortunately on vagrant this doesn't work because, at least on Windows, all files on shared volumes appear with a 777 mode which cannot be changed.

This makes the test fail.

A simple fix is to use a file on a local volume so that its access control can effectively be changed as desired.

 
{code:java}
$ go test -v -run TestNewUserRegistryMySQL
=== RUN TestNewUserRegistryMySQL
2017-07-21 21:47:33.845 UTC [bccsp] GetDefault -> WARN 001 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
--- FAIL: TestNewUserRegistryMySQL (0.00s)
 Error Trace: server_test.go:1318
 Error: ""Failed to connect to MySQL database: dial tcp 127.0.0.1:3306: getsockopt: connection refused"" does not contain ""permission denied""
FAIL
{code}
 

 ",,,,,,,,,,,,,,,,,FAB-5935,FAB-6085,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01f59:,,,,,,,,lehors,mastersingh24,,,,,,,,,master,,,true,27/Jul/17 8:10 PM;mastersingh24;This is not needed for a patch release,,,,,,,,,,,,,,,,,,,,,,,
make unit-tests fails on Windows 7,FAB-5426,19425,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lehors,lehors,lehors,21/Jul/17 10:05 PM,29/Sep/17 2:09 PM,26/Apr/18 6:50 AM,29/Sep/17 2:09 PM,v1.0.0,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"This is a follow-up to FAB-5305.

Looking at the problem more broadly it has become apparent that we need to be more careful about not leaving CA databases open all over the place. On Windows this translates in files remaining locked, which prevents the deletion of those files, after which all sorts of errors occur as a consequence. While unit-tests exacerbate the problem by repeatedly creating databases, doing some test, and deleting them, which is probably not frequently done in a normally running system this still exhibits a problem that ought to be addressed.

To fix this problem, we need to:
 # check that os.RemoveAll doesn't return any error and act on them if there is any
 # consistently close any open CA database when done

 ",,,,,,,,,,,,,,,,,FAB-6085,FAB-6328,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01f51:,,,,,,,,lehors,mastersingh24,,,,,,,,,master,,,true,27/Jul/17 8:11 PM;mastersingh24;this is not needed for a patch release,,,,,,,,,,,,,,,,,,,,,,,
configtxlator bad command input common.Configuration should be common.Config,FAB-5416,19412,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,rickr,rickr,21/Jul/17 3:20 PM,26/Jul/17 4:27 PM,26/Apr/18 6:50 AM,26/Jul/17 4:27 PM,v1.0.0,v1.0.1,,,,,v1.1,,,fabric-docs,,,,0,,,,,,,,,"[http://hyperledger-fabric.readthedocs.io/en/master/configtxlator.html]

[~jyellick]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01f2l:,,,,,,,,jyellick,rickr,,,,,,,,,master,,,true,"25/Jul/17 2:38 AM;jyellick;This is not a critical bug fix, I do not see this as a candidate for v1.0.1, moving to v1.1.",25/Jul/17 2:44 AM;jyellick;In review via: https://gerrit.hyperledger.org/r/#/c/11891/,,,,,,,,,,,,,,,,,,,,,,
Unable to start networkError response from daemon: No such container: cli,FAB-5412,19402,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,RichardHill,RichardHill,21/Jul/17 5:57 AM,01/Feb/18 7:11 AM,26/Apr/18 6:50 AM,01/Aug/17 12:34 PM,v1.0.0,,,,,,,,,fabric-samples,,,,0,,,,,,,,,"I am unable to start network. 
The fabric docker repo does not have latest tag, this is expected behavior by hyperleder but the script uses 'latest' tag

{quote}""manifest for hyperledger/fabric-orderer:latest not found""
""Error response from daemon: No such container: cli.""
{quote}

I expect i need to tag  the fabric-orderer image and other  as latest in my local machine. 

 docker tag 5ec6333eae10 hyperledger/fabric-orderer:latest


*Versions*

fabric-samples.git

commit 1153988540a66319814dcc20e7c384f6429bd0ce
Merge: d9e2d5c 6422fc3

*Docker* 

Docker version 17.06.0-ce, build 02c1d87

*Docker images
*hyperledger/fabric-tools x86_64-1.0.0-rc1  85d6d3ca0a30
hyperledger/fabric-couchdb x86_64-1.0.0-rc1  b37a08f8a0cb
hyperledger/fabric-orderer x86_64-1.0.0-rc1  5ec6333eae10
hyperledger/fabric-peer x86_64-1.0.0-rc1  cf6bedc2935e
hyperledger/fabric-ccenv x86_64-1.0.0-rc1  13ed472038d2


*Steps*
Install repo and prerequisites as described here.
https://hyperledger-fabric.readthedocs.io/en/latest/build_network.html


{{ /fabric-samples/first-network$ ./byfn.sh -m generate

 /fabric-samples/first-network$ ./byfn.sh -m up
Starting with channel 'mychannel' and CLI timeout of '10000'
Continue (y/n)? 
invalid response
Continue (y/n)? 
invalid response
Continue (y/n)? y
proceeding ...
Creating network ""net_byfn"" with the default driver
Pulling orderer.example.com (hyperledger/fabric-orderer:latest)...
ERROR: manifest for hyperledger/fabric-orderer:latest not found
ERROR !!!! Unable to start network
Error response from daemon: No such container: cli
}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01f0t:,,,,,,,,ChristopherFerris,RichardHill,ShimingLiu,,,,,,,,master,,,true,22/Jul/17 8:41 PM;ChristopherFerris;[~RichardHill] Did you install the binaries and docker images using the curl command as described [here|[http://hyperledger-fabric.readthedocs.io/en/latest/samples.html#download-platform-specific-binaries]?] I just ran this and the orderer was correctly labeled as 'latest'.,22/Jul/17 8:57 PM;ChristopherFerris;Adding a 'fabric-preload.sh' to the samples repo to allow users to download/tag images w/o the curl option.,22/Jul/17 8:59 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/11843,"01/Feb/18 7:11 AM;ShimingLiu;[~ChristopherFerris] hi, I just met the same problem as this issue described, I followed this document [https://hyperledger-fabric.readthedocs.io/en/release/build_network.html], install all the [Prerequisites|https://hyperledger-fabric.readthedocs.io/en/release/prereqs.html] , get samples from [Hyperledger Fabric Samples|https://hyperledger-fabric.readthedocs.io/en/release/samples.html], 

cd first-netwrok, 

execute ./byfn.sh -m generate commend, it's good

then execute ./byfn.sh -m up, error occurs: 

Shimingbookmini:first-network Shiming$ ./byfn.sh -m up

Starting with channel 'mychannel' and CLI timeout of '10' seconds and CLI delay of '3' seconds

Continue (y/n)? y

proceeding ...

Pulling orderer.example.com (hyperledger/fabric-orderer:latest)...

ERROR: manifest for hyperledger/fabric-orderer:latest not found

ERROR !!!! Unable to start network

Error response from daemon: No such container: cli

Shimingbookmini:first-network Shiming$

 

I noticed that you gave a link which is 1.1.0 alpha binaries, but what I installed is 1.0.5 binaries from here [https://hyperledger-fabric.readthedocs.io/en/release/samples.html#binaries,] is this the problem?",,,,,,,,,,,,,,,,,,,,
Error creating channel,FAB-5411,19401,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,sky5217285,sky5217285,21/Jul/17 3:40 AM,14/Feb/18 5:16 PM,26/Apr/18 6:50 AM,14/Feb/18 5:16 PM,,,,,,,,,,fabric-examples,,,,0,,,,,,,,,"when i run fabric/examples/configtxupdate/reconfig_membership/script.sh,errer happened.

#####################################################
Submitting channel create tx to orderer
#####################################################

Executing:
 ./../common_scripts/../../../build/bin/peer channel create -f 'example_output/channel_create_tx.pb' -c 'example' -o '127.0.0.1:7050'

#####################################################
FAILURE: Error creating channel
#####################################################",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01f0l:,,,,,,,,denyeart,jyellick,mastersingh24,sky5217285,,,,,,,,,,,16/Sep/17 1:19 PM;mastersingh24;[~sky5217285] - Can you provide some more details on your setup?  Would also be helpful to see the logs for the orderer as well,"27/Nov/17 4:12 AM;denyeart;[~sky5217285] Can you provide more details and logs?
[~jyellick] Any ideas?","27/Nov/17 6:51 PM;jyellick;Most likely, the orderer has not been bootstrapped with the correct profile (or is not running).",13/Feb/18 6:55 PM;Clayton Sims;[~sky5217285]  are you able to provide the info?   moving to hold/monitor status which means we are waiting on the originator,"14/Feb/18 5:16 PM;denyeart;Not believed to be a defect and have not heard back from reporter, Closing for now.

If you can still reproduce the issue, please re-open.",,,,,,,,,,,,,,,,,,,
Fix issue with pubkey pkcs11 attribute CKA_PRIVATE in BCCSP lib,FAB-5407,19393,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,gbolo,gbolo,gbolo,20/Jul/17 7:53 PM,31/Jul/17 10:03 AM,26/Apr/18 6:50 AM,28/Jul/17 7:18 PM,v1.0.0,,,,,,v1.0.1,,,fabric-orderer,fabric-peer,,,0,bccsp,,,,,,,,"According to PKCS11 standard:
CKA_PRIVATE - CK_BBOOL - TRUE if object is a private object (vs. public object) (default FALSE)

Changing this to FALSE for public key pkcs11 attribute struct fixed an issue we were having with our Thalas HSM: CKR_TEMPLATE_INCONSISTENT

Commenting out this line also works (since there is no reason for it to be in the pubkey struct). Please also vendor in this change to other projects using it, such as Fabric-CA.

 

https://github.com/hyperledger/fabric/blob/release/bccsp/pkcs11/pkcs11.go#L242",,,,,,,,,,,,FAB-5530,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ez1:,,,,,,,,angelo.decaro,gbolo,mastersingh24,yacovm,,,,,,,release-1.0,master,,true,"20/Jul/17 8:10 PM;gbolo;Submitted a commit:

commit c97a93a579a55ed4b3e5d1ed03b8620a8a1d90e0
Author: gbolo <george.bolo@gmail.com>
Date: Thu Jul 20 15:00:31 2017 -0400

[FAB-5407] Fix issue with pubkey pkcs11 CKA_PRIVATE
 
 According to PKCS11 standard:
 CKA_PRIVATE - CK_BBOOL - TRUE if object is a private
 object (vs. public object) (default FALSE)
 
 Changing this to FALSE for public key pkcs11 attribute struct
 fixed an issue we were having with our Thalas HSM: CKR_TEMPLATE_INCONSISTENT
 
 Commenting out this line also works
 (since there is no reason for it to be in the pubkey struct).
 Please also vendor in this change to other projects using it,
 such as Fabric-CA.
 
 Change-Id: I87d363a89e34c39f438492123166ed59eb515c44
 Signed-off-by: gbolo <george.bolo@gmail.com>","20/Jul/17 8:19 PM;yacovm;[~vpaprots] , [~adc] ^ ","21/Jul/17 1:24 AM;angelo.decaro;[~gbolo], thanks a lot for having spotted that. [~vpaprots], may you address that, please?",21/Jul/17 10:38 AM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/11791/,,,,,,,,,,,,,,,,,,,,
Peer<-->Chaincode Mutual TLS,FAB-5406,19392,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,20/Jul/17 7:49 PM,09/Mar/18 6:37 PM,26/Apr/18 6:50 AM,22/Aug/17 10:50 AM,v1.0.0,,,,,,v1.1,,,fabric-crypto,,,,0,,,,,,,,,"In order to harden and secure the communication and authentication (specifically - association between the chaincode name to the gRPC stream) between the peer and the chaincode shim - we should use mutual TLS.

I propose the following flow:
* The peer chaincode gRPC service would always run on a different port
* At peer startup - it will generate a CA cert, and put it into the chaincode gRPC service's TLS CA cert pool
* When a chaincode container is launched, the peer would generate a new TLS certificate and private key pair and would sign it with the CA cert's corresponding private key.
* The peer would associate the chaincode instance's name with the certificate hash, and start a timer after which the association is deleted from memory.
* The peer's chaincode gRPC service would use the configuration - [RequireAndVerifyClientCert|https://golang.org/src/crypto/tls/common.go?s=5991:6014#L175]
* The certificate would be passed to the container via either environment variables, or commandline arguments or via some other secure method ( [~ales] / [~mastersingh24]
*  - what is your take on this? which one is better?)
* The chaincode shim would connect to the peer using the certificate (and corresponding private key) passed to it upon initialization
* The peer would intercept the first message from the chaincode shim (REGISTER <chaincode_name>) and check that the certificate hash extracted from the gRPC stream exists in the in-memory mapping, and also matches the claimed chaincode name sent by the chaincode shim. If it isn't - the peer would not pass the message and block the stream / disconnect it.",,,,,,,,,,,,,,,,,FAB-8220,FAB-8757,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01eyt:,,,,,,,,angelo.decaro,baohua,yacovm,ysim,,,,,,,master,,,true,"07/Aug/17 12:54 AM;angelo.decaro;So, https://gerrit.hyperledger.org/r/#/c/11929/ has been merged but it does not use BCCSP for the crypto operation and the package name *accesscontrol* is just misleading in my opinion. [~elli-androulaki][~ales], what's your take on this?",,,,,,,,,,,,,,,,,,,,,,,
Error with Writing Your First Application tutorial,FAB-5392,19371,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,pollockt,pollockt,19/Jul/17 10:47 PM,20/Jul/17 1:36 PM,26/Apr/18 6:50 AM,20/Jul/17 1:36 PM,v1.0.0,,,,,,,,,fabric-docs,fabric-samples,,,0,,,,,,,,,"Hi,

I'm getting an error when working through the instructions found on this page:

https://hyperledger-fabric.readthedocs.io/en/latest/write_first_app.html|http://example.com

I've installed the prerequisites (for Windows 10), pulled down the samples and successfully run the Building Your First Network example.

The output when running fabric-samples/fabcar/startFabric.sh in a bash shell is:

Tim@DESKTOP-ER6JS0I MINGW64 /c/Development/Hyperledger/fabric-samples/fabcar (release)
$ ./startFabric.sh

docker-compose -f docker-compose.yml down
Stopping peer0.org1.example.com ... done
Stopping orderer.example.com ... done
Stopping ca.example.com ... done
Stopping couchdb ... done
Removing peer0.org1.example.com ... done
Removing orderer.example.com ... done
Removing ca.example.com ... done
Removing couchdb ... done
Removing network net_basic

docker-compose -f docker-compose.yml up -d ca.example.com orderer.example.com peer0.org1.example.com couchdb
Creating network ""net_basic"" with the default driver
Creating ca.example.com ...
Creating orderer.example.com ...
Creating couchdb ...
Creating ca.example.com
Creating couchdb
Creating orderer.example.com ... done
Creating ca.example.com ... done
Creating peer0.org1.example.com ... done

# wait for Hyperledger Fabric to start
# incase of errors when running later commands, issue export FABRIC_START_TIMEOUT=<larger number>
export FABRIC_START_TIMEOUT=10
#echo $\{FABRIC_START_TIMEOUT}
sleep $\{FABRIC_START_TIMEOUT}

# Create the channel
docker exec -e ""CORE_PEER_LOCALMSPID=Org1MSP"" -e ""CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/msp/users/Admin@org1.example.com/msp"" peer0.org1.example.com peer channel create -o orderer.example.com:7050 -c mychannel -f /etc/hyperledger/configtx/channel.tx
2017-07-19 19:25:52.316 UTC [main] main -> ERRO 001 Cannot run peer because cannot init crypto, missing /etc/hyperledger/fabric/C:/Program Files/Git/etc/hyperledger/msp/users/Admin@org1.example.com/msp folder


The startFabric.sh script executes ../basic-network/start.sh, and I'm getting that same error when I run that script directly.

As you can see, the path doesn't look right:

/etc/hyperledger/fabric/C:/Program Files/Git/etc/hyperledger/msp/users/Admin@org1.example.com/msp

Any ideas how to get beyond this issue?

Thanks,
Tim",Windows 10,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01evh:,,,,,,,,mastersingh24,pollockt,,,,,,,,,master,,,true,"20/Jul/17 9:43 AM;mastersingh24;The issue is caused by a ""helpful"" feature of mingw64 / msys (which is what is used by Git Bash for Windows).
 
You should be able to resolve the issue by running
 
export MSYS_NO_PATHCONV=1
./startFabric.sh
 
For details on what is actually happening, you can checkout [http://www.mingw.org/wiki/Posix_path_conversion] and in the table look at the foo=bar example",20/Jul/17 12:27 PM;mastersingh24;https://gerrit.hyperledger.org/r/11773,,,,,,,,,,,,,,,,,,,,,,
fabric unit-tests are failing inconsistently on x86_64 platform,FAB-5380,19354,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,rameshthoomu,rameshthoomu,19/Jul/17 1:38 PM,17/Oct/17 9:30 PM,26/Apr/18 6:50 AM,17/Oct/17 9:29 PM,v1.0.0,,,,,,WON'T FIX,,,fabric-gossip,,,,0,active,gossip,,,,,,,"observed fabric unit-tests are failing inconsistently on x86_64 platform in hyperledger CI. Below are the error log and build references
{code:java}
01:13:34.725 unit-tests_1  | panic: runtime error: invalid memory address or nil pointer dereference
01:13:34.725 unit-tests_1  | [signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0x496c6d]
01:13:34.726 unit-tests_1  | 
01:13:34.726 unit-tests_1  | goroutine 19252 [running]:
01:13:34.726 unit-tests_1  | panic(0xad77a0, 0xc420016060)
01:13:34.727 unit-tests_1  |     /opt/go/src/runtime/panic.go:500 +0x1a1
01:13:34.727 unit-tests_1  | github.com/hyperledger/fabric/gossip/state.TestGossipStateProvider_TestStateMessages.func3(0xc423bbca80, 0xc42526c000, 0xc42506eb40)
01:13:34.728 unit-tests_1  |     /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state_test.go:641 +0x14d
01:13:34.728 unit-tests_1  | created by github.com/hyperledger/fabric/gossip/state.TestGossipStateProvider_TestStateMessages
01:13:34.729 unit-tests_1  |     /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state_test.go:644 +0x33c
01:13:34.729 unit-tests_1  | FAIL    github.com/hyperledger/fabric/gossip/state    47.192s
01:13:36.391 unit-tests_1  | error: exit status 1
01:13:36.394 unit-tests_1  | panic: EOF
01:13:36.394 unit-tests_1  | 
01:13:36.395 unit-tests_1  | goroutine 1 [running]:
01:13:36.395 unit-tests_1  | panic(0x4daca0, 0xc42000a0f0)
01:13:36.395 unit-tests_1  |     /opt/go/src/runtime/panic.go:500 +0x1a1
01:13:36.396 unit-tests_1  | main.main()
01:13:36.396 unit-tests_1  |     /opt/gotools/obj/gopath/src/github.com/AlekSi/gocov-xml/gocov-xml.go:60 +0x15fd{code}
failed build references:

[https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-x86_64/2284/]

[https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-x86_64/2281/]

[https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-x86_64/2279/]",Jenkins x86_64,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i01eol:,,,,,,,,rameshthoomu,yacovm,,,,,,,,,,,,,24/Jul/17 1:21 PM;rameshthoomu;Didn't observe this issue on recent builds . Will monitor for few more days and update the status,"17/Oct/17 9:29 PM;yacovm;I didn't see this happening in a long time and no test in this package is skipped, so I think we can close this",,,,,,,,,,,,,,,,,,,,,,
SDK Go - Instantiate CC should pass in signature policy,FAB-5379,19352,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,bstasyszyn,bstasyszyn,bstasyszyn,19/Jul/17 12:07 PM,02/Aug/17 8:36 PM,26/Apr/18 6:50 AM,02/Aug/17 8:36 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,When instantiating chaincode the endorsement policy should be passed in as an argument to channel.SendInstantiateProposal. Currently the policy is hardcoded.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01eo5:,,,,,,,,bstasyszyn,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
response with payload in fabric-sdk-node,FAB-5377,19350,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,zhaochy,mochechan,mochechan,19/Jul/17 8:54 AM,06/Nov/17 1:31 AM,26/Apr/18 6:50 AM,06/Nov/17 1:31 AM,v1.0.0,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"shim.Error(""payload"")

shim.Success([]byte(""payload""))

Response has payload in peer command and unit test, but response has no payload in Fabric-sdk-node when we invoke a chaincode.

Response should has payload in Fabric-sdk-node.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01enp:,,,,,,,,ChristopherFerris,harrisob@us.ibm.com,mochechan,zhaochy,,,,,,,master,,,true,24/Jul/17 11:35 AM;ChristopherFerris;This is more correctly a bug report than a new feature request.,27/Oct/17 6:09 PM;harrisob@us.ibm.com;[~zhaochy] would you be able to look at this one,"30/Oct/17 5:23 AM;zhaochy;@[~mochechan] Would you please add more details for how you get the payload from sdk-node?

@[~harrisob@us.ibm.com] I updated the tests so that the payload will be checked during the e2e test",,,,,,,,,,,,,,,,,,,,,
fabric java sdk throws a transaction exception if it creates channel on a kafka orderer,FAB-5376,19349,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,chelsea.chen,chelsea.chen,chelsea.chen,19/Jul/17 6:27 AM,15/Aug/17 3:44 PM,26/Apr/18 6:50 AM,15/Aug/17 3:43 PM,,,,,,,Future,,,fabric-sdk-java,,,,0,java-SDK,,,,,,,,"The fabric java sdk and the peer cli behave differently on channel creation. The peer cli does not check the create channel response status value as what the java sdk does. It continues to get genesis block. However, it is very likely the status value of the create channel response of a kafka orderer is 503. As a result, the fabric java sdk will throw a transaction exception and the whole channel creation will fail.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01enh:,,,,,,,,chelsea.chen,rickr,,,,,,,,,,,,,19/Jul/17 9:51 AM;liuwenliang0632; FAB-5178 and FAB-5344,19/Jul/17 11:35 AM;rickr;The operation needs to throw an exception as 503 is an indicator of a failure. The user will need to retry the operation.,15/Aug/17 3:44 PM;rickr;I think this has been addressed in v1.0.1,,,,,,,,,,,,,,,,,,,,,
Peer CLI deliver always returns the same (incorrect) string for error,FAB-5365,19333,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,18/Jul/17 4:50 PM,30/Jul/17 1:22 PM,26/Apr/18 6:50 AM,19/Jul/17 1:51 PM,,,,,,,v1.0.1,,,fabric-peer,,,,0,,,,,,,,,"On deliver failure, the peer always outputs a message which looks like:


{noformat}
Got status:*orderer.DeliverResponse
{noformat}

because the print statement is actually printing the type of the message, not the content.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ekd:,,,,,,,,jyellick,,,,,,,,,,release-1.0,master,,true,18/Jul/17 8:45 PM;jyellick;https://gerrit.hyperledger.org/r/#/c/11733/,,,,,,,,,,,,,,,,,,,,,,,
update link in Google Analytics for docs,FAB-5358,19326,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ryjones,SarahMills,SarahMills,18/Jul/17 2:26 PM,27/Nov/17 10:27 PM,26/Apr/18 6:50 AM,27/Nov/17 10:27 PM,,,,,,,,,,fabric-docs,,,,0,Documentation,,,,,,,,"Google analytics account is linked to:

[http://hyperledger-fabric-docs.readthedocs.io/en/latest/]

needs to be removed and added to this domain:

[http://hyperledger-fabric.readthedocs.io/en/latest/]

cc: [~seanbarclay]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01eit:,,,,,,,,markparz,ryjones,SarahMills,,,,,,,,,,,,26/Oct/17 4:17 PM;markparz;[~ryjones] think this one is something you have the access for...,"27/Nov/17 10:27 PM;ryjones;code UA-99900088-8 is the correct one for the page you're looking at. I removed the code from h-f-d, but h-f was already using -8, so look there.",,,,,,,,,,,,,,,,,,,,,,
Can no longer reach localhost:7050/chain,FAB-5356,19324,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jordan.k.miles,jordan.k.miles,18/Jul/17 2:04 PM,07/Aug/17 8:20 AM,26/Apr/18 6:50 AM,07/Aug/17 8:20 AM,,,,,,,Not a Bug,,,fabric-peer,,,,0,,,,,,,,,"{code:java}

membersrvc:
    image: hyperledger/fabric-membersrvc
    ports:
    - ""7054:7054""
    command: membersrvc
  vp0:
    image: hyperledger/fabric-peer:x86_64-1.0.0
    ports:
      - ""7050:7050""
      - ""7051:7051""
      - ""7053:7053""
    environment:
      - CORE_PEER_ID=vp0
      - CORE_SECURITY_ENROLLID=test_vp0
      - CORE_SECURITY_ENROLLSECRET=MwYpmSRjupbT
      - CORE_PEER_ADDRESSAUTODETECT=true
      - CORE_VM_ENDPOINT=unix:///var/run/docker.sock
      - CORE_LOGGING_LEVEL=DEBUG
      - CORE_PEER_PKI_ECA_PADDR=membersrvc:7054
      - CORE_PEER_PKI_TCA_PADDR=membersrvc:7054
      - CORE_PEER_PKI_TLSCA_PADDR=membersrvc:7054
      - CORE_SECURITY_ENABLED=false
    links:
      - membersrvc
    command: sh -c ""sleep 5; peer node start --peer-chaincodedev""
{code}
Using the above docker-compose-yaml, I can no longer GET localhost:7050/chain or POST localhost:7050/chaincode. I'm wondering if this is a known issue with an update or if it might be something with my OS. This was working about a week ago and nothing has changed in my configuration to my knowledge. I reinstalled all the images, tried mapping 7050 to a different port, etc. but nothing happens. I get no messages from the server when I try to hit that location, and the only thing I get from the Postman side is ""Socket hangup"". Any help would be greatly appreciated. 

As a side note, I have to use hyperledger/fabric-peer:x86_64-1.0.0, as hyperledger/fabric-peer:latest no longer exists in Docker.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01eid:,,,,,,,,jordan.k.miles,mastersingh24,,,,,,,,,,,,,"07/Aug/17 8:19 AM;mastersingh24;[~jordan.k.miles] - Looks like you were actually running Hyperledger Fabric v0.6 which no longer exists.  Hyperledger Fabric v1.0.0 was released in July and has a different architecture then v0.6 (including entirely different endpoints).  v0.6 is no longer actively maintainer nor supported within the Hyperledger Fabric community so the images were actually removed from Dockerhub.

Not sure what stage you are in, but here's a link to the latest docs:   [http://hyperledger-fabric.readthedocs.io/en/latest/]

Please note that there's a whole new ""Getting Started"" section, updated examples, etc",,,,,,,,,,,,,,,,,,,,,,,
"Cannot invoke from CLI when Endorsement Policy is set to ""AND ('Orgx.member', 'Orgz.member')""",FAB-5354,19320,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,rishabh1102,rishabh1102,18/Jul/17 11:18 AM,07/Sep/17 6:40 PM,26/Apr/18 6:50 AM,07/Sep/17 6:40 PM,,,,,,,,,,fabric-peer,,,,0,endorsement,peer,,,,,,,"While trying to invoke the chaincode after instantiation, when there are multiple organisations in the network (Blockchain network), CLI (peer binary) cannot be used to invoke the code when the endorsement policy is set to ""AND"".

Eg1: AND ('Org0.member', 'Org1.member') fails to invoke from peers of either org.

As per my information, networks with AND endorsement policies can only be invoked through the SDKs.",,,,,,,,,,,,,,,,,,,,18/Jul/17 11:16 AM;rishabh1102;error_peer0.org0.log;https://jira.hyperledger.org/secure/attachment/11697/error_peer0.org0.log,18/Jul/17 11:16 AM;rishabh1102;error_peer0.org1.log;https://jira.hyperledger.org/secure/attachment/11698/error_peer0.org1.log,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ehh:,,,,,,,,angelo.decaro,muralisr,rishabh1102,yacovm,,,,,,,,,,,18/Jul/17 11:19 AM;yacovm;[~ales] [~adc] [~muralisr] ,18/Jul/17 2:48 PM;muralisr;[~rishabh1102] CLI does not support sending proposals to multiple peers (yet). A policy that requires multiple signatures is bound to fail from CLI.,"19/Jul/17 12:26 AM;angelo.decaro;Yeah, the CLI is pretty limited at this point. Also the transient field cannot be set. Actually, I have some code that improve the CLI to set also that field. Shall I push?",07/Sep/17 6:40 PM;muralisr;[~rishabh1102] This working as designed with the limited CLI support. SDK has better support for multiple endorsements. Closing this one.,,,,,,,,,,,,,,,,,,,,
Not able to setup a fabric network using IP addresses,FAB-5352,19316,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,tonyyang132,tonyyang132,tonyyang132,18/Jul/17 10:10 AM,01/Aug/17 9:29 AM,26/Apr/18 6:50 AM,01/Aug/17 9:29 AM,v1.0.0,,,,,,v1.1,,,fabric-tools,,,,0,,,,,,,,,"I've been trying to setup a hyperledger fabric network following the e2e_cli example. What I needed to do differently than the default setup was that I configured the all orderers and peers with IP addresses, including in configtx.yaml, base/docker-compose-base.yaml and scripts/script.sh. When it tried to create a channel in script.sh, the following error occurred:

 
{code:java}
 ____    _____      _      ____    _____           _____   ____    _____
/ ___|  |_   _|    / \    |  _ \  |_   _|         | ____| |___ \  | ____|
\___ \    | |     / _ \   | |_) |   | |    _____  |  _|     __) | |  _|
 ___) |   | |    / ___ \  |  _ <    | |   |_____| | |___   / __/  | |___
|____/    |_|   /_/   \_\ |_| \_\   |_|           |_____| |_____| |_____|

Channel name : mychannel
Creating channel...
CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt
CORE_PEER_TLS_KEY_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/server.key
CORE_PEER_LOCALMSPID=Org1MSP
CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
CORE_PEER_TLS_CERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/server.crt
CORE_PEER_TLS_ENABLED=true
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp
CORE_PEER_ID=cli
CORE_LOGGING_LEVEL=DEBUG
CORE_PEER_ADDRESS=172.16.10.31:7051
2017-07-18 09:13:29.326 UTC [msp] GetLocalMSP -> DEBU 001 Returning existing local MSP
2017-07-18 09:13:29.326 UTC [msp] GetDefaultSigningIdentity -> DEBU 002 Obtaining default signing identity
2017-07-18 09:13:29.331 UTC [grpc] Printf -> DEBU 003 Failed to dial 172.16.10.31:7050: connection error: desc = ""transport: authentication handshake failed: x509: cannot validate certificate for 172.16.10.31 because it doesn't contain an
y IP SANs""; please retry.
Error: Error connecting due to  rpc error: code = Internal desc = connection error: desc = ""transport: authentication handshake failed: x509: cannot validate certificate for 172.16.10.31 because it doesn't contain any IP SANs""
Usage:
  peer channel create [flags]

Flags:
  -c, --channelID string   In case of a newChain command, the channel ID to create.
  -f, --file string        Configuration transaction file generated by a tool such as configtxgen for submitting to orderer
  -t, --timeout int        Channel creation timeout (default 5)

Global Flags:
      --cafile string              Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint
      --logging-level string       Default logging level and overrides, see core.yaml for full syntax
  -o, --orderer string             Ordering service endpoint
      --test.coverprofile string   Done (default ""coverage.cov"")
      --tls                        Use TLS when communicating with the orderer endpoint
  -v, --version                    Display current version of fabric peer server

!!!!!!!!!!!!!!! Channel creation failed !!!!!!!!!!!!!!!!
================== ERROR !!! FAILED to execute End-2-End Scenario ==================
{code}
I then tried setting relevant IP addresses as SANS in crypto-config.yaml, but the error was still the same.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01egt:,,,,,,,,tonyyang132,ysim,,,,,,,,,master,,,true,"18/Jul/17 10:22 AM;tonyyang132;I digged a bit further and found the issue in https://github.com/hyperledger/fabric/blob/master/common/tools/cryptogen/ca/generator.go#L103. No matter what is provided as SANS in crypto-config.yaml, current logic assumes they are host names and put them in template.DNSNames. I believe a more reasonable approach would be to examine the content of SANS and if it's an IP address, put it in template.IPAddresses.",18/Jul/17 11:01 AM;tonyyang132;A possible fix - https://gerrit.hyperledger.org/r/11719,19/Jul/17 8:46 AM;tonyyang132;Should have done a better job searching for existing work items before raising this one. It turns out that there has already been a mention of the issue - https://jira.hyperledger.org/browse/FAB-4364.,,,,,,,,,,,,,,,,,,,,,
can not set property 'ordererWaitTimeMilliSecs' for OrdererClient,FAB-5351,19313,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,hongquan.zhang,hongquan.zhang,hongquan.zhang,18/Jul/17 9:07 AM,27/Jul/17 12:53 PM,26/Apr/18 6:50 AM,18/Jul/17 10:05 AM,,,,,,,,,,fabric-sdk-java,,,,0,java-SDK,,,,,,,,"can not set property 'ordererWaitTimeMilliSecs' for OrderClient

'","ubuntu 14.04

fabric-sdk-java",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01egd:,,,,,,,,gangmax,hongquan.zhang,,,,,,,,,,,,,"27/Jul/17 12:53 PM;gangmax;h3. Hi, I'm facing this issue. When will this fix be released? Thanks!

 

 

 ",,,,,,,,,,,,,,,,,,,,,,,
MSP Identity Identifier should be computed after certificate sanitisation,FAB-5350,19310,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,angelo.decaro,angelo.decaro,18/Jul/17 1:16 AM,03/Aug/17 7:58 AM,26/Apr/18 6:50 AM,03/Aug/17 7:57 AM,v1.0.0,,,,,,v1.1,,,fabric-crypto,,,,0,help-wanted,MembershipServices,Security,,,,,,"The MSP Identity Identifier consists of the MSP id and the Hash of the identity's certificate. 
Currently, it is computed before the certificate sanitisation. So, an attacker can still hope to present itself with two valid identities to the network.

So far, Fabric does not use the Identity Identifier to reason about access control so the above does not constitute an issue. It anyway needs to be fixed in order to allow to reason about Identity Identifiers in a safe way, 

This change is required to be able to add caching mechanisms to MSP to improve performances.

[~ellaki], [~ales], please, have your say :)
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz4r:ziz,,,,,,,,angelo.decaro,elli-androulaki,,,,,,,,,master,,,true,"03/Aug/17 7:58 AM;elli-androulaki;[https://gerrit.hyperledger.org/r/#/c/11929/]

 ",,,,,,,,,,,,,,,,,,,,,,,
Admin certificate is generated as a CA certificate,FAB-5348,19307,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jtrayfield,jtrayfield,17/Jul/17 7:07 PM,04/Sep/17 1:34 PM,26/Apr/18 6:50 AM,04/Sep/17 1:34 PM,,,,,,,v1.0.2,,,fabric-crypto,,,,0,,,,,,,,,"I get this error from the CLI:

 

Channel name : OATS

Creating channel...

CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/oats.ibm.com/peers/peer0.oats.ibm.com/tls/ca.crt

CORE_PEER_TLS_KEY_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/oats.ibm.com/peers/peer0.oats.ibm.com/tls/server.key

CORE_PEER_LOCALMSPID=OATSMSP

CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock

CORE_PEER_TLS_CERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/oats.ibm.com/peers/peer0.oats.ibm.com/tls/server.crt

CORE_PEER_TLS_ENABLED=true

CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/oats.ibm.com/users/Admin@oats.ibm.com/msp

CORE_PEER_ID=cli

CORE_LOGGING_LEVEL=DEBUG

CORE_PEER_ADDRESS=peer0.oats.ibm.com:7051

{color:#ff0000}2017-07-17 18:56:27.429 UTC [main] main -> ERRO 001 Cannot run peer because error when setting up MSP from directory /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/oats.ibm.com/users/Admin@oats.ibm.com/msp: err admin 0 is invalid, validation error Could not obtain certification chain, err A CA certificate cannot be used directly by this MSP{color}

!!!!!!!!!!!!!!! Channel creation failed !!!!!!!!!!!!!!!!

========= ERROR !!! FAILED to execute End-2-End Scenario ===========

 

I think the root cause is that the Admin cert is a CA cert:

$ openssl x509 -text -noout -in crypto-config/peerOrganizations/oats.ibm.com/users/Admin\@oats.ibm.com/msp/admincerts/ca.oats.ibm.com-cert.pem 

Certificate:

    Data:

        Version: 3 (0x2)

        Serial Number:

            31:58:e0:0f:93:51:92:ab:0c:5b:36:77:ac:3c:38:ce

    Signature Algorithm: ecdsa-with-SHA256

        Issuer: C=US, ST=California, L=San Francisco, O=oats.ibm.com, CN=ca.oats.ibm.com

        Validity

            Not Before: Jul 17 18:26:27 2017 GMT

            Not After : Jul 15 18:26:27 2027 GMT

        Subject: C=US, ST=California, L=San Francisco, O=oats.ibm.com, CN=ca.oats.ibm.com

        Subject Public Key Info:

            Public Key Algorithm: id-ecPublicKey

                Public-Key: (256 bit)

                pub: 

                    04:1b:48:47:3d:1c:9b:9c:dc:0f:9e:22:5e:cc:4c:

                    76:d0:cc:27:23:ea:72:22:74:57:de:7c:84:69:73:

                    51:4e:61:bd:d3:34:75:72:a1:8c:89:f0:5e:78:c7:

                    5f:0d:34:8c:ba:d9:36:42:37:39:1b:35:78:d7:a3:

                    b2:7d:1d:ae:ce

                ASN1 OID: prime256v1

                NIST CURVE: P-256

        X509v3 extensions:

            X509v3 Key Usage: critical

                Digital Signature, Key Encipherment, Certificate Sign, CRL Sign

            X509v3 Extended Key Usage: 

                Any Extended Key Usage, TLS Web Server Authentication

            X509v3 Basic Constraints: critical

                CA:TRUE

 

When I replace the admin cert with the admin MSP signcert, I don't get the error anymore.

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01efp:,,,,,,,,chljapan,jtrayfield,mastersingh24,,,,,,,,,,,,"19/Jul/17 2:53 PM;jtrayfield;I get this with the vanilla fabric-samples/first-network:



2017-07-19 14:51:24.817 UTC [main] main -> ERRO 001 Cannot run peer because error when setting up MSP from directory /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp: err admin 0 is invalid, validation error Could not obtain certification chain, err A CA certificate cannot be used directly by this MSP

!!!!!!!!!!!!!!! Channel creation failed !!!!!!!!!!!!!!!!

 ",23/Aug/17 3:22 AM;chljapan;Can you give me a detailed plan?  by step! Thanks！！！！,"04/Sep/17 1:33 PM;mastersingh24;This is not the case with the current versions of the artifacts generated by the cryptogen tool.
Please move to v1.0.2  - http://hyperledger-fabric.readthedocs.io/en/latest/samples.html#download-platform-specific-binaries - and re-open if there are any issues",,,,,,,,,,,,,,,,,,,,,
Go SDK - NewChannel set nil in the channels array,FAB-5343,19301,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,firas.qutishat,firas.qutishat,firas.qutishat,17/Jul/17 3:41 PM,02/Aug/17 8:37 PM,26/Apr/18 6:50 AM,02/Aug/17 8:37 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01eed:,,,,,,,,firas.qutishat,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Solo does not respect updated batch timeout,FAB-5341,19299,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,17/Jul/17 2:49 PM,30/Jul/17 1:22 PM,26/Apr/18 6:50 AM,17/Jul/17 7:41 PM,,,,,,,v1.0.1,,,fabric-orderer,,,,0,,,,,,,,,"Solo is currently initialized with a batch timeout value, and even when it is modified by a config update, will retain the old batch timeout until restart.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01edx:,,,,,,,,jyellick,,,,,,,,,,release-1.0,master,,true,17/Jul/17 3:24 PM;jyellick;In review via: https://gerrit.hyperledger.org/r/#/c/11685/,,,,,,,,,,,,,,,,,,,,,,,
Message max size reconfiguration only respected on restart,FAB-5340,19298,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,17/Jul/17 2:35 PM,30/Jul/17 1:22 PM,26/Apr/18 6:50 AM,17/Jul/17 7:41 PM,,,,,,,v1.0.1,,,fabric-orderer,,,,0,,,,,,,,,"The max message size parameters are only read when the the size filter is constructed, not at each invocation.  This means that if the batch size is reconfigured, the filter will only pick this up on restart.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01edp:,,,,,,,,jyellick,,,,,,,,,,release-1.0,master,,true,17/Jul/17 2:48 PM;jyellick;In review via: https://gerrit.hyperledger.org/r/#/c/11683/,,,,,,,,,,,,,,,,,,,,,,,
Add nil check to String() method in gossip/extensions,FAB-5339,19295,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,17/Jul/17 2:00 PM,30/Jul/17 1:22 PM,26/Apr/18 6:50 AM,18/Jul/17 10:01 AM,v1.0.0,,,,,,v1.0.1,,,fabric-gossip,,,,0,,,,,,,,,"There is a case in the code where it is done:
{code:java}
    if m.GossipMessage != nil {
        ...
        } else if m.IsDataMsg() {
            gMsg = m.GetDataMsg().Payload.toString()
         ...
    }{code}
If somehow *m.GetDataMsg().Payload* is nil, this would result in a null pointer panic.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ed1:,,,,,,,,mastersingh24,yacovm,,,,,,,,,release-1.0,master,,true,18/Jul/17 10:01 AM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/11681,,,,,,,,,,,,,,,,,,,,,,,
Intermediate CA does not copy CSP config from server to client,FAB-5334,19289,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,vpaprots,vpaprots,vpaprots,17/Jul/17 3:19 AM,31/Jul/17 10:03 AM,26/Apr/18 6:50 AM,21/Jul/17 10:59 AM,v1.0.0,,,,,,v1.0.1,,,fabric-ca,,,,0,,,,,,,,,"Intermediate-CA internally creates a client, and sends a CSR to the parent CA. This client must use the same CSP config as the server, so that the server can later access the keys generated by the client.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:rhw9mi,,,,,,,,mastersingh24,vpaprots,,,,,,,,,release-1.0,master,,true,17/Jul/17 8:11 AM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/11475/,,,,,,,,,,,,,,,,,,,,,,,
Inconsistent results between in real Fabric chaincode deployment and in unit test,FAB-5333,19288,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,mochechan,mochechan,17/Jul/17 1:57 AM,27/Nov/17 4:09 AM,26/Apr/18 6:50 AM,27/Nov/17 4:09 AM,,,,,,,,,,fabric-devenv,fabric-quality,,,0,,,,,,,,,"If we use stub.PutState and stub.GetState in the same Invoke, we will get inconsistent results between in real Fabric chaincode and in unit test. Here gives a simple example:

76 func (t *CC) Invoke(stub shim.ChaincodeStubInterface) peer.Response \{
 77 var err error
 78 var byteArray []byte
 79 
 80 err = stub.PutState(""just-existing"", []byte(""just-data""))
 81 if err != nil \{
 82 return shim.Error(err.Error())
 83 }
 84 
 85 byteArray,err = stub.GetState(""just-existing"")
 86 if err != nil \{
 87 return shim.Error(err.Error())
 88 }
 89 if byteArray == nil \{
 90 fmt.Println(""success but no data "")
 91 }
 92 fmt.Println(string(byteArray))
 93 }

If we run this Invoke only one time in unit test, we will get ""just-data"".

if we run this Invoke only one time in real Fabric deployment, we will get ""success but no data"".

 ",,,,,,,,,,,,,,,,FAB-5832,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ebh:,,,,,,,,denyeart,mochechan,,,,,,,,,,,,,"27/Nov/17 4:09 AM;denyeart;Dup of FAB-5832, closing.",,,,,,,,,,,,,,,,,,,,,,,
Make delivery service stop pulling blocks if ledger is stuck,FAB-5332,19286,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,16/Jul/17 1:26 PM,01/Nov/17 2:18 PM,26/Apr/18 6:50 AM,01/Nov/17 2:18 PM,v1.0.0,,,,,,Abandoned,,,fabric-peer,,,,0,,,,,,,,,"In some cases, the delivery service pulls blocks while the ledger may be stuck, i.e if the file system is full.

 

There is no point in doing so, and we need to:
 * Make the delivery service stop pulling blocks
 * Perhaps also disable the leader election module for that channel until the peer's ledger recovers.

 

[~C0rWin] [~gennadyl]  opinions?","Closing the tickets since:

1. If there is an error on FS level, the commit will fail eventually leading peer to panic and exit.

2. It's very unlikely to get into situation where write will hangs on indefinitely, hence per discussion with @yacovm we should not try to over complicate code providing solution for this case.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01eb9:,,,,,,,,C0rWin,jeffgarratt,muralisr,yacovm,,,,,,,,,,,07/Sep/17 6:38 PM;muralisr;[~yacovm] can you add a comment what context this came out of (I vaguely remember there was a different context that instigated this JIRA) ?,"07/Sep/17 7:33 PM;yacovm;Basically HSBN had a problem where the writes were failing and the deliver service was simply pulling more and more blocks indefinitely. 
That's what I remember, [~C0rWin] can correct me if I'm wrong.

After [this|https://gerrit.hyperledger.org/r/#/c/12495/] fix went in, however- the operation would block starting from a certain block gap between the ledger and the deliver service.
so.. in a way, the first bullet is fulfilled.
The second bullet - no so much. 

We need to think more about how and whether to do this.
[~C0rWin] opinions? What shall be done with this JIRA?",26/Oct/17 7:23 PM;jeffgarratt;[~yacovm] [~C0rWin] Any updates to this one?,"31/Oct/17 8:59 PM;C0rWin;Currently if ledger got stuck, for example due to the fact that file system is full, the commit of the block will fail and peer will result with panic. While, I understand the intent behind this ticket and even if we do delivery service and leader election to stop, the only way to resume will be to restart the peer, which for such situation seems reasonable. 

If we going on adding functionality to stop delivery service and leader election, we need to think how we would alert or let operator to know that peer has to be resumed. 

As a first step I'd suggest adding exponential backoff strategy to retry committing new blocks in case of failure.","31/Oct/17 10:39 PM;yacovm;Here is an idea: 

As well known, the state module has a goroutine which repeatedly does something that can be roughly described as :
{code}
case <-s.payloads.Ready()    // wait until the next block in order is available
          s.payloads.Pop()   // pop that block
          commit block
{code}


The payload buffer (s.payloads) is fed blocks by the goroutine of the deliver service via addPayload in blocking mode, and the relevant part of the code is:
{code}
	for blockingMode && s.payloads.Size() > defMaxBlockDistance*2 {
		time.Sleep(enqueueRetryInterval)
	}

return s.payloads.Push(payload)
{code}

As we know, if the payload buffer is ""too full"", the goroutine that calls addPayload in blocking mode - spins in the for loop above doing sleep until the size of the payload buffer is reduced enough.
So, essentially we  have a struct (the one in state.go) that 2 goroutines have access to it concurrently:
* The goroutine which commits the blocks into the ledger
* The goroutine which passes the blocks to the 1st goroutine via the payload buffer, and if the file system is full - it will be either:
** stuck in receiving a block from the payload buffer
** stuck doing an endless sleep waiting for the payload buffer to get smaller in size.

I think that for v1.1 what we can do is:
* Have an atomic variable that is:
** Set to the current time right before commitBlock() is called
** Set to 0 right after commitBlock() is called
* Have the code in addPayload check in the for loop that sleeps, whether the difference between the current time and the last time commitBlock() was called isn't too high.
If it is - it means that commitBlock() takes too much time and it is stuck, so return a special error that the blocks provider (in the deliver service) would check and if it would indicate the ledger is stuck, then we ""return"" (this is the code path that triggers the leader election to give up on leadership)


What do you think [~C0rWin] ? 
",,,,,,,,,,,,,,,,,,,
Fix formatting of channel in gossip String(),FAB-5331,19285,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,16/Jul/17 1:23 PM,30/Jul/17 1:22 PM,26/Apr/18 6:50 AM,17/Jul/17 8:18 AM,v1.0.0,,,,,,v1.0.1,,,fabric-gossip,,,,0,active,gossip,,,,,,,"Historically, gossip keeps the channel name in messages *[]byte* instead of in *string*s.

There is a String() method that formats complex messages and it does:
{code:java}
desc := fmt.Sprintf(""Channel: %v, nonce: %d, tag: %s"", m.Channel, m.Nonce, GossipMessage_Tag_name[int32(m.Tag)]){code}
since the channel is a byte array, the channel is printed to the log as bytes: *[121 97 99 111 118]*

It would be beneficial to print instead a string, for usability of log parsing.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01eb1:,,,,,,,,mastersingh24,yacovm,,,,,,,,,release-1.0,master,,true,17/Jul/17 8:17 AM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/11673/,,,,,,,,,,,,,,,,,,,,,,,
Prevent state transfer payload buffer overpopulation,FAB-5330,19284,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,16/Jul/17 12:46 PM,30/Jul/17 1:22 PM,26/Apr/18 6:50 AM,20/Jul/17 7:27 PM,v1.0.0,,,,,,v1.0.1,,,fabric-gossip,,,,0,active,gossip,,,,,,,"The state transfer module receives blocks from either the orderer or from other peers and puts them into a payload buffer, where blocks are reordered in order to be sent into the ledger in-order.

In some cases, the payload buffer may fill up and over-populate:
 * If a peer is missing lots of blocks because it joined the channel late, it will receive blocks from other peers  but won't be able to commit them until it receives the missing blocks it needs from neighboring peers. In the meantime - the blocks from the ordering service would be kept in the payload buffer
 * If the ledger is stuck (i.e file system full) the peer would still end up filling the payload buffer

What we probably need to do is to skip putting blocks into the payload buffer, if the difference in the block sequence and the ledger height is bigger than some configurable size.

 

[~C0rWin]

[~gennadyl]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01eat:,,,,,,,,yacovm,,,,,,,,,,release-1.0,master,,true,18/Jul/17 4:26 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/11727/,,,,,,,,,,,,,,,,,,,,,,,
Able to instantiate on a taken chaincode ID by changing case,FAB-5329,19283,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,dshuffma,dshuffma,15/Jul/17 6:59 PM,30/Jul/17 1:22 PM,26/Apr/18 6:50 AM,26/Jul/17 8:50 PM,v1.0.0-rc1,,,,,,v1.0.1,,,fabric-peer,,,,0,,,,,,,,,"First step I did is install and instantiated chaincode ID _{{marblesRC1}}_. notice the *uppercase* _RC_.
 * worked just fine no errors
 * looking at the chaincode's container name: _[truncated]-fabric-peer-org1-28882c0-marblesrc1-v4_
 **  it does *NOT* contain any uppercase characters
 * I ran marbles on this chaincode. The SDK apis was fed _{{marblesRC1.}}_ {{notice the }}*uppercase* letters and worked just fine reaching the lowercase docker container.
 * APIs such as list install chaincode have the case preserved as _{{marblesRC1}}_
 * Everything seems happy so far

Second step I did is install and instantiate chaincode _{{marblesrc1}}_. notice the *lowercase* _rc_.
 * worked just fine no errors (this is surprising)
 * looking for the chaincode's docker container I found that there are *no* new containers! it reused the same container.... *this is bad*
 ** I confirmed its the same container by looking at the status up time. It had been reset since the 1st instantiate

 

Whatever code is running to see if a chaincode ID is already in use is currently case sensitive.  This is a problem since something (maybe docker?) is translating them to lowercase.

 
 * I'm using fabric v1 RC1 via the bluemix service.
 * Install/instantiate were done using the SDK v1.0.0-rc1

 

Also note that instantiate will fail if I try the exact ID twice, as expected.  ex: instantiate *marblestest* twice will fail on the 2nd attempt. (this is good)

 

 

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01eal:,,,,,,,,dshuffma,muralisr,wlahti,yacovm,,,,,,,release-1.0,master,,true,17/Jul/17 8:40 PM;yacovm;It's supposed to be a different one (I tried something similar locally and the id of the container changed). I'm sure that if you take a look you'll see it's id (using docker ps) is different.,17/Jul/17 8:44 PM;yacovm;[~muralisr] ^,"17/Jul/17 10:23 PM;muralisr;[~dshuffma] [~yacovm] Docker does not allow uppercase letters. We used pass names directly to Docker and report any error back to user. However that was changed by name sanitization in https://jira.hyperledger.org/browse/FAB-2929. 

We could do one of the following
 # prohibit users from using uppercase chars in chaincode name
 # return error name resolves to an existing chaincode name after sanitization (ie, ""A"" is allowed if \{""A"" or ""a""} does not exist)
 # add a  ""-""  or ""."" in front of each upper case char in the docker name before sanitization.  Those chars are allowed by docker but not by the fabric in a chaincode name.

(1) is unreasonably restrictive and elevates docker-specific restriction to all chaincodes
(2) is arbitrary  - sometimes upper case will work and sometimes not.
(3) seems reasonable and self-contained to dockercontroller. No other component need to change.

[~binhn] [~greg.haskins] [~mastersingh24]

Thoughts please ?","18/Jul/17 5:21 AM;yacovm;What if we hash the CC name and append it to the image name?

So image name of exampleCC would be translated to *{{dev-peer-examplecc-1.0-3cd162fc0f9ad15eb7ff6331a193996c65654da4}}* 

and image name of examplecc would be translated to *{{dev-peer-examplecc-1.0-7c026e4e18ca1345e918b4da5a043e2001082a68}}* 

or do you need a backwards translation too from the image name to the CC name?","18/Jul/17 2:33 PM;muralisr;[~yacovm] now that would be too easy wouldn't it ;-)  ?

We don't need backward translation and you are absolutely right, I like using hash way better.","18/Jul/17 5:25 PM;dshuffma;I don't care what specific solution you guys come up with. What I do need is the ability to get a docker status on the container. (to figure out if its running and for how long). Therefore if you do *any* manipulation of the name, you need to record it somewhere that I can read from later. So that I can look up the correct *container's* status via docker.  Such as when I ask the peer to list the chaincode instantiated on this channel, that name data should be there.

 

from a debugging perspective hashing the name is a huge pain in the ass.  I won't know which container is which with out looking it up. ie when I want to grab logs of the container running chaincode id *testChaincode*, you've now made that much more complicated.","18/Jul/17 5:58 PM;muralisr;[~dshuffma] the main issue is we are converting caps to small (thanks to docker restriction) and have collision with docker names. The secondary issue is you want to know the chaincode name given the container name.

*dev-peer-examplecc-1.0-7c026e4e18ca1345e918b4da5a043e2001082a68* contains both the original string and the hash . We have to have *something* in the name that differentiates.

Note that using just *7c026e4e18ca1345e918b4da5a043e2001082a68* as the container name would have worked as well but would have been harder to map for you.",19/Jul/17 2:39 PM;dshuffma;sounds good to me,"19/Jul/17 3:38 PM;dshuffma;yes! that would be great. 

just to reiterate: I need the actual in use docker container name to programmatically look up the chaincode container's status and logs. So including the full name, anywhere, would be super helpful.",19/Jul/17 3:55 PM;wlahti;I removed my previous comment prior to your response but maybe I should have just edited it. I'm trying to see if there's any good way to provide more information about which container is which. Modifying the LSCC to contain container name doesn't seem like a feasible/smart solution.,"20/Jul/17 2:18 PM;wlahti;I plan to resolve this (and address David's usability concern) by 1) adding the hash to the end of the image name (as this is the only part where Docker requires all lowercase) and 2) preserving the capitalization in the container name. This should ensure that a chaincode named mycc will not have its container taken by a later instantiation of chaincode myCC. 
{code:java}
CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
834d6283bfc7 dev-peer0.org2.example.com-mycc-1.0-f90580f44c3faa95cf2e20d41f5fbb5e89d4234ecbf3589f20b419888b187f81 ""chaincode -peer.a..."" 1 second ago Up Less than a second dev-peer0.org2.example.com-myCC-1.0
7bdc455fbb5a dev-peer0.org2.example.com-mycc-1.0-15b571b3ce849066b7ec74497da3b27e54e0df1345daff3951b94245ce09c42b ""chaincode -peer.a..."" 40 seconds ago Up 39 seconds dev-peer0.org2.example.com-mycc-1.0{code}",25/Jul/17 2:52 AM;wlahti;CR submitted to gerrit and awaiting review: https://gerrit.hyperledger.org/r/#/c/11819/,,,,,,,,,,,,
docker-compose example using host time,FAB-5322,19276,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,liuwenliang0632,liuwenliang0632,liuwenliang0632,15/Jul/17 5:06 AM,30/Sep/17 6:23 PM,26/Apr/18 6:50 AM,30/Sep/17 6:23 PM,v1.0.0,,,,,,Not a Bug,,,fabric-examples,,,,0,,,,,,,,,when i test e2e. the time looks diffurent between container and my host time.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01e91:,,,,,,,,ChristopherFerris,liuwenliang0632,mastersingh24,,,,,,,,,,,,"16/Jul/17 9:33 AM;mastersingh24;[~liuwenliang0632] This is not a bug at the fabric level.  There should not be any time skew when running Docker on Linux, but if running Docker for Mac / Windows or Docker Toolbox for Mac / Windows this does happen occasionally.  The best course of action is to restart Docker on those host platforms.  The issue there is that Docker runs on a VM and the VM can be out of sync with the host","13/Sep/17 12:26 PM;ChristopherFerris;[https://gerrit.hyperledger.org/r/c/11665/]

IMO, this CR should be abandoned and the JIRA closed.",,,,,,,,,,,,,,,,,,,,,,
NodeSDK - queryBlock() does not return transaction status,FAB-5321,19274,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,14/Jul/17 9:11 PM,09/Aug/17 7:42 PM,26/Apr/18 6:50 AM,17/Jul/17 3:59 PM,v1.0.0,,,,,,v1.0.1,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,The queryBlock() APIs do not return values for the transaction status.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01e8l:,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,release-1.0,master,,true,14/Jul/17 9:33 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/11661/,,,,,,,,,,,,,,,,,,,,,,,
Remove unneeded runtime jars and update to latest.,FAB-5315,19264,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rickr,rickr,rickr,14/Jul/17 3:16 PM,21/Jul/17 12:27 PM,26/Apr/18 6:50 AM,21/Jul/17 12:27 PM,v1.0.1,,,,,,v1.0.1,,,fabric-sdk-java,,,,0,,,,,,,,,There are dependencies being include which are not needed during runtime  namely one is Java coco.  Also many dependencies are out of date.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01e71:,,,,,,,,rickr,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Allow OU to be provided for enrolment into fabric-ca client,FAB-5314,19263,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aleksandar.likic,troyronda,troyronda,14/Jul/17 2:01 PM,15/Feb/18 3:56 PM,26/Apr/18 6:50 AM,15/Feb/18 3:56 PM,,,,,,,Future,,,fabric-sdk-go,,,,0,,,,,,,,,One suggestion we received is to allow the CSR to be set during enrolment and to expand fabric-ca tests (inc integration tests) to use a generated certificate to propose a transaction.,,,,,,,,,,,,,,,,,FAB-8269,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzyuz:z9n4,,,,,,,,mastersingh24,passkit,smithbk,troyronda,,,,,,,,,,,"14/Jul/17 2:04 PM;troyronda;[~divyank] has confirmed this is an issue.

Also the tests aren't currently revealing the issue due to only have pre-enrolled users in the current integration tests.","14/Jul/17 2:21 PM;passkit;This issue is critical, since the CSR is the only way to set the OU for a new user.  Hyperledger Fabric v1.0.0 requires the OU to be set and as such, any certificates the SDK generates cannot be used. ","06/Aug/17 11:39 AM;mastersingh24;[~passkit]   The Hyperledger Fabric runtime DOES NOT require the OU to be set unless you choose to use the same root CA and use OUs to distinguish organizations in MSPs.  If each organization uses a different root CA, then OU's are not applicable at all.

[~troyronda] [~divyank]  I am not sure exactly what the ask is here?  You can definitely include a CSR with your enroll request.

 

 ","07/Aug/17 5:09 AM;passkit;[~mastersingh24], maybe it is not critical, but for users who choose to use OU's, the GO SDK does not allow for the CSR to be set for an enrol request.

This is part of a wider issue that there are many places within the SDK that make assumptions and either hard code variables or omit optional variables.  The general principle should be that if the Fabric APIs allow a parameter to be set, then the SDK should provide the ability to do so.  In this case the authors have assumed that a CSR will not be required and have not provided the option to pass one through in the fabric-ca enrol request made by the SDK's fabric-ca client.

","07/Aug/17 8:13 AM;mastersingh24;My bad - I did not notice that this was specific to the Go SDK.

(I actually implemented the fabric-ca-client for Node JS and it does allow you to specify a CSR if you want)","15/Feb/18 12:36 PM;smithbk;The fabric-ca-server always issues certificates with OUs set according to the identity type and affiliation.  For example, if the identity type is ""peer"" and the affiliation is ""a.b"", then the OUs are ""OU=peer, OU=a, OU=b"". 
The reason for doing this is:
1) fabric-ca-server has governance around the type and affiliation fields of a user; that is, it is not the enroller who decides what type and affiliation they get, but rather it is the registrar.  And furthermore, a registrar can be given privileges to register identities with only particular types and affiliations.
2) fabric makes authorization decisions about who is a peer, orderer, or client based on OUs.
Therefore, this means it is the registrar, not the enroller, who decides what OUs they get.  This is important so that for example if a client is given an enrollment ID and secret to get an e-cert, this client could not turn around and get an ecert with an OU which would allow them to masquerade as a peer or orderer.",15/Feb/18 3:27 PM;troyronda;[~aleksandar.likic] - I am closing this one as OU isn't directly set. We do need to ensure that type and affiliation can be set in your new identity client API.,,,,,,,,,,,,,,,,,
Timer for leader election on Org's peers,FAB-5313,19260,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,SotirisAlfonsos,SotirisAlfonsos,14/Jul/17 1:00 PM,30/Jul/17 1:22 PM,26/Apr/18 6:50 AM,26/Jul/17 2:50 PM,,,,,,,v1.0.1,,,fabric-gossip,,,,0,active,gossip,,,,,,,"There was an issue where, if the leader of an organisation starts dropping packets on his communication with the orderer, the entire organisation will never get the new blocks. Killing the leader made the org elect a new leader, that was able to fetch the blocks from the orderer.

Reproducing the issue:

We create the containers where org1 belongs to two channels and controls 2 peers ( _{{peer0.org1.example.com,}}_ _{{peer1.org1.example.com}}_ ). We am triggering the network delays. So an iptables rule that classifies the packets going from the _{{orderer}}_ to _{{peer0.org1.example.com}}_. Then with a _{{tc qdisc}}_ {{rule}} we apply package loss 100% to those packets. 

Now we run our code that goes: user enrollment, channel creation, join channels, install chaincode. Everything works up to that point. Now we are sending two instantiates, one for each channel, and sending them both to  _{{org1}}_. The instantiates are signed by both {{_peer0.org1.example.com_,}} _{{peer1.org1.example.com}}_, and now we would expect for the orderer to send the block to the peers. _{{peer0.org1.example.com}}_ should not receive the block, and he does not. But we would expect that _{{peer1.org1.example.com}}_ would receive the block, but he does not. 

A new leader is not elected so both pears will never get the new blocks.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i01e6l:,,,,,,,,SotirisAlfonsos,yacovm,,,,,,,,,release-1.0,master,,true,14/Jul/17 2:05 PM;yacovm;[~C0rWin],"14/Jul/17 4:00 PM;yacovm;{quote}and now we would expect for the orderer to send the block to the peers. _{{peer0.org1.example.com}}_ should not receive the block
{quote}
So this isn't true. Peers can receive blocks via gossip from one another. 
The problem here is - a peer can be a leader but doesn't relinquish its leadership when it can't connect to the ordering service.

A way to solve this would be to just make the leader election module ""give up"" *for a certain amount of time* if the orderer isn't reachable *and if the given peer is a leader*.
If the orderer is unreachable for all peers - we would expect the first leader to give up, then the second to give up, and so on and so forth in a rotating fashion until the ordering service would be reachable again.

 

[~C0rWin] 
[~gennadyl] 

Thoughts?",22/Jul/17 11:20 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/11751/,,,,,,,,,,,,,,,,,,,,,
spelling error in instantiate-chaincode.js of balance-transfer and node sdk ,FAB-5311,19253,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,glindsell,bh4rtp,bh4rtp,14/Jul/17 8:11 AM,16/Aug/17 4:51 PM,26/Apr/18 6:50 AM,16/Aug/17 4:51 PM,,,,,,,,,,fabric-samples,,,,0,,,,,,,,,"In the app/instantiate-chaincode.js, there is a spelling error at line 148:

return 'Chaincode Instantiateion is SUCCESS';

It should be Instantiation.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01e51:,,,,,,,,bh4rtp,glindsell,,,,,,,,,master,,,true,18/Jul/17 8:46 PM;jimthematrix;https://gerrit.hyperledger.org/r/#/c/11649/,,,,,,,,,,,,,,,,,,,,,,,
"configtxgen does not appropriately set the ""mod_policy"" for the application policies for new channels",FAB-5309,19248,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,sandp125,sandp125,13/Jul/17 9:45 PM,04/Oct/17 3:17 PM,26/Apr/18 6:50 AM,19/Jul/17 10:12 AM,v1.0.0,,,,,,v1.0.1,,,fabric-tools,,,,0,quality,,,,,,,,"configtxgen sets the ""mod_policy"" for  ""/Channel/Application/*.policies"" to {{""""}}, rather than to {{""Admins""}} as you would expect. As a result of this, any config update on these policies is failing with error ""{color:#ff0000}Rejecting CONFIG_UPDATE because: Error authorizing update: Error validating DeltaSet: Unexpected missing policy for item [Policy] /Channel/Application/Admins{color}"". 

 ",,,,,,,,,,,,,,,,,FAB-5347,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01e3x:,,,,,,,,billotosyr,davidkhala,jichen,jyellick,ruf47,sandp125,scottz,,,,release-1.0,master,,true,13/Jul/17 9:46 PM;sandp125;Discussed this with [~jyellick]. He found an issue in the code.,"13/Jul/17 9:54 PM;scottz;Hi [~jyellick] . It appears Sandeep found a good bug in the configtxgen tool. I think it is ALSO a bug in the orderer, which should not have accepted the create-channel config transaction in the first place because it was incomplete. I would think a modification policy, for every policy, should be required (except for those policies (if any) that can never be changed). Could you put that enforcement in the fabric code too?","14/Jul/17 4:42 AM;jyellick;[~scottz] Yes, this is a good find by [~sandp125]

If this were pre-v1, I would be inclined to make the breaking change you suggest.  However, as this would break existing deployments, I don't think forbidding this action is a good idea for 1.0.1.  I think the appropriate course of action is to add a warning to the log for now, and once we have a way to differentiate between fabric versions, consider enforcing it strictly for new channels.",14/Jul/17 5:15 AM;jyellick;Fix available in review via https://gerrit.hyperledger.org/r/#/c/11645/,"23/Aug/17 6:38 AM;jichen;I tried [http://hyperledger-fabric.readthedocs.io|http://hyperledger-fabric.readthedocs.io/] and got following while my configtxgen is 1.0.1 ,any comments? Thanks

 

orderer | 2017-08-23 06:32:44.329 UTC [orderer/common/broadcast] Handle -> WARN 3f2 Rejecting CONFIG_UPDATE because: Error authorizing update: Error validating DeltaSet: invalid mod_policy for element [Policy] /Channel/Application/Writers: mod_policy not set
orderer | 2017-08-23 06:32:44.335 UTC [orderer/main] func1 -> DEBU 3f3 Closing Broadcast stream
orderer | 2017-08-23 06:32:44.335 UTC [orderer/common/deliver] Handle -> WARN 3f4 Error reading from stream: rpc error: code = Canceled desc = context canceled

 

jichen@test2:~/go/fabric-samples/chaincode-docker-devmode$ configtxgen --version
configtxgen:
 Version: 1.0.1
 Go version: go1.7
 OS/Arch: linux/amd64",23/Aug/17 2:35 PM;jyellick;[~jichen] Please double check that you have regenerated the transaction using the 1.0.1 version of {{configtxgen}}.  This error should occur with a v1.0.0 and lower version of {{configtxgen}}.,"25/Aug/17 3:33 AM;jichen;[~jyellick] sorry to ask but I am new to blockchain and I am learning through 

[http://hyperledger-fabric.readthedocs.io/en/latest/chaincode4ade.html]

seems it's just a docker compose command to start the environment and I don't know how to use configtxgen explicitly...

I am sure my env is 1.0.1 as it's built 2 days before and I saw this bug already fixed for about 1 month...

 

will check more and see whether I can have any clue , thanks for your info","30/Aug/17 8:35 AM;ruf47;Hello, 

I have the same problem that [~jichen] . 

[~jyellick], you told him that he should use new configtxgen tool. However please note that in project [https://github.com/hyperledger/fabric-samples/tree/release/chaincode-docker-devmode] , artefacts are already generated and posted. Probably the reason of this error is usage of artefacts generated by old configtxgen tool with bug mentioned. Do you know with whom I can contact to regenerate this artefacts and push on GitHub? 

Brgds

Rafal",31/Aug/17 11:44 PM;billotosyr;I've just hit this same problem – and there are many people on the internet reporting it on Stack Overflow and elsewhere. Basically the public fabric-samples don't work. Could someone please regenerate the artifacts with the new configtxgen tool? Thanks.,01/Sep/17 1:41 AM;jyellick;[~billotosyr] [~ruf47] Sorry about this.  I meant to post back after checking with our release manager.  We are very close to cutting v1.0.2 and will be sure to update these samples in the process.,,,,,,,,,,,,,,
make unit-tests fails on Windows 7 TestMaxEnrollmentLimited,FAB-5305,19242,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lehors,lehors,lehors,13/Jul/17 7:36 PM,27/Sep/17 6:51 PM,26/Apr/18 6:50 AM,27/Sep/17 6:51 PM,v1.0.0,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"This is with vagrant on a Windows 7 box. I get the following error:
{code:java}
2017/07/12 00:59:58 [DEBUG] Directing traffic to default CA
2017/07/12 00:59:58 [DEBUG] DB: Getting identity admin
2017/07/12 00:59:58 [DEBUG] DB: Login user admin with max enrollments of -1 and state of 8
2017/07/12 00:59:58 [DEBUG] Max enrollment value (-1) of identity is greater than allowed by CA, using CA max enrollment value of 1
2017/07/12 00:59:58 [DEBUG] Failed to login 'admin': The identity admin has already enrolled 1 times, it has reached its maximum enrollment allowance
2017/07/12 00:59:58 [DEBUG] Received response
statusCode=400 (400 Bad Request)
--- FAIL: TestMaxEnrollmentLimited (0.55s)
server_test.go:986: Test max enrollment limited
server_test.go:999: Enrollment failed, error: Error response from server was: Authorization failure
panic: runtime error: invalid memory address or nil pointer dereference [recovered]
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x4cb657]

goroutine 754 [running]:
panic(0xaa1440, 0xc42000e0f0)
/opt/go/src/runtime/panic.go:500 +0x1a1
testing.tRunner.func1(0xc42007a600)
/opt/go/src/testing/testing.go:579 +0x25d
panic(0xaa1440, 0xc42000e0f0)
/opt/go/src/runtime/panic.go:458 +0x243
github.com/hyperledger/fabric-ca/lib_test.TestMaxEnrollmentLimited(0xc42007a600)
/opt/gopath/src/github.com/hyperledger/fabric-ca/lib/server_test.go:1001 +0x247
testing.tRunner(0xc42007a600, 0xb98208)
/opt/go/src/testing/testing.go:610 +0x81
created by testing.(*T).Run
/opt/go/src/testing/testing.go:646 +0x2ec
FAIL	github.com/hyperledger/fabric-ca/lib	117.907s
error: exit status 1
panic: EOF

goroutine 1 [running]:
panic(0x4daca0, 0xc42000a180)
/opt/go/src/runtime/panic.go:500 +0x1a1
main.main()
/opt/gopath/src/github.com/AlekSi/gocov-xml/gocov-xml.go:60 +0x15fd
*** END FAILURES ***
Makefile:148: recipe for target 'unit-tests' failed
make: *** [unit-tests] Error 1
{code}",,,,,,,,,,,,,,,,,FAB-6085,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:rhw9o6,,,,,,,,lehors,,,,,,,,,,master,,,true,"13/Jul/17 8:00 PM;lehors;Digging into that one I found that the problem has to do with the test itself. The call to os.RemoveAll(rootDir) fails with: remove rootDir/fabric-ca-server.db: text file busy

Then because the database isn't cleaned up properly the test picks up a dirty db which leads to a failure.

When run alone the test passes all right.

Then the code assumes enrollment will succeed and proceed to dereferencing id without any precaution. Unfortunately in this case it is nil, which leads to the segmentation violation.

I'm not completely sure why os.RemoveAll fails. It might be a timing issue. This needs to be investigated further.","13/Jul/17 10:53 PM;lehors;Actually, upon further investigation I have found that the problem comes from trying to delete the db file without ever closing the db. As a matter of fact I don't see any code about closing the CA db. A quick test adding some code to close the db makes the test run successfully. I will put a CR together.",,,,,,,,,,,,,,,,,,,,,,
trademark guidelines violation in README,FAB-5304,19240,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,13/Jul/17 7:11 PM,27/Jul/17 10:11 AM,26/Apr/18 6:50 AM,27/Jul/17 10:11 AM,v1.0.0,,,,,,v1.0.1,,,fabric-docs,,,,0,,,,,,,,,number of trademark guideline violations in the main README,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01e25:,,,,,,,,ChristopherFerris,,,,,,,,,,master,,,true,13/Jul/17 7:19 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/11633,,,,,,,,,,,,,,,,,,,,,,,
adding the fabric-sdk when using Ivy/Ant?,FAB-5292,19215,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jordan.k.miles,jordan.k.miles,12/Jul/17 2:53 PM,12/Jul/17 8:33 PM,26/Apr/18 6:50 AM,12/Jul/17 8:33 PM,,,,,,,WON'T FIX,,,fabric-sdk-java,,,,0,,,,,,,,,"I'm wanting to add the sdk to my Ant build (using Ivy). Is this possible? I add the entry
{code:java}
<dependency org=""org.hyperledger.fabric-sdk-java"" name=""fabric-sdk-java"" rev=""1.0.0"" />
{code}
 but get the following errors on resolve:


{code:java}
Some projects fail to be resolved
Impossible to resolve dependencies of io.idvc#cooperative;working@Jordans-MacBook-Pro.local
unresolved dependency: org.apache.maven#maven-plugin-api;${project.prerequisites.maven}: not found
unresolved dependency: org.apache.maven.reporting#maven-reporting-api;${project.prerequisites.maven}: not found
unresolved dependency: org.apache.maven#maven-project;${project.prerequisites.maven}: not found
{code}
I added those dependencies manually and everything seemed to build, but it requires a ton of dependencies. I notice the maven pom appears to go through several configuration steps during the build. Is there a way around this in Ivy?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01dx9:,,,,,,,,jordan.k.miles,rickr,,,,,,,,,,,,,12/Jul/17 8:20 PM;rickr;Not familar with Ivy we only support Maven pom.xml  But given this does resolve all the dependencies are in Maven so this must be an issue with your Ivy set up.,12/Jul/17 8:33 PM;rickr;Maybe ask this question on the rockchat fabric-sdk-java channel there may be other user that have experience with Ivy.,,,,,,,,,,,,,,,,,,,,,,
Orderer wait time not being set properly,FAB-5290,19213,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rickr,rickr,rickr,12/Jul/17 1:29 PM,18/Jul/17 9:09 PM,26/Apr/18 6:50 AM,18/Jul/17 9:09 PM,v1.1,,,,,,v1.0.1,,,fabric-sdk-java,,,,0,,,,,,,,,The property ordererWaitTimeMilliSecs instead of defining the wait time is defining a system property for the wait time. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01dwt:,,,,,,,,andrasfe,rickr,,,,,,,,,master,,,true,"12/Jul/17 10:39 PM;andrasfe;could this be the cause for timeout while waiting for orderer? Following the upgrade of java sdk to the GA, I am getting intermittent timeout errors such as the one below:

 
{code:java}
2017-07-12 22:30:10,694 DEBUG Orderer:122 - Order.sendTransaction name: orderer.example.com, url: grpc://localhost:7050
2017-07-12 22:30:14,339 ERROR OrdererClient:164 - sendTransaction error Send transactions failed. Reason:  timeout
org.hyperledger.fabric.sdk.exception.TransactionException: Send transactions failed. Reason:  timeout
at org.hyperledger.fabric.sdk.OrdererClient.sendTransaction(OrdererClient.java:163)
at org.hyperledger.fabric.sdk.Orderer.sendTransaction(Orderer.java:133)
at org.hyperledger.fabric.sdk.Channel.<init>(Channel.java:222)
{code}",,,,,,,,,,,,,,,,,,,,,,,
Inconsistent description of dependencies of BDD tests,FAB-5289,19211,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ynamiki,ynamiki,ynamiki,12/Jul/17 12:56 PM,26/Nov/17 12:28 PM,26/Apr/18 6:50 AM,26/Nov/17 12:28 PM,v1.0.0,,,,,,v1.1,,,fabric-devenv,fabric-docs,,,0,,,,,,,,,"As of e4b47043, I find three different descriptions of dependencies of BDD tests (e.g. install_behave.sh says grpcio==0.13.1, the documents says grpcio==1.0.4, ...).
These should be consistent.

scripts/install_behave.sh
{code}
pip install --upgrade pip
pip install behave
pip install nose

# updater-server, update-engine, and update-service-common dependencies (for running locally)
pip install -I flask==0.10.1 python-dateutil==2.2 pytz==2014.3 pyyaml==3.10 couchdb==1.0 flask-cors==2.0.1 requests==2.4.3 pyOpenSSL==16.2.0 pysha3==1.0b1

# Python grpc package for behave tests
# Required to update six for grpcio
pip install --ignore-installed six
pip install --upgrade 'grpcio==0.13.1'

# Pip packages required for some behave tests
pip install ecdsa python-slugify b3j0f.aop
pip install google
pip install protobuf
pip install pyyaml
pip install pykafka
{code}

[Document|http://hyperledger-fabric.readthedocs.io/en/stable/dev-setup/devenv.html#pip-behave-and-docker-compose]
{code}
pip install --upgrade pip
pip install behave nose docker-compose
pip install -I flask==0.10.1 python-dateutil==2.2 pytz==2014.3 pyyaml==3.10 couchdb==1.0 flask-cors==2.0.1 requests==2.4.3 pyOpenSSL==16.2.0 pysha3==1.0b1 grpcio==1.0.4

#PIP packages required for some behave tests
pip install urllib3 ndg-httpsclient pyasn1 ecdsa python-slugify grpcio-tools jinja2 b3j0f.aop six
{code}

bddtests/README.md
{code}
pip install behave
pip install grpcio-tools
pip install ""pysha3==1.0b1""
pip install b3j0f.aop
pip install jinja2
# The pyopenssl install gives errors, but installs succeeds
pip install pyopenssl
pip install ecdsa
pip install python-slugify
pip install pyyaml
{code}",,,,,,,,,,,,,,,,,,,,18/Jul/17 8:08 AM;ynamiki;pip-requirements.txt;https://jira.hyperledger.org/secure/attachment/11695/pip-requirements.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01dwl:,,,,,,,,markparz,ynamiki,,,,,,,,,master,,,true,"14/Jul/17 8:31 AM;ynamiki;List of packages installed by each method.

|| ||Script||Document||Read Me||
|asn1crypto|0.22.0|0.22.0|0.22.0|
|b3j0f.aop|0.8.4|0.8.4|0.8.4|
|b3j0f.utils|1.4.4|1.4.4|1.4.4|
|*beautifulsoup4*|4.6.0| | |
|behave|1.2.5|1.2.5|1.2.5|
|cffi|1.10.0|1.10.0|1.10.0|
|*CouchDB*|1.0|1.0| |
|cryptography|1.9|1.9|1.9|
|ecdsa|0.13|0.13|0.13|
|enum34|1.1.6|1.1.6|1.1.6|
|*Flask*|0.10.1|0.10.1| |
|*Flask-Cors*|2.0.1|2.0.1| |
|futures|3.1.1|3.1.1|3.1.1|
|*gevent*|1.2.2| | |
|*google*|1.9.3| | |
|*greenlet*|0.4.12| | |
|*grpcio*|0.13.1|1.4.0|1.4.0|
|*grpcio-tools*| |1.4.0|1.4.0|
|idna|2.5|2.5|2.5|
|ipaddress|1.0.18|1.0.18|1.0.18|
|*itsdangerous*|0.24|0.24| |
|Jinja2|2.9.6|2.9.6|2.9.6|
|*kazoo*|2.4.0| | |
|MarkupSafe|1.0|1.0|1.0|
|*ndg-httpsclient*| |0.4.2| |
|*nose*|1.3.7|1.3.7| |
|ordereddict|1.1|1.1|1.1|
|parse|1.8.2|1.8.2|1.8.2|
|parse-type|0.3.4|0.3.4|0.3.4|
|protobuf|3.3.0|3.3.0|3.3.0|
|*pyasn1*| |0.2.3| |
|pycparser|2.18|2.18|2.18|
|*pykafka*|2.6.0| | |
|*pyOpenSSL*|16.2.0|16.2.0|17.1.0|
|pysha3|1.0b1|1.0b1|1.0b1|
|*python-dateutil*|2.2|2.2| |
|python-slugify|1.2.4|1.2.4|1.2.4|
|*pytz*|2014.3|2014.3| |
|*PyYAML*|3.10|3.10|3.12|
|*requests*|2.4.3|2.4.3| |
|six|1.10.0|1.10.0|1.10.0|
|*tabulate*|0.7.7| | |
|Unidecode|0.4.21|0.4.21|0.4.21|
|*urllib3*| |1.21.1| |
|*Werkzeug*|0.12.2|0.12.2| |","18/Jul/17 8:09 AM;ynamiki;`make behave` works well in 2967a0b with attached [^pip-requirements.txt].
|| ||Script||Document||Read Me||requirements||
|asn1crypto|0.22.0|0.22.0|0.22.0|0.22.0|
|b3j0f.aop|0.8.4|0.8.4|0.8.4|0.8.4|
|b3j0f.utils|1.4.4|1.4.4|1.4.4|1.4.4|
|*beautifulsoup4*|4.6.0| | | |
|behave|1.2.5|1.2.5|1.2.5|1.2.5|
|cffi|1.10.0|1.10.0|1.10.0|1.10.0|
|*CouchDB*|1.0|1.0| | |
|cryptography|1.9|1.9|1.9|2.0|
|ecdsa|0.13|0.13|0.13|0.13|
|enum34|1.1.6|1.1.6|1.1.6|1.1.6|
|*Flask*|0.10.1|0.10.1| | |
|*Flask-Cors*|2.0.1|2.0.1| | |
|futures|3.1.1|3.1.1|3.1.1|3.1.1|
|*gevent*|1.2.2| | | |
|*google*|1.9.3| | | |
|*greenlet*|0.4.12| | | |
|*grpcio*|0.13.1|1.4.0|1.4.0|1.4.0|
|*grpcio-tools*| |1.4.0|1.4.0| |
|idna|2.5|2.5|2.5|2.5|
|ipaddress|1.0.18|1.0.18|1.0.18|1.0.18|
|*itsdangerous*|0.24|0.24| | |
|Jinja2|2.9.6|2.9.6|2.9.6|2.9.6|
|*kazoo*|2.4.0| | | |
|MarkupSafe|1.0|1.0|1.0|1.0|
|*ndg-httpsclient*| |0.4.2| | |
|*nose*|1.3.7|1.3.7| | |
|ordereddict|1.1|1.1|1.1|1.1|
|parse|1.8.2|1.8.2|1.8.2|1.8.2|
|parse-type|0.3.4|0.3.4|0.3.4|0.3.4|
|protobuf|3.3.0|3.3.0|3.3.0|3.3.0|
|*pyasn1*| |0.2.3| | |
|pycparser|2.18|2.18|2.18|2.18|
|*pykafka*|2.6.0| | | |
|*pyOpenSSL*|16.2.0|16.2.0|17.1.0|17.1.0|
|pysha3|1.0b1|1.0b1|1.0b1|1.0.2|
|*python-dateutil*|2.2|2.2| | |
|python-slugify|1.2.4|1.2.4|1.2.4|1.2.4|
|*pytz*|2014.3|2014.3| | |
|*PyYAML*|3.10|3.10|3.12|3.12|
|*requests*|2.4.3|2.4.3| | |
|six|1.10.0|1.10.0|1.10.0|1.10.0|
|*tabulate*|0.7.7| | | |
|Unidecode|0.4.21|0.4.21|0.4.21|0.4.21|
|*urllib3*| |1.21.1| | |
|*Werkzeug*|0.12.2|0.12.2| | |",24/Jul/17 11:37 AM;ynamiki;https://gerrit.hyperledger.org/r/11775,26/Oct/17 4:15 PM;markparz;added some reviewers to your CR,,,,,,,,,,,,,,,,,,,,
Naming for instantiate and invoke in balance-transfer sample should be consistent,FAB-5287,19209,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,bh4rtp,bh4rtp,12/Jul/17 8:49 AM,17/Jul/17 7:45 PM,26/Apr/18 6:50 AM,17/Jul/17 7:45 PM,v1.0.0,,,,,,v1.0.1,,,fabric-samples,fabric-sdk-node,,,0,help-wanted,,,,,,,,"*Instantiate chaincode*:
 curl -s -X POST \
 [http://localhost:4000/channels/mychannel/chaincodes] \
 -H ""authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE0OTQ4NjU1OTEsInVzZXJuYW1lIjoiSmltIiwib3JnTmFtZSI6Im9yZzEiLCJpYXQiOjE0OTQ4NjE5OTF9.yWaJhFDuTvMQRaZIqg20Is5t-JJ_1BP58yrNLOKxtNI"" \
 -H ""content-type: application/json"" \
 -d '\{
 ""peers"": [""localhost:7051""],
 ""chaincodeName"":""mycc"",
 ""chaincodeVersion"":""v0"",
 ""{color:#FF0000}functionName{color}"":""init"",
 ""args"":[""a"",""100"",""b"",""200""]
 }'

*Invoke request*:
 curl -s -X POST \
 [http://localhost:4000/channels/mychannel/chaincodes/mycc] \
 -H ""authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE0OTQ4NjU1OTEsInVzZXJuYW1lIjoiSmltIiwib3JnTmFtZSI6Im9yZzEiLCJpYXQiOjE0OTQ4NjE5OTF9.yWaJhFDuTvMQRaZIqg20Is5t-JJ_1BP58yrNLOKxtNI"" \
 -H ""content-type: application/json"" \
 -d '\{
 ""peers"": [""localhost:7051"", ""localhost:7056""],
 ""{color:#FF0000}fcn{color}"":""move"",
 ""args"":[""a"",""b"",""10""]
 }'

The functionName and fcn should be consistent.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01dw5:,,,,,,,,bh4rtp,harrisob@us.ibm.com,,,,,,,,,master,,,true,"12/Jul/17 1:25 PM;jimthematrix;thanks [~bh4rtp], this is indeed a discrepancy that should be fixed, but it's only in the balance-transfer sample code, the node SDK APIs for both instantiate and invoke use 'fcn':
https://fabric-sdk-node.github.io/global.html#ChaincodeInstantiateUpgradeRequest
https://fabric-sdk-node.github.io/global.html#ChaincodeInvokeRequest",13/Jul/17 7:58 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/11635/,,,,,,,,,,,,,,,,,,,,,,
balance-transfer instantiate chaincode not correctly,FAB-5285,19207,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yuki-kon,bh4rtp,bh4rtp,12/Jul/17 7:59 AM,10/Nov/17 10:24 PM,26/Apr/18 6:50 AM,10/Nov/17 10:24 PM,,,,,,,v1.0.5,,,fabric-samples,,,,0,,,,,,,,,"curl -s -X POST \
  http://localhost:4000/channels/mychannel/chaincodes \
  -H ""authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE0OTQ4NjU1OTEsInVzZXJuYW1lIjoiSmltIiwib3JnTmFtZSI6Im9yZzEiLCJpYXQiOjE0OTQ4NjE5OTF9.yWaJhFDuTvMQRaZIqg20Is5t-JJ_1BP58yrNLOKxtNI"" \
  -H ""content-type: application/json"" \
  -d '{
	""peers"": [""localhost:7051""],
	""chaincodeName"":""mycc"",
	""chaincodeVersion"":""v0"",
	""functionName"":""init"",
	""args"":[""a"",""100"",""b"",""200""]
}'
The document says this will instantiate the chaincode on peer0 of org1, but actually peer1 of org1 is also instantiated. 
allen@mangr:~$ docker images
REPOSITORY                           TAG                             IMAGE ID            CREATED             SIZE
dev-peer0.org1.example.com-mycc-v0   latest                          e86e8d8cfb19        26 seconds ago      186MB
dev-peer1.org1.example.com-mycc-v0   latest                          4102a4442cd5        26 seconds ago      186MB",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01dvp:,,,,,,,,bh4rtp,yuki-kon,,,,,,,,,,,,,26/Aug/17 1:08 AM;yuki-kon;CR is posted here: https://gerrit.hyperledger.org/r/#/c/12805/,"10/Nov/17 10:24 PM;yuki-kon;This JIRA is out of date because balance-transfer was totally updated to catch up v1.1-preview by this CR ([https://gerrit.hyperledger.org/r/#/c/14977/]).
 This JIRA should be closed.",,,,,,,,,,,,,,,,,,,,,,
update 1.0.0 version in release test suite,FAB-5279,19200,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,11/Jul/17 9:26 PM,12/Jul/17 6:13 PM,26/Apr/18 6:50 AM,12/Jul/17 6:13 PM,v1.0.0,,,,,,,,,fabric-build,,,,0,build-system,,,,,,,,update 1.0.0 version in release test suite. In some of the scripts in test/regression/release folder are still referring 1.0.0-rc1 version.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01du5:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,11/Jul/17 10:05 PM;rameshthoomu;patch has been submitted and it's in review,12/Jul/17 6:13 PM;rameshthoomu;patch has been and merged,,,,,,,,,,,,,,,,,,,,,,
False error while starting the network during chaincode4ade.html tutorial,FAB-5277,19198,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,tkuhrt,tkuhrt,11/Jul/17 8:35 PM,26/Oct/17 4:13 PM,26/Apr/18 6:50 AM,26/Oct/17 4:13 PM,v1.0.0,,,,,,,,,fabric-docs,fabric-examples,,,0,,,,,,,,,"While running through chaincode4ade.html, I received an error at [starting the network|http://hyperledger-fabric.readthedocs.io/en/latest/chaincode4ade.html#terminal-1-start-the-network]

{{ERROR: An HTTP request took too long to complete. Retry with --verbose to obtain debug information.
}}{{If you encounter this issue regularly because of slow network conditions, consider setting COMPOSE_HTTP_TIMEOUT to a higher value (current value: 60).}}

However, when I did a `docker ps -a`, I saw that my network was still running, and I was able to complete the rest of the tutorial. Reporting this because it could be quite concerning to someone new starting out who may think that there is a true error.

$ docker ps -a

{{CONTAINER ID        IMAGE                        COMMAND                  CREATED             STATUS              PORTS                                            NAMES}}

{{1880506a178c        hyperledger/fabric-tools     ""/bin/bash -c ./scrip""   3 minutes ago       Up 3 minutes                                                         cli}}

{{34b8128024eb        hyperledger/fabric-ccenv     ""/bin/bash -c 'sleep ""   3 minutes ago       Up 3 minutes                                                         chaincode}}

{{3e35b8e2706a        hyperledger/fabric-peer      ""peer node start --pe""   3 minutes ago       Up 3 minutes        0.0.0.0:7051->7051/tcp, 0.0.0.0:7053->7053/tcp   peer}}

{{853dc6df2fe4        hyperledger/fabric-orderer   ""orderer""                3 minutes ago       Up 3 minutes        0.0.0.0:7050->7050/tcp                           orderer}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01dtp:,,,,,,,,markparz,mastersingh24,qiang0723,tkuhrt,,,,,,,,,,,30/Sep/17 6:49 PM;mastersingh24;[~tkuhrt] Not sure there's really anything to do here?  The error is from docker compose and does actually tell you how to fix it,"26/Oct/17 4:13 PM;markparz;I'm going to close this for now, if there is something to add, we might want to just put a note in Stack Overflow that it's something generated from docker compose as Gari says.",,,,,,,,,,,,,,,,,,,,,,
Fix npm version in readthedocs,FAB-5272,19191,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,denyeart,denyeart,denyeart,11/Jul/17 6:31 PM,07/Aug/17 9:02 AM,26/Apr/18 6:50 AM,07/Aug/17 9:02 AM,v1.0.0,,,,,,Future,,,fabric-docs,,,,1,,,,,,,,,"Prereq doc page

[https://hyperledger-fabric.readthedocs.io/en/latest/prereqs.html#node-js-runtime-and-npm]

says to get latest npm version:

npm install npm@latest -g

However the latest npm version is incompatible with version of node that fabric sdk runs on.

[~jimthematrix] advised that the command in the doc should be changed to:

npm install npm@3.10.10 -g

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz4r:z28i,,,,,,,,denyeart,JonathanLevi,,,,,,,,,master,,,true,"11/Jul/17 6:39 PM;JonathanLevi;(even though I'm relatively ""useless"" when it comes to Node)
 Yes, I'd always vote for versioned dependencies... 

Can we please push a fix?","11/Jul/17 6:53 PM;denyeart;Fix is ready:

https://gerrit.hyperledger.org/r/#/c/11559/",,,,,,,,,,,,,,,,,,,,,,
jsdocs reference 1.0.0-beta links,FAB-5255,19171,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,11/Jul/17 4:54 PM,09/Aug/17 7:42 PM,26/Apr/18 6:50 AM,18/Jul/17 7:46 PM,v1.0.0,,,,,,v1.0.1,,,fabric-sdk-node,,,,0,,,,,,,,,"for related definitions such as fabric protos, the jsdoc has references pointing to the 1.0.0-beta content. should be updated to 1.0.0 now that the fabric has been tagged with v1.0.0.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01dol:,,,,,,,,,,,,,,,,,,release-1.0,master,,true,12/Jul/17 1:14 PM;jimthematrix;https://gerrit.hyperledger.org/r/11587,,,,,,,,,,,,,,,,,,,,,,,
"""make kafka"" failure for any non-default version, due to images/kafka/Dockerfile.in hardcoded pathname",FAB-5252,19168,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,scottz,scottz,11/Jul/17 4:46 PM,19/Jul/17 4:37 PM,26/Apr/18 6:50 AM,19/Jul/17 4:37 PM,v1.0.0,,,,,,v1.1,,,fabric-build,fabric-orderer,,,0,build-system,kafka,quality,Usability,,,,,"+Problem+:  ""make kafka"" failure, for any version besides the default 0.9.0.1.

+Background+: In addition to changing orderer.yaml KafkaVersion, it seems one must also change [https://github.com/hyperledger/fabric/blob/master/images/kafka/Dockerfile.in#L8] (from 0.9.0.1 to one of the other supported values: 0.10.0.0 or 0.10.0.1 or 0.10.1.0 ) and ""make kafka"" image before deployment. I edited .../fabric/images/kafka/Dockerfile.in line 8 to make this change, and the ""make kafka"" command failed with error:
{quote}curl: (22) The requested URL returned error: 404 Not Found
{quote}
+Proposed solution+:  Observe in line 11 of Dockerfile.in, we curl the kafka - however it uses a hardcoded pathname to 0.9.0.1 , causing the failure. If I am not mistaken, we should change the address from
{quote}http://www-us.apache.org/dist/kafka/0.9.0.1/kafka_$\{SCALA_VERSION}-$\{KAFKA_VERSION}.tgz
{quote}
to
{quote}http://www-us.apache.org/dist/kafka/$\{KAFKA_VERSION}/kafka_$\{SCALA_VERSION}-$\{KAFKA_VERSION}.tgz
{quote}
+WORKAROUND+: Since the user has to edit the Dockerfile.in already to change the KAFKA_VERSION, the user could also change the hardcoded pathname from 0.9.0.1 to the appropriate version - as in the suggested solution below.

+Additional request for accompanying documentation+: we could also use some documentation with better instructions of how-to steps to use different kafka versions. [http://hyperledger-fabric.readthedocs.io/en/latest/kafka.html] provides some info but does not explain that the images/kafka/Dockerfile.in must be edited and new images must be built (in addition to setting orderer.yaml KAFKA_VERSION).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01dnx:,,,,,,,,kchristidis,scottz,,,,,,,,,master,,,true,"11/Jul/17 7:29 PM;scottz;I tried to ""make kafka"" after making the changes I suggested, but it failed. Apparently we will need an additional change. I must be missing something...
{quote}kafka_2.11-0.10.1.0.tgz: FAILED
sha1sum: WARNING: 1 computed checksum did NOT match
{quote}",17/Jul/17 4:42 PM;kchristidis;https://gerrit.hyperledger.org/r/#/c/11697/,"17/Jul/17 4:43 PM;kchristidis;Scott, the reason for the failure in your test is that you didn't update the SHA-1 hash (KAFKA_DOWNLOAD_SHA1) accordingly.",,,,,,,,,,,,,,,,,,,,,
Gossip rejects join channel unless used with leader election,FAB-5246,19158,Bug,Backlog,FAB,Fabric,software,ChristopherFerris,,,Medium,,,yacovm,yacovm,11/Jul/17 2:18 PM,05/Apr/18 6:11 PM,26/Apr/18 6:50 AM,,v1.0.0,v1.1,v1.2,,,,Future,,,fabric-gossip,,,,0,active,gossip,,,,,,," 

Background:
 # To Join a channel you need to give a peer a genesis block, even if the org has been added after channel creation (in a later block than the genesis block)
 # Gossip performs sanity checks on the configuration blocks and if the peer's organization isn't within the members of the channel (which is the case for the genesis block) - it rejects the join channel.
 # If the peer is used with leader election activated, it will consider itself a leader in that channel (since it doesn't see other peers) and would connect to the ordering service and fetch blocks for that channel.
 # When the peer got the latest configuration block that adds its organization to the channel, gossip is activated for the channel.
 # If the peer isn't configured to use leader election and is configured not to connect to the ordering service (but instead - to receive blocks from fellow peers) - it would not receive blocks from peers of its own org because it would consider them as not in the channel.

 

To reproduce:

Run [https://github.com/sandp125/FabricNodeAPI_V1] , it uses leader election by default.
 in that test there are 2 orgs - org1, org2 and later org3 is added to the channel.

It can be seen in the logs of the peers from org3 the error:

""Tried joining channel <channel name>, ""but our org (orgName), isn't among the orgs of the channel:"", orgListFromConfig(config), "", aborting."")""
 
from the peer logs, the peers declare themselves leaders, connect to the ordering service, and then get the blocks up to the last one. After a while (5 seconds) it can be seen in peer1.org3:
{quote}""Renounced leadership, stopping delivery service for channel mychannel1""
 [deliveryClient] StopDeliverForChannel -> DEBU 3fe This peer will stop pass blocks from orderer service to other peers
{quote}
So it seems like it sensed peer0.org3 after the last config update.

When leader election isn't used - and peer0.org3 is configured to be a leader statically, and peer1.org3 is configured statically to not be a leader, **peer1.org3 doesn't get any blocks.**",,,,,,,,,,,,,,,,,FAB-8416,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01dlx:,,,,,,,,ChristopherFerris,denyeart,kchristidis,scottz,yacovm,yoheiueda,,,,,,,,,"12/Jul/17 2:02 AM;kchristidis;A couple questions, with perhaps overlapping answers:
 # All peers of org3 asked to join the channel reject the call because of background item #2. True/false? (Logic says this is true.)
 # At this point does each peer of org3 consider themselves a leader of that channel? Background item #3 makes it sound like they do, but how can you be the leader of a channel you haven't joined? I suspect I am misinterpreting this.","12/Jul/17 7:10 AM;yacovm;{quote}All peers of org3 asked to join the channel reject the call because of background item #2. True/false? (Logic says this is true.)
{quote}
So it's not that the peer rejects the join channel. The gossip layer of the peer does. This holds for all peers of the new org.
{quote}At this point does each peer of org3 consider themselves a leader of that channel?
{quote}
Yeah, if leader election is used (in core.yaml)

{quote}Background item #3 makes it sound like they do, but how can you be the leader of a channel you haven't joined? I suspect I am misinterpreting this.{quote}

Great question.

So here is how it works - the gossip subcomponent of the peer can be roughly described as built in the following layers:
{code:java}
   L2             Leader election   module   |    state transfer module
   L1                     membership and dissemination modules
   L0                          communication module{code}
There is also the deliver service (which pulls blocks from the ordering service) and it receives command whether to stop itself or start itself from the leader election module.

Let's take a dive and see how the flow works: [createChain|https://github.com/hyperledger/fabric/blob/master/core/peer/peer.go#L232] calls [InitializeChannel|https://github.com/hyperledger/fabric/blob/master/gossip/service/gossip_service.go#L174]  which:
* [Initializes a state transfer module|https://github.com/hyperledger/fabric/blob/master/gossip/service/gossip_service.go#L179] instance for that channel 
* [Initializes a delivery service|https://github.com/hyperledger/fabric/blob/master/gossip/service/gossip_service.go#L182] instance for the channel 
* [Initializes a leader election|https://github.com/hyperledger/fabric/blob/master/gossip/service/gossip_service.go#L206] instance for the channel, that receives its messages and sends messages via what is in L1 (in the code, L1 is aggregated under gossip/gossip).

 Now, the thing that configures gossip's layers L1 with respect to the channel join is done via  [createChain|https://github.com/hyperledger/fabric/blob/master/core/peer/peer.go#L181] that calls [ProcessConfigUpdate|https://github.com/hyperledger/fabric/blob/master/gossip/service/eventer.go#L69] which then does to [configUpdated|https://github.com/hyperledger/fabric/blob/master/gossip/service/gossip_service.go#L219] which does the following check:
{code}
	myOrg := string(g.secAdv.OrgByPeerIdentity(api.PeerIdentityType(g.peerIdentity)))
	if !g.amIinChannel(myOrg, config) {
		logger.Error(""Tried joining channel"", config.ChainID(), ""but our org("", myOrg, ""), isn't ""+
			""among the orgs of the channel:"", orgListFromConfig(config), "", aborting."")
		return
}
{code}

and if this succeeds, it calls [JoinChain|https://github.com/hyperledger/fabric/blob/master/gossip/service/gossip_service.go#L241] on the gossip module (L1) 
which does the following things:
* Tells the ""channel"" module in the gossip layer (we have a module that manages all channel related decisions and keeps all channel related information) to create a new channel instance if needed
* Tells the gossip layer to try to connect to the anchor peers of the channel, if needed.

Now, the first part doesn't do the check, but the 2nd one does. 
So the leader election module doesn't receive *any* messages from the layers below it, and considers itself alone in the world - hence deciding to nominate itself as a leader, and then commands the delivery service to connect to the ordering service.
Eventually, the *configUpdated* method would be called again and then the configuration would contain the peer's own org and then the lower layers of gossip would join the channel. ","12/Jul/17 12:40 PM;kchristidis;I think that clears it for me, thanks.",27/Nov/17 3:48 AM;denyeart;[~yacovm] Do you think this should be fixed for 1.1? What do you propose as next steps?,27/Nov/17 8:01 AM;yacovm;There is no way of fixing this in v1.1 because we can only join with the GB... ,"19/Feb/18 2:38 AM;scottz;This means we cannot support gossip unless leader election is used. Is this documented anywhere??? [~denyeart] , [~yacovm]. We could say that mode is allowed for simple experimentation, but cannot handle org additions.","19/Feb/18 7:31 AM;yacovm;{quote}This means we cannot support gossip unless leader election is used
{quote}
No, that is not what it means.

 
{quote}Is this documented anywhere???
{quote}
Not to my knowledge.
{quote}We could say that mode is allowed for simple experimentation, but cannot handle org additions.
{quote}
I wouldn't put it like that. You can always just make everyone connect to the orderer.

 

This issue, by the way - isn't a gossip issue at all. Gossip actually functions as it should.

We have a similar issue with the deliver service and ordering endpoints and orderer root CA certs.
I suggest we document all of that in the document of the org reconfiguration or in a new one.","05/Apr/18 5:52 PM;ChristopherFerris;So, is this issue relevant exclusively to 1.0.x? If so, then I would advocate we close this since we aren't planning any further patches to 1.0. [~yacovm] [~mastersingh24] do you concur?",05/Apr/18 6:11 PM;yacovm;not exclusive to any release. We can't solve it until we separate MSP managers between blockchain MSP managers to admission path MSP managers... ,,,,,,,,,,,,,,,
_sendChaincodeProposal func err,FAB-5243,19132,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kungyc,kungyc,kungyc,11/Jul/17 4:15 AM,09/Aug/17 7:42 PM,26/Apr/18 6:50 AM,17/Jul/17 7:46 PM,v1.0.0,,,,,,v1.0.1,,,fabric-sdk-node,,,,0,help-wanted,,,,,,,,"        var peers = null;
        if (request) \{
            let peers = request.targets;
        }
        if (!peers || peers.length < 1) \{
            peers = this.getPeers();
        }
 
use ""let peers"" seems to make peer always null, so the channel will try to get targets from the this.getPeers() ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01dh1:,,,,,,,,harrisob@us.ibm.com,kungyc,,,,,,,,,release-1.0,master,,true,"13/Jul/17 7:10 PM;harrisob@us.ibm.com;Please excuse me for working on this issue, I did not see that it was in progress, you may wish to have a look at [https://gerrit.hyperledger.org/r/#/c/11625/] to compare your changes.","15/Jul/17 7:12 AM;kungyc;[~harrisob@us.ibm.com] sorry, I was the first time to contribute with gerrit and may be misunderstanding the status, the change now is been reviewed, refere to :[https://gerrit.hyperledger.org/r/#/c/11605/

]",,,,,,,,,,,,,,,,,,,,,,
The TLS configuration not work for peer/orderer,FAB-5242,19131,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rickr,Eagel,Eagel,11/Jul/17 3:08 AM,18/Jul/17 9:08 PM,26/Apr/18 6:50 AM,18/Jul/17 9:08 PM,v1.0.0-rc1,,,,,,v1.0.1,,,fabric-sdk-java,,,,0,,,,,,,,,"the class org.hyperledger.fabric.sdk.Endpoint line 120

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

if (!nt.equals(""TLS"") && {color:#d04437}!sslp.equals(""plainText""){color}) \{
 throw new RuntimeException(""Property of negotiationType has to be either TLS or plainText"");
}

_>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>_

 

_It should be_

_<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<_

_if (!nt.equals(""TLS"") &&{color:#d04437} !nt.equals(""plainText""){color}) \{_
_throw new RuntimeException(""Property of negotiationType has to be either TLS or plainText"");_
_}_

_>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>_",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01dgt:,,,,,,,,Eagel,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
`vagrant up` fails in installing cryptography by pip,FAB-5240,19129,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ynamiki,ynamiki,ynamiki,11/Jul/17 12:25 AM,09/Sep/17 11:41 AM,26/Apr/18 6:50 AM,09/Sep/17 11:41 AM,v1.0.0,,,,,,,,,fabric-devenv,,,,0,,,,,,,,,"As of revision 4709b33 (2017-07-07), {{vagrant up}} for [building a developer environment|http://hyperledger-fabric.readthedocs.io/en/latest/dev-setup/devenv.html#bootstrapping-the-vm-using-vagrant] fails in installing cryptography by pip:

{code}
$ vagrant up
...
==> default:   Running setup.py bdist_wheel for cryptography: started
==> default:   Running setup.py bdist_wheel for cryptography: finished with status 'error'
==> default:   Complete output from command /usr/bin/python -u -c ""import setuptools, tokenize;__file__='/tmp/pip-build-An4Hie/cryptography/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close
();exec(compile(code, __file__, 'exec'))"" bdist_wheel -d /tmp/tmpKNBjImpip-wheel- --python-tag cp27:
==> default:   c/_cffi_backend.c:15:17: fatal error: ffi.h: No such file or directory
==> default:   compilation terminated.
==> default:   Traceback (most recent call last):
==> default:     File ""<string>"", line 1, in <module>
==> default:     File ""/tmp/pip-build-An4Hie/cryptography/setup.py"", line 321, in <module>
==> default:       **keywords_with_side_effects(sys.argv)
==> default:     File ""/usr/lib/python2.7/distutils/core.py"", line 111, in setup
==> default:       _setup_distribution = dist = klass(attrs)
==> default:     File ""/usr/lib/python2.7/dist-packages/setuptools/dist.py"", line 269, in __init__
==> default:       self.fetch_build_eggs(attrs['setup_requires'])
==> default:     File ""/usr/lib/python2.7/dist-packages/setuptools/dist.py"", line 313, in fetch_build_eggs
==> default:       replace_conflicting=True,
==> default:     File ""/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py"", line 826, in resolve
==> default:       dist = best[req.key] = env.best_match(req, ws, installer)
==> default:     File ""/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py"", line 1092, in best_match
==> default:       return self.obtain(req, installer)
==> default:     File ""/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py"", line 1104, in obtain
==> default:       return installer(requirement)
==> default:     File ""/usr/lib/python2.7/dist-packages/setuptools/dist.py"", line 380, in fetch_build_egg
==> default:       return cmd.easy_install(req)
==> default:     File ""/usr/lib/python2.7/dist-packages/setuptools/command/easy_install.py"", line 663, in easy_install
==> default:       return self.install_item(spec, dist.location, tmpdir, deps)
==> default:     File ""/usr/lib/python2.7/dist-packages/setuptools/command/easy_install.py"", line 693, in install_item
==> default:       dists = self.install_eggs(spec, download, tmpdir)
==> default:     File ""/usr/lib/python2.7/dist-packages/setuptools/command/easy_install.py"", line 873, in install_eggs
==> default:       return self.build_and_install(setup_script, setup_base)
==> default:     File ""/usr/lib/python2.7/dist-packages/setuptools/command/easy_install.py"", line 1101, in build_and_install
==> default:       self.run_setup(setup_script, setup_base, args)
==> default:     File ""/usr/lib/python2.7/dist-packages/setuptools/command/easy_install.py"", line 1089, in run_setup
==> default:       raise DistutilsError(""Setup script exited with %s"" % (v.args[0],))
==> default:   distutils.errors.DistutilsError: Setup script exited with error: command 'x86_64-linux-gnu-gcc' failed with exit status 1
==> default:
==> default:   ----------------------------------------
==> default:   Failed building wheel for cryptography
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01dgd:,,,,,,,,ynamiki,,,,,,,,,,master,,,true,24/Jul/17 11:38 AM;ynamiki;https://gerrit.hyperledger.org/r/11489,"09/Sep/17 11:41 AM;ynamiki;The patch has been merged, thanks.",,,,,,,,,,,,,,,,,,,,,,
Reopen connections closed by LDAP server due to inactivity,FAB-5239,19128,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,smithbk,smithbk,10/Jul/17 9:16 PM,31/Jul/17 10:03 AM,26/Apr/18 6:50 AM,25/Jul/17 5:35 PM,v1.0.0,,,,,,v1.0.1,,,fabric-ca,,,,0,,,,,,,,,"If the LDAP server is configured to close inactive connections, the fabric-ca-server can fail as follows when enrolling a user:
{code}
2017/06/28 15:21:39 [DEBUG] Failed to get user 'user1': LDAP search failure: LDAP Result Code 200 """": ldap: connection closed; search request: &{BaseDN: Scope:2 DerefAliases:0 SizeLimit:0 TimeLimit:0 TypesOnly:false Filter:(sAMAccountName=XBR_us_po) Attributes:[] Controls:[]}
{code}
Note the ""ldap: connection closed"" part of the error message above.  This happens because
the fabric-ca-server caches a connection to the server in order to perform an LDAP search
to map a user name to a DN during enrollment; however, if the server has closed the
connection on its side, the fabric-ca-server which is acting as the LDAP client will fail.

The fix is to create a new connection when this error occurs.

There are two work-arounds:
1) Restarting the fabric-ca-server
2) Configuring the LDAP server to not close inactivity connections

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:rhw93,,,,,,,,mastersingh24,smithbk,,,,,,,,,release-1.0,master,,true,11/Jul/17 3:35 AM;smithbk;https://gerrit.hyperledger.org/r/#/c/11487/,19/Jul/17 10:11 AM;mastersingh24;This seems small enough and worth including in a patch release so setting to 1.0.1 for now,,,,,,,,,,,,,,,,,,,,,,
Periodic failure on multi-org e2e tests,FAB-5238,19127,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,divyank,troyronda,troyronda,10/Jul/17 8:41 PM,11/Jul/17 9:20 PM,26/Apr/18 6:50 AM,11/Jul/17 9:20 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"16:27:19.232 [fabric_sdk_go] INFO : Constructed channel instance: \{orgchannel true map[] map[] 0xc420128f00 <nil> 0xc4203d8050 [] false}
peer0 is &\{processor:0xc4202f9350 name: roles:[] enrollmentCertificate:<nil> url:localhost:7051}, peer1 is &\{processor:0xc4202f98c0 name: roles:[] enrollmentCertificate:<nil> url:localhost:8051}
--- FAIL: TestOrgsEndToEnd (6.19s)
 multiple_orgs_test.go:61: Org1 invoke result was not propagated to org2. Expected 201, got: 200
FAIL
coverage: 95.2% of statements
FAIL github.com/hyperledger/fabric-sdk-go/test/integration/orgs 6.311s
error: exit status 1
panic: EOF",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:rhwgr6,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
orderer can not connect kafka if TLS is enabled,FAB-5226,19103,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,hongquan.zhang,hongquan.zhang,10/Jul/17 10:37 AM,11/Jul/17 2:27 PM,26/Apr/18 6:50 AM,11/Jul/17 8:04 AM,,,,,,,,,,fabric-orderer,,,,0,orderer,tls,,,,,,,"At first, there's a minor bug in fabric/orderer/kafka/config.go, function newBrokerConfig.
{code:java}
for _, certificate := range tlsConfig.RootCAs {
    if !rootCAs.AppendCertsFromPEM([]byte(certificate)) {
                logger.Panic(fmt.Sprintf(""Unable to parse the root certificate authority certificates (Kafka.Tls.RootCAs)""))
   }

{code}
rootCAs.AppendCertsFromPEM accpet ca file content, not the file name.

After correcting this by read ca file content into a byte slice and pass the byte slice into AppendCertsFromPEM. orderer can load RooCAs correctly.

But then orderer can not complete tls handshake with kafka.

The error message from orderer is:
{code:java}
Failed to connect to broker kafka1:9093: tls: first record does not look like a TLS handshake{code}
I use openssl s_client -debug -connect kafka1:9093 to verify the tls setting on kafka1 and find it's OK.","ubuntu 14.04 

docker 17.05-ce

 ",,,,,,,,,,,,,,,,,,,11/Jul/17 5:19 AM;sanchezl;fab-5226.zip;https://jira.hyperledger.org/secure/attachment/11628/fab-5226.zip,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01db1:,,,,,,,,hongquan.zhang,kchristidis,sanchezl,,,,,,,,,,,,"10/Jul/17 11:53 AM;kchristidis;Regarding the code, this is not a bug. The config file clearly states that that PrivateKey, Certificate, RootCAs, are supposed to hold the key *values*. If you wish to point to the file, just uncomment the File line and edit the path. See [https://github.com/hyperledger/fabric/blob/master/sampleconfig/orderer.yaml#L201...L223] for more.

We'll be looking into the TLS handshake issue.","10/Jul/17 3:50 PM;sanchezl;[~hongquan.zhang] please confirm that the issue is still occurring by either:


 * inserting the text of the encoded certificate into the configuration yaml, or
 * specifying the file path to the encoded certificated in the configuration yaml, as per the previous comment.

 ","11/Jul/17 1:53 AM;hongquan.zhang;Hi [~sanchezl], the problem is still there after using the configuration method mentioned above.
{code:java}
Failed to connect to broker kafka0:9093: tls: first record does not look like a TLS handshake
{code}
I used tcpdump to capture tcp stream data between orderer and kafka, and found that kafka always return bunch of 0x00 byte instead of ServerHello message after receiving ClientHello from orderer.

It seems that kafka and orderer can't make a deal with the cipher method they want to use","11/Jul/17 5:24 AM;sanchezl;[~hongquan.zhang], the orderer to kafka TLS functionality appears to be working ok for me. I have attached a small docker-compose environment to this issue so you can try it yourself, and maybe compare to your own configuration:
 # Extract  [^fab-5226.zip]
 # {{cd fab-5226}}
 # Run {{./script.sh}} to generate sample crypto materials.
 # Run {{docker-compose up -d}} to start the environment.
 # View logs via {{docker-compose logs}} (see command help for details)

 ","11/Jul/17 8:04 AM;hongquan.zhang;Hi [~sanchezl], scripts you provided work very well. 

So there should be some error in my configuration or keystore configuration. I'll check that.

Thank you very much, and very sorry for any inconvenience。",,,,,,,,,,,,,,,,,,,
`vagrant up` fails behind proxy,FAB-5224,19098,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ynamiki,ynamiki,ynamiki,10/Jul/17 7:11 AM,26/Dec/17 6:46 AM,26/Apr/18 6:50 AM,01/Dec/17 7:53 AM,v1.0.0-rc1,,,,,,WON'T FIX,,,fabric-devenv,,,,0,,,,,,,,,"As of revision 4709b33 (2017-07-07), {{vagrant up}} for [building a developer environment|http://hyperledger-fabric.readthedocs.io/en/latest/dev-setup/devenv.html#bootstrapping-the-vm-using-vagrant] fails behind a proxy:

{code}
$ vagrant up
...
==> default: + apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D
==> default: Executing: /tmp/tmp.ry9ie0CsUG/gpg.1.sh --keyserver
==> default: hkp://p80.pool.sks-keyservers.net:80
==> default: --recv-keys
==> default: 58118E89F3A912897C070ADBF76221572C52609D
==> default: gpg:
==> default: requesting key 2C52609D from hkp server p80.pool.sks-keyservers.net
==> default: gpgkeys: key 58118E89F3A912897C070ADBF76221572C52609D not found on keyserver
==> default: gpg:
==> default: no valid OpenPGP data found.
==> default: gpg:
==> default: Total number processed: 0
==> default: gpg:
==> default: keyserver communications error: key not found
==> default: gpg:
==> default: keyserver communications error: bad public key
==> default: gpg:
==> default: keyserver receive failed: bad public key
The SSH command responded with a non-zero exit status. Vagrant
assumes that this means the command failed. The output for this command
should be in the log above. Please read the output to determine what
went wrong.
{code}

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01da5:,,,,,,,,denyeart,ynamiki,,,,,,,,,,,,,24/Jul/17 11:38 AM;ynamiki;https://gerrit.hyperledger.org/r/11463,"01/Sep/17 1:35 PM;ynamiki;Tried with the latest revision, got a different error.
It seems that a docker daemon does not see a proxy configuration.

Environment:
* Fabric: b653f38 (2017-08-30)
* vagrant-proxyconf: 1.5.2
* Vagrant: 1.9.8
* VirtualBox: 5.0.40_Ubuntu (installed by apt)
* Ubuntu: 16.04.1

{code}
$ export http_proxy=<proxy>
$ export https_proxy=<proxy>
$ export VAGRANT_HTTP_PROXY=<proxy>
$ export VAGRANT_HTTPS_PROXY=<proxy>
$ vagrant up
...
==> default: + docker run --rm busybox echo All good
==> default: Unable to find image 'busybox:latest' locally
==> default: docker: Error response from daemon: Get https://registry-1.docker.io/v2/: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers).
==> default: See 'docker run --help'.
The SSH command responded with a non-zero exit status. Vagrant
assumes that this means the command failed. The output for this command
should be in the log above. Please read the output to determine what
went wrong.
{code}
 ",27/Nov/17 3:46 AM;denyeart;[~ynamiki] Can you provide an update?,"01/Dec/17 8:13 AM;ynamiki;This could be my environment issue.

I want to set the status to ""Won't Fix"" but I cannot find such workflow.",,,,,,,,,,,,,,,,,,,,
Multiple private keys values are input to sed in replacePrivateKey () ,FAB-5221,19094,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,RichardHill,RichardHill,09/Jul/17 9:45 PM,06/Nov/17 10:18 AM,26/Apr/18 6:50 AM,06/Nov/17 10:18 AM,v1.0.0,v1.1.0-preview,,,,,v1.0.5,v1.1,,fabric-samples,,,,0,,,,,,,,,"While following the instructions here  [https://hyperledger-fabric.readthedocs.io/en/latest/build_network.html]

I saw a warning about sed...

./byfn.sh -m generate
Generating certs and genesis block for with channel 'mychannel' and CLI timeout of '10000'
Continue (y/n)? y
proceeding ...
/home/rhill/fabric-samples/first-network/../bin/cryptogen

##########################################################
##### Generate certificates using cryptogen tool #########
##########################################################
org1.example.com
org2.example.com

sed: -e expression #1, char 85: unterminated `s' command
sed: -e expression #1, char 85: unterminated `s' command

 

My setup is

docker version
Client:
 Version:      17.06.0-ce
 API version:  1.30
 Go version:   go1.8.3
 Git commit:   02c1d87
 Built:        Fri Jun 23 21:23:31 2017
 OS/Arch:      linux/amd64

Server:
 Version:      17.06.0-ce
 API version:  1.30 (minimum version 1.12)
 Go version:   go1.8.3
 Git commit:   02c1d87
 Built:        Fri Jun 23 21:19:04 2017
 OS/Arch:      linux/amd64
 Experimental: false

 

docker-compose --version
docker-compose version 1.11.2, build dfed245

 

Last commit was  $git log
commit 6899719cbbd4900970469d46e8bbf56f3346333d

 

I had a look at what sed is trying process,set -x in the 

function replacePrivateKey ()

theres mulitple private keys and linebreaks in the PRIVATE_KEY value. This looks a bit strange  but I not familiar enough with the code to know if PRIVATE_KEY should be a single value.

If its not acceptable I'll investigate the cause of those multiple keys being there and add some error handling to that bash function..

 sed -i 's/CA1_PRIVATE_KEY/1b375969c192a5167149c2917fe41df27ea42cc8ada27253717d0f486a836963_sk
7db4fd6c6a3adeaed98da8874b924deb7a56a9f88de9abd1032e98fc22cf140d_sk
8bb04d63e7b8828aeca439bed8d039762ffa28e0f72afbb7436b66bfe5c90e37_sk
f996d2eaf44211603df0c167043a75a2ccd25f901d5514597c428622e2ee1eed_sk
febd79d647b75c8b00e4ee0e9a8e0cc59ce476c0774b37157ca009809c91bf4d_sk/g' docker-compose-e2e.yaml

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01d9h:,,,,,,,,mastersingh24,RichardHill,,,,,,,,,release,release-1.0,master,true,05/Nov/17 12:56 PM;mastersingh24;The easiest thing to do is to delete the crypto-config directory if it exists when calling generateCerts,"05/Nov/17 1:07 PM;mastersingh24;[https://gerrit.hyperledger.org/r/15209] (master)

https://gerrit.hyperledger.org/r/15211 (release)",,,,,,,,,,,,,,,,,,,,,,
CLI peer does not correctly report status of a join request,FAB-5218,19091,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,yuki-kon,yuki-kon,08/Jul/17 3:24 AM,03/Nov/17 10:12 PM,26/Apr/18 6:50 AM,03/Nov/17 10:12 PM,v1.0.0-rc1,,,,,,Future,,,fabric-peer,,,,0,,,,,,,,,"Based on fabric/example/e2e_cli ([https://github.com/hyperledger/fabric/blob/master/examples/e2e_cli/end-to-end.rst])
 - Add a new organization ""org3"".
 - Add a new peer ""peer0.org3.example.com""
 - Add key/certs for ""peer0.org3.example.com"".
 - Genesis block / mychannel.tx is NOT modified. The members of ""mychannel"" are ""org1"" and ""org2"" (Not org3).

In this situation, we expect that org3 cannot join ""mychannel"" because org3 is not a member of ""mychannel"".
 However, peer command got success message after org3.admin executes ""peer join"" with existing block.
 The following are detailed procedure. Log file of orderer and peer0.org3.example.com are attached.

Steps to reproduce 
 --------------------------
 1. Generate crypto materials and genesis block.
{noformat}
 $ cd $FABRIC/examples/e2e_cli
 $ ./generateArtifacts.sh
{noformat}

2. start blockchain network
{noformat}
 $ docker-compose -f docker-compose-cli.yaml up -d
{noformat}

3. Log in cli container
{noformat}
 $ docker exec -it cli bash
{noformat}

4. Create channel by org1.Admin
{noformat}
 $ export CHANNEL_NAME=mychannel
 $ export CORE_PEER_TLS_ENABLED=true
 $ export ORDERER_CA=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
 $ peer channel create -o orderer.example.com:7050 -c $CHANNEL_NAME -f ./channel-artifacts/channel.tx --tls $CORE_PEER_TLS_ENABLED --cafile $ORDERER_CA
{noformat}

5. Join Channel by org3.Admin
{noformat}
 $ CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org3.example.com/users/Admin@org3.example.com/msp CORE_PEER_ADDRESS=peer0.org3.example.com:7051 CORE_PEER_LOCALMSPID=""Org3MSP"" CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org3.example.com/peers/peer0.org3.example.com/tls/ca.crt peer channel join -b mychannel.block
{noformat}

Expected Results
 --------------------------
 Peer command gets error message because the joining request by org3.Admin was rejected. 
 Artifacts about mychannel should not be created.

Actual Results
 -------------------------
 Peer command ends successfully. The following messages were returned.
{noformat}
2017-07-08 00:50:43.168 UTC [msp] GetLocalMSP -> DEBU 001 Returning existing local MSP
2017-07-08 00:50:43.168 UTC [msp] GetDefaultSigningIdentity -> DEBU 002 Obtaining default signing identity
2017-07-08 00:50:43.175 UTC [channelCmd] InitCmdFactory -> INFO 003 Endorser and orderer connections initialized
2017-07-08 00:50:43.177 UTC [msp/identity] Sign -> DEBU 004 Sign: plaintext: 0A85070A5B08011A0B08E3D880CB0510...142E4A305B5B1A080A000A000A000A00
2017-07-08 00:50:43.177 UTC [msp/identity] Sign -> DEBU 005 Sign: digest: 9F4D9680243E7EAB53DBDD6BBA381D3D845C2194A65C928725AADE161346F098
2017-07-08 00:50:43.278 UTC [channelCmd] executeJoin -> INFO 006 Peer joined the channel!
2017-07-08 00:50:43.279 UTC [main] main -> INFO 007 Exiting.....
{noformat}
Artifacts about mychannel was created. Blockfile of sub-ledger is on the peer0.org3.example.com.
{noformat}
$ docker exec -it peer0.org3.example.com bash
$ ls /var/hyperledger/production/ledgersData/chains/chains/mychannel
/var/hyperledger/production/ledgersData/chains/chains/mychannel/blockfile_000000
{noformat}
After joining, peer executed deliver command. However, deliver command was rejected because org3 was not ChannelReader of mychannel.",,,,,,,,,,,,,,,,,,,,08/Jul/17 3:20 AM;yuki-kon;crypto-config.yaml;https://jira.hyperledger.org/secure/attachment/11612/crypto-config.yaml,08/Jul/17 3:21 AM;yuki-kon;docker-compose-base.yaml;https://jira.hyperledger.org/secure/attachment/11611/docker-compose-base.yaml,08/Jul/17 3:21 AM;yuki-kon;docker-compose-cli.yaml;https://jira.hyperledger.org/secure/attachment/11610/docker-compose-cli.yaml,08/Jul/17 3:21 AM;yuki-kon;orderer.log;https://jira.hyperledger.org/secure/attachment/11609/orderer.log,08/Jul/17 3:21 AM;yuki-kon;peer0.org3.log;https://jira.hyperledger.org/secure/attachment/11608/peer0.org3.log,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01d8t:,,,,,,,,binhn,C0rWin,Hangyu_FJH,jeffgarratt,muralisr,weeds,yuki-kon,,,,,,,,"08/Jul/17 3:43 PM;binhn;[~yuki-kon]

This is work-as-designed: since peer0.org3 is under the control of org3.admin, the admin can instruct peer0 to join the channel (in reality, org3.admin would not have access to the channel artifact to do this anyway; only collusion would get here). At this point, the peer doesn't have the channel and so can't initialize the channel access control, so the access control requirement at this point is that the requester must be the local admin (org3.admin), which is the case here. Therefore the peer is successfully set up to join the channel <<== this is important point: since joining a channel is an async request, it requires a request to the orderer for org3, so the peer returns successful on preparation, but eventually fails on joining the channel due to membership enforcement.",08/Jul/17 5:39 PM;yuki-kon;[~binhn] Thanks for your comment. I checked the log messages of peer0.org3 and understood that joining channel request fails eventually. I'm afraid this might be an usability problem. How does admin.org3 know that joining peer fails after all? Does Fabric have a command to know the list of channels which a peer joins?,"09/Jul/17 10:06 AM;C0rWin;There is an API for CSCC to list all channels peer has joined **GetChannels**, you can see how it works with {{peer cli}} 

{code}
peer channel list
{code}","09/Jul/17 2:15 PM;binhn;[~yuki-kon]  admin.org3 is a malicious attacker trying to get into a channel that his org3 doesn't belong, would we care about usability for attackers?

Look, the channel was created without org3, so org3 would not have access to the channel artifact to begin with. But somehow (collusion) org3 got a hold of this channel artifact, and the admin didn't bother to check to see whether his org belong to the channel, so he maliciously instructed his peers to join the channel and obviously failed. 

An honest admin would verify the channel.block for correctness of policies, which orgs in it, etc before instructing the peers to join. 

That is the design, and I think it is sound as-is: protecting channels from attackers and providing no advantage to such attackers.","09/Jul/17 2:40 PM;muralisr;[~binhn] _>so the peer returns successful on preparation, but eventually fails on joining the channel due to membership enforcement_

Right.. the peer only sets up the environment so it can complete join the successfully if permitted. The CLI message should have been something like ""Peer has initiated join"" instead of ""Peer joined the channel!"".

[~yuki-kon]
 Currently peer3 cannot participate in the channel till the join loop is completed. Note that the peer continues to try to join and  continues to get the error

 
{code:java}
^[[36m2017-07-08 22:40:56.135 UTC [deliveryClient] RequestBlocks -> DEBU 672 Starting deliver with block [1] for channel mychannel
 ^[[31m2017-07-08 22:40:56.138 UTC [blocksProvider] DeliverBlocks -> ERRO 673 [mychannel] Got error &{FORBIDDEN}
 
{code}
In future we might be able to send a config update that could add Org3 to the channel and thus let the peer complete the loop.

As [~C0rWin] points out, 
{code:java}
peer chaincode list..
{code}
will get you the list of channels the peer has joined... although in this case this is not particularly useful as it will show ""mychannel"" in the (pending) list. It would have been  useful to indicated the state of the channel (e.g., ""awaiting join"", ""joined"").

Suggest we use this JIRA post 1.0 to tighten up join response
 * clean up the CLI ""Peer joined the channel!"" message (easy)
 * return more accurate state of channel in query command (moderate)

We could also investigate doing some deeper checks before preparing for the channel.

What do you think ?","09/Jul/17 9:29 PM;yuki-kon;[~C0rWin][~binhn][~muralisr] 
Thanks for your reply. I could understand deeply the design of joining peer.
I agree to the Srinivasan's proposal. It will be nice improvements for admin users to know the ""join"" status accurately.","10/Jul/17 12:53 AM;muralisr;[~yuki-kon] thanks. Created two sub tasks. If OK with you, will move this to post 1.0.",10/Jul/17 2:01 AM;yuki-kon;[~muralisr] Thank you for creating sub tasks. I agree to move this to post 1.0. I changed Fix Version/s to v1.0.1. ,"10/Jul/17 11:34 AM;weeds;Given the various comments- and that Yuki Kondo (the originator of defect)  agreed to move to post 1.0, I'm moving this to medium level defect. Thanks Yuki- I do think this is something we do absolutely need to consider- very good thoughts here. Really appreciate your diligence on all the evaluation and testing you are doing. It's very helpful .","07/Sep/17 6:32 PM;muralisr;[~yuki-kon] Given the above discussion going to rephrase it as follows ""CLI peer does not correctly report status of a join request""",26/Oct/17 7:22 PM;jeffgarratt;[~muralisr] do you have cycles for this one?,"26/Oct/17 8:43 PM;muralisr;[~jeffgarratt] After FAB-5921, I'd like to knock of chaincode FSM cleanup ... long overdue and better done for 1.1. But assign to me if there's no one else to pick this up. I can defintely get the message clean up part which from a usability point of view is a good thing. ","26/Oct/17 8:46 PM;C0rWin;I think we need to be careful here, since we need to keep in mind that we might be adding a new peer of new organization which was just added into the channel and hence doesn't present in the `genesis.block`. ",26/Oct/17 8:50 PM;muralisr;[~C0rWin] can you expand on that a bit please ? Which aspect of the fix do we need to be careful about ?,"26/Oct/17 8:57 PM;C0rWin;[~muralisr] as far as I understand the problem, or at least my interpretation of it. Peer from org3 gets genesis block while org3 is not part of the channel, however genesis.block is accepted and parsed, delivery service initiated to connect to the ordering service to pull the blocks, while eventually fails as org3 not channel readers. Therefore I'd assume that possible fix would to explore block before accepting it and initializing delivery service, providing correct error message.

My concerns is related to the scenario where you will be joining a new peer of org3, which wasn't channel reader when channel was created, but added at later stages.","01/Nov/17 8:05 PM;muralisr;From CLI's point of view, the ""join"" request is asynchronous. So the CLI side cannot predict the outcome of the join. The tasks outlined do NOT suggest we modify the CLI to do such checks to find out the outcome of the join. 

Task - *post join processing to reflect accurate status of the join command*
this was opened to track status of join on the peer side when the join command was completed to make sure the right reasons for the failure are reported. ie, basically a usability issue. On second thoughts though, suggest we don't pursue this 
* existing logs between peer and orderer would already cover some ground
* it could cause more confusion than provide clarity (e.g., a delayed inflight config update tx might have made it work)

Task - *Peer should check whether belongs to a channel before creating ledger* 
there's a chicken and egg problem here. The ledger is needed for the channel env to be brought up (some of which is needed for receiving the channel delivery to complete the join). One thing we should do is to make sure the ledger is cleaned up if the join fails. Propose we do it as a separate JIRA item and not link it to this one.

(Anything to add [~C0rWin] ?)

What do you think [~yuki-kon] ? Does that sound reasonable ?

If the above two are agreed to, the only thing we need to do for this JIRA is the task *correct misleading CLI output on join* task.","01/Nov/17 8:18 PM;yuki-kon;Thank you for thinking of this JIRA, [~muralisr]. I agree with your proposal. It's reasonable to correct misleading CLI output on join.","01/Nov/17 8:59 PM;muralisr;Thank you for the prompt response [~yuki-kon]. I'll unlink *Peer should check whether belongs to a channel before creating ledger* from this JIRA and mark *post join processing to reflect accurate status of the join command* as ""won't do""",,,,,,
Docker 1.13 should be a requirement,FAB-5216,19089,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,markparz,shimos,shimos,07/Jul/17 9:47 PM,13/Sep/17 5:32 PM,26/Apr/18 6:50 AM,13/Sep/17 5:32 PM,v1.0.0-rc1,,,,,,Future,,,fabric-docs,fabric-samples,,,0,,,,,,,,,"The fabcar sample in fabric-samples uses the ""-e"" option for ""docker exec"" as below:
{noformat}
docker exec -e ""CORE_PEER_LOCALMSPID=Org1MSP"" -e ""CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/msp/users/Admin@org1.example.com/msp"" peer0.org1.example.com peer channel create -o orderer.example.com:7050 -c mychannel -f /etc/hyperledger/configtx/mychannel.tx
{noformat}

Since the ""-e"" or ""env"" option is introduced in Docker 1.13, the requirement for Docker explained in the documents should be ""1.13 or greater"" rather than ""1.12 or greater.""
(alternatively, the script should be changed for it to work under Docker 1.12)
","fabric-samples 6899719cbbd4900970469d46e8bbf56f3346333d

fabric 4709b3384bd5b4996673c620afbd7dab256ccbc8",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01d8d:,,,,,,,,markparz,shimos,,,,,,,,,master,,,true,24/Jul/17 7:13 PM;markparz;CR https://gerrit.hyperledger.org/r/#/c/11883/,,,,,,,,,,,,,,,,,,,,,,,
behave test fmwk: should allow empty strings to be passed in query,FAB-5213,19047,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,latitiah,Nishi,Nishi,07/Jul/17 6:20 PM,07/Jul/17 6:21 PM,26/Apr/18 6:50 AM,,,,,,,,,,,fabric-quality,,,,0,,,,,,,,,"Please find attached feature file where it fails currently @ step:
{code:java}
 Then a user receives expected response of{code}
 

 

 ",,,,,,,,,,,,,,,,,,,,07/Jul/17 6:20 PM;Nishi;chaincode_example03.feature;https://jira.hyperledger.org/secure/attachment/11607/chaincode_example03.feature,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01czh:,,,,,,,,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[node-sdk]Fix tls_cacerts path in e2e test,FAB-5212,19046,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yuki-kon,yuki-kon,yuki-kon,07/Jul/17 5:12 PM,17/Jul/17 7:46 PM,26/Apr/18 6:50 AM,17/Jul/17 7:46 PM,v1.0.0,,,,,,v1.0.1,,,fabric-sdk-node,,,,0,,,,,,,,,"File path of ""tls_cacerts"" is wrong in test/integration/e2e/config.json.
 The valuable of ""tls_cacerts"" is pointing the path of ""cacerts"".
{code:java}
{
        ""test-network"": {
                ""orderer"": {
                        ""tls_cacerts"": ""../../fixtures/channel/crypto-config/ordererOrganizations/example.com/orderers/orderer.example.com/cacerts/example.com-cert.pem""
                },
                ""org1"": {
                        ""peer1"": {
                                ""tls_cacerts"": ""../../fixtures/channel/crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/cacerts/org1.example.com-cert.pem""
                        }
                },
                ""org2"": {
                        },
                        ""peer1"": {
                                ""tls_cacerts"": ""../../fixtures/channel/crypto-config/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/cacerts/org2.example.com-cert.pem""
                        }
                }
        }
}
{code}
We need to change the path to acctual tlscacerts directory.",fabric-sdk-node: commit a8651210bee69f64941164ab391a36efcd62f947,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01cz9:,,,,,,,,yuki-kon,,,,,,,,,,master,,,true,07/Jul/17 5:47 PM;yuki-kon;Posted here: https://gerrit.hyperledger.org/r/#/c/11439/,,,,,,,,,,,,,,,,,,,,,,,
docker-compose does not work in the documented development environment,FAB-5204,19010,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ynamiki,ynamiki,ynamiki,07/Jul/17 4:23 AM,10/Sep/17 9:57 AM,26/Apr/18 6:50 AM,10/Sep/17 9:57 AM,v1.0.0,,,,,,v1.1,,,fabric-docs,,,,0,,,,,,,,,"I have set up a development environment by following [the document|http://hyperledger-fabric.readthedocs.io/en/latest/dev-setup/devenv.html] (revision 5a66dd38) with a newly-created Amazon EC2 instance with image ""Ubuntu Server 16.04 LTS (HVM), SSD Volume Type - ami-785c491f"".

After executing the pip commands in the document, docker-compose does not work.

{code}
$ sudo apt update
$ sudo apt -y install python-pip
$ pip --version
pip 8.1.1 from /usr/lib/python2.7/dist-packages (python 2.7)
$ sudo apt -y install libssl-dev # for cryptography

$ sudo pip install --upgrade pip
$ pip --version
pip 9.0.1 from /usr/local/lib/python2.7/dist-packages (python 2.7)

$ sudo pip install behave nose docker-compose
...
Successfully installed PyYAML-3.12 backports.ssl-match-hostname-3.5.0.1 behave-1.2.5 cached-property-1.3.0 colorama-0.3.9 docker-2.4.2 docker-compose-1.14.0 docker-pycreds-0.2.1 dockerpty-0.4.1 docopt-0.6.2 enum34-1.1.6 functools32-3.2.3.post2 ipaddress-1.0.18 jsonschema-2.6.0 nose-1.3.7 parse-1.8.2 parse-type-0.3.4 requests-2.11.1 six-1.10.0 texttable-0.8.8 websocket-client-0.44.0
$ docker-compose version
docker-compose version 1.14.0, build c7bdf9e
docker-py version: 2.4.2
CPython version: 2.7.12
OpenSSL version: OpenSSL 1.0.2g  1 Mar 2016

$ # Install requests==2.4.3 according to the document
$ sudo pip install -I flask==0.10.1 python-dateutil==2.2 pytz==2014.3 pyyaml==3.10 couchdb==1.0 flask-cors==2.0.1 requests==2.4.3 pyOpenSSL==16.2.0 pysha3==1.0b1 grpcio==1.0.4
...
Successfully installed Jinja2-2.9.6 MarkupSafe-1.0 Werkzeug-0.12.2 asn1crypto-0.22.0 cffi-1.10.0 couchdb-1.0 cryptography-1.9 enum34-1.1.6 flask-0.10.1 flask-cors-2.0.1 futures-3.1.1 grpcio-1.0.4 idna-2.5 ipaddress-1.0.18 itsdangerous-0.24 protobuf-3.3.0 pyOpenSSL-16.2.0 pycparser-2.18 pysha3-1.0b1 python-dateutil-2.2 pytz-2014.3 pyyaml-3.12 requests-2.11.1 setuptools-36.0.1 six-1.10.0

$ sudo pip install urllib3 ndg-httpsclient pyasn1 ecdsa python-slugify grpcio-tools jinja2 b3j0f.aop six
...
Successfully installed Unidecode-0.4.21 b3j0f.aop-0.8.4 b3j0f.utils-1.4.4 ecdsa-0.13 grpcio-1.4.0 grpcio-tools-1.4.0 ndg-httpsclient-0.4.2 ordereddict-1.1 pyasn1-0.2.3 python-slugify-1.2.4 urllib3-1.21.1
$ docker-compose version
Traceback (most recent call last):
  File ""/usr/local/bin/docker-compose"", line 7, in <module>
    from compose.cli.main import main
  File ""/usr/local/lib/python2.7/dist-packages/compose/cli/main.py"", line 17, in <module>
    from . import errors
  File ""/usr/local/lib/python2.7/dist-packages/compose/cli/errors.py"", line 11, in <module>
    from docker.errors import APIError
  File ""/usr/local/lib/python2.7/dist-packages/docker/__init__.py"", line 2, in <module>
    from .api import APIClient
  File ""/usr/local/lib/python2.7/dist-packages/docker/api/__init__.py"", line 2, in <module>
    from .client import APIClient
  File ""/usr/local/lib/python2.7/dist-packages/docker/api/client.py"", line 6, in <module>
    import requests
  File ""/usr/local/lib/python2.7/dist-packages/requests/__init__.py"", line 53, in <module>
    from .packages.urllib3.contrib import pyopenssl
  File ""/usr/local/lib/python2.7/dist-packages/requests/packages/urllib3/contrib/pyopenssl.py"", line 73, in <module>
    ssl.PROTOCOL_SSLv3: OpenSSL.SSL.SSLv3_METHOD,
AttributeError: 'module' object has no attribute 'PROTOCOL_SSLv3'
{code}

I found that we can fix the issue by upgrading requests.

{code}
$ sudo pip install -U requests
...
Successfully installed certifi-2017.4.17 chardet-3.0.4 requests-2.18.1
$ docker-compose version
docker-compose version 1.14.0, build c7bdf9e
docker-py version: 2.4.2
CPython version: 2.7.12
OpenSSL version: OpenSSL 1.0.2g  1 Mar 2016
{code}

Do we need to stick to requests-2.4.3?

Outputs of pip freeze (before and after upgrading requests) are attached.",,,,,,,,,,,,,,,,,,,,07/Jul/17 4:20 AM;ynamiki;pip-freeze-requests-2.18.1.txt;https://jira.hyperledger.org/secure/attachment/11603/pip-freeze-requests-2.18.1.txt,07/Jul/17 4:20 AM;ynamiki;pip-freeze-requests-2.4.3.txt;https://jira.hyperledger.org/secure/attachment/11604/pip-freeze-requests-2.4.3.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01csl:,,,,,,,,ynamiki,,,,,,,,,,master,,,true,"11/Jul/17 8:16 AM;ynamiki;I fixed the issue by installing stand-alone docker-compose (in GitHub Releases page), not by upgrading requests (as described above).

The document is updated in
https://gerrit.hyperledger.org/r/11517

Packages installed after following the document in a fresh Ubuntu 16.04 machine (before running pip, only python-apt==1.1.0b1 has been installed):
{code}
$ pip freeze
asn1crypto==0.22.0
b3j0f.aop==0.8.4
b3j0f.utils==1.4.4
behave==1.2.5
cffi==1.10.0
CouchDB==1.0
cryptography==1.9
ecdsa==0.13
enum34==1.1.6
Flask==0.10.1
Flask-Cors==2.0.1
futures==3.1.1
grpcio==1.4.0
grpcio-tools==1.4.0
idna==2.5
ipaddress==1.0.18
itsdangerous==0.24
Jinja2==2.9.6
MarkupSafe==1.0
ndg-httpsclient==0.4.2
nose==1.3.7
ordereddict==1.1
parse==1.8.2
parse-type==0.3.4
protobuf==3.3.0
pyasn1==0.2.3
pycparser==2.18
pyOpenSSL==16.2.0
pysha3==1.0b1
python-apt==1.1.0b1
python-dateutil==2.2
python-slugify==1.2.4
pytz==2014.3
PyYAML==3.10
requests==2.4.3
six==1.10.0
Unidecode==0.4.21
urllib3==1.21.1
Werkzeug==0.12.2
{code}",24/Jul/17 11:37 AM;ynamiki;https://gerrit.hyperledger.org/r/11517,,,,,,,,,,,,,,,,,,,,,,
Add python2.7 to prerequisites,FAB-5200,19004,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nickgaski,yuki-kon,yuki-kon,06/Jul/17 8:55 PM,13/Sep/17 3:29 PM,26/Apr/18 6:50 AM,13/Sep/17 3:29 PM,v1.0.0-rc1,,,,,,Future,,,fabric-docs,,,,0,,,,,,,,,"When setting up fabric-sdk-node, ""npm install"" fails without python 2.7.
The error messages are the below.

During installation, node-gyp is used to build modules for fabric-client and fabric-ca-client.
node-gyp requires python v2.7 as prerequisites. python v3.x.x is not supported.
However, python2 is not installed anymore by default on Ubuntu 16.04 LTS. https://wiki.ubuntu.com/XenialXerus/ReleaseNotes
As a result, ""npm install"" fails due to lacking python 2.7.

We need to add python2.7 to prerequisites.

{code:java}

ubuntu@ubuntu:~/fabric-samples/fabcar$ npm install

> pkcs11js@1.0.9 install /home/ubuntu/fabric-samples/fabcar/node_modules/pkcs11js
> npm run build


> pkcs11js@1.0.9 build /home/ubuntu/fabric-samples/fabcar/node_modules/pkcs11js
> node-gyp configure build

gyp ERR! configure error
gyp ERR! stack Error: Can't find Python executable ""python"", you can set the PYTHON env variable.
gyp ERR! stack     at failNoPython (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:449:14)
gyp ERR! stack     at /usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:353:11
gyp ERR! stack     at F (/usr/local/lib/node_modules/npm/node_modules/which/which.js:69:16)
gyp ERR! stack     at E (/usr/local/lib/node_modules/npm/node_modules/which/which.js:81:29)
gyp ERR! stack     at /usr/local/lib/node_modules/npm/node_modules/which/which.js:90:16
gyp ERR! stack     at /usr/local/lib/node_modules/npm/node_modules/which/node_modules/isexe/index.js:44:5
gyp ERR! stack     at /usr/local/lib/node_modules/npm/node_modules/which/node_modules/isexe/access.js:8:5
gyp ERR! stack     at FSReqWrap.oncomplete (fs.js:123:15)
gyp ERR! System Linux 4.4.0-78-generic
gyp ERR! command ""/usr/local/bin/node"" ""/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js"" ""configure"" ""build""
gyp ERR! cwd /home/ubuntu/fabric-samples/fabcar/node_modules/pkcs11js
gyp ERR! node -v v6.9.5
gyp ERR! node-gyp -v v3.4.0
gyp ERR! not ok

{code}",Ubuntu 16.04,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01crp:,,,,,,,,latitiah,yuki-kon,,,,,,,,,master,,,true,"12/Jul/17 7:36 PM;latitiah;https://www.digitalocean.com/community/tutorials/what-s-new-in-ubuntu-16-04

Python 3.5 is the default on Ubuntu 16.04. This is a complaint among many pythonistas using 16.04. We should just add a prerequisite to install python. 
{code}
sudo apt-get install python
{code}
",,,,,,,,,,,,,,,,,,,,,,,
Update System Behave README,FAB-5198,19002,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,latitiah,latitiah,latitiah,06/Jul/17 4:43 PM,19/Jul/17 7:05 PM,26/Apr/18 6:50 AM,19/Jul/17 7:05 PM,,,,,,,,,,fabric-quality,,,,0,,,,,,,,,"Need to update the PATH to include the path to the cryptogen and configtxgen executables.
Also mention the Helpful tools section in the contribution section.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01cr9:,,Sprint 19 - Quality,,,,,,latitiah,,,,,,,,,,master,,,true,06/Jul/17 4:44 PM;latitiah;https://gerrit.hyperledger.org/r/11413,,,,,,,,,,,,,,,,,,,,,,,
Fails to check all proposal responses in balance-transfer,FAB-5197,19001,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yuki-kon,yuki-kon,yuki-kon,06/Jul/17 3:06 PM,17/Jul/17 7:46 PM,26/Apr/18 6:50 AM,17/Jul/17 7:46 PM,v1.0.0,,,,,,v1.0.1,,,fabric-samples,fabric-sdk-node,,,0,,,,,,,,,"""balance-transfer"" application doesn’t check all of the proposal responses.

An app sends a transaction proposal to multiple peers and get multiple responses.
However, the only first response ""proposalResponses[0]"" is checked repeatedly in the loop like the below.

{code:java}
for (var i in proposalResponses) {
	let one_good = false;
	if (proposalResponses && proposalResponses[0].response &&
		proposalResponses[0].response.status === 200) {
		one_good = true;
		logger.info('transaction proposal was good');
	} else {
		logger.error('transaction proposal was bad');
	}
	all_good = all_good & one_good;
}
{code}

We need to fix the code to check all of the array value of proposalResponses correctly.
The following codes have this problem.

fabric-samples/balance-transfer/app/install-chaincode.js
fabric-samples/balance-transfer/app/instantiate-chaincode.js
fabric-samples/balance-transfer/app/invoke-transaction.js",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01cr1:,,,,,,,,yuki-kon,,,,,,,,,,master,,,true,06/Jul/17 5:04 PM;yuki-kon;Posted here: https://gerrit.hyperledger.org/r/#/c/11415/,,,,,,,,,,,,,,,,,,,,,,,
BYFN tutorial: byfn.sh help text is incorrect,FAB-5196,19000,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,scottz,scottz,06/Jul/17 2:57 PM,07/Jul/17 2:07 AM,26/Apr/18 6:50 AM,07/Jul/17 2:07 AM,v1.0.0,,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,,"The descriptions for ""down"" and ""restart"" are the same as ""up"", so they need to be reworded. Refer to FAB-5195, which was opened to fix the tool itself. this bug is for updating the doc page with the corrected wording.

```

fabric-samples/first-network$ ./byfn.sh -h
Usage: 
 byfn.sh -m up|down|restart|generate [-c <channel name>] [-t <timeout>]
 byfn.sh -h|--help (print this message)
 -m <mode> - one of 'up', 'down', 'restart' or 'generate'
 - 'up' - bring up the network with docker-compose up
 - 'down' - bring up the network with docker-compose up
 - 'restart' - bring up the network with docker-compose up
 - 'generate' - generate required certificates and genesis block
 -c <channel name> - channel name to use (defaults to ""mychannel"")
 -t <timeout> - CLI timeout duration in microseconds (defaults to 10000)

```

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01cqt:,,,,,,,,nnao,scottz,,,,,,,,,master,,,true,06/Jul/17 6:22 PM;nnao;https://gerrit.hyperledger.org/r/#/c/11421/,,,,,,,,,,,,,,,,,,,,,,,
byfn.sh help text is incorrect,FAB-5195,18999,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,scottz,scottz,06/Jul/17 2:55 PM,06/Jul/17 7:52 PM,26/Apr/18 6:50 AM,06/Jul/17 7:52 PM,v1.0.0,,,,,,v1.0.0,,,fabric-samples,,,,0,,,,,,,,,"{{The descriptions for ""down"" and ""restart"" are the same as ""up"", so they need to be reworded in the tool script.}}

 
{quote}fabric-samples/first-network$ ./byfn.sh -h
Usage: 
byfn.sh -m up|down|restart|generate [-c <channel name>] [-t <timeout>]
byfn.sh -h|--help (print this message)
-m <mode> - one of 'up', 'down', 'restart' or 'generate'
- 'up' - bring up the network with docker-compose up
- 'down' - *bring up the network with docker-compose up*
- 'restart' - *bring up the network with docker-compose up*
- 'generate' - generate required certificates and genesis block
-c <channel name> - channel name to use (defaults to ""mychannel"")
-t <timeout> - CLI timeout duration in microseconds (defaults to 10000)
{quote}
 ",,,,,,,,,,,,,,,,,FAB-5196,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01cql:,,,,,,,,nnao,scottz,,,,,,,,,master,,,true,06/Jul/17 6:22 PM;nnao;https://gerrit.hyperledger.org/r/#/c/11419/,,,,,,,,,,,,,,,,,,,,,,,
Fix code usage problems,FAB-5194,18994,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,baohua,baohua,baohua,06/Jul/17 3:17 AM,03/Aug/17 2:56 PM,26/Apr/18 6:50 AM,03/Aug/17 2:56 PM,,,,,,,Future,,,fabric-quality,,,,0,,,,,,,,,"Currently, there're still misusage problems w.r.t gramma, typos, wrong params.

 

Recently, there are several patchset to help clean up it.

 

We need some full-scan to try fixing most of the problems before the release.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01cph:,,,,,,,,baohua,,,,,,,,,,master,,,true,06/Jul/17 3:50 AM;baohua;https://gerrit.hyperledger.org/r/#/c/11407/,,,,,,,,,,,,,,,,,,,,,,,
Mock servers should accept port & cleanup,FAB-5193,18993,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,troyronda,troyronda,troyronda,06/Jul/17 1:34 AM,07/Jul/17 3:54 AM,26/Apr/18 6:50 AM,07/Jul/17 3:54 AM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01cp9:,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Change Hyperledger Project to Hyperledger,FAB-5189,18988,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,05/Jul/17 7:31 PM,06/Jul/17 12:14 PM,26/Apr/18 6:50 AM,06/Jul/17 12:14 PM,v1.0.0-rc1,,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01col:,,,,,,,,mastersingh24,,,,,,,,,,master,,,true,05/Jul/17 8:10 PM;mastersingh24;https://gerrit.hyperledger.org/r/11391,,,,,,,,,,,,,,,,,,,,,,,
goAST security tests are failing in CI,FAB-5187,18986,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jtclark,rameshthoomu,rameshthoomu,05/Jul/17 7:00 PM,24/Jan/18 4:26 PM,26/Apr/18 6:50 AM,24/Jan/18 4:26 PM,v1.0.0-rc1,,,,,,WON'T FIX,,,fabric-ca,,,,0,Security,,,,,,,,"Observed goAST security tests are failing in CI consistently. Below is the daily goAST build status and result.

[https://jenkins.hyperledger.org/view/Daily/job/fabric-goast-daily-x86_64/52/artifact/gopath/src/github.com/hyperledger/fabric/results.json/*view*/]

[https://jenkins.hyperledger.org/view/Daily/job/fabric-goast-daily-x86_64/52/consoleFull]

*Below are the steps to execute goAST scans:*

1) clone fabric repository

2) go get github.com/GoASTScanner/gas

3) gas -fmt=json -out=results.json ./...",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01co5:,,,,,,,,ashutosh_kumar,ChristopherFerris,jtclark,nnao,rameshthoomu,smithbk,,,,,,,,,"13/Jul/17 3:10 PM;ashutosh_kumar;We are not required to scan Vendor package and other directory , e.g. *bddtest ,* that is not part of Fabric and fabric-ca mage. Also , the output should be in HTML format.

Here is the command that I used for my scanning :

*gas -skip=/Users/ash/go/src/github.com/hyperledger/fabric/vendor/* -skip=/Users/ash/go/src/github.com/hyperledger/fabric/bddtests/* -fmt=html -out=scanresult.html ./...*

These scans should be run fabric-ca repository also.

The output of scan should be retained somewhere on some server and in the event of scan failing , an email should go to mailing list consisting of squad leads :

Srinivasan Muralidharan

David Eneyeart

Jim Zhang

Kostas

Keith Smith

Barry

Ashutosh Kumar

Binh Nguyen

Gari Singh

There is no way the scan not to throw error. There will be false positives , which will make scan fail. Team will fix vulnerabilities identified , but currently , there is no way to eliminate false positives.

 

 

 

 

 

 ",13/Jul/17 3:16 PM;rameshthoomu;Thanks [~ashutosh_kumar]. Will work on these requirements.,18/Aug/17 2:17 PM;rameshthoomu;[~jtclark] Any update on this?,"03/Nov/17 11:21 AM;smithbk;This tool reports lots of ""undeclared name"" errors for things that are actually defined.
See https://github.com/GoASTScanner/gas/issues/113 which currently says a fix may be in the experimental branch.
[~jtclark] I think this tool is unusable until we get a version of gas with this fix.  I suggest trying the experimental branch.","10/Nov/17 3:35 PM;smithbk;[~jtclark] Hi Jason, could you provide an update?",04/Jan/18 12:48 PM;ChristopherFerris;[~jtclark] can you please update on the status of this?,24/Jan/18 12:27 PM;jtclark;[~ChristopherFerris] - This JIRA task has been duplicated. The updated JIRA task capturing the latest work on this issue is FAB-7011. This issue can be closed.,,,,,,,,,,,,,,,,,
Correct / remove references to non-Go chaincode,FAB-5185,18980,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,05/Jul/17 3:13 PM,06/Jul/17 12:13 PM,26/Apr/18 6:50 AM,06/Jul/17 12:13 PM,v1.0.0-rc1,,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,,"The docs still mention Java chaincode as well as future language support (e.g. in the FAQ).

Needs to clean these up",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01cmt:,,,,,,,,mastersingh24,,,,,,,,,,master,,,true,05/Jul/17 3:27 PM;mastersingh24;https://gerrit.hyperledger.org/r/11385,,,,,,,,,,,,,,,,,,,,,,,
Spelling error in peer version output,FAB-5184,18977,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,05/Jul/17 2:55 PM,06/Jul/17 8:51 AM,26/Apr/18 6:50 AM,06/Jul/17 8:51 AM,v1.0.0-rc1,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"peer:
 Version: 1.0.0-rc1
 Go version: go1.7.5
 OS/Arch: linux/s390x
 Chaincode:
 Base Image Version: 0.3.1
 Base Docker Namespace: ibmblockchain
 Base Docker Label: org.hyperledger.fabric
 Docker *Namepace*: ibmblockchain",,,,120,120,,0%,120,120,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01cm5:,,,,,,,,mastersingh24,,,,,,,,,,master,,,true,05/Jul/17 2:59 PM;mastersingh24;https://gerrit.hyperledger.org/r/11383,,,,,,,,,,,,,,,,,,,,,,,
java e2e tests are failing intermittently in CI,FAB-5182,18969,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,rameshthoomu,rameshthoomu,05/Jul/17 1:44 PM,17/Jul/17 4:54 PM,26/Apr/18 6:50 AM,17/Jul/17 4:54 PM,v1.0.0-rc1,,,,,,WON'T FIX,,,fabric-sdk-java,,,,0,java-SDK,,,,,,,,"Observed java e2e tests are failing intermittently with timeout error.  Below are the failures
*00:19:03.611* Tests run: 17, Failures: 2, Errors: 0, Skipped: 2, Time elapsed: 25.396 sec <<< FAILURE! - in org.hyperledger.fabric.sdkintegration.IntegrationSuite*00:19:03.613* setup(org.hyperledger.fabric.sdkintegration.End2endIT)  Time elapsed: 11.951 sec  <<< FAILURE!*00:19:03.613* java.lang.AssertionError: Send transactions failed. Reason:  timeout*00:19:03.613* 	at org.hyperledger.fabric.sdkintegration.End2endIT.setup(End2endIT.java:209)*00:19:03.614* *00:19:03.614* setup(org.hyperledger.fabric.sdkintegration.End2endAndBackAgainIT)  Time elapsed: 0.956 sec  <<< FAILURE!*00:19:03.614* java.lang.AssertionError: Peer peer0.org1.example.com does not appear to belong to channel foo*00:19:03.614* 	at org.hyperledger.fabric.sdkintegration.End2endAndBackAgainIT.reconstructChannel(End2endAndBackAgainIT.java:503)*00:19:03.614* 	at org.hyperledger.fabric.sdkintegration.End2endAndBackAgainIT.setup(End2endAndBackAgainIT.java:163)
 
*00:19:03.932* Failed tests: *00:19:03.932*   End2endAndBackAgainIT.setup:163->reconstructChannel:503 Peer peer0.org1.example.com does not appear to belong to channel foo*00:19:03.932*   End2endIT.setup:209 Send transactions failed. Reason:  timeout*00:19:03.932* *00:19:03.932* Tests run: 17, Failures: 2, Errors: 0, Skipped: 2
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01ckd:,,,,,,,,harsha544,rameshthoomu,rickr,,,,,,,,,,,,17/Jul/17 4:53 PM;rickr;Not seeing this happen - so closing,,,,,,,,,,,,,,,,,,,,,,,
fabrictxn.QueryChaincode() asks for 3 args when it needs 2 actually,FAB-5181,18967,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,dolanor,dolanor,05/Jul/17 12:42 PM,19/Mar/18 8:51 PM,26/Apr/18 6:50 AM,19/Mar/18 8:51 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"From some memory, I thought I should call the query with the invoke first, so I did that:

 
{code:java}
response, err := fabrictxn.QueryChaincode(client, channel, ""sunchaincode"", []string{""invoke"", ""query"", ""b""})
{code}
 

 

But then I got an error telling me that
{noformat}
status: 500, message: Incorrect number of arguments. Expecting 3{noformat}
(log)

 
{code:java}
2017-07-05 12:11:31.941 CEST [fabric_sdk_go] InitConfigWithCmdRoot -> INFO 001 Using config file: ./config.yaml
2017-07-05 12:11:31.942 CEST [fabric_sdk_go] InitConfigWithCmdRoot -> INFO 002 fabric_sdk_go Logging level: info
12:11:31.942 [fabric_sdk_go] INFO :  KeyStore path [./statestore] missing [true]: [%!s(<nil>)]
12:11:31.959 [fabric_sdk_go] INFO :  Constructed channel instance: &{mychain true map[] 200 map[] 0xc42001def0 <nil> 0xc4201e7540 [] false}
--- FAIL: TestGetMeters (0.26s)
    client_test.go:15: Error quering the blockchain  couldn't query the chaincode: CreateAndSendTransactionProposal returned error: invoke Endorser  returned error: Transaction processor (ec2-35-156-192-46.eu-central-1.compute.amazonaws.com:7051) returned error 'rpc error: code = Unknown desc = chaincode error (status: 500, message: Incorrect number of arguments. Expecting 3)' for proposal: {802ba8c16c9a804cc3c5344ce21ca24b11d37fef2fa2eb394cba515d8b3d2ca4 proposal_bytes:""\n\262\007\nn\010\003\032\014\010\323\366\362\312\005\020\257\336\342\311\003\""\010sunchain*@802ba8c16c9a804cc3c5344ce21ca24b11d37fef2fa2eb394cba515d8b3d2ca4:\020\022\016\022\014mychaincode\022\277\006\n\242\006\n\007Org1MSP\022\226\006-----BEGIN CERTIFICATE-----\nMIICGjCCAcCgAwIBAgIRAKDiQPB9Uhjjvg7AG1T92eswCgYIKoZIzj0EAwIwczEL\nMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBG\ncmFuY2lzY28xGTAXBgNVBAoTEG9yZzEuZXhhbXBsZS5jb20xHDAaBgNVBAMTE2Nh\nLm9yZzEuZXhhbXBsZS5jb20wHhcNMTcwNzA0MTAyODQ1WhcNMjcwNzAyMTAyODQ1\nWjBbMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMN\nU2FuIEZyYW5jaXNjbzEfMB0GA1UEAwwWQWRtaW5Ab3JnMS5leGFtcGxlLmNvbTBZ\nMBMGByqGSM49AgEGCCqGSM49AwEHA0IABE8kdeEMnKzQ8EP4CCtpWWNI4S+Mtvar\nl+rTzNbI6Anx1aa2jUtHrSW9yuLpe9rIL8WpAy3DNOnzUU5CiAA1aY+jTTBLMA4G\nA1UdDwEB/wQEAwIHgDAMBgNVHRMBAf8EAjAAMCsGA1UdIwQkMCKAIEAA0ySyXOe5\nmM9aAw/jr22ao8vXpF7V6wtcRwxEMsRNMAoGCCqGSM49BAMCA0gAMEUCIQC42lJ1\nahtZOIzVccQeXrtcvBwwepgPFXHzLw4miywoqQIgYO0QF1snDL1Ca0fkGQ7/dByn\n6bnuNVpr1m11ThAduuA=\n-----END CERTIFICATE-----\n\022\030{w^\324\002\321JWT\034\314\tzR\3314L\262\377d\016<*_\022*\n(\n&\010\001\022\016\022\014mychaincode\032\022\n\006invoke\n\005query\n\001b"" signature:""0D\002 -\335r_W\206*wl\251\231\016\351\341\324'\253\350dd\357<\314R}>\241\376D]I\301\002 m_y\360\307\022\257f\010)~\345\252\210\316\261\202\2162\207I\024A\264M\024\243:\034\000NC""  header:""\nn\010\003\032\014\010\323\366\362\312\005\020\257\336\342\311\003\""\010sunchain*@802ba8c16c9a804cc3c5344ce21ca24b11d37fef2fa2eb394cba515d8b3d2ca4:\020\022\016\022\014mychaincode\022\277\006\n\242\006\n\007Org1MSP\022\226\006-----BEGIN CERTIFICATE-----\nMIICGjCCAcCgAwIBAgIRAKDiQPB9Uhjjvg7AG1T92eswCgYIKoZIzj0EAwIwczEL\nMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBG\ncmFuY2lzY28xGTAXBgNVBAoTEG9yZzEuZXhhbXBsZS5jb20xHDAaBgNVBAMTE2Nh\nLm9yZzEuZXhhbXBsZS5jb20wHhcNMTcwNzA0MTAyODQ1WhcNMjcwNzAyMTAyODQ1\nWjBbMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMN\nU2FuIEZyYW5jaXNjbzEfMB0GA1UEAwwWQWRtaW5Ab3JnMS5leGFtcGxlLmNvbTBZ\nMBMGByqGSM49AgEGCCqGSM49AwEHA0IABE8kdeEMnKzQ8EP4CCtpWWNI4S+Mtvar\nl+rTzNbI6Anx1aa2jUtHrSW9yuLpe9rIL8WpAy3DNOnzUU5CiAA1aY+jTTBLMA4G\nA1UdDwEB/wQEAwIHgDAMBgNVHRMBAf8EAjAAMCsGA1UdIwQkMCKAIEAA0ySyXOe5\nmM9aAw/jr22ao8vXpF7V6wtcRwxEMsRNMAoGCCqGSM49BAMCA0gAMEUCIQC42lJ1\nahtZOIzVccQeXrtcvBwwepgPFXHzLw4miywoqQIgYO0QF1snDL1Ca0fkGQ7/dByn\n6bnuNVpr1m11ThAduuA=\n-----END CERTIFICATE-----\n\022\030{w^\324\002\321JWT\034\314\tzR\3314L\262\377d\016<*_"" payload:""\n(\n&\010\001\022\016\022\014mychaincode\032\022\n\006invoke\n\005query\n\001b"" }
12:11:32.204 [fabric_sdk_go] INFO :  Using config file: ./config.yaml
12:11:32.205 [fabric_sdk_go] INFO :  fabric_sdk_go Logging level: info
12:11:32.205 [fabric_sdk_go] INFO :  KeyStore path [./statestore] missing [true]: [%!s(<nil>)]
{code}
 

The fix was to remove the ""invoke"" arg (and therefore making the args number of 2, which goes against the error message)
{code:java}
response, err := fabrictxn.QueryChaincode(client, channel, ""sunchaincode"", []string{""query"", ""b""}){code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i025a0:,,,,,,,,dolanor,troyronda,,,,,,,,,,,,,"19/Mar/18 8:51 PM;troyronda;The new SDK now has these methods:

[https://godoc.org/github.com/hyperledger/fabric-sdk-go/pkg/client/channel#Client.Query]

[https://godoc.org/github.com/hyperledger/fabric-sdk-go/pkg/client/channel#Client.Execute]

 ",,,,,,,,,,,,,,,,,,,,,,,
Failed to build javaenv-image in the environment behind an HTTP Proxy,FAB-5179,18961,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nemoto,nemoto,nemoto,05/Jul/17 8:04 AM,27/Nov/17 3:43 AM,26/Apr/18 6:50 AM,27/Nov/17 3:43 AM,v1.0.0-rc1,,,,,,Future,,,fabric-build,fabric-devenv,,,0,,,,,,,,,"javaenv-image build fails with the following messages when I run make docker in the clean environment behind an HTTP proxy. (Some private information is replaced in the messages.)
{noformat}
username@ubuntu:~/go/src/github.com/hyperledger/fabric$ [master] make docker
(...snip)
Building docker javaenv-image
docker build --build-arg 'http_proxy=http://username:password@proxy:port/' --build-arg 'https_proxy=http://username:password@proxy:port/' --build-arg 'HTTP_PROXY=http://username:password@proxy:port/' --build-arg 'HTTPS_PROXY=http://username:password@proxy:port/' -t hyperledger/fabric-javaenv build/image/javaenv
Sending build context to Docker daemon 45.06kB
Step 1/15 : FROM hyperledger/fabric-baseimage:x86_64-0.3.1
---> 9f2e9ec7c527
Step 2/15 : RUN curl -sSL https://services.gradle.org/distributions/gradle-2.12-bin.zip > /tmp/gradle-2.12-bin.zip
---> Running in 67b7ac7cf9b0
---> 7217c844888a
Removing intermediate container 67b7ac7cf9b0
Step 3/15 : RUN unzip -qo /tmp/gradle-2.12-bin.zip -d /opt && rm /tmp/gradle-2.12-bin.zip
---> Running in a06ed18d9793
---> a2903111a9b2
Removing intermediate container a06ed18d9793
Step 4/15 : RUN ln -s /opt/gradle-2.12/bin/gradle /usr/bin
---> Running in 01798ccf7f96
---> 6fdd92624c86
Removing intermediate container 01798ccf7f96
Step 5/15 : ENV MAVEN_VERSION 3.3.9
---> Running in 953c8549ec55
---> 629aaabecbf4
Removing intermediate container 953c8549ec55
Step 6/15 : ENV USER_HOME_DIR ""/root""
---> Running in b11dd5f890a7
---> 9328b095788f
Removing intermediate container b11dd5f890a7
Step 7/15 : RUN mkdir -p /usr/share/maven /usr/share/maven/ref && curl -fsSL http://apache.osuosl.org/maven/maven-3/$MAVEN_VERSION/binaries/apache-maven-$MAVEN_VERSION-bin.tar.gz | tar -xzC /usr/share/maven --strip-components=1 && ln -s /usr/share/maven/bin/mvn /usr/bin/mvn
---> Running in 74cd6545a383
---> 96721e9c4397
Removing intermediate container 74cd6545a383
Step 8/15 : ENV MAVEN_HOME /usr/share/maven
---> Running in 376974cc8496
---> bf69098e8977
Removing intermediate container 376974cc8496
Step 9/15 : ENV MAVEN_CONFIG ""$USER_HOME_DIR/.m2""
---> Running in 3a604fc8d83e
---> 8f1fa5ce6d61
Removing intermediate container 3a604fc8d83e
Step 10/15 : ADD payload/javashim.tar.bz2 /root
---> 540e95717f7c
Removing intermediate container 2f26b777c52a
Step 11/15 : ADD payload/protos.tar.bz2 /root
---> fe3ecd4d4a95
Removing intermediate container 979bad45865b
Step 12/15 : ADD payload/settings.gradle /root
---> 2a4dd848b661
Removing intermediate container 50c476478285
Step 13/15 : WORKDIR /root
---> 049cd9e822c3
Removing intermediate container 1f96781dd701
Step 14/15 : RUN core/chaincode/shim/java/javabuild.sh
---> Running in 2d2871fb369e

FAILURE: Build failed with an exception.

* Where:
Build file '/root/core/chaincode/shim/java/build.gradle' line: 30

* What went wrong:
Error resolving plugin [id: 'com.google.protobuf', version: '0.8.0']
> The response from https://plugins.gradle.org/api/gradle/2.12/plugin/use/com.google.protobuf/0.8.0 was not a valid response from a Gradle Plugin Resolution Service: content type is
'text/html', expected 'application/json' (status code: 407)

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.
The command '/bin/sh -c core/chaincode/shim/java/javabuild.sh' returned a non-zero code: 1
Makefile:278: recipe for target 'build/image/javaenv/.dummy-x86_64-1.0.0-rc2-snapshot-6c3cb99' failed
make: *** [build/image/javaenv/.dummy-x86_64-1.0.0-rc2-snapshot-6c3cb99] Error 1
username@ubuntu:~/go/src/github.com/hyperledger/fabric${noformat}
 

Note that I have the following settings in .bashrc
{noformat}
export http_proxy=http://username:password@proxy:port/
export https_proxy=http://username:password@proxy:port/
export HTTP_PROXY=http://username:password@proxy:port/
export HTTPS_PROXY=http://username:password@proxy:port/{noformat}
 ",fabric commit 6c3cb99d6d575d975105e05d4b1bbb2a3ea42980,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01cit:,,,,,,,,denyeart,nemoto,,,,,,,,,master,,,true,"27/Nov/17 3:41 AM;denyeart;Looks like this was merged, marking as Done.",27/Nov/17 3:43 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/11397/,,,,,,,,,,,,,,,,,,,,,,
Docs do not meet branding guidelines,FAB-5166,18947,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,04/Jul/17 2:44 PM,05/Jul/17 11:32 AM,26/Apr/18 6:50 AM,05/Jul/17 11:32 AM,v1.0.0-rc1,,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,,"According to Hyperledger brand guidelines, we should reference Hyperledger Fabric as Hyperledger Fabric and not fabric, Fabric, or anything else.

There are a number of reference which need to be corrected. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01cg5:,,,,,,,,mastersingh24,,,,,,,,,,master,,,true,04/Jul/17 2:53 PM;mastersingh24;https://gerrit.hyperledger.org/r/11355,,,,,,,,,,,,,,,,,,,,,,,
Avoid the redundant block verifications in gossip,FAB-5165,18946,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,04/Jul/17 1:56 PM,07/Jul/17 3:10 PM,26/Apr/18 6:50 AM,07/Jul/17 3:10 PM,v1.0.0-rc1,,,,,,v1.0.0,,,fabric-gossip,,,,5,,,,,,,,,"In gossip, when block messages are gossiped among peers the signature of the ordering service on them is validated.

This causes a message to be validated in several places:
# When it is received from the ordering service
# When it is received from a peer via forwarding or pull
Since the block is forwarded among peer several times, this has an amplifying effect.
# When it is received from a peer via state tranfer

Empirical performance tests I have conducted show that for blocks of 100KB, the time spent on verifying a block is between 700 micro-seconds to 2milliseconds.

When testing a benchmark scenario of 1000 blocks with a single leader disseminating to 7 non-leader peers, with propagation factor of 4, a block entry rate (to the leader peer) of bursts of 20 blocks every 100ms, the gossip network is over committed and starting from block 500 - most blocks were dropped because the gossip internal buffers were full (we drop blocks in order for the network not to be ""deadlocked"").

However - when I did the following bypass in [channel.go|https://github.com/hyperledger/fabric/blob/master/gossip/gossip/channel/channel.go#L547-L565] :

{code}
func (gc *gossipChannel) verifyBlock(msg *proto.GossipMessage, sender common.PKIidType) bool {
	if gc.GetConf().SkipBlockVerification {
		return true
	}
{code}

*No block was dropped because of comm layer buffer overflow!*

-Therefore I suggest we use the skipBlockVerification configuration property (not used in the code but exists in the [core.yaml|https://github.com/hyperledger/fabric/blob/master/sampleconfig/core.yaml#L157]) in order to give the user (the network administrator) a chance to increase throughput on the expense of byzantine tolerance, while preserving correctness and validity (the blocks are in any case validated before they enter the ledger and when they are pulled from the ordering service)-



*UPDATE*

I realized the reason for the performance penalty is that we have an inefficient order of steps at block handling:
*Background*: The flow of blocks from the comm layer to the state transfer layer (the last stop in the gossip layer before the block is passed to the committer service of the peer) works as follows:
Communication layer -->  gossip module routes to the right channel object ---> channel module checks if the block was received for the first time  ---> published to the state transfer layer ---> block is put in a data structure that ensures blocks are passed in-order to the committer

There are actually 2 inefficiencies that exist in the code and when they are improved I get the same (good) results as above without blocks being dropped:
# Blocks are verified when they arrive from the communication layer in [gossip_impl.go|https://github.com/hyperledger/fabric/blob/master/gossip/gossip/gossip_impl.go#L440-L457] but are in any case verified (again) in the [channel module|https://github.com/hyperledger/fabric/blob/master/gossip/gossip/channel/channel.go#L547-L565] which handles everything related to channels.
# When the block reaches the channel module it is *first verified* and then checked if it has been received before (this is done by adding it to the message store and seeing if the message store rejected the message or not). 
From random nature of the forwarding phase in gossip, each message might be received a few times and this causes redundant verification of messages. 

I pushed the following commit https://gerrit.hyperledger.org/r/#/c/11377/ to take care of this. 
This commit ensures that a message is verified only after it is decided that it can be added to the message store or not. 
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01cfx:,,,,,,,,binhn,JonathanLevi,mastersingh24,yacovm,,,,,,,master,,,true,04/Jul/17 4:07 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/11377/,04/Jul/17 7:03 PM;mastersingh24;This seems like a good thing to do for sure and there seems to be minimal (if any) risk.,05/Jul/17 7:38 AM;yacovm;[~mastersingh24] I updated the JIRA and uploaded a new CR which I prefer that would be merged instead,"05/Jul/17 2:20 PM;yacovm;I am changing this to a bug since under a sudden intensive burst of blocks - the blocks are not going to reach the peers via gossip but only at a much later time, with state transfer and if the leader peer is not available it would mean the block is lost until the leader is resurrected.

 

Hence I think it can be seen as a bug.","05/Jul/17 2:23 PM;JonathanLevi;[~yacovm] let me help. We should rephrase: ""Optimize block verification in gossip"" ","05/Jul/17 2:52 PM;binhn;Even though this is a medium bug, but it has a large implication on the timeliness and correctness of the ledger during burst traffic or high volume network. The CR shows minimum and clear changes to reduce the potential congestion in processing block messages.","05/Jul/17 2:55 PM;yacovm;[~JonathanLevi] we need 5 votes, right?
could you please remove your -2 from the change set? :)",,,,,,,,,,,,,,,,,
fabric-sdk-java has memory leak problem,FAB-5162,18941,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,hongquan.zhang,hongquan.zhang,hongquan.zhang,04/Jul/17 10:21 AM,12/Jul/17 8:52 AM,26/Apr/18 6:50 AM,12/Jul/17 8:52 AM,,,,,,,v1.0.0,,,fabric-sdk-java,,,,0,java-SDK,,,,,,,,"java app built on top of fabric-sdk-java will get memory leak after a long run.

class Channel has a member txListeners which is a string to LinkedList HashMap instance.

txListeners will add a item if a new event listener of a txID is added, but forget to remove the item if the all listeners of that txID has been removed. This lead to memory leak","centos7 x86_64

fabric-sdk-java",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01cf9:,,,,,,,,hongquan.zhang,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Being able to update the endpoints of ordering service,FAB-5157,18929,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,JonathanLevi,JonathanLevi,04/Jul/17 8:20 AM,16/Nov/17 2:46 PM,26/Apr/18 6:50 AM,16/Nov/17 2:46 PM,v1.0.0-rc1,,,,,,v1.1,,,fabric-peer,,,,0,,,,,,,,,"Let's use this JIRA ticket to report in detail the set of issues that [~C0rWin] faced recently when attempting to update an endpoint. At best, one has to restart the peer in order for changes to 

See an initial fix suggestion here:

https://gerrit.hyperledger.org/r/#/c/11339

**UPDATE** (adding details on how to reproduce the issue)

Used `configtx.yaml` from e2e example application.

1. Generate config transaction with `configtxgen` tool
{code}
configtxgen -profile TwoOrgsInChannel -channelID mychannel -outputCreateTx=mychannel.tx
{code}

2. Create channel for peer
{code}
peer channel create -o localhost:7050 -c mychannel -f mychannel.tx
{code}

3. Join channel
{code}
peer channel join -o localhost:7050 --blockpath mychannel.block
{code}

4. Convert genesis block into json format 
{code}
curl -X POST --data-binary @mychannel.block http://localhost:7059/protolator/decode/common.Block -o mychannel.json
{code}

5. Extract config part and update endpoint
{code}
jq "".data.data[0].payload.data.config"" mychannel.json > config.json
jq '.channel_group.values.OrdererAddresses.value.addresses = [""orderer:7050""]' config.json > config_update.json
{code}

6. Create config update
{code}
curl -X POST --data-binary @config.json http://localhost:7059/protolator/encode/common.Config -o config.block
curl -X POST --data-binary @config_update.json http://localhost:7059/protolator/encode/common.Config -o config_update.block
curl -X POST -F original=@config.block -F updated=@config_update.block http://localhost:7059/configtxlator/compute/update-from-configs -F channel=mychannel -o config_update.pb
curl -X POST --data-binary @config_update.pb http://localhost:7059/protolator/decode/common.ConfigUpdate -o config_update.pb.json
echo '{""payload"":{""header"":{""channel_header"":{""channel_id"":""mychannel"", ""type"":2}},""data"":{""config_update"":'$(cat config_update.pb.json)'}}}' > config_update_as_envelope.json
curl -X POST --data-binary @config_update_as_envelope.json http://127.0.0.1:7059/protolator/encode/common.Envelope -o config_update_as_envelope.pb
{code}

7. Submit to the peer:
{code}
peer channel update -f config_update_as_envelope.pb -c mychannel -o localhost:7050
{code}

**Expected**

Peer to switch delivery clients to fetch blocks from the updated endpoints

**Results**

Delivery service continued to maintain connection with old endpoints

PS. Restart of the peer took effect and peers switched to fetch blocks from updated endpoints.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01cd1:,,,,,,,,binhn,C0rWin,jeffgarratt,JonathanLevi,jyellick,kchristidis,mastersingh24,muralisr,yacovm,,master,,,true,"04/Jul/17 8:36 AM;yacovm;I think that for v1.0 we should encourage users *not to change ordering service endpoints at all* because of the following scenario:
* Assuming we have a peer *p* in orgA
* the ordering service endpoint are all replaced to a totally new set and *p* is updated with the new endpoints
* Later, peer *q* in orgB is added to the channel, and it's the first peer from this org, and it is given the genesis block that points to an old, non existent set of ordering service nodes (they were all replaced) 
* Unless *q* has connectivity to *p* or any other peer from orgA - it will never be able to connect to any ordering service endpoint at all.
* The reason is that we currently update the delivery client as configuration blocks are consumed, and there is no way to ""override"" the delivery client to work with an ordering service that is different from the latest configuration block.
* This whole scenario gets even impossible to solve if:
** orgA was the first org in the channel
** orgC was added later to the channel
** orgA was evicted from the channel later
** orgB was added last, and now cannot even communicate with peers from orgA.\
** as a result - orgB is disconnected from the channel although it participates in it.","04/Jul/17 10:39 AM;C0rWin;[~yacovm] While I see your point and I think it's perfectly valid, since changing endpoints might be quite dangerous action, _however_ you missing the fact that this possibility is  already there and in order to take effect peer has to be restarted.

So you scenario could be done even now, with one except, you need to restart your peer once config is updated.","04/Jul/17 10:51 AM;yacovm;True. 

I was just chiming in to say that we should recommend users not to mess with that part of the system anyway, since it is very easy to shoot oneself in the foot.
Therefore - I'm not certain how urgent it is to fix this for V1.0","04/Jul/17 11:56 AM;C0rWin;We can use #review-needed to see other opinion and vote to decide whenever it's required for v1.0. Also IMO this is not a Stoty and need to be converted into BUG, since definitely not conforms desired/expected behavior.","04/Jul/17 9:00 PM;JonathanLevi;Thanks everybody for the info. This is a *bug* indeed. We can evaluate/discuss tomorrow, but something needs to be done here.","04/Jul/17 9:01 PM;JonathanLevi;We can discuss/agree on the right ""course of action"" when more of us are back from ""hols""...","05/Jul/17 1:30 PM;mastersingh24;I don't think we should make any changes in this area for now.  We can put this in a fix pack.  I would document this as a known limitation.  I don't see that anyone will have the need to actually do this in any case for the first few months.

So my vote is defer to first patch release",05/Jul/17 2:33 PM;jyellick;I would likewise vote to defer.,05/Jul/17 2:38 PM;muralisr;+1 to defer,"05/Jul/17 3:28 PM;binhn;[~JonathanLevi]
I agreed to lower priority and defer","05/Jul/17 3:31 PM;JonathanLevi;Fair enough. I second this too.

Please write here if you believe that we should re-visit this.",24/Jul/17 2:20 PM;jyellick;Is this still review-needed? I'd assume this can/should be addressed in the scope of v1.1?,24/Jul/17 2:26 PM;yacovm;Good point [~jyellick] ,26/Oct/17 7:20 PM;jeffgarratt;[~yacovm] [~C0rWin] I assume this is still an issue?,"26/Oct/17 8:42 PM;C0rWin;Yes, it's still an issue, I should have a fix and can rebase and re-work it and push CR",01/Nov/17 2:41 PM;jeffgarratt;[~C0rWin] could you link the CR and update?  Thanks.,01/Nov/17 3:59 PM;C0rWin;[~jeffgarratt] Will do once it will be ready for review.,08/Nov/17 9:29 PM;C0rWin;https://gerrit.hyperledger.org/r/#/c/15237/,,,,,,
"Failed to deserialize creator identity, when creating first application tutorial",FAB-5154,18925,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,RichardHill,RichardHill,03/Jul/17 8:33 PM,30/Jul/17 1:22 PM,26/Apr/18 6:50 AM,24/Jul/17 1:15 PM,v1.0.0,,,,,,v1.0.1,,,fabric-docs,,,,0,samples,,,,,,,,"I am following the instructions on

 

[http://hyperledger-fabric.readthedocs.io/en/latest/write_first_app.html]

 

*steps*

git clone https://github.com/hyperledger/fabric-samples.git cd fabric-samples/fabcar

cd fabric-samples/fabcar

./startFabric.sh

*Result*

Creating orderer.example.com
Creating couchdb
Creating peer0.org1.example.com
Creating cli
flag provided but not defined: -e
See 'docker exec --help'.

*Steps*

npm install

node query.js

 

*Result*

Create a client and set the wallet location
Set wallet path, and associate user  PeerAdmin  with application
Check user is enrolled, and set a query URL in the network
Make query
Assigning transaction_id:  8ed0f6ee0e57de9c446965d29c9d5c67d61203532a0b25aa27af8710a1544e32
error: [client-utils.js]: sendPeersProposal - Promise is rejected: Error: Failed to deserialize creator identity, err MSP Org1MSP is unknown
    at /home/rhill/fabric-samples/fabcar/node_modules/grpc/src/node/src/client.js:434:17
returned from query
Query result count =  1
error from query =  \{ Error: Failed to deserialize creator identity, err MSP Org1MSP is unknown
    at /home/rhill/fabric-samples/fabcar/node_modules/grpc/src/node/src/client.js:434:17 code: 2, metadata: Metadata \{ _internal_repr: \{} } }
Response is  Error: Failed to deserialize creator identity, err MSP Org1MSP is unknown

 ",,,,,,,,,,,,,,,,,,,,04/Jul/17 7:44 AM;RichardHill;fabric-couchdb_docker.log;https://jira.hyperledger.org/secure/attachment/11539/fabric-couchdb_docker.log,04/Jul/17 7:44 AM;RichardHill;fabric-orderer_docker.log;https://jira.hyperledger.org/secure/attachment/11540/fabric-orderer_docker.log,04/Jul/17 7:44 AM;RichardHill;fabric-peer_docker.log;https://jira.hyperledger.org/secure/attachment/11541/fabric-peer_docker.log,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01cc5:,,,,,,,,ChristopherFerris,mastersingh24,nemoto,RichardHill,wanghhao,,,,,,release-1.0,master,,true,"04/Jul/17 7:47 AM;RichardHill;I set log level to debug

DEBUG=composer:* node query.js

then added the logs from docker containers","04/Jul/17 8:08 AM;nemoto;[~RichardHill] Hi. Can you provide some more details about your environment? It looks like that you are using old docker version. See also, [http://hyperledger-fabric.readthedocs.io/en/latest/prereqs.html]. Thanks.","04/Jul/17 8:19 AM;nemoto;[~RichardHill] Sorry, I missed your comment. ""startFabric.sh"" seems to be finished incorrectly. Which docker version are you using?","04/Jul/17 11:51 AM;RichardHill;Here you go.. is there more logging somewhere I can give you

 

$docker --version
Docker version 1.12.6, build 78d1802

$docker-compose  --version
docker-compose version 1.11.2, build dfed245

 

$docker images | grep hyperledger | awk  '\{print $1,$2,$3,$4,$5}'

hyperledger/fabric-tools latest 85d6d3ca0a30 10 days
hyperledger/fabric-tools x86_64-1.0.0-rc1 85d6d3ca0a30 10 days
hyperledger/fabric-couchdb latest b37a08f8a0cb 10 days
hyperledger/fabric-couchdb x86_64-1.0.0-rc1 b37a08f8a0cb 10 days
hyperledger/fabric-kafka latest dbb5796d915f 10 days
hyperledger/fabric-kafka x86_64-1.0.0-rc1 dbb5796d915f 10 days
hyperledger/fabric-zookeeper latest d2efbb01a999 10 days
hyperledger/fabric-zookeeper x86_64-1.0.0-rc1 d2efbb01a999 10 days
hyperledger/fabric-orderer latest 5ec6333eae10 10 days
hyperledger/fabric-orderer x86_64-1.0.0-rc1 5ec6333eae10 10 days
hyperledger/fabric-peer latest cf6bedc2935e 10 days
hyperledger/fabric-peer x86_64-1.0.0-rc1 cf6bedc2935e 10 days
hyperledger/fabric-javaenv latest 7cbe6aca3956 10 days
hyperledger/fabric-javaenv x86_64-1.0.0-rc1 7cbe6aca3956 10 days
hyperledger/fabric-ca latest cea779a46670 10 days
hyperledger/fabric-ca x86_64-1.0.0-rc1 cea779a46670 10 days
hyperledger/fabric-ccenv latest 13ed472038d2 10 days
hyperledger/fabric-ccenv x86_64-1.0.0-rc1 13ed472038d2 10 days
hyperledger/fabric-couchdb x86_64-1.0.0-alpha2 3d89ac4895f9 7 weeks
hyperledger/fabric-ca x86_64-1.0.0-alpha2 86f4e4280690 7 weeks
hyperledger/fabric-kafka x86_64-1.0.0-alpha2 b77440c116b3 7 weeks
hyperledger/fabric-zookeeper x86_64-1.0.0-alpha2 fb8ae6cea9bf 7 weeks
hyperledger/fabric-orderer x86_64-1.0.0-alpha2 9a63e8bac1f5 7 weeks
hyperledger/fabric-peer x86_64-1.0.0-alpha2 23b4aedef57f 7 weeks
hyperledger/fabric-javaenv x86_64-1.0.0-alpha2 a9ca2c90a6bf 7 weeks
hyperledger/fabric-ccenv x86_64-1.0.0-alpha2 c984ae2a1936 7 weeks
hyperledger/fabric-baseos x86_64-0.3.1 4b0cab202084 7 weeks
hyperledger/fabric-javaenv x86_64-0.6.2-preview-snapshot-1f14698 3f590b44f270 11 weeks
hyperledger/fabric-ccenv x86_64-0.6.2-preview-snapshot-1f14698 47511ea45bc9 11 weeks
hyperledger/fabric-src latest fb2782d66a86 11 weeks
hyperledger/fabric-src x86_64-0.6.2-preview-snapshot-1f14698 fb2782d66a86 11 weeks
hyperledger/fabric-membersrvc x86_64-0.6.1-preview b3654d32e4f9 8 months
hyperledger/fabric-peer x86_64-0.6.1-preview 21cb00fb27f4 8 months
hyperledger/fabric-baseimage latest db53d04b117c 9 months
hyperledger/fabric-baseimage x86_64-0.1.0 db53d04b117c 9 months
hyperledger/fabric-baseimage x86_64-0.0.11 90d869298cb6 10 months

 ","04/Jul/17 7:35 PM;mastersingh24;_*docker exec -e*_  which is used starting at [https://github.com/hyperledger/fabric-samples/blob/master/fabcar/startFabric.sh#L25] will only work with Docker 1.13 and later (that's when the *-e* option for exec was introduced).

[~RichardHill] - would it be possible for you to upgrade to Docker 1.13.1 or later and try again?  Apologies for not having the correct minimum version in the prereqs. 

Will modify prereqs to specify *_Docker 17.03.0-ce_* or later","04/Jul/17 11:57 PM;RichardHill;Sure, I will update the issue when the upgrade finishes",23/Jul/17 12:54 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/11849,,,,,,,,,,,,,,,,,
Inconsistent behaviour when opening files in MSP when installing chaincode,FAB-5152,18894,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,reubent 1,reubent 1,03/Jul/17 11:02 AM,23/Jan/18 10:00 PM,26/Apr/18 6:50 AM,23/Jan/18 10:00 PM,,,,,,,v1.1,,,fabric-endorser,,,,0,,,,,,,,,"When installing chaincode, I receive the error ""Error when setting up MSP from directory /etc/hyperledger/fabric/msp: err KeyMaterial not found in SigningIdentityInfo"".

Having run the process through strace, I can see there's an inconsistency in how the keystore path is set compared to the other files in the MSP. I'm unsure which of these is correct but it probably ought to be consistent.

I ran the command
{noformat}
strace peer chaincode install --cafile msp/intermediatecerts/intermediate.cert.pem -C testchainid -c ""{}"" -l golang --logging-level debug -n mycc -o orderer:7050 -p com/gospel/chaincode/ -v 1{noformat}
The keystore is opened as ""msp/keystore"" whereas the others are opened with the full path of pwd in front eg ""/etc/hyperledger/fabric/msp/signcerts""

Relevant part of trace:

 
{code:java}
stat(""msp/keystore"", 0xc42021cac8) = -1 ENOENT (No such file or directory)
stat(""msp/keystore"", 0xc42021cb98) = -1 ENOENT (No such file or directory)
stat(""msp"", 0xc42021cc68) = -1 ENOENT (No such file or directory)
mkdirat(AT_FDCWD, ""msp"", 0755) = 0
mkdirat(AT_FDCWD, ""msp/keystore"", 0755) = 0
stat(""/etc/hyperledger/fabric/msp/signcerts"", {st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
openat(AT_FDCWD, ""/etc/hyperledger/fabric/msp/signcerts"", O_RDONLY|O_CLOEXEC) = 3
getdents64(3, /* 3 entries */, 4096) = 80
getdents64(3, /* 0 entries */, 4096) = 0
lstat(""/etc/hyperledger/fabric/msp/signcerts/peer0.pem"", {st_mode=S_IFREG|0644, st_size=1334, ...}) = 0
close(3) = 0
openat(AT_FDCWD, ""/etc/hyperledger/fabric/msp/signcerts/peer0.pem"", O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=1334, ...}) = 0
read(3, ""-----BEGIN CERTIFICATE-----\nMIID""..., 1846) = 1334
read(3, """", 512) = 0
close(3) = 0
stat(""/etc/hyperledger/fabric/msp/cacerts"", {st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
openat(AT_FDCWD, ""/etc/hyperledger/fabric/msp/cacerts"", O_RDONLY|O_CLOEXEC) = 3
getdents64(3, /* 3 entries */, 4096) = 80
getdents64(3, /* 0 entries */, 4096) = 0
lstat(""/etc/hyperledger/fabric/msp/cacerts/ca.cert.pem"", {st_mode=S_IFREG|0644, st_size=826, ...}) = 0
close(3) = 0
openat(AT_FDCWD, ""/etc/hyperledger/fabric/msp/cacerts/ca.cert.pem"", O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=826, ...}) = 0
read(3, ""-----BEGIN CERTIFICATE-----\nMIIC""..., 1338) = 826
read(3, """", 512) = 0
close(3) = 0
stat(""/etc/hyperledger/fabric/msp/signcerts"", {st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
openat(AT_FDCWD, ""/etc/hyperledger/fabric/msp/signcerts"", O_RDONLY|O_CLOEXEC) = 3
getdents64(3, /* 3 entries */, 4096) = 80
getdents64(3, /* 0 entries */, 4096) = 0
lstat(""/etc/hyperledger/fabric/msp/signcerts/peer0.pem"", {st_mode=S_IFREG|0644, st_size=1334, ...}) = 0
close(3) = 0
openat(AT_FDCWD, ""/etc/hyperledger/fabric/msp/signcerts/peer0.pem"", O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=1334, ...}) = 0
read(3, ""-----BEGIN CERTIFICATE-----\nMIID""..., 1846) = 1334
read(3, """", 512) = 0
close(3) = 0
stat(""/etc/hyperledger/fabric/msp/admincerts"", {st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
openat(AT_FDCWD, ""/etc/hyperledger/fabric/msp/admincerts"", O_RDONLY|O_CLOEXEC) = 3
getdents64(3, /* 5 entries */, 4096) = 160
getdents64(3, /* 0 entries */, 4096) = 0
lstat(""/etc/hyperledger/fabric/msp/admincerts/ca.cert.pem"", {st_mode=S_IFREG|0644, st_size=826, ...}) = 0
lstat(""/etc/hyperledger/fabric/msp/admincerts/peer0.pem"", {st_mode=S_IFREG|0644, st_size=1334, ...}) = 0
lstat(""/etc/hyperledger/fabric/msp/admincerts/intermediate.cert.pem"", {st_mode=S_IFREG|0644, st_size=843, ...}) = 0
close(3) = 0
openat(AT_FDCWD, ""/etc/hyperledger/fabric/msp/admincerts/ca.cert.pem"", O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=826, ...}) = 0
read(3, ""-----BEGIN CERTIFICATE-----\nMIIC""..., 1338) = 826
read(3, """", 512) = 0
close(3) = 0
openat(AT_FDCWD, ""/etc/hyperledger/fabric/msp/admincerts/intermediate.cert.pem"", O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=843, ...}) = 0
read(3, ""-----BEGIN CERTIFICATE-----\nMIIC""..., 1355) = 843
read(3, """", 512) = 0
close(3) = 0
openat(AT_FDCWD, ""/etc/hyperledger/fabric/msp/admincerts/peer0.pem"", O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=1334, ...}) = 0
read(3, ""-----BEGIN CERTIFICATE-----\nMIID""..., 1846) = 1334
read(3, """", 512) = 0
close(3) = 0
stat(""/etc/hyperledger/fabric/msp/intermediatecerts"", {st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
openat(AT_FDCWD, ""/etc/hyperledger/fabric/msp/intermediatecerts"", O_RDONLY|O_CLOEXEC) = 3
getdents64(3, /* 3 entries */, 4096) = 96
getdents64(3, /* 0 entries */, 4096) = 0
lstat(""/etc/hyperledger/fabric/msp/intermediatecerts/intermediate.cert.pem"", {st_mode=S_IFREG|0644, st_size=843, ...}) = 0
close(3) = 0
openat(AT_FDCWD, ""/etc/hyperledger/fabric/msp/intermediatecerts/intermediate.cert.pem"", O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=843, ...}) = 0
read(3, ""-----BEGIN CERTIFICATE-----\nMIIC""..., 1355) = 843
read(3, """", 512) = 0
close(3) = 0
stat(""/etc/hyperledger/fabric/msp/crls"", 0xc42021dca8) = -1 ENOENT (No such file or directory)
write(2, ""2017-07-03 10:38:12.345 UTC [msp""..., 2152017-07-03 10:38:12.345 UTC [msp] getMspConfig -> INFO 001 crls folder not found at [/etc/hyperledger/fabric/msp/intermediatecerts]. Skipping.: [stat /etc/hyperledger/fabric/msp/crls: no such file or directory]
) = 215
stat(""/etc/hyperledger/fabric/msp/config.yaml"", {st_mode=S_IFREG|0664, st_size=137, ...}) = 0
openat(AT_FDCWD, ""/etc/hyperledger/fabric/msp/config.yaml"", O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0664, st_size=137, ...}) = 0
read(3, ""OrganizationalUnitIdentifiers:\n ""..., 649) = 137
read(3, """", 512) = 0
close(3) = 0
openat(AT_FDCWD, ""/etc/hyperledger/fabric/msp/intermediatecerts/intermediate.cert.pem"", O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=843, ...}) = 0
read(3, ""-----BEGIN CERTIFICATE-----\nMIIC""..., 1355) = 843
read(3, """", 512) = 0
close(3) = 0
mmap(0xc420300000, 1048576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xc420300000
mmap(0xc41ffe0000, 32768, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xc41ffe0000
openat(AT_FDCWD, ""msp/keystore"", O_RDONLY|O_CLOEXEC) = 3
getdents64(3, /* 2 entries */, 4096) = 48
getdents64(3, /* 0 entries */, 4096) = 0
close(3) = 0
openat(AT_FDCWD, ""msp/keystore"", O_RDONLY|O_CLOEXEC) = 3
getdents64(3, /* 2 entries */, 4096) = 48
getdents64(3, /* 0 entries */, 4096) = 0
close(3) = 0
select(0, NULL, NULL, NULL, {0, 1000}) = 0 (Timeout)
select(0, NULL, NULL, NULL, {0, 1000}) = 0 (Timeout)
write(2, ""panic: "", 7panic: ) = 7
write(2, ""Error when setting up MSP from d""..., 118Error when setting up MSP from directory /etc/hyperledger/fabric/msp: err KeyMaterial not found in SigningIdentityInfo) = 118
write(2, ""\n"", 1

{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01c7h:,,,,,,,,denyeart,mastersingh24,muralisr,reubent 1,,,,,,,master,,,true,03/Jul/17 12:53 PM;reubent 1;This appears to be related to the difference between peer->MSPConfigPath and peer->BCCSP->FileKeyStore->KeyStore,07/Sep/17 6:23 PM;muralisr;[~reubent 1] Can you provide a working command to compare with the above non-working one to help debug please ?,27/Nov/17 3:37 AM;denyeart;[~reubent 1] [~muralisr] Can this issue be reproduced? Can you provide more details?,"09/Dec/17 11:54 AM;mastersingh24;[~reubent 1] - What environment variables are you setting for the config?

I can only reproduce this if I explicit set 

*CORE_PEER_BCCSP_SW_FILEKEYSTORE_KEYSTORE*  or in *core.yaml* set *peer.bccsp.sw.filekeystore.keystore* to a relative path",10/Dec/17 6:38 PM;mastersingh24;https://gerrit.hyperledger.org/r/16099,,,,,,,,,,,,,,,,,,,
Extraneous docs still found via search,FAB-5149,18884,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,02/Jul/17 10:27 AM,02/Jul/17 5:12 PM,26/Apr/18 6:50 AM,02/Jul/17 5:12 PM,v1.0.0-rc1,,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,,There are still a few WIP / coming soon docs in the repo which show up if you run a search.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01c59:,,,,,,,,mastersingh24,,,,,,,,,,master,,,true,02/Jul/17 10:30 AM;mastersingh24;https://gerrit.hyperledger.org/r/11337,,,,,,,,,,,,,,,,,,,,,,,
[SECURITY] Differentiated CA & TLS cert SDK examples & examples/cluster client.config consumption,FAB-5148,18883,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,,mrkiouak,mrkiouak,02/Jul/17 12:19 AM,27/Nov/17 3:35 AM,26/Apr/18 6:50 AM,,v1.0.0-rc1,,,,,,,,,fabric-chaintool,,,,0,security,Security,,,,,,,"The fabric-chaintool examples previously capable of consuming the client.config emitted by fabric/examples/cluster *no longer function*

These examples stopped working after the merge/resolution of --FAB-4626---. The *fabric-chaintool*, or a *fabric-sdk* repo, should be created that is able to consume this client.config and perform install, instantiates and invokes against Hyperledger Fabric v1.0.0-rc1.",,,,,,,,,,,,FAB-4546,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01c51:,,,,,,,,denyeart,inatatsu,JonathanLevi,mrkiouak,yoheiueda,,,,,,,,,,"02/Jul/17 12:40 AM;JonathanLevi;I can't tell yet/right-away if the severity of this is HIGH or MEDIUM. Will appreciate it if others (e.g., [~mastersingh24] and [~jyellick] ) could chime in. That is, given the latest merges to v1.0.0-rc1, how difficult is it to get these examples to work (again?), etc.

Thank you.",27/Nov/17 3:35 AM;denyeart;[~mrkiouak] [~greg.haskins] Is this still an issue?,,,,,,,,,,,,,,,,,,,,,,
"[SECURITY] Explicit (OpenSSL compatible) specification for the TLS certs used - organization, structure, fields",FAB-5147,18882,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mrkiouak,mrkiouak,mrkiouak,02/Jul/17 12:08 AM,01/Nov/17 2:40 PM,26/Apr/18 6:50 AM,01/Nov/17 2:40 PM,v1.0.0-rc1,,,,,,,,,fabric-peer,fabric-quality,,,0,"security,","Security,",won't-fix,,,,,,"The fabric/examples/cluster organization structure (found in config/configtx.yaml) demonstrates example working organization definitions for fabric certificate generation.

This example is no longer a full example of a production-like deployment, as it does not include similar definitions for tls issucing cert organizations.

In lieu of a working example config that then generates via cryptogen or openssl the appropriate tls certs, the example should include, as part of the 'make compose-up' step, a full specification, with examples, of the required tls certificates.

Note: support for FQDN vs comman name in name field is an example of the type of question that does not appear to be addressed in any doc or code specification of tls certs",,,,,,,,,,,,FAB-4546,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01c4t:,,,,,,,,jeffgarratt,JonathanLevi,mastersingh24,mrkiouak,muralisr,,,,,,,,,,"06/Aug/17 12:10 PM;mastersingh24;[~mrkiouak]  - I'm not quite sure what you are asking for here?  Are you asking for a deeper explanation of what's actually happening in terms of how the TLS certificates are generated?    Are you also saying that we need to add to the docs (in general) some basic explanations of how TLS works (e.g. hostname verification, etc)?  

 ",07/Sep/17 6:05 PM;muralisr;[~mrkiouak] any update on this ? Assigning it to you for response to [~mastersingh24] question above.,26/Oct/17 7:19 PM;jeffgarratt;[~mrkiouak] [~muralisr] Plan to close this early next week.  Please advise if still an issue.,01/Nov/17 2:40 PM;jeffgarratt;Gonna close.  Reopen if necessary.  ,,,,,,,,,,,,,,,,,,,,
configtxgen --version should not panic if no config found,FAB-5141,18875,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,01/Jul/17 8:37 AM,02/Jul/17 10:28 AM,26/Apr/18 6:50 AM,02/Jul/17 10:28 AM,v1.0.0-rc1,,,,,,v1.0.0,,,fabric-tools,,,,0,,,,,,,,,"
{noformat}
Garis-MBP:~ gsingh$ ~/Projects/golang/src/github.com/hyperledger/fabric/release/darwin-amd64/bin/configtxgen --version
2017-07-01 04:35:40.616 EDT [common/configtx/tool] main -> INFO 001 Loading configuration
2017-07-01 04:35:40.617 EDT [common/configtx/tool/localconfig] Load -> CRIT 002 Error reading configuration:  Unsupported Config Type """"
panic: Error reading configuration: Unsupported Config Type """"

goroutine 1 [running]:
panic(0x4dbd60, 0xc4201f31e0)
	/usr/local/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panic(0xc4201fe5d0, 0xc42021e960, 0x2, 0x2)
	/Users/gsingh/Projects/golang/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:188 +0xd0
github.com/hyperledger/fabric/common/configtx/tool/localconfig.Load(0x5ba429, 0x12, 0x0)
	/Users/gsingh/Projects/golang/src/github.com/hyperledger/fabric/common/configtx/tool/localconfig/config.go:180 +0xa8e
main.main()
	/Users/gsingh/Projects/golang/src/github.com/hyperledger/fabric/common/configtx/tool/configtxgen/main.go:354 +0x537
{noformat}

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01c39:,,,,,,,,mastersingh24,,,,,,,,,,master,,,true,01/Jul/17 9:55 AM;mastersingh24;https://gerrit.hyperledger.org/r/11331,"01/Jul/17 9:56 AM;mastersingh24;I'm fine if we defer this, but seemed like a small risk with a good-sized reward for users",,,,,,,,,,,,,,,,,,,,,,
Viper shouldn't be exposed in interface,FAB-5136,18870,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,troyronda,troyronda,troyronda,30/Jun/17 8:11 PM,04/Jul/17 7:11 PM,26/Apr/18 6:50 AM,04/Jul/17 7:11 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:rhwgvi,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
cannot instantiate helloworld example car,FAB-5135,18869,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,mrkiouak,hcw,hcw,30/Jun/17 7:36 PM,27/Nov/17 3:34 AM,26/Apr/18 6:50 AM,,v1.0.0-beta,v1.0.0-rc1,,,,,,,,fabric-chaintool,,,,0,,,,,,,,,"$ node client.js instantiate
info: [EventHub.js]: _connect - options {""grpc.ssl_target_name_override"":""peer1"",""grpc.default_authority"":""peer1""}
error: [client-utils.js]: sendPeersProposal - Promise is rejected: Error: Timeout expired while starting chaincode mycc:1(networkid:dev,peerid:peer3,tx:8941a08c94223cccfc75fef69bc413441a5abee8c4bb12bc7ec324be4dbf4e4d)
    at /opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/client/nodejs/node_modules/grpc/src/node/src/client.js:434:17
error: [client-utils.js]: sendPeersProposal - Promise is rejected: Error: Timeout expired while starting chaincode mycc:1(networkid:dev,peerid:peer1,tx:8941a08c94223cccfc75fef69bc413441a5abee8c4bb12bc7ec324be4dbf4e4d)
    at /opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/client/nodejs/node_modules/grpc/src/node/src/client.js:434:17
error: [client-utils.js]: sendPeersProposal - Promise is rejected: Error: Timeout expired while starting chaincode mycc:1(networkid:dev,peerid:peer2,tx:8941a08c94223cccfc75fef69bc413441a5abee8c4bb12bc7ec324be4dbf4e4d)
    at /opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/client/nodejs/node_modules/grpc/src/node/src/client.js:434:17
error: [client-utils.js]: sendPeersProposal - Promise is rejected: Error: Timeout expired while starting chaincode mycc:1(networkid:dev,peerid:peer4,tx:8941a08c94223cccfc75fef69bc413441a5abee8c4bb12bc7ec324be4dbf4e4d)
    at /opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/client/nodejs/node_modules/grpc/src/node/src/client.js:434:17
error:bad result:Error: Timeout expired while starting chaincode mycc:1(networkid:dev,peerid:peer1,tx:8941a08c94223cccfc75fef69bc413441a5abee8c4bb12bc7ec324be4dbf4e4d),Error: Timeout expired while starting chaincode mycc:1(networkid:dev,peerid:peer2,tx:8941a08c94223cccfc75fef69bc413441a5abee8c4bb12bc7ec324be4dbf4e4d),Error: Timeout expired while starting chaincode mycc:1(networkid:dev,peerid:peer3,tx:8941a08c94223cccfc75fef69bc413441a5abee8c4bb12bc7ec324be4dbf4e4d),Error: Timeout expired while starting chaincode mycc:1(networkid:dev,peerid:peer4,tx:8941a08c94223cccfc75fef69bc413441a5abee8c4bb12bc7ec324be4dbf4e4d),.protos.Proposal,.common.Header",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01c2d:,,,,,,,,denyeart,hcw,,,,,,,,,,,,,"27/Nov/17 3:34 AM;denyeart;[~hcw] Is this still an issue?
[~mrkiouak] Are you working on this one?",,,,,,,,,,,,,,,,,,,,,,,
Invalid host header,FAB-5132,18866,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,pvrbharg,pvrbharg,30/Jun/17 4:25 PM,09/Jul/17 10:00 PM,26/Apr/18 6:50 AM,01/Jul/17 9:55 PM,,,,,,,v1.0.0,v1.0.0-rc1,,fabric-sdk-node,,,,0,Composer,Hyperledger,,,,,,,"I am running a Hyperledger Composer developer sandbox with tutorial in IBM Skytap cloud instance. When I access the endpoint from inside hosting server URL all is well. The URL is:

[http://localhost:4200|http://localhost:4200/]

If I try to access the same end point from a public tier - I am seeing the error. What configuration should I be doing in order to access the end point from outside hosting server.

 

 ",,,,,,,,,,,,,,,,,,,,30/Jun/17 4:24 PM;pvrbharg;HLComposer-InvalidHostHeaderIssueDoc.docx;https://jira.hyperledger.org/secure/attachment/11529/HLComposer-InvalidHostHeaderIssueDoc.docx,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01c1x:,,,,,,,,mastersingh24,pvrbharg,,,,,,,,,,,,,"01/Jul/17 9:56 PM;mastersingh24;Hi [~pvrbharg] -

Hyperledger Composer currently uses Github for tracking issues and not JIRA.  Please submit an issue following the instructions located here:  https://github.com/hyperledger/composer/blob/master/contrib-notes/raising-issues.md","09/Jul/17 10:00 PM;pvrbharg;Dear Gari,

 

Thank you for your guidance and I did open an issue on Composer at Github. We can close this JIRA item and my apologies for opening this issue in this tool incorrectly.

 

Regards.",,,,,,,,,,,,,,,,,,,,,,
Invalid syntax in docker compose files,FAB-5130,18862,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,chris.elder,chris.elder,30/Jun/17 2:28 PM,05/Aug/17 11:35 AM,26/Apr/18 6:50 AM,05/Aug/17 11:35 AM,v1.0.0,,,,,,v1.0.1,,,fabric-samples,,,,0,,,,,,,,,"Two docker compose files have an invalid syntax in the CouchDB section.

These are the two files concerned:

fabric-samples/fabcar/network/docker-compose.yml

fabric-samples/basic-network/docker-compose.yml

This is the line concerned:

environment:
   DB_URL: [http://localhost:5984/member_db]

It should be:

environment:
    -DB_URL=[http://localhost:5984/member_db]

It is odd that it does seem to cause a problem. 

The defect is being opened since it prevents adding additional environment variables to the CouchDB container.   Additional variables need to be added in order to activate the CouchDB username and password.

Also, it needs to be assessed in the DB_URL is required.  It is not used by Ledger, but I am not sure if it is being used by another part of the sample code.

 

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01c19:,,,,,,,,chris.elder,denyeart,nnao,,,,,,,,master,,,true,06/Jul/17 4:53 AM;nnao;https://gerrit.hyperledger.org/r/#/c/11409/,"25/Jul/17 5:42 PM;denyeart;I confirmed that this environment variable is not needed and in fact adds no value.

Note that the only occurrence is in basic-network now.

[~mastersingh24] Let's get this one merged for 1.0.1.",,,,,,,,,,,,,,,,,,,,,,
peer binary in tarfile wrong version,FAB-5114,18829,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,ChristopherFerris,ChristopherFerris,29/Jun/17 7:01 PM,01/Jul/17 9:54 PM,26/Apr/18 6:50 AM,01/Jul/17 9:54 PM,v1.0.0-rc1,,,,,,v1.0.0,,,fabric-build,,,,0,,,,,,,,,"peer binary in the darwin-amd64-v1.0.0-rc1 tarfile is incorrect

cbf$ bin/peer version

2017-06-29 14:37:34.946 EDT [msp] getMspConfig -> WARN 001 Intermediate certs folder not found at [/Users/cbf/dev/go/src/github.com/hyperledger/fabric/sampleconfig/msp/intermediatecerts]. Skipping. [stat /Users/cbf/dev/go/src/github.com/hyperledger/fabric/sampleconfig/msp/intermediatecerts: no such file or directory]

2017-06-29 14:37:34.947 EDT [msp] getMspConfig -> WARN 002 TLS intermediate certs folder not found at [/Users/cbf/dev/go/src/github.com/hyperledger/fabric/sampleconfig/msp/tlsintermediatecerts]. Skipping. [stat /Users/cbf/dev/go/src/github.com/hyperledger/fabric/sampleconfig/msp/tlsintermediatecerts: no such file or directory]

2017-06-29 14:37:34.947 EDT [msp] getMspConfig -> WARN 003 crls folder not found at [/Users/cbf/dev/go/src/github.com/hyperledger/fabric/sampleconfig/msp/crls]. Skipping. [stat /Users/cbf/dev/go/src/github.com/hyperledger/fabric/sampleconfig/msp/crls: no such file or directory]

peer:

 Version: development build

 Go version: go1.7

 OS/Arch: darwin/amd64

 Chaincode:

  Base Image Version: 

  Base Docker Namespace: 

  Base Docker Label: 

  Docker Namepace: 

 

2017-06-29 14:37:34.972 EDT [main] main -> INFO 004 Exiting.....",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01bul:,,,,,,,,ChristopherFerris,muralisr,rameshthoomu,,,,,,,,master,,,true,"29/Jun/17 7:07 PM;rameshthoomu;Checked out to 1.0.0-rc1 tag and did `make dist` on linux-amd64.. observed the same version mismatch on peer binary

 
{code:java}
git checkout tags/v1.0.0-rc1
make dist
cd release/linux-amd64/bin
./peer --version{code}
{code:java}
 peer:
 Version: development build
 Go version: go1.7.5
 OS/Arch: linux/amd64
 Chaincode:
  Base Image Version:
  Base Docker Namespace:
  Base Docker Label:
  Docker Namepace:

2017-06-29 19:05:52.028 UTC [main] main -> INFO 004 Exiting.....
{code}
Checking from where the development build version setting to peer binary..","29/Jun/17 11:30 PM;muralisr;[https://gerrit.hyperledger.org/r/#/c/11279/] has one possible fix. There maybe other ways to fix this.

Needs [~greg.haskins] review and correction if appropriate.",,,,,,,,,,,,,,,,,,,,,,
Missing link in readthedocs,FAB-5112,18827,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,markparz,jyellick,jyellick,29/Jun/17 6:51 PM,02/Jul/17 10:09 AM,26/Apr/18 6:50 AM,02/Jul/17 10:09 AM,v1.0.0-rc1,,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,,"In the page at http://hyperledger-fabric.readthedocs.io/en/latest/msp.html there is a sentence.

> For fabric-ca related certificate generation, we refer the reader to the fabric-ca related documentation - Setup/ca-setup.

It is not at all clear where to find this, and appears that it should have been encoded as a link but was not?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01bu5:,,,,,,,,jyellick,markparz,,,,,,,,,master,,,true,"29/Jun/17 7:48 PM;markparz;[~jyellick] Yup... added the link

https://gerrit.hyperledger.org/r/#/c/11265/",,,,,,,,,,,,,,,,,,,,,,,
Broken link in readthedocs,FAB-5111,18826,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,markparz,jyellick,jyellick,29/Jun/17 6:48 PM,02/Jul/17 10:09 AM,26/Apr/18 6:50 AM,02/Jul/17 10:09 AM,v1.0.0-rc1,,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,,"In the section:

http://hyperledger-fabric.readthedocs.io/en/latest/chaincode4noah.html#installing-chaincode

There is a reference to ""Simple Asset Chaincode"" which links to the wrong (or a broken?) location.  Clicking the link changes the URL, but does not change the page.

> For example, to install the sacc sample chaincode described in section `Simple Asset Chaincode`_ using the CLI, the command would look like the following:

I believe the intended link is to http://hyperledger-fabric.readthedocs.io/en/latest/chaincode4ade.html#simple-asset-chaincode",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01btx:,,,,,,,,jyellick,markparz,,,,,,,,,master,,,true,"29/Jun/17 7:35 PM;markparz;Indeed [~jyellick] thanks, fixed...

[https://gerrit.hyperledger.org/r/#/c/11263/]

 

 ",,,,,,,,,,,,,,,,,,,,,,,
SDK-Go - Fabric-Txn - Disconnect eventHub after invokeChaincode,FAB-5110,18824,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,emir.heidinger,emir.heidinger,emir.heidinger,29/Jun/17 4:52 PM,29/Jun/17 11:59 PM,26/Apr/18 6:50 AM,29/Jun/17 11:59 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,The eventhub should be disconnected after the invokeChaincode functionality completes in Fabric-Txn,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01bth:,,,,,,,,emir.heidinger,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Problems with Basic Network sample,FAB-5107,18821,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,chris.elder,chris.elder,29/Jun/17 3:22 PM,04/Sep/17 12:53 PM,26/Apr/18 6:50 AM,04/Sep/17 12:53 PM,v1.0.0-rc1,,,,,,v1.0.2,,,fabric-examples,,,,0,,,,,,,,,"I set this to High since this impacts sample code.

The Basic Network sample docker-compose.yaml file still refers to the beta docker images:

Example:

ca.example.com:
 image: hyperledger/fabric-ca:x86_64-1.0.0-beta

It might be better to be consistent with the first network sample:

services:
 ca0:
 image: hyperledger/fabric-ca

I did edit the docker-compose.yaml in order to bring up the network,  but I got the following error (highlighted in {color:#d04437}red{color}):

 

# Create the channel

docker exec -e ""CORE_PEER_LOCALMSPID=Org1MSP"" -e ""CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/msp/users/Admin@org1.example.com"" peer0.org1.example.com peer channel create -o orderer.example.com:7050 -c mychannel -f /etc/hyperledger/configtx/mychannel.tx

2017-06-29 14:22:06.141 UTC [msp] getMspConfig -> WARN 001 Intermediate certs folder not found at [/etc/hyperledger/msp/users/Admin@org1.example.com/intermediatecerts]. Skipping. [stat /etc/hyperledger/msp/users/Admin@org1.example.com/intermediatecerts: no such file or directory]

2017-06-29 14:22:06.141 UTC [msp] getMspConfig -> WARN 002 TLS CA certs folder not found at [/etc/hyperledger/msp/users/Admin@org1.example.com/tlsintermediatecerts]. Skipping and ignoring TLS intermediate CA folder. [stat /etc/hyperledger/msp/users/Admin@org1.example.com/tlscacerts: no such file or directory]

2017-06-29 14:22:06.142 UTC [msp] getMspConfig -> WARN 003 crls folder not found at [/etc/hyperledger/msp/users/Admin@org1.example.com/crls]. Skipping. [stat /etc/hyperledger/msp/users/Admin@org1.example.com/crls: no such file or directory]

2017-06-29 14:22:06.142 UTC [msp] getMspConfig -> INFO 004 MSP configuration file not found at [/etc/hyperledger/msp/users/Admin@org1.example.com/config.yaml]: [stat /etc/hyperledger/msp/users/Admin@org1.example.com/config.yaml: no such file or directory]

{color:#d04437}2017-06-29 14:22:06.163 UTC [main] main -> ERRO 005 Cannot run peer because error when setting up MSP from directory /etc/hyperledger/msp/users/Admin@org1.example.com: err admin 0 is invalid, validation error Could not obtain certification chain, err A CA certificate cannot be used directly by this MSP{color}

 

 ",,,,,,,,,,,,,,,,,,,,10/Jul/17 9:32 PM;sujeeban;confGen.sh;https://jira.hyperledger.org/secure/attachment/11621/confGen.sh,10/Jul/17 9:32 PM;sujeeban;configtx.yaml;https://jira.hyperledger.org/secure/attachment/11622/configtx.yaml,10/Jul/17 9:32 PM;sujeeban;crypto-config.yaml;https://jira.hyperledger.org/secure/attachment/11623/crypto-config.yaml,10/Jul/17 9:33 PM;sujeeban;docker-compose-template.yml;https://jira.hyperledger.org/secure/attachment/11624/docker-compose-template.yml,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01bst:,,,,,,,,chris.elder,denyeart,JonathanLevi,mastersingh24,scottz,sujeeban,,,,,,,,,"10/Jul/17 6:24 PM;denyeart;Since it is a sample and not runtime code, I have reduced to Medium.","10/Jul/17 6:57 PM;scottz;We are trying to understand exactly what the problem is.

Please provide more information, with the actual filepathname , or attach the dc files which are faulty. I looked in fabric repo and fabric-samples repo, but do not see any -beta image tags on any dc file.

Also, after editing the dc file, did you clean up, remove and regenerate crypto materials?

Could this be a tester error using incorrectly edited dc file, or pointing to images that do not exist?","10/Jul/17 7:32 PM;denyeart;[~scottz] The docker compose file that still references older beta image is at:

https://github.com/hyperledger/fabric-samples/blob/master/basic-network/docker-compose.yml","10/Jul/17 9:21 PM;scottz;We are still not sure exactly the steps to reproduce this, but Ratnakar reproduced that error when we do not have the correct crypto materials. My earlier question still stands:  ""Also, after editing the dc file, did you clean up, remove and regenerate crypto materials?""

In addition, there is an unmerged fix to change these to rc1: [https://gerrit.hyperledger.org/r/#/c/11205/]

And of course, we may have to change them again, to use the official v1.0 images, once available.

I think we can probably close this.","10/Jul/17 9:26 PM;sujeeban;I have modified the docker-compose files and regenerated the crypto materials and the sample woks with it. Should we add the files necessary to generate the conf to make it easier to maintain ?

I didn't understand what was in the config/creds folder, that's why I haven't posted my changes. What are those files and how can I regenerate those ? Could you help me with it ? (It is the first bug I try to correct)

I'll attach the files I have used to regenrate the conf and modify the dc file. (I based those files on other samples)","10/Jul/17 10:05 PM;denyeart;As [~scottz] indicates the crypto errors are likely user error.

The remaining problem then is the reference to beta instead of rc1, which appears to be fixed in FAB-5040 / [https://gerrit.hyperledger.org/r/#/c/11205/.]

[~ChristopherFerris] [~mastersingh24] [~JonathanLevi] is there intent to merge FAB-5040 / CR11205 and/or a plan to update the fabric samples to reference rc2/GA upon next release milestone?

Or better yet, can the old image references in docker compose (e.g. *image: hyperledger/fabric-peer:x86_64-1.0.0-beta*) remove the specific release tag so that we don't have to update it every release milestone, as is done in the /first-network docker compose sample (e.g. *image: hyperledger/fabric-peer*).

The reporter is out of office this week, I'm ok if this bug is closed, assuming there is a plan in place to update the samples for rc2/GA.

 

 

 ","10/Jul/17 10:13 PM;JonathanLevi;Thanks for checking. We will update the samples to use the latest released version, yes. Not a show-stopper, confirmed.
We can leave this item as is.","04/Sep/17 12:53 PM;mastersingh24;The fabric-samples release branch currently works with both v1.0.1 and the latest release v1.0.2.
Closing this one",,,,,,,,,,,,,,,,
Introduction mentions Marbles and is dated vis getting started.,FAB-5100,18808,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,29/Jun/17 12:31 PM,01/Jul/17 4:47 PM,26/Apr/18 6:50 AM,01/Jul/17 4:47 PM,v1.0.0-rc1,,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,,The Introduction mekes reference to Marbles and there is actually a WIP page for something that we have still not received.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01bqd:,,,,,,,,ChristopherFerris,,,,,,,,,,master,,,true,29/Jun/17 12:37 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/11245 FAB-5100,,,,,,,,,,,,,,,,,,,,,,,
[SECURITY] Query not rejected after an Org is removed from the channel,FAB-5063,18767,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,sandp125,sandp125,28/Jun/17 10:23 PM,29/Jun/17 8:06 PM,26/Apr/18 6:50 AM,29/Jun/17 7:41 PM,v1.0.0-rc1,,,,,,v1.0.0,,,fabric-ca,fabric-crypto,fabric-membersrvc,,1,quality,security,Security,,,,,,"I am able to query a peer from an Org that was removed from the channel. The query returns data from the last state when it was still part of the channel.

Note: I am not able to do any invokes (Transaction proposal gives an error ""Org3MSP is unknown"").

I expected the query to fail similar to the invoke.

Following are steps to recreate this scenario.
 # Create a network with 3 Orgs, 2 Peers per Org, 3 CA, 3 Orderers, 4 KF, 3 ZK.
 # Create a Channel with 2 Orgs.
 # Join 2 Peers per Org into the Channel.
 # Install chaincode on all peers.
 # Instantiate chaincode.
 # Invoke on peer0 Org 1 (put value : 10)
 # Add Org3 to channel (configtxlator and channel update)
 # Invoke on peer0 Org 3 (put value : 20)
 # Query on peer0 Org 3  (20)
 # Remove Org3 from channel (configtxlator and channel update)
 # Invoke on peer1 Org 1 (put value : 30)
 # Query on peer1 Org 1 (30)
 # Query on peer1 Org 2 (30)
 # {color:#ff0000}Query on peer1 Org 3 (20) (We are getting the old value){color}
 # {color:#14892c}Invoke on peer0 Org1 by a user from Org3 Fails. {color}

{color:#14892c}I also tried a scenario where Org3 was never added to channel. Both the invokes and queries are failing in this case as expected. {color}",,,,,,,,,,,,,,,,,,,,28/Jun/17 10:22 PM;sandp125;2017_06_28_18_18_49-logs.tar.gz;https://jira.hyperledger.org/secure/attachment/11394/2017_06_28_18_18_49-logs.tar.gz,28/Jun/17 10:20 PM;sandp125;node_app.log;https://jira.hyperledger.org/secure/attachment/11395/node_app.log,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01bhh:,,,,,,,,AdnanChoudhury,binhn,bmos299,ChristopherFerris,sandp125,xixuejia,,,,,,,,,29/Jun/17 11:19 AM;xixuejia;I think it makes sense that *query* still succeeds even if the org is removed from the channel. A better solution would be adding a new field indicating that the org is removed from the channel so that the client is aware that the query result might not be the latest state,29/Jun/17 12:18 PM;ChristopherFerris;Does the query only return state from when the org was a member of the channel? It isn't clear to me that they should have access. ,29/Jun/17 2:11 PM;sandp125;[~ChristopherFerris]. Yes. The query returns state for when org was still part of the channel. If you see Step 14. I am getting the value as 20 instead of the new value 30.,"29/Jun/17 2:20 PM;bmos299;[~xixuejia] this could be a security issue.  If you have any org that was removed for any reason, they could be using functionality for a DDOS type attack as this call is using cpu cycles.   Also, depending on how the query data is used, it could cause general misunderstanding of state.  What do you think?","29/Jun/17 4:18 PM;binhn;This is as expected: members of org3 can't  access the network; they can certainly access their peers and query data that they have on their peers, but they don't receive any more update from the network.

Please close.",29/Jun/17 5:34 PM;bmos299;What if the client (node sdk) goes to a peer in a different org?,"29/Jun/17 6:55 PM;binhn;[~bmos299] as I commented above ""members of org3 can't  access the network""; that is, they no longer have permission to the channel on any other org. If org3 belonged to other channels, then its members can continue to work as normal on other channels.","29/Jun/17 7:41 PM;sandp125;[~bmos299] [~binhn]. A peer from an org no longer part of the channel is not able to query a peer in a different org. I have tested this scenario and I am getting an error ""Org3MSP is unknown"". I am closing this issue as everything is working as expected.

 

 ",29/Jun/17 8:06 PM;binhn;[~sandp125] thanks.,,,,,,,,,,,,,,,
"""package.json"" of fabric-client does not include some necessary modules",FAB-5048,18740,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,ishihara.shun,ishihara.shun,28/Jun/17 10:56 AM,09/Aug/17 7:42 PM,26/Apr/18 6:50 AM,14/Jul/17 9:43 PM,v1.0.0,,,,,,v1.0.1,,,fabric-sdk-node,,,,0,,,,,,,,,"fabric-client do 'require' the following modules.
 * long
 * nano

 

These modules are not build-in module, so should be written in ""package.json"" file, but current file does not include them.",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01bdp:,,,,,,,,binhn,harrisob@us.ibm.com,ishihara.shun,mastersingh24,,,,,,,release-1.0,master,,true,"29/Jun/17 6:33 PM;harrisob@us.ibm.com;This is not a runtime issue. The work around is well understood by node.js programmers, they will just issue the NPM command to install the missing packages. Many users will not even see this issue as the packages will be installed already. It is a low risk change.","29/Jun/17 7:33 PM;binhn;I agreed that they (long and nano) should have been in the ""package.json"" file of the SDK since they are pre-req's, and which is a very easy fix, but the solution is also straight forward for node.js developers as [~harrisob@us.ibm.com] commented, so I don't think we should spin another RC for this.","30/Jun/17 4:07 AM;ishihara.shun;I think this issue is not problem in most situation, especially in developement phaze.
I saw this issue when I transplanted my application which include fabric-client module from developing environment to Docker container.
Because ""npm install"" was executed in completely clean status, and all modules did not defined ""nano"" in package.json.",30/Jun/17 10:37 AM;mastersingh24;So are we deferring this?,"30/Jun/17 12:34 PM;harrisob@us.ibm.com;[https://gerrit.hyperledger.org/r/#/c/11305/]

Fix available if needed",30/Jun/17 6:10 PM;binhn;[~JonathanLevi] [~ChristopherFerris] your choice but my vote is to defer,"11/Jul/17 4:35 PM;jimthematrix;not sure how our CI could have passed if these are real dependencies and are missing. it's likely that they are transitive dependencies and are already installed as a result of other dependency modules.

in any case, deferring to v1.0.1 to further investigate and fix.",,,,,,,,,,,,,,,,,
Fix chaincode msg,FAB-5047,18737,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,baohua,baohua,baohua,28/Jun/17 8:47 AM,28/Jun/17 1:35 PM,26/Apr/18 6:50 AM,28/Jun/17 1:35 PM,,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"In core/chaincode/chaincode_support.go.

The ready() method's failure should trigger ChaincodeMessage_READY msg in log instead of ChaincodeMessage_INIT",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01bd1:,,,,,,,,baohua,,,,,,,,,,master,,,true,28/Jun/17 8:54 AM;baohua;https://gerrit.hyperledger.org/r/#/c/11213/,,,,,,,,,,,,,,,,,,,,,,,
add chaincode tutorials to Getting Started ,FAB-5045,18735,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,28/Jun/17 1:19 AM,28/Jun/17 1:04 PM,26/Apr/18 6:50 AM,28/Jun/17 1:04 PM,v1.0.0-rc1,,,,,,,,,fabric-docs,,,,0,,,,,,,,,also embed videos,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01bcl:,,,,,,,,ChristopherFerris,,,,,,,,,,master,,,true,28/Jun/17 1:20 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/11207,,,,,,,,,,,,,,,,,,,,,,,
minor optimization: use env var for fabric-ca cert and key in e2e docker-compose.yaml,FAB-4054,16916,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,19/May/17 6:57 PM,23/May/17 2:10 AM,26/Apr/18 6:50 AM,23/May/17 2:10 AM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"the fabric-ca services in the docker-compose.yaml uses a mix of environment variables and command line arguments, while all parameters can be specified with environment variables. clean this up for consistency and better readability",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i011p1:,,,,,,,,lehors,,,,,,,,,,master,,,true,"22/May/17 8:17 AM;lehors;I don't think this really qualifies as ""a bug"" per se but I agree with the sentiment.",,,,,,,,,,,,,,,,,,,,,,,
Intermittent failures in unit tests in fabric/events/producer/producer_test.go,FAB-4042,16904,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,AdnanChoudhury,AdnanChoudhury,19/May/17 6:18 PM,25/May/17 3:03 PM,26/Apr/18 6:50 AM,25/May/17 3:03 PM,v1.0.0-alpha2,,,,,,v1.0.0,,,,,,,0,build-system,,,,,,,,"Have seen this error multiple times today in gerrit triggered builds. This is blocking gerrit verification.


{code:java}
// code placeholder
2017-05-18 20:58:12.258 UTC [msp] DeserializeIdentity -> INFO 007 Obtaining identity
20:58:26 unit-tests_1  | 2017-05-18 20:58:12.259 UTC [eventhub_producer] register -> ERRO 008 could not register chaincode_reg_info:<chaincode_id:""0xffffffff"" event_name:""event3"" > : event type REGISTER does not exist
20:58:26 unit-tests_1  | 2017-05-18 20:58:14.260 UTC [eventhub_producer] Send -> ERRO 009 event not set
20:58:26 unit-tests_1  | 2017-05-18 20:58:14.260 UTC [eventhub_producer] Send -> ERRO 00a event not set
20:58:26 unit-tests_1  | 2017-05-18 20:58:14.260 UTC [eventhub_producer] Send -> ERRO 00b event not set
20:58:26 unit-tests_1  | 2017-05-18 20:58:14.260 UTC [eventhub_producer] start -> ERRO 00c Event of type REGISTER does not exist
20:58:26 unit-tests_1  | 2017-05-18 20:58:14.260 UTC [eventhub_producer] start -> ERRO 00d Event of type REGISTER does not exist
20:58:26 unit-tests_1  | 2017-05-18 20:58:14.261 UTC [eventhub_producer] start -> ERRO 00e Event of type REGISTER does not exist
20:58:26 unit-tests_1  | 2017-05-18 20:58:14.263 UTC [eventhub_producer] start -> ERRO 00f Event of type REGISTER does not exist
20:58:26 unit-tests_1  | 2017-05-18 20:58:14.263 UTC [msp] DeserializeIdentity -> INFO 010 Obtaining identity
20:58:26 unit-tests_1  | 2017-05-18 20:58:16.264 UTC [msp] DeserializeIdentity -> INFO 011 Obtaining identity
20:58:26 unit-tests_1  | 2017-05-18 20:58:18.268 UTC [msp] DeserializeIdentity -> INFO 012 Obtaining identity
20:58:26 unit-tests_1  | 2017-05-18 20:58:18.270 UTC [msp] DeserializeIdentity -> INFO 013 Obtaining identity
20:58:26 unit-tests_1  | 2017-05-18 20:58:18.271 UTC [msp] DeserializeIdentity -> INFO 014 Obtaining identity
20:58:26 unit-tests_1  | 2017-05-18 20:58:18.274 UTC [eventhub_producer] SendProducerBlockEvent -> INFO 015 Channel [testchainid]: Sending event for block number [1]
20:58:26 unit-tests_1  | 2017-05-18 20:58:18.274 UTC [msp] DeserializeIdentity -> INFO 016 Obtaining identity
20:58:26 unit-tests_1  | 2017-05-18 20:58:18.276 UTC [msp] DeserializeIdentity -> INFO 017 Obtaining identity
20:58:26 unit-tests_1  | 2017-05-18 20:58:20.278 UTC [msp] DeserializeIdentity -> INFO 018 Obtaining identity
20:58:26 unit-tests_1  | 2017-05-18 20:58:20.281 UTC [msp] DeserializeIdentity -> INFO 019 Obtaining identity
20:58:26 unit-tests_1  | --- FAIL: TestUnregister (5.01s)
20:58:26 unit-tests_1  | 	producer_test.go:392: Error sending message could not send the blocking event
20:58:26 unit-tests_1  | 2017-05-18 20:58:25.285 UTC [msp] DeserializeIdentity -> INFO 01a Obtaining identity
20:58:26 unit-tests_1  | 2017-05-18 20:58:25.287 UTC [eventhub_producer] register -> ERRO 01b could not register event_type:BLOCK chainID:""testchainid"" : error registering handler for  BLOCK: handler exists for event type
20:58:26 unit-tests_1  | 2017-05-18 20:58:25.287 UTC [msp] DeserializeIdentity -> INFO 01c Obtaining identity
20:58:26 unit-tests_1  | 2017-05-18 20:58:25.287 UTC [eventhub_producer] Chat -> ERRO 01d Error handling message: event message must be properly signed by an identity from the same organization as the peer: [failed deserializing event creator: [Expected MSP ID DEFAULT, received ]]
20:58:26 unit-tests_1  | 2017-05-18 20:58:25.287 UTC [eventhub_producer] Chat -> ERRO 01e error during Chat, stopping handler: err
20:58:26 unit-tests_1  | FAIL
{code}",,,,,,,,,,,,,,FAB-4037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i011md:,,,,,,,,AdnanChoudhury,Clayton Sims,elisafla,,,,,,,,,,,,22/May/17 5:33 PM;Clayton Sims;By looking this did not make alpha2 so changing the fix version to v1.0.0.   If I misunderstood feel free to change back,,,,,,,,,,,,,,,,,,,,,,,
uppercase in chain code name fails to deploy/instantiate,FAB-4029,16880,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rmohta,rmohta,rmohta,18/May/17 11:08 PM,18/May/17 11:44 PM,26/Apr/18 6:50 AM,18/May/17 11:43 PM,,,,,,,,,,,,,,0,alpha-1,v1.0,,,,,,,"Steps to reproduce
 # Install chaincode as:  
{code:java}
peer chaincode install -n assetOperationscc -p github.com/assetOperations -v 1 -o orderer0:7050{code}

 # Instantiate chaincode as: 
{code:java}
peer chaincode instantiate -o orderer0:7050 -C $CHANNEL_NAME -n assetOperationscc -v 1 -c '{""Args"":[""init"",""dummy""]}'{code}

Error observed
{noformat}
Error: Error endorsing chaincode: rpc error: code = 2 desc = Error starting container: API error (500): {""message"":""Error parsing reference: \""dev-peer0-assetOperationscc-3\"" is not a valid repository/tag""}
{noformat}

Possible reason: Docker doesn't allow upper case in it's image name.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i011hh:,,,,,,,,rmohta,,,,,,,,,,,,,,"18/May/17 11:13 PM;rmohta;Preliminary information for reference from RocketChat
{noformat}
greg.haskins 4:01 PM
to also address that other issue
we could compute the hash once during install() and store it with the metadata

muralisr 4:03 PM
we do do that at the time of instantiate so the ledger has the metadata in its chaincode record
perhaps that's what you mean ?

greg.haskins 4:03 PM
what I mean specifically is to use the hash as the container name
that would solve both this and the other bug

muralisr 4:04 PM
ah

greg.haskins 4:04 PM
if we are already computing it, its that much easier

muralisr 4:04 PM
we could do that indeed
need to think about that a bit
but definitely possible

greg.haskins 4:04 PM
of course
{noformat}",18/May/17 11:43 PM;rmohta;This was [fixed|https://github.com/hyperledger/fabric/commit/9ae267247242c97b0587d025a6580a362909e38c]. alpha-2 image will correctly handle this.,,,,,,,,,,,,,,,,,,,,,,
SDK Go - interestedEvents not applied after Start,FAB-4023,16873,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sandrav,troyronda,troyronda,18/May/17 8:16 PM,14/Jun/17 6:43 PM,26/Apr/18 6:50 AM,14/Jun/17 6:43 PM,v1.0.0-alpha2,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:rhwhvzo,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"enable gerrit voting on fabric-behave, fabric-verify-z and fabric-end-to-end CI jobs",FAB-4022,16872,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,18/May/17 7:43 PM,05/Jun/17 7:22 PM,26/Apr/18 6:50 AM,23/May/17 2:48 PM,,,,,,,,,,fabric-build,fabric-quality,,,0,build-system,quality,,,,,,,"enable gerrit voting on fabric-behave, fabric-verify-z and fabric-end-to-end CI jobs if it fails.. existing CI setup skips voting if any of the tests fails. On latest commits of each component, e2e tests, behave and unit-tests on z are working as expected.

Before approve patch maintainers has to check the failures (-1) votings on these builds, if the build is failed due to not rebased patch.. better to rebase and reverify or just do reverify incase of false failures.",Jenkins CI jobs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i011gd:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,23/May/17 2:48 PM;rameshthoomu;submitted patch and merged,,,,,,,,,,,,,,,,,,,,,,,
FabricCAClientImpl missing newCryptoKeyStore,FAB-4019,16869,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,cdaughtr,cdaughtr,cdaughtr,18/May/17 6:15 PM,19/May/17 5:27 PM,26/Apr/18 6:50 AM,19/May/17 5:27 PM,v1.0.0,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,FabricCAClientImpl should have the function newCryptoKeyStore since fabric-ca-client module needs to be able to be used independently of fabric-client.,,,,,,,,,,,,,,FAB-3881,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i011fp:,,,,,,,,cdaughtr,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
With NO zookeepers running on network we could successfully submit a tx,FAB-4018,16868,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,Nishi,Nishi,18/May/17 6:02 PM,26/May/17 7:51 PM,26/Apr/18 6:50 AM,26/May/17 7:51 PM,v1.0.0-alpha2,,,,,,Not a Bug,,,fabric-orderer,,,,0,kafka,qa,,,,,,,"commit levels:
fabric-sdk-node *8e878750e8d9d4a213e976eceb57699393f74aeb*
fabric *217b8f60c625a6ffaddd3219bd60baca415e2b7c*

Test scenario:

{code}
1. Bring up the network. (1 orderer, 3 kafka brokers, 3 zookeepers, 2 org with 2 peer each with TLS)
2. Send an invoke transaction
3. Query yields successful results as expected
4. stop zookeeper0 
5. Wait 10 seconds
6. Issue a transaction
7. Query results as expected
8. stop zookeeper1 
9. Wait 10 seconds
10. Issue a transaction
11. Query results as expected
12. stop zookeeper2
13. Wait 10 seconds
14. Issue a transaction
{code}

Expected Result:

expected our transaction fail at step14.


Actual Result:
Having no zookeepers did not affect our test and it passed, Query results were as expected, This we think could be a problem based on 

Based on the article below something like ""how many messages were consumed by each consumer are stored in ZK""
http://www.waitingforcode.com/apache-kafka/the-role-of-apache-zookeeper-in-apache-kafka/read
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i011fh:,,,,,,,,kchristidis,mastersingh24,Nishi,,,,,,,,,,,,"18/May/17 9:15 PM;kchristidis;This looks like a great catch but let's see if the issue persists when the right settings have been applied: https://jira.hyperledger.org/browse/FAB-4012?focusedCommentId=24047&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-24047

Let me know.

Thanks as always for the detailed report, and for including that link.","19/May/17 2:12 PM;Nishi;Updated my base yaml files in https://jira.hyperledger.org/browse/FAB-4012
  

One difference I have observed between your file and what we have is, in our docker-compose-e2e.yaml file in order section ZK is missing from depends clause
{code:java}
 orderer0.example.com:
    extends:
      file:   base/docker-compose-base.yaml
      service: orderer0.example.com
    container_name: orderer0.example.com
    depends_on:
      - kafka0
      - kafka1
      - kafka2

{code}
Updated order section to include ZK in docker-compose-e2e.yaml and ran the test again, with similar results as reported in this issue. Let me know if we are missing anything else in our setup.","19/May/17 2:50 PM;Nishi;Just noticed your email

added missing config value in docker-compose-base.yaml file and will re-run my test.
{code:java}
KAFKA_MIN_INSYNC_REPLICAS=2{code}
 

Transaction could be submitted successfully with No Zookeepers running as reported earlier.",21/May/17 11:24 PM;kchristidis;Unassigning myself on purpose as I'm only working on one issue at time. Will re-assign when I focus on this.,"26/May/17 4:30 PM;mastersingh24;As far as I know, the Sarama Kafka client we use does not have a dependency on Zookeeper so the shim nodes should continue working as normal Kafka clients as long as the Kafka cluster is up and running.  Since the Kafka brokers were started properly with ZK up and running, they should continue running even if you reduce the number of ZK nodes to less than the quorum size.  If a ZK quorum is not available, you will definitely not be able to create channels (since Kafka 100% requires ZK to be up to create topics).  If the Kafka cluster changes (e.g. the primary broker for a partition goes down) it's also possible that you'll get errors with an insufficient ZK quorum.

But all other things being equal / staying the same, I am pretty sure that clients should be able to read / write from Kafka partitions even if ZK goes down","26/May/17 7:50 PM;kchristidis;Correct, the dependency on ZK for consumer offsets was dropped with the version 0.9 in Kafka. I don't know what I was thinking with the earlier comment of mine, apologies to both for the error. (I need a break.) Closing this.",,,,,,,,,,,,,,,,,,
Duplicate flags registered for 'Hosts',FAB-4017,16867,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,skarim,skarim,18/May/17 5:58 PM,24/May/17 8:40 PM,26/Apr/18 6:50 AM,24/May/17 8:40 PM,v1.0.0,v1.0.0-alpha1,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"Currently there are two places you can specify 'hosts' when performing an enrollment. One place is to specify it as part of the CSR API and the second place is in the Enrollment Request API. For example, you can see duplicate hosts flags:

--csr.*hosts* stringSlice        A list of space-separated host names in a certificate signing request
--csr.serialnumber string      The serial number in a certificate signing request, which becomes part of the DN (Distinquished Name)
-d, --debug                        Enable debug level logging
--enrollment.*hosts* string      Comma-separated host list

It is unclear to a user as to which one to use or which one will take precedence. Currently the hosts that is part of the Enrollment API will only take affect and the host from the CSR API will get ignored. Need to only have one place to specify hosts and it should be part of the CSR API. 

*Reproduction:*
1. Enroll user: fabric-ca-client enroll -u http://admin:adminpw@localhost:7054 --csr.hosts host1 --enrollment.hosts host2
2. Examine ecert and will only see host2 and not host1",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i011f9:,,Sprint 16 - Membership Service,,,,,,skarim,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
failing to recognize newly elected kafka leader orderer fails to process a transaction,FAB-4012,16862,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,Nishi,Nishi,18/May/17 3:06 PM,09/Jun/17 8:06 PM,26/Apr/18 6:50 AM,09/Jun/17 7:24 PM,v1.0.0-alpha2,,,,,,v1.0.0,,,fabric-orderer,,,,0,kafka,quality,,,,,,,"commit levels:
 fabric-sdk-node *8e878750e8d9d4a213e976eceb57699393f74aeb*
 fabric *217b8f60c625a6ffaddd3219bd60baca415e2b7c*

When we were testing fabric-sdk-node e2e scneario with a docker network based on docker-compose-e2e.yaml file (attached here)

Following scenario failed during our kafka broker testing.

1. Bring up the network. (1 orderer, 3 kafka brokers, 3 zoo-keepers, 2 org with 2 peer each with TLS)
 2. Send a invoke transaction
 3. Query yields successful results as expected
 4. Now identify leader of kafka cluster, from logs in our scenario it was broker1 i.e. kafka0 (kafka0:1, kafka1:2, kafka2: 3)
 5. Pause all kafka brokers in the order below

1. docker pause kafka1
 2. docker pause kafka2
 3. docker pause kafka0 (leader stopped at end)
 6. Wait 30 seconds
 7. docker unpause kafka1(non-leader)
 8. Issue a transaction

Expected Result:

Kafka1 to be elected as leader
 Transaction to complete successfully

Actual Result:
 Transaction fails 
 ""error: [Orderer.js]: sendBroadcast - reject with SERVICE_UNAVAILABLE
 not ok 10 Failed to send transaction and get notifications within the timeout""

Orderer Logs:
{code:java}
""licy=&{0xc420d79380 1 [0xc420024d68]}) %!s(*policies.implicitMetaPolicy=&{0xc420d79940 1 [0xc420024de8 0xc420024ea8]})]}
2017-05-18 14:45:01.484 UTC [orderer/kafka] Enqueue -> DEBU a30 [channel: mychannel] Enqueueing envelope...
2017-05-18 14:45:13.113 UTC [orderer/kafka] Send -> WARN a31 [channel: mychannel] Blob destined for partition 0, but posted to -1 instead
2017-05-18 14:45:13.113 UTC [orderer/kafka] Send -> INFO a32 [channel mychannel] Failed to post blob to the Kafka cluster: kafka server: In the middle of a leadership election, there is currently no leader for this partition and hence it is unavailable for writes.
2017-05-18 14:45:13.114 UTC [orderer/kafka] Enqueue -> ERRO a33 [channel: mychannel] cannot enqueue envelope: kafka server: In the middle of a leadership election, there is currently no leader for this partition and hence it is unavailable for writes.
2017-05-18 14:45:13.114 UTC [orderer/common/broadcast] Handle -> INFO a34 Consenter instructed us to shut down""
{code}
kafka1 Logs:

From logs it appears kafka1 is elected as leader but it appears message does not get communicated to orderer.

{code:java}
 ""[2017-05-18 14:44:49,555] INFO 2 successfully elected as leader (kafka.server.ZookeeperLeaderElector)
 ..
 [2017-05-18 14:44:49,786] INFO New leader is 2 (kafka.server.ZookeeperLeaderElector$LeaderChangeListener)""
{code}

 ",,,,,,,,,,,,,,,,,FAB-4013,,,05/Jun/17 9:27 PM;Nishi;docker-compose-base.yaml;https://jira.hyperledger.org/secure/attachment/10941/docker-compose-base.yaml,19/May/17 1:01 PM;Nishi;docker-compose-base.yaml;https://jira.hyperledger.org/secure/attachment/10840/docker-compose-base.yaml,18/May/17 3:06 PM;Nishi;docker-compose-e2e.yaml;https://jira.hyperledger.org/secure/attachment/10835/docker-compose-e2e.yaml,18/May/17 3:05 PM;Nishi;kafakLeaderIssue_Logs.tar.gz;https://jira.hyperledger.org/secure/attachment/10834/kafakLeaderIssue_Logs.tar.gz,05/Jun/17 9:36 PM;Nishi;orderer_logs_Jun5th_2017.txt.tar.gz;https://jira.hyperledger.org/secure/attachment/10942/orderer_logs_Jun5th_2017.txt.tar.gz,19/May/17 1:02 PM;Nishi;peer-base.yaml;https://jira.hyperledger.org/secure/attachment/10841/peer-base.yaml,,,,,,,,,,,,,,,,,,,,,,,,,,0|i011e5:,,,,,,,,Clayton Sims,kchristidis,Nishi,,,,,,,,master,,,true,"18/May/17 3:35 PM;kchristidis;Nishi, thanks for the detailed report. I have some comments, but before I go ahead, can you also attach `base/docker-compose-base.yml` here as well? Thank you.","18/May/17 9:13 PM;kchristidis;As far as I can tell, none of the Kafka brokers are actually passed in the list of ZK nodes. We're looking for an entry similar to this one: [https://gerrit.hyperledger.org/r/#/c/9495/6/bddtests/dc-orderer-kafka.yml@48]

(And in general, a setting similar to what you see in `dc-orderer-kafka.yml` and `dc-orderer-kafka-base.yml` in the changeset above. Please let me know if you have questions and I'll be glad to help out and explain those settings.)

Can you adjust the environment accordingly, re-run, and let me know if the issue persists?","19/May/17 1:02 PM;Nishi;Please find attached peer-base.yaml & docker-compose-base.yaml we have been using. In docker-compose-base.yaml it appears we are covering what you got in your link above.

One difference I have observed between your file and what we have is, in our docker-compose-e2e.yaml file in order section ZK is missing from depends clause
{code:java}
 orderer0.example.com:
    extends:
      file:   base/docker-compose-base.yaml
      service: orderer0.example.com
    container_name: orderer0.example.com
    depends_on:
      - kafka0
      - kafka1
      - kafka2

{code}
 ","19/May/17 3:13 PM;kchristidis;This is one of the differences in the setup, but not the crucial one (though it's needed). As far as I can tell, in those tests you are not providing the list of ZK nodes to the Kafka brokers, and the Kafka brokers themselves need to be configured in accordance to the CR I posted above.","19/May/17 3:44 PM;Nishi;And another config in docker-compose-base.yaml we are missing

 
{code:java}
 - KAFKA_MIN_INSYNC_REPLICAS=2{code}
 

Update yaml file - restart network. Repeat test this time in step7

7. docker unpause TWO non-leaders before sending transaction.

 

Though, results are as seen in original issue not the expected one.",19/May/17 9:36 PM;kchristidis;Nishi is working on the exact list of steps (down to the command level) that will allow me to reproduce this.,21/May/17 11:23 PM;kchristidis;I'm using [~jeffgarratt]'s BDD framework to reproduce this so I'm good Nishi. Will work on a fix.,24/May/17 1:21 PM;kchristidis;FAB-4136 takes priority and likely affects this. Will address this first.,"05/Jun/17 4:26 AM;kchristidis;Nishi, I would like you to reproduce this with the latest master and the configuration files provided in https://jira.hyperledger.org/browse/FAB-3387

It is important to set te ""verbose"" flag for Kafka logs to true: [https://github.com/hyperledger/fabric/blob/master/bddtests/dc-orderer-base.yml#L17]

As you have done earlier in this issue, please identify the exact list of steps you take.

Please attach the logs from every ordering service node used in this run.","05/Jun/17 9:01 PM;Nishi;commit levels: 
 SDK_NODE: *91bac30fec921775e21bf7f59de4d162f2462341*
 FABRIC: *670be92475a50b06e7bcb3fca15a558438d88e4a*

Git clone:
 1. git clone [https://github.com/suryalnvs/fabric-docker-compose-svt]

2. Updated fabric-docker-compose-svt/base/docker-compose-base.yaml
 - ORDERER_GENERAL_LOGLEVEL=debug
 - ORDERER_KAFKA_VERBOSE=true
 3. Run ./reset.sh

4. replace ~/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/e2e/config.json with attached config.json

4. Update in create-channel.js on line 127
 from
 let envelope_bytes = fs.readFileSync(path.join(__dirname, '../../fixtures/channel/mychannel.tx'));
 to
 let envelope_bytes = fs.readFileSync(path.join(__dirname, '../../fixtures/channel/channel.tx'));

5. cd ~/gopath/src/github.com/hyperledger/fabric-sdk-node/test/unit
{code:java}
vi util.js
/getOrdererAdmin 
add /msp
keyPath should be '../fixtures/channel/crypto-config/ordererOrganizations/example.com/users/Admin@example.com/msp/keystore');
certPath should be '../fixtures/channel/crypto-config/ordererOrganizations/example.com/users/Admin@example.com/msp/signcerts'

Find function getAdmin
/getAdmin
Add /msp
keypath should be '../fixtures/channel/crypto-config/peerOrganizations/%s.example.com/users/Admin@%s.example.com/msp/keystore'
certPath shlould be '../fixtures/channel/crypto-config/peerOrganizations/%s.example.com/users/Admin@%s.example.com/msp/signcerts'

 {code}
6. cd ~/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/e2e

7. node create-channel.js

8. node join-channel.js

9. node install-chaincode.js

10. node instantiate-chaincode.js

11. node invoke-transaction.js

12. node query.js (verify results, you may have to update expected value with every move)

13. docker pause kafaka1

14. docker pause kafka2

15. node invoke-transaction

16. node query verify results

17. docker pause kafka0 (leader)

(wait 30 seconds)

18. docker unpause kafka1 (non-leader)

Now we have
{code:java}
Up 29 minutes (Paused) 9093/tcp, 0.0.0.0:9096->9092/tcp kafka2
 Up 29 minutes 9093/tcp, 0.0.0.0:9094->9092/tcp kafka1
 Up 29 minutes (Paused) 0.0.0.0:9092->9092/tcp, 9093/tcp kafka0
 Up 29 minutes 9093/tcp, 0.0.0.0:9098->9092/tcp kafka3

New leader from kafka logs:

[2017-06-05 20:35:06,186] INFO New leader is 3 (kafka.server.ZookeeperLeaderElector$LeaderChangeListener)
{code}
*Does that mean it is kafka3 i.e. new leader??. Does the counting start with 0 as kafka broker names in docker-compose-base.yaml*

19. node invoke-transaction.js

20. Query

Expected Result:
 ----------------

Test to pass

Actual Result:
 ------------
{code:java}
***** End-to-end flow: query chaincode *****


ok 1 Successfully loaded member from persistence
ok 2 checking query results are correct that user b has 600 now after the move
ok 3 checking query results are correct that user b has 600 now after the move
ok 4 Successfully query chaincode on the channel

1..4
# tests 4
# pass 4

# ok
{code}","05/Jun/17 9:08 PM;kchristidis;> *Does that mean it is kafka3 i.e. new leader??. Does the counting start with 0 as kafka broker names in docker-compose-base.yaml*

So the integer that you see in the logs is what you set the `KAFKA_BROKER_ID` ENV var to in your Docker Compose configuration file. From what I can tell from your docker-compose-base.yml, the kafka0 service has a broker ID of 1, etc. So the new leader being 3 is probably a reference to kafka2.","05/Jun/17 9:09 PM;kchristidis;Nishi, thanks for re-checking so quickly. Confirmed with you that everything works as expected now. Closing this. Feel free to re-open if you see fit.","05/Jun/17 9:40 PM;Nishi;On a second run:

Noticed that I could send a tx successfully with just one kafka broker.
{code:java}
Up 35 minutes 9093/tcp, 0.0.0.0:9098->9092/tcp kafka3
Up 35 minutes (Paused) 9093/tcp, 0.0.0.0:9096->9092/tcp kafka2
Up 35 minutes (Paused) 0.0.0.0:9092->9092/tcp, 9093/tcp kafka0
Up 35 minutes (Paused) 9093/tcp, 0.0.0.0:9094->9092/tcp kafka1
{code}
With
{code:java}
- KAFKA_MIN_INSYNC_REPLICAS=2, ( we have 4brokers total) {code}
 

Is this right?

 

 ","05/Jun/17 9:45 PM;kchristidis;If you leave code references aside (e.g. node create-channel.js), can you identify the list of steps that you are performing?

For example, something along the lines of:
 # Bring 1 ordering service node up with 4 kafka brokers and 3 zookeepers servers
 # Create a channel
 # Have peer join channel
 # Install chaincode
 # Instantiate chaincode
 # Invoke chaincode
 # Verify results, look good
 # Pause brokers kafkaX, kafkaY
 # Invoke chaincode again

At this point, the transaction is enqueued (returned: SUCCESS) but I was expecting it to fail since there were less than min.isr brokers active.

I'm looking for a brief description along these lines. Can you please provide it?

I know you're provided variations of it earlier, but there's a reason I insist on this every time – I want to make sure there are no implicit assumptions, and double-check we're both on the same page.","05/Jun/17 9:57 PM;Nishi;Here are the steps [~kchristidis] :

1. Bring 3 ordering servers, 4 kafka brokers, 3 zookeepers servers, 2 Orgs (2 peers each), 2 ca-servers
2. Create a channel
4. join peers on channel
5. Install chaincode
6. Instantiate chaincode
7. Invoke chaincode
8. Verify results, look good
9. Pause brokers kafka1, kafka2, (non-leaders),
10. Invoke chaincode again
11. Query results are good.
12. Pause kafka0 (leader)
13. Invoke chaincode again
14. Query results are good.

Is that an issue with current docker-setup with - KAFKA_MIN_INSYNC_REPLICAS=2

 

 

 ","06/Jun/17 3:49 PM;Clayton Sims;No pending code fix - so changing status 

 ","09/Jun/17 8:35 AM;kchristidis;[~Nishi]: `kafka3` in your Docker Compose configuration is loaded with this ENV var: KAFKA.MIN_INSYNC_REPLICAS=2 (notice the dot instead of an underscore)

If you replace the dot with an underscore you'll get the desired behavior, i.e. if you invoke chaincode again (step 13), this transaction won't go through.

I actually have the same ENV var typo in the bddtests Docker Compose files, and I just pushed a changeset to fix it, so thank you for bringing this to my attention.

[https://gerrit.hyperledger.org/r/#/c/10385/]

Please confirm that this fixes the issue and close it if that's the case.","09/Jun/17 7:22 PM;Nishi;Verified successfully on build * 85ef08326fcf6cfb5dbbf389633ba7ea394fcbd4*

In docker compose right env variable to set is 

 - KAFKA_MIN_INSYNC_REPLICAS=2

Verified that tx failed when we have just one broker, with this env param set correctly.

Also verified steps in main issue successfully.",,,,,,
Add channel name to blocksProvider logger,FAB-4005,16854,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,18/May/17 12:09 PM,22/May/17 10:29 PM,26/Apr/18 6:50 AM,22/May/17 10:29 PM,v1.0.0-alpha2,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"In case there are problems with fetching blocks its' not clear to which channel it corresponds to:

ESC[33m2017-05-18 07:51:02.227 EDT [blocksProvider] DeliverBlocks -> WARN 045ESC[0m Got error  &{FORBIDDEN}
ESC[33m2017-05-18 07:51:03.230 EDT [blocksProvider] DeliverBlocks -> WARN 046ESC[0m Got error  &{FORBIDDEN}
ESC[33m2017-05-18 07:51:04.232 EDT [blocksProvider] DeliverBlocks -> WARN 047ESC[0m Got error  &{FORBIDDEN}
ESC[33m2017-05-18 07:51:05.235 EDT [blocksProvider] DeliverBlocks -> WARN 048ESC[0m Got error  &{FORBIDDEN}
ESC[33m2017-05-18 07:51:06.238 EDT [blocksProvider] DeliverBlocks -> WARN 049ESC[0m Got error  &{FORBIDDEN}
ESC[33m2017-05-18 07:51:07.241 EDT [blocksProvider] DeliverBlocks -> WARN 04aESC[0m Got error  &{FORBIDDEN}

We should add the channel name to the blocks provider logger",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i011cd:,,Sprint 16 - Gossip,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
ORDERER_TRANSACTION error,FAB-4004,16853,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jsong1230,jsong1230,18/May/17 12:05 PM,03/Jun/17 5:22 AM,26/Apr/18 6:50 AM,03/Jun/17 5:22 AM,v1.0.0-alpha2,,,,,,WON'T FIX,,,fabric-orderer,,,,0,won't-fix,,,,,,,,"I am trying to deploy a real fabric network without docker. I had no problem in alpha version, but got the following error in alpha2 version.

My network has 2 peers and 1 orderer. I used a CLI command.

Please find my commands.

{color:#ff0000}orderer{color}

{color:#ff0000}peer node start -o \{orderer IP}:7050{color}

 

After starting orderer, peer 1, 2, I created a block and tx.
 {color:#ff0000}configtxgen -profile SampleSingleMSPSolo -outputBlock ch4-1.block{color}
 {color:#ff0000}configtxgen -profile SampleSingleMSPChannel -outputCreateChannelTx ch4-1.tx -channelID ch4-1{color}
 Then created a channel and joined it at peer 1
 {color:#ff0000}peer channel create -o \{orderer1 IP}:7050 -c ch4-1 -f ch4-1.tx -b ch4-1.block{color}
 {color:#ff0000}peer channel join -o \{orderer1 IP}:7050 -b ch4-1.block -f ch4-1.tx{color}
  
 Copied tx and block from peer 1 to peer 2
 Then join a ch4-1 channel at peer 2
 {color:#ff0000}peer channel join -o \{orderer1 IP}:7050 -b ch4-1.block -f ch4-1.tx{color}
  
 It seems fine till this point. 
 I have tested myccttttt chancode at peer 1.
 {color:#ff0000}peer chaincode install -C ch4-1 -n myccttttt -v 0.4 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c '\{""Args"":[""init"",""a"",""100"",""b"",""200""]}'{color}
 {color:#ff0000}peer chaincode instantiate -n myccttttt -v 0.4 -c '\{""Args"":[""init"",""a"",""100"",""b"",""200""]}' -o\{orderer1 IP}:7050 -C ch4-1 -P ""OR ('OrdererMSP.member','Org1MSP.member')""{color}
 {color:#ff0000}peer chaincode invoke -n myccttttt -c '\{""Args"":[""invoke"",""a"",""b"",""10""]}' -o \{orderer1 IP}:7050 -C ch4-1{color}
 {color:#ff0000}peer chaincode query -n myccttttt -c '\{""Args"":[""query"",""a""]}' -o \{orderer1 IP}:7050 -C ch4-1{color}
  
 But when I tried query at peer 2, I got some errors as below.
 {color:#ff0000}peer chaincode install -C ch4-1 -n myccttttt -v 0.4 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c '\{""Args"":[""init"",""a"",""100"",""b"",""200""]}'{color}
 {color:#ff0000}peer chaincode query -n myccttttt -c '\{""Args"":[""query"",""a""]}' -o \{orderer1 IP}:7050 -C ch4-1{color}
  
 and got the following error at peer 2.

{color:#ff0000}2017-05-18 20:47:35.011 KST [gossip/gossip] Gossip -> WARN 049 Failed obtaining gossipChannel of [116 101 115 116 99 104 97 105 110 105 100] aborting{color}
 {color:#ff0000}2017-05-18 20:47:35.011 KST [protoutils] ValidateTransaction -> ERRO 04a validateCommonHeader returns err invalid header type ORDERER_TRANSACTION{color}
 {color:#ff0000}2017-05-18 20:47:35.011 KST [txvalidator] Validate -> ERRO 04b Invalid transaction with index 0{color}
 {color:#ff0000}2017-05-18 20:47:35.011 KST [statevalidator] ValidateAndPrepareBatch -> WARN 04c Block [1] Transaction index [0] marked as invalid by committer. Reason code [3]{color} 

Am I doing something wrong?

Here I attach my core.yaml, orderer.yaml, and configtx.yaml files.
  

It guess there is something being changed about policies.

Below is the warning and error messages in orderer window.

Thanks in advance.

Jeffrey

{color:#ff0000}2017-05-18 20:47:34.965 KST [policies] CommitProposals -> WARN 00e Current configuration has no policy '/Channel/Application/Readers', this will likely cause problems in production systems{color}
 {color:#ff0000}2017-05-18 20:47:34.965 KST [policies] CommitProposals -> WARN 00f Current configuration has no policy '/Channel/Application/Writers', this will likely cause problems in production systems{color}
 {color:#ff0000}2017-05-18 20:47:34.965 KST [policies] CommitProposals -> WARN 010 Current configuration has no policy '/Channel/Application/Admins', this will likely cause problems in production systems{color}
 {color:#ff0000}2017-05-18 20:47:34.966 KST [cauthdsl] func2 -> ERRO 011 Principal deserialization failed: (Could not deserialize a SerializedIdentity, err unexpected EOF) for identity [99 101 114 116]{color}
 {color:#ff0000}2017-05-18 20:47:34.970 KST [policies] CommitProposals -> WARN 012 Current configuration has no policy '/Channel/Application/Readers', this will likely cause problems in production systems{color}
 {color:#ff0000}2017-05-18 20:47:34.971 KST [policies] CommitProposals -> WARN 013 Current configuration has no policy '/Channel/Application/Writers', this will likely cause problems in production systems{color}
 {color:#ff0000}2017-05-18 20:47:34.971 KST [policies] CommitProposals -> WARN 014 Current configuration has no policy '/Channel/Application/Admins', this will likely cause problems in production systems{color}
 {color:#ff0000}2017-05-18 20:47:34.971 KST [cauthdsl] func2 -> ERRO 015 Principal deserialization failed: (Could not deserialize a SerializedIdentity, err unexpected EOF) for identity [99 101 114 116]{color}
 {color:#ff0000}2017-05-18 20:47:34.973 KST [cauthdsl] func2 -> ERRO 016 Principal deserialization failed: (Could not deserialize a SerializedIdentity, err unexpected EOF) for identity [99 101 114 116]{color}
 {color:#ff0000}2017-05-18 20:47:34.980 KST [policies] CommitProposals -> WARN 017 Current configuration has no policy '/Channel/Application/Readers', this will likely cause problems in production systems{color}
 {color:#ff0000}2017-05-18 20:47:34.980 KST [policies] CommitProposals -> WARN 018 Current configuration has no policy '/Channel/Application/Writers', this will likely cause problems in production systems{color}
 {color:#ff0000}2017-05-18 20:47:34.980 KST [policies] CommitProposals -> WARN 019 Current configuration has no policy '/Channel/Application/Admins', this will likely cause problems in production systems{color}
 {color:#ff0000}2017-05-18 20:47:34.981 KST [cauthdsl] func2 -> ERRO 01a Principal deserialization failed: (Could not deserialize a SerializedIdentity, err unexpected EOF) for identity [99 101 114 116]{color}
 {color:#ff0000}2017-05-18 20:47:34.982 KST [cauthdsl] func2 -> ERRO 01b Principal deserialization failed: (Could not deserialize a SerializedIdentity, err unexpected EOF) for identity [99 101 114 116]{color}
 {color:#ff0000}2017-05-18 20:47:34.994 KST [orderer/multichain] newChain -> INFO 01c Created and starting new chain ch4-1{color}",,,,,,,,,,,,,,,,,,,,18/May/17 12:04 PM;jsong1230;configtx.yaml;https://jira.hyperledger.org/secure/attachment/10833/configtx.yaml,18/May/17 12:04 PM;jsong1230;core.yaml;https://jira.hyperledger.org/secure/attachment/10832/core.yaml,18/May/17 12:04 PM;jsong1230;orderer.yaml;https://jira.hyperledger.org/secure/attachment/10831/orderer.yaml,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i011c5:,,,,,,,,jsong1230,jyellick,,,,,,,,,,,,,"02/Jun/17 6:01 PM;jyellick;> After starting orderer, peer 1, 2, I created a block and tx.
> configtxgen -profile SampleSingleMSPSolo -outputBlock ch4-1.block
> configtxgen -profile SampleSingleMSPChannel -outputCreateChannelTx ch4-1.tx -channelID ch4-1
> Then created a channel and joined it at peer 1
> peer channel create -o {orderer1 IP}:7050 -c ch4-1 -f ch4-1.tx -b ch4-1.block
> peer channel join -o {orderer1 IP}:7050 -b ch4-1.block -f ch4-1.tx
 
This is not the correct workflow.  The `outputBlock` is only used for orderer bootstrap, and is not involved in channel creation.

The `peer channel create` command sends the configtx to the orderer, which creates the channel, and the genesis block for that channel.  The `peer channel create` command then retrieves the block from the orderer, and writes it to disk.  It is this output block which must be used as the parameter to the join channel.",,,,,,,,,,,,,,,,,,,,,,,
Cannot change the Org name in fabric-sdk-java sample code,FAB-4001,16850,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,zhangchao,zhangchao,18/May/17 7:40 AM,01/Jun/17 12:40 PM,26/Apr/18 6:50 AM,01/Jun/17 12:40 PM,,,,,,,WON'T FIX,,,fabric-sdk-java,,,,0,,,,,,,,,"* I am running the sample application in sdkintegration. Everything works well when I run End2EndIT first and then End2endAndBackAgainIT. But after I change the org name in End2endAndBackAgainIT from peerOrg1 to peerOrg2 like below:
h6. _SampleOrg sampleOrg = testConfig.getIntegrationTestsSampleOrg(""peerOrg2"");_
h6. _Chain fooChain = reconstructChain(FOO_CHAIN_NAME, client, sampleOrg);_
h6. _runChain(client, fooChain, sampleOrg, 0);_

 * it encounters error:Failed to deserialize creator identity, err MSP Org2MSP is unknown
 * I am wondering peerOrg1 and peerOrg2 are in the same Consortium chain and why peerOrg2 cannot invoke the chaincode 
 * I am trying use newChain.joinPeer(peer) instead of newChain.addPeer(peer) in reconstructChain(), it works",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i011bh:,,,,,,,,rickr,zhangchao,,,,,,,,,,,,,18/May/17 10:22 PM;rickr;They are not in the same Consortium.  Even if the were Consortium only applies to channel policies and not joining peers or installing chaincode ,19/May/17 12:29 PM;rickr;I don't see any bugs here,"26/May/17 6:43 AM;zhangchao;I checked configtx.yaml, they are in same consortium(SampleConsortium), and where is the policy indicating the peers permission?","30/May/17 9:35 PM;rickr;Only the peer admin for the peer can create, join channels and install/instantiate chaincode.",,,,,,,,,,,,,,,,,,,,
SDK Go - EventHub doesn't always clean up properly on disconnect,FAB-3999,16846,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,troyronda,troyronda,troyronda,18/May/17 2:58 AM,18/May/17 8:58 PM,26/Apr/18 6:50 AM,18/May/17 8:58 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,"On my MBP, I get the following issue when running integration tests:

EventHub connect to peer (localhost:7053) *******
 Received error validation Code MVCC_READ_CONFLICT

FAIL: TestEvents (51.18s)
 events_test.go:240: invoke Didn't receive test callback event

 
----
This issue results from the eventhub reconnect test case. Ways to make the case pass
 * The error goes away if you reset the entire EventHub data structure after disconnect.
 * The error goes away if you do a synchronous unregister.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ts5:yi,,,,,,,,troyronda,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
peer does not invalidate old chaincode containers,FAB-3996,16843,Bug,To Do,FAB,Fabric,software,ChristopherFerris,,,Medium,,mastersingh24,greg.haskins,greg.haskins,18/May/17 2:13 AM,21/Feb/18 3:37 PM,26/Apr/18 6:50 AM,,v1.0.0-alpha2,,,,,,v1.2,,,fabric-endorser,,,,0,,,,,,,,,"The peer currently has two persistence layers for chaincode:
 # /var/hyperledger/fabric/peer/chaincodes
 # docker images

(1) is updated when new chaincode is installed.  (2) is updated when chaincode is instantiated for the first time.  Subsequent instantiate() operations will see that (2) already exists and optimize the build-phase away.

It is possible (and especially easy during development) to get in a situation where one persistence layer is cleaned independently from the other.  For instance, a peer running in docker and with an ephemeral /var will restart from scratch every time the container is launched.  However, the docker-images may continue to persist regardless since the storage for the images is on the peer's host.

The implication of this is that we can get in a situation where chaincode is loaded via install(), but that the instantiate() phase incorrectly optimizes the docker-build away because it detects a hit in the current image inventory.  Note that this detection is based purely on the chaincode name, and not it's contents.  The two impacts here are:
 # You may or may not get the proper executable.  E.g. there's no guarantee that the chaincode container of the same name is actually related to the code that was submitted.
 # You may or may not get the proper TLS setup.  The peer certificate is currently injected during the docker-build phase.  It is plausible that the peer may be using a completely different x509 since the container was built, but this is not detected.

While all of these maladies are much more likely to impact development use cases rather than production, it should be noted that it seems both a bit fragile to assume coherence, difficult to detect when it happens,  as well as easy to fix.  Therefore, we should consider enhancing the system to handle this gracefully.

The suggested fix is to invalidate the docker-images cache during the install() operation.",,,,,,,,,,,,,,,,,FAB-5676,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i011a5:,,,,,,,,cotofei,denyeart,greg.haskins,joaquimpedrooliveira,mastersingh24,muralisr,sykesm,,,,,,,,"01/Jun/17 10:33 PM;muralisr;[~greg.haskins] I'm on the fence about fixing this for 1.0 vs doing post 1.0. On the one hand its got some usability benefits (esp. during dev). On the other, is the change worth it at this time ? ","07/Jun/17 1:57 PM;greg.haskins;I think it's fine to wait.  However, I also suspect it's not a very complicated fix.  I think if we decide to defer, we should minimally ensure we document the workaround clearly, as it has the potential to confuse people.",13/Jun/17 12:14 PM;muralisr;[~greg.haskins] moved this to 1.1 (really a vehicle after 1.0 though). Will make sure this is documented ( [~nickgaski] can you help me with this please),"15/Jun/17 8:50 PM;greg.haskins;Workaround: run the following before rebuilding a cluster
{noformat}
docker images | grep dev-peer | awk '{ print $1 }' | xargs docker rmi -f`{noformat}",09/Dec/17 10:34 AM;mastersingh24;I'm going to take this one unless [~ecb] is also working on this?  This is somewhat related to what we need to do in order to handle upgrading from v1.0.x to v1.1,24/Jan/18 4:48 PM;sykesm;Spoke with [~mastersingh24] and it sounds like this will be addressed by the work he's doing in FAB-5676.,14/Feb/18 5:24 PM;denyeart;[~mastersingh24] Should we move FAB-3996 and FAB-5676 to 1.2 at this point?,21/Feb/18 3:37 PM;denyeart;Moving to 1.2.,,,,,,,,,,,,,,,,
Increase msp/ package UT coverage,FAB-3992,16834,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,17/May/17 8:56 PM,19/May/17 2:39 PM,26/Apr/18 6:50 AM,19/May/17 2:39 PM,,,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,,"The CC of *github.com/hyperledger/fabric/msp* is 84%. 
It should be > 85% as required",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzbt:l0hzl,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
unused packages in vendor tree ,FAB-3976,16809,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,17/May/17 11:38 AM,04/Jan/18 1:16 PM,26/Apr/18 6:50 AM,04/Jan/18 1:16 PM,v1.0.0,v1.0.0-alpha2,,,,,v1.1,,,fabric-build,,,,0,build-system,,,,,,,,"cbf$ govendor list +u

 vu github.com/DATA-DOG/godog                                                   

 vu github.com/davecgh/go-spew/spew                                             

 vu github.com/eapache/go-resiliency/breaker                                    

 vu github.com/eapache/go-xerial-snappy                                         

 vu github.com/eapache/queue                                                    

 vu github.com/cpuguy83/go-md2man/md2man                                        

 vu github.com/docker/docker/pkg/aaparser                                       

 vu github.com/docker/docker/pkg/authorization                                  

 vu github.com/docker/docker/pkg/broadcaster                                    

 vu github.com/docker/docker/pkg/chrootarchive                                  

 vu github.com/docker/docker/pkg/devicemapper                                   

 vu github.com/docker/docker/pkg/directory                                      

 vu github.com/docker/docker/pkg/discovery                                      

 vu github.com/docker/docker/pkg/discovery/file                                 

 vu github.com/docker/docker/pkg/discovery/kv                                   

 vu github.com/docker/docker/pkg/discovery/memory                               

 vu github.com/docker/docker/pkg/discovery/nodes                                

 vu github.com/docker/docker/pkg/filenotify                                     

 vu github.com/docker/docker/pkg/gitutils                                       

 vu github.com/docker/docker/pkg/graphdb                                        

 vu github.com/docker/docker/pkg/httputils                                      

 vu github.com/docker/docker/pkg/integration                                    

 vu github.com/docker/docker/pkg/integration/checker                            

 vu github.com/docker/docker/pkg/jsonlog                                        

 vu github.com/docker/docker/pkg/jsonmessage                                    

 vu github.com/docker/docker/pkg/listeners                                      

 vu github.com/docker/docker/pkg/locker                                         

 vu github.com/docker/docker/pkg/loopback                                       

 vu github.com/docker/docker/pkg/mount                                          

 vu github.com/docker/docker/pkg/parsers                                        

 vu github.com/docker/docker/pkg/parsers/kernel                                 

 vu github.com/docker/docker/pkg/parsers/operatingsystem                        

 vu github.com/docker/docker/pkg/pidfile                                        

 vu github.com/docker/docker/pkg/platform                                       

 vu github.com/docker/docker/pkg/plugins                                        

 vu github.com/docker/docker/pkg/plugins/pluginrpc-gen/fixtures                 

 vu github.com/docker/docker/pkg/plugins/pluginrpc-gen/fixtures/otherfixture    

 vu github.com/docker/docker/pkg/plugins/transport                              

 vu github.com/docker/docker/pkg/progress                                       

 vu github.com/docker/docker/pkg/pubsub                                         

 vu github.com/docker/docker/pkg/reexec                                         

 vu github.com/docker/docker/pkg/registrar                                      

 vu github.com/docker/docker/pkg/signal                                         

 vu github.com/docker/docker/pkg/streamformatter                                

 vu github.com/docker/docker/pkg/stringid                                       

 vu github.com/docker/docker/pkg/stringutils                                    

 vu github.com/docker/docker/pkg/symlink                                        

 vu github.com/docker/docker/pkg/sysinfo                                        

 vu github.com/docker/docker/pkg/tailfile                                       

 vu github.com/docker/docker/pkg/tarsum                                         

 vu github.com/docker/docker/pkg/term                                           

 vu github.com/docker/docker/pkg/term/windows                                   

 vu github.com/docker/docker/pkg/testutil                                       

 vu github.com/docker/docker/pkg/tlsconfig                                      

 vu github.com/docker/docker/pkg/truncindex                                     

 vu github.com/docker/docker/pkg/urlutil                                        

 vu github.com/docker/docker/pkg/useragent                                      

 vu github.com/docker/docker/volume                                             

 vu github.com/gocraft/web                                                      

 vu github.com/golang/protobuf/ptypes                                           

 vu github.com/google/gofuzz                                                    

 vu github.com/howeyc/gopass                                                    

 vu github.com/manudrijvers/amcl/go                                             

 vu github.com/mattn/go-sqlite3                                                 

 vu github.com/russross/blackfriday                                             

 vu github.com/shurcooL/sanitized_anchor_name                                   

 vu golang.org/x/crypto/hkdf                                                    

 vu golang.org/x/crypto/ssh                                                     

 vu golang.org/x/net/bpf                                                        

 vu golang.org/x/net/context/ctxhttp                                            

 vu golang.org/x/net/dict                                                       

 vu golang.org/x/net/html/charset                                               

 vu golang.org/x/net/icmp                                                       

 vu golang.org/x/net/idna                                                       

 vu golang.org/x/net/internal/iana                                              

 vu golang.org/x/net/internal/nettest                                           

 vu golang.org/x/net/ipv4                                                       

 vu golang.org/x/net/ipv6                                                       

 vu golang.org/x/net/netutil                                                    

 vu golang.org/x/net/proxy                                                      

 vu golang.org/x/net/publicsuffix                                               

 vu golang.org/x/net/route                                                      

 vu golang.org/x/net/webdav                                                     

 vu golang.org/x/net/webdav/internal/xml                                        

 vu golang.org/x/net/xsrftoken                                                  

 vu google.golang.org/grpc/grpclog/glogger                                      

 vu google.golang.org/grpc/health                                               

 vu google.golang.org/grpc/health/grpc_health_v1                                

 vu google.golang.org/grpc/reflection                                           

 vu google.golang.org/grpc/reflection/grpc_reflection_v1alpha                   

 vu google.golang.org/grpc/reflection/grpc_testing                              

 vu google.golang.org/grpc/test                                                 

 vu google.golang.org/grpc/test/codec_perf                                      

 vu google.golang.org/grpc/test/grpc_testing                                    

 vu google/protobuf                                                             

 vu github.com/klauspost/crc32                                                  

 vu github.com/pierrec/lz4                                                      

 vu github.com/rcrowley/go-metrics ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01145:,,,,,,,,ChristopherFerris,denyeart,greg.haskins,,,,,,,,master,,,true,18/May/17 1:36 AM;greg.haskins;Are we confident that there are no build/tag permutations that might reference these?,"18/May/17 1:54 AM;ChristopherFerris;[~greg.haskins] no, so I am removing them one at a time and bypassing any that are actually needed

 ",18/May/17 1:57 AM;greg.haskins;google/protobuf looks highly suspicious ;),27/Nov/17 3:15 AM;denyeart;[~ChristopherFerris] Are you still intending to work on this?,,,,,,,,,,,,,,,,,,,,
Submitting chain code - the packager doesn't account for non-unix file paths,FAB-3975,16808,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,mbwhite,mbwhite,17/May/17 11:38 AM,21/May/17 4:10 AM,26/Apr/18 6:50 AM,21/May/17 4:10 AM,,,,,,,v1.0.0-alpha1,,,fabric-sdk-node,,,,0,,,,,,,,,"If working from a Windows client (fabric-client node-sdk), when the Goland.js packager is find all the source code, it doesn't correct the path names. 

In node, the FS module will give back platform specific paths. 

{{var desc = \{}}
{{   name: path.relative(goPath, entry.path),}}
{{   fqp: entry.path}}
{{};}}

 

The name and fqp fields need to converted to uni style paths before they are used. The following code in the findSource method would be able to rectify this and I've checked that it does work.



var desc = \{
name: '',
fqp: ''
};

if (path.sep === '\\')\{
desc.name = path.relative(goPath, entry.path);
desc.fwp = entry.path;
} else \{
desc.name = path.relative(goPath, entry.path);
desc.fwp = entry.path;
}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0113x:,,,,,,,,mbwhite,,,,,,,,,,,,,,21/May/17 4:10 AM;jimthematrix;was fixed by https://gerrit.hyperledger.org/r/#/c/9467/,,,,,,,,,,,,,,,,,,,,,,,
cryptogen emits WARN at invocations,FAB-3972,16805,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,17/May/17 8:27 AM,21/May/17 4:39 PM,26/Apr/18 6:50 AM,21/May/17 4:39 PM,v1.0.0,,,,,,,,,fabric-tools,,,,1,build-system,,,,,,,,"Cryptogen emits the following lines when invoked:

2017-05-17 04:22:15.957 EDT [bccsp] GetDefault -> WARN 013 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
 2017-05-17 04:22:15.959 EDT [bccsp] GetDefault -> WARN 014 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
 2017-05-17 04:22:15.961 EDT [bccsp] GetDefault -> WARN 015 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
 2017-05-17 04:22:15.962 EDT [bccsp] GetDefault -> WARN 016 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
 2017-05-17 04:22:15.963 EDT [bccsp] GetDefault -> WARN 017 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.

I think we should fix it by simply calling *factory.InitFactories(nil)* at the main.go of cryptogen.

[~mastersingh24]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01139:,,,,,,,,yacovm,,,,,,,,,,,,,,17/May/17 8:40 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/9443/,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca-client --id.attr accept only one attribute,FAB-3971,16804,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,aietcn,aietcn,17/May/17 8:22 AM,27/May/17 8:56 AM,26/Apr/18 6:50 AM,26/May/17 3:48 PM,v1.0.0-alpha2,,,,,,v1.0.0,,,fabric-ca,,,,0,fabric-ca-client,v1.0,,,,,,,"when specifying more than one id.attr command line arguments, only the last one is accepted and saved in the database.
{code:java}
fabric-ca-client --id.attr hf.Registraar.Roles=""user,peer,auditor"" --id.attr hf.Revoker=true ...
{code}
Neither does the following works:
{code:java}
fabric-ca-client --id.attr hf.Registraar.Roles=""user,peer,auditor"",hf.Revoker=true ...

fabric-ca-client --id.attr hf.Registraar.Roles=""user,peer,auditor"";hf.Revoker=true ...
{code}
maybe fixes can go around these lines: [https://github.com/hyperledger/fabric-ca/blob/master/cmd/fabric-ca-client/config.go#L287]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01131:,,,,,,,,aietcn,smithbk,,,,,,,,,master,,,true,"17/May/17 9:15 PM;smithbk;See http://gerrit.hyperledger.org/r/9479 [FAB-3971] Register id with multiple attrs

With this change set, the 1st form above is supported in which you may specify multiple --id.attr flags and each of the specified name/value pairs are added to the list of attributes for the registered user.",18/May/17 1:55 AM;aietcn;[~smithbk] Looks solid. Thanks for the quick response.,,,,,,,,,,,,,,,,,,,,,,
Make gossip block pull mechanism to be ledger height aware,FAB-3970,16803,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,gennadyl,yacovm,yacovm,17/May/17 8:06 AM,21/Aug/17 1:34 PM,26/Apr/18 6:50 AM,21/Aug/17 1:34 PM,v1.0.0-alpha2,,,,,,Future,,,fabric-gossip,,,,0,active,gossip,,,,,,,"The following scenario is possible:
peer0 has ledger height 1000
peer1 has ledger height 500

peer0 has in its in-memory messageStore blocks 900-1000
peer1 has in its in-memory messageStore blocks 500-600

peer0 sends a pull Hello to peer1
peer1 returns digests of blocks 500-600
peer0 requests blocks 500-600
peer1 returns blocks 500-600
peer0 discards them because they are too old

We need a way to make the peer ignore pull digest messages of blocks that their sequence number is lower than the ledger's height.

What I think we can do is add an instance method to *StateInfo* that returns the seqNum of the block from the metadata, and since the *channel.go* file has the last stateInfo reference (that is updated by *UpdateStateInfo* method)  it can be used to ignore digests with a too low seqNum.

[~C0rWin]
[~gennadyl]

opinions?
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i0112t:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Event producer allows registration of nil handlers,FAB-3955,16773,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,wlahti,wlahti,16/May/17 4:48 PM,18/May/17 10:19 PM,26/Apr/18 6:50 AM,18/May/17 10:19 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"The event producer logic currently allows the registration of a nil handler:
{code:java}
registerHandler(&peer.Interest{EventType: peer.EventType_BLOCK}, nil){code}
This leads to a panic when attempting to send messages using the nil handler:
{code:java}
panic: runtime error: invalid memory address or nil pointer dereference [signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x4080240] goroutine 7 [running]: panic(0x4519b00, 0xc4200140a0) /usr/local/go/src/runtime/panic.go:500 +0x1a1 github.com/hyperledger/fabric/events/producer.(*handler).SendMessage(0x0, 0xc4201e0750, 0xc420426ea0, 0x4863f50) github.com/hyperledger/fabric/events/producer/_test/_obj_test/handler.go:150 +0x30 github.com/hyperledger/fabric/events/producer.(*eventProcessor).start.func1(0x0){code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i010x9:,,,,,,,,wlahti,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Re-introduce disabled goroutine leakage check in deliveryService tests,FAB-3953,16771,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,16/May/17 3:23 PM,21/May/17 4:08 PM,26/Apr/18 6:50 AM,21/May/17 4:08 PM,v1.0.0,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"The check was disabled in FAB-3257 and deals with checking if goroutines that are created during a test are dead after the test ends.
It failed because sometimes the number of goroutines that the test started with, was higher than the number it ended with.

It should be re-introduced.

I think we should simply instead of checking that the number of goroutines hasn't changed from the start of the test to the end of the test - check that it didn't increase, because that proves that a goroutine was created at the time of the test and hasn't finished.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i010wt:,,,,,,,,yacovm,,,,,,,,,,master,,,true,16/May/17 3:30 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/9411/,,,,,,,,,,,,,,,,,,,,,,,
intermittent failures of peer/channel/create_test.go,FAB-3946,16761,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,16/May/17 11:04 AM,23/May/17 3:25 PM,26/Apr/18 6:50 AM,23/May/17 3:24 PM,v1.0.0-alpha2,,,,,,DUPLICATE,,,fabric-peer,,,,0,build-system,,,,,,,,"*02:59:05* unit-tests_1  | 2017-05-16 02:59:02.166 UTC [msp] getMspConfig -> INFO 001 intermediate certs folder not found at [/opt/gopath/src/github.com/hyperledger/fabric/sampleconfig/msp/intermediatecerts]. Skipping.: [stat /opt/gopath/src/github.com/hyperledger/fabric/sampleconfig/msp/intermediatecerts: no such file or directory]*02:59:05* unit-tests_1  | 2017-05-16 02:59:02.167 UTC [msp] getMspConfig -> INFO 002 crls folder not found at [/opt/gopath/src/github.com/hyperledger/fabric/sampleconfig/msp/intermediatecerts]. Skipping.: [stat /opt/gopath/src/github.com/hyperledger/fabric/sampleconfig/msp/crls: no such file or directory]*02:59:05* unit-tests_1  | Received error: EOF*02:59:05* unit-tests_1  | Received error: EOF*02:59:05* unit-tests_1  | Error receiving: EOF*02:59:05* unit-tests_1  | Received error: EOF*02:59:05* unit-tests_1  | Received error: EOF*02:59:05* unit-tests_1  | Received error: EOF*02:59:05* unit-tests_1  | Received error: EOF*02:59:05* unit-tests_1  | Received error: EOF*02:59:05* unit-tests_1  | Received error: EOF*02:59:05* unit-tests_1  | Received error: EOF*02:59:05* unit-tests_1  | Received error: EOF*02:59:05* unit-tests_1  | Received error: EOF*02:59:05* unit-tests_1  | Received error: EOF*02:59:05* unit-tests_1  | Received error: EOF*02:59:05* unit-tests_1  | Received error: EOF*02:59:05* unit-tests_1  | 2017/05/16 02:59:05 proto: textWriter unindented too far*02:59:05* unit-tests_1  | Received block:  header:<6:7 0:""\x00"" } 0:4 0:/* unexpected EOF */ >*02:59:05* unit-tests_1  | --- FAIL: TestCreateChainWithTimeoutErr (0.00s)*02:59:05* unit-tests_1  | panic: listen tcp 127.0.0.1:7050: bind: address already in use [recovered]*02:59:05* unit-tests_1  | 	panic: listen tcp 127.0.0.1:7050: bind: address already in use*02:59:05* unit-tests_1  | *02:59:05* unit-tests_1  | goroutine 157 [running]:*02:59:05* unit-tests_1  | panic(0x95a0c0, 0xc4202f34f0)*02:59:05* unit-tests_1  | 	/opt/go/src/runtime/panic.go:500 +0x1a1*02:59:05* unit-tests_1  | testing.tRunner.func1(0xc4203a0d80)*02:59:05* unit-tests_1  | 	/opt/go/src/testing/testing.go:579 +0x25d*02:59:05* unit-tests_1  | panic(0x95a0c0, 0xc4202f34f0)*02:59:05* unit-tests_1  | 	/opt/go/src/runtime/panic.go:458 +0x243*02:59:05* unit-tests_1  | github.com/hyperledger/fabric/peer/channel.newOrderer(0x1b8a, 0xc4203a0d80, 0x0)*02:59:05* unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/peer/channel/create_test.go:53 +0x388*02:59:05* unit-tests_1  | github.com/hyperledger/fabric/peer/channel.TestCreateChainWithTimeoutErr(0xc4203a0d80)*02:59:05* unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/peer/channel/create_test.go:258 +0x19f*02:59:05* unit-tests_1  | testing.tRunner(0xc4203a0d80, 0xa3cf48)*02:59:05* unit-tests_1  | 	/opt/go/src/testing/testing.go:610 +0x81*02:59:05* unit-tests_1  | created by testing.(*T).Run*02:59:05* unit-tests_1  | 	/opt/go/src/testing/testing.go:646 +0x2ec*02:59:05* unit-tests_1  | FAIL	github.com/hyperledger/fabric/peer/channel	3.621s*02:59:05* unit-tests_1  | error: exit status 1*02:59:05* unit-tests_1  | panic: EOF*02:59:05* unit-tests_1  | *02:59:05* unit-tests_1  | goroutine 1 [running]:*02:59:05* unit-tests_1  | panic(0x4daca0, 0xc42000a0f0)*02:59:05* unit-tests_1  | 	/opt/go/src/runtime/panic.go:500 +0x1a1*02:59:05* unit-tests_1  | main.main()*02:59:05* unit-tests_1  | 	/opt/gotools/obj/gopath/src/github.com/AlekSi/gocov-xml/gocov-xml.go:60 +0x15fd*02:59:06* unittest_unit-tests_1 exited with code 2*02:59:06* Stopping couchdb ...",CI,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i010ul:,,,,,,,,AdnanChoudhury,ChristopherFerris,Clayton Sims,,,,,,,,,,,,"19/May/17 6:05 PM;AdnanChoudhury;Have seen the same error multiple times today in gerrit triggered builds, is blocking gerrit verifications.",22/May/17 5:31 PM;Clayton Sims;should we changed fix versions to v1.0.0?,,,,,,,,,,,,,,,,,,,,,,
Chain.getOrganizationUnits() can be confusing,FAB-3944,16759,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,16/May/17 2:54 AM,17/May/17 4:58 PM,26/Apr/18 6:50 AM,17/May/17 4:58 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"This method returns an array of MSP ids. this name overlaps with MSP's organizational unit support which is totally different.

could change to getMSPIds() but to application developer getOrganizations() should be easier to grasp.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i010u5:,,,,,,,,,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Comment for GetStateByPartialCompositeKey in interfaces.go is wrong,FAB-3942,16751,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,vdods,vdods,15/May/17 11:15 PM,05/Jun/17 11:50 AM,26/Apr/18 6:50 AM,05/Jun/17 11:01 AM,v1.0.0-alpha2,,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,,"This bug can be easily resolved by deleting the offending part of the comment for GetStateByPartialCompositeKey in interfaces.go.

 

The comment for GetStateByPartialCompositeKey states

""This function should be used only for a partial composite key. For a full composite key, an iter with empty response would be returned.""

But that is (fortunately) not the case.  Adding the following test to mockstub_test.go proves that the behavior is correct and reasonable.  In particular, a full composite key is still a kind of partial composite key (having all keys specified), and uniquely addresses a single element in the ledger state.
{code:java}
func TestGetStateByPartialCompositeKeyFull(t *testing.T) {
stub := NewMockStub(""GetStateByPartialCompositeKeyFullTest"", nil)
stub.MockTransactionStart(""init"")

marble1 := &Marble{""marble"", ""set-1"", ""red"", 5, ""tom""}
// Convert marble1 to JSON with Color and Name as composite key
compositeKey1, _ := stub.CreateCompositeKey(marble1.ObjectType, []string{marble1.Name, marble1.Color})
marbleJSONBytes1, _ := json.Marshal(marble1)
// Add marble1 JSON to state
stub.PutState(compositeKey1, marbleJSONBytes1)

marble2 := &Marble{""marble"", ""set-1"", ""blue"", 5, ""jerry""}
compositeKey2, _ := stub.CreateCompositeKey(marble2.ObjectType, []string{marble2.Name, marble2.Color})
marbleJSONBytes2, _ := json.Marshal(marble2)
stub.PutState(compositeKey2, marbleJSONBytes2)

marble3 := &Marble{""marble"", ""set-2"", ""red"", 5, ""tom-jerry""}
compositeKey3, _ := stub.CreateCompositeKey(marble3.ObjectType, []string{marble3.Name, marble3.Color})
marbleJSONBytes3, _ := json.Marshal(marble3)
stub.PutState(compositeKey3, marbleJSONBytes3)

stub.MockTransactionEnd(""init"")
// should return in sorted order of attributes
expectKeys := []string{compositeKey2}
expectKeysAttributes := [][]string{{""set-1"", ""blue""}}
expectValues := [][]byte{marbleJSONBytes2}

rqi, _ := stub.GetStateByPartialCompositeKey(""marble"", []string{""set-1"", ""blue""})
fmt.Println(""Running loop"")
for i := 0; i < 1; i++ {
key, value, err := rqi.Next()
fmt.Println(""Loop"", i, ""got"", key, value, err)
if expectKeys[i] != key {
fmt.Println(""Expected key"", expectKeys[i], ""got"", key)
t.FailNow()
}
objectType, attributes, _ := stub.SplitCompositeKey(key)
if objectType != ""marble"" {
fmt.Println(""Expected objectType"", ""marble"", ""got"", objectType)
t.FailNow()
}
fmt.Println(attributes)
for index, attr := range attributes {
if expectKeysAttributes[i][index] != attr {
fmt.Println(""Expected keys attribute"", expectKeysAttributes[index][i], ""got"", attr)
t.FailNow()
}
}
if jsonBytesEqual(expectValues[i], value) != true {
fmt.Println(""Expected value"", expectValues[i], ""got"", value)
t.FailNow()
}
}
}

{code}
(apologies for messed up indentation).

 

Additionally, empty partial composite keys also work as expected.  Here's a test:
{code:java}
func TestGetStateByPartialCompositeKeyEmpty(t *testing.T) {
stub := NewMockStub(""GetStateByPartialCompositeKeyEmptyTest"", nil)
stub.MockTransactionStart(""init"")

marble1 := &Marble{""marble"", ""set-1"", ""red"", 5, ""tom""}
// Convert marble1 to JSON with Color and Name as composite key
compositeKey1, _ := stub.CreateCompositeKey(marble1.ObjectType, []string{marble1.Name, marble1.Color})
marbleJSONBytes1, _ := json.Marshal(marble1)
// Add marble1 JSON to state
stub.PutState(compositeKey1, marbleJSONBytes1)

marble2 := &Marble{""marble"", ""set-1"", ""blue"", 5, ""jerry""}
compositeKey2, _ := stub.CreateCompositeKey(marble2.ObjectType, []string{marble2.Name, marble2.Color})
marbleJSONBytes2, _ := json.Marshal(marble2)
stub.PutState(compositeKey2, marbleJSONBytes2)

marble3 := &Marble{""marble"", ""set-2"", ""red"", 5, ""tom-jerry""}
compositeKey3, _ := stub.CreateCompositeKey(marble3.ObjectType, []string{marble3.Name, marble3.Color})
marbleJSONBytes3, _ := json.Marshal(marble3)
stub.PutState(compositeKey3, marbleJSONBytes3)

stub.MockTransactionEnd(""init"")
// should return in sorted order of attributes
expectKeys := []string{compositeKey2, compositeKey1, compositeKey3}
expectKeysAttributes := [][]string{{""set-1"", ""blue""}, {""set-1"", ""red""}, {""set-2"", ""red""}}
expectValues := [][]byte{marbleJSONBytes2, marbleJSONBytes1, marbleJSONBytes3}

rqi, _ := stub.GetStateByPartialCompositeKey(""marble"", []string{})
fmt.Println(""Running loop"")
for i := 0; i < 3; i++ {
key, value, err := rqi.Next()
fmt.Println(""Loop"", i, ""got"", key, value, err)
if expectKeys[i] != key {
fmt.Println(""Expected key"", expectKeys[i], ""got"", key)
t.FailNow()
}
objectType, attributes, _ := stub.SplitCompositeKey(key)
if objectType != ""marble"" {
fmt.Println(""Expected objectType"", ""marble"", ""got"", objectType)
t.FailNow()
}
fmt.Println(attributes)
for index, attr := range attributes {
if expectKeysAttributes[i][index] != attr {
fmt.Println(""Expected keys attribute"", expectKeysAttributes[index][i], ""got"", attr)
t.FailNow()
}
}
if jsonBytesEqual(expectValues[i], value) != true {
fmt.Println(""Expected value"", expectValues[i], ""got"", value)
t.FailNow()
}
}
}


{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz76:zzzssw,,Sprint 16  - Ledger,,,,,,ChristopherFerris,denyeart,vdods,,,,,,,,,,,,"16/May/17 12:11 PM;ChristopherFerris;[~vdods] thanks for raising this. If you have additional tests and a fix you'd like to submit, they would be most welcomed. [~denyeart] please have a look. Thanks","05/Jun/17 10:48 AM;denyeart;[~Senthil1] I think the comment in question originated from your GetStateByPartialCompositeKey work. Could you comment on the intent of the comment, and whether it can safely be removed?",05/Jun/17 11:01 AM;denyeart;Senthil confirmed that the comment was a temporary limitation which has been resolved.  I will make the update in the broader interfaces.go updates that are coming in FAB-2045.  I'll close this work item as a duplicate of FAB-2045 enhancements.,,,,,,,,,,,,,,,,,,,,,
peer channel create CI failure,FAB-3941,16750,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,15/May/17 8:55 PM,30/Jun/17 4:18 PM,26/Apr/18 6:50 AM,22/May/17 7:52 PM,v1.0.0-alpha2,,,,,,,,,fabric-peer,,,,0,build-system,,,,,,,,"This test was introduced lately (12/5) https://gerrit.hyperledger.org/r/#/c/8059/18/peer/channel/create_test.go
The purpose of the change set was to fix a problem with peer cli when kafka orderer is used as kafka doesn't create the channel ""fast enough"".
These 2 tests that were added both spawn an ordering service mock and my guess is that even though they have a `defer shutdown` for the instance, some stuff weren't cleaned up fast enough.

20:14:49 unit-tests_1  | Received error: EOF
20:14:49 unit-tests_1  | Received error: EOF
20:14:49 unit-tests_1  | Received error: EOF
20:14:49 unit-tests_1  | Received error: EOF
20:14:49 unit-tests_1  | Received error: EOF
20:14:49 unit-tests_1  | Received error: EOF
20:14:49 unit-tests_1  | Received error: EOF
20:14:49 unit-tests_1  | Received error: EOF
20:14:49 unit-tests_1  | Received error: EOF
20:14:49 unit-tests_1  | Received error: EOF
20:14:49 unit-tests_1  | Received error: EOF
20:14:49 unit-tests_1  | Received error: EOF
20:14:49 unit-tests_1  | Received error: EOF
20:14:49 unit-tests_1  | Received error: EOF
20:14:49 unit-tests_1  | 2017/05/15 20:14:49 proto: textWriter unindented too far
20:14:49 unit-tests_1  | Received block:  header:<6:7 0:""\x00"" } 0:4 0:/* unexpected EOF */ >
20:14:49 unit-tests_1  | --- FAIL: TestCreateChainWithTimeoutErr (0.00s)
20:14:49 unit-tests_1  | panic: listen tcp 127.0.0.1:7050: bind: address already in use [recovered]
20:14:49 unit-tests_1  | 	panic: listen tcp 127.0.0.1:7050: bind: address already in use
20:14:49 unit-tests_1  | 
20:14:49 unit-tests_1  | goroutine 167 [running]:
20:14:49 unit-tests_1  | panic(0x95a0c0, 0xc4203993b0)
20:14:49 unit-tests_1  | 	/opt/go/src/runtime/panic.go:500 +0x1a1
20:14:49 unit-tests_1  | testing.tRunner.func1(0xc420097200)
20:14:49 unit-tests_1  | 	/opt/go/src/testing/testing.go:579 +0x25d
20:14:49 unit-tests_1  | panic(0x95a0c0, 0xc4203993b0)
20:14:49 unit-tests_1  | 	/opt/go/src/runtime/panic.go:458 +0x243
20:14:49 unit-tests_1  | github.com/hyperledger/fabric/peer/channel.newOrderer(0x1b8a, 0xc420097200, 0x0)
20:14:49 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/peer/channel/create_test.go:53 +0x388
20:14:49 unit-tests_1  | github.com/hyperledger/fabric/peer/channel.TestCreateChainWithTimeoutErr(0xc420097200)
20:14:49 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/peer/channel/create_test.go:258 +0x19f
20:14:49 unit-tests_1  | testing.tRunner(0xc420097200, 0xa3cf48)
20:14:49 unit-tests_1  | 	/opt/go/src/testing/testing.go:610 +0x81
20:14:49 unit-tests_1  | created by testing.(*T).Run
20:14:49 unit-tests_1  | 	/opt/go/src/testing/testing.go:646 +0x2ec
20:14:49 unit-tests_1  | FAIL	github.com/hyperledger/fabric/peer/channel	3.168s
20:14:49 unit-tests_1  | error: exit status 1
20:14:49 unit-tests_1  | panic: EOF
20:14:49 unit-tests_1  | 
20:14:49 unit-tests_1  | goroutine 1 [running]:
20:14:49 unit-tests_1  | panic(0x4daca0, 0xc42006c020)
20:14:49 unit-tests_1  | 	/opt/go/src/runtime/panic.go:500 +0x1a1",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i010sl:,,Sprint 16 - Gossip,,,,,,yacovm,,,,,,,,,,master,,,true,16/May/17 10:03 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/9397/,18/May/17 2:48 PM;yacovm;OK that didn't fix it... I uploaded a fix that just makes them use different port numbers https://gerrit.hyperledger.org/r/#/c/9527/,,,,,,,,,,,,,,,,,,,,,,
Add UT to CSCC to validate incorrect input,FAB-3926,16734,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,15/May/17 11:53 AM,23/May/17 8:25 PM,26/Apr/18 6:50 AM,23/May/17 8:25 PM,,,,,,,v1.0.0,,,fabric-endorser,,,,0,,,,,,,,,"Currently there is a place in the CSCC, e.g. {{configure.go}} code which validates correctness of input while not being tested with unit-test, hence not covered.

For example:


{code}
	if len(args) < 1 {
		return shim.Error(fmt.Sprintf(""Incorrect number of arguments, %d"", len(args)))
	}
{code}

and 

{code}
		if err = e.policyChecker.CheckPolicyNoChannel(mgmt.Members, sp); err != nil {
			return shim.Error(fmt.Sprintf(""\""GetChannels\"" request failed authorization check: [%s]"", err))
		}
{code}

Additionally there is places with duplicate code such as:

{code}
// joinChain will join the specified chain in the configuration block.
// Since it is the first block, it is the genesis block containing configuration
// for this chain, so we want to update the Chain object with this info
func joinChain(blockBytes []byte) pb.Response {
	if blockBytes == nil {
		return shim.Error(""Genesis block must not be nil."")
	}

	block, err := utils.GetBlockFromBlockBytes(blockBytes)
	if err != nil {
		return shim.Error(fmt.Sprintf(""Failed to reconstruct the genesis block, %s"", err))
	}

	if err = peer.CreateChainFromBlock(block); err != nil {
		return shim.Error(err.Error())
	}

	chainID, err := utils.GetChainIDFromBlock(block)
	if err != nil {
		return shim.Error(fmt.Sprintf(""Failed to get the chain ID from the configuration block, %s"", err))
	}

	peer.InitChain(chainID)

	if err := producer.SendProducerBlockEvent(block); err != nil {
		cnflogger.Errorf(""Error sending block event %s"", err)
	}

	return shim.Success(nil)
}
{code}

and 

{code}
func updateConfigBlock(blockBytes []byte) pb.Response {
	if blockBytes == nil {
		return shim.Error(""Configuration block must not be nil."")
	}
	block, err := utils.GetBlockFromBlockBytes(blockBytes)
	if err != nil {
		return shim.Error(fmt.Sprintf(""Failed to reconstruct the configuration block, %s"", err))
	}
	chainID, err := utils.GetChainIDFromBlock(block)
	if err != nil {
		return shim.Error(fmt.Sprintf(""Failed to get the chain ID from the configuration block, %s"", err))
	}

	if err := peer.SetCurrConfigBlock(block, chainID); err != nil {

		return shim.Error(err.Error())
	}

	return shim.Success(nil)
}
{code}

where code which is repeated and could be extracted into separate function is

{code}
	if blockBytes == nil {
		return shim.Error(""Configuration block must not be nil."")
	}
	block, err := utils.GetBlockFromBlockBytes(blockBytes)
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i010p9:,,Sprint 16  - Endorser,,,,,,C0rWin,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
CSCC remove unused code,FAB-3923,16731,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,15/May/17 10:52 AM,23/May/17 8:24 PM,26/Apr/18 6:50 AM,23/May/17 8:24 PM,,,,,,,v1.0.0,,,fabric-endorser,,,,0,,,,,,,,,"There is a peace of unused code in {{cscc}} package:

 

{code}
func getChannelFromConfigBlock(blockBytes []byte) (string, error) {
	if blockBytes == nil {
		return """", errors.New(""Configuration block must not be nil."")
	}
	block, err := utils.GetBlockFromBlockBytes(blockBytes)
	if err != nil {
		return """", fmt.Errorf(""Failed to reconstruct the configuration block, %s"", err)
	}
	chainID, err := utils.GetChainIDFromBlock(block)
	if err != nil {
		return """", fmt.Errorf(""Failed to get the chain ID from the configuration block, %s"", err)
	}
	return chainID, nil
}
{code}

which is need to be removed, moreover inside {{configure_test.go}}, there is a duplicate code:

{code}
func getChainID(blockBytes []byte) (string, error) {
	block := &common.Block{}
	if err := proto.Unmarshal(blockBytes, block); err != nil {
		return """", err
	}
	envelope := &common.Envelope{}
	if err := proto.Unmarshal(block.Data.Data[0], envelope); err != nil {
		return """", err
	}
	payload := &common.Payload{}
	if err := proto.Unmarshal(envelope.Payload, payload); err != nil {
		return """", err
	}
	chdr, err := utils.UnmarshalChannelHeader(payload.Header.ChannelHeader)
	if err != nil {
		return """", err
	}
	fmt.Printf(""Channel id: %v\n"", chdr.ChannelId)
	return chdr.ChannelId, nil
}
{code}

instead we can simply use utility of 

{code}
utils.GetChainIDFromBlockBytes(blockBytes)
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i010ol:,,Sprint 16  - Endorser,,,,,,C0rWin,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Improve core/scc unit test code coverage,FAB-3922,16729,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,15/May/17 8:25 AM,18/May/17 12:07 PM,26/Apr/18 6:50 AM,18/May/17 12:07 PM,v1.0.0,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,We need to improve the code coverage of  *core/scc* package as it has no tests at all,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i010o5:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
make behave-deps fails,FAB-3917,16724,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,14/May/17 11:28 PM,19/May/17 12:42 PM,26/Apr/18 6:50 AM,19/May/17 12:42 PM,v1.0.0-alpha2,,,,,,v1.0.0,,,fabric-orderer,,,,0,build-system,,,,,,,,"ERROR: .IOError: [Errno 2] No such file or directory: u'./bddtests/environments/orderer/docker-compose.yml'

make: *** [bddtests/environments/orderer] Error 1

 -----

Basically, bddtests/environments/orderer no longer exists and there are new directories:

$ ls bddtests/environments/

kafka orderer-1-kafka-1 orderer-1-kafka-3

 

It isn't at all clear that this build target works as expected even if we were to correctly identify the compose yaml.",MacOSX Sierra,,,7200,7200,,0%,7200,7200,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i010n1:,,,,,,,,ChristopherFerris,,,,,,,,,,master,,,true,16/May/17 12:43 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/9381/,,,,,,,,,,,,,,,,,,,,,,,
Makefile errors,FAB-3910,16717,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,13/May/17 5:09 PM,09/Jun/17 7:12 PM,26/Apr/18 6:50 AM,09/Jun/17 7:12 PM,v1.0.0-alpha1,,,,,,DUPLICATE,,,fabric-build,,,,0,build-system,,,,,,,,There are some defects in the root Makefile for certain of the behave-related targets due to some refactoring and changes in the dependencies needed for running the behave tests.,MacOSX Sierra,,,7200,7200,,0%,7200,7200,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i010lh:,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The documentation source files have errors,FAB-3906,16713,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lehors,lehors,lehors,13/May/17 6:57 AM,06/Jun/17 8:51 PM,26/Apr/18 6:50 AM,06/Jun/17 8:51 PM,,,,,,,v1.0.0,,,fabric-docs,,,,0,Documentation,,,,,,,,"Building the documentation reveals many warnings but more importantly several errors that impact the generated html.
{noformat}
$ cd docs
$ make html >make.log 2>&1
$ grep ERROR make.log
/home/lehors/Documents/Projects/Go/src/github.com/hyperledger/fabric/docs/source/Setup/ca-setup.rst:740: ERROR: Malformed table.
/home/lehors/Documents/Projects/Go/src/github.com/hyperledger/fabric/docs/source/abstract_v1.rst:79: ERROR: Undefined substitution referenced: ""HYPERLEDGERv1.0_ANIMATION"".
/home/lehors/Documents/Projects/Go/src/github.com/hyperledger/fabric/docs/source/getting_started.rst:749: ERROR: Document may not end with a transition.
/home/lehors/Documents/Projects/Go/src/github.com/hyperledger/fabric/docs/source/msp.rst:72: ERROR: Unexpected indentation.
/home/lehors/Documents/Projects/Go/src/github.com/hyperledger/fabric/docs/source/msp.rst:95: ERROR: Unexpected indentation.
/home/lehors/Documents/Projects/Go/src/github.com/hyperledger/fabric/docs/source/msp.rst:273: ERROR: Unexpected indentation.{noformat}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i010kl:,,,,,,,,Clayton Sims,lehors,markparz,,,,,,,,master,,,true,"02/Jun/17 12:46 PM;markparz;Hi [~lehors] what's the gerrit number on this, maybe we can push this to close.","02/Jun/17 1:03 PM;lehors;That would be nice!

[https://gerrit.hyperledger.org/r/#/c/9469/]",05/Jun/17 1:43 PM;markparz;[~ChristopherFerris] [~binhn] [~Clayton Sims] could we get this merged? If it's deemed not import enough (which I'd disagree with) then we should push to v.next.,"05/Jun/17 8:07 PM;Clayton Sims;I added fabric-pr-review channel.    In the future you can use this channel for review requests.

 ",,,,,,,,,,,,,,,,,,,,
update node sdk script to accept npm alpha2 release,FAB-3900,16701,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,12/May/17 4:41 PM,12/May/17 9:17 PM,26/Apr/18 6:50 AM,12/May/17 9:17 PM,,,,,,,v1.0.0,,,fabric-build,,,,0,quality,,,,,,,,"update CI script in fabric-node-sdk merge job to accept npm alpha2 release.. Existing script accepts only ""alpha"" but now this has to update to accept alpha2.

 

 ",,,,60,60,,0%,60,60,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i010i5:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,12/May/17 9:17 PM;rameshthoomu;updated patch and merged,,,,,,,,,,,,,,,,,,,,,,,
orderer for e2e example does not start: no consortiumsConfig,FAB-3894,16685,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,smanolache,smanolache,12/May/17 1:34 PM,19/May/17 12:52 PM,26/Apr/18 6:50 AM,19/May/17 12:52 PM,v1.0.0-alpha2,,,,,,,,,fabric-orderer,,,,0,configuration,,,,,,,,"Git commit id: a39904a310294b7cbd220157178d3c5e1c143e52

I've followed the instructions at [https://hyperledger-fabric.readthedocs.io/en/latest/getting_started.html]

But I use the binaries and dockers that resulted from building from the sources. I don't use the downloaded tools.

The orderer stops almost immediately because it does not succeed to build the system channel. The orderer logs are attached. The orderer.block generated by configtxgen is attached too, as well as its json representation and the docker-compose yaml and orderer.yaml.

I've checked the sources. The error ""No system chain found"" occurs because multiLedger.systemChannelID is empty in NewManagerImpl in orderer/multichain/manager.go. This, in turn, occurs if the execution flow never enters the if-branch of the ledgerResources.ConsortiumsConfig() condition inside the for loop in NewManagerImpl.

From what I could trace, ledgerResources.ConsortiumsConfig() is non-nil only if ChannelConfig.Validate initialises it.

I suppose the cause of the error is that the configtx.yaml of e2e contains no consortia section.

 

 ",,,,,,,,,,,,,,,,,,,,12/May/17 12:54 PM;smanolache;docker-compose-no-tls.yaml;https://jira.hyperledger.org/secure/attachment/10818/docker-compose-no-tls.yaml,12/May/17 12:49 PM;smanolache;orderer.block;https://jira.hyperledger.org/secure/attachment/10820/orderer.block,12/May/17 1:31 PM;smanolache;orderer.block.json;https://jira.hyperledger.org/secure/attachment/10817/orderer.block.json,12/May/17 12:48 PM;smanolache;orderer.log;https://jira.hyperledger.org/secure/attachment/10821/orderer.log,12/May/17 12:53 PM;smanolache;orderer.yaml;https://jira.hyperledger.org/secure/attachment/10819/orderer.yaml,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i010el:,,,,,,,,kchristidis,smanolache,,,,,,,,,,,,,"19/May/17 12:14 PM;kchristidis;Can you upload the `configtx.yaml` file and the path you're getting it from?

 

 ","19/May/17 12:32 PM;kchristidis;If you tried to work with the `configtx.yaml` included in the tarball referenced in the instructions last week, that would fail. The tarball referred to alpha-1, which doesn't have the concept of consortiums.

The master (from which you built your images) does have the concept of consortiums, and examples/e2e_cli/configtx.yaml was updated accordingly all along.

So it's not clear from your description, but my best guess is that you used updated binaries and an outdated configtx.yaml.

Note that since we updated the getting started guide to alpha-2 earlier this week, the tarball that is now referenced in the guide includes a configtx.yaml that does have consortiums so you should be good to go.

If the issue persists, please update with more details.

Otherwise, let's close.",19/May/17 12:43 PM;smanolache;Let's close. It's not examples/e2e_cli but dchackfest/samples/e2e. I've been told on the mailing list that this example is not maintained.,"19/May/17 12:52 PM;kchristidis;Right, that makes sense. Sorry for the confusion.",,,,,,,,,,,,,,,,,,,,
Documentation contains inaccurate information and needs to be cleaned up,FAB-3887,16677,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lehors,lehors,lehors,12/May/17 6:25 AM,17/May/17 2:40 PM,26/Apr/18 6:50 AM,17/May/17 2:40 PM,,,,,,,v1.0.0,,,fabric-docs,,,,0,Documentation,,,,,,,,"For one thing, the doc currently contains the following:

[https://github.com/hyperledger/fabric/blob/master/docs/source/FAQ/usage_FAQ.rst] reads:
{noformat}
The current performance goal for the fabric is to achieve 100,000 transactions per second in a standard production environment of about 15 validating nodes running in close proximity. The team is committed to continuously improving the performance and the scalability of the system.{noformat}
This is used by external parties to set expectations that are quite frankly inappropriate.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i010d9:,,,,,,,,lehors,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
An intermediate CA should not be able specify CN in CSR,FAB-3883,16667,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,skarim,skarim,11/May/17 11:56 PM,24/May/17 1:22 PM,26/Apr/18 6:50 AM,24/May/17 1:22 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"When starting up a CA, in the CSR section a CN can be specified that will be used to generate a self-signed certificate if a root CA. However, when a CA is acting like an intermediate it should not be able to specify CN. An intermediate CA, acting like a client, will enroll with the root CA by providing its enrollment ID and password. The enrollment ID will take place of the CN in the certificate. An error should be thrown if an intermediate CA tries to specify a CN.

*Reproduction:*

1. On intermediate CA, execute the following: fabric-ca-server start -u http://admin:adminpw@localhost:7054 -b admin:adminpw --csr.CN notadmin

No error is thrown",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i010cl:,,Sprint 16 - Membership Service,,,,,,Clayton Sims,skarim,,,,,,,,,master,,,true,22/May/17 2:17 PM;Clayton Sims;The fix version is marked alpha2.   Did this make it into alpha2 or should we change flag to v1.0.0 now?,"22/May/17 2:52 PM;skarim;Didn't make it into alpha2, changed flag accordingly. ",,,,,,,,,,,,,,,,,,,,,,
Move key store out of CryptoSuite,FAB-3881,16664,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,cdaughtr,cdaughtr,cdaughtr,11/May/17 8:50 PM,18/May/17 6:15 PM,26/Apr/18 6:50 AM,18/May/17 6:06 PM,v1.0.0,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"CryptoSuite does not need to include a store when used by Chain.js, so the store should be removed from CryptoSuite and when needed, the application will create a new CryptoKeyStore and set it on the CryptoSuite.

If you want to use the default key store, the app does not need to anything.

To use a special key store, the app will need to create a new CryptoKeyStore using the desired options, set it on the cryptoSuite and include it on the User and Fabric CA Client.  For example:
{code:java}
cryptoSuite = client.newCryptoSuite(setting);
cryptoSuite.setCryptoKeyStore(client.newCryptoKeyStore(KVSImplClass, opts));{code}
Set cryptoSuite on the user:
{code:java}
user.setCryptoSuite(cryptoSuite);{code}
 

Include cryptoSuite parameter on a new FabricCAServices:
{code:java}
return new FabricCAServices(fabricCAEndpoint, tlsOptions, userOrg.ca.name, cryptoSuite);{code}",,,,,,,,,,,,,,FAB-2991,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i010bx:,,,,,,,,cdaughtr,,,,,,,,,,master,,,true,18/May/17 6:06 PM;cdaughtr;https://gerrit.hyperledger.org/r/#/c/9209,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - protobuf definition files are not current with fabric,FAB-3868,16645,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,11/May/17 4:45 PM,15/May/17 8:06 PM,26/Apr/18 6:50 AM,15/May/17 8:06 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,bring up NodeSDK to the latest protobuf definitions,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01085:,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - create and update channel should not be exposed,FAB-3864,16641,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,11/May/17 3:51 PM,11/May/17 5:43 PM,26/Apr/18 6:50 AM,11/May/17 5:43 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"Update the comment lines of Chain and Client to make the full SDK protobuf create and 

update of channels methods not appear on the API list. This will indicate these are internal methods at this time.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01079:,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
getRoles function from Peer class error,FAB-3862,16639,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,cdaughtr,Gerard9494,Gerard9494,11/May/17 3:46 PM,19/May/17 2:16 PM,26/Apr/18 6:50 AM,19/May/17 2:16 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"There is an error at Peer code (hyperledger/fabric-sdk-node/blob/master/fabric-client/lib/Peer.js), concretely at getRoles function (line 144) function, where it tries to return a function when _roles is an attribute.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:r6,,,,,,,,cdaughtr,Gerard9494,,,,,,,,,master,,,true,"18/May/17 6:06 PM;cdaughtr;getRoles needs to be removed from Peer.  So with this issue, I will remove getRoles and several other functions that are no longer applicable to Peer.",,,,,,,,,,,,,,,,,,,,,,,
don't allow Java CC access for alpha2 as its not quite usable yet,FAB-3850,16627,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,muralisr,muralisr,11/May/17 3:03 PM,20/May/17 1:21 PM,26/Apr/18 6:50 AM,12/May/17 2:35 PM,,,,,,,,,,fabric-endorser,,,,1,,,,,,,,,"Java CC has made good progress with https://jira.hyperledger.org/browse/FAB-3218. However its not quite ready yet. Its better to disable it for alpha2 and enable it when its more usable.

The disable will add endorser and CLI checks to error out if accessing java chaincode. We may just prevent install/instantiate of Java CC to make it less invasive.

[~sanchezl]",,,,,,,,,,,,FAB-3040,FAB-4072,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0104l:,,Sprint 16  - Endorser,,,,,,muralisr,sanchezl,troyronda,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Unable to configure Intermediate CA via CLI,FAB-3845,16622,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,skarim,skarim,11/May/17 2:35 PM,19/May/17 7:00 PM,26/Apr/18 6:50 AM,19/May/17 7:00 PM,,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"An intermediate CA acts like a client when contacting the root CA to get it's certificate. There are certain configuration that can be set for an intermediate CA, such as TLS parameters. These parameters are currently missing from the command line and prevent users from correctly configuring an intermediate CA from the command line. 

*Reproduction:*
 # Enable TLS on Root CA
 # Start an Intermediate CA using 'https' ([https://localhost:7054)|https://localhost:7054)/] as the protocol to connect to secure socket on Root CA. This will fail as TLS was not configured for intermediate CA. A flag similar to --intermediate.tls.certfiles is missing from the command line

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i0103h:,,Sprint 16 - Membership Service,,,,,,skarim,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Gossip TestCertExpiration,FAB-3841,16617,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,gennadyl,gennadyl,gennadyl,11/May/17 11:09 AM,06/Jun/17 10:38 AM,26/Apr/18 6:50 AM,06/Jun/17 10:38 AM,,,,,,,v1.0.0,,,fabric-gossip,,,,0,gossip,,,,,,,,,"go test -v github.com/hyperledger/fabric/gossip/gossip/ -run ^TestCertExpiration$

Log attached",,,,,,,,,,,,,,,,,,,11/May/17 11:09 AM;gennadyl;test_exp_64.out;https://jira.hyperledger.org/secure/attachment/10814/test_exp_64.out,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i0102d:,,Sprint 16 - Gossip,,,,,,gennadyl,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Join Channel is failed due to Admin CheckPolicyNoChannel,FAB-3840,16616,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,ShDavidliu,ShDavidliu,11/May/17 10:40 AM,24/May/17 8:12 AM,26/Apr/18 6:50 AM,24/May/17 8:11 AM,,,,,,,,,,fabric-crypto,,,,0,,,,,,,,,"Fabric Commit Level:  e182390035ec207535c7ba0f5df70dc702057e18

examples/e2e_cli, after channel is created successfully, when we want to use command line to join channel failed:

Error: proposal failed (err: rpc error: code = 2 desc = ""JoinChain"" request failed authorization check for channel [mychannel]: [Failed verifying that proposal's creator satisfies local MSP principal during channelless check policy with policy [Admins}: [This identity is not an admin]])",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz4r:zi,,,,,,,,angelo.decaro,ShDavidliu,,,,,,,,,,,,,"12/May/17 7:48 AM;angelo.decaro;Hi David, that is the expected behavior. Only an administrator of a peer can ask it to join a channel. You need to use the right credentials then when generating the request. 
May you give more details on which actions you are actually performing?","18/May/17 2:24 AM;ShDavidliu;When we try to execute the scripts in $hyperledger/fabric/examples/e2e_cli/examples (See below commit level ), it shows this panic
 
||Project||Commit level||Date||
|fabric|e182390035ec207535c7ba0f5df70dc702057e18|May 8 14:42:36 2017 +0000|
|fabric-ca|73a42156f637702b2ac8d4ceae0d663c4c688ed4|May 7 09:43:08 2017 +0000|
  
   In addition, If we want to make the normal manual command process: create channel then join channel, it shows the same error during joining channel.","23/May/17 1:51 PM;angelo.decaro;[~ShDavidliu], please, may you give me the list of commands that I have to run in order to reproduce the same issue. Thanks :)","24/May/17 8:12 AM;ShDavidliu;This isssue is resolved in alpha2 version, so close it.",,,,,,,,,,,,,,,,,,,,
End2endJavaChaincodeIT constructChain bug,FAB-3838,16610,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mcdulltan,mcdulltan,mcdulltan,11/May/17 5:28 AM,11/May/17 11:12 AM,26/Apr/18 6:50 AM,11/May/17 11:07 AM,,,,,,,WON'T FIX,,,fabric-sdk-java,,,,0,java-SDK,,,,,,,,"when I run the the junit test  of  the End2endJavaChaincodeIT.java,I met the  error below:

org.hyperledger.fabric.sdk.exception.InvalidArgumentException: CryptoPrimitives value in chain testchainid can not be null
Caught an exception
 at org.hyperledger.fabric.sdk.Chain.<init>(Chain.java:317)
 at org.hyperledger.fabric.sdk.Chain.<init>(Chain.java:286)
 at org.hyperledger.fabric.sdk.Chain.createNewInstance(Chain.java:1189)
 at org.hyperledger.fabric.sdk.HFClient.newChain(HFClient.java:105)",,,,57600,57600,,0%,57600,57600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i01011:,,,,,,,,mcdulltan,rickr,,,,,,,,,,,,,"11/May/17 11:06 AM;rickr;End2endJavaChaincodeIT.java,  is not running at the moment. Please see the README.md on how to run the integration tests.

I plan on removing that shortly",11/May/17 11:12 AM;mcdulltan;[~rickr] Thanks a lot！I will try again:D,,,,,,,,,,,,,,,,,,,,,,
"PKCS11 Race condition, CKA_OPERATION_ACTIVE",FAB-3837,16609,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,vpaprots,vpaprots,11/May/17 2:44 AM,08/Jan/18 9:37 PM,26/Apr/18 6:50 AM,08/Jan/18 9:37 PM,,,,,,,v1.1,,,fabric-crypto,,,,0,HSM,,,,,,,,"When running [https://gerrit.hyperledger.org/r/#/c/7927/13] `./regenNetwork -hsm` intermittently a single peer crashes with CKA_OPERATION_ACTIVE on a session.

This could be expected behaviour with the way the E2E test is written: `peer cli` reuses existing credentials. Questions remaining:
 * where is the other active operation,
 ** same executable? could be chan caching code in pkcs11.go
 ** cli executable? try using a separate user, like User1 for CLI. Is this softhsm specific",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:rhw9oa9,,,,,,,,Clayton Sims,denyeart,elli-androulaki,vpaprots,,,,,,,,,,,02/Jun/17 6:57 PM;Clayton Sims;Assigning to Vlad....yell if you disagree.,"02/Jun/17 8:45 PM;vpaprots;Propose we move this to v1.1. There is no checked-in test case that is broken by this. The E2E-HSM (https://gerrit.hyperledger.org/r/#/c/7927/13) will not be delivered because of FAB-3196.

I have not seen this with the real cards.","01/Sep/17 7:25 AM;elli-androulaki;Hi [~vpaprots], is this still aiming for v1.1?",27/Nov/17 3:14 AM;denyeart;[~vpaprots] Do you have an update?,"05/Jan/18 1:58 PM;elli-androulaki;[~vpaprots], [~vpaprots@ca.ibm.com] (not sure which identity is the correct one), any updates on this? :)","08/Jan/18 9:37 PM;vpaprots;I haven't seen this one again, so closing.",,,,,,,,,,,,,,,,,,
"API cleanup: eliminate ""storekey"" param in CryptoSuite -> importKey()",FAB-3829,16601,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,cdaughtr,jimthematrix,jimthematrix,10/May/17 8:44 PM,22/May/17 6:59 PM,26/Apr/18 6:50 AM,22/May/17 6:59 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"this param is extraneous because the ""opts"" param already has the ""ephemeral"" that means the same thing",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00zz1:,,,,,,,,,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Failed to start server using RSA key and certificate,FAB-3828,16600,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,vpaprots,skarim,skarim,10/May/17 8:40 PM,20/May/17 2:15 AM,26/Apr/18 6:50 AM,20/May/17 2:15 AM,v1.0.0,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"1. Server fails to start if an RSA key and certificate are provided to the fabric-ca server.

The following errors are seen:
Error: Could not find the private key in BCCSP keystore nor in keyfile rsa-key.pem: Failed to import RSA key from rsa-key.pem; RSA private key import is not supported

*Reproduction steps:*
1. Make sure that you don't have an existing certificate or key file that server has used. Clean up keystore and any certificate.
2. Run the following command: 
fabric-ca-server start --ca.certfile testdata/rsa.pem --ca.keyfile testdata/rsa-key.pem -d -b a:b

The rsa.pem and rsa-key.pem are under the fabric-ca/testdata directory 

2. Server ends up overriding an exisiting certifcate file and create a new key. Using an PKCS8 version of the an rsa key with and rsa certificate, caused the fabric-ca server to override the exisiting rsa certificate and create a new key in the key store.

*Reproduction steps:*
1. Run the following command:
fabric-ca-server start --ca.certfile testdata/rsa.pem --ca.keyfile testdata/rsa-key.pcks8.pem -d -b a:b

rsa-key.pcks8.pem is attached to this work item",,,,,,,,,,,,,,,,,,,,10/May/17 8:41 PM;skarim;rsa-key.pkcs8.pem;https://jira.hyperledger.org/secure/attachment/10811/rsa-key.pkcs8.pem,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00zyt:,,,,,,,,skarim,smithbk,vpaprots,,,,,,,,,,,,"17/May/17 9:41 PM;smithbk;Vlad, I believe I fixed this earlier today in https://gerrit.hyperledger.org/r/#/c/9453/","20/May/17 2:14 AM;vpaprots;Just for history's sake, regarding above comment. We traced this with Keith, CA will fail to start with an explicit RSA key. As a workaround, if somebody ablsolutely needs it, I believe one can stick RSA pem key into BCCSP keystore,

 

It was agreed by Keith and Gari not to pursue more RSA support work. If it is to be resurected, see:

[https://gerrit.hyperledger.org/r/#/c/9437/]

[https://gerrit.hyperledger.org/r/#/c/9433/]",,,,,,,,,,,,,,,,,,,,,,
Default TLS unable to find key for TLS handshake,FAB-3827,16599,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,vpaprots@ca.ibm.com,skarim,skarim,10/May/17 8:30 PM,26/May/17 12:34 PM,26/Apr/18 6:50 AM,26/May/17 12:34 PM,,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"If TLS is enabled on fabric-ca server, but no TLS certificate and key is provided the default behavior is to use the CA certificate and key that were used to start the server for TLS purposes. 

With BCCSP in place, the key gets stored in a keystore and a function call is made by passing in the cert file that looks up and returns the key. However, BCCSP imposes restrictions so that they information of the key is not exposed to the caller. This makes it difficult to initialize TLS as TLS require a key pair to be load, which will get used for the handshake.

Currently using default TLS behavior is currently broken. BCCSP needs to be extended to call TLS within to allow for TLS initialization. 

Reproduction steps:
1. Run the following command: *fabric-ca-server start -d -b a:b --tls.enabled*

The following error will be seen:
Error: open .../src/github.com/hyperledger/fabric-ca/cmd/fabric-ca-server/ca-key.pem: no such file or directory",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00zyl:,,,,,,,,skarim,smithbk,,,,,,,,,master,,,true,26/May/17 1:55 AM;smithbk;https://gerrit.hyperledger.org/r/#/c/9235/,,,,,,,,,,,,,,,,,,,,,,,
peer chaincode instantiate fails ,FAB-3765,16535,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,bhaskerchatterjee,bhaskerchatterjee,bhaskerchatterjee,10/May/17 12:26 PM,07/Jun/17 1:14 PM,26/Apr/18 6:50 AM,07/Jun/17 1:14 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"I am using vagrant environment. I did following:

Terminal1: orderer

Terminal2: peer node start -o 127.0.0.1:7050 --peer-chaincodedev=true --peer-defaultchain=false

Terminal3: peer chaincode install -o 127.0.0.1:7050 -n mycc -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02

Terminal3: peer chaincode instantiate -o 127.0.0.1:7050 -n mycc -v 1.0 -c '\{""Args"":[""init"",""a"", ""100"", ""b"",""200""]}'

 

There it fails with 'Error: Error endorsing chaincode: rpc error: code = 2 desc = Failed to init chaincode(handler not found for chaincode mycc:1.0)'

 

Am I missing something?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00zl9:,,,,,,,,bhaskerchatterjee,muralisr,Ratnakar,scottz,wlahti,,,,,,,,,,"31/May/17 2:53 PM;wlahti;[~bhaskerchatterjee] I just pulled the latest code from master and attempted to reproduce this issue following your steps.

 

I hit a different issue related to the MSP but I think it's a configuration problem and not a code problem: 
{code:java}
Error: Error endorsing chaincode: rpc error: code = 2 desc = Failed to deserialize creator identity, err MSP DEFAULT is unknown{code}
 

Can you pull the latest and see if you're still hitting the ""handler not found"" error?",01/Jun/17 10:41 PM;muralisr;[~bhaskerchatterjee] with  --peer-chaincodedev=true you have to do an additional step of starting the chaincode yourself. This is described in docs/source/peer-chaincode-devmode.rst.,"04/Jun/17 3:43 PM;scottz;Bapi, can you retry with alpha2 or later? Please provide exact steps you followed when producing an error.","04/Jun/17 4:03 PM;muralisr;[~bhaskerchatterjee] you'll also need to change the fabric/sampleconfig/orderer.yaml to change the GenesisProfile parameter to

{code:java}
GenesisProfile: SampleSingleMSPSolo
{code}

There are two doc issues with docs/source/peer-chaincode-devmode.rst.
* change GenesisProfile in sampleconfig/orderer.yaml to GenesisProfile: SampleSingleMSPSolo
* configtxgen -channelID ch1 -outputCreateChannelTx ch1.tx -profile SampleSingleMSPChannel configtxgen -channelID ch2 -outputCreateChannelTx ch2.tx -profile SampleSingleMSPChannel 
** should be two lines

[~Ratnakar] sounds like similar to what you ran into ?
","04/Jun/17 7:30 PM;Ratnakar;[~bhaskerchatterjee]

Discussed with [~muralisr] . following steps are working for me. Please try these steps and let us know.

Tested in Vagrant env

*Terminal-1*
{code:java}
ORDERER_GENERAL_GENESISPROFILE=SampleSingleMSPSolo orderer{code}
*Terminal-2*
{code:java}
peer node start -o 127.0.0.1:7050 --peer-chaincodedev=true{code}
*Terminal-3:*
{code:java}
cd $GOPATH/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02
go build
CORE_CHAINCODE_LOGLEVEL=debug CORE_PEER_ADDRESS=127.0.0.1:7051 CORE_CHAINCODE_ID_NAME=mycc:0 
./chaincode_example02
{code}

*Terminal-4*

create channel configuration transaction with default settings and the profile *SampleSingleMSPChannel*

 
{code:java}
configtxgen -channelID myc -outputCreateChannelTx myc.tx -profile SampleSingleMSPChannel
peer channel create -o 127.0.0.1:7050 -c myc -f myc.tx
peer channel join -b myc.block
{code}
 

+_Install and instantiate chaincode example02_+

 
{code:java}
peer chaincode install -n mycc -v 0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02
peer chaincode instantiate -n mycc -v 0 -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}' -o 127.0.0.1:7050 -C myc
{code}
_+send a transactoin and verify the result with a query+_

 
{code:java}
peer chaincode invoke -n mycc -c '{""Args"":[""invoke"",""a"",""b"",""10""]}' -o 127.0.0.1:7050 -C myc
peer chaincode query -n mycc -c '{""Args"":[""query"",""a""]}' -o 127.0.0.1:7050 -C myc
{code}
 ","04/Jun/17 7:50 PM;Ratnakar;[~nickgaski] Could you please help to update the document [http://hyperledger-fabric.readthedocs.io/en/latest/peer-chaincode-devmode.html]

Below two points needs to be take care.


1) when default settings are used orderer uses *SampleInsecureSolo* as the GenesisProfile instead override the same with *SampleSingleMSPSolo*.
 Start the orderer with GenesisProfile as follows
{code:java}
ORDERER_GENERAL_GENESISPROFILE=SampleSingleMSPSolo orderer{code}

2) Split the lines from the section *Create channels ch1 and ch2 ,* http://hyperledger-fabric.latest.readthedocs/io/en/peer-chaincode-devmode.html#create-channels-ch1-and-ch2

 
{code:java}
configtxgen -channelID ch1 -outputCreateChannelTx ch1.tx -profile SampleSingleMSPChannel 
configtxgen -channelID ch2 -outputCreateChannelTx ch2.tx -profile SampleSingleMSPChannel 
{code}
 ",05/Jun/17 3:03 PM;Ratnakar;[~bhaskerchatterjee] Can you re verify on fabric latest code using the instructions updated above.,"07/Jun/17 6:42 AM;bhaskerchatterjee;Ratnakar Asara,

 

Yes, it is working fine now. Thanks. However, there is an issue that I need to resolve while following these step: this does not create an active container (checking by docker ps), which I can see the logs of. I guess I am missing something to modify in the yaml files in sampleconfig folder, however, am not able to figure that out. I would really appreciate any clue on the same. Thanks.

 ","07/Jun/17 12:29 PM;muralisr;[~bhaskerchatterjee]  Containers are created by the peer to start the chaincode when NOT running in --peer-chaincodedev mode. The whole point of --peer-chaincodedev=true is that the developer starts the chaincode and attaches to the peer (the ""Terminal-3"" steps in the comment). basically, chaincode  containers won't be created in --peer-chaincodedev mode.
","07/Jun/17 12:40 PM;bhaskerchatterjee;Hi [~muralisr] , yes I realized that - as mentioned here [http://hyperledger-fabric.readthedocs.io/en/latest/Setup/Chaincode-setup.html?highlight=container%20chaincodedev|http://hyperledger-fabric.readthedocs.io/en/latest/Setup/Chaincode-setup.html?highlight=container%20chaincodedev.] . Actually, my purpose is to look for the contents in the statedb/historydb . I could use docker logs to read the logs in the containers to view that simply, thought to do the same in devmode as well; my mistake. I can see .ldb files in the folders /var/hyperledger/production/ledgersData/stateLeveldb/ /var/hyperledger/production/ledgersData/historyLeveldb/ . Could you suggest some way out to browse these dbs? ","07/Jun/17 12:53 PM;muralisr;[~bhaskerchatterjee] Perhaps you could use the GetHistoryForKey chaincode api  ?

{code:java}
        // GetHistoryForKey function can be invoked by a chaincode to return a history of
        // key values across time. GetHistoryForKey is intended to be used for read-only queries.
        GetHistoryForKey(key string) (HistoryQueryIteratorInterface, error)
{code}

There may be other ways to access the historydb. Best to use the fabric-ledger Rocket Chat for that. 

Can you close this JIRA if your original issues are resolved please ?",07/Jun/17 1:13 PM;bhaskerchatterjee;Thanks [~muralisr] !,,,,,,,,,,,,
Comments are misplaced in ledger_interface,FAB-3764,16534,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,10/May/17 11:24 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,10/May/17 5:22 PM,,,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,,"The comments for function are {color:#aaaaaa}NewTxSimulator(){color} misplaced.{color:#aaaaaa}
{color}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz76:zzzs8,,Sprint 16  - Ledger,,,,,,manish-sethi,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Incorrect error message when missing TLS cert files,FAB-3759,16510,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,smithbk,smithbk,09/May/17 6:40 PM,27/May/17 6:06 AM,26/Apr/18 6:50 AM,27/May/17 6:06 AM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-ca,,,,1,,,,,,,,,"In fabric-ca/lib/tls/tls.go, see the following:

        if len(cfg.CertFiles) == 0 \{
                return nil, errors.New(""No CA certificate files provided"")
        }

The message should be ""No TLS certificate files were provided""

This error occurs when starting an intermediate CA as follows:

    fabric-ca-server start -b a:b -c int/config.yaml -u [https://a:b@localhost:7055|https://a:b@localhost:7055/]

This is because ""https"" is used but the client TLS cert file option wasn't specified and was not in the config file.  In this case and probably other places in the client, it would be good to also return a more user-friendly error message telling them which arg to specify.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00zj1:,,,,,,,,ChristopherFerris,dhwang,smithbk,,,,,,,,master,,,true,"11/May/17 1:37 PM;dhwang;I think TLS configuration for MariaDB is somehow messed up by the CA configuration for intermediate CA.    My db configuration is the following:

 
{code:java}
db:
  type: mysql
  datasource: 'root:password@tcp(mariadb:3306)/fabricca?parseTime=true&tls=skip-verify'
  tls:
    enabled: true
    certfiles: /etc/hyperledger/fabric-ca-server-tls/server-cert.pem
    certfileslist: [/etc/hyperledger/fabric-ca-server-tls/server-cert.pem]
    ca_certfiles: /etc/hyperledger/fabric-ca-server-tls/ca-cert.pem
    client:
    certfile: /etc/hyperledger/fabric-ca-server-tls/client-cert.pem
keyfile: /etc/hyperledger/fabric-ca-server-tls/client-key.pem
{code}
---------------------------------------------------------------------------------------------

Test #1:  Without  either ""client:""   or ""ca:"" specified in my yaml file: I start int ca with:
fabric-ca-server start -c /etc/hyperledger/fabric-ca/int-ca.yaml -b admin:password --url [https://admin:password@root_ca_ip:7054|https://admin:password@root_ca_ip:7054/]

I got the following error:

2017/05/11 13:30:23 [INFO] TLS Enabled
2017/05/11 13:30:23 [DEBUG] CA Files:
2017/05/11 13:30:23 [DEBUG] Client Cert File:
2017/05/11 13:30:23 [DEBUG] Client Key File:
2017/05/11 13:30:23 [DEBUG] Client Cert or Key not provided, if server requires mutual TLS, the connection will fail: open : no such file or directory
Error: Failed to initialize CA: Failed to get client TLS config: No CA certificate files provided

----------------------------------------------------------------------------------------------------

Test # 2:  Adding just ""ca:"" and start int ca with the same command as #1
{code:java}
ca:
  certfile: certificate.pem
  keyfile: key.pem
{code}
I got the following error:  Notice the database name and the user in the url is incorrect in the DEBUG message.

2017/05/11 13:31:25 [DEBUG] Using MySQL database, connecting to database...
2017/05/11 13:31:25 [DEBUG] Database Name: etc
2017/05/11 13:31:25 [DEBUG] CA Files: /etc/hyperledger/fabric-ca-server-tls/server-cert.pem
2017/05/11 13:31:25 [DEBUG] Client Cert File: /etc/hyperledger/fabric-ca-server-tls/client-cert.pem
2017/05/11 13:31:25 [DEBUG] Client Key File: /etc/hyperledger/fabric-ca-server-tls/client-key.pem
2017/05/11 13:31:25 [DEBUG] Connection String: ///-ca/:mypass@tcp(mariadb:3306)/?parseTime=true&tls=skip-verify
2017/05/11 13:31:25 [ERROR] Failed to connect to MySQL database [error: Error 1045: Access denied for user '///-ca/'@'172.18.0.3' (using password: YES)]
Error: Failed to query 'INFORMATION_SCHEMA.SCHEMATA table: Error 1045: Access denied for user '///-ca/'@'172.18.0.3' (using password: YES)",27/May/17 6:05 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/9859/,,,,,,,,,,,,,,,,,,,,,,
Gossip: Add remote peer endpoint to ConnectionInfo,FAB-3755,16506,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,09/May/17 4:59 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,10/May/17 12:11 PM,v1.0.0,,,,,,v1.0.0,,,fabric-gossip,,,,0,Serviceability,,,,,,,,"In gossip we have the following struct that can be extracted from a point-to-point message
{code:java}
type ConnectionInfo struct {
    ID       common.PKIidType
    Auth     *AuthInfo
    Identity api.PeerIdentityType
}{code}
In the logs we write the ID of the peer but it's a byte slice, and doesn't tell much about the peer.

 

On the other hand, when a remote peer connects to a peer, we [extract its endpoint|https://github.com/hyperledger/fabric/blob/master/gossip/comm/comm_impl.go#L418] anyway.

 

It'd be beneficial to add this to the ConnectionInfo so we can log it.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00zid:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Add new role to BDD to account for recent instantiation policy changes in peer,FAB-3750,16501,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jeffgarratt,jeffgarratt,jeffgarratt,09/May/17 3:44 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,10/May/17 1:31 AM,,,,,,,,,,,,,,0,quality,,,,,,,,,,,,,,,,,,,,FAB-3751,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1141,0|i00zh9:,,,,,,,,jeffgarratt,,,,,,,,,,master,,,true,"09/May/17 3:56 PM;jeffgarratt;Current instantiation proposal as signed by the dev0Org0 is being rejected by peer with failure...

~ chaincode instantiation policy violated(Failed to authenticate policy)

 

Requires the MSP admin as defined by the channel config block.  Going to create a new role of mspAdmin for each organization, and they will subsequently perform the instantiate operations (proposal and TX).","09/May/17 7:56 PM;jeffgarratt;[~binhn] [~kchristidis] [~muralisr]

 

pushed CR [https://gerrit.hyperledger.org/r/#/c/9153/]

 

This addresses this issue.",,,,,,,,,,,,,,,,,,,,,,
not able to join the channel,FAB-3747,16498,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rohitjana,rohitjana,rohitjana,09/May/17 2:30 PM,12/Jun/17 12:05 PM,26/Apr/18 6:50 AM,12/Jun/17 12:05 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"When I try to start up the container using the script (provided in the getting started document)

CHANNEL_NAME=<CHANNEL_NAME> docker-compose -f docker-compose-no-tls.yaml up

 

I see following error:

 

 

peer1.org2.example.com | main.main()
orderer.example.com | main.main()
cli | CORE_PEER_ID=cli
peer1.org2.example.com | /opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:107 +0x67a
orderer.example.com | /opt/gopath/src/github.com/hyperledger/fabric/orderer/main.go:128 +0x1f17
cli | CORE_LOGGING_LEVEL=DEBUG
cli | CORE_PEER_GOSSIP_IGNORESECURITY=true
cli | CORE_PEER_ADDRESS=peer0.org1.example.com:7051
cli | CORE_PEER_ENDORSER_ENABLED=true
cli | panic: Fatal error when setting up MSP from directory /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com: err Could not load a valid signer certificate from directory /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/signcerts, err Could not read directory open /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/signcerts: no such file or directory, err /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/signcerts
cli |
cli |
cli | goroutine 1 [running]:
cli | panic(0xbe1b00, 0xc4201cd080)
cli | /opt/go/src/runtime/panic.go:500 +0x1a1
cli | main.main()
peer0.org1.example.com exited with code 2
cli | /opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:107 +0x67a
cli | !!!!!!!!!!!!!!! Channel creation failed !!!!!!!!!!!!!!!!
cli | ================== ERROR !!! FAILED to execute End-2-End Scenario ==================
cli |
peer1.org2.example.com exited with code 2
peer1.org1.example.com exited with code 2
peer0.org2.example.com exited with code 2
orderer.example.com exited with code 2

 

 

Please help to resolve this!!

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00zgt:,,,,,,,,muralisr,rohitjana,scottz,,,,,,,,,,,,01/Jun/17 10:36 PM;muralisr;[~rohitjana] can you try alpha2 and see if this problem can be recreated please ?,04/Jun/17 4:08 PM;scottz;And provide exact steps you used to create the problem.,"07/Jun/17 12:21 PM;muralisr;[~rohitjana] any update on this please ? If you have no updates, will assume its working with latest and close this by 9 June. ",12/Jun/17 12:05 PM;muralisr;[~rohitjana] closing this per previous comment. Do reopen or create a new JIRA if you are still having problems.,,,,,,,,,,,,,,,,,,,,
Pull mechanism should only pull from peers in the same org,FAB-3744,16495,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,09/May/17 1:03 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,10/May/17 9:45 AM,v1.0.0,,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,,"Currently, the pull mechanism works with peers from any orgs that are eligible of being in the channel.

This has the following problem:

If in a certain channel there are 2 orgs: \{A, B} and a peer from orgB initiates a pull with a peer from orgA and as a result, the peer from orgA sends the peer from orgB blocks with sequences [n... n+k] it has received from either the ordering service or from peers in its own org, it is not safe because a block i in [n.. n+k] can be a configuration block that evicts orgB from the channel, and as a result - orgB would receive blocks it isn't eligible of receiving.

 

This problem doesn't exist in the state transfer because we only send blocks that were committed into the ledger before and therefore processed and updated the MSP and then if the peer that requests the block is not eligible to the channel, the MSP of the peer as been updated before the state transfer request is serviced.

 

The fix of this issue is very simple:

1)

The channel pull adapter uses the following struct to select the peers to pull blocks from:
{code:java}
type membershipFilter struct {
    adapter Adapter
    *gossipChannel
}

// GetMembership returns the known alive peers and their information
func (mf *membershipFilter) GetMembership() []discovery.NetworkMember {
    var members []discovery.NetworkMember
    for _, mem := range mf.adapter.GetMembership() {
       // here we need to add a check of the peer's org
        if mf.EligibleForChannel(mem) {
            members = append(members, mem)
        }
    }
    return members
}{code}
We just need to add a filtering that also ensures the selected remote peer is from the peer's org.

 

2) When the channel code receives a pull message we would also need to filter out if the remote peer is from a different org.
{code:java}
    if m.IsPullMsg() && m.GetPullMsgType() == proto.PullMsgType_BLOCK_MSG {
        if !gc.EligibleForChannel(discovery.NetworkMember{PKIid: msg.GetConnectionInfo().ID}) {
            // here we need to add a check of the peer's org
            gc.logger.Warning(msg.GetConnectionInfo().ID, ""isn't eligible for channel"", string(gc.chainID))
            return
        }{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00zg5:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Change default private key format to PKCS#8,FAB-3743,16494,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,baohua,baohua,baohua,09/May/17 12:00 PM,04/Jun/17 12:59 AM,26/Apr/18 6:50 AM,03/Jun/17 9:02 AM,v1.0.0-alpha2,,,,,,v1.0.0-beta,,,fabric-ca,,,,0,MembershipServices,,,,,,,,"Existing private key is using the old PKCS#1 format, need to change to PKCS#8 format to avoid confusing.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00zfx:,,,,,,,,baohua,JonathanLevi,,,,,,,,,master,,,true,09/May/17 12:04 PM;baohua;https://gerrit.hyperledger.org/r/#/c/9121/,"03/Jun/17 6:18 PM;JonathanLevi;Just to clarify (yesterday I have approved the CR from my mobile), this +{color:#ff0000}needed{color}+ fixing not just because PKCS#8 is less confusing... we could not have used PKCS#1 (which was made for RSA keys), for EC. See: [https://gerrit.hyperledger.org/r/#/c/9121/1/images/fabric-ca/payload/ca-key.pem]

While reading and parsing the PKCS#8 is a bit slower (not that the bottleneck here is reading the private key) - it is the correct way in this case.

As I wrote before approving, I hope this is well tested... otherwise we should add tests for this.","04/Jun/17 12:59 AM;baohua;[~JonathanLevi]

Sure, the key was used in the e2e test cases, also the sdk-py project.

So if we do not break existing ones, then it will be fine.

We will add more test cases in the sdk-py project, too.",,,,,,,,,,,,,,,,,,,,,
Wrong log message (Invalid log level provided) are found,FAB-3741,16492,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,amber-zhang,amber-zhang,amber-zhang,09/May/17 8:11 AM,10/May/17 1:53 PM,26/Apr/18 6:50 AM,10/May/17 1:53 PM,,,,,,,,,,,,,,0,,,,,,,,,"Hi Will,

Blow is the wrong message that I found from peer log.

 

 

[33m2017-05-08 02:55:29.037 UTC [nodeCmd] serve -> WARN 193^[[0m Error setting log level for module 'cauthdsl': LOG:400 - Invalid log level provided -

^[[33m2017-05-08 02:55:29.037 UTC [nodeCmd] serve -> WARN 194^[[0m Error setting log level for module 'policies': LOG:400 - Invalid log level provided -

 

[33m2017-05-08 02:55:29.038 UTC [nodeCmd] serve -> WARN 195^[[0m Error setting log level for module 'grpc': LOG:400 - Invalid log level provided -

 

[33m2017-05-08 02:55:28.966 UTC [nodeCmd] registerChaincodeSupport -> WARN 01e^[[0m Invalid chaincode startup timeout value 0s (should be at least 5s); defaulting to 5s

[31m2017-05-08 02:55:28.967 UTC [chaincode] NewChaincodeSupport -> ERRO 021^[[0m Invalid execute timeout value 0s (should be at least 1s); defaulting to 30s
 ^[[33m2017-05-08 02:55:28.968 UTC [chaincode] getLogLevelFromViper -> WARN 022^[[0m CORE_CHAINCODE_LEVEL has invalid log level . defaulting to INFO",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00zfh:,,,,,,,,amber-zhang,wlahti,,,,,,,,,,,,,"09/May/17 12:09 PM;wlahti;Did you completely rebuild your environment? I've seen this happen when a new core.yaml parameter is introduced and the peer/testenv docker images haven't been rebuilt. I suggest running ""make clean"" followed by ""make docker"" each time you are running your tests with newly pulled code to be sure everything has been updated/rebuilt. ","10/May/17 11:34 AM;amber-zhang;Will, you're right! The error message disappear after cleaned and rebuild. Thank you!",,,,,,,,,,,,,,,,,,,,,,
Using dev mode does not work,FAB-3740,16491,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,bhaskerchatterjee,bhaskerchatterjee,09/May/17 6:53 AM,10/Jun/17 8:04 PM,26/Apr/18 6:50 AM,10/Jun/17 8:04 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-tools,,,,0,configtxgen,,,,,,,,"Having done a `make dist-clean all`, I followed the steps as mentioned here [http://hyperledger-fabric.readthedocs.io/en/latest/peer-chaincode-devmode.html] . However, on `peer channel create -o 127.0.0.1:7050 -c ch1 -f ch1.tx`, I get following error
{noformat}
[msp] getMspConfig -> INFO 001 intermidiate certs folder not found at [/opt/gopath/src/github.com/hyperledger/fabric/sampleconfig/msp/intermediatecerts]. Skipping.: [stat /opt/gopath/src/github.com/hyperledger/fabric/sampleconfig/msp/intermediatecerts: no such file or directory]

[msp] getMspConfig -> INFO 002 crls folder not found at [/opt/gopath/src/github.com/hyperledger/fabric/sampleconfig/msp/intermediatecerts]. Skipping.: [stat /opt/gopath/src/github.com/hyperledger/fabric/sampleconfig/msp/crls: no such file or directory]
Error: Got unexpected status: BAD_REQUEST
{noformat}
.

 My platform is Vagrant on Ubuntu 16.04.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00zf9:,,,,,,,,bhaskerchatterjee,binhn,jyellick,,,,,,,,master,,,true,"09/Jun/17 7:29 PM;binhn;I can replicate this with the current master branch.

[~jyellick],  here is the log on the orderer. It looks like the configtxgen creates something in the channel config not expected by the orderer.

```

2017-06-09 19:20:03.377 UTC [orderer/main] main -> INFO 001 Starting orderer:Version: 1.0.0-rc1-snapshot-88ea3eeGo version: go1.7.5OS/Arch: linux/amd642017-06-09 19:20:03.400 UTC [msp] getMspConfig -> INFO 002 intermediate certs folder not found at [/opt/gopath/src/github.com/hyperledger/fabric/sampleconfig/msp/intermediatecerts]. Skipping.: [stat /opt/gopath/src/github.com/hyperledger/fabric/sampleconfig/msp/intermediatecerts: no such file or directory]2017-06-09 19:20:03.401 UTC [msp] getMspConfig -> INFO 003 crls folder not found at [/opt/gopath/src/github.com/hyperledger/fabric/sampleconfig/msp/intermediatecerts]. Skipping.: [stat /opt/gopath/src/github.com/hyperledger/fabric/sampleconfig/msp/crls: no such file or directory]2017-06-09 19:20:03.451 UTC [orderer/main] initializeMultiChainManager -> INFO 004 Not bootstrapping because of existing chains2017-06-09 19:20:03.458 UTC [orderer/multichain] NewManagerImpl -> INFO 005 Starting with system channel testchainid and orderer type solo2017-06-09 19:20:03.459 UTC [orderer/main] main -> INFO 006 Beginning to serve requests2017-06-09 19:21:18.404 UTC [orderer/common/broadcast] Handle -> WARN 007 Rejecting CONFIG_UPDATE because: Error authorizing update: Error validating ReadSet: Existing config does not contain element for [Groups] /Channel/Application/SampleOrg but was in the read set2017-06-09 19:21:18.422 UTC [orderer/common/deliver] Handle -> WARN 008 Error reading from stream: rpc error: code = Canceled desc = context canceled2017-06-09 19:23:51.881 UTC [orderer/common/broadcast] Handle -> WARN 009 Rejecting CONFIG_UPDATE because: Error authorizing update: Error validating ReadSet: Existing config does not contain element for [Groups] /Channel/Application/SampleOrg but was in the read set

2017-06-09 19:23:51.889 UTC [orderer/common/deliver] Handle -> WARN 00a Error reading from stream: rpc error: code = Canceled desc = context canceled

```","09/Jun/17 8:15 PM;jyellick;[~binhn] Thanks for the heads up.  I see what is happening here, I will put together a CR.",09/Jun/17 9:45 PM;jyellick;Fixed via https://gerrit.hyperledger.org/r/#/c/10423/,,,,,,,,,,,,,,,,,,,,,
The default CA cert should have a long expiration,FAB-3734,16478,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,smithbk,smithbk,08/May/17 7:00 PM,26/May/17 2:29 PM,26/Apr/18 6:50 AM,26/May/17 2:29 PM,,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"The current default expiration for all certificates created by the fabric-ca-server is approximately 1 year.

After searching, there is no standard expiration for CA certs; however, I did find the following values were in line with what was generally recommended.

1) CA root certificate expiration: approximately 15 years
2) CA intermediate certificate expiration:  approximately 5 years
3) Issued enrollment certificates expiration: approximately 1 year

Change the fabric-ca-server's to these values.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00zd1:,,Sprint 16 - Membership Service,,,,,,smithbk,,,,,,,,,,master,,,true,19/May/17 12:13 PM;smithbk;http://gerrit.hyperledger.org/r/9563 [FAB-3734] Change default expiration times,,,,,,,,,,,,,,,,,,,,,,,
Fix error on orderer restart,FAB-3727,16461,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,muralisr,muralisr,08/May/17 4:06 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,10/May/17 1:52 PM,v1.0.0-alpha1,,,,,,v1.0.0-alpha2,,,fabric-orderer,,,,0,configuration,,,,,,,,"{code:java}
orderer
2017-05-08 15:51:04.950 UTC [msp] getMspConfig -> INFO 001 intermidiate certs folder not found at [/opt/gopath/src/github.com/hyperledger/fabric/sampleconfig/msp/intermediatecerts]. Skipping.: [stat /opt/gopath/src/github.com/hyperledger/fabric/sampleconfig/msp/intermediatecerts: no such file or directory]
2017-05-08 15:51:04.951 UTC [msp] getMspConfig -> INFO 002 crls folder not found at [/opt/gopath/src/github.com/hyperledger/fabric/sampleconfig/msp/intermediatecerts]. Skipping.: [stat /opt/gopath/src/github.com/hyperledger/fabric/sampleconfig/msp/crls: no such file or directory]
2017-05-08 15:51:04.984 UTC [orderer/main] main -> INFO 003 Not bootstrapping because of existing chains
2017-05-08 15:51:04.992 UTC [orderer/multichain] NewManagerImpl -> INFO 004 Starting with system channel ch1 and orderer type solo
2017-05-08 15:51:04.994 UTC [orderer/multichain] NewManagerImpl -> CRIT 005 There appear to be two system chains ch1 and testchainid{code}

Recreate steps
1. modify orderer.yaml to 
{noformat}
GenesisProfile: SampleSingleMSPSolo
{noformat}

2. rm -rf /var/hyperledger/*
3. orderer
4. configtxgen -channelID ch1 -outputCreateChannelTx ch1.tx -profile SampleSingleMSPChannel
5. peer channel create -o 127.0.0.1:7050 -c ch1 -f ch1.tx
6. CTRL-C orderer
7. orderer

At 7, orderer will quit with the above error.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3040,0|i00zal:,,,,,,,,kchristidis,muralisr,,,,,,,,,master,,,true,10/May/17 5:13 PM;kchristidis;https://gerrit.hyperledger.org/r/#/c/9111/,,,,,,,,,,,,,,,,,,,,,,,
Optimize struct memory alignment,FAB-3712,16432,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,yacovm,yacovm,08/May/17 8:06 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,10/May/17 12:10 PM,v1.0.0,,,,,,,,,fabric-peer,,,,0,v1.0,,,,,,,,"[https://github.com/opennota/check] can be used for checking struct alignment.

Our code has some places in which we could use to have better struct alignment.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00z5p:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
/examples/cluster needs to configure the CA MSP,FAB-3710,16425,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,greg.haskins,greg.haskins,greg.haskins,08/May/17 2:40 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,08/May/17 10:56 PM,,,,,,,,,,fabric-tools,,,,0,,,,,,,,,We currently allow the CA to run with the default configuration.  It needs to consume the MSP artifacts that were created by cryptogen in order to be useful.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00z4l:,,,,,,,,greg.haskins,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
unused found  unused vars etc in ./msp/...,FAB-3708,16421,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ales,ChristopherFerris,ChristopherFerris,07/May/17 7:23 PM,02/Jun/17 1:04 AM,26/Apr/18 6:50 AM,02/Jun/17 1:04 AM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-crypto,,,,0,help-wanted,staticanalysis,,,,,,,"{{honnef.co/go/tools/cmd/unused}} found  unused vars etc in ./msp/...
msp/msp.go:231:2: field provider is unused (U1000)
msp/msp.go:234:2: field name is unused (U1000)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz4r:ziw,,,,,,,,ChristopherFerris,elli-androulaki,,,,,,,,,master,,,true,"01/Jun/17 11:37 PM;elli-androulaki;Related CR:

[https://gerrit.hyperledger.org/r/#/c/10031/]

 ",,,,,,,,,,,,,,,,,,,,,,,
unused found unused vars etc in ./gossip/...,FAB-3706,16419,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,ChristopherFerris,ChristopherFerris,07/May/17 7:19 PM,18/May/17 11:29 PM,26/Apr/18 6:50 AM,18/May/17 11:29 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-gossip,,,,0,help-wanted,staticanalysis,,,,,,,"{{honnef.co/go/tools/cmd/unused}} found unused vars etc in ./gossip/...
gossip/discovery/discovery_impl.go:85:2: field bootstrapPeers is unused (U1000)
gossip/discovery/discovery_test.go:68:6: type gossipMsg is unused (U1000)
gossip/election/adapter_test.go:168:6: type mockMsgCrypto is unused (U1000)
gossip/state/state.go:98:2: field mutex is unused (U1000)
gossip/util/misc.go:131:6: type goroutine is unused (U1000)",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00z39:,,,,,,,,ChristopherFerris,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
unused found unused vars in ./bccsp,FAB-3705,16418,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,angelo.decaro,ChristopherFerris,ChristopherFerris,07/May/17 7:15 PM,23/May/17 1:35 PM,26/Apr/18 6:50 AM,23/May/17 1:35 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-crypto,,,,0,help-wanted,staticanalysis,,,,,,,"{{honnef.co/go/tools/cmd/unused found }}unused vars etc in ./bccsp/...
bccsp/pkcs11/conf.go:29:2: field keyStorePath is unused (U1000)
bccsp/pkcs11/conf.go:30:2: field securityLevel is unused (U1000)
bccsp/pkcs11/conf.go:31:2: field hashFamily is unused (U1000)
bccsp/pkcs11/fileks.go:353:30: func (*FileBasedKeyStore).close is unused (U1000)
bccsp/pkcs11/fileks.go:388:30: func (*FileBasedKeyStore).deleteKeyStore is unused (U1000)
bccsp/sw/conf.go:29:2: field keyStorePath is unused (U1000)
bccsp/sw/conf.go:30:2: field securityLevel is unused (U1000)
bccsp/sw/conf.go:31:2: field hashFamily is unused (U1000)
bccsp/sw/fileks.go:390:30: func (*fileBasedKeyStore).close is unused (U1000)
bccsp/sw/fileks.go:425:30: func (*fileBasedKeyStore).deleteKeyStore is unused (U1000)",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzbt:l0hzii,,,,,,,,ChristopherFerris,elli-androulaki,,,,,,,,,master,,,true,"12/May/17 1:36 PM;elli-androulaki;Related CR: 

https://gerrit.hyperledger.org/r/#/c/9281/ 

 ",,,,,,,,,,,,,,,,,,,,,,,
found unused vars etc in ./common/...,FAB-3704,16417,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,grapebaba,ChristopherFerris,ChristopherFerris,07/May/17 7:14 PM,23/May/17 8:46 PM,26/Apr/18 6:50 AM,23/May/17 8:46 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-peer,,,,0,help-wanted,staticanalysis,,,,,,,"{{honnef.co/go/tools/cmd/unused}} found unused vars etc in ./common/...
common/cauthdsl/cauthdsl_test.go:96:6: func NewMockDeserializer is unused (U1000)
common/config/standardvalues_test.go:47:2: field msg is unused (U1000)
common/errors/errors.go:33:2: var errorLogger is unused (U1000)
common/genesis/genesis.go:30:2: const lastModified is unused (U1000)
common/ledger/blkstorage/fsblkstorage/blockfile_mgr.go:45:6: type conf is unused (U1000)",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00z2t:,,,,,,,,ChristopherFerris,grapebaba,,,,,,,,,master,,,true,"17/May/17 9:07 AM;grapebaba;common/config/standardvalues_test.go:47:2: field msg is unused (U1000) 

This field cannot delete since it will read config to this field, if deleted test will failed.",,,,,,,,,,,,,,,,,,,,,,,
unused found unused vars etc in ./core/deliverservice,FAB-3703,16416,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,grapebaba,ChristopherFerris,ChristopherFerris,07/May/17 7:12 PM,18/May/17 6:48 AM,26/Apr/18 6:50 AM,18/May/17 6:48 AM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-peer,,,,0,help-wanted,staticanalysis,,,,,,,"{{honnef.co/go/tools/cmd/unused}} found unused vars etc in ./core/deliverservice
core/deliverservice/deliveryclient_test.go:41:2: const goRoutineTestWaitTimeout is unused (U1000)
core/deliverservice/deliveryclient_test.go:372:6: func getStackTrace is unused (U1000)",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00z2l:,,,,,,,,ChristopherFerris,grapebaba,nnao,yacovm,,,,,,,,,,,"17/May/17 6:00 PM;nnao;Those unused vars will be used this patchset.
https://gerrit.hyperledger.org/r/#/c/9411/","18/May/17 6:46 AM;yacovm;[~nnao] is right [~ChristopherFerris]
Can you +2 while you're at it? :)","18/May/17 6:47 AM;grapebaba;[~nnao] [~ChristopherFerris] right, will close this ticket",,,,,,,,,,,,,,,,,,,,,
found unused vars etc in ./core/chaincode ,FAB-3702,16415,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Honglei,ChristopherFerris,ChristopherFerris,07/May/17 7:04 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,09/May/17 8:25 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-peer,,,,0,help-wanted,staticanalysis,,,,,,,"{{honnef.co/go/tools/cmd/unused}} found unused vars etc in ./core/chaincode

core/chaincode/chaincode_support.go:52:2: const chaincodeInstallPathDefault is unused (U1000)
core/chaincode/exectransaction.go:136:5: var errFailedToGetChainCodeSpecForTransaction is unused (U1000)
core/chaincode/exectransaction.go:138:6: func sendTxRejectedEvent is unused (U1000)
core/chaincode/exectransaction_test.go:640:2: const chaincodeExample05GolangPath is unused (U1000)
core/chaincode/exectransaction_test.go:644:2: const chaincodeExample05JavaPath is unused (U1000)
core/chaincode/handler.go:266:25: func (*Handler).canCallChaincode is unused (U1000)
core/chaincode/handler.go:1155:25: func (*Handler).afterPutState is unused (U1000)
core/chaincode/handler.go:1167:25: func (*Handler).afterDelState is unused (U1000)
core/chaincode/handler.go:1179:25: func (*Handler).afterInvokeChaincode is unused (U1000)",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00z2d:,,,,,,,,ChristopherFerris,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
default instantiation policy needs to be reworked,FAB-3698,16411,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,muralisr,muralisr,07/May/17 2:59 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,08/May/17 5:34 PM,,,,,,,,,,fabric-endorser,,,,0,,,,,,,,,"The default instantiation policy uses the local MSP ID for validation - this will cause problems when using multiple endorsers

This needs to be fixed to allow a general default policy of any admin from the orgs in the channel so the general instantiation endorsement will work correctly",,,,,,,,,,,,FAB-3690,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00z1h:,,Sprint 16  - Endorser,,,,,,muralisr,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Fix endorser and orderer requirement in peer channel cmd,FAB-3695,16408,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,baohua,baohua,baohua,07/May/17 2:23 PM,25/May/17 1:59 PM,26/Apr/18 6:50 AM,25/May/17 1:59 PM,,,,,,,v1.0.0,,,fabric-peer,,,,0,peer,,,,,,,,"The existing logic is wrong by using orderer as endorser, and there is no endorer required conditional branch.

```go

if isOrdererRequired \{
 cmdFact.EndorserClient, err = common.GetEndorserClient()
 if err != nil \{
 return nil, fmt.Errorf(""Error getting endorser client %s: %s"", channelFuncName, err)
 }
} else \{

...

}

```

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00z0t:,,,,,,,,baohua,,,,,,,,,,master,,,true,07/May/17 2:32 PM;baohua;https://gerrit.hyperledger.org/r/#/c/9057/,,,,,,,,,,,,,,,,,,,,,,,
Fix error handling in peer channel,FAB-3694,16407,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,baohua,baohua,baohua,07/May/17 1:55 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,07/May/17 9:02 PM,,,,,,,v1.0.0,,,fabric-peer,,,,0,peer,,,,,,,,"The error handling is not in-use now.

```go

cmdFact.BroadcastFactory = func() (common.BroadcastClient, error) \{
 return common.GetBroadcastClient(orderingEndpoint, tls, caFile)
}

if err != nil \{
 return nil, fmt.Errorf(""Error getting broadcast client: %s"", err)
}

```",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00z0l:,,,,,,,,baohua,,,,,,,,,,master,,,true,07/May/17 2:03 PM;baohua;https://gerrit.hyperledger.org/r/#/c/9055/,,,,,,,,,,,,,,,,,,,,,,,
Fix channel creation in test/integration/new-chain.js,FAB-3693,16406,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yuki-kon,yuki-kon,yuki-kon,07/May/17 6:40 AM,30/May/17 3:40 PM,26/Apr/18 6:50 AM,30/May/17 3:40 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,,,,,,,,,"Integration test script ""test/integration/new-chain.js"" is not updated after [FAB-3319] introduced new style protobuf configuration envelope.

 

""new-chain.js"" is a negative test case. SDK requests orderer to create the same channel which has been already created.

The expected outcome is failing to create channel because the same channel exists.

When executing ""gulp test"", ""new-chain.js"" passes this test after SDK gets an error message ""BAD_REQUEST"".

 

If we execute ""new-chain.js"" without existing channel, the expected outcome is to create a new channel successfully.

However, this test fails. Orderer produces the unexpected error. The detailed log is attached.

 

2017-05-06 04:19:01.292 UTC [cauthdsl] func2 -> ERRO 1b2 Principal deserialization failed: (Could not deserialize a SerializedIdentity, err unexpected EOF) for identity [99 101 114 116]

 

Since gulp test passes, it looks like there is no problem. But we don't check the correct test scenario.

We need to fix ""new-chain.js"" to create channel if the same channel doesn't exist.","fabric: commit 58f33ece8cea77c061b516224a7c9646423c748b

fabric-sdk-node: commit f2fdae3fa1e856b1a0b6ec8e118b3279377eabcf

fabri-ca: commit bb17e4e6ac23f9c1d528b85a75e60b28f25fe20e",,,,,,,,,,,,,,,,,,,07/May/17 6:39 AM;yuki-kon;orderer.log.txt;https://jira.hyperledger.org/secure/attachment/10800/orderer.log.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00z0d:,,,,,,,,CarlXK,yuki-kon,,,,,,,,,master,,,true,08/May/17 4:41 PM;yuki-kon;Patch set is here. https://gerrit.hyperledger.org/r/#/c/9051/,,,,,,,,,,,,,,,,,,,,,,,
misspellings found by misspell linter,FAB-3691,16404,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,06/May/17 11:40 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,07/May/17 8:14 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,,,,,0,quality,,,,,,,,"a number of misspelled words found.

 

./bccsp/pkcs11/impl_test.go:1471:22: ""diffrent"" is a misspelling of ""different""
./bccsp/sw/impl_test.go:1377:22: ""diffrent"" is a misspelling of ""different""
./bccsp/utils/keys.go:211:50: ""diffrent"" is a misspelling of ""different""
./bccsp/utils/keys.go:215:61: ""diffrent"" is a misspelling of ""different""
./bccsp/utils/keys.go:247:50: ""diffrent"" is a misspelling of ""different""
./bccsp/utils/keys.go:407:50: ""diffrent"" is a misspelling of ""different""
./bccsp/utils/keys.go:442:50: ""diffrent"" is a misspelling of ""different""
./bddtests/context_endorser.go:319:46: ""reponse"" is a misspelling of ""response""
./common/config/msp/config.go:57:47: ""mulitply"" is a misspelling of ""multiply""
./common/config/msp/config.go:77:47: ""mulitply"" is a misspelling of ""multiply""
./common/config/msp/config.go:90:47: ""mulitply"" is a misspelling of ""multiply""
./bddtests/regression/go/ote/ote.go:436:37: ""mulitples"" is a misspelling of ""multiples""
./common/config/standardvalues.go:51:50: ""retuns"" is a misspelling of ""returns""
./common/config/standardvalues.go:98:63: ""occurances"" is a misspelling of ""occurrences""
./common/configtx/configmap.go:31:112: ""lenght"" is a misspelling of ""length""
./common/configtx/template.go:41:27: ""faciliate"" is a misspelling of ""facilitate""
./common/configtx/update_test.go:158:65: ""existant"" is a misspelling of ""existent""
./common/ledger/blkstorage/fsblkstorage/blockindex_test.go:89:54: ""orginal"" is a misspelling of ""original""
./common/ledger/util/ioutil.go:92:46: ""existance"" is a misspelling of ""existence""
./common/ledger/util/ioutil_test.go:107:24: ""direcotry"" is a misspelling of ""directory""
./common/policies/policy.go:233:62: ""mulitply"" is a misspelling of ""multiply""
./common/viperutil/config_test.go:69:46: ""expeced"" is a misspelling of ""expected""
./common/viperutil/config_test.go:122:52: ""expeced"" is a misspelling of ""expected""
./core/chaincode/handler.go:83:11: ""responsbile"" is a misspelling of ""responsible""
./core/committer/committer_impl.go:40:61: ""retreive"" is a misspelling of ""retrieve""
./core/common/ccprovider/cdspackage.go:51:9: ""convers"" is a misspelling of ""converts""
./core/common/ccprovider/ccprovider.go:302:9: ""convers"" is a misspelling of ""converts""
./core/common/ccprovider/sigcdspackage.go:51:9: ""convers"" is a misspelling of ""converts""
./core/endorser/endorser.go:330:26: ""propertly"" is a misspelling of ""property""
./core/ledger/kvledger/kv_ledger_provider_test.go:111:75: ""comitted"" is a misspelling of ""committed""
./core/ledger/kvledger/kv_ledger_provider_test.go:206:63: ""suppoed"" is a misspelling of ""supposed""
./core/ledger/kvledger/txmgmt/statedb/statecouchdb/query_wrapper.go:115:44: ""heirarchy"" is a misspelling of ""hierarchy""
./core/ledger/kvledger/txmgmt/statedb/statecouchdb/query_wrapper.go:132:42: ""stucture"" is a misspelling of ""structure""
./core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/lockbased_txmgr.go:92:27: ""aquired"" is a misspelling of ""acquired""
./core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/helper.go:162:44: ""intermidiate"" is a misspelling of ""intermediate""
./core/ledger/kvledger/txmgmt/validator/statebasedval/state_based_validator_test.go:142:50: ""commited"" is a misspelling of ""committed""
./core/ledger/ledger_interface.go:28:18: ""guarentees"" is a misspelling of ""guarantees""
./core/ledger/ledger_interface.go:123:106: ""enviroment"" is a misspelling of ""environment""
./core/ledger/kvledger/txmgmt/version/version.go:47:62: ""repectively"" is a misspelling of ""respectively""
./core/ledger/ledgermgmt/ledger_mgmt.go:68:17: ""guarentees"" is a misspelling of ""guarantees""
./core/peer/peer.go:373:44: ""assocaited"" is a misspelling of ""associated""
./core/scc/lscc/lscc.go:85:62: ""aroud"" is a misspelling of ""around""
./core/scc/lscc/lscc.go:582:11: ""guranteed"" is a misspelling of ""guaranteed""
./examples/ccchecker/init.go:31:54: ""closley"" is a misspelling of ""closely""
./examples/chaincode/go/chaincode_example04/chaincode_example04.go:34:18: ""arguements"" is a misspelling of ""arguments""
./examples/chaincode/go/map/map.go:46:19: ""arguements"" is a misspelling of ""arguments""
./examples/chaincode/go/utxo/util/util.go:57:35: ""sytle"" is a misspelling of ""style""
./examples/events/block-listener/block-listener.go:47:35: ""unkown"" is a misspelling of ""unknown""
./gossip/gossip/batcher_test.go:70:71: ""Inadaquate"" is a misspelling of ""Inadequate""
./gossip/gossip/channel/channel_test.go:687:41: ""responce"" is a misspelling of ""response""
./gossip/gossip/channel/channel_test.go:731:41: ""responce"" is a misspelling of ""response""
./msp/configbuilder.go:186:19: ""intermidiate"" is a misspelling of ""intermediate""
./orderer/common/filter/filter.go:46:61: ""commiting"" is a misspelling of ""committing""
./orderer/kafka/consumer.go:60:40: ""occuring"" is a misspelling of ""occurring""
./orderer/ledger/ram/impl.go:92:34: ""accomodate"" is a misspelling of ""accommodate""
./orderer/ledger/util.go:49:10: ""accomodate"" is a misspelling of ""accommodate""
./orderer/multichain/systemchain.go:92:43: ""accomodate"" is a misspelling of ""accommodate""
./orderer/sample_clients/broadcast_timestamp/client.go:80:69: ""braodcast"" is a misspelling of ""broadcast""
./orderer/sbft/simplebft/commit.go:54:17: ""comitted"" is a misspelling of ""committed""
./orderer/sbft/simplebft/simplebft_test.go:537:4: ""effectivelly"" is a misspelling of ""effectively""
./orderer/sbft/simplebft/simplebft_test.go:590:4: ""effectivelly"" is a misspelling of ""effectively""
./peer/chaincode/install_test.go:36:18: ""everthing"" is a misspelling of ""everything""
./peer/chaincode/package.go:141:42: ""packge"" is a misspelling of ""package""
./peer/node/start.go:62:43: ""temporarilly"" is a misspelling of ""temporarily""
./peer/node/start.go:96:53: ""paramaters"" is a misspelling of ""parameters""",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00yzx:,,,,,,,,ChristopherFerris,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
/examples/cluster logging is chatty and unbounded,FAB-3687,16392,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,greg.haskins,greg.haskins,greg.haskins,06/May/17 12:58 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,06/May/17 3:44 PM,,,,,,,,,,fabric-tools,,,,0,,,,,,,,,"The current code configures the peer to be quite chatty and we do not place any limits on logfile size.  Therefore,  it is quite easy to fill up disk space.  Suggest enabling log rotation and perhaps reducing verbosity.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00yy5:,,,,,,,,greg.haskins,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Default $CHANNEL_NAME is not set in e2e_cli/generateArtifacts.sh,FAB-3684,16382,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yuki-kon,yuki-kon,yuki-kon,05/May/17 6:50 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,07/May/17 6:33 PM,,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"Steps to reproduce 
--------------------------
1. move to e2e_cli directly
cd fabric/examples/e2e_cli
2. run generateArtifacts.sh without channel name
./generateArtifacts.sh

Expected Results
--------------------------
Artifacts for default channel ""mychannel"" is generated.

Acctual Results
--------------------------
generateArtifacs fails while outputing the following error log.
Channel name is not set. $CHANNEL_NAME is blank.

{code:java}
--
ubuntu@hyperledger-devenv:c9ecf9e:/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli$ ./generateArtifacts.sh


Using cryptogen -> /opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli/../../release/linux-amd64/bin/cryptogen

##########################################################
##### Generate certificates using cryptogen tool #########
##########################################################
org1.example.com
2017-05-05 18:00:32.367 UTC [bccsp] GetDefault -> WARN 001 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-05-05 18:00:32.406 UTC [bccsp] GetDefault -> WARN 002 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-05-05 18:00:32.408 UTC [bccsp] GetDefault -> WARN 003 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-05-05 18:00:32.411 UTC [bccsp] GetDefault -> WARN 004 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-05-05 18:00:32.412 UTC [bccsp] GetDefault -> WARN 005 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
org2.example.com
2017-05-05 18:00:32.415 UTC [bccsp] GetDefault -> WARN 006 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-05-05 18:00:32.417 UTC [bccsp] GetDefault -> WARN 007 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-05-05 18:00:32.419 UTC [bccsp] GetDefault -> WARN 008 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-05-05 18:00:32.421 UTC [bccsp] GetDefault -> WARN 009 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-05-05 18:00:32.422 UTC [bccsp] GetDefault -> WARN 00a Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-05-05 18:00:32.425 UTC [bccsp] GetDefault -> WARN 00b Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-05-05 18:00:32.427 UTC [bccsp] GetDefault -> WARN 00c Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-05-05 18:00:32.429 UTC [bccsp] GetDefault -> WARN 00d Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.

Using configtxgen -> /opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli/../../release/linux-amd64/bin/configtxgen
##########################################################
#########  Generating Orderer Genesis block ##############
##########################################################
2017-05-05 18:00:32.485 UTC [common/configtx/tool] main -> INFO 001 Loading configuration
2017-05-05 18:00:32.493 UTC [msp] getMspConfig -> INFO 002 intermidiate certs folder not found at [/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto-config/ordererOrganizations/example.com/msp/intermediatecerts]. Skipping.: [stat /opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto-config/ordererOrganizations/example.com/msp/intermediatecerts: no such file or directory]
2017-05-05 18:00:32.493 UTC [msp] getMspConfig -> INFO 003 crls folder not found at [/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto-config/ordererOrganizations/example.com/msp/intermediatecerts]. Skipping.: [stat /opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto-config/ordererOrganizations/example.com/msp/crls: no such file or directory]
2017-05-05 18:00:32.493 UTC [msp] getMspConfig -> INFO 004 MSP configuration file not found at [/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto-config/ordererOrganizations/example.com/msp/config.yaml]: [stat /opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto-config/ordererOrganizations/example.com/msp/config.yaml: no such file or directory]
2017-05-05 18:00:32.495 UTC [msp] getMspConfig -> INFO 005 intermidiate certs folder not found at [/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto-config/peerOrganizations/org1.example.com/msp/intermediatecerts]. Skipping.: [stat /opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto-config/peerOrganizations/org1.example.com/msp/intermediatecerts: no such file or directory]
2017-05-05 18:00:32.495 UTC [msp] getMspConfig -> INFO 006 crls folder not found at [/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto-config/peerOrganizations/org1.example.com/msp/intermediatecerts]. Skipping.: [stat /opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto-config/peerOrganizations/org1.example.com/msp/crls: no such file or directory]
2017-05-05 18:00:32.495 UTC [msp] getMspConfig -> INFO 007 MSP configuration file not found at [/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto-config/peerOrganizations/org1.example.com/msp/config.yaml]: [stat /opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto-config/peerOrganizations/org1.example.com/msp/config.yaml: no such file or directory]
2017-05-05 18:00:32.496 UTC [msp] getMspConfig -> INFO 008 intermidiate certs folder not found at [/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto-config/peerOrganizations/org2.example.com/msp/intermediatecerts]. Skipping.: [stat /opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto-config/peerOrganizations/org2.example.com/msp/intermediatecerts: no such file or directory]
2017-05-05 18:00:32.496 UTC [msp] getMspConfig -> INFO 009 crls folder not found at [/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto-config/peerOrganizations/org2.example.com/msp/intermediatecerts]. Skipping.: [stat /opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto-config/peerOrganizations/org2.example.com/msp/crls: no such file or directory]
2017-05-05 18:00:32.497 UTC [msp] getMspConfig -> INFO 00a MSP configuration file not found at [/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto-config/peerOrganizations/org2.example.com/msp/config.yaml]: [stat /opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto-config/peerOrganizations/org2.example.com/msp/config.yaml: no such file or directory]
2017-05-05 18:00:32.497 UTC [common/configtx/tool] doOutputBlock -> INFO 00b Generating genesis block
2017-05-05 18:00:32.499 UTC [common/configtx/tool] doOutputBlock -> INFO 00c Writing genesis block

#################################################################
### Generating channel configuration transaction 'channel.tx' ###
#################################################################
flag needs an argument: -channelID
Usage of /opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli/../../release/linux-amd64/bin/configtxgen:
  -asOrg string
        Performs the config generation as a particular organization, only including values in the write set that org (likely) has privilege to set
  -channelID string
        The channel ID to use in the configtx (default ""testchainid"")
  -inspectBlock string
        Prints the configuration contained in the block at the specified path
  -inspectChannelCreateTx string
        Prints the configuration contained in the transaction at the specified path
  -outputAnchorPeersUpdate string
        Creates an config update to update an anchor peer (works only with the default channel creation, and only for the first update)
  -outputBlock string
        The path to write the genesis block to (if set)
  -outputCreateChannelTx string
        The path to write a channel creation configtx to (if set)
  -profile string
        The profile from configtx.yaml to use for generation. (default ""SampleInsecureSolo"")

#################################################################
#######    Generating anchor peer update for Org1MSP   ##########
#################################################################
2017-05-05 18:00:32.602 UTC [common/configtx/tool] main -> INFO 001 Loading configuration
2017-05-05 18:00:32.609 UTC [common/configtx/tool] doOutputAnchorPeersUpdate -> INFO 002 Generating anchor peer update
2017-05-05 18:00:32.610 UTC [common/configtx/tool] main -> CRIT 003 Error on inspectChannelCreateTx: Must specify an organization to update the anchor peer for

#################################################################
#######    Generating anchor peer update for Org2MSP   ##########
#################################################################
2017-05-05 18:00:32.653 UTC [common/configtx/tool] main -> INFO 001 Loading configuration
2017-05-05 18:00:32.661 UTC [common/configtx/tool] doOutputAnchorPeersUpdate -> INFO 002 Generating anchor peer update
2017-05-05 18:00:32.661 UTC [common/configtx/tool] main -> CRIT 003 Error on inspectChannelCreateTx: Must specify an organization to update the anchor peer for

{code}",commit 58f33ece8cea77c061b516224a7c9646423c748b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00yx9:,,,,,,,,yuki-kon,,,,,,,,,,master,,,true,05/May/17 7:03 PM;yuki-kon;This is a patch set. https://gerrit.hyperledger.org/r/#/c/9025/,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca empty certfiles for mysql connection SIGSEGV,FAB-3683,16378,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,rennman,rennman,05/May/17 4:58 PM,31/May/17 6:47 PM,26/Apr/18 6:50 AM,31/May/17 6:47 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"If the db.tls.certfiles setting is emtpy, we segfault:


{code:java}
     2017/05/05 16:56:21 [DEBUG] Connection String: root:mysql@tcp(localhost:3306)/?parseTime=true&tls=custom
     panic: runtime error: invalid memory address or nil pointer dereference
     [signal SIGSEGV: segmentation violation code=0x1 addr=0x68 pc=0x5504ef]
     
     goroutine 1 [running]:
     panic(0xadd160, 0xc4200140d0)
     	/opt/go/src/runtime/panic.go:500 +0x1a1
     github.com/hyperledger/fabric-ca/vendor/github.com/go-sql-driver/mysql.parseDSNParams(0xc4203a9380, 0xc4202eb3e0, 0x19, 0xc420091050, 0x0)
     	/opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/go-sql-driver/mysql/dsn.go:492 +0x4ff
     github.com/hyperledger/fabric-ca/vendor/github.com/go-sql-driver/mysql.ParseDSN(0xc4202eb3c0, 0x39, 0x5202f4, 0x51d5b5, 0x1)
     	/opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/go-sql-driver/mysql/dsn.go:315 +0x5dc
     github.com/hyperledger/fabric-ca/vendor/github.com/go-sql-driver/mysql.MySQLDriver.Open(0xc4202eb3c0, 0x39, 0x0, 0x28, 0x4, 0xbc5513)
     	/opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/go-sql-driver/mysql/driver.go:56 +0xb9
     github.com/hyperledger/fabric-ca/vendor/github.com/go-sql-driver/mysql.(*MySQLDriver).Open(0x10b70a8, 0xc4202eb3c0, 0x39, 0xc42013f630, 0x41391e, 0xc4203c4450, 0x30)
     	<autogenerated>:6 +0x60
     database/sql.(*DB).conn(0xc420113970, 0x1, 0xc420113970, 0xc4203c4450, 0xc4203c4420)
     	/opt/go/src/database/sql/sql.go:824 +0x24e
     database/sql.(*DB).Ping(0xc420113970, 0x5, 0xc4202eb3c0)
     	/opt/go/src/database/sql/sql.go:503 +0x34
     github.com/hyperledger/fabric-ca/lib/dbutil.NewUserRegistryMySQL(0xc42014e820, 0x42, 0xc420160988, 0x5, 0x1, 0x0, 0x0)
     	/opt/gopath/src/github.com/hyperledger/fabric-ca/lib/dbutil/dbutil.go:227 +0x39a
     github.com/hyperledger/fabric-ca/lib.(*CA).initDB(0xc42000c4c8, 0x7ffefb647500, 0x0)

{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ywl:,,Sprint 16 - Membership Service,,,,,,rennman,smithbk,,,,,,,,,master,,,true,"05/May/17 5:09 PM;rennman;Just to clarify, this can happen if
-the parm is null
-the file doesn't exist
-the file does not have read permission
-the file is not a well-formed certificate",30/May/17 2:27 PM;smithbk;https://gerrit.hyperledger.org/r/#/c/9907/,,,,,,,,,,,,,,,,,,,,,,
Chaincode deployment fails with static Orgleader,FAB-3680,16363,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,dzhoou,dzhoou,05/May/17 2:46 PM,07/Jun/17 11:59 AM,26/Apr/18 6:50 AM,07/Jun/17 11:59 AM,v1.0.0-alpha1,,,,,,WON'T FIX,,,fabric-peer,,,,0,,,,,,,,,"Recently there was an issue deploying chaincode, when we want to obtain the following peer configuration:

{code}
       peer0                                   peer1
  ----------------                        ----------------
  |     cc0      | =======channel0======= |     cc0      |
  ----------------                        ----------------
  |              |        channel1======= |     cc1      |
  ----------------                        ----------------
{code}



where:
*     peer0 and peer1 are in the same organization, with peer0 as the OrgLeader (CORE_PEER_GOSSIP_ORGLEADER=true)
*     channel0, carrying the chaincode cc0, is joined to peer0 and peer1
*     channel1, carrying cc1, is joined to peer1 only

And cc1 invocations would fail with an error like ""failed to obtain cds for cc1 - transaction not found cc1/channel1"".

This error indicates that the cc1 was not found on channel1, despite install and instantiate calls coming through in the init script.

Here is my understanding of the problem:

*     Chaincodes instantiations are recorded in a transaction proposal, and when approved, recorded in a block
*     Blocks are propagated by the OrgLeader through Gossip messages
*     The OrgLeader can only send Gossip messages to channels it is joined to

And the problem occurs when:

*     Chaincodes are instantiated on peer1, channel1
*     Since peer0, the OrgLeader, does not have access to the channel1, it cannot propagate chaincode blocks to channel1 through Gossip
*     peer1 does not receive chaincode blocks, even though the endorsement was received

And since peer cannot find deployed chaincodes in its blocks, chaincode invocation fails.

Possible changes:
*     ""peer chaincode instantiate"" should wait for actual chaincode block event before returning success. Right now it returns success despite the fact that chaincode blocks are not added.
*     Change the way OrgLeader behaves, either:
**        make chaincode block delievery not depend on OrgLeader (have channel-specific leaders instead?)
**        make OrgLeader able to deliver blocks to any channel, regardless of its membership in that channel

To reproduce the problem, copy the following attached files: 
{code}
cp script.sh $GOPATH/src/github.com/hyperledger/fabric/examples/e2e_cli/scripts/
cp peer-base.yaml $GOPATH/src/github.com/hyperledger/fabric/examples/e2e_cli/base/
cp docker-compose-base.yaml $GOPATH/src/github.com/hyperledger/fabric/examples/e2e_cli/base/
{code}

and run
{code}
cd $GOPATH/src/github.com/hyperledger/fabric/examples/e2e_cli
./network_setup.sh up
{code}
The script should timeout during query/invoke actions and return error.",,,,,,,,,,,,,,,,,,,,05/May/17 3:08 PM;dzhoou;docker-compose-base.yaml;https://jira.hyperledger.org/secure/attachment/10708/docker-compose-base.yaml,05/May/17 3:08 PM;dzhoou;peer-base.yaml;https://jira.hyperledger.org/secure/attachment/10707/peer-base.yaml,05/May/17 2:45 PM;dzhoou;script.sh;https://jira.hyperledger.org/secure/attachment/10706/script.sh,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00yth:,,,,,,,,dzhoou,gennadyl,muralisr,,,,,,,,,,,,"24/May/17 9:58 AM;gennadyl;From gossip point of view, everything work as designed - peer0 can't pass blocks for channel1, it didn't know about channel1 at all. Solution for this kind of problems is leader election mechanism - it ensures that each channel in each organization has its own leader to connect to ordering service.

I will remove fabric-gossip from defect, because it is not gossip thing at all.","01/Jun/17 8:17 PM;muralisr;[~dzhoou] This is not a defect. As both are in the same org, would there be any reason you cannot make peer1 the org leader ? It knows about both channels.",07/Jun/17 11:58 AM;muralisr;[~dzhoou] Will close this and the duplicate FAB-3637 for now. Please do reopen if you would like to discuss further.,,,,,,,,,,,,,,,,,,,,,
Disable brittle test TestConnectToAnchorPeers,FAB-3679,16358,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,05/May/17 1:21 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,07/May/17 6:47 PM,v1.0.0,,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,,"This test fails from time to time, and I am going to restructure the logic that this test tests as part of https://jira.hyperledger.org/browse/FAB-3109 so most likely would also need to change the test itself.

Disabling the test in the meantime, and it will be introduced later when it will be more stable.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00ysl:,,Sprint 16 - Gossip,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
peer-chaincodedev mode doc needs to be updated,FAB-3671,16342,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,muralisr,muralisr,04/May/17 6:21 PM,01/Jul/17 3:02 AM,26/Apr/18 6:50 AM,05/May/17 9:38 PM,,,,,,,,,,fabric-endorser,,,,0,,,,,,,,,docs/source/peer-chaincode-devmode.rst needs to be updated for recent changes,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz7e:fk,,Sprint 16  - Endorser,,,,,,muralisr,theathibm,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Close client connection on disconnect from event hub,FAB-3670,16341,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,biljana.lukovic,biljana.lukovic,biljana.lukovic,04/May/17 6:17 PM,05/May/17 2:26 PM,26/Apr/18 6:50 AM,05/May/17 2:26 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,Explicitly close/drop client connection after event hub was disconnected. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ypp:,,,,,,,,biljana.lukovic,troyronda,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"Block.js decode should give a warning on using the ""MSP"" policy type",FAB-3644,16306,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,03/May/17 8:56 PM,07/May/17 6:34 PM,26/Apr/18 6:50 AM,07/May/17 6:34 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,as of v1.0 this policy type is not supported even though it's defined in the protobuf. the SDK should print out a warning in the logger if this is discovered in a configuration input.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00yi5:,,,,,,,,,,,,,,,,,,master,,,true,03/May/17 9:01 PM;jimthematrix;https://gerrit.hyperledger.org/r/8921,,,,,,,,,,,,,,,,,,,,,,,
chaincode invocation on peer fails when CORE_PEER_GOSSIP_ORGLEADER=false,FAB-3637,16267,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,dzhoou,dzhoou,03/May/17 6:27 PM,07/Jun/17 12:00 PM,26/Apr/18 6:50 AM,07/Jun/17 12:00 PM,v1.0.0-alpha1,,,,,,DUPLICATE,,,fabric-peer,,,,0,,,,,,,,,"When a peer is not set as the gossip org leader (CORE_PEER_GOSSIP_ORGLEADER=false), invocations to chaincode hosted on this peer will result in an error in the form of 
{code}
Error: transaction CHAINCODE/CHANNEL not found
{code}
Need confirmation on whether it is an intended behavior.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00y9x:,,,,,,,,dzhoou,muralisr,,,,,,,,,,,,,05/May/17 2:49 PM;dzhoou;Issue updated in [FAB-3680|https://jira.hyperledger.org/browse/FAB-3680],01/Jun/17 9:35 PM;muralisr;[~dzhoou] this is a dup of FAB-3680 correct ? If so can you close this please ?,06/Jun/17 12:41 PM;muralisr;[~dzhoou] going to mark this as  a dup of FAB-3680 ... please change it if you disagree.,,,,,,,,,,,,,,,,,,,,,
"Do not ignore error, while associating between peer id and cert, creating new communication instance",FAB-3636,16266,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,03/May/17 6:21 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,04/May/17 3:06 PM,,,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,gossip,,,,,,,"Currently while creating new communication instance with {{NewCommInstanceWithServer}} method from *comm_impl.go*, there a code which associate peer identity to the peer certificate by storing the mapping. Code:

{code}
	commInst.connStore = newConnStore(commInst, commInst.logger)
	commInst.idMapper.Put(idMapper.GetPKIidOfCert(peerIdentity), peerIdentity)
{code}

While the code of the {{Put}} method assumes error case:

{code}
// put associates an identity to its given pkiID, and returns an error
// in case the given pkiID doesn't match the identity
func (is *identityMapperImpl) Put(pkiID common.PKIidType, identity api.PeerIdentityType) error {
	if pkiID == nil {
		return errors.New(""PKIID is nil"")
	}
	if identity == nil {
		return errors.New(""identity is nil"")
	}

	if err := is.mcs.ValidateIdentity(identity); err != nil {
		return err
	}

	id := is.mcs.GetPKIidOfCert(identity)
	if !bytes.Equal(pkiID, id) {
		return errors.New(""identity doesn't match the computed pkiID"")
	}

	is.Lock()
	defer is.Unlock()
	is.pkiID2Cert[string(id)] = newStoredIdentity(identity)
	return nil
}
{code}

That means the error might be returned by calling to

{code}
     commInst.idMapper.Put(idMapper.GetPKIidOfCert(peerIdentity), peerIdentity)
{code}

while this is *VERY* unlikely to happen, we still should not ignore the error and therefore check the result and since there is nothing that could be done and actually having such error is clear indication of something really bad has happened we need to add panic to propagate the error.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00y9p:,,Sprint 16 - Gossip,,,,,,C0rWin,,,,,,,,,,master,,,true,03/May/17 6:33 PM;C0rWin;https://gerrit.hyperledger.org/r/#/c/8911/,,,,,,,,,,,,,,,,,,,,,,,
generateChaincode func mismatches the content,FAB-3616,16232,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,baohua,baohua,baohua,03/May/17 12:45 PM,06/Jun/17 2:37 AM,26/Apr/18 6:50 AM,06/Jun/17 2:37 AM,,,,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,,,,,,,,"
It actually generate the ChaincodeDeploymentSpec. Need to update the name to match.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00y25:,,,,,,,,baohua,,,,,,,,,,master,,,true,03/May/17 12:49 PM;baohua;http://gerrit.hyperledger.org/r/8879,,,,,,,,,,,,,,,,,,,,,,,
TestReConnections failed in CI,FAB-3615,16231,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,gennadyl,yacovm,yacovm,03/May/17 11:19 AM,28/May/17 9:31 PM,26/Apr/18 6:50 AM,28/May/17 9:31 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-gossip,,,,0,gossip,,,,,,,,"https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10661/consoleFull

I think we need to add a timeout in:
{code}
func waitForMessages(t *testing.T, msgChan chan uint64, count int, errMsg string) {
	c := 0
	waiting := true
	ticker := time.NewTicker(time.Duration(10) * time.Second)
	for waiting {
		select {
		case <-msgChan:
			c++
			if c == count {
				waiting = false
			}
		case <-ticker.C:
			waiting = false
		}
	}
	assert.Equal(t, count, c, errMsg)
}
{code}

[~C0rWin] [~gennadyl]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00y1x:,,,,,,,,gennadyl,yacovm,,,,,,,,,master,,,true,24/May/17 4:05 PM;gennadyl;It is look like TestPresumedDead test is failed,,,,,,,,,,,,,,,,,,,,,,,
Add chaincode name checking in chaincodeInstall,FAB-3614,16230,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,baohua,baohua,baohua,03/May/17 8:57 AM,01/Jun/17 7:17 PM,26/Apr/18 6:50 AM,01/Jun/17 7:17 PM,,,,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,,,,,,,,"Currently, we only check chaincodePath and chaincodeVersion at the chaincodeInstall.

However, the name is needed for the following generateChaincode steps.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00y1p:,,,,,,,,baohua,,,,,,,,,,master,,,true,03/May/17 9:03 AM;baohua;http://gerrit.hyperledger.org/r/8873,,,,,,,,,,,,,,,,,,,,,,,
error: [Orderer.js]: sendDeliver - rejecting - status:NOT_FOUND,FAB-3611,16227,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,swangbj,swangbj,03/May/17 7:31 AM,04/May/17 8:07 PM,26/Apr/18 6:50 AM,04/May/17 8:05 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"Hi，when i join channel , i met this problem . Following is my log.
error: [Orderer.js]: sendDeliver - rejecting - status:NOT_FOUND
error: [Chain.js]: joinChannel - Failed Proposal. Error: Error: Invalid results returned ::NOT_FOUND
    at ClientDuplexStream.<anonymous> (/home/wsh/hsbn/fabric-sdk-node/node_modules/fabric-client/lib/Orderer.js:197:22)
    at emitOne (events.js:96:13)
    at ClientDuplexStream.emit (events.js:188:7)
    at readableAddChunk (_stream_readable.js:176:18)
    at ClientDuplexStream.Readable.push (_stream_readable.js:134:10)
    at readCallback (/home/wsh/hsbn/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:245:14)
Error: Invalid results returned ::NOT_FOUND
    at ClientDuplexStream.<anonymous> (/home/wsh/hsbn/fabric-sdk-node/node_modules/fabric-client/lib/Orderer.js:197:22)
    at emitOne (events.js:96:13)
    at ClientDuplexStream.emit (events.js:188:7)
    at readableAddChunk (_stream_readable.js:176:18)
    at ClientDuplexStream.Readable.push (_stream_readable.js:134:10)
    at readCallback (/home/wsh/hsbn/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:245:14)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00y11:,,,,,,,,swangbj,yoheiueda,,,,,,,,,,,,,"04/May/17 8:07 PM;jimthematrix;need more details on how this was reproduced. note that there is no good indicator that the channel has been successfully created by the orderer. so you have to wait some length of time before calling join channel. that's what the e2e.js test does, waiting 5 seconds. it's not pretty but is the easiest solution. you could also keep polling until you get the expected block (within a set timeout)",,,,,,,,,,,,,,,,,,,,,,,
Wrong log message in the flogging component,FAB-3607,16222,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,amber-zhang,amber-zhang,amber-zhang,03/May/17 5:11 AM,09/May/17 8:07 AM,26/Apr/18 6:50 AM,08/May/17 6:55 PM,,,,,,,,,,fabric-peer,,,,0,Usability,,,,,,,,"This piece of log is from peer0. The first log looks weird. - CORE_LOGGING_GOSSIP=error is defined for all peers in docker-compose.yaml. But the 'error' is parsed as module name. 
 
zhangxqs-mbp:e2e_cli zhangxq$ docker logs peer0
2017-04-28 08:37:40.873 UTC [flogging] setModuleLevel -> DEBU 001 {color:red}Module 'error' {color}logger enabled for log level 'debug'
2017-04-28 08:37:40.889 UTC [ledgermgmt] initialize -> INFO 002 Initializing ledger mgmt
2017-04-28 08:37:40.890 UTC [kvledger] NewProvider -> INFO 003 Initializing ledger provider
2017-04-28 08:37:40.892 UTC [kvledger.util] CreateDirIfMissing -> DEBU 004 CreateDirIfMissing [/var/hyperledger/production/ledgersData/ledgerProvider/]
2017-04-28 08:37:40.893 UTC [kvledger.util] logDirStatus -> DEBU 005 Before creating dir - [/var/hyperledger/production/ledgersData/ledgerProvider/] does not exist
2017-04-28 08:37:40.895 UTC [kvledger.util] logDirStatus -> DEBU 006 After creating dir - [/var/hyperledger/production/ledgersData/ledgerProvider/] exists
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00xzx:,,,,,,,,amber-zhang,wlahti,,,,,,,,,,,,,"03/May/17 3:08 PM;wlahti;That logging message was actually related to the CORE_LOGGING_ERROR setting (which was used for the error handling framework) so it was an expected log message at the time. However, this setting has been removed via https://gerrit.hyperledger.org/r/#/c/8581/ (merged on April 26). Can you grab the latest code and ensure that this item can be closed?","09/May/17 8:07 AM;amber-zhang;Hi Will,

 

The error doesn't exists in the latest code. thanks",,,,,,,,,,,,,,,,,,,,,,
Displaying cryptogen help-man,FAB-3571,16169,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,latitiah,latitiah,02/May/17 7:35 PM,07/Jun/17 8:58 AM,26/Apr/18 6:50 AM,07/Jun/17 8:58 AM,v1.0.0,,,,,,Not a Bug,,,fabric-crypto,fabric-tools,,,0,,,,,,,,,"*environment*: Ubuntu 14.04
*git commit*: f3c61e6cc3b04915081b15bbed000b377b53c4c1

When typing `cryptogen --help-man`, the following is displayed:
{code:none}
.TH cryptogen 1  """"
.SH ""NAME""
cryptogen
.SH ""SYNOPSIS""
.TP
\fBcryptogen [<flags>] <command> [<args> ...]\fR

.SH ""DESCRIPTION""
Utility for generating Hyperledger Fabric key material
.SH ""OPTIONS""
.TP
\fB--help\fR
Show context-sensitive help (also try --help-long and --help-man).
.SH ""COMMANDS""
.SS
\fBhelp [<command>...]\fR
.PP
Show help.
.SS
\fBgenerate [<flags>]\fR
.PP
Generate key material
.TP
\fB--output=""crypto-config""\fR
The output directory in which to place artifacts
.TP
\fB--config=CONFIG\fR
The configuration template to use
.SS
\fBshowtemplate\fR
.PP
Show the default configuration template
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzbt:l0hzd,,,,,,,,latitiah,mastersingh24,,,,,,,,,,,,,19/May/17 9:24 AM;mastersingh24;This is not really an issue.  That command is designed to be piped to a file for use as a man page,19/May/17 3:04 PM;latitiah;It would be helpful to state this in the help description when the --help-man option is mentioned. I assumed that the help-man option was going to be the equivalent of accessing the man page for this tool.,02/Jun/17 9:55 AM;mastersingh24;It's a built-in function of the library being used so not sure we can actually make any changes there,,,,,,,,,,,,,,,,,,,,,
"Need an ""extractChannelConfig()"" on the Client.js",FAB-3570,16168,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,jimthematrix,jimthematrix,02/May/17 7:22 PM,10/May/17 5:04 AM,26/Apr/18 6:50 AM,10/May/17 5:04 AM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"this method will take the raw data from reading the ""{{configtxgen -outputCreateChannelTx}}"" output file, extract the Config object so that the app can then call Client.signChannelConfig() to add signature, and then Client.createChannel()",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00xo5:,,,,,,,,,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
add a new test case that uses configtxgen output for creating channels,FAB-3569,16166,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,jimthematrix,jimthematrix,02/May/17 7:05 PM,10/May/17 5:05 AM,26/Apr/18 6:50 AM,10/May/17 5:05 AM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,in parallel to the create-channel.js that creates the channel from JSON input,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:rh5,,,,,,,,,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Eliminate required nonce from APIs,FAB-3568,16165,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,jimthematrix,jimthematrix,02/May/17 6:39 PM,22/May/17 4:18 PM,26/Apr/18 6:50 AM,22/May/17 4:18 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"the nonce should ideally be automatically generated instead of being required on the API. the reason this is required, from discussing with [~harrisob@us.ibm.com] is the nonce and txId must be coherent: txId = hash(nonce + creator.IdBytes)

a possible solution to this, so that we don't ask the application developer for having to generate the nonce and the txId while preserving the coherence b/w the txId and the nonce values on APIs, is to use a ""TransactionID"" class that gets instantiated with the creator IdBytes and generates the nonce internally as well as the txId.

so the application code would look like:
Client.newTransactionID() <<== this requires the Client to have a legit userContext already
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:rh4r,,,,,,,,,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
examples e2e_cli network_setup.sh script exits prematurely with ERROR,FAB-3567,16164,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jtsiros,jtsiros,02/May/17 6:13 PM,08/Jun/17 1:57 PM,26/Apr/18 6:50 AM,08/Jun/17 1:56 PM,v1.0.0-alpha1,,,,,,v1.0.0-beta,,,fabric-examples,,,,0,,,,,,,,,"fabric/examples/e2e_cli ./network_setup.sh up                                                                                            
setting to default channel 'mychannel'
Channel name - mychannel

Using configtxgen -> /Users/jtsiros/dev/go/src/github.com/hyperledger/fabric/examples/e2e_cli/../../build/bin/configtxgen
Generating genesis block
2017-05-02 11:03:21.422 PDT [common/configtx/tool] main -> INFO 001 Loading configuration
2017-05-02 11:03:21.426 PDT [msp] getMspConfig -> INFO 002 intermidiate certs folder not found at [/Users/jtsiros/dev/go/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto/orderer/localMspConfig/intermediatecerts]. Skipping.: [stat /Users/jtsiros/dev/go/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto/orderer/localMspConfig/intermediatecerts: no such file or directory]
2017-05-02 11:03:21.426 PDT [msp] getMspConfig -> INFO 003 crls folder not found at [/Users/jtsiros/dev/go/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto/orderer/localMspConfig/intermediatecerts]. Skipping.: [stat /Users/jtsiros/dev/go/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto/orderer/localMspConfig/crls: no such file or directory]
2017-05-02 11:03:21.426 PDT [msp] getMspConfig -> INFO 004 MSP configuration file not found at [/Users/jtsiros/dev/go/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto/orderer/localMspConfig/config.yaml]: [stat /Users/jtsiros/dev/go/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto/orderer/localMspConfig/config.yaml: no such file or directory]
2017-05-02 11:03:21.427 PDT [msp] getMspConfig -> INFO 005 intermidiate certs folder not found at [/Users/jtsiros/dev/go/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto/peer/peer0/localMspConfig/intermediatecerts]. Skipping.: [stat /Users/jtsiros/dev/go/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto/peer/peer0/localMspConfig/intermediatecerts: no such file or directory]
2017-05-02 11:03:21.427 PDT [msp] getMspConfig -> INFO 006 crls folder not found at [/Users/jtsiros/dev/go/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto/peer/peer0/localMspConfig/intermediatecerts]. Skipping.: [stat /Users/jtsiros/dev/go/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto/peer/peer0/localMspConfig/crls: no such file or directory]
2017-05-02 11:03:21.427 PDT [msp] getMspConfig -> INFO 007 MSP configuration file not found at [/Users/jtsiros/dev/go/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto/peer/peer0/localMspConfig/config.yaml]: [stat /Users/jtsiros/dev/go/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto/peer/peer0/localMspConfig/config.yaml: no such file or directory]
2017-05-02 11:03:21.428 PDT [msp] getMspConfig -> INFO 008 intermidiate certs folder not found at [/Users/jtsiros/dev/go/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto/peer/peer2/localMspConfig/intermediatecerts]. Skipping.: [stat /Users/jtsiros/dev/go/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto/peer/peer2/localMspConfig/intermediatecerts: no such file or directory]
2017-05-02 11:03:21.428 PDT [msp] getMspConfig -> INFO 009 crls folder not found at [/Users/jtsiros/dev/go/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto/peer/peer2/localMspConfig/intermediatecerts]. Skipping.: [stat /Users/jtsiros/dev/go/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto/peer/peer2/localMspConfig/crls: no such file or directory]
2017-05-02 11:03:21.428 PDT [msp] getMspConfig -> INFO 00a MSP configuration file not found at [/Users/jtsiros/dev/go/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto/peer/peer2/localMspConfig/config.yaml]: [stat /Users/jtsiros/dev/go/src/github.com/hyperledger/fabric/examples/e2e_cli/crypto/peer/peer2/localMspConfig/config.yaml: no such file or directory]
2017-05-02 11:03:21.428 PDT [common/configtx/tool] doOutputBlock -> INFO 00b Generating genesis block
2017-05-02 11:03:21.429 PDT [common/configtx/tool] doOutputBlock -> INFO 00c Writing genesis block
Generating channel configuration transaction
2017-05-02 11:03:21.451 PDT [common/configtx/tool] main -> INFO 001 Loading configuration
2017-05-02 11:03:21.457 PDT [common/configtx/tool] doOutputChannelCreateTx -> INFO 002 Generating new channel configtx
2017-05-02 11:03:21.457 PDT [common/configtx/tool] doOutputChannelCreateTx -> INFO 003 Writing new channel tx
Generating anchor peer update for Org0MSP
2017-05-02 11:03:21.477 PDT [common/configtx/tool] main -> INFO 001 Loading configuration
2017-05-02 11:03:21.481 PDT [common/configtx/tool] doOutputAnchorPeersUpdate -> INFO 002 Generating anchor peer update
2017-05-02 11:03:21.481 PDT [common/configtx/tool] doOutputAnchorPeersUpdate -> INFO 003 Writing anchor peer update
Generating anchor peer update for Org1MSP
2017-05-02 11:03:21.499 PDT [common/configtx/tool] main -> INFO 001 Loading configuration
2017-05-02 11:03:21.504 PDT [common/configtx/tool] doOutputAnchorPeersUpdate -> INFO 002 Generating anchor peer update
2017-05-02 11:03:21.504 PDT [common/configtx/tool] doOutputAnchorPeersUpdate -> INFO 003 Writing anchor peer update
Creating network ""e2ecli_default"" with the default driver
Pulling cli (hyperledger/fabric-testenv:latest)...
ERROR: repository hyperledger/fabric-testenv not found: does not exist or no pull access",Mac OSX Sierra 10.12.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00xn9:,,,,,,,,ChristopherFerris,jtsiros,mastersingh24,,,,,,,,,,,,26/May/17 6:35 AM;ChristopherFerris;[~jtsiros] can you run the current version from MASTER as described by the Getting Started page? [http://hyperledger-fabric.readthedocs.io/en/latest/getting_started.html] We've made some significant changes and improvements.,08/Jun/17 1:57 PM;mastersingh24;This has been revamped for the beta and various independent tests have shown that the beta version works properly,,,,,,,,,,,,,,,,,,,,,,
e2e_cli fails to Join channel when certs are generated using cryptogen,FAB-3563,16160,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,Ratnakar,Ratnakar,02/May/17 3:28 PM,04/May/17 2:07 PM,26/Apr/18 6:50 AM,04/May/17 2:07 PM,,,,,,,v1.0.0,,,,,,,0,,,,,,,,,"h3. _e2e_cli_ fails to _*Join channel*_ when certs are generated dynamically using cryptogen tool

h4. Steps to reproduce the issue:

1. Generate the Org certs using cryptogen tool.
2. Generate Orderer genesis block and channel cfg transaction (anchor peer update txn ) using msps and configtx.yaml.
3. start the local network using docker-compose
4. Run an end - to -end test using shell script

*Expected Result: * End - to - End test should pass

*Actual Result: * End - to - End fails while Joining the channel with the following error:

{code}
cli                       | 2017-05-02 15:15:03.206 UTC [msp] GetLocalMSP -> DEBU 004 Returning existing local MSP
cli                       | 2017-05-02 15:15:03.206 UTC [msp] GetDefaultSigningIdentity -> DEBU 005 Obtaining default signing identity
cli                       | 2017-05-02 15:15:03.210 UTC [msp] Sign -> DEBU 006 Sign: plaintext: 0AE2070A5B08011A0B08F7C4A2C80510...04AD4A36DB4E1A080A000A000A000A00 
cli                       | 2017-05-02 15:15:03.210 UTC [msp] Sign -> DEBU 007 Sign: digest: E4494794D7D3D3B2A7C190473B6F6C679C0C1239DA6C2067B11A104E1B5E86D4 
cli                       | Error: proposal failed (err: rpc error: code = 2 desc = ""JoinChain"" request failed authorization check for channel [mychannel]: [Failed verifying that proposal's creator satisfies local MSP principal during channelless check policy with policy [Admins}: [This identity is not an admin]])
cli                       | Usage:
cli                       |   peer channel join [flags]
{code}


Code is also uploaded to github https://github.com/ratnakar-asara/fabric_e2e_cli

NOTE: Complete logs are attached


",,,,,,,,,,,,,,,,,,,,02/May/17 3:23 PM;Ratnakar;e2e-join-failure-logs.txt;https://jira.hyperledger.org/secure/attachment/10695/e2e-join-failure-logs.txt,02/May/17 5:27 PM;Ratnakar;orderer-logs.txt;https://jira.hyperledger.org/secure/attachment/10696/orderer-logs.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00xml:,,,,,,,,kchristidis,mastersingh24,muralisr,Ratnakar,,,,,,,,,,,"02/May/17 4:14 PM;kchristidis;Ratnakar, can you please:

# List _the exact commands_ you used for every step
# Do a ""docker logs -f orderer0 2>&1"" and paste the output here (in a separate file, as an attachment)
# Confirm whether the E2E CLI (sans cryptogen) passes locally
# Confirm whether `bootstrap.feature` passes locally

I suspect that the MSPs are not set up correctly.","02/May/17 5:28 PM;Ratnakar;[~kchristidis] 
1. This is same as e2e_cli , all the scripts are captured [here](https://github.com/ratnakar-asara/fabric_e2e_cli/) This can run with the below command
{panel}                      
./network_setup restart
{panel}

2. Attached the latest orderer logs.
3. This problem is seen when I used e2e_cli to verify
4. I haven't tried BDD.
","02/May/17 6:47 PM;muralisr;[~Ratnakar] We have to post process configtxgen's output to copy the signcert to the admincert folder to give the signet Admin ROLE. There was was directory structure mixup in this manual process. Worked once corrected.

It does bring up the question if the cryptogen should copy peer's signcerts automatically into admincerts...or is there an alternate approach to using the cryptogen outputs [~mastersingh24] ?

",02/May/17 7:40 PM;Ratnakar;Waiting for [~mastersingh24] Inputs. Reducing the priority.,"02/May/17 8:04 PM;mastersingh24;The current cryptogen actually creates admin users for every peer org and includes them in the MSP for the org (which is what is used as the input in configtx.yaml)

So instead of using the peer identity, you can point to the admin identity for the org which is located in the users directory for each org.

You can also set the AdminPrincipal to Role.MEMBER in the configtx.yaml  as well (which is what the current e2e_cli uses as I recall)",02/May/17 8:05 PM;mastersingh24;[~greg.haskins] has also done some work in this area and I believe he was able to get the network running the other day with the artifacts from cryptogen ,"03/May/17 5:17 AM;Ratnakar;As discussed with [~mastersingh24] and [~greg.haskins], used admin identity for CLI container.
Changes submitted with  PR https://gerrit.hyperledger.org/r/#/c/8865/",,,,,,,,,,,,,,,,,
Increase test coverage for VSCC,FAB-3561,16158,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,ales,ales,02/May/17 3:12 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,06/May/17 11:03 AM,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00xm5:,,,,,,,,ales,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Remove duplicate ChaincodeInstance definition,FAB-3557,16154,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,ales,ales,02/May/17 11:44 AM,31/May/17 9:54 AM,26/Apr/18 6:50 AM,31/May/17 9:50 AM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-crypto,fabric-peer,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00xlh:,,,,,,,,ales,ChristopherFerris,,,,,,,,,master,,,true,"26/May/17 6:33 AM;ChristopherFerris;[~ales] this needs a much better description, it is unactionable as written.","31/May/17 9:54 AM;ales;""type ChaincodeInstance struct"" was defined in two places. The redundant definition has been removed and so this FAB can be removed",,,,,,,,,,,,,,,,,,,,,,
Peer panic while commiting non UTF8 Key (CouchDB),FAB-3556,16153,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,manish-sethi,mffrench,mffrench,02/May/17 8:45 AM,19/Jun/17 1:29 PM,26/Apr/18 6:50 AM,09/Jun/17 1:51 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,,"Hi,

peer is on panic when comiting non UTF8 Key to CouchDB. That's fine from a CouchDB view (Key must be UTF8) but from fabric hyperledger view where we can use CouchDB or goleveldb this leads to behavior divergences on the same API calls. 

Probably can we improve this :

+ by logging a warning in the case we encounter non UTF8 key on the API implementations side (that way developers will see the problem whatever the ledger db configuration)

OR

+ by aligning goleveldb key policy to the couchdb one and so rejecting any request with non UTF8 key on the API stack. 

Finally I think this kind of panic should be avoided on the peer but rejected from the API client calls. 

Let me know what you think,

Kind regards,

Mathilde

panic: Error during commit to txmgr:doc id [656c697869722d6363005f70726f5f0a044f72673012cf042d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d494942686a434341533267417749424167495555706e4b4e387337664d3873583567336155624a4d61746247667377436759494b6f5a497a6a3045417749770a447a454e4d417347413155454177774562334a6e4d444165467730784e7a41304d6a67784e7a51304d444261467730784f44417a4d6a67774d5451304d4442610a4d4259784644415342674e5642414d544331646c596b46776345466b62576c754d466b77457759484b6f5a497a6a3043415159494b6f5a497a6a3044415163440a51674145515a51387548356f6951696b5171794c55514b636f3375564c79496c594465346c347a35663643384c744f70707a51694c384d5156645251595754380a7639324c684c6f43674e61326d2b497a346f536d756b7433484b4e674d46347744675944565230504151482f42415144416749454d41774741315564457745420a2f7751434d414177485159445652304f4242594546416e7048674a72552f4730654d395778384863597146332b6f31714d42384741315564497751594d4261410a464577674456516a495230356670385556716d4c3933484a734f33694d416f4743437147534d343942414d43413063414d45514349435032505a32555164316b0a334f4f466f4f79464f76726b456148476a736d6b6e636d413666773468483362416941725736516834423048647677436b4f316b314a2b57565050384a646b460a7964753047692f54357862492b773d3d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a] not a valid utf8 string

goroutine 268 [running]:
panic(0xc13880, 0xc422ce34c0)
	/opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/core/ledger/kvledger.(*kvLedger).Commit(0xc4213f7480, 0xc421a6ec00, 0xd159c1, 0x14)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger.go:229 +0x806
github.com/hyperledger/fabric/core/ledger/ledgermgmt.(*closableLedger).Commit(0xc42143b0a0, 0xc421a6ec00, 0x0, 0x0)
	<autogenerated>:1 +0x54
github.com/hyperledger/fabric/core/committer.(*LedgerCommitter).Commit(0xc4216f9f60, 0xc421a6ec00, 0x2, 0xc42e8b5b80)
	/opt/gopath/src/github.com/hyperledger/fabric/core/committer/committer_impl.go:62 +0x121
github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).commitBlock(0xc4214a95e0, 0xc421a6ec00, 0x4, 0x4, 0xc421d8db88)
	/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:430 +0x56
github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads(0xc4214a95e0)
	/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:327 +0x45e
created by github.com/hyperledger/fabric/gossip/state.NewGossipStateProvider
	/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:177 +0x73c",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz76:zzzssys,,Sprint 16  - Ledger,,,,,,denyeart,manish-sethi,mffrench,,,,,,,,master,,,true,"03/May/17 3:03 AM;denyeart;[~mffrench]
Please provide reproduction steps.  What is the key you are attempting?

When you say ""logging a warning in the case we encounter non UTF8 key on the API implementations side"" do you mean in the chaincode API return an error, so that we'll never get a transaction (and subsequent commit) with invalid key?  That seems like the most reasonable approach to me, but wanted to double check your intent.","03/May/17 2:36 PM;mffrench;Hi David,

the application which raised this error was initially sending this kind of data :

proCodeAsBytes, err := stub.GetCreator()
proCode := string(proCodeAsBytes) // => non UTF8 string
stub.PutState(proCode, ""some data"");

About the warning log : this was a proposal to keep goleveldb as it is today (and so being able to store non utf8 key into goleveldb storage) but raising a warning in the log can inform developers that this key insertion will not work with couchdb storage.

But I personnally think Fabric can align is key policy to the couchdb one and so raise the error from the chaincode API avoiding panic in the peer (my second proposal - and my favorite).

Finally, I let you the final choice as I don't have a clear view of all fabric use cases ;)

Kind regards,
","07/Jun/17 8:38 PM;denyeart;We are thinking that chaincode shim should require keys be UTF8, and return an endorsement error if not. Manish will do some trials before finalizing the approach.","08/Jun/17 8:43 PM;manish-sethi;I have submitted a CR for this issue - [https://gerrit.hyperledger.org/r/#/c/10363]

In this CR, I raise an error during simulation if a non utf-8 key is supplied and the configured db happens to be the couchdb.

In my opinion, I would be good to not limit the capability of leveldb. At times, folks may want to store binary contents as key (such as hash of some content). Also, it incurs a performance overhead of checking whether a key is a valid utf-8.",,,,,,,,,,,,,,,,,,,,
Peer panic on SIGSEV while connecting to CouchDB,FAB-3555,16152,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,chris.elder,mffrench,mffrench,02/May/17 8:20 AM,19/Jun/17 1:29 PM,26/Apr/18 6:50 AM,14/Jun/17 12:25 AM,,,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,,"Hi,

I encountered following SIGSEV on peer with CouchDB on rev b2a2b3b11481438639bf27ed10b99e490dd23b8c (the one recommended on fabric-sdk-java README). This may be solved and I'll try to retest asap on the fresh master but as I didn't see such issue after a search on Jira I raise this bug for the records.

Best regards,

Mathilde

panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x10 pc=0xaadd06]

goroutine 1 [running]:
panic(0xc70aa0, 0xc420010060)
	/opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/core/ledger/util/couchdb.(*CouchInstance).handleRequest(0xc4201319a0, 0xd53b79, 0x3, 0xc420226480, 0x17, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/util/couchdb/couchdb.go:1265 +0xad6
github.com/hyperledger/fabric/core/ledger/util/couchdb.(*CouchInstance).VerifyConnection(0xc4201319a0, 0x0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/util/couchdb/couchdb.go:337 +0x15d
github.com/hyperledger/fabric/core/ledger/util/couchdb.CreateCouchInstance(0xc42000c06f, 0xf, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xc4201ce9f0, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/util/couchdb/couchdbutil.go:44 +0x245
github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb.NewVersionedDBProvider(0xc4201ce9f0, 0xc4202064d0, 0x1)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb/statecouchdb.go:59 +0xc1
github.com/hyperledger/fabric/core/ledger/kvledger.NewProvider(0xc689e0, 0x0, 0xc42021f4d0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger_provider.go:90 +0x2bf
github.com/hyperledger/fabric/core/ledger/ledgermgmt.initialize()
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:59 +0x14e
github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize.func1()
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:49 +0x14
sync.(*Once).Do(0x13b4dd0, 0xdd76a8)
	/opt/go/src/sync/once.go:44 +0xdb
github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize()
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:50 +0x39
github.com/hyperledger/fabric/peer/node.serve(0xc4202366c0, 0x0, 0x1, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:95 +0x74
github.com/hyperledger/fabric/peer/node.glob..func1(0x135d900, 0xc4202366c0, 0x0, 0x1, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:83 +0x3f
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0x135d900, 0xc4202366a0, 0x1, 0x1, 0x135d900, 0xc4202366a0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:599 +0x234
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x135e180, 0xf, 0xc4200120f5, 0x4)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 +0x367
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x135e180, 0x2b, 0xc4200120f5)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 +0x2b
main.main()
	/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:110 +0x545",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz76:zzzssyu,,Sprint 16  - Ledger,,,,,,ChristopherFerris,denyeart,JonathanLevi,mffrench,,,,,,,master,,,true,"03/May/17 2:57 AM;denyeart;[~mffrench]
I have not seen this error on recent master.  Please do reproduce on latest master and provide reproduction steps.","07/May/17 4:04 PM;mffrench;Hi David,

good news : my test on the last fresh master (rev: 434210518c2d20596cf04f5f2d4256becde9bc80) show the peer is connecting successfully to CouchDB.

Best,","08/May/17 4:23 PM;denyeart;Thanks [~mffrench], I will investigate that code location and determine if a nil pointer is still possible in some scenario.  If I dont see any evidence then I will close this Bug since you can't reproduce it anymore.","08/May/17 7:21 PM;mffrench;In the case you would like to see this SIGSEV in rev b2a2b3b11481438639bf27ed10b99e490dd23b8c here's the extract of my docker-compose :
{code:java}
o0.org0:
  container_name: o0.org0
  # to be changed with image tag corresponding to rev b2a2b3b11481438639bf27ed10b99e490dd23b8c
  image: hyperledger/fabric-orderer:x86_64-1.0.0-alpha
  working_dir: /opt/gopath/src/github.com/hyperledger/fabric/orderer
  command: orderer
  environment:
    # - GRPC_TRACE=all
    # - GRPC_VERBOSITY=debug
    - ORDERER_GENERAL_LOGLEVEL=INFO
    - ORDERER_GENERAL_LISTENADDRESS=0.0.0.0
    - ORDERER_GENERAL_LISTENPORT=7050
    # - ORDERER_GENERAL_GENESISMETHOD=file
    - ORDERER_GENERAL_GENESISPROFILE=Elixir
    # - ORDERER_GENERAL_GENESISFILE=/etc/hyperledger/fabric/orderer/orderer.block
    - ORDERER_GENERAL_LOCALMSPID=Org0
    - ORDERER_GENERAL_LOCALMSPDIR=/etc/hyperledger/fabric/orderer/localMspConfig
    - ORDERER_GENERAL_TLS_ENABLED=true
    - ORDERER_GENERAL_TLS_PRIVATEKEY=/etc/hyperledger/fabric/orderer/localMspConfig/keystore/o0Signer.pem
    - ORDERER_GENERAL_TLS_CERTIFICATE=/etc/hyperledger/fabric/orderer/localMspConfig/signcerts/o0Signer.pem
    - ORDERER_GENERAL_TLS_ROOTCAS=[/etc/hyperledger/fabric/orderer/localMspConfig/cacerts/org0.pem,/etc/hyperledger/fabric/orderer/localMspConfig/cacerts/org1.pem]
    - ORDERER_CFG_PATH=/etc/hyperledger/fabric/orderer
    - BASE_DOCKER_NS=hyperledger
    - DOCKER_NS=hyperledger
    - ARCH=x86_64
    - PROJECT_VERSION=1.0.0-alpha
    - BASE_VERSION=0.3.0
  volumes:
    - ./tmp/conf/Org0/o0:/etc/hyperledger/fabric/orderer
  ports:
    - 8050:7050
    - 8060:6060

cdbp0.org0:
  container_name: cdbp0.org0
  # to be changed with image tag corresponding to rev b2a2b3b11481438639bf27ed10b99e490dd23b8c
  image: hyperledger/fabric-couchdb:x86_64-1.0.0-alpha # to be changed 
  environment:
    - CLEAN_DB_ON_STARTUP=true
  volumes:
    - ./tmp/data/Org0/p0/cdbp:/opt/couchdb/data
  ports:
    - 8084:5984

p0.org0:
  container_name: p0.org0
  # to be changed with image tag corresponding to rev b2a2b3b11481438639bf27ed10b99e490dd23b8c
  image: hyperledger/fabric-peer:x86_64-1.0.0-alpha
  depends_on:
    - o0.org0
    - cdbp0.org0
  working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
  command: sh -c 'echo ""Sleep 2 mn waiting CouchDB to be ready"" ; sleep 120; cp -R /etc/hyperledger/fabric/msp/ /etc/hyperledger/fabric/peer/ && peer node start --peer-defaultchain=false ; sleep 10000'
  environment:
    # - GRPC_TRACE=all
    # - GRPC_VERBOSITY=debug
    # - CORE_PEER_ADDRESSAUTODETECT=true
    - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
    - CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=elixirtov1_default
    - CORE_LOGGING_LEVEL=INFO
    - CORE_NEXT=true
    - CORE_LEDGER_STATE_STATEDATABASE=CouchDB
    - CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=cdbp0.org0:5984
    - CORE_PEER_TLS_ENABLED=true
    - CORE_PEER_ENDORSER_ENABLED=true
    - CORE_PEER_GOSSIP_USELEADERELECTION=true
    - CORE_PEER_GOSSIP_ORGLEADER=false
    - CORE_PEER_PROFILE_ENABLED=true
    # - CORE_PEER_GOSSIP_IGNORESECURITY=true
    - CORE_PEER_ID=p0.org0
    - CORE_PEER_ADDRESS=p0.org0:7051
    - CORE_PEER_GOSSIP_EXTERNALENDPOINT=p0.org0:7051
    - CORE_PEER_LOCALMSPID=Org0
    - CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/fabric/peer/localMspConfig
    - CORE_PEER_GOSSIP_SKIPHANDSHAKE=true
    - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/peer/localMspConfig/signcerts/p0Signer.pem
    - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/peer/localMspConfig/keystore/p0Signer.pem
    - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/peer/localMspConfig/cacerts/org0.pem
    - PEER_CFG_PATH=/etc/hyperledger/fabric/peer
    - BASE_DOCKER_NS=hyperledger
    - DOCKER_NS=hyperledger
    - ARCH=x86_64
    - PROJECT_VERSION=1.0.0-alpha
    - BASE_VERSION=0.3.0
  volumes:
    - /var/run/:/host/var/run/
    - ./tmp/conf/Org0/p0:/etc/hyperledger/fabric/peer
  ports:
    - 8051:7051
    - 8053:7053
{code}
 

 ",08/May/17 7:37 PM;JonathanLevi;Thank you [~mffrench],10/May/17 5:59 PM;ChristopherFerris;[~denyeart] is this absolutely critical for alpha2?,"10/May/17 6:01 PM;denyeart;Not needed for alpha2, just need to confirm there are no lurking issues here.","07/Jun/17 4:31 PM;denyeart;We have not seen another occurrence of this issue, but looking at commit b2a2b3b11481438639bf27ed10b99e490dd23b8c, couchdb.go line 1265 is:

    couchDBReturn.StatusCode = resp.StatusCode

[~chris.elder] , although we would not expect a nil condition, it would be better to return an error and retry, rather than have a nil pointer panic. Could you add extra error/nil/retry handling around that code?  It is line 1333 in most recent master.

 ",,,,,,,,,,,,,,,,
Peer will panic if sent bad block bytes on joinChain(),FAB-3549,16146,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,harrisob@us.ibm.com,harrisob@us.ibm.com,01/May/17 7:43 PM,03/Jun/17 11:05 AM,26/Apr/18 6:50 AM,03/Jun/17 11:05 AM,,,,,,,v1.0.0,,,fabric-endorser,,,,0,Endorser,,,,,,,,"peer0                  | panic: runtime error: invalid memory address or nil pointer dereference
peer0                  | [signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x69d6e3]
peer0                  | 
peer0                  | goroutine 310 [running]:
peer0                  | panic(0xc61040, 0xc42001a040)
peer0                  | 	/opt/go/src/runtime/panic.go:500 +0x1a1
peer0                  | github.com/hyperledger/fabric/protos/utils.GetChainIDFromBlock(0xc4217093a0, 0xc4218db658, 0x69d9e5, 0xc42166ff00, 0x32)
peer0                  | 	/opt/gopath/src/github.com/hyperledger/fabric/protos/utils/blockutils.go:51 +0x273
peer0                  | github.com/hyperledger/fabric/core/peer.CreateChainFromBlock(0xc4217093a0, 0x32, 0x32)
peer0                  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/peer/peer.go:246 +0x2f
peer0                  | github.com/hyperledger/fabric/core/scc/cscc.joinChain(0xc42166ff00, 0x32, 0x32, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)
peer0                  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/scc/cscc/configure.go:159 +0x1d3
peer0                  | github.com/hyperledger/fabric/core/scc/cscc.(*PeerConfiger).Invoke(0xc4201759d0, 0x1365380, 0xc421637480, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)
peer0                  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/scc/cscc/configure.go:120 +0xa8a
peer0                  | github.com/hyperledger/fabric/core/chaincode/shim.(*Handler).handleTransaction.func1(0xc420273260, 0xc42165d900)
peer0                  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim/handler.go:312 +0x770
peer0                  | created by github.com/hyperledger/fabric/core/chaincode/shim.(*Handler).handleTransaction
peer0                  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim/handler.go:327 +0x49
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00xjx:,,,,,,,,harrisob@us.ibm.com,jiangyaoguo,wlahti,,,,,,,,master,,,true,"31/May/17 3:41 PM;wlahti;[~harrisob@us.ibm.com] Can you provide more details about what you were doing that resulted in ""bad block bytes"" that led to this panic? I've found one bug in the method that results in a panic when the block is nil but I want to make sure to cover your exact scenario. ","31/May/17 4:32 PM;wlahti;I looked a little closer and think I've resolved the bug reported here as well, which can occur when the payload header is nil. 

[https://gerrit.hyperledger.org/r/#/c/9985/]","01/Jun/17 3:31 AM;jiangyaoguo;It's strange that it didn't panic before /configure.go:120 +0xa8a (joinChain). If this is triggered by empty blocks or header in blocks, it should panic at /configure.go:110 
{code:java}
// cid, e := utils.GetChainIDFromBlockBytes(args[1])
{code}","01/Jun/17 5:27 PM;harrisob@us.ibm.com;Sorry Will I do not remember the exact block we attempted to send as it was a problem in our code. I would assume that we sent the wrong protobuf object, which would not have had the header that was being looked for.",,,,,,,,,,,,,,,,,,,,
Add short name for revoke commands,FAB-3533,16130,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,skarim,skarim,01/May/17 1:39 AM,03/May/17 12:24 PM,26/Apr/18 6:50 AM,03/May/17 12:24 PM,v1.0.0,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"Add short names for flags for revoke specific commands. Revoke command can use -e (enrollment id), -a (aki), -s (serial) to specify flags. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00xgd:,,Sprint 16 - Membership Service,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Instantiate Chaincode Error,FAB-3532,16129,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,raheelz,raheelz,30/Apr/17 9:41 PM,01/Jun/17 1:55 PM,26/Apr/18 6:50 AM,01/Jun/17 1:55 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,,"I am seeing the following error when instantiating chaincode:
{{{quote}    Error: Error endorsing chaincode: rpc error: code = 2 desc = open /var/hyperledger/production/chaincodes/mychaincode.1.0: no such file or directory
{quote}}}

I was following the instructions from here: http://hyperledger-fabric.readthedocs.io/en/latest/getting_startedv2.html
When running the command:
{quote}CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 CORE_PEER_LOCALMSPID=""Org0MSP"" CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/cacerts/org1.example.com-cert.pem peer chaincode instantiate -o orderer.example.com:7050 -C mychannel -n mychaincode -v 1.0 -c '\{""Args"":\[""init"",""a"",""100"",""b"",""200""\]\}' -P ""OR ('Org0MSP.member','Org1MSP.member')""
{quote}
Thanks.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00xg5:,,,,,,,,ChristopherFerris,markparz,raheelz,,,,,,,,,,,,26/May/17 6:07 AM;ChristopherFerris;[~raheelz] can you confirm that this is still an issue with the v1.0.0-alpha2 release? We've made significant revisions to improve the Getting Started flow. [http://hyperledger-fabric.readthedocs.io/en/latest/getting_started.html] and the directions you followed above were an interim step along the way to the current content. ,"01/Jun/17 1:55 PM;markparz;Hi [~raheelz] Just want to confirm, as [~ChristopherFerris] that you are no longer seeing this, he is exactly right this should not be a problem anymore. In fact, I'm confident enough that I am going to close this bug, if you still are having trouble feel free to reopen.",,,,,,,,,,,,,,,,,,,,,,
Gossip needs to validate sequence number in block messages,FAB-3530,16127,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,30/Apr/17 4:55 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,02/May/17 12:23 AM,v1.0.0,,,,,,v1.0.0,,,fabric-gossip,,,,0,,,,,,,,,"When a peer receives a data message (contains a block) it doesn't verify that the sequence of the block matches the sequence inside the marshaled block, and just calls [VerifyBlock | https://github.com/hyperledger/fabric/blob/master/gossip/api/crypto.go#L35].

I propose to extend the interface VerifyBlock with a sequence number.
* The [implementation | https://github.com/hyperledger/fabric/blob/master/peer/gossip/mcs.go#L120] already unmarshals the block, so there is no point in un-marshalling it outside.
* I don't want to create a dependency between all places where we receive blocks from peers in gossip, so passing the sequence number would preserve the existing state.

[~C0rWin] [~angelo.decaro]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00xfp:,,Sprint 16 - Gossip,,,,,,angelo.decaro,yacovm,,,,,,,,,master,,,true,01/May/17 10:00 AM;angelo.decaro;Makes sense to me. +1,"01/May/17 10:00 AM;yacovm;OK, here you go https://gerrit.hyperledger.org/r/#/c/8791/",,,,,,,,,,,,,,,,,,,,,,
unused variables/functions in events packages,FAB-3529,16126,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,30/Apr/17 1:55 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,03/May/17 10:11 AM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-peer,,,,0,quality,staticanalysis,,,,,,,"cbf$ unused ./...
consumer/consumer.go:36:5: var consumerLogger is unused (U1000)
consumer/consumer.go:144:25: func (*EventsClient).unregister is unused (U1000)
events_test.go:152:6: func closeListenerAndSleep is unused (U1000)
producer/producer.go:28:7: const defaultTimeout is unused (U1000)",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00xfh:,,,,,,,,ChristopherFerris,,,,,,,,,,master,,,true,30/Apr/17 2:18 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8775/,,,,,,,,,,,,,,,,,,,,,,,
unused variables/functions in peer/channel,FAB-3527,16124,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,30/Apr/17 1:25 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,30/Apr/17 11:38 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-peer,,,,0,quality,staticanalysis,,,,,,,"(behave_venv) cbf$ unused ./...
channel.go:36:5: var logger is unused (U1000)
deliverclient.go:60:25: func (*deliverClient).seekOldest is unused (U1000)
deliverclient.go:64:25: func (*deliverClient).seekNewest is unused (U1000)",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00xf1:,,,,,,,,ChristopherFerris,,,,,,,,,,master,,,true,30/Apr/17 2:18 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8771/,,,,,,,,,,,,,,,,,,,,,,,
Increase test coverage for ESCC,FAB-3521,16118,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ales,ales,ales,29/Apr/17 8:10 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,30/Apr/17 2:21 PM,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00xdp:,,,,,,,,ales,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Eventer doesn't trigger subsequent config updates,FAB-3520,16117,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,29/Apr/17 6:27 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,30/Apr/17 11:38 PM,v1.0.0,,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,,"There is a bug in the [eventer | https://github.com/hyperledger/fabric/blob/master/gossip/service/eventer.go#L69-L90] code:
{code}
func (ce *configEventer) ProcessConfigUpdate(config Config) {
	logger.Debugf(""Processing new config for channel %s"", config.ChainID())

	if ce.lastConfig != nil && reflect.DeepEqual(ce.lastConfig.orgMap, config.Organizations()) {
		logger.Debugf(""Ignoring new config for channel %s because it contained no anchor peer updates"", config.ChainID())
		return
	}

	var newAnchorPeers []*peer.AnchorPeer
	for _, group := range config.Organizations() {
		newAnchorPeers = append(newAnchorPeers, group.AnchorPeers()...)
	}

	newConfig := &configStore{
		orgMap:      config.Organizations(),
		anchorPeers: newAnchorPeers,
	}
	ce.lastConfig = newConfig

	logger.Debugf(""Calling out because config was updated for channel %s"", config.ChainID())
	ce.receiver.configUpdated(config)
}
{code}

The first config's orgMap is updated to be the *config.Organizations()*, but that object is the same object after the config updates, just with different content.

The simple test below proves it:
{code}
	if ce.lastConfig != nil && reflect.DeepEqual(ce.lastConfig.orgMap, config.Organizations()) {
		fmt.Println(""<<<"", config.Organizations(), ce.lastConfig.orgMap)
		logger.Debugf(""Ignoring new config for channel %s because it contained no anchor peer updates"", config.ChainID())
		return
	}
{code}
peer0's log prints:
{quote}
<<< map[Org0MSP:0xc42160dc80 Org1MSP:0xc42160dce0] map[Org0MSP:0xc42160dc80 Org1MSP:0xc42160dce0]
{quote}

This bug prevents an update of anchor peers, namely as done in the e2e.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00xdh:,,Sprint 16 - Gossip,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
balance-transafer example fails with proto error,FAB-3519,16116,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Ratnakar,Ratnakar,Ratnakar,29/Apr/17 2:54 PM,30/Apr/17 12:56 AM,26/Apr/18 6:50 AM,30/Apr/17 12:56 AM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-sdk,,,,,,,,"When run the sample with the below scripts

*Terminal - 1*
Start the WebServer

{panel}
./runApp.sh
{panel}

*Terminal - 2*
Call REST end Points

{panel}
./testAPIs.sh
{panel}


Create channel fails with following error:
{code}
[2017-04-29 10:44:51.300] [ERROR] Create-Channel - TypeError: _commonProto.Envelope.decode is not a function
    at /home/itpc/experims/fabric-sdk-node/examples/balance-transfer/node_modules/fabric-client/lib/Chain.js:427:42
(node:19444) UnhandledPromiseRejectionWarning: Unhandled promise rejection (rejection id: 2): Error: TypeError: _commonProto.Envelope.decode is not a function
    at /home/itpc/experims/fabric-sdk-node/examples/balance-transfer/node_modules/fabric-client/lib/Chain.js:427:42
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00xd9:,,,,,,,,Ratnakar,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
[doc]  Is BIOS Enabled Virtualization really needed by fabric?,FAB-3514,16111,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nickgaski,jjjjibm,jjjjibm,28/Apr/17 9:05 PM,02/Jun/17 7:03 PM,26/Apr/18 6:50 AM,02/Jun/17 7:03 PM,,,,,,,v1.0.0,,,fabric-devenv,,,,0,,,,,,,,,"On this web page: 
http://hyperledger-fabric.readthedocs.io/en/latest/dev-setup/devenv.html

I was reviewing the list of pre-requisites: 

Prerequisites
•Git client
•Go - 1.7 or later (for releases before v1.0, 1.6 or later)
•For macOS, Xcode must be installed
•Docker - 1.12 or later
•Docker Compose - 1.8.1 or later
•Pip
•(macOS) you may need to install gnutar, as macOS comes with bsdtar as the default, but the build uses some gnutar flags. You can use Homebrew to install it as follows:

brew install gnu-tar --with-default-names

•(only if using Vagrant) - Vagrant - 1.7.4 or later
•(only if using Vagrant) - VirtualBox - 5.0 or later
•BIOS Enabled Virtualization - Varies based on hardware
•Note: The BIOS Enabled Virtualization may be within the CPU or Security settings of the BIOS

At the very end, note that BIOS enabled virtualization is listed unconditionally as a pre-requisite.  Enabling BIOS Virtualization is painful to say the least.  I am not sure it is mandatory unless you plan to use Vagrant/Virtualbox.  We should not require enabling BIOS virtualization unless it is absolutely required.

I made a query on RocketChat: https://chat.hyperledger.org/channel/fabric-questions?msg=soj9d55kj6D2BrjaC but have received no answer.  Quality team believes it is not needed but no one will commit :-).    Keep watching that space!

So the first destination of this issue  is the fabric dev team to confirm BIOS enabled virtualization is needed if and only if you intend to use Vagrant/Virtualbox. 

If that is the case, the doc needs to be updated to say only Vagrant/Virtualbox users need to enable BIOS virtualization.

If all users need to enable BIOS virtualization, the bullet item should be moved above the Vagrant-only bullets. ","fabric-sdk-node: commit caaf3c0dc78da7f6fa21521e872a4b0de752a292
(but probably not important for this defect). ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00xcd:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Can't build OTE,FAB-3513,16110,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,nnao,nnao,28/Apr/17 8:31 PM,02/Jun/17 8:43 PM,26/Apr/18 6:50 AM,02/Jun/17 8:43 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-quality,fabric-tools,,,0,,,,,,,,,"Environment: 
Using commit a97886a026970a4da3a5582ccb6411765d0717bc.

Steps to reproduce 
--------------------------
$ cd fabric/bddtests/regression/go/ote
$ go build

Expected Results:
Not displayed

Acctual Results:
ubuntu@hyperledger-devenv:88ac3ba:/opt/gopath/src/github.com/hyperledger/fabric/bddtests/regression/go/ote$ go build
# github.com/hyperledger/fabric/bddtests/regression/go/ote
./ote.go:202: cannot use common.ChannelHeader literal (type *common.ChannelHeader) as type []byte in field value
./ote.go:203: cannot use common.SignatureHeader literal (type *common.SignatureHeader) as type []byte in field value
./ote.go:261: cannot use common.ChannelHeader literal (type *common.ChannelHeader) as type []byte in field value
./ote.go:262: cannot use common.SignatureHeader literal (type *common.SignatureHeader) as type []byte in field value
./ote.go:746: not enough arguments in call to localconfig.Load
./ote.go:746: cannot use localconfig.Load() (type *localconfig.Profile) as type *localconfig.TopLevel in assignment
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00xc5:,,,,,,,,kchristidis,nnao,,,,,,,,,master,,,true,10/May/17 1:58 PM;kchristidis;[~scottz] FYI,02/Jun/17 12:19 AM;nnao;https://gerrit.hyperledger.org/r/#/c/8737/,,,,,,,,,,,,,,,,,,,,,,
Consider removing the hash field from the Payload of the gossip DataMessage,FAB-3497,16094,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,28/Apr/17 4:24 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,02/May/17 12:21 AM,v1.0.0,,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,,"The hash field isn't used anywhere but:
{code}
func (mc *msgComparator) dataInvalidationPolicy(thisDataMsg *DataMessage, thatDataMsg *DataMessage) common.InvalidationResult {
	if thisDataMsg.Payload.SeqNum == thatDataMsg.Payload.SeqNum {
		if thisDataMsg.Payload.Hash == thatDataMsg.Payload.Hash {
			return common.MessageInvalidated
		}
		return common.MessageNoAction
	}
{code}
and isn't validated that it matches the real hash inside the serialized block.

Since we have the logic above, a malicious peer can send the same block wrapped in a DataMessage that has a different hash, and this would cause the message to be stored twice (or more...) in other peer's memory.

I say that since we don't use the hash for anything, we get rid of that field. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00x8t:,,Sprint 16 - Gossip,,,,,,yacovm,,,,,,,,,,master,,,true,01/May/17 7:52 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/8785/,,,,,,,,,,,,,,,,,,,,,,,
Nil check missing after proto deserialization,FAB-3496,16093,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,28/Apr/17 4:19 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,03/May/17 10:16 AM,v1.0.0,,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,,"Since proto.Unmarshal may return nil and at the same time, inner structs might have a nil reference, the following case is possible:
{code}
			for payload := s.payloads.Pop(); payload != nil; payload = s.payloads.Pop() {
				rawblock := &common.Block{}
				if err := pb.Unmarshal(payload.Data, rawblock); err != nil {
					logger.Errorf(""Error getting block with seqNum = %d due to (%s)...dropping block"", payload.SeqNum, err)
					continue
				}
				logger.Debug(""New block with sequence number "", payload.SeqNum, "" transactions num "", len(rawblock.Data.Data))
				s.commitBlock(rawblock)
			}
{code}
the block that is received, has a nil Data, and then Data.Data would result in a null pointer panic.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00x8l:,,Sprint 16 - Gossip,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
incorrect log message at state transfer queueNewMessage,FAB-3495,16092,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,28/Apr/17 4:17 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,03/May/17 10:13 AM,v1.0.0,,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,,"This log message that is logged at WARN is misleading, as queueNewMessage is used for message that come from the dissemination layer, while messages about state transfer requests reach *directMessage* instead.
{code}
func (s *GossipStateProviderImpl) queueNewMessage(msg *proto.GossipMessage) {
	if !bytes.Equal(msg.Channel, []byte(s.chainID)) {
		logger.Warning(""Received state transfer request for channel"",
			string(msg.Channel), ""while expecting channel"", s.chainID, ""skipping request..."")
		return
	}

	dataMsg := msg.GetDataMsg()
	if dataMsg != nil {
		// Add new payload to ordered set

		logger.Debugf(""Received new payload with sequence number = [%d]"", dataMsg.Payload.SeqNum)
		s.payloads.Push(dataMsg.GetPayload())
	} else {
		logger.Debug(""Gossip message received is not of data message type, usually this should not happen."")
	}
}
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00x8d:,,Sprint 16 - Gossip,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
revoked user still can enroll,FAB-3490,16087,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aietcn,aietcn,aietcn,28/Apr/17 11:00 AM,18/May/17 11:03 AM,26/Apr/18 6:50 AM,18/May/17 11:03 AM,,,,,,,,,,fabric-ca,,,,0,Security,,,,,,,,"given:
    * user admin with hf.Revoker role
    * user test registered

when admin revoked user test:

{code}
fabric-ca-client revoke --revoke.name test --revoke.reason 'unspecified'
{code}

then test still can enroll successfully, which is not as expected.","latest commit:
    * fabric-ca-server #commit-c131944
    * fabric-ca-client #commit-d35648a

installed by:

{code}
go get -u github.com/hyperledger/fabric-ca/cmd/fabric-ca-client
go get -u github.com/hyperledger/fabric-ca/cmd/fabric-ca-server
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00x7h:,,,,,,,,aietcn,,,,,,,,,,master,,,true,"28/Apr/17 11:49 AM;aietcn;User's state is set to -1 while revoking, but the revoked state is not checked while in login process.",28/Apr/17 11:54 AM;aietcn;fixed in https://gerrit.hyperledger.org/r/#/c/8723/,"18/May/17 8:03 AM;aietcn;[~smithbk] - I noticed that in the latest tag v1.0.0-alpha2 this still hasn't been fixed, so I rebased on v1.0.0-alpha2. Now the Jobbuilder has verified the patch. 

Should I add more reviewers? Who should I append to the reviewer list then?

Also, In the fvt test scripts `scripts/fvt/revoke_test.sh` I find that only the cert revocation action was tested, but the identity revocation is not tested. Maybe someone else can help add relevant tests to the script file.",,,,,,,,,,,,,,,,,,,,,
fabric-ca-client register: argument maxEnrollments not respected,FAB-3489,16086,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aietcn,aietcn,aietcn,28/Apr/17 10:01 AM,02/Jun/17 2:51 PM,26/Apr/18 6:50 AM,02/Jun/17 2:51 PM,v1.0.0,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"* given default maxenrollments in fabric-ca-server config set to 0

* when executing the following command:

{code}
fabric-ca-client register --id.name test --id.secret test --id.affiliation 'org1' --id.maxenrollments 5
{code}

* then query the sqlite db:

{code:sql}
select * from users where id='test';
{code}

result:

{code}
test|test|user|org1|[{""name"":"""",""value"":""""}]|0|0
{code}

The maxEnrollments in the argument is not respected.
","latest commit:
    * fabric-ca-server #commit-c131944
    * fabric-ca-client #commit-d35648a

installed by:

{code}
go get -u github.com/hyperledger/fabric-ca/cmd/fabric-ca-client
go get -u github.com/hyperledger/fabric-ca/cmd/fabric-ca-server
{code}
",,,,,,,,,,,,,,,FAB-3011,,,,28/Apr/17 10:00 AM;aietcn;fabric-ca-server-config.yaml;https://jira.hyperledger.org/secure/attachment/10686/fabric-ca-server-config.yaml,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00x79:,,,,,,,,aietcn,smithbk,,,,,,,,,,,,,28/Apr/17 11:46 AM;aietcn;fix committed: https://gerrit.hyperledger.org/r/#/c/8721/,17/May/17 2:06 AM;aietcn;#FAB-3011 should fix this.,"02/Jun/17 1:55 PM;smithbk;Tian, please verify if this is fixed and close if it is.   Thanks.",02/Jun/17 2:50 PM;aietcn;[~smithbk] - verified by the fix commit of #FAB-3011. I'm closing this one.,,,,,,,,,,,,,,,,,,,,
check chaincode version with ProposalResponseData ,FAB-3487,16083,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jiangyaoguo,jiangyaoguo,jiangyaoguo,28/Apr/17 8:23 AM,03/May/17 1:13 AM,26/Apr/18 6:50 AM,03/May/17 1:13 AM,,,,,,,,,,,,,,0,,,,,,,,,As suggested by [~muralisr] in https://gerrit.hyperledger.org/r/#/c/8465/， now we enforce one action per transaction. Later we may want to extend this to mutiple chaincode Action. It's better to use 1 proposalResponseData as parameter for tcvalidator.validateChaincodeVersion. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00x6l:,,,,,,,,jiangyaoguo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
No need send to orderer for install chaincode,FAB-3486,16082,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,grapebaba,grapebaba,grapebaba,28/Apr/17 7:30 AM,15/Jun/17 2:34 AM,26/Apr/18 6:50 AM,15/Jun/17 2:34 AM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-sdk-py,,,,0,,,,,,,,,No need send to orderer for install chaincode,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00x6d:,,,,,,,,baohua,grapebaba,,,,,,,,,,,,,15/Jun/17 2:34 AM;baohua;I guess we have remove this part of calling code.,,,,,,,,,,,,,,,,,,,,,,,
"Succeed to get gossip logging level of peer0/1, but fail to get it from peer2/3",FAB-3481,16077,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,amber-zhang,amber-zhang,28/Apr/17 3:15 AM,03/May/17 5:30 PM,26/Apr/18 6:50 AM,03/May/17 5:29 PM,,,,,,,v1.0.0,,,,,,,0,common-components,gossip,,,,,,,"Base on the docker-compose.yaml under fabric/example/e2e_cli directory, set 'debug' as default gossip logging level for peer0/1/23, run 'docker-compose up -d' to start all containers, 
login cli contain to check all peers' logging level via command 'CORE_PEER_ADDRESS=peerX:7051 peer logging getlevel gossip' 

Succeed to get gossip logging level of peer0 and peer 1, but fail to get  it for peer2 and peer3. Details, please see following info.

root@18c5c1c69e6d:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer0:7051 peer logging getlevel gossip
2017-04-27 13:22:42.394 UTC [cli/logging] getLevel -> INFO 001 Current log level for peer module 'gossip': DEBUG
2017-04-27 13:22:42.394 UTC [main] main -> INFO 002 Exiting.....

root@18c5c1c69e6d:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer1:7051 peer logging getlevel gossip
2017-04-27 13:22:49.752 UTC [cli/logging] getLevel -> INFO 001 Current log level for peer module 'gossip': DEBUG
2017-04-27 13:22:49.752 UTC [main] main -> INFO 002 Exiting.....

root@18c5c1c69e6d:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer2:7051 peer logging getlevel gossip
2017-04-27 13:22:59.792 UTC [cli/logging] getLevel -> WARN 001 PER:404 - Error trying to connect to local peer
/opt/gopath/src/github.com/hyperledger/fabric/peer/common/common.go:82 github.com/hyperledger/fabric/peer/common.GetAdminClient
/opt/gopath/src/github.com/hyperledger/fabric/peer/clilogging/getlevel.go:46 github.com/hyperledger/fabric/peer/clilogging.getLevel
/opt/gopath/src/github.com/hyperledger/fabric/peer/clilogging/getlevel.go:37 github.com/hyperledger/fabric/peer/clilogging.glob..func1
/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:605 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute
/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC
/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute
/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:118 main.main
/opt/go/src/runtime/proc.go:192 runtime.main
/opt/go/src/runtime/asm_amd64.s:2087 runtime.goexit
Caused by: grpc: timed out when dialing
2017-04-27 13:22:59.794 UTC [main] main -> INFO 002 Exiting.....

root@18c5c1c69e6d:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer3:7051 peer logging getlevel gossip
2017-04-27 13:24:35.284 UTC [cli/logging] getLevel -> WARN 001 PER:404 - Error trying to connect to local peer
/opt/gopath/src/github.com/hyperledger/fabric/peer/common/common.go:82 github.com/hyperledger/fabric/peer/common.GetAdminClient
/opt/gopath/src/github.com/hyperledger/fabric/peer/clilogging/getlevel.go:46 github.com/hyperledger/fabric/peer/clilogging.getLevel
/opt/gopath/src/github.com/hyperledger/fabric/peer/clilogging/getlevel.go:37 github.com/hyperledger/fabric/peer/clilogging.glob..func1
/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:605 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute
/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC
/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute
/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:118 main.main
/opt/go/src/runtime/proc.go:192 runtime.main
/opt/go/src/runtime/asm_amd64.s:2087 runtime.goexit
Caused by: grpc: timed out when dialing
2017-04-27 13:24:35.289 UTC [main] main -> INFO 002 Exiting.....","MacOS  version 10.12.1

root@18c5c1c69e6d:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer -v
Fabric peer server version 1.0.0-snapshot-d4cc809",,,,,,,,,,,,,,,,,,,28/Apr/17 3:06 AM;amber-zhang;docker-compose.yaml;https://jira.hyperledger.org/secure/attachment/10685/docker-compose.yaml,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00x59:,,,,,,,,amber-zhang,wlahti,,,,,,,,,,,,,"28/Apr/17 7:47 AM;amber-zhang;Succeed to set gossip logging level on peer0/1, but fail to do it on peer2/3

root@311101494a8b:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer0:7051 peer logging setlevel gossip notice
2017-04-28 07:44:57.653 UTC [cli/logging] setLevel -> INFO 001 Log level set for peer module 'gossip': NOTICE
2017-04-28 07:44:57.653 UTC [main] main -> INFO 002 Exiting.....

root@311101494a8b:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer2:7051 peer logging setlevel gossip notice
2017-04-28 07:45:10.175 UTC [cli/logging] setLevel -> WARN 001 PER:404 - Error trying to connect to local peer
/opt/gopath/src/github.com/hyperledger/fabric/peer/common/common.go:82 github.com/hyperledger/fabric/peer/common.GetAdminClient
/opt/gopath/src/github.com/hyperledger/fabric/peer/clilogging/setlevel.go:47 github.com/hyperledger/fabric/peer/clilogging.setLevel
/opt/gopath/src/github.com/hyperledger/fabric/peer/clilogging/setlevel.go:38 github.com/hyperledger/fabric/peer/clilogging.glob..func4
/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:605 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute
/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC
/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute
/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:118 main.main
/opt/go/src/runtime/proc.go:192 runtime.main
/opt/go/src/runtime/asm_amd64.s:2087 runtime.goexit
Caused by: grpc: timed out when dialing
2017-04-28 07:45:10.175 UTC [main] main -> INFO 002 Exiting.....

root@311101494a8b:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer1:7051 peer logging setlevel gossip notice
2017-04-28 07:45:20.633 UTC [cli/logging] setLevel -> INFO 001 Log level set for peer module 'gossip': NOTICE
2017-04-28 07:45:20.634 UTC [main] main -> INFO 002 Exiting.....

root@311101494a8b:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer4:7051 peer logging setlevel gossip notice
2017-04-28 07:45:39.431 UTC [cli/logging] setLevel -> WARN 001 PER:404 - Error trying to connect to local peer
/opt/gopath/src/github.com/hyperledger/fabric/peer/common/common.go:82 github.com/hyperledger/fabric/peer/common.GetAdminClient
/opt/gopath/src/github.com/hyperledger/fabric/peer/clilogging/setlevel.go:47 github.com/hyperledger/fabric/peer/clilogging.setLevel
/opt/gopath/src/github.com/hyperledger/fabric/peer/clilogging/setlevel.go:38 github.com/hyperledger/fabric/peer/clilogging.glob..func4
/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:605 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute
/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC
/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute
/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:118 main.main
/opt/go/src/runtime/proc.go:192 runtime.main
/opt/go/src/runtime/asm_amd64.s:2087 runtime.goexit
Caused by: grpc: timed out when dialing
2017-04-28 07:45:39.432 UTC [main] main -> INFO 002 Exiting.....
root@311101494a8b:/opt/gopath/src/github.com/hyperledger/fabric/peer# 
","03/May/17 5:30 PM;wlahti;Marking this item complete as it has also been reported via https://jira.hyperledger.org/browse/FAB-3608, which I recently updated.",,,,,,,,,,,,,,,,,,,,,,
Replace ccParts with ChaincodeInstance,FAB-3480,16076,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jiangyaoguo,jiangyaoguo,jiangyaoguo,28/Apr/17 2:32 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,03/May/17 1:13 AM,,,,,,,,,,,,,,0,,,,,,,,,"ccParts defined in /core/chincode locally holds name/version/chain of chaincode, which is similar to sysccprovider.ChaincodeInstance. We should replace ccParts with ChaincodeInstance.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00x51:,,,,,,,,jiangyaoguo,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"""mychannel.tx"" for e2e_sdk_node is broken",FAB-3478,16074,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,yuki-kon,yuki-kon,27/Apr/17 11:19 PM,04/May/17 8:11 PM,26/Apr/18 6:50 AM,04/May/17 8:11 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,,,,,,,,,"Environment: 
--------------------------
Client is using fabric-sdk-node and running on Fabric Eco system on following changeset
hyperledger/fabric-ca                x86_64-1.0.0-snapshot-b4ce73f
hyperledger/fabric-couchdb       x86_64-1.0.0-snapshot-efd9307
hyperledger/fabric-kafka             x86_64-1.0.0-snapshot-efd9307
hyperledger/fabric-zookeeper  x86_64-1.0.0-snapshot-efd9307
hyperledger/fabric-orderer        x86_64-1.0.0-snapshot-efd9307
hyperledger/fabric-peer             x86_64-1.0.0-snapshot-efd9307
hyperledger/fabric-javaenv        x86_64-1.0.0-snapshot-efd9307
hyperledger/fabric-ccenv            x86_64-1.0.0-snapshot-efd9307

Steps to reproduce 
--------------------------
1. set up fabric-sdk-node based on ReadMe.
2. run docker-compose up --force-recreate to launch the network
3. run gulp test
4. run test/integration/new-chain.js

Expected Results
--------------------------
A new channel is created because a channel ""mychannel"" doesn't exist before executing this test script.

Actual Results
--------------------------
Creating a new channel fails.

Client SDK output the following error log. Detailed log is attached.

debug: [Client.js]: createChannel - start
debug: [Client.js]: createChannel - about to send envelope
debug: [Orderer.js]: sendBroadcast - start
debug: [Orderer.js]: sendBroadcast - sent message
debug: [Orderer.js]: sendBroadcast - on data response: {""status"":""BAD_REQUEST""}
error: [Orderer.js]: sendBroadcast - reject with BAD_REQUEST
debug: [Client.js]: createChannel - rejecting with Error: BAD_REQUEST
ok 4 Got back failure error. Error code: Error: BAD_REQUEST

Orderer output the following error log. Detailed log is attached.

2017-04-27 22:18:29.273 UTC [orderer/common/broadcast] Handle -> WARN 14a Rejecting CONFIG_UPDATE because: Error validating DeltaSet: Attempt to set key [Policy] /Channel/Admins to version 0, but key is at version 0


Cause
--------------------------
It seems like that a channel configtx ""test/fixtures/channel/mychannel.tx"" is broken.
After replacing ""mychannel.tx"" to a new one generated by configtx tool manually, a new channel is created successfully.
",,,,,,,,,,,,,,,,,,,,27/Apr/17 11:21 PM;yuki-kon;newchain.log.txt;https://jira.hyperledger.org/secure/attachment/10683/newchain.log.txt,27/Apr/17 11:20 PM;yuki-kon;orderer0.log.txt;https://jira.hyperledger.org/secure/attachment/10684/orderer0.log.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00x4l:,,,,,,,,yuki-kon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] on Win10Pro: not ok 35 Caught error in Package.package tests,FAB-3472,16068,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jjjjibm,jjjjibm,jjjjibm,27/Apr/17 7:50 PM,04/May/17 2:10 PM,26/Apr/18 6:50 AM,04/May/17 2:03 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,cannotrecreate,node-SDK,,,,,,,"When running gulp test-headless on Windows 10 Pro (without Vagrant of course), this test fails:

# Verify byte data begin
not ok 35 Caught error in Package.package tests
  ---
    operator: fail
    at: Packager.package.then.then.then.catch (C:\Users\ibmadmin\go\src\github.com\hyperledger\fabric-sdk-node\test\unit\chain.js:386:5)
  ...
# Error: ENOENT: no such file or directory, open 'C:\tmp\test-deploy-copy.tar.gz'
# at Error (native)
# at Object.fs.openSync (fs.js:641:18)
# at Object.fs.writeFileSync (fs.js:1347:33)
# at Packager.package.then.then.then (C:\Users\ibmadmin\go\src\github.com\hyperledger\fabric-sdk-node\test\unit\chain.js:374:6

(Output above is not meant to be a numbered list.  It looks like '#' confuses Jira,)

How to recreate:
1.Get a copy of Windows 10 Pro.
2.Clone fabric-sdk-node to a local directory on that Win10.
3.Build the node-sdk (npm install, gulp ca, etc)
4.Run gulp test-headless ","Windows 10 Pro is installed and running on a vlaunch VM. 
Fabric-sdk-node is installed and built on this VM.  

node-sdk: commit caaf3c0dc78da7f6fa21521e872a4b0de752a292

fabric and fabric-ca are neither installed nor built.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:rh8,,,,,,,,jjjjibm,,,,,,,,,,,,,,04/May/17 2:05 PM;jjjjibm;I cannot recreate this issue.  I git pull'd and tried the test again to be sure.  We can re-open this issue if it surfaces again.,,,,,,,,,,,,,,,,,,,,,,,
GetStateByRange API: simple key and composite key collisions - Java chaincode fix,FAB-3470,16066,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,gujingxiao,denyeart,denyeart,27/Apr/17 7:03 PM,25/Jan/18 6:13 PM,26/Apr/18 6:50 AM,25/Jan/18 6:13 PM,v1.0.0,,,,,,v1.2,,,fabric-chaincode-java,,,,0,java-chaincode,,,,,,,,FAB-2183 bug fix for go chaincode needs to be applied to java chaincode as well.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00u0u:,,,,,,,,ChristopherFerris,denyeart,mastersingh24,sanchezl,,,,,,,master,,,true,"26/May/17 12:43 AM;ChristopherFerris;[~denyeart] if we aren't shipping Java CC, then shouldn't this be for a Future release?","26/May/17 3:55 AM;denyeart;Agreed, this one can go in when java chaincode goes live, I'll mark it for 1.1.",24/Nov/17 10:52 PM;mastersingh24;Changing this to 1.2 given Java CC is at best still experimental for v1.1,08/Jan/18 2:24 AM;denyeart;Changed to Medium since Java chaincode is not a production feature as of 1.1.,25/Jan/18 6:13 PM;sanchezl;Already merged: https://gerrit.hyperledger.org/r/c/14461/,,,,,,,,,,,,,,,,,,,
Wrong HTTP status code reported in logs for invalid body of request,FAB-3468,16064,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,rickr,rickr,27/Apr/17 5:28 PM,30/Sep/17 6:25 PM,26/Apr/18 6:50 AM,30/Sep/17 6:25 PM,v1.0.0,,,,,,v1.1,,,fabric-ca,,,,0,,,,,,,,,"SDK POST:
http://localhost:7054/api/v1/revoke
body:
{""serial"":""04372551502DA6EFF9E9C2AF25F08DAF3CBD16035"",""aki"":""D8A5B3CAC1B821F6E4B487CEAF1FD239CDCFC310894150908B90F05E9179556A"",""reason"":1}

what sdk is getting back 
{""success"":false,""result"":null,""errors"":[{""code"":10001,""message"":""json: cannot unmarshal number into Go value of type string""}],""messages"":[]}

fabric-ca log:
2017/04/27 17:15:38 [DEBUG] Received request
POST /api/v1/revoke
Authorization: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUIzekNDQVlTZ0F3SUJBZ0lVTkdNTFJoZzduazVoU0lTWHVWRm1ZU2FOcnFRd0NnWUlLb1pJemowRUF3SXcKWURFTE1Ba0dBMVVFQmhNQ1ZWTXhFekFSQmdOVkJBZ1RDa05oYkdsbWIzSnVhV0V4RmpBVUJnTlZCQWNURFZOaApiaUJHY21GdVkybHpZMjh4RVRBUEJnTlZCQW9UQ0hCbFpYSlBjbWN4TVJFd0R3WURWUVFERXdod1pXVnlUM0puCk1UQWVGdzB4TnpBME1qY3hOekE1TURCYUZ3MHhPREF6TWpjd01UQTVNREJhTUJBeERqQU1CZ05WQkFNVEJXRmsKYldsdU1Ga3dFd1lIS29aSXpqMENBUVlJS29aSXpqMERBUWNEUWdBRUdyTnlvZE12VWpibGlSVWdzay8wc3NtQwpZa1RjK0N6VmxrQ2w3NTFOMGltUW96Tkoybnd6eHJuODVOTGhLcXd3akxOa1JzRTJ5L2tzVEtyTmR5b2hwcU5zCk1Hb3dEZ1lEVlIwUEFRSC9CQVFEQWdJRU1Bd0dBMVVkRXdFQi93UUNNQUF3SFFZRFZSME9CQllFRkphUGg2YXIKcXJmTHI5UlREZ0w2REVnTFpmRTlNQ3NHQTFVZEl3UWtNQ0tBSU5pbHM4ckJ1Q0gyNUxTSHpxOGYwam5OejhNUQppVUZRa0l1UThGNlJlVlZxTUFvR0NDcUdTTTQ5QkFNQ0Ewa0FNRVlDSVFDM2g0NjBJcTVycVNNc29KTmsySmxtClpTWENmRm5FQ04wUmErbnZBSkNSOEFJaEFQNy9yQ3ZyeGlnMkNsbjJkSUd2ZndpOEFzTmpHeHdTQXpxNnkzdGcKWG1DMAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==.MEQCIB44Ubfi976iaGQu087skhJwORzfSljULus7PLav8xhWAiAiHds2W7DceMqXthnMTszUstEg2hlDKR3YFmmo1pJp6Q==
{""serial"":""04372551502DA6EFF9E9C2AF25F08DAF3CBD16035"",""aki"":""D8A5B3CAC1B821F6E4B487CEAF1FD239CDCFC310894150908B90F05E9179556A"",""reason"":1}
2017/04/27 17:15:38 [DEBUG] Checking for revocation/expiration of certificate owned by 'admin'
2017/04/27 17:15:38 [DEBUG] DB: Get certificate by serial (34630b46183b9e4e61488497b9516661268daea4) and aki (d8a5b3cac1b821f6e4b487ceaf1fd239cdcfc310894150908b90f05e9179556a)
2017/04/27 17:15:38 [DEBUG] Successful authentication of 'admin'
2017/04/27 17:15:38 [DEBUG] Revoke request received
2017/04/27 17:15:38 [INFO] 10.0.2.2:39518 - ""POST /api/v1/revoke"" 200


fabric-ca level
commit d35648a9e79d55ca879c22b91a4ac4bf8077d70b
Merge: d9a1c61 c131944
Author: Christopher Ferris <chris.ferris@gmail.com>
Date: Thu Apr 27 15:23:40 2017 +0000




",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:rhw9o9w,,,,,,,,rickr,smithbk,,,,,,,,,,,,,"28/Apr/17 9:44 PM;smithbk;The reason must be a string.

                ""reason"": {
                  ""type"": [
                    ""string"",
                    ""null""
                  ],
                  ""description"": ""The reason for revocation.   \nSee https://godoc.org/golang.org/x/crypto/ocsp for valid values.   \nThe default value is 0 (ocsp.Unspecified).""
                }
","01/May/17 3:04 PM;rickr;ok so I send reason as a string and it works. 
I went back a week or so and we were sending it as an integer and it worked fine. Then switched on that build so it was a String and it failed. 
 So this had to  be a change.
At any case sending it as a integer seems to work except the client gets back a 400 but on the faba-ca logs its a  200 which is still an issue.","13/May/17 7:07 AM;smithbk;The problem turned out to be in CFSSL code, and there are actually multiple problems as I dove into it:

1) logging the wrong message

2) returning the wrong HTTP status code

3) doesn't allow using our own error codes

The bottom line is that CFSSL's error handling code is not extensible and just not very good.  So we're going to stop using CFSSL for error handling and fixing this will be part of the overall improvement for error handling in FAB-3581.   See that FAB for more info on the design.

 

 

 ",13/May/17 8:13 AM;smithbk;See https://gerrit.hyperledger.org/r/#/c/9341/,"26/May/17 1:41 AM;smithbk;Since this only affected SDK writers really and thus is a low severity bug ... AND because the fix is more intrusive and introduces more risk compared to the gain for v1, this is being deferred until v1.1.  ",19/Jul/17 5:29 PM;smithbk;This is fixed by https://gerrit.hyperledger.org/r/#/c/11571/ which is for https://jira.hyperledger.org/browse/FAB-3581 (and this one),"21/Jul/17 3:31 PM;smithbk;Since FAB-3581 is v1.1, so is this",,,,,,,,,,,,,,,,,
"unable to generate genesis block for  ""getting started"" tutorial",FAB-3467,16063,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nickgaski,vjuge,vjuge,27/Apr/17 5:27 PM,30/Mar/18 5:23 AM,26/Apr/18 6:50 AM,11/May/17 2:40 PM,v1.0.0-alpha1,,,,,,,,,fabric-examples,,,,0,v1.0,,,,,,,,"Hi,

I've run through the tutorial : 
http://hyperledger-fabric.readthedocs.io/en/latest/getting_startedv2.html#
and I'm stuck at the step to generate the genesis block :

1/ PREREQUISITES :
{noformat}
$ sudo docker version


Client:
 Version:      1.12.6
 API version:  1.24
 Go version:   go1.6.2
 Git commit:   78d1802
 Built:        Tue Jan 31 23:35:14 2017
 OS/Arch:      linux/amd64

Server:
 Version:      1.12.6
 API version:  1.24
 Go version:   go1.6.2
 Git commit:   78d1802
 Built:        Tue Jan 31 23:35:14 2017
 OS/Arch:      linux/amd64

$ sudo docker-compose version
docker-compose version 1.8.0, build unknown
docker-py version: 1.9.0
CPython version: 2.7.12
OpenSSL version: OpenSSL 1.0.2g  1 Mar 2016

$ go version
go version go1.8.1 linux/amd64
{noformat}




2/ STEPS
{noformat}
$ pwd
/home/xxxx/devel/fabric-sample

$ curl -L https://logs.hyperledger.org/sandbox/vex-yul-hyp-jenkins-2/fabric-verify-x86_64_1/5/release.tar.gz -o release.tar.gz 2> /dev/null;  tar -xvf release.tar.gz

release/
release/windows-amd64/
release/windows-amd64/install/
release/windows-amd64/install/get-docker-images.sh
release/windows-amd64/bin/
release/windows-amd64/bin/configtxgen
release/windows-amd64/bin/cryptogen
release/linux-amd64/
release/linux-amd64/install/
release/linux-amd64/install/get-docker-images.sh
release/linux-amd64/bin/
release/linux-amd64/bin/configtxgen
release/linux-amd64/bin/cryptogen
release/samples/
release/samples/e2e/
release/samples/e2e/docker-compose.yaml
release/samples/e2e/docker-compose-no-tls.yaml
release/samples/e2e/README.rst
release/samples/e2e/peer-base/
release/samples/e2e/peer-base/peer-base-no-tls.yaml
release/samples/e2e/peer-base/peer-base.yaml
release/samples/e2e/crypto-config.yaml
release/samples/e2e/scripts/
release/samples/e2e/scripts/script.sh
release/samples/e2e/configtx.yaml
release/samples/e2e/network_setup.sh
release/samples/e2e/chaincodes/
release/samples/e2e/chaincodes/go/
release/samples/e2e/chaincodes/go/marbles02/
release/samples/e2e/chaincodes/go/marbles02/marbles_chaincode.go
release/samples/e2e/chaincodes/go/chaincode_example02/
release/samples/e2e/chaincodes/go/chaincode_example02/chaincode_example02.go
release/samples/e2e/docker-compose-template.yaml
release/linux-ppc64le/
release/linux-ppc64le/install/
release/linux-ppc64le/install/get-docker-images.sh
release/linux-ppc64le/bin/
release/linux-ppc64le/bin/configtxgen
release/linux-ppc64le/bin/cryptogen
release/templates/
release/templates/get-docker-images.in
release/linux-s390x/
release/linux-s390x/install/
release/linux-s390x/install/get-docker-images.sh
release/linux-s390x/bin/
release/linux-s390x/bin/configtxgen
release/linux-s390x/bin/cryptogen
release/darwin-amd64/
release/darwin-amd64/install/
release/darwin-amd64/install/get-docker-images.sh
release/darwin-amd64/bin/
release/darwin-amd64/bin/configtxgen
release/darwin-amd64/bin/cryptogen

$ cd release/linux-amd64/install

$ sudo ./get-docker-images.sh
<< standard output truncated, but no particular errors >>
<< all docker images present on the host where deleted prior to this action >>

$ sudo docker images
REPOSITORY                     TAG                  IMAGE ID            CREATED             SIZE
hyperledger/fabric-couchdb     x86_64-1.0.0-alpha   f3ce31e25872        5 weeks ago         1.515 GB
hyperledger/fabric-kafka       x86_64-1.0.0-alpha   589dad0b93fc        5 weeks ago         1.299 GB
hyperledger/fabric-zookeeper   x86_64-1.0.0-alpha   9a51f5be29c1        5 weeks ago         1.314 GB
hyperledger/fabric-orderer     x86_64-1.0.0-alpha   5685fd77ab7c        5 weeks ago         181.6 MB
hyperledger/fabric-peer        x86_64-1.0.0-alpha   784c5d41ac1d        5 weeks ago         184.2 MB
hyperledger/fabric-javaenv     x86_64-1.0.0-alpha   a08f85d8f0a9        5 weeks ago         1.424 GB
hyperledger/fabric-ccenv       x86_64-1.0.0-alpha   91792014b61f        5 weeks ago         1.294 GB

$ os_arch=$(echo ""$(uname -s)-amd64"" | awk '{print tolower($0)}')
$ echo $os_arch
linux-amd64

$ cd ../../samples/e2e

$ ls
chaincodes/    crypto-config.yaml          docker-compose-template.yaml  network_setup.sh*  README.rst
configtx.yaml  docker-compose-no-tls.yaml  docker-compose.yaml           peer-base/         scripts/

$ ./../../$os_arch/bin/cryptogen generate --config=./crypto-config.yaml
org1.example.com
2017-04-27 19:24:28.581 CEST [bccsp] GetDefault -> WARN 001 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-27 19:24:28.615 CEST [bccsp] GetDefault -> WARN 002 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-27 19:24:28.617 CEST [bccsp] GetDefault -> WARN 003 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-27 19:24:28.618 CEST [bccsp] GetDefault -> WARN 004 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-27 19:24:28.620 CEST [bccsp] GetDefault -> WARN 005 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
org2.example.com
2017-04-27 19:24:28.622 CEST [bccsp] GetDefault -> WARN 006 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-27 19:24:28.623 CEST [bccsp] GetDefault -> WARN 007 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-27 19:24:28.625 CEST [bccsp] GetDefault -> WARN 008 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-27 19:24:28.626 CEST [bccsp] GetDefault -> WARN 009 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-27 19:24:28.627 CEST [bccsp] GetDefault -> WARN 00a Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-27 19:24:28.629 CEST [bccsp] GetDefault -> WARN 00b Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-27 19:24:28.630 CEST [bccsp] GetDefault -> WARN 00c Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-27 19:24:28.632 CEST [bccsp] GetDefault -> WARN 00d Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.

$ ls -lrt crypto-config
total 8
drwxr-xr-x 4 vju vju 4096 avril 27 19:24 peerOrganizations
drwxr-xr-x 3 vju vju 4096 avril 27 19:24 ordererOrganizations

{noformat}

-> at this stage we got warning messages, but the certificates seems to be generated correctly

{noformat}
$ export ORDERER_CFG_PATH=$PWD
$ echo $ORDERER_CFG_PATH
/home/xxxx/devel/fabric-sample/release/samples/e2e

{noformat}

Next action generates the error :

{noformat}
$ ./../../$os_arch/bin/configtxgen -profile TwoOrgs -outputBlock orderer.block
2017-04-27 19:27:11.437 CEST [common/configtx/tool] main -> INFO 001 Loading configuration
2017-04-27 19:27:11.437 CEST [configtx/tool/localconfig] Load -> CRIT 002 Error reading configuration: Unsupported Config Type """"
panic: Error reading configuration: Unsupported Config Type """"

goroutine 1 [running]:
panic(0x88ade0, 0xc42017d3a0)
	/opt/go/go1.7.linux.amd64/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panicf(0xc42015b620, 0x95e309, 0x1f, 0xc42017d2c0, 0x1, 0x1)
	/w/workspace/fabric-verify-x86_64_1/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:194 +0x127
github.com/hyperledger/fabric/common/configtx/tool/localconfig.Load(0x7ffe5adb26d7, 0x7, 0x0)
	/w/workspace/fabric-verify-x86_64_1/gopath/src/github.com/hyperledger/fabric/common/configtx/tool/localconfig/config.go:195 +0x79c
main.main()
	/w/workspace/fabric-verify-x86_64_1/gopath/src/github.com/hyperledger/fabric/common/configtx/tool/configtxgen/main.go:204 +0x405

{noformat}


and i can't go further...

please advise.",,,,,,,,,,,,,,,,,FAB-5901,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00x1x:,,,,,,,,davidkhala,nickgaski,raheelz,vjuge,zupan,,,,,,,,,,"27/Apr/17 7:37 PM;nickgaski;

Also, will you kindly try the following from e2e
- ./network_setup.sh down
and then 
- ./network_setup.sh restart

Let's see if that works, and if not, where it fails...","27/Apr/17 8:19 PM;nickgaski;A few additional thoughts.  Try upgrading your Go to 1.7

And make sure you didn't compile the configtxgen binary yourself.  The current tool looks for a more comprehensive configuration, which the 
supplied configtx.yaml does not have.","28/Apr/17 9:54 AM;zupan;I also experienced the same problem, but then I started from scratch including reinstalling all dependencies (go, docker-compose, ...). I also removed all old code previously downloaded from git master and curl.

Also from you logs it seems that you are installing go 1.8.1, but then from the error you can see: {code}/opt/go/go1.7.linux.amd64/src/runtime/panic.go:500 +0x1a1{code}

I installed GO following [docs|https://golang.org/doc/install#tarball] and only setting GOPATH (without GOROOT).
After that, I was able to generate genesis block and start blockchain. I assume that wrong go paths were the reason for the problem. 

","28/Apr/17 10:29 AM;vjuge;{noformat}

$ sudo ./network_setup.sh down
setting to default channel 'mychannel'
WARNING: The ARCH_TAG variable is not set. Defaulting to a blank string.
WARNING: The CHANNEL_NAME variable is not set. Defaulting to a blank string.
Removing network e2e_default
WARNING: Network e2e_default not found.
b66a267a211e

85d7549a1b19
3e81939779c5
3e833bfd1f4b
4d5a9b89a30b
---- No images available for deletion ----

{noformat}

{noformat}
$ sudo ./network_setup.sh restart
setting to default channel 'mychannel'
WARNING: The ARCH_TAG variable is not set. Defaulting to a blank string.
WARNING: The CHANNEL_NAME variable is not set. Defaulting to a blank string.
Removing network e2e_default
WARNING: Network e2e_default not found.
---- No containers available for deletion ----
---- No images available for deletion ----
OS_ARCH linux-amd64

##########################################################
############## Generate certificates #####################
##########################################################
org1.example.com
2017-04-28 12:28:00.478 CEST [bccsp] GetDefault -> WARN 001 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-28 12:28:00.506 CEST [bccsp] GetDefault -> WARN 002 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-28 12:28:00.508 CEST [bccsp] GetDefault -> WARN 003 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-28 12:28:00.510 CEST [bccsp] GetDefault -> WARN 004 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-28 12:28:00.511 CEST [bccsp] GetDefault -> WARN 005 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
org2.example.com
2017-04-28 12:28:00.513 CEST [bccsp] GetDefault -> WARN 006 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-28 12:28:00.515 CEST [bccsp] GetDefault -> WARN 007 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-28 12:28:00.517 CEST [bccsp] GetDefault -> WARN 008 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-28 12:28:00.518 CEST [bccsp] GetDefault -> WARN 009 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-28 12:28:00.520 CEST [bccsp] GetDefault -> WARN 00a Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-28 12:28:00.522 CEST [bccsp] GetDefault -> WARN 00b Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-28 12:28:00.523 CEST [bccsp] GetDefault -> WARN 00c Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2017-04-28 12:28:00.524 CEST [bccsp] GetDefault -> WARN 00d Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.


##########################################################
#########  Generating Orderer Genesis block ##############
##########################################################
2017-04-28 12:28:00.555 CEST [common/configtx/tool] main -> INFO 001 Loading configuration
2017-04-28 12:28:00.556 CEST [configtx/tool/localconfig] Load -> CRIT 002 Error reading configuration: Unsupported Config Type """"
panic: Error reading configuration: Unsupported Config Type """"

goroutine 1 [running]:
panic(0x88ade0, 0xc4201853d0)
	/opt/go/go1.7.linux.amd64/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panicf(0xc420165620, 0x95e309, 0x1f, 0xc4201852f0, 0x1, 0x1)
	/w/workspace/fabric-verify-x86_64_1/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:194 +0x127
github.com/hyperledger/fabric/common/configtx/tool/localconfig.Load(0x7ffdc2108867, 0x7, 0x0)
	/w/workspace/fabric-verify-x86_64_1/gopath/src/github.com/hyperledger/fabric/common/configtx/tool/localconfig/config.go:195 +0x79c
main.main()
	/w/workspace/fabric-verify-x86_64_1/gopath/src/github.com/hyperledger/fabric/common/configtx/tool/configtxgen/main.go:204 +0x405


#################################################################
### Generating channel configuration transaction 'channel.tx' ###
#################################################################
2017-04-28 12:28:00.569 CEST [common/configtx/tool] main -> INFO 001 Loading configuration
2017-04-28 12:28:00.569 CEST [configtx/tool/localconfig] Load -> CRIT 002 Error reading configuration: Unsupported Config Type """"
panic: Error reading configuration: Unsupported Config Type """"

goroutine 1 [running]:
panic(0x88ade0, 0xc4201853c0)
	/opt/go/go1.7.linux.amd64/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panicf(0xc420167620, 0x95e309, 0x1f, 0xc4201852e0, 0x1, 0x1)
	/w/workspace/fabric-verify-x86_64_1/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:194 +0x127
github.com/hyperledger/fabric/common/configtx/tool/localconfig.Load(0x7ffeb3e0484b, 0x7, 0x0)
	/w/workspace/fabric-verify-x86_64_1/gopath/src/github.com/hyperledger/fabric/common/configtx/tool/localconfig/config.go:195 +0x79c
main.main()
	/w/workspace/fabric-verify-x86_64_1/gopath/src/github.com/hyperledger/fabric/common/configtx/tool/configtxgen/main.go:204 +0x405


Creating network ""e2e_default"" with the default driver
Creating orderer.example.com
Creating peer0.org1.example.com
Creating peer1.org1.example.com
Creating peer0.org2.example.com
Creating peer1.org2.example.com
Creating cli
Channel name : mychannel
CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/cacerts/org1.example.com-cert.pem
CORE_PEER_TLS_KEY_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/keystore/9df67ce095430c2be22703aabc70916ffd3a97a8801008c6d92ee3138a4b430b_sk
CORE_PEER_LOCALMSPID=OrdererMSP
CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
CORE_PEER_TLS_CERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/signcerts/peer0.org1.example.com-cert.pem
CORE_PEER_ADDRESSAUTODETECT=true
CORE_PEER_TLS_ENABLED=true
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com
CORE_PEER_ID=cli
CORE_LOGGING_LEVEL=DEBUG
CORE_PEER_ADDRESS=peer0:7051
CORE_PEER_ENDORSER_ENABLED=true
CORE_NEXT=true
2017-04-28 10:28:06.039 UTC [logging] InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'channel'
2017-04-28 10:28:06.039 UTC [msp] GetLocalMSP -> DEBU 002 Returning existing local MSP
2017-04-28 10:28:06.040 UTC [msp] GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity
Error connecting: rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure
Error: rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure
Usage:
  peer channel create [flags]

Global Flags:
  -b, --blockpath string           Path to file containing genesis block
      --cafile string              Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint
  -c, --chain string               In case of a newChain command, the chain ID to create.
  -f, --file string                Configuration transaction file generated by a tool such as configtxgen for submitting to orderer
      --logging-level string       Default logging level and overrides, see core.yaml for full syntax
  -o, --orderer string             Ordering service endpoint
      --test.coverprofile string   Done (default ""coverage.cov"")
      --tls                        Use TLS when communicating with the orderer endpoint
  -v, --version                    Display current version of fabric peer server

!!!!!!!!!!!!!!! Channel creation failed !!!!!!!!!!!!!!!!
================== ERROR !!! FAILED to execute End-2-End Scenario ==================
{noformat}

I guess something goes wrong with my install....

I'll give a try to Nejc's advise.


","28/Apr/17 10:31 AM;vjuge;@Nejc : did you installed GO from tarball or apt-like ?

personnaly i'm running on ubuntu, and apt install seems crap, so I downloaded the tarball...","28/Apr/17 10:40 AM;zupan;[~vjuge] I installed if from tar. Also to note, I took last stable version of 1.7.","28/Apr/17 5:35 PM;nickgaski;This is solved.  Two fixes:

Do not pass ORDERER_CFG_PATH=$PWD
instead, pass the following:
FABRIC_CFG_PATH=$PWD

In the network_setup.sh script, make the same change.
It should be:
export FABRIC_CFG_PATH=$PWD","02/May/17 11:31 AM;vjuge;I've modified as requested :

first edited the network_setup.sh :

{noformat}
82         echo ""##########################################################""
 83         echo ""#########  Generating Orderer Genesis block ##############""
 84         echo ""##########################################################""
 85 #FAB-3467
 86 export FABRIC_CFG_PATH=$PWD
 87 #export ORDERER_CFG_PATH=$PWD
 88         ./../../$os_arch/bin/configtxgen -profile TwoOrgs -outputBlock orderer.block
 89         echo
 90         echo
{noformat}

then executed the actions :

{noformat}
$ export FABRIC_CFG_PATH=$PWD

$ ./../../$os_arch/bin/configtxgen -profile TwoOrgs -outputBlock orderer.block
2017-05-02 13:29:00.891 CEST [common/configtx/tool] main -> INFO 001 Loading configuration
2017-05-02 13:29:00.934 CEST [common/configtx/tool] doOutputBlock -> INFO 002 Generating genesis block
2017-05-02 13:29:00.937 CEST [common/configtx/tool] doOutputBlock -> INFO 003 Writing genesis block

{noformat}

seems to work fine :)

","01/Jun/17 3:51 AM;davidkhala;[~vjuge]

I could not find code block you showed in network_setup.sh. Is it should be generateArtifacts.sh?

On my side, running generateArtifacts.sh is working. But manually run 

{code:java}
./bin/configtxgen -profile TwoOrgs -outputBlock orderer.block
{code}
failed with text {code}panic: Error reading configuration: Unsupported Config Type """"{code}
still even with {code}export FABRIC_CFG_PATH=$PWD{code} before.","01/Jun/17 2:11 PM;nickgaski;[~davidkhala] - please start fresh.  Kill your containers, Wipe your docker images, prune your docker networks, and delete your release directory.  Then follow the updated getting started instructions.  You are out of date with your configtx.yaml.  The correct profile to pass now is TwoOrgsOrdererGenesis.  

So nuke that directory and start fresh.  - http://hyperledger-fabric.readthedocs.io/en/latest/getting_started.html",,,,,,,,,,,,,,
Ledger performance test: read/write errors in CouchDB when the number of database is high,FAB-3464,16060,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nickgaski,AdnanChoudhury,AdnanChoudhury,27/Apr/17 3:46 PM,28/Jun/17 5:21 PM,26/Apr/18 6:50 AM,28/Jun/17 5:21 PM,,,,,,,v1.0.0,,,fabric-docs,,,,0,Ledger,quality,,,,,,,"While using CouchDB as a pluggable state database (a couchdb container residing on the host), read/write errors have been observed while doing performance test with proposed Ledger benchmarking tool (the tool: [https://gerrit.hyperledger.org/r/#/c/6793/]).
{code:java}
[[31m2017-04-27 17:23:24.615 EDT [statecouchdb] ApplyUpdates -> ERRO 928^[[0m Error during Commit(): http: read on closed response body
2367 panic: Error during commit to txmgr:http: read on closed response body
{code}
Notes:
 1. This occurs when the number of chains is 200 or more, and not effected by no. of parallel transactions on each chain.
 2. It goes through the expected number of attempts (3) and exit after that.

The detailed log is in the attached file. Last 100 lines are most relevant.

How to reproduce:
 1. Hyperledger fabric level: April 25
 2. Cherrypick benchmarking tool: [https://gerrit.hyperledger.org/r/#/c/6793/]
 3. Change values in /fabric/core/ledger/benchmark/scripts/runbenchmark.sh so that total no, of parallel transactions (no. of chains multiplied by no. of parallel transactions per chain) is 200 or more
 4. edit /fabric/core/ledger/benchmark/experiments/init_test.go to include CouchDB.
 5. .run runbenchmark.sh",,,,,,,,,,,,FAB-3427,,,,,FAB-4872,,,27/Apr/17 9:40 PM;AdnanChoudhury;output.txt;https://jira.hyperledger.org/secure/attachment/10682/output.txt,01/May/17 2:56 PM;AdnanChoudhury;output_1-parallel_vary-numchain_3.txt;https://jira.hyperledger.org/secure/attachment/10690/output_1-parallel_vary-numchain_3.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz4r:zo0a,,Sprint 17 - Quality,Sprint 19 - Quality,,,,,AdnanChoudhury,denyeart,markparz,nickgaski,scottz,,,,,,,,,,"28/Apr/17 10:10 PM;AdnanChoudhury;Notes:
1) The error is observed if the number of chains exceed 200, and changing the number of parallel transactions allowed  (from 1 to 1000) does not effect the occurrence of the error.
2)  It does not look like an HTTP issue as putting timer between each PUT operation does not effect the occurrence of the error.
3) setting the `max_dbs_open` config parameter to a high value (1000) did not effect the occurrence  of the error.","01/May/17 1:12 PM;denyeart;[~AdnanChoudhury]
You're saying that if you have 1 channel (or even a few), you cannot introduce the error?  Only if there is massive parallel writes to couchdb (as implied by 200+ channels) do you see the error?","01/May/17 2:30 PM;AdnanChoudhury;[~denyeart] yes to first part, the error is *not* there if the number of channels (i.e. number of chains) are 100 or 150, and its there when the number is 200 or more. As far as the parallel write goes, its a bit more complicated, ----The parallel writes in the tests can either be via multiple chains, or via multiple clients working on the same chain. I see this error only when high number of chains but *not* on low number of chains, even if the multiple parallel client write number is high. 

Edit: log to passing and failing scenarioo attached.  [^output_1-parallel_vary-numchain_3.txt]  ","01/May/17 6:59 PM;denyeart;[~AdnanChoudhury]
Perhaps looking at the couchdb stats would help identify if something is crossing a threshold around 200 parallel chains.
To see couchdb stats you can go into the couchdb container and get the _stats API response:
docker exec -it couchdb /bin/bash
curl -X GET http://127.0.0.1:5986/_stats

Note that _stats is only available at the 'internal admin' port 5986 which is not exposed outside the container.","01/May/17 7:12 PM;AdnanChoudhury;Thanks [~denyeart] , let me check.","03/May/17 6:43 PM;AdnanChoudhury;This error was due to the ""max number of open files"" in the host being the bottleneck. The Couch container resides on the host, and databases created on the container creates file operations on the host, and if the number of databases are high, the number of open files in the host become high and hits the limit. Once it hits the limit, the Couch starts spewing read and write errors.

Increasing the max number of open files is straightforward in Ubuntu and linux variants via ""ulimit -n \{desired_value\}"". In a Mac, its little more involved. This bug was encountered in a Mac OS Sierra, and simply running ""ulimit ...."" did not work. To increase the max open file limit, (details here: https://unix.stackexchange.com/questions/108174/how-to-persist-ulimit-settings-in-osx-mavericks)
a file needs to be created named `/Library/LaunchDaemons/limit.maxfiles.plist` with root ownership that has the following text: 

{code:java}
<?xml version=""1.0"" encoding=""UTF-8""?>  
<!DOCTYPE plist PUBLIC ""-//Apple//DTD PLIST 1.0//EN""  
        ""http://www.apple.com/DTDs/PropertyList-1.0.dtd"">
<plist version=""1.0"">  
  <dict>
    <key>Label</key>
    <string>limit.maxfiles</string>
    <key>ProgramArguments</key>
    <array>
      <string>launchctl</string>
      <string>limit</string>
      <string>maxfiles</string>
      <string>524288</string>
      <string>524288</string>
    </array>
    <key>RunAtLoad</key>
    <true/>
    <key>ServiceIPC</key>
    <false/>
  </dict>
</plist>  
{code}
And then restart the machine. The tests run as expected after that.","06/May/17 9:55 AM;denyeart;Let's keep this bug open until it is resolved by documentation updates.
[~nickgaski] I'm assigning this one to you.  We will need to document that ulimit needs to be set to a high value when there are many channels in the network and CouchDB used as state database.  This is because there is a CouchDB database per channel which consumes many files on the OS (on the host OS even if CouchDB is in docker).
I wasn't sure where this fits best in current documentation.  Seems we need a setup area.

[~AdnanChoudhury] As a reference point, in your trial with 200 channels, what was the original value for number of files, and what setting resolved it?","09/May/17 7:55 PM;AdnanChoudhury;[~nickgaski] [~denyeart] the default maxfiles was 256, changed it to 524288 and it worked for me.","01/Jun/17 6:22 PM;scottz;1. Since this is now a doc issue, should we change component to fabric-doc?

2. I question whether Nick should be handling this. Is this change really required in the read-the-docs section for basic setup, for ALL fabric developers/testers to use? Or do we need to modify a readme.md somewhere in the tests folders, so dev/testers can see this info when setting up and running the tests? These tests are not part of the unit tests; they are run as part of the daily test suite - or can be run manually.","01/Jun/17 6:31 PM;AdnanChoudhury;To partially response to question 2 by [~scottz], after a discussion (between [~nickgaski], [~denyeart], me) on what should be the right place for this info, it was decided that a ""Troubleshooting"" or similar section would be an appropriate place. Some discussion can e seen here ([https://gerrit.hyperledger.org/r/#/c/9249/)] This issue can be faced by any user of Fabric, and not just a user of the tests, so this should not be confined in test docs only. ","05/Jun/17 1:41 PM;markparz;I agree with [~scottz] that at min there needs to be a link from the config to how to config the different platforms, as this will be a pervasive issue.",15/Jun/17 9:00 PM;markparz;[~nickgaski] you have a merge conflict on this and I know you are doing some updates as well. Can you add this in the troubleshooting guide at the same time: https://jira.hyperledger.org/browse/FAB-4594,"16/Jun/17 10:13 PM;nickgaski;addressed here - [https://gerrit.hyperledger.org/r/#/c/10719/] . 

 

I feel we should continue adding to this doc, as it will help us aggregate many config issues, which can then be ported to a more standard setup/config type doc",,,,,,,,,,,
Improve code coverage for gossip protobuf files.,FAB-3461,16057,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,27/Apr/17 3:01 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,02/May/17 10:01 PM,,,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,gossip,,,,,,,"Currently gossip protobuf files have very poor code coverage, which has to be improved by adding new tests.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00x0l:,,Sprint 16 - Gossip,,,,,,C0rWin,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
fullflow test is broken due to compilation errors,FAB-3460,16056,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,ales,ales,27/Apr/17 2:58 PM,31/May/17 9:48 AM,26/Apr/18 6:50 AM,31/May/17 9:47 AM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00x0d:,,,,,,,,ales,ChristopherFerris,,,,,,,,,master,,,true,26/May/17 6:31 AM;ChristopherFerris;[~ales] This needs more information and a much better description of the errors. It is unactionable at this point.,31/May/17 9:48 AM;ales;Marked as done as it was already fixed in a commit for another FAB.,,,,,,,,,,,,,,,,,,,,,,
Some fields in the config.yaml are not read,FAB-3457,16053,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,dbshah,dbshah,27/Apr/17 1:44 PM,18/May/17 1:15 PM,26/Apr/18 6:50 AM,18/May/17 1:15 PM,,,,,,,,,,fabric-ca,,,,0,,,,,,,,,"Recently I was trying changing the db arguments:

{noformat}
db:
  type: mysql
  datasource: *URL*
  tls:
      enabled: false
      certfiles: db-server-cert.pem
      client:
        certfile: db-client-cert.pem
        keyfile: db-client-key.pem
{noformat}

Even after changing the values in the config yaml and giving the right paths for the fabric-ca-server to start with that config, it takes other values like the tls part but not the db args.

Although, when i pass the args using the command line arguments it worked.
{noformat}
     --db.datasource string            Data source which is database specific (default ""fabric-ca-server.db"")
      --db.tls.certfiles string         PEM-encoded comma separated list of trusted certificate files (e.g. root1.pem, root2.pem)
      --db.tls.client.certfile string   PEM-encoded certificate file when mutual authentication is enabled
      --db.tls.client.keyfile string    PEM-encoded key file when mutual authentication is enabled
      --db.tls.enabled                  Enable TLS for client connection
      --db.type string                  Type of database; one of: sqlite3, postgres, mysql (default ""sqlite3"")
{noformat}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wzp:,,,,,,,,aambati,dbshah,smithbk,,,,,,,,,,,,"27/Apr/17 5:33 PM;aambati;[~dbshah]quick question, so, *db.datasource *and *db.type *are not being read from the configuration file? ",27/Apr/17 5:40 PM;dbshah;Yes.,"10/May/17 8:43 PM;aambati;[~dbshah] Can you please update the affected version field. I tried to reproduce the problem with v.1.0.0 but could not. If db.datasource and db.type values are not being read from the config file, fabric-ca-server should default to sqllite , is that what you are seeing?

 

i ran the server like this:

{{bin/fabric-ca-server start -c config/config.yml}}

 

my config.yml has this:


{quote}db:

  type: mysql

  datasource: root:mysql@tcp(localhost:8003)/fabric-ca?parseTime=true

  tls:

      enabled: false

      certfiles:

        - db-server-cert.pem

      client:

        certfile: db-client-cert.pem

        keyfile: db-client-key.pem
{quote}
 

the output of the server is :
{quote}2017/05/10 16:39:33 [INFO] Configuration file location: /Users/aambati/Blockchain/fabric/src/github.com/hyperledger/fabric-ca/config/config.yml

2017/05/10 16:39:33 [INFO] Starting server in home directory: /Users/aambati/Blockchain/fabric/src/github.com/hyperledger/fabric-ca/config

2017/05/10 16:39:33 [INFO] CA Home Directory: /Users/aambati/Blockchain/fabric/src/github.com/hyperledger/fabric-ca/config

2017/05/10 16:39:33 [INFO] The CA key and certificate already exist

2017/05/10 16:39:33 [INFO] The key is stored by BCCSP provider 'SW'

2017/05/10 16:39:33 [INFO] The certificate is at: /Users/aambati/Blockchain/fabric/src/github.com/hyperledger/fabric-ca/config/ca-cert.pem

*2017/05/10 16:39:33 [ERROR] Failed to connect to MySQL database [error: dial tcp [::1]:8003: getsockopt: connection refused]*

Error: Failed to query 'INFORMATION_SCHEMA.SCHEMATA table: dial tcp [::1]:8003: getsockopt: connection refused
{quote}
i don't have mysql on my machine but as you can see it read the db.datasource and db.type fields from the error","10/May/17 9:10 PM;dbshah;{quote}root@tm-02:~# docker logs -f net_fabric-ca-0a_1 

2017-05-10 21:04:31,914 CRIT Supervisor running as root (no user in config file)

2017-05-10 21:04:31,923 CRIT Server 'unix_http_server' running without any HTTP authentication checking

2017/05/10 21:04:32 [INFO] Configuration file location: /mnt/fabric-ca-0a/ca.yaml

2017/05/10 21:04:33 Initialize BCCSP [SW]

2017/05/10 21:04:33 [DEBUG] Init with home /mnt/fabric-ca-0a and config \{Port:7054 Address:0.0.0.0 Debug:true TLS:\{Enabled:false CertFile:/mnt/tls-certs/cert.pem KeyFile:/mnt/tls-certs/key.pem} CSP:<nil> CA:\{Name: Keyfile:/mnt/crypto-config/ordererOrganizations/ordererOrg1/ca/ca-key.pem Certfile:/mnt/crypto-config/ordererOrganizations/ordererOrg1/ca/ca-cert.pem Chainfile:ca-chain.pem} Signing:0xc4201e52e0 CSR:\{CN:fabric-ca-server Names:[\{C:US ST:North Carolina L: O:Hyperledger OU:Fabric SerialNumber:}] Hosts:[fed70d0e0b40] KeyRequest:<nil> CA:<nil> SerialNumber:} Registry:\{MaxEnrollments:0 Identities:[\{Name:admin Pass:adminpw Type:client Affiliation:group1 MaxEnrollments:0 Attrs:map[hf.Revoker:1 hf.IntermediateCA:1 hf.Registrar.DelegateRoles:client,user,validator,auditor hf.Registrar.Roles:client,user,peer,validator,auditor,ca]}]} Affiliations:map[org1:[department1 department2] org2:[department1]] LDAP:\{Enabled:false URL:ldap://<adminDN>:<adminPassword>@<host>:<port>/<base> UserFilter:(uid=%s) GroupFilter:(memberUid=%s)} DB:\{Type:sqlite3 Datasource:fabric-ca-server.db TLS:\{Enabled:false CertFiles: CertFilesList:[] Client:\{KeyFile: CertFile:}}} Remote: Client:<nil>}

2017/05/10 21:04:33 [INFO] The CA key and certificate files already exist

2017/05/10 21:04:33 [INFO] Key file location: /mnt/crypto-config/ordererOrganizations/ordererOrg1/ca/ca-key.pem

2017/05/10 21:04:33 [INFO] Certificate file location: /mnt/crypto-config/ordererOrganizations/ordererOrg1/ca/ca-cert.pem

2017/05/10 21:04:33 [DEBUG] Initializing 'sqlite3' data base at '/mnt/fabric-ca-0a/fabric-ca-server.db'

2017/05/10 21:04:33 [DEBUG] Using sqlite database, connect to database in home (/mnt/fabric-ca-0a/fabric-ca-server.db) directory
{quote}
 

 

 

 
{quote}root@tm-02:~# docker exec -it net_fabric-ca-0a_1 cat /mnt/fabric-ca-0a/ca.yaml

affiliations:

  org1:

  - department1

  - department2

  org2:

  - department1

ca:

  certfile: /mnt/crypto-config/ordererOrganizations/ordererOrg1/ca/ca-cert.pem

  keyfile: /mnt/crypto-config/ordererOrganizations/ordererOrg1/ca/ca-key.pem

crypto:

  software:

    ephemeral: false

    hash_family: SHA2

    key_store_dir: keys

    security_level: 256

csr:

  ca:

    expiry: null

    pathlen: null

    pathlenzero: null

  cn: fabric-ca-server

  hosts:

  - fed70d0e0b40

  names:

  - C: US

    L: null

    O: Hyperledger

    OU: Fabric

    ST: North Carolina

database:

  type: mysql

  datasource: root:rootpw@tcp(mysql-server.net_blockchain.com:3306)/fabricca?parseTime=true&tls=custom

  tls:

    certfiles:

    - db-server-cert.pem
{quote}
 

This is after the alpha release, so probably that's the problem. I understand that it has changed a lot since.

Commit level: bad8552.",16/May/17 8:16 PM;smithbk;So is this fixed in the v1.0.0-alpha2 drop or is this still a problem?,18/May/17 1:14 PM;dbshah;Seems to be fixed in later versions. Closing this.,,,,,,,,,,,,,,,,,,
bccsp panic with invalid provider name,FAB-3454,16050,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,vpaprots@ca.ibm.com,smithbk,smithbk,27/Apr/17 1:31 PM,06/Jun/17 12:43 PM,26/Apr/18 6:50 AM,06/Jun/17 12:43 PM,,,,,,,v1.0.0,,,fabric-crypto,,,,1,,,,,,,,,"In fabric/bccsp/factory/factory.go, the GetBCCSPFromOpts function needs to return an error for an unknown provider name.  It will instead panic because ""f"" is nil on f.Get(config).
I think it should also do a case-insensitive comparison of the provider name.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzbt:l0hyi,,,,,,,,smithbk,vpaprots,,,,,,,,,master,,,true,"04/Jun/17 6:25 PM;vpaprots;[https://gerrit.hyperledger.org/r/#/c/10101/]

That one should had worked.. yet there are some strange failures in what should be unrelated tests in the CI","04/Jun/17 6:44 PM;vpaprots;Downgraded the priority. While we should not crash on misspellings in the config file, this is not a blocking issue.",,,,,,,,,,,,,,,,,,,,,,
GossipMessage signing should return an error instead of panicking,FAB-3450,16045,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,27/Apr/17 12:44 PM,12/Jun/17 10:04 AM,26/Apr/18 6:50 AM,12/Jun/17 10:04 AM,v1.0.0-alpha1,,,,,,v1.0.0,v1.0.0-rc1,,fabric-gossip,,,,0,gossip,,,,,,,,"Currently, the gossip code panics if it's unable to sign a message or to marshal it bytes, because the assumption was 
* If the signing failed then something is terrible wrong with the peer and it's not recoverable
* If turning a message into bytes fails, it's because of something not recoverable too. 

However, a user posted a stack trace in which gossip tried constructing a message that its envelope has a payload of 2GB.

In order to prevent these kind of problems, and the crash of the peer, we need to make the Signer return an error instead of panicking.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wxx:,,Sprint 16 - Gossip,,,,,,C0rWin,weeds,yacovm,,,,,,,,master,,,true,09/Jun/17 6:48 PM;weeds;gerrit 10259,11/Jun/17 10:49 PM;C0rWin;Needs one last vote to get merged: https://gerrit.hyperledger.org/r/#/c/10259/,,,,,,,,,,,,,,,,,,,,,,
Sending a bad config upgrade can result in a orderer panic ,FAB-3448,16043,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,rickr,rickr,27/Apr/17 10:59 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,10/May/17 2:38 PM,v1.0.0-alpha1,,,,,,WON'T FIX,,,fabric-orderer,,,,0,configuration,,,,,,,,"Sending the old configtx produce channel upgrade block resulted in 

goroutine 22 [running]:
panic(0xb3b5a0, 0xc42000c050)
	/opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/common/config.(*ConsortiumsGroup).Consortiums(0x0, 0x1193920)
	<autogenerated>:135 +0x5
github.com/hyperledger/fabric/orderer/multichain.(*multiLedger).NewChannelConfig(0xc4202495e0, 0xc42021f230, 0x2, 0xc42025e100, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/multichain/manager.go:245 +0x3e2
main.(*configUpdateSupport).NewChannelConfig(0xc4201978c0, 0xc42021f230, 0x11bc7c0, 0xc420387a48, 0x599da0, 0xc4201bcc00)
	<autogenerated>:1 +0x53
github.com/hyperledger/fabric/orderer/configupdate.(*Processor).newChannelConfig(0xc420304a40, 0xc4201301d8, 0x3, 0xc42021f230, 0x1, 0x1, 0xc420010960)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/configupdate/configupdate.go:134 +0x45
github.com/hyperledger/fabric/orderer/configupdate.(*Processor).Process(0xc420304a40, 0xc42021f230, 0x0, 0x0, 0xc4201300e0)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/configupdate/configupdate.go:117 +0x2e5
main.(*broadcastSupport).Process(0xc420374a40, 0xc42021f230, 0x1b, 0x0, 0x0)
	<autogenerated>:8 +0x54
github.com/hyperledger/fabric/orderer/common/broadcast.(*handlerImpl).Handle(0xc4201978d0, 0x11a3060, 0xc420197ab0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/broadcast/broadcast.go:111 +0x959
main.(*server).Broadcast(0xc420374a60, 0x11a3060, 0xc420197ab0, 0xc4200234a8, 0xc4200234d0)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/server.go:75 +0x8b
github.com/hyperledger/fabric/protos/orderer._AtomicBroadcast_Broadcast_Handler(0xb402c0, 0xc420374a60, 0x11a1800, 0xc4201a8300, 0xc42021f200, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/protos/orderer/ab.pb.go:523 +0xbb
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processStreamingRPC(0xc420222090, 0x11a28e0, 0xc420223200, 0xc4200bc0f0, 0xc42021edb0, 0x1188ae0, 0xc42021f1d0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:657 +0x6f3
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc420222090, 0x11a28e0, 0xc420223200, 0xc4200bc0f0, 0xc42021f1d0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:741 +0xc33
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc4201979f0, 0xc420222090, 0x11a28e0, 0xc420223200, 0xc4200bc0f0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:402 +0xab
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1",,,,,,,,,,,,,,,,FAB-3727,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wxh:,,,,,,,,Clayton Sims,jyellick,kchristidis,rickr,,,,,,,,,,,"27/Apr/17 10:27 PM;kchristidis;We'll need to add this check indeed, thanks for catching this.","02/May/17 4:41 PM;Clayton Sims;Kostas I think you would be owner?  I think you might have inadvertantly removed yourself as owner.   If you are not correct person, can you assign to the correct person.","02/May/17 8:02 PM;kchristidis;Clayton, following an earlier suggestion from [~ChristopherFerris] I try to assign myself to only 1-2 items at a time -- the ones that I'm currently working on.

I ask folks to assign stuff to me so that I get the notification email and categorize the JIRA appropriately if need be, and then unassign myself on purpose, per the logic above.

As long as the item is under the ""fabric-consensus"" component with a fix for ""v1.0.0"" I will tackle it, if nobody else does so in the meantime. But assigning myself to all relevant items in advance seems like the wrong strategy. Let me know if you disagree.","10/May/17 2:23 PM;jyellick;This has been addressed via https://jira.hyperledger.org/browse/FAB-3727 / [https://gerrit.hyperledger.org/r/#/c/9111/] .

Essentially, the orderer was incorrectly identifying non-system channels as system channels, so, when the orderer was started with an old broken config, it incorrectly believed that the config was valid and started anyway.  This invalid config results in the runtime crash you see here.",10/May/17 2:25 PM;jyellick;This is a different manifestation of this same bug.,,,,,,,,,,,,,,,,,,,
"Instead check of alive message, memReq and memResponse checked using msgStore",FAB-3446,16041,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,gennadyl,gennadyl,gennadyl,27/Apr/17 10:25 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,09/May/17 7:01 AM,,,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,gossip,gossip_component,,,,,,"Alive msg inside membership request and membership response should be checked using alive messages store, but now MemReq and MemResp checked instead.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00wx1:,,Sprint 16 - Gossip,,,,,,gennadyl,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
unrecognized characters in the gossip log when dynamically change gossip's logging level,FAB-3445,16040,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,amber-zhang,amber-zhang,27/Apr/17 10:06 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,03/May/17 4:12 PM,,,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,gossip,,,,,,,"2017-04-27 08:21:33.648 UTC [flogging] setModuleLevel -> DEBU 2ee6 Module 'gossip/election' logger enabled for log level 'WARNING'
2017-04-27 08:21:33.648 UTC [flogging] setModuleLevel -> DEBU 2ee7 Module 'gossip/gossip#peer1:7051' logger enabled for log level 'WARNING'
2017-04-27 08:21:33.648 UTC [flogging] setModuleLevel -> DEBU 2ee8 Module 'gossip/pull#peer1:7051' logger enabled for log level 'WARNING'
2017-04-27 08:21:33.648 UTC [flogging] setModuleLevel -> DEBU 2ee9 Module 'gossip/state' logger enabled for log level 'WARNING'
2017-04-27 08:21:33.648 UTC [flogging] setModuleLevel -> DEBU 2eea Module 'gossip/gossip#^>+�>�Q�
�N�5�W""���?�xʷ��?J
                  s�' logger enabled for log level 'WARNING'
2017-04-27 08:21:33.648 UTC [flogging] setModuleLevel -> DEBU 2eeb Module 'gossip/comm#-1' logger enabled for log level 'WARNING'
2017-04-27 08:21:33.648 UTC [flogging] setModuleLevel -> DEBU 2eec Module 'gossip/service' logger enabled for log level 'WARNING'
2017-04-27 08:21:33.648 UTC [flogging] setModuleLevel -> DEBU 2eed Module 'gossip/discovery#peer1:7051' logger enabled for log level 'WARNING'
2017-04-27 08:21:33.648 UTC [flogging] setModuleLevel -> DEBU 2eee Module 'peer/gossip/mcs' logger enabled for log level 'WARNING'
2017-04-27 08:21:33.648 UTC [flogging] setModuleLevel -> DEBU 2eef Module 'peer/gossip/sa' logger enabled for log level 'WARNING'
zhangxqs-mbp:e2e_cli zhangxq$ docker exec -it cli bash
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00wwt:,,Sprint 16 - Gossip,,,,,,amber-zhang,,,,,,,,,,master,,,true,"28/Apr/17 2:05 AM;amber-zhang;More unrecognized characters can be seen when default gossip logging level is debug.


2017-04-27 13:09:33.148 UTC [gossip/pull#peer3:7051] SendDigest -> DEBU 5a7e5 Sending digest [�̕f/�Ds�{��^S
                                                                                                          F�ն͆՝�o��� _�?��屺Y 4	5��������}��*!d��h]
",,,,,,,,,,,,,,,,,,,,,,,
Channel pull mediator doesn't evict old blocks,FAB-3444,16039,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,27/Apr/17 10:03 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,30/Apr/17 5:56 PM,,,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,gossip,,,,,,,"In Gossip, the component that handles pulling messages of blocks is the [pullMediator | https://github.com/hyperledger/fabric/blob/master/gossip/gossip/pull/pullstore.go].

When it gets a set of block from a pull response, it invokes a [#consumer callback | https://github.com/hyperledger/fabric/blob/master/gossip/gossip/channel/channel.go#L285-L298] that in constructed in channel.go:

{code}
	blockConsumer := func(msg *proto.SignedGossipMessage) {
		dataMsg := msg.GetDataMsg()
		if dataMsg == nil || dataMsg.Payload == nil {
			gc.logger.Warning(""Invalid DataMessage:"", dataMsg)
			return
		}
		added := gc.blockMsgStore.Add(msg)
		// if we can't add the message to the msgStore,
		// no point in disseminating it to others...
		if !added {
			return
		}
		gc.DeMultiplex(msg)
	}
	adapter := pull.PullAdapter{
		Sndr:        gc,
		MemSvc:      gc.memFilter,
		IdExtractor: seqNumFromMsg,
		MsgCons:     blockConsumer,
	}
	return pull.NewPullMediator(conf, adapter)
{code}
if the message wasn't added to the *blockMsgStore* - it means the message is too old, and shouldn't be added to the blocks puller.
However, when this code is executed, the message has already been added to the internal map, even though it hasn't been added to the store",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00wwl:,,Sprint 16 - Gossip,,,,,,yacovm,,,,,,,,,,master,,,true,28/Apr/17 6:50 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/8647/,,,,,,,,,,,,,,,,,,,,,,,
peer logging getlevel doesn't work,FAB-3443,16038,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,amber-zhang,amber-zhang,27/Apr/17 9:59 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,04/May/17 3:53 PM,,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"zhangxqs-mbp:e2e_cli zhangxq$ docker exec -it cli bash
root@18c5c1c69e6d:/opt/gopath/src/github.com/hyperledger/fabric/peer# hostname
18c5c1c69e6d
root@18c5c1c69e6d:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer0:7051 peer logging setlevel gossip warning
2017-04-27 08:20:29.420 UTC [cli/logging] setLevel -> INFO 001 Log level set for peer module 'gossip': WARNING
2017-04-27 08:20:29.420 UTC [main] main -> INFO 002 Exiting.....
root@18c5c1c69e6d:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer0:7051 peer logging getlevel gossip        
2017-04-27 08:20:41.757 UTC [cli/logging] getLevel -> INFO 001 Current log level for peer module 'gossip': DEBUG
2017-04-27 08:20:41.758 UTC [main] main -> INFO 002 Exiting.....
root@18c5c1c69e6d:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer1:7051 peer logging getlevel gossip
2017-04-27 08:21:19.059 UTC [cli/logging] getLevel -> INFO 001 Current log level for peer module 'gossip': DEBUG
2017-04-27 08:21:19.059 UTC [main] main -> INFO 002 Exiting.....
root@18c5c1c69e6d:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer1:7051 peer logging setlevel gossip warning
2017-04-27 08:21:33.649 UTC [cli/logging] setLevel -> INFO 001 Log level set for peer module 'gossip': WARNING
2017-04-27 08:21:33.649 UTC [main] main -> INFO 002 Exiting.....
root@18c5c1c69e6d:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer1:7051 peer logging getlevel gossip
2017-04-27 08:21:56.101 UTC [cli/logging] getLevel -> INFO 001 Current log level for peer module 'gossip': DEBUG
2017-04-27 08:21:56.101 UTC [main] main -> INFO 002 Exiting.....",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wwd:,,,,,,,,amber-zhang,C0rWin,wlahti,,,,,,,,master,,,true,"27/Apr/17 10:41 AM;C0rWin;[~amber-zhang] Does this specific to the gossip module only and with others work ok? Can you provide a bit more description and details?
[~wlahti] Can you please take a look on that one?","27/Apr/17 12:27 PM;wlahti;The title looks incorrect for this JIRA; I think, as the copied logs show, that the issue is with `getlevel` and not `revertlevels`. 

As for why it's not working, `getlevel` doesn't currently support regular expressions like `setlevel` does. At the moment, you need to specify the module and any submodule name exactly as it appears in the logs to get the level for each individual module/submodule (e.g. gossip/discovery#peer0:7051). 

I should update `getlevel` to include the regular expression feature as well and will get to that as soon as possible. ","27/Apr/17 3:40 PM;wlahti;This may need to wait for post v1.0 as it will require a proto change to return an array that contains the module names and log levels for each log module that matches the regular expression. I'll be sure to at least work with someone to document the operational side of using the logging framework for v1.0.

See my comment above for how to properly use the `getlevel` function with the current design. ",28/Apr/17 6:41 PM;wlahti;[~amber-zhang] Is this an issue with getlevel or revertlevels? The title mentions revertlevels while the logs show getlevel. ,"03/May/17 5:37 AM;amber-zhang;Hi Will,

I modified the title. The problem is at getlevel. Sorry for the confusing!

'getlevel' works well with full module/submodule.  Following, should I keep the bug open for future enhancing 'getlevel' with regular expression? or close it, then open a new bug for it? thanks

root@3385917a20a4:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer1:7051 peer logging getlevel gossip/discovery#peer1:7051
2017-05-03 05:28:02.974 UTC [cli/logging] getLevel -> INFO 001 Current log level for peer module 'gossip/discovery#peer1:7051': WARNING
2017-05-03 05:28:02.974 UTC [main] main -> INFO 002 Exiting.....
root@3385917a20a4:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer0:7051 peer logging getlevel gossip/discovery#peer0:7051
2017-05-03 05:28:16.815 UTC [cli/logging] getLevel -> INFO 001 Current log level for peer module 'gossip/discovery#peer0:7051': CRITICAL
2017-05-03 05:28:16.816 UTC [main] main -> INFO 002 Exiting.....

root@3385917a20a4:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer0:7051 peer logging getlevel gossip/service      
2017-05-03 05:31:16.948 UTC [cli/logging] getLevel -> INFO 001 Current log level for peer module 'gossip/service': CRITICAL
2017-05-03 05:31:16.948 UTC [main] main -> INFO 002 Exiting.....
root@3385917a20a4:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer0:7051 peer logging getlevel gossip/state  
2017-05-03 05:31:21.901 UTC [cli/logging] getLevel -> INFO 001 Current log level for peer module 'gossip/state': CRITICAL
2017-05-03 05:31:21.901 UTC [main] main -> INFO 002 Exiting.....
root@3385917a20a4:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer1:7051 peer logging getlevel gossip/state
2017-05-03 05:31:32.548 UTC [cli/logging] getLevel -> INFO 001 Current log level for peer module 'gossip/state': WARNING
2017-05-03 05:31:32.549 UTC [main] main -> INFO 002 Exiting.....
root@3385917a20a4:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer1:7051 peer logging getlevel gossip/election
2017-05-03 05:31:50.930 UTC [cli/logging] getLevel -> INFO 001 Current log level for peer module 'gossip/election': WARNING
2017-05-03 05:31:50.931 UTC [main] main -> INFO 002 Exiting.....
root@3385917a20a4:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer1:7051 peer logging getlevel gossip/pull#peer1:7051
2017-05-03 05:32:16.097 UTC [cli/logging] getLevel -> INFO 001 Current log level for peer module 'gossip/pull#peer1:7051': WARNING
2017-05-03 05:32:16.097 UTC [main] main -> INFO 002 Exiting.....
","03/May/17 2:42 PM;wlahti;I think it would be best to open a new JIRA item to track that additional feature. 

I will do one quick change related to this item to improve the CLI output statement for 'setlevel', making it clear that it's using regular expressions.

For example,
{code}
root@18c5c1c69e6d:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer0:7051 peer logging setlevel gossip warning
{code}

will now display:
{code}
Log level set for peer modules matching regular expression 'gossip': WARNING
{code}",03/May/17 2:59 PM;wlahti;https://gerrit.hyperledger.org/r/#/c/8893/ improves the output for 'setlevel' and updates the usage descriptions for both 'getlevel' and 'setlevel'.,"08/May/17 10:16 AM;amber-zhang;Verified. Setlevel and getlevel works as design!

root@f584c2ffab1d:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer logging setlevel gossip warning
2017-05-08 10:02:54.463 UTC [cli/logging] setLevel -> INFO 004 Log level set for peer modules matching regular expression 'gossip': WARNING
2017-05-08 10:02:54.463 UTC [main] main -> INFO 005 Exiting.....

 

root@f584c2ffab1d:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer logging getlevel gossip/pull

2017-05-08 10:05:18.282 UTC [cli/logging] getLevel -> INFO 004 Current log level for peer module 'gossip/pull': WARNING
2017-05-08 10:05:18.282 UTC [main] main -> INFO 005 Exiting.....",,,,,,,,,,,,,,,,
Fix orderer panic msg,FAB-3440,16035,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,baohua,baohua,baohua,27/Apr/17 8:41 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,02/May/17 1:17 AM,v1.0.0,,,,,,v1.0.0,,,fabric-orderer,,,,0,,,,,,,,,"The existing panic msg is misleading with content like

panic: Could not find profileSampleInsecureSolo",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wvp:,,,,,,,,baohua,,,,,,,,,,master,,,true,27/Apr/17 8:47 AM;baohua;http://gerrit.hyperledger.org/r/8625,,,,,,,,,,,,,,,,,,,,,,,
"Load -> CRIT 002 Error reading configuration: Unsupported Config Type """"",FAB-3438,16033,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,sanjay-saxena,sanjay-saxena,27/Apr/17 6:00 AM,21/Feb/18 9:49 AM,26/Apr/18 6:50 AM,01/Jun/17 8:31 AM,v1.0.0-alpha1,,,,,,Not a Bug,,,fabric-docs,,,,1,,,,,,,,,"Using the formal instructions --  
http://hyperledger-fabric.readthedocs.io/en/latest/getting_startedv2.html -- on *macOS 10.12.1*, when I try to use the {{configtxgen}}  tool to create the ordering service genesis block and a channel configuration artifact as shown below:

{{Sanjays-MacBook-Pro:e2e sanjaysaxena$ ./../../$os_arch/bin/configtxgen -profile TwoOrgs -outputBlock orderer.block}}

I see the following error:

{noformat}
2017-04-26 15:50:41.736 PDT [common/configtx/tool] main -> INFO 001 Loading configuration
2017-04-26 15:50:41.736 PDT [configtx/tool/localconfig] Load -> CRIT 002 Error reading configuration: Unsupported Config Type """"
panic: Error reading configuration: Unsupported Config Type """"

goroutine 1 [running]:
panic(0x490d00, 0xc420179f90)
	/opt/go/go1.7.linux.amd64/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panicf(0xc4201d2330, 0x5663ea, 0x1f, 0xc420179eb0, 0x1, 0x1)
	/w/workspace/fabric-verify-x86_64_1/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:194 +0x127
github.com/hyperledger/fabric/common/configtx/tool/localconfig.Load(0x7fff5fbff8de, 0x7, 0x0)
	/w/workspace/fabric-verify-x86_64_1/gopath/src/github.com/hyperledger/fabric/common/configtx/tool/localconfig/config.go:195 +0x79c
main.main()
	/w/workspace/fabric-verify-x86_64_1/gopath/src/github.com/hyperledger/fabric/common/configtx/tool/configtxgen/main.go:204 +0x405
{noformat}

This issue is also being seen on Windows.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wv9:,,,,,,,,indirajith,mastersingh24,nnao,raheelz,sanjay-saxena,zamrokk,,,,,,,,,"28/Apr/17 10:50 PM;raheelz;This particular issue was resolved for me on my windows machine when using the ""release"" from here:
https://logs.hyperledger.org/sandbox/vex-yul-hyp-jenkins-2/fabric-verify-x86_64/28/

I found the link from here: https://jira.hyperledger.org/browse/FAB-2986

However, with this release, I am seeing an error when instantiating chaincode:
{quote}Error: Error endorsing chaincode: rpc error: code = 2 desc = open /var/hyperledger/production/chaincodes/mychaincode.1.0: no such file or directory{quote}",28/Apr/17 11:30 PM;sanjay-saxena;[~raheelz] Please file a separate jira ticket for the chaincode instantiation issue. Once ticket should deal with just one issue for sanity purposes.,30/Apr/17 9:27 PM;raheelz;Sounds good.,"30/May/17 11:18 AM;indirajith;Yes, me too encountering this problem on my Ubuntu. Every time I get different issues. ","01/Jun/17 8:30 AM;mastersingh24;The original error reference in this JIRA occurs because configtxgen cannot find the config file.  This is likely due to the fact that *FABRIC_CFG_PATH* is not being set properly.  Not sure if the docs were wrong at the time, but the current getting started does say to set *FABRIC_CFG_PATH=$PWD*.

Closing this.
","21/Feb/18 9:49 AM;zamrokk;I agree with Gari , but it would be great if we could have an option to point to the config file",,,,,,,,,,,,,,,,,,
ChaincodeEvent should contain channel ID,FAB-3432,16027,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,bstasyszyn,bstasyszyn,bstasyszyn,26/Apr/17 6:35 PM,28/Apr/17 12:16 PM,26/Apr/18 6:50 AM,28/Apr/17 12:16 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,The ChaincodeEvent should contain the ID of the channel from which the event originated since chaincode events may originate from multiple channels. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00tsa:,,,,,,,,bstasyszyn,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - Client class should not hold MSP objects,FAB-3424,16019,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,harrisob@us.ibm.com,harrisob@us.ibm.com,26/Apr/17 3:33 PM,05/Jun/17 3:01 AM,26/Apr/18 6:50 AM,05/Jun/17 3:01 AM,v1.0.0-beta,,,,,,DUPLICATE,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,Currently the 'Client' object allows users to addMSPs objects to create and itself. These objects are needed by the 'createChannel' and no where else. The 'Client' should help the user create MSPs but not manage them and change the 'createChannel' API to alllow for the passing of the MSPs required.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:rhk,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unsafe type assertions in config.go ,FAB-3423,16018,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,divyank,divyank,26/Apr/17 2:59 PM,26/Apr/17 4:04 PM,26/Apr/18 6:50 AM,26/Apr/17 4:04 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wsd:,,,,,,,,divyank,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
code coverage should exclude go files included in bddtests directory,FAB-3422,16017,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,26/Apr/17 1:59 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,28/Apr/17 8:16 PM,,,,,,,v1.0.0,,,fabric-build,,,,0,quality,,,,,,,,"code coverage should exclude ""go"" files included in bddtests directory.  Code coverage report is showing bddtests as a package and below is the coverage report showing on bddtests folder
https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-x86_64/1609/cobertura/github_com_hyperledger_fabric_bddtests/

bddtests is a directory created to test functional tests and it is not required to keep these files in unit-test coverage.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ws5:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Fix logger module in orderer,FAB-3420,16014,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,baohua,baohua,baohua,26/Apr/17 7:13 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,29/Apr/17 1:42 AM,v1.0.0,,,,,,,,,fabric-orderer,,,,0,,,,,,,,,"The logger does not match the module, e.g., in orderer/configupdate, the logger module is ""orderer/multichain""

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wrp:,,,,,,,,baohua,,,,,,,,,,master,,,true,26/Apr/17 7:21 AM;baohua;https://gerrit.hyperledger.org/r/#/c/8535/,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca-server does not surface fatal errors for ldap,FAB-3417,16011,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,rennman,rennman,25/Apr/17 9:19 PM,25/May/17 7:05 PM,26/Apr/18 6:50 AM,25/May/17 7:05 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"There is an entire class of errors, for which nothing is surfaced to the user, even in the event of initialization failure. Among these are:

failure to code a URL
invalid URL scheme
any failure due to bad identity lookup (which we should not be doing at initialization anyway --  see https://jira.hyperledger.org/browse/FAB-3415)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wr1:,,,,,,,,rennman,smithbk,,,,,,,,,,,,,"17/May/17 11:50 PM;smithbk;Allen, this may be fixed by https://gerrit.hyperledger.org/r/#/c/9341/

which is not yet merged.  I'm not sure though unless you provide specific instructions on how to reproduce the problem or problems.

I suggest that you pull down 9341 and try to reproduce one or more problems and if they still exist, giving the exact commands.

 ","25/May/17 7:05 PM;rennman;There has been some error code restructuring that has fixed this along the way, so I'm ok to close this.",,,,,,,,,,,,,,,,,,,,,,
fabric-ca-server ldap should supersede registry configuration,FAB-3415,16009,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,rennman,rennman,25/Apr/17 9:10 PM,06/Jun/17 8:20 PM,26/Apr/18 6:50 AM,06/Jun/17 8:20 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"The LDAP server should obviate the need for the registry entry. The enablement of LDAP should disable the local registry. Moreover, it can cause the server to crash unexpectedly at startup, and without warning.

There is an entire class of errors that could cause this to happen.

e.g., presuming the ldap server is non-responsive, and the config is as follows:
{code:java}
ldap:
  enabled: true
  url: ldap://CN=admin@localhost:389/dc=example,dc=com
registry:
    identities:
       - name: admin
       - pass: adminpw
{code}
and the ldap server is down for some reason. We attempt to retrieve the userid:
 2017/04/25 21:07:42 [DEBUG] Loading identity 'admin'
 2017/04/25 21:07:42 [DEBUG] Getting user 'admin'
 2017/04/25 21:07:42 [DEBUG] Connecting to LDAP server over TCP

and then exit without ever logging the error. If debugging is disabled, it is even more cryptic:
{code:java}
2017/04/25 21:04:05 [INFO] Configuration file location: /tmp/fabric-ca/runFabricCaFvt.yaml
2017/04/25 21:04:05 Initialize BCCSP [SW]
2017/04/25 21:04:05 [INFO] The CA key and certificate files already exist
2017/04/25 21:04:05 [INFO] Key file location: /tmp/fabric-ca/fabric-ca-key.pem
2017/04/25 21:04:05 [INFO] Certificate file location: /tmp/fabric-ca/fabric-ca-cert.pem
{code}
There's no indication of an error, but the server never starts.

 

------------------------------------------------
Fixes include the following changes
------------------------------------------------

1) Do not try to load users into the DB when LDAP is enabled.

2) Don't require the -b option when LDAP is enabled.

Specifically, changes are as follows:

a) cmd/fabric-ca-server/config.go Added some comments (per Yang's request). Require the '--boot' option only if LDAP is disabled.

b) cmd/fabric-ca-server/main.go Change server usage message to denote that ""--boot"" is required only if ldap.enabled is false.

c) cmd/fabric-ca-server/main_test.go Added test case

d) doc/source/users-guide.rst Updated doc to indicate that ""-b"" (or ""--boot"") is required only if ldap.enabled is false.

e) lib/ca.go Load the user's table into the DB only if LDAP is disabled.

f) lib/client_test.go Remove test directories that weren't being cleaned up.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wql:,,,,,,,,rennman,smithbk,,,,,,,,,master,,,true,"05/May/17 6:36 PM;rennman;Also of note:  if it's determined that when LDAP is enabled it should supplant the registry, we need to remove the requirement for the bootstrap user.

e.g. If I pass 

{code:java}
fabric-ca-server start --ldap.url ""url: ldap://CN=admin,dc=example,dc=com:adminpw@localhost:389/dc=example,dc=com"" --ldap.enabled
{code}

I should not have to also add the bootstrap user.",16/May/17 11:56 PM;smithbk;https://gerrit.hyperledger.org/r/#/c/9423/,"31/May/17 6:40 PM;smithbk;To reproduce:
fabric-ca-server init -b a:b -c ldap/config.yaml --ldap.enabled --ldap.url ldap://CN=admin@localhost:389/dc=example,dc=com",,,,,,,,,,,,,,,,,,,,,
fabric-ca-server incorrectly sets default for db.tls.certfiles,FAB-3408,16002,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,rennman,rennman,25/Apr/17 8:36 PM,25/May/17 2:07 PM,26/Apr/18 6:50 AM,25/May/17 2:07 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"Omitting the tls portion section of the db: block in the config file produces a parsing error:

config contents (omitting optional TLS info)
db:
  type: sqlite3
  datasource: fabric-ca-server.db

result:

{code:java}
$GOPATH/src/github.com/hyperledger/fabric-ca/bin/fabric-ca-server \
start --address 127.0.0.1 --port 7054 \
--config /tmp/fabric-ca/runFabricCaFvt.yaml
2017/04/25 16:32:59 [INFO] Configuration file location: /tmp/fabric-ca/runFabricCaFvt.yaml
Error: Incorrect format in file '/tmp/fabric-ca/runFabricCaFvt.yaml': 1 error(s) decoding:
* 'DB.TLS.CertFiles': source data must be an array or slice, got string
{code}



",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wp1:,,,,,,,,rennman,skarim,,,,,,,,,,,,,25/May/17 2:07 PM;skarim;This is no longer an issue and has been fixed already,,,,,,,,,,,,,,,,,,,,,,,
"block-listener example error creating event client, default signing identity error",FAB-3395,15989,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,nya1,nya1,25/Apr/17 6:20 PM,06/Jun/17 8:47 PM,26/Apr/18 6:50 AM,06/Jun/17 8:47 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"Hi,
I'm getting this error when i run the block-listener example on 1.0-alpha with 1 peer.

{code:none}
./block-listener -events-address=""localhost:7050"" -events-from-chaincode=""chancode_id""
{code}

{code:none}
Event Address: localhost:7050
2017/04/21 14:58:48 Initialize BCCSP [SW]
2017/04/21 14:58:48 Creating BCCSP-based MSP instance
2017/04/21 14:58:48 Created new local MSP
2017/04/21 14:58:48 Obtaining default signing identity
error on Register send could not obtain the default signing identity, err This MSP does not possess a valid default signing identity
could not start chat could not obtain the default signing identity, err This MSP does not possess a valid default signing identity
Error creating event client
{code}

peer1 is running and i'm able to deploy any chaincode, I just can't listen to events.","Ubuntu 16.04
Docker version 17.04.0-ce, build 4845c56
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wmd:,,Sprint 16 - Membership Service,,,,,,nya1,skarim,wlahti,,,,,,,,,,,,"05/Jun/17 2:48 PM;wlahti;This issue is being worked on the peer side via: https://jira.hyperledger.org/browse/FAB-3282. The CR in progress is: [https://gerrit.hyperledger.org/r/#/c/10063]

I believe resolution of that JIRA should also resolve this one. ","06/Jun/17 8:47 PM;skarim;With FAB-3282 merged, this issue is no longer reproducible. I am marking this item as done. ",,,,,,,,,,,,,,,,,,,,,,
gerrit git links not using ssl,FAB-3394,15988,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,25/Apr/17 4:56 PM,17/Jun/17 2:14 AM,26/Apr/18 6:50 AM,17/Jun/17 2:14 AM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-build,,,,0,,,,,,,,,"Gerrit defaults to HTTP not HTTPS or SSH for the download link for Git source. Should be SSH or HTTPS by default.

We should investigate whether Gerrit config can be changed to fix this.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wm5:,,,,,,,,ChristopherFerris,ryjones,weeds,,,,,,,,,,,,"24/May/17 11:37 PM;ryjones;While the http links are shown and are the default, when you check out (or push), you are silently redirected to https links. Does this redirection work? A git remote -v will still show an http remote, even though it works over https",25/May/17 2:47 PM;ChristopherFerris;talking about the default. can we make the default ssh?,"02/Jun/17 6:59 PM;weeds;Given this is rated as ""high"", is this making progress? if so, can you add comment please?

 ","02/Jun/17 8:57 PM;ChristopherFerris;dropping to medium, but it would be nice to get some attention, please","06/Jun/17 9:44 PM;ryjones;There are two issues, one of which we can address, one of which we cannot. The [gerrit download plugin|https://gerrit.googlesource.com/plugins/download-commands/] does not allow us to default to ssh - this is a weakness in the plugin itself.

The second issue is that http: instead of https: is offered. This is a config error on gerrit - we will need to take a fifteen minute downtime in order to fix it. I will send mail to the TSC to schedule this downtime in the next few weeks.",07/Jun/17 12:25 AM;ChristopherFerris;perfect thanks. https is an acceptable alternative.,17/Jun/17 2:14 AM;ryjones;default git clone is over https,,,,,,,,,,,,,,,,,
Cleanup Java shim code whitespace,FAB-3391,15985,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,sanchezl,sanchezl,25/Apr/17 3:40 PM,01/Jul/17 3:02 AM,26/Apr/18 6:50 AM,04/May/17 5:28 PM,,,,,,,v1.0.0,,,fabric-endorser,,,,0,chaincode,,,,,,,,"Fabric Java shim code is inconsistent regarding its use of tabs, spaces and line endings. This will make them consistent.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz76:zzzy,,Sprint 16  - Endorser,,,,,,sanchezl,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
flogging must control [cauthdsl] module's logging level,FAB-3390,15983,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,yacovm,yacovm,25/Apr/17 12:27 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,27/Apr/17 2:03 PM,v1.0.0,,,,,,v1.0.0,,,fabric-peer,,,,0,quality,,,,,,,,"After the log level tuning there are still 2 modules which are verbose and are emitted into the logs in a timely manner, and should be restricted in the same way the gossip logs were restricted to WARN by default.

{code}
2017-04-25 12:13:53.313 UTC [cauthdsl] func2 -> DEBU 6bb Principal evaluation succeeds: (&{%!s(int32=0)}) (used [%!s(bool=false)])
2017-04-25 12:13:53.313 UTC [cauthdsl] func1 -> DEBU 6bc Gate evaluation succeeds: (&{n:1 policies:<signed_by:0 > })
2017-04-25 12:13:55.387 UTC [common/policies] GetPolicy -> DEBU 6bd Returning policy Application/Readers for evaluation
2017-04-25 12:13:55.387 UTC [cauthdsl] func1 -> DEBU 6be Gate evaluation starts: (&{n:1 policies:<signed_by:0 > })
2017-04-25 12:13:55.387 UTC [cauthdsl] func2 -> DEBU 6bf Principal evaluation starts: (&{%!s(int32=0)}) (used [%!s(bool=false)])
2017-04-25 12:13:55.388 UTC [cauthdsl] func2 -> DEBU 6c0 Principal evaluation succeeds: (&{%!s(int32=0)}) (used [%!s(bool=false)])
2017-04-25 12:13:55.388 UTC [cauthdsl] func1 -> DEBU 6c1 Gate evaluation succeeds: (&{n:1 policies:<signed_by:0 > })
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wlh:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Increase gossip unit test coverage,FAB-3383,15976,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,24/Apr/17 10:53 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,27/Apr/17 10:37 AM,,,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,,"Gossip unit test coverage is currently pretty good, but can be even better",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wjx:,,Sprint 16 - Gossip,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Provide more test coverage for chaincode/platforms/golang,FAB-3382,15975,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,binhn,binhn,24/Apr/17 6:27 PM,25/May/17 9:24 PM,26/Apr/18 6:50 AM,25/May/17 9:24 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-endorser,,,,0,,,,,,,,,"vagrant@hyperledger-devenv:v0.3.0-6807ab6:/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang$ go test -cover
PASS
coverage: 17.0% of statements
ok  	github.com/hyperledger/fabric/core/chaincode/platforms/golang	29.084s

[~muralisr]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wjp:,,,,,,,,binhn,muralisr,,,,,,,,,master,,,true,25/May/17 9:24 PM;muralisr;UT has been added to improve coverage from 17 to 80+ %. Closing,,,,,,,,,,,,,,,,,,,,,,,
CouchDB doesn't respond after empty attachment is saved.,FAB-3368,15961,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,chris.elder,denyeart,denyeart,24/Apr/17 12:20 PM,17/May/17 11:53 PM,26/Apr/18 6:50 AM,17/May/17 11:53 PM,,,,,,,,,,fabric-ledger,,,,0,,,,,,,,,"Tests in /fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb times out (after 35s, current client timeout threshold) at: handleRequest() method=POST url=http://couchdb:5984/testbasicrw/_ensure_full_commit

I have dug deeper and found that it is due to saving an empty byte array for key4 in TestBasicRW.  This turns into a couchdb document attachment of length 0.  While couchdb appears to handle this ok at first, the subsequent request to couch hangs (which happens to be http://couchdb:5984/testbasicrw/_ensure_full_commit), until the client times out after 35 seconds.  The retry is successful.

Saving an empty byte array for a chaincode key is allowable, therefore we need a resolution.

It seems like the empty attachment is causing a problem, which was hidden before FAB-2724, but now that connection is reused the problem shows up on the subsequent request.  ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz76:zzzss9,,Sprint 16  - Ledger,,,,,,balaji.viswanathan,denyeart,,,,,,,,,master,,,true,"24/Apr/17 12:21 PM;denyeart;From [~balaji.viswanathan]:

I ran a bunch of tests for this using haproxy as a reverse proxy as well to snoop on messages. I can recreate this over a telnet client sending exact PUT requests. This seems to be a couch specific issue regd handling of empty attachments. 

The response for the PUT(empty attachment) is sent back to client. But, couch does not log the PUT in its log and the connection is in a undetermined state after that.

One option is to make this test in handleRequest and set req.Close = True for such requests, thereby not reusing the connection and telling server to explicitly close the connection. ",24/Apr/17 12:21 PM;denyeart;Let's investigate with CouchDB committers before making a decision.,24/Apr/17 12:31 PM;balaji.viswanathan;Created https://issues.apache.org/jira/browse/COUCHDB-3394,,,,,,,,,,,,,,,,,,,,,
kafka orderer channel join error,FAB-3365,15958,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jsong1230,jsong1230,24/Apr/17 3:26 AM,01/Jun/17 2:17 AM,26/Apr/18 6:50 AM,01/Jun/17 2:17 AM,v1.0.0-alpha1,,,,,,WON'T FIX,,,fabric-orderer,,,,0,common-components,,,,,,,,"I have deleted /var/hyperledger/ and restart all (zookeeper, kafka, orderer, peer), but has the following error message in joining channel at the second, and third peer.

[aloe@aloe2 fabric]$ peer channel join -o 127.0.0.1:7050 -b ch3-3.block -f ch3-3.tx
Error: proposal failed (err: rpc error: code = 2 desc = Block number should have been 2 but was 0)

I have deleted data directory of zookeeper and kafka but the situation is the same.
I am using fabric v1.0-alpha release.
Thanks.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wg5:,,,,,,,,jsong1230,kchristidis,sait,,,,,,,,,,,,"26/May/17 8:07 PM;kchristidis;Not enough details to reproduce.

Identify the minimum number of steps needed to reproduce and identify them here.

List your expectation and what you get instead.

Provide artifacts if necessary.

Think of this as a StackOverflow question and phrase it as such.

Also, I see that you're using alpha-1. Can you please try with alpha-2? Alpha-releases will inevitably have critical flaws, so you should always roll with the latest one.","26/May/17 8:08 PM;kchristidis;Also, wait – why are you deleting `/var/hyperledger`, or the data directories in Kafka and Zookeeper? What's the intent here, and what's the expectation?","01/Jun/17 2:16 AM;kchristidis;Closing this, feel free to reopen w/ needed details.",,,,,,,,,,,,,,,,,,,,,
flogging introduces verbose messages on peer initialization,FAB-3356,15949,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,23/Apr/17 4:08 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,23/Apr/17 5:52 PM,,,,,,,v1.0.0,,,fabric-peer,,,,0,quality,,,,,,,,"When you run the e2e, the flogging emits lots of output on peer startup:

2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 001 Module 'flogging' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 002 Module 'golang-platform' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 003 Module 'cauthdsl' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 004 Module 'configtx/tool/localconfig' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 005 Module 'protos' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 006 Module 'ConnProducer' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 007 Module 'common/policies' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 008 Module 'lockbasedtxmgr' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 009 Module 'common/configtx' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 00a Module 'kvledger' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 00b Module 'peer' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 00c Module 'common/configtx/tool/provisional' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 00d Module 'java/hash' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 00e Module 'protoutils' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 00f Module 'inproccontroller' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 010 Module 'endorser' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 011 Module 'viperutil' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 012 Module 'msp' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 013 Module 'configvalues/msp' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 014 Module 'committer' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 015 Module 'kvledger.util' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 016 Module 'bccsp' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 017 Module 'chaincode' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 018 Module 'server' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 019 Module 'statevalidator' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 01a Module 'leveldbhelper' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 01b Module 'deliveryClient' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 01c Module 'container' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 01d Module 'util' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 01e Module 'lscc' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 01f Module 'qscc' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 020 Module 'sccapi' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 021 Module 'bccsp_p11' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 022 Module 'bccsp_sw' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 023 Module 'core' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 024 Module 'gossip/state' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 025 Module 'vscc' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 026 Module 'ccprovider' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 027 Module 'rwset' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 028 Module 'escc' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 029 Module 'cscc' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 02a Module 'channelCmd' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 02b Module 'cli/logging' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 02c Module 'chaincode-platform' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 02d Module 'couchdb' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 02e Module 'statecouchdb' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 02f Module 'gossip/service' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 030 Module 'chaincodeCmd' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 031 Module 'main' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 032 Module 'stateleveldb' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 033 Module 'ledgermgmt' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 034 Module 'eventhub_producer' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 035 Module 'gossip/util' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 036 Module 'peer/gossip/mcs' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 037 Module 'txvalidator' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 038 Module 'historyleveldb' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 039 Module 'peer/gossip/sa' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 03a Module 'dockercontroller' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 03b Module 'common/configtx/test' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 03c Module 'common/config' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 03d Module 'comm' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 03e Module 'blocksProvider' logger set to 'DEBUG' log level


[~wlahti]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00we5:,,,,,,,,wlahti,yacovm,,,,,,,,,master,,,true,"23/Apr/17 5:04 PM;wlahti;Yes, I've been meaning to remove that. Thanks!",,,,,,,,,,,,,,,,,,,,,,,
No need to initialize grpc servers in CSCC tests,FAB-3352,15945,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,23/Apr/17 1:27 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,23/Apr/17 3:13 PM,,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"Currently each test in [configure_test.go|https://github.com/hyperledger/fabric/blob/master/core/scc/cscc/configure_test.go] initialize peer endpoint by using 

{code}
func setupEndpoint(t *testing.T) {
	peerAddress := peer.GetLocalIP()
	if peerAddress == """" {
		peerAddress = ""0.0.0.0""
	}
	peerAddress = peerAddress + "":21213""
	t.Logf(""Local peer IP address: %s"", peerAddress)
	var opts []grpc.ServerOption
	grpcServer := grpc.NewServer(opts...)
	getPeerEndpoint := func() (*pb.PeerEndpoint, error) {
		return &pb.PeerEndpoint{Id: &pb.PeerID{Name: ""cscctestpeer""}, Address: peerAddress}, nil
	}
	ccStartupTimeout := time.Duration(30000) * time.Millisecond
	pb.RegisterChaincodeSupportServer(grpcServer, chaincode.NewChaincodeSupport(getPeerEndpoint, false, ccStartupTimeout))
}
{code}

While tests leverages mocking chaincode framework, for instance:

{code}
// Failed path: Not enough parameters
	args := [][]byte{[]byte(""JoinChain"")}
	if res := stub.MockInvoke(""2"", args); res.Status == shim.OK {
		t.Fatalf(""cscc invoke JoinChain should have failed with invalid number of args: %v"", args)
	}
{code}

There is not need to use {{setupEndpoint}} and initialize grpc server, hence function could be removed and tests should not use it.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wdp:,,,,,,,,C0rWin,,,,,,,,,,master,,,true,23/Apr/17 2:15 PM;C0rWin;https://gerrit.hyperledger.org/r/#/c/8437/,,,,,,,,,,,,,,,,,,,,,,,
change channel MAC in gossip proto from channelMAC to channel_mac,FAB-3349,15942,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,23/Apr/17 11:55 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,02/May/17 1:36 PM,,,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,gossip,,,,,,,"The fields in proto message definitions should not be CamelCase but should be with underscores.

Therefore we should change the proto field channelMAC to channel_mac",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00wd1:,,Sprint 16 - Gossip,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Make gossip logging level at startup be WARN instead of INFO,FAB-3347,15940,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,yacovm,yacovm,23/Apr/17 10:49 AM,26/Apr/17 6:44 PM,26/Apr/18 6:50 AM,26/Apr/17 6:44 PM,,,,,,,v1.0.0,,,fabric-peer,,,,0,v1.0,,,,,,,,"Since we are working torwards an ability to change logging levels per components dynamically, this should start with WARN instead of INFO as the rest of the components.

Also- this affects the tests- some tests are running in parallel and are creating lots of ""gossip instances"" and the combined logging is too much for CI to handle and the tests time out.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wcl:,,,,,,,,wlahti,yacovm,,,,,,,,,,,,,26/Apr/17 6:44 PM;wlahti;Fixed via https://jira.hyperledger.org/browse/FAB-3144,,,,,,,,,,,,,,,,,,,,,,,
Update fabric-ca restful api usage with latest change,FAB-3345,15938,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,david_dornseifer,baohua,baohua,23/Apr/17 1:26 AM,26/May/17 2:25 AM,26/Apr/18 6:50 AM,26/May/17 2:25 AM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-sdk-py,,,,0,SDK-Python,,,,,,,,"The fabric-ca has changed the restful api.
Changes the ""/api/v1/cfssl/"" prefix to ""/api/v1/"" for the
fabric-ca-server REST APIs.
See https://gerrit.hyperledger.org/r/#/c/8173/",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wc5:,,,,,,,,baohua,david_dornseifer,,,,,,,,,master,,,true,25/Apr/17 1:16 AM;david_dornseifer;http://gerrit.hyperledger.org/r/8497,,,,,,,,,,,,,,,,,,,,,,,
Fix CSCC error messages reporting. ,FAB-3344,15936,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,22/Apr/17 9:29 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,23/Apr/17 10:48 AM,,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"After ACL check has been added to CSCC, there are few places with incorrect logging messages, which need to be fixed.

The body of *Invoke* method:
{code}
	args := stub.GetArgs()

	if len(args) < 1 {
		return shim.Error(fmt.Sprintf(""Incorrect number of arguments, %d"", len(args)))
	}

	fname := string(args[0])

	if fname != GetChannels && len(args) < 2 {
		return shim.Error(fmt.Sprintf(""Incorrect number of arguments, %d"", len(args)))
	}

	cnflogger.Debugf(""Invoke function: %s"", fname)

	// Handle ACL:
	// 1. get the signed proposal
	sp, err := stub.GetSignedProposal()
	if err != nil {
		return shim.Error(fmt.Sprintf(""Failed getting signed proposal from stub: [%s]"", err))
	}

	switch fname {
	case JoinChain:
		// 2. check local MSP Admins policy
		if err = e.policyChecker.CheckPolicyNoChannel(mgmt.Admins, sp); err != nil {
			return shim.Error(fmt.Sprintf(""\""JoinChain\"" request failed authorization check for channel [%s]: [%s]"", args[1], err))
		}

		return joinChain(args[1])
	case GetConfigBlock:
		// 2. check the channel reader policy
		if err = e.policyChecker.CheckPolicy(string(args[1]), policies.ChannelApplicationReaders, sp); err != nil {
			return shim.Error(fmt.Sprintf(""\""GetConfigBlock\"" request failed authorization check for channel [%s]: [%s]"", args[1], err))
		}
		return getConfigBlock(args[1])
	case UpdateConfigBlock:
		// TODO: It needs to be clarified if this is a function invoked by a proposal or not.
		// The issue is the following: ChannelApplicationAdmins might require multiple signatures
		// but currently a proposal can be signed by a signle entity only. Therefore, the ChannelApplicationAdmins policy
		// will be never satisfied.

		return updateConfigBlock(args[1])
	case GetChannels:
		// 2. check local MSP Members policy
		if err = e.policyChecker.CheckPolicyNoChannel(mgmt.Members, sp); err != nil {
			return shim.Error(fmt.Sprintf(""\""GetChannels\"" request failed authorization check for channel [%s]: [%s]"", args[1], err))
		}

		return getChannels()

	}
	return shim.Error(fmt.Sprintf(""Requested function %s not found."", fname))
{code}

So based on the invoke API *JoinChannel* and *UpdateConfigBlock* calls receives as a parameter genesis block and configuration update block respectively. Therefore:

{code}
	case JoinChain:
		// 2. check local MSP Admins policy
		if err = e.policyChecker.CheckPolicyNoChannel(mgmt.Admins, sp); err != nil {
			return shim.Error(fmt.Sprintf(""\""JoinChain\"" request failed authorization check for channel [%s]: [%s]"", args[1], err))
		}
		return joinChain(args[1])
{code}

In particular:

{code}
shim.Error(fmt.Sprintf(""\""JoinChain\"" request failed authorization check for channel [%s]: [%s]"", args[1], err))
{code}

Will print the content of the genesis block rather the channel id. 

Next, the code 
{code}
	case GetChannels:
		// 2. check local MSP Members policy
		if err = e.policyChecker.CheckPolicyNoChannel(mgmt.Members, sp); err != nil {
			return shim.Error(fmt.Sprintf(""\""GetChannels\"" request failed authorization check for channel [%s]: [%s]"", args[1], err))
		}

		return getChannels()

	}
{code}

Call to the *GetChannels*  doesn't receives any input parameters, therefore 

{code}
shim.Error(fmt.Sprintf(""\""GetChannels\"" request failed authorization check for channel [%s]: [%s]"", args[1], err))
{code}

Will end up with panic, since no {{arg[1]}} is provided.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wbp:,,,,,,,,C0rWin,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
README's link to CONTRIBUTING doc is broken,FAB-3340,15932,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lehors,lehors,lehors,22/Apr/17 12:13 PM,12/Jul/17 12:13 PM,26/Apr/18 6:50 AM,22/Apr/17 6:05 PM,,,,,,,v1.0.0,,,fabric-docs,,,,0,Documentation,,,,,,,,The reference to CONTRIBUTING in the README still points to the old location and now leads to a 404.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00wat:,,,,,,,,lehors,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Gossip pull may send zero-length digests,FAB-3335,15927,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,22/Apr/17 10:08 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,22/Apr/17 8:02 PM,v1.0.0,,,,,,v1.0.0,,,fabric-gossip,,,,0,gossip,,,,,,,,"The bug was introduced in a [recent commit | https://gerrit.hyperledger.org/r/#/c/8077/12/gossip/gossip/algo/pull.go@299] that added filtering capability.

Basically when the gossip puller gets a hello from a peer, it iterates over the items it has, and applies a filter on each of them.
If the filter doesn't permit, it skips to the next iteration, but the returned slice then contains an ""empty-string"" digest in the response to the remote peer.

This bug blocks me from fixing https://gerrit.hyperledger.org/r/#/c/8081/ 's test, so I shall upload a fix now.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00w9p:,,Sprint 16 - Gossip,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
set version of the chaincode in the proposal response,FAB-3329,15921,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jiangyaoguo,muralisr,muralisr,21/Apr/17 11:30 PM,24/Jun/17 9:36 AM,26/Apr/18 6:50 AM,28/Apr/17 2:41 AM,,,,,,,,,,fabric-endorser,,,,0,,,,,,,,,"As part of the upgrade task (FAB-183) we need to check if the version of the chaincode matches the version in LSCC for the transaction. To this end every endorsed proposal response shoud contain the version of the chaincode.

Note that we could have used the Version field in the ChaincodeID in the Proposal and insisted user sets that version. Given we only support the ""latest"" version, the current model of user needs to only set the chaincode name. Requiring a version in proposal reeks of implementation leakage.",,,,,,,,,,,,FAB-198,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz7e:fi,,Sprint 16  - Endorser,,,,,,binhn,muralisr,,,,,,,,,master,,,true,"24/Apr/17 4:21 PM;binhn;[~muralisr] Please elaborate on this issue. Are we saying that the proposal shouldn't require the cc version? And that we should use the latest version from LSCC bc we only support 1 version at a time per channel?

If so, this is code clean up, or you could say usability bug.","25/Apr/17 5:27 AM;muralisr;[~binhn] this is part of the upgrade work (or bug as it blocks the FAB-198 which is a bug). As mentioned in FAB-198, the endorser will set chaincode version and the committer will validate the version in the proposal response against the version in LSCC for the chaincode for the channel.

The Proposal already has a ChaincodeID so we *could* just have a Version field in the ProposalResponse's ChaincodeAction. However we use ChaincodeID as it contains more information and can be used for other purposes in future (we may have a ChaincodeAction for each CC-2-CC call in the request). 

Also moved this to a Bug as its a task for bug FAB-198",,,,,,,,,,,,,,,,,,,,,,
fix ledger/util/couchdb unit test failures,FAB-3328,15920,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,denyeart,denyeart,denyeart,21/Apr/17 9:48 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,21/Apr/17 10:38 PM,,,,,,,,,,fabric-ledger,,,,0,,,,,,,,,"
unit-tests_1  | # github.com/hyperledger/fabric/core/ledger/util/couchdb
unit-tests_1  | core/ledger/util/couchdb/couchdbutil_test.go:54: undefined: connectURL
unit-tests_1  | core/ledger/util/couchdb/couchdbutil_test.go:54: undefined: maxRetries
unit-tests_1  | core/ledger/util/couchdb/couchdbutil_test.go:55: undefined: maxRetriesOnStartup
unit-tests_1  | core/ledger/util/couchdb/couchdbutil_test.go:55: undefined: requestTimeout
unit-tests_1  | FAIL	github.com/hyperledger/fabric/core/ledger/util/couchdb [build failed]

A stale changeset got merged: https://gerrit.hyperledger.org/r/#/c/7975/
containing code that was incompatible with more recent merges.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz76:zzzrkr,,Sprint 16  - Ledger,,,,,,denyeart,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode instantiation fails after a Peer Recovery,FAB-3325,15917,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,rhegde,rhegde,21/Apr/17 9:22 PM,02/Jun/17 8:33 PM,26/Apr/18 6:50 AM,02/Jun/17 8:32 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"Procedure
- Install and instantiate a chaincode on  say Peer0 using Peer CLI
- Peer0 is bounced thus causing user-chaincode container to stop.
- Client now tries to Invoke a new Fabric Proposal request thus causing an instantiation failure of the user-chaincode

Logs of Client using Fabric Java SDK
{quote}

2017-04-21 20:31:45.045 ERROR 74358 --- [ingleThreadTask] o.h.f.s.Chain                            : Sending proposal to peer1 failed because of gRPC failure=Status{code=UNKNOWN, description=Error executing chaincode: Could not get deployment transaction from LSCC for p2pcls:1.0 - Get ChaincodeDeploymentSpec for p2pcls/bar from LSCC error: invalid deployment spec : open /var/hyperledger/production/chaincodes/p2pcls.1.0: no such file or directory, cause=null}

java.lang.Exception: io.grpc.StatusRuntimeException: UNKNOWN: Error executing chaincode: Could not get deployment transaction from LSCC for p2pcls:1.0 - Get ChaincodeDeploymentSpec for p2pcls/bar from LSCC error: invalid deployment spec : open /var/hyperledger/production/chaincodes/p2pcls.1.0: no such file or directory
        at org.hyperledger.fabric.sdk.Chain.sendProposalToPeers(Chain.java:2041) [fabric-sdk-java-1.0-SNAPSHOT.jar!/:?]
        at org.hyperledger.fabric.sdk.Chain.sendProposal(Chain.java:1980) [fabric-sdk-java-1.0-SNAPSHOT.jar!/:?]
        at org.hyperledger.fabric.sdk.Chain.sendTransactionProposal(Chain.java:1918) [fabric-sdk-java-1.0-SNAPSHOT.jar!/:?]
        at com.cls.clsnet.fabric.wrapper.FabricWrapperImpl.ledgerTransaction(FabricWrapperImpl.java:70) [clsnet-cls-fabric-0.0.1-SNAPSHOT.jar!/:0.0.1-SNAPSHOT]
        at com.cls.clsnet.inbound.msg.serviceimpl.FabricWrapperInputServiceImpl.processInboundMessage(FabricWrapperInputServiceImpl.java:78) [clsnet-participant-services-0.0.1-SNAPSHOT.jar!/:0.0.1-SNAPSHOT]
        at com.cls.clsnet.task.FabricWrapperInputTask.executeTask(FabricWrapperInputTask.java:30) [clsnet-participant-services-0.0.1-SNAPSHOT.jar!/:0.0.1-SNAPSHOT]
        at com.cls.clsnet.executor.SingleThreadExecutor.run(SingleThreadExecutor.java:50) [clsnet-common-core-0.0.1-SNAPSHOT.jar!/:0.0.1-SNAPSHOT]
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_121]
        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) [?:1.8.0_121]
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) [?:1.8.0_121]
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) [?:1.8.0_121]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_121]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_121]
        at java.lang.Thread.run(Thread.java:745) [?:1.8.0_121]
Caused by: io.grpc.StatusRuntimeException: UNKNOWN: Error executing chaincode: Could not get deployment transaction from LSCC for p2pcls:1.0 - Get ChaincodeDeploymentSpec for p2pcls/bar from LSCC error: invalid deployment spec : open /var/hyperledger/production/chaincodes/p2pcls.1.0: no such file or directory
        at io.grpc.Status.asRuntimeException(Status.java:540) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.stub.ClientCalls$UnaryStreamToFuture.onClose(ClientCalls.java:439) ~[grpc-stub-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:428) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ClientCallImpl.access$100(ClientCallImpl.java:76) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl.close(ClientCallImpl.java:514) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl.access$700(ClientCallImpl.java:431) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:546) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:52) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.SerializingExecutor$TaskRunner.run(SerializingExecutor.java:152) ~[grpc-core-1.2.0.jar!/:1.2.0]
        ... 3 more

2017-04-21 20:31:45.046 ERROR 74358 --- [ingleThreadTask] o.h.f.s.Chain                            : Sending proposal to peer0 failed because of gRPC failure=Status{code=UNKNOWN, description=Error executing chaincode: Could not get deployment transaction from LSCC for p2pcls:1.0 - Get ChaincodeDeploymentSpec for p2pcls/bar from LSCC error: invalid deployment spec : open /var/hyperledger/production/chaincodes/p2pcls.1.0: no such file or directory, cause=null}

java.lang.Exception: io.grpc.StatusRuntimeException: UNKNOWN: Error executing chaincode: Could not get deployment transaction from LSCC for p2pcls:1.0 - Get ChaincodeDeploymentSpec for p2pcls/bar from LSCC error: invalid deployment spec : open /var/hyperledger/production/chaincodes/p2pcls.1.0: no such file or directory
        at org.hyperledger.fabric.sdk.Chain.sendProposalToPeers(Chain.java:2041) [fabric-sdk-java-1.0-SNAPSHOT.jar!/:?]
        at org.hyperledger.fabric.sdk.Chain.sendProposal(Chain.java:1980) [fabric-sdk-java-1.0-SNAPSHOT.jar!/:?]
        at org.hyperledger.fabric.sdk.Chain.sendTransactionProposal(Chain.java:1918) [fabric-sdk-java-1.0-SNAPSHOT.jar!/:?]
        at com.cls.clsnet.fabric.wrapper.FabricWrapperImpl.ledgerTransaction(FabricWrapperImpl.java:70) [clsnet-cls-fabric-0.0.1-SNAPSHOT.jar!/:0.0.1-SNAPSHOT]
        at com.cls.clsnet.inbound.msg.serviceimpl.FabricWrapperInputServiceImpl.processInboundMessage(FabricWrapperInputServiceImpl.java:78) [clsnet-participant-services-0.0.1-SNAPSHOT.jar!/:0.0.1-SNAPSHOT]
        at com.cls.clsnet.task.FabricWrapperInputTask.executeTask(FabricWrapperInputTask.java:30) [clsnet-participant-services-0.0.1-SNAPSHOT.jar!/:0.0.1-SNAPSHOT]
        at com.cls.clsnet.executor.SingleThreadExecutor.run(SingleThreadExecutor.java:50) [clsnet-common-core-0.0.1-SNAPSHOT.jar!/:0.0.1-SNAPSHOT]
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_121]
        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) [?:1.8.0_121]
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) [?:1.8.0_121]
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) [?:1.8.0_121]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_121]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_121]
        at java.lang.Thread.run(Thread.java:745) [?:1.8.0_121]
Caused by: io.grpc.StatusRuntimeException: UNKNOWN: Error executing chaincode: Could not get deployment transaction from LSCC for p2pcls:1.0 - Get ChaincodeDeploymentSpec for p2pcls/bar from LSCC error: invalid deployment spec : open /var/hyperledger/production/chaincodes/p2pcls.1.0: no such file or directory
        at io.grpc.Status.asRuntimeException(Status.java:540) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.stub.ClientCalls$UnaryStreamToFuture.onClose(ClientCalls.java:439) ~[grpc-stub-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:428) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ClientCallImpl.access$100(ClientCallImpl.java:76) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl.close(ClientCallImpl.java:514) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl.access$700(ClientCallImpl.java:431) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:546) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:52) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.SerializingExecutor$TaskRunner.run(SerializingExecutor.java:152) ~[grpc-core-1.2.0.jar!/:1.2.0]
        ... 3 more

2017-04-21 20:31:45.047  INFO 74358 --- [ingleThreadTask] c.c.c.f.w.FabricWrapperImpl              :  Received Proposal Response -
2017-04-21 20:31:45.047  INFO 74358 --- [ingleThreadTask] c.c.c.f.w.FabricWrapperImpl              :  Proposal Response - FAILURE
2017-04-21 20:31:45.048  INFO 74358 --- [ingleThreadTask] c.c.c.f.w.FabricWrapperImpl              :  Proposal Response - FAILURE
2017-04-21 20:31:45.048  INFO 74358 --- [ingleThreadTask] c.c.c.f.w.FabricWrapperImpl              :  Verifying Proposal Responses
java.lang.Exception: Not enough endorsers :0.  Sending proposal to peer1 failed because of gRPC failure=Status{code=UNKNOWN, description=Error executing chaincode: Could not get deployment transaction from LSCC for p2pcls:1.0 - Get ChaincodeDeploymentSpec for p2pcls/bar from LSCC error: invalid deployment spec : open /var/hyperledger/production/chaincodes/p2pcls.1.0: no such file or directory, cause=null}. Was verified: false
        at com.cls.clsnet.fabric.wrapper.FabricWrapperImpl.ledgerTransaction(FabricWrapperImpl.java:94)
        at com.cls.clsnet.inbound.msg.serviceimpl.FabricWrapperInputServiceImpl.processInboundMessage(FabricWrapperInputServiceImpl.java:78)
        at com.cls.clsnet.task.FabricWrapperInputTask.executeTask(FabricWrapperInputTask.java:30)
        at com.cls.clsnet.executor.SingleThreadExecutor.run(SingleThreadExecutor.java:50)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
2017-04-21 20:31:45.049 ERROR 74358 --- [ingleThreadTask] c.c.c.t.FabricWrapperInputTask           : Exception Occured while Processing Object from Fabric Wrapper Input Queue ... java.lang.Exception: Not enough endorsers :0.  Sending proposal to peer1 failed because of gRPC failure=Status{code=UNKNOWN, description=Error executing chaincode: Could not get deployment transaction from LSCC for p2pcls:1.0 - Get ChaincodeDeploymentSpec for p2pcls/bar from LSCC error: invalid deployment spec : open /var/hyperledger/production/chaincodes/p2pcls.1.0: no such file or directory, cause=null}. Was verified: false
{quote}

We were not able to capture peer logs due to Gossip Logging. Log capture went into an irrecoverable state.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00w7p:,,,,,,,,muralisr,rhegde,,,,,,,,,,,,,"22/Apr/17 9:12 AM;muralisr;[~rhegde] some questions

_Peer0 is bounced thus causing user-chaincode container to stop._
how do you do bounce peer0 ? 

_Client now tries to Invoke a new Fabric Proposal request thus causing an instantiation failure of the user-chaincode_
Using terms ""invoke"" and ""instantiation failure"" for the same request is confusing
* are you doing a invoke request or an instantiation request ?
* if instantiation request, did you try to install the chaincode  ?

Assuming the steps are
* you ""bounce"" the peer
* you send an invoke transaction (without doing an install or instantiate first)

If the above is true and the ""bounce"" destroys the old container and creates a new one AND you are not persisting ledger or chaincodes by mounting the volume, then that might explain the above error.

Can you give detailed steps of what you are doing and - if you can - share the docker compose files ?","23/Apr/17 6:29 PM;rhegde;how do you do bounce peer0 ? 
<< Did a docker stop <container-id>. This caused the running user chain-code container to stop. This was followed with docker start of the peer. >>

Using terms ""invoke"" and ""instantiation failure"" for the same request is confusing
<<This was a invoke and this should have resulted in the launching (loosely used in my JIRA defecet - instantiation)  of installed user-chaincode.

Since we stopped the PEER container (not docker rm) and upon docker start, this definitely gave a new container ID. My understanding this should have persisted the file-system. Is your suggestion - we mount the /var/hyperledger/production of the container?","24/Apr/17 1:41 AM;muralisr;[~rhegde] yes, you should mount the container to a local system. If there are many peers using the same local system you'd obviously have different mount points for them. 

[~mastersingh24] can you provide some best practice from other envs you dealt with please ?","01/Jun/17 6:35 PM;muralisr;[~rhegde] can you move this to ""Done"" if this is resolved please ?",02/Jun/17 8:32 PM;rhegde;This can be marked as resolved - verified following on the release [https://chat.hyperledger.org/channel/fabric-ci?msg=8KeH9TZbB4aY5Y9Bb]after mounting the peer file-system.,,,,,,,,,,,,,,,,,,,
Test TestCloseConn fails in CI sometimes,FAB-3316,15908,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,21/Apr/17 7:53 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,25/Apr/17 1:37 PM,v1.0.0,,,,,,v1.0.0,,,fabric-build,fabric-gossip,,,0,beta,ci_failure,,,,,,,"16:32:30 unit-tests_1  | --- FAIL: TestCloseConn (10.01s)
16:32:30 unit-tests_1  | 	assertions.go:219: 
                        
	Error Trace:	comm_test.go:335
16:32:30 unit-tests_1  | 		
	Error:		An error is expected but got nil. %s
16:32:30 unit-tests_1  | 		
	Messages:	Should have failed because connection is closed
16:32:30 unit-tests_1  | 		
16:32:30 unit-tests_1  | FAIL
16:32:30 unit-tests_1  | coverage: 83.3% of statements
16:32:30 unit-tests_1  | FAIL	github.com/hyperledger/fabric/gossip/comm	11.154s
16:32:30 unit-tests_1  | error: exit status 1
16:32:30 unit-tests_1  | panic: EOF
16:32:30 unit-tests_1  | 
16:32:30 unit-tests_1  | goroutine 1 [running]:
16:32:30 unit-tests_1  | panic(0x4daca0, 0xc42000a0f0)
16:32:30 unit-tests_1  | 	/opt/go/src/runtime/panic.go:500 +0x1a1
16:32:30 unit-tests_1  | main.main()
16:32:30 unit-tests_1  | 	/opt/gotools/obj/gopath/src/github.com/AlekSi/gocov-xml/gocov-xml.go:60 +0x15fd


[~C0rWin] I say we t.skip() it and look into it next week.... what do you say?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00w6d:,,Sprint 16 - Gossip,,,,,,C0rWin,yacovm,,,,,,,,,master,,,true,"21/Apr/17 8:43 PM;C0rWin;I'd say, that sounds reasonable. [~yacovm]","22/Apr/17 9:31 AM;yacovm;While the commit that disabled the tests is merged I think it would make sense to keep this JIRA item ""TODO"" to revisit next week.
Or should we open a new JIRA?",,,,,,,,,,,,,,,,,,,,,,
Ledger related error on system restart,FAB-3314,15906,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jimthematrix,jimthematrix,21/Apr/17 7:04 PM,05/Jun/17 11:50 AM,26/Apr/18 6:50 AM,02/Jun/17 4:56 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,,"When the client system gets restarted, which comprises of a client app, an orderer, two peers in separate orgs and two chaincodes that have already been instantiated, each on a separate channel, the peer reported an error saying something like ""trying to create the ledger but the ledger by this ID already exists"". will fill in more details once the peer log gets captured.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz76:zzzssr,,Sprint 16  - Ledger,,,,,,Clayton Sims,denyeart,,,,,,,,,,,,,26/Apr/17 6:38 PM;Clayton Sims;[~rhegde] can you update logs,"02/Jun/17 4:56 PM;denyeart;We are unable to reproduce this, I will close for now, if somebody can reproduce and attach logs we will re-open.",,,,,,,,,,,,,,,,,,,,,,
SatisfiesPrincipal function of MSP needs to check validity of the principal identity under the MSP of the principal ,FAB-3307,15899,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,adc,elli-androulaki,elli-androulaki,21/Apr/17 4:26 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,28/Apr/17 10:18 PM,,,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,,"SatisfiesPrincipal is a function of the MSP that checks if an identity satisifes a given principal. 
Principals among other things can be also identity-based, in which case the function should accept if the identity in question matches the msp principal' s identity.

However, for the check to actually make sense one needs to ensure that the identity in the principal is valid under the MSP of the identity of that principal. This is currently not checked.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzbt:l0ar,,,,,,,,elli-androulaki,,,,,,,,,,master,,,true,"26/Apr/17 2:42 PM;elli-androulaki;Related CR: https://gerrit.hyperledger.org/r/#/c/8547/
",,,,,,,,,,,,,,,,,,,,,,,
Lock down hashing algo in channel config during create/update,FAB-3303,15895,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jimthematrix,jimthematrix,21/Apr/17 2:12 PM,25/May/17 11:26 PM,26/Apr/18 6:50 AM,25/May/17 11:25 PM,v1.0.0-alpha1,,,,,,WON'T FIX,,,fabric-sdk-node,,,,0,,,,,,,,,"during sprint discussion today it was decided that crypto algos should be locked down in terms of key algo, key length, hash algo for v1.0. as a result we should not expose the hash algo setting in the create channel config JSON and update",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:rhzr,,,,,,,,,,,,,,,,,,,,,,25/May/17 11:26 PM;jimthematrix;not applicable any longer as the JSON input support for channel creation/update has been removed,,,,,,,,,,,,,,,,,,,,,,,
Orderer see bad policy with Consortium changes applied,FAB-3298,15890,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,harrisob@us.ibm.com,harrisob@us.ibm.com,21/Apr/17 1:21 PM,31/May/17 3:15 PM,26/Apr/18 6:50 AM,21/Apr/17 5:28 PM,v1.0.0-alpha1,,,,,,WON'T FIX,,,fabric-orderer,,,,0,,,,,,,,,"Starting with current Fabric at commit bac1fadec830d445c5205be0c64ec704f5f8f6d1 
apply 
git fetch ssh://bretharrison@gerrit.hyperledger.org:29418/fabric refs/changes/15/7315/6 && git checkout FETCH_HEAD

the git log of the 'HEAD detached at FETCH_HEAD)' looks like
```
89572fe Jason Yellick   Fri Mar 17 13:57:40 2017 -0400  [FAB-2821] Print readset/writeset/deltaset on updt
00a7bea Jason Yellick   Fri Mar 10 13:46:16 2017 -0500  [FAB-2735] (PA) Clean up config mocks
3c4748d Jason Yellick   Thu Mar 9 23:10:40 2017 -0500   [FAB-2723] (PA) Remove old ChainCreationPolicyName
9734c1c Jason Yellick   Thu Mar 9 14:59:41 2017 -0500   [FAB-1302] (PA) Add channel create authorization
fd5672c Jason Yellick   Tue Mar 14 15:05:48 2017 -0400  [FAB-2783] (PA) configtxgen specify admin principl
48ac6ba Jason Yellick   Wed Mar 8 15:26:54 2017 -0500   [FAB-2703] (PA) Expose committed configEnvelope
43309dc Jason Yellick   Wed Mar 8 14:05:43 2017 -0500   [FAB-2702] (PA) Specify consortium in chan config
b2c09f2 Jason Yellick   Wed Mar 8 13:48:51 2017 -0500   [FAB-2646] (PA) Create consortium configuration
118f82f Gari Singh      Tue Apr 11 23:37:59 2017 +0000  Merge ""[FAB-3087] Fix peer/core.yaml misleading comments""
0b86ba9 Gari Singh      Tue Apr 11 22:59:06 2017 +0000  Merge ""[FAB-3058] CONTRIBUTING improvements""
1c5c32c Binh Nguyen     Tue Apr 11 22:30:46 2017 +0000  Merge ""[FAB-3086] Fix log event formatting""
e77644d Greg Haskins    Tue Apr 11 21:15:18 2017 +0000  Merge ""[FAB-3060] skip java chaincode tests on non-x86_84""
0050981 Christopher Ferris      Mon Apr 10 09:07:00 2017 -0400  [FAB-3058] CONTRIBUTING improvements
eee9070 YACOVM  Tue Apr 11 11:54:29 2017 +0300  [FAB-3087] Fix peer/core.yaml misleading comments
3a66788 YACOVM  Tue Apr 11 11:47:32 2017 +0300  [FAB-3086] Fix log event formatting
a076bba Jim Zhang       Mon Apr 10 18:19:33 2017 +0000  Merge ""[FAB-2943] Event publishing failure fails block commit""
dc143e2 Luis Sanchez    Mon Apr 10 09:59:07 2017 -0400  [FAB-3060] skip java chaincode tests on non-x86_84
7984725 Chris Elder     Sat Apr 8 13:46:45 2017 -0400   FAB-3047 Change attachment arrays to use pointers
a932b54 Chris Elder     Sat Apr 8 12:35:06 2017 -0400   FAB-3046 Add CouchDB batch select operations
458bcdf YACOVM  Mon Apr 10 01:58:01 2017 +0300  [FAB-2943] Event publishing failure fails block commit
0640d43 Jonathan Levi (HACERA)  Sun Apr 9 22:30:43 2017 +0000   Merge ""FAB-2959 Add CouchDB batch update operations""
2663d8b Binh Nguyen     Sun Apr 9 14:03:34 2017 +0000   Merge ""Organizational Unit Certification Path Support""
```
Build the docker images on Mac
Start a docker compose with Orderer
Noticed the following error::
orderer0    | 2017-04-20 15:04:22.398 UTC [orderer/multichain] newLedgerResources -> CRIT 052 Error creating configtx manager and handlers: Error deserializing key ChainCreationPolicyNames for group /Channel/Orderer: Unexpected key ChainCreationPolicyNames",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00w3p:,,,,,,,,harrisob@us.ibm.com,kchristidis,,,,,,,,,,,,,"21/Apr/17 5:28 PM;kchristidis;You are feeding this network with a genesis block that is no longer current since it contains the ChainCreationPolicyNames key. You'll need to use the configtxgen tool to get a proper genesis block. You can confirm that things are running properly by running the E2E CLI test.

Tried this on the very latest master with those changes applied on top and it works w/o issues.

{noformat}
~/Repositories/fabric (config-changes) $ git lg | head -n10
* 58465486 - (HEAD -> config-changes) [FAB-2821] Print readset/writeset/deltaset on updt (14 minutes ago) <Jason Yellick>
* ace0f3e1 - [FAB-2735] (PA) Clean up config mocks (14 minutes ago) <Jason Yellick>
* 2d09d379 - [FAB-2723] (PA) Remove old ChainCreationPolicyName (14 minutes ago) <Jason Yellick>
* 580113e2 - [FAB-1302] (PA) Add channel create authorization (14 minutes ago) <Jason Yellick>
* 4a0b3ac0 - [FAB-2783] (PA) configtxgen specify admin principl (14 minutes ago) <Jason Yellick>
* 9236f6cb - [FAB-2703] (PA) Expose committed configEnvelope (14 minutes ago) <Jason Yellick>
* d8685f26 - [FAB-2702] (PA) Specify consortium in chan config (14 minutes ago) <Jason Yellick>
* 513aece9 - [FAB-2646] (PA) Create consortium configuration (14 minutes ago) <Jason Yellick>
* 441b3085 - (origin/master, origin/HEAD, master) [FAB-3292] JoinChannel fails on e2e (10 hours ago) <Angelo De Caro>
*   e4074cee - Merge ""Add orderer details to command in doc"" (18 hours ago) <Yacov Manevich>
{noformat}
",,,,,,,,,,,,,,,,,,,,,,,
Join channel fails due to new Admins policy,FAB-3286,15878,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,21/Apr/17 4:03 AM,03/May/17 9:03 PM,26/Apr/18 6:50 AM,25/Apr/17 1:53 AM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,https://gerrit.hyperledger.org/r/#/c/7651/ enhanced the Join Channel policy to require admin principals.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:zh,,,,,,,,,,,,,,,,,,master,,,true,25/Apr/17 1:53 AM;jimthematrix;https://gerrit.hyperledger.org/r/#/c/8011,,,,,,,,,,,,,,,,,,,,,,,
Event listener sample needs update to sign registration message,FAB-3282,15874,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Hangyu_FJH,jimthematrix,jimthematrix,20/Apr/17 10:16 PM,06/Jun/17 8:15 PM,26/Apr/18 6:50 AM,06/Jun/17 8:15 PM,,,,,,,v1.0.0,,,fabric-peer,,,,0,help-wanted,,,,,,,,due to https://gerrit.hyperledger.org/r/#/c/7905/ the (un)registration request must be signed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:v,,,,,,,,denyeart,Hangyu_FJH,muralisr,,,,,,,,,,,,01/Jun/17 6:33 PM;muralisr;[~jimthematrix] Would this be post 1.0 ?,02/Jun/17 6:01 PM;jimthematrix;I don't have a problem deferring it to post 1.0. not sure if there are strong opinions out there. possibly from [~denyeart] who's handling the beta criteria?,"02/Jun/17 6:13 PM;denyeart;Jim explained to me that this is a grpc client sample, which is currently broken due to lack of signing.  We really don't have many other grpc client samples like this.  For the most part, we will point people to use sdk (which does work), or have them look at the sdk impl if they want to understand the detailed grpc interactions.  This sample is outdated and not very useful anymore, therefore I suggest we delete it before 1.0, rather than try to fix it.","02/Jun/17 6:31 PM;muralisr;[~denyeart] Its not a low level gRPC client. Its really a sample that shows how to use event listener client that goes with the event producer server...its got a readme. Given we do want to show how to use the event client, I propose we leave it in but move to post 1.0.","02/Jun/17 6:50 PM;denyeart;Ok, we could even leave it in and add a comment indicating which part is currently broken.","03/Jun/17 11:48 PM;muralisr;It was easy enough fix, so fixed it -  https://gerrit.hyperledger.org/r/#/c/10123.

[~nickgaski] could use help with doc. We can resurrect old doc (which was actually pretty good) and fix it up for 1.0","03/Jun/17 11:53 PM;muralisr;Actually going to abandon https://gerrit.hyperledger.org/r/#/c/10123 as there appears to be another CR https://gerrit.hyperledger.org/r/#/c/10063 to fix this.

[~Hangyu_FJH] can you assign this to yourself (or dup it) given you have a CR to fix this please ?","04/Jun/17 11:51 PM;Hangyu_FJH;thank you [~muralisr], I have already assigned this ticket to me. I will read your comments on gerrit and get back to you ASAP.","06/Jun/17 11:49 AM;muralisr;[~Hangyu_FJH] thanks for https://gerrit.hyperledger.org/r/#/c/10063.

[~jimthematrix] can you confirm the fix and close please ?",,,,,,,,,,,,,,,
Fix gossip package related golint warning,FAB-3279,15871,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,20/Apr/17 6:52 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,23/Apr/17 12:34 PM,,,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,gossip,,,,,,,"There are quite a few golint warning produced on the gossip package, which need to be fixed:

{code}
./comm/comm_test.go:195:20: error strings should not be capitalized or end with punctuation or a newline
./discovery/discovery.go:93:1: receiver name nm should be consistent with previous receiver name n for NetworkMember
./election/election.go:386:1: exported function SetStartupGracePeriod should have comment or be unexported
./election/election.go:390:1: exported function SetMembershipSampleInterval should have comment or be unexported
./election/election.go:394:1: exported function SetLeaderAliveThreshold should have comment or be unexported
./election/election.go:398:1: exported function SetLeaderElectionDuration should have comment or be unexported
./election/election.go:422:1: exported function GetMsgExpirationTimeout should have comment or be unexported
./gossip/channel/channel.go:654:6: func name will be used as channel.ChannelMAC by other packages, and that stutters; consider calling this MAC
./gossip/orgs_test.go:64:1: receiver name cs should be consistent with previous receiver name c for configurableCryptoService
./gossip/pull/pullstore.go:41:6: type name will be used as pull.PullMsgType by other packages, and that stutters; consider calling this MsgType
./gossip/pull/pullstore.go:59:6: type name will be used as pull.PullConfig by other packages, and that stutters; consider calling this Config
./integration/integration_test.go:80:20: error strings should not be capitalized or end with punctuation or a newline
./service/gossip_service.go:128:1: comment on exported function InitGossipServiceCustomDeliveryFactory should be of the form ""InitGossipServiceCustomDeliveryFactory ...""
./service/gossip_service_test.go:452:1: receiver name jcm should be consistent with previous receiver name jmc for joinChanMsg
./service/gossip_service_test.go:457:1: receiver name jcm should be consistent with previous receiver name jmc for joinChanMsg
./state/state.go:565:26: error strings should not be capitalized or end with punctuation or a newline
./util/misc.go:154:1: comment on exported function GetDurationOrDefault should be of the form ""GetDurationOrDefault ...""
./util/msgs.go:26:6: exported type MembershipStore should have comment or be unexported
./util/msgs.go:31:1: exported function NewMembershipStore should have comment or be unexported
./util/msgs.go:35:1: comment on exported method MembershipStore.MsgByID should be of the form ""MsgByID ...""
./util/msgs.go:46:1: exported method MembershipStore.Size should have comment or be unexported
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00vzx:,,Sprint 16 - Gossip,,,,,,C0rWin,ChristopherFerris,,,,,,,,,master,,,true,23/Apr/17 12:34 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8321/,,,,,,,,,,,,,,,,,,,,,,,
remove abstract getChaincodeID() from ChaincodeBase,FAB-3263,15855,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,sanchezl,sanchezl,19/Apr/17 8:23 PM,24/Jun/17 9:36 AM,26/Apr/18 6:50 AM,04/May/17 2:57 AM,,,,,,,v1.0.0,,,fabric-endorser,,,,0,chaincode,,,,,,,,Dead code. Need to make sure it does not make it into V1.0.0 api.,,,,,,,,,,,,FAB-3632,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz7e:fr,,Sprint 16  - Endorser,,,,,,ChristopherFerris,sanchezl,,,,,,,,,master,,,true,23/Apr/17 12:27 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8259/,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca-client prints error twice,FAB-3261,15853,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,smithbk,smithbk,19/Apr/17 7:15 PM,01/May/17 2:53 PM,26/Apr/18 6:50 AM,01/May/17 2:53 PM,,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"fabric-ca-client Enroll -h
Error: unknown command ""Enroll"" for ""fabric-ca-client""

Did you mean this?
	enroll
	reenroll

Run 'fabric-ca-client --help' for usage.
2017/04/19 15:12:27 [FATAL] unknown command ""Enroll"" for ""fabric-ca-client""

Did you mean this?
	enroll
	reenroll
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vw5:,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
disable delivery service test goroutine check in CI ,FAB-3257,15849,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,19/Apr/17 4:53 PM,20/May/17 7:34 PM,26/Apr/18 6:50 AM,20/Apr/17 5:06 PM,,,,,,,,,,fabric-build,,,,0,,,,,,,,,"The goroutine check (checks that goroutines are dead after each test) sometimes starts with the wrong number of goroutines and has a false-negative (i.e, started with 4 goroutines but has only 3 of them in the end of the test)
so it fails the entire unit test run.

I want to temporarily disable the test and investigate.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vv9:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
unused variables in core/ledger packages,FAB-3254,15846,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,19/Apr/17 3:58 PM,24/May/17 9:16 PM,26/Apr/18 6:50 AM,24/May/17 9:16 PM,v1.0.0-alpha2,,,,,,v1.0.0,,,fabric-ledger,,,,0,staticanalysis,,,,,,,,"cbf$ unused github.com/hyperledger/fabric/core/ledger/kvledger/history/historydb/historyleveldb
core/ledger/kvledger/history/historydb/historyleveldb/historyleveldb.go:35:5: var compositeKeySep is unused (U1000)
cbf$ unused github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/rwsetutil
core/ledger/kvledger/txmgmt/rwsetutil/query_results_helper.go:235:22: func (*merkleTree).getMaxLevel is unused (U1000)
core/ledger/kvledger/txmgmt/rwsetutil/query_results_helper.go:239:22: func (*merkleTree).getMaxLevelHashes is unused (U1000)
cbf$ unused github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb
cbf$ unused github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb
core/ledger/kvledger/txmgmt/statedb/statecouchdb/statecouchdb_test_export.go:30:5: var badConnectURL is unused (U1000)",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vul:,,,,,,,,ChristopherFerris,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
win7 and win10 not ok 230 Should attempt to load the bccsp_pkcs11 module and fail because of the dummy library path,FAB-3253,15845,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jjjjibm,jjjjibm,jjjjibm,19/Apr/17 3:57 PM,25/May/17 11:29 PM,26/Apr/18 6:50 AM,25/May/17 11:29 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"While running gulp test-headless on Windows 7 without Vagrant, one of the tests fails with this information:

not ok 230 Should attempt to load the bccsp_pkcs11 module and fail because of the dummy library path
  ---
    operator: throws
    expected: |-
      '/Error:.*\\/usr\\/local\\/lib/'
    actual: |-
      { [Error: Win32 error 126
    at Error (native) PKCS11::Load:129] message: 'Win32 error 126\n    at Error (native) PKCS11::Load:129' }
    at: test (C:\go\src\github.com\hyperledger\fabric-sdk-node\test\unit\cryptosuite-ecdsa-aes.js:165:4)


Here is the section of cryptosuite-ecdsa-aes.js that failed:

// each app instance is expected to use either HSM or software-based key management, as such this question
	// is answered with a config setting rather than controlled on a case-by-case basis
	utils.setConfigSetting('crypto-hsm', true);
	t.throws(
		() => {
			cs = utils.newCryptoSuite({lib: '/usr/local/lib', slot: 0, pin: '1234' });
		},
		/Error:.*\/usr\/local\/lib/,
		'Should attempt to load the bccsp_pkcs11 module and fail because of the dummy library path'
	);","Windows 7 directly (no Vagrant VM)
fabric-node-sdk: commit af957109c87eb8c6fd3ba4ba74f007640f3b6ada
I have not started a network yet, but here are the other levels: 
fabric-ca: commit de5f4bdc49f63fd4f9f48acf99689fc131313ec6
fabric: commit a3efa2c09693b4e4d235194ccec735c700eecbcb

$ node -v
v6.10.2


| | | | +-- har-validator@4.2.1
| | | | | +-- ajv@4.11.6
| | | | | | +-- co@4.6.0
| | | | | | `-- json-stable-stringify@1.0.1
| | | | | |   `-- jsonify@0.0.0
| | | | | `-- har-schema@1.0.5
| | | | +-- hawk@3.1.3
| | | | | +-- boom@2.10.1
| | | | | | `-- hoek@2.16.3 deduped
| | | | | +-- cryptiles@2.0.5
| | | | | | `-- boom@2.10.1 deduped
| | | | | +-- hoek@2.16.3
| | | | | `-- sntp@1.0.9
| | | | |   `-- hoek@2.16.3 deduped
| | | | +-- http-signature@1.1.1
| | | | | +-- assert-plus@0.2.0
| | | | | +-- jsprim@1.4.0
| | | | | | +-- assert-plus@1.0.0
| | | | | | +-- extsprintf@1.0.2
| | | | | | +-- json-schema@0.2.3
| | | | | | `-- verror@1.3.6
| | | | | |   `-- extsprintf@1.0.2 deduped
| | | | | `-- sshpk@1.11.0
| | | | |   +-- asn1@0.2.3
| | | | |   +-- assert-plus@1.0.0
| | | | |   +-- bcrypt-pbkdf@1.0.1
| | | | |   | `-- tweetnacl@0.14.5 deduped
| | | | |   +-- dashdash@1.14.1
| | | | |   | `-- assert-plus@1.0.0 deduped
| | | | |   +-- ecc-jsbn@0.1.1
| | | | |   | `-- jsbn@0.1.1 deduped
| | | | |   +-- getpass@0.1.6
| | | | |   | `-- assert-plus@1.0.0 deduped
| | | | |   +-- jodid25519@1.0.2
| | | | |   | `-- jsbn@0.1.1 deduped
| | | | |   +-- jsbn@0.1.1
| | | | |   `-- tweetnacl@0.14.5
| | | | +-- is-typedarray@1.0.0
| | | | +-- isstream@0.1.2
| | | | +-- json-stringify-safe@5.0.1
| | | | +-- mime-types@2.1.15
| | | | | `-- mime-db@1.27.0
| | | | +-- oauth-sign@0.8.2
| | | | +-- performance-now@0.2.0
| | | | +-- qs@6.4.0
| | | | +-- safe-buffer@5.0.1
| | | | +-- stringstream@0.0.5
| | | | +-- tough-cookie@2.3.2
| | | | | `-- punycode@1.4.1
| | | | +-- tunnel-agent@0.6.0
| | | | | `-- safe-buffer@5.0.1 deduped
| | | | `-- uuid@3.0.1
| | | +-- rimraf@2.6.1
| | | | `-- glob@7.1.1
| | | |   +-- fs.realpath@1.0.0
| | | |   +-- inflight@1.0.6
| | | |   | +-- once@1.4.0 deduped
| | | |   | `-- wrappy@1.0.2
| | | |   +-- inherits@2.0.3
| | | |   +-- minimatch@3.0.3
| | | |   | `-- brace-expansion@1.1.7
| | | |   |   +-- balanced-match@0.4.2
| | | |   |   `-- concat-map@0.0.1
| | | |   +-- once@1.4.0
| | | |   | `-- wrappy@1.0.2
| | | |   `-- path-is-absolute@1.0.1
| | | +-- semver@5.3.0
| | | +-- tar@2.2.1
| | | | +-- block-stream@0.0.9
| | | | | `-- inherits@2.0.3 deduped
| | | | +-- fstream@1.0.11
| | | | | +-- graceful-fs@4.1.11
| | | | | +-- inherits@2.0.3 deduped
| | | | | +-- mkdirp@0.5.1 deduped
| | | | | `-- rimraf@2.6.1 deduped
| | | | `-- inherits@2.0.3
| | | `-- tar-pack@3.4.0
| | |   +-- debug@2.6.3
| | |   | `-- ms@0.7.2
| | |   +-- fstream@1.0.11
| | |   | +-- graceful-fs@4.1.11
| | |   | +-- inherits@2.0.3
| | |   | +-- mkdirp@0.5.1 deduped
| | |   | `-- rimraf@2.6.1 deduped
| | |   +-- fstream-ignore@1.0.5
| | |   | +-- fstream@1.0.11 deduped
| | |   | +-- inherits@2.0.3
| | |   | `-- minimatch@3.0.3
| | |   |   `-- brace-expansion@1.1.7
| | |   |     +-- balanced-match@0.4.2
| | |   |     `-- concat-map@0.0.1
| | |   +-- once@1.4.0
| | |   | `-- wrappy@1.0.2
| | |   +-- readable-stream@2.2.9
| | |   | +-- buffer-shims@1.0.0
| | |   | +-- core-util-is@1.0.2
| | |   | +-- inherits@2.0.3
| | |   | +-- isarray@1.0.0
| | |   | +-- process-nextick-args@1.0.7
| | |   | +-- string_decoder@1.0.0
| | |   | | `-- buffer-shims@1.0.0 deduped
| | |   | `-- util-deprecate@1.0.2
| | |   +-- rimraf@2.6.1 deduped
| | |   +-- tar@2.2.1 deduped
| | |   `-- uid-number@0.0.6
| | `-- protobufjs@5.0.2
| |   +-- ascli@1.0.1
| |   | +-- colour@0.7.1
| |   | `-- optjs@3.2.2
| |   +-- bytebuffer@5.0.1
| |   | `-- long@3.2.0
| |   +-- glob@7.1.1
| |   | +-- fs.realpath@1.0.0 deduped
| |   | +-- inflight@1.0.6 deduped
| |   | +-- inherits@2.0.3 deduped
| |   | +-- minimatch@3.0.3 deduped
| |   | +-- once@1.4.0 deduped
| |   | `-- path-is-absolute@1.0.1 deduped
| |   `-- yargs@3.32.0 deduped
| +-- hashtable@2.0.2
| | `-- nan@2.6.2
| +-- js-sha3@0.5.7 deduped
| +-- json-stringify-safe@5.0.1
| +-- jsrsasign@6.2.2 deduped
| +-- jssha@2.2.0 deduped
| +-- klaw@1.3.1
| | `-- graceful-fs@4.1.11 deduped
| +-- lodash@4.17.4
| +-- nconf@0.8.4 deduped
| +-- node-dir@0.1.16
| | `-- minimatch@3.0.3
| |   `-- brace-expansion@1.1.7
| |     +-- balanced-match@0.4.2
| |     `-- concat-map@0.0.1
| +-- node.extend@1.1.6
| | `-- is@3.2.1
| +-- path@0.12.7
| | +-- process@0.11.9
| | `-- util@0.10.3 deduped
| +-- pkcs11js@1.0.8
| | +-- @types/node@6.0.70
| | `-- nan@2.6.2 deduped
| +-- pkijs@1.3.33
| +-- promise-settle@0.3.0
| +-- sjcl@1.0.3 deduped
| +-- sjcl-codec@0.1.1 deduped
| +-- sleep@3.0.1
| | `-- nan@2.6.2 deduped
| +-- stream-buffers@3.0.1
| +-- tar-stream@1.5.2
| | +-- bl@1.2.0
| | | `-- readable-stream@2.2.9 deduped
| | +-- end-of-stream@1.4.0
| | | `-- once@1.4.0 deduped
| | +-- readable-stream@2.2.9
| | | +-- buffer-shims@1.0.0 deduped
| | | +-- core-util-is@1.0.2 deduped
| | | +-- inherits@2.0.3 deduped
| | | +-- isarray@1.0.0
| | | +-- process-nextick-args@1.0.7 deduped
| | | +-- string_decoder@1.0.0
| | | | `-- buffer-shims@1.0.0 deduped
| | | `-- util-deprecate@1.0.2 deduped
| | `-- xtend@4.0.1
| +-- url@0.11.0 deduped
| +-- util@0.10.3 deduped
| `-- winston@2.3.1 deduped
+-- fs-extra@2.1.2
| +-- graceful-fs@4.1.11
| `-- jsonfile@2.4.0
|   `-- graceful-fs@4.1.11 deduped
+-- gulp@3.9.1
| +-- archy@1.0.0
| +-- chalk@1.1.3
| | +-- ansi-styles@2.2.1
| | +-- escape-string-regexp@1.0.5
| | +-- has-ansi@2.0.0
| | | `-- ansi-regex@2.1.1
| | +-- strip-ansi@3.0.1
| | | `-- ansi-regex@2.1.1 deduped
| | `-- supports-color@2.0.0
| +-- deprecated@0.0.1
| +-- gulp-util@3.0.8
| | +-- array-differ@1.0.0
| | +-- array-uniq@1.0.3
| | +-- beeper@1.1.1
| | +-- chalk@1.1.3 deduped
| | +-- dateformat@2.0.0
| | +-- fancy-log@1.3.0
| | | +-- chalk@1.1.3 deduped
| | | `-- time-stamp@1.0.1
| | +-- gulplog@1.0.0
| | | `-- glogg@1.0.0
| | |   `-- sparkles@1.0.0 deduped
| | +-- has-gulplog@0.1.0
| | | `-- sparkles@1.0.0
| | +-- lodash._reescape@3.0.0
| | +-- lodash._reevaluate@3.0.0
| | +-- lodash._reinterpolate@3.0.0
| | +-- lodash.template@3.6.2
| | | +-- lodash._basecopy@3.0.1
| | | +-- lodash._basetostring@3.0.1
| | | +-- lodash._basevalues@3.0.0 deduped
| | | +-- lodash._isiterateecall@3.0.9
| | | +-- lodash._reinterpolate@3.0.0 deduped
| | | +-- lodash.escape@3.2.0
| | | | `-- lodash._root@3.0.1
| | | +-- lodash.keys@3.1.2 deduped
| | | +-- lodash.restparam@3.6.1
| | | `-- lodash.templatesettings@3.1.1
| | |   +-- lodash._reinterpolate@3.0.0 deduped
| | |   `-- lodash.escape@3.2.0 deduped
| | +-- minimist@1.2.0
| | +-- multipipe@0.1.2
| | | `-- duplexer2@0.0.2
| | |   `-- readable-stream@1.1.14
| | |     +-- core-util-is@1.0.2 deduped
| | |     +-- inherits@2.0.3 deduped
| | |     +-- isarray@0.0.1 deduped
| | |     `-- string_decoder@0.10.31 deduped
| | +-- object-assign@3.0.0
| | +-- replace-ext@0.0.1
| | +-- through2@2.0.3 deduped
| | `-- vinyl@0.5.3
| |   +-- clone@1.0.2 deduped
| |   +-- clone-stats@0.0.1 deduped
| |   `-- replace-ext@0.0.1 deduped
| +-- interpret@1.0.3
| +-- liftoff@2.3.0
| | +-- extend@3.0.0 deduped
| | +-- findup-sync@0.4.3
| | | +-- detect-file@0.1.0
| | | | `-- fs-exists-sync@0.1.0
| | | +-- is-glob@2.0.1 deduped
| | | +-- micromatch@2.3.11 deduped
| | | `-- resolve-dir@0.1.1
| | |   +-- expand-tilde@1.2.2 deduped
| | |   `-- global-modules@0.2.3
| | |     +-- global-prefix@0.1.5
| | |     | +-- homedir-polyfill@1.0.1
| | |     | | `-- parse-passwd@1.0.0
| | |     | +-- ini@1.3.4 deduped
| | |     | +-- is-windows@0.2.0 deduped
| | |     | `-- which@1.2.14 deduped
| | |     `-- is-windows@0.2.0
| | +-- fined@1.0.2
| | | +-- expand-tilde@1.2.2
| | | | `-- os-homedir@1.0.2 deduped
| | | +-- lodash.assignwith@4.2.0
| | | +-- lodash.isempty@4.4.0
| | | +-- lodash.isplainobject@4.0.6 deduped
| | | +-- lodash.isstring@4.0.1 deduped
| | | +-- lodash.pick@4.4.0
| | | `-- parse-filepath@1.0.1
| | |   +-- is-absolute@0.2.6
| | |   | +-- is-relative@0.2.1
| | |   | | `-- is-unc-path@0.1.2
| | |   | |   `-- unc-path-regex@0.1.2
| | |   | `-- is-windows@0.2.0 deduped
| | |   +-- map-cache@0.2.2
| | |   `-- path-root@0.1.1
| | |     `-- path-root-regex@0.1.2
| | +-- flagged-respawn@0.3.2
| | +-- lodash.isplainobject@4.0.6
| | +-- lodash.isstring@4.0.1
| | +-- lodash.mapvalues@4.6.0
| | +-- rechoir@0.6.2
| | | `-- resolve@1.3.2 deduped
| | `-- resolve@1.3.2
| |   `-- path-parse@1.0.5
| +-- minimist@1.2.0
| +-- orchestrator@0.3.8
| | +-- end-of-stream@0.1.5
| | | `-- once@1.3.3
| | |   `-- wrappy@1.0.2 deduped
| | +-- sequencify@0.0.7
| | `-- stream-consume@0.1.0
| +-- pretty-hrtime@1.0.3
| +-- semver@4.3.6
| +-- tildify@1.2.0
| | `-- os-homedir@1.0.2
| +-- v8flags@2.1.0
| | `-- user-home@1.1.1
| `-- vinyl-fs@0.3.14
|   +-- defaults@1.0.3
|   | `-- clone@1.0.2 deduped
|   +-- glob-stream@3.1.18
|   | +-- glob@4.5.3
|   | | +-- inflight@1.0.6 deduped
|   | | +-- inherits@2.0.3 deduped
|   | | +-- minimatch@2.0.10 deduped
|   | | `-- once@1.4.0 deduped
|   | +-- glob2base@0.0.12
|   | | `-- find-index@0.1.1
|   | +-- minimatch@2.0.10
|   | | `-- brace-expansion@1.1.7 deduped
|   | +-- ordered-read-streams@0.1.0
|   | +-- through2@0.6.5
|   | | +-- readable-stream@1.0.34 deduped
|   | | `-- xtend@4.0.1 deduped
|   | `-- unique-stream@1.0.0
|   +-- glob-watcher@0.0.6
|   | `-- gaze@0.5.2
|   |   `-- globule@0.1.0
|   |     +-- glob@3.1.21
|   |     | +-- graceful-fs@1.2.3
|   |     | +-- inherits@1.0.2
|   |     | `-- minimatch@0.2.14 deduped
|   |     +-- lodash@1.0.2
|   |     `-- minimatch@0.2.14
|   |       +-- lru-cache@2.7.3 deduped
|   |       `-- sigmund@1.0.1
|   +-- graceful-fs@3.0.11
|   | `-- natives@1.1.0
|   +-- mkdirp@0.5.1 deduped
|   +-- strip-bom@1.0.0
|   | +-- first-chunk-stream@1.0.0
|   | `-- is-utf8@0.2.1
|   +-- through2@0.6.5
|   | +-- readable-stream@1.0.34 deduped
|   | `-- xtend@4.0.1 deduped
|   `-- vinyl@0.4.6
|     +-- clone@0.2.0
|     `-- clone-stats@0.0.1 deduped
+-- gulp-debug@3.1.0
| +-- chalk@1.1.3 deduped
| +-- gulp-util@3.0.8 deduped
| +-- plur@2.1.2
| | `-- irregular-plurals@1.2.0
| +-- stringify-object@3.2.0
| | +-- get-own-enumerable-property-symbols@1.0.1
| | +-- is-obj@1.0.1
| | `-- is-regexp@1.0.0
| +-- through2@2.0.3
| | +-- readable-stream@2.2.9
| | | +-- buffer-shims@1.0.0 deduped
| | | +-- core-util-is@1.0.2 deduped
| | | +-- inherits@2.0.3 deduped
| | | +-- isarray@1.0.0
| | | +-- process-nextick-args@1.0.7 deduped
| | | +-- string_decoder@1.0.0
| | | | `-- buffer-shims@1.0.0 deduped
| | | `-- util-deprecate@1.0.2 deduped
| | `-- xtend@4.0.1 deduped
| `-- tildify@1.2.0 deduped
+-- gulp-eslint@3.0.1
| +-- bufferstreams@1.1.1
| | `-- readable-stream@2.2.9
| |   +-- buffer-shims@1.0.0 deduped
| |   +-- core-util-is@1.0.2 deduped
| |   +-- inherits@2.0.3 deduped
| |   +-- isarray@1.0.0
| |   +-- process-nextick-args@1.0.7 deduped
| |   +-- string_decoder@1.0.0
| |   | `-- buffer-shims@1.0.0 deduped
| |   `-- util-deprecate@1.0.2 deduped
| +-- eslint@3.19.0
| | +-- babel-code-frame@6.22.0
| | | +-- chalk@1.1.3 deduped
| | | +-- esutils@2.0.2 deduped
| | | `-- js-tokens@3.0.1
| | +-- chalk@1.1.3 deduped
| | +-- concat-stream@1.6.0
| | | +-- inherits@2.0.3 deduped
| | | +-- readable-stream@2.2.9
| | | | +-- buffer-shims@1.0.0 deduped
| | | | +-- core-util-is@1.0.2 deduped
| | | | +-- inherits@2.0.3 deduped
| | | | +-- isarray@1.0.0
| | | | +-- process-nextick-args@1.0.7 deduped
| | | | +-- string_decoder@1.0.0
| | | | | `-- buffer-shims@1.0.0 deduped
| | | | `-- util-deprecate@1.0.2 deduped
| | | `-- typedarray@0.0.6
| | +-- debug@2.2.0 deduped
| | +-- doctrine@2.0.0
| | | +-- esutils@2.0.2 deduped
| | | `-- isarray@1.0.0
| | +-- escope@3.6.0
| | | +-- es6-map@0.1.5
| | | | +-- d@1.0.0
| | | | | `-- es5-ext@0.10.15 deduped
| | | | +-- es5-ext@0.10.15
| | | | | +-- es6-iterator@2.0.1 deduped
| | | | | `-- es6-symbol@3.1.1 deduped
| | | | +-- es6-iterator@2.0.1
| | | | | +-- d@1.0.0 deduped
| | | | | +-- es5-ext@0.10.15 deduped
| | | | | `-- es6-symbol@3.1.1 deduped
| | | | +-- es6-set@0.1.5
| | | | | +-- d@1.0.0 deduped
| | | | | +-- es5-ext@0.10.15 deduped
| | | | | +-- es6-iterator@2.0.1 deduped
| | | | | +-- es6-symbol@3.1.1 deduped
| | | | | `-- event-emitter@0.3.5 deduped
| | | | +-- es6-symbol@3.1.1
| | | | | +-- d@1.0.0 deduped
| | | | | `-- es5-ext@0.10.15 deduped
| | | | `-- event-emitter@0.3.5
| | | |   +-- d@1.0.0 deduped
| | | |   `-- es5-ext@0.10.15 deduped
| | | +-- es6-weak-map@2.0.2
| | | | +-- d@1.0.0 deduped
| | | | +-- es5-ext@0.10.15 deduped
| | | | +-- es6-iterator@2.0.1 deduped
| | | | `-- es6-symbol@3.1.1 deduped
| | | +-- esrecurse@4.1.0
| | | | +-- estraverse@4.1.1
| | | | `-- object-assign@4.1.1
| | | `-- estraverse@4.2.0 deduped
| | +-- espree@3.4.1
| | | +-- acorn@5.0.3
| | | `-- acorn-jsx@3.0.1
| | |   `-- acorn@3.3.0
| | +-- esquery@1.0.0
| | | `-- estraverse@4.2.0 deduped
| | +-- estraverse@4.2.0
| | +-- esutils@2.0.2
| | +-- file-entry-cache@2.0.0
| | | +-- flat-cache@1.2.2
| | | | +-- circular-json@0.3.1
| | | | +-- del@2.2.2
| | | | | +-- globby@5.0.0
| | | | | | +-- array-union@1.0.2
| | | | | | | `-- array-uniq@1.0.3 deduped
| | | | | | +-- arrify@1.0.1 deduped
| | | | | | +-- glob@7.1.1
| | | | | | | +-- fs.realpath@1.0.0 deduped
| | | | | | | +-- inflight@1.0.6 deduped
| | | | | | | +-- inherits@2.0.3 deduped
| | | | | | | +-- minimatch@3.0.3 deduped
| | | | | | | +-- once@1.4.0 deduped
| | | | | | | `-- path-is-absolute@1.0.1 deduped
| | | | | | +-- object-assign@4.1.1
| | | | | | +-- pify@2.3.0 deduped
| | | | | | `-- pinkie-promise@2.0.1 deduped
| | | | | +-- is-path-cwd@1.0.0
| | | | | +-- is-path-in-cwd@1.0.0
| | | | | | `-- is-path-inside@1.0.0
| | | | | |   `-- path-is-inside@1.0.2 deduped
| | | | | +-- object-assign@4.1.1
| | | | | +-- pify@2.3.0 deduped
| | | | | +-- pinkie-promise@2.0.1 deduped
| | | | | `-- rimraf@2.4.5 deduped
| | | | +-- graceful-fs@4.1.11 deduped
| | | | `-- write@0.2.1
| | | |   `-- mkdirp@0.5.1 deduped
| | | `-- object-assign@4.1.1
| | +-- glob@7.1.1
| | | +-- fs.realpath@1.0.0 deduped
| | | +-- inflight@1.0.6 deduped
| | | +-- inherits@2.0.3 deduped
| | | +-- minimatch@3.0.3 deduped
| | | +-- once@1.4.0 deduped
| | | `-- path-is-absolute@1.0.1 deduped
| | +-- globals@9.17.0
| | +-- ignore@3.2.7
| | +-- imurmurhash@0.1.4
| | +-- inquirer@0.12.0
| | | +-- ansi-escapes@1.4.0
| | | +-- ansi-regex@2.1.1 deduped
| | | +-- chalk@1.1.3 deduped
| | | +-- cli-cursor@1.0.2
| | | | `-- restore-cursor@1.0.1
| | | |   +-- exit-hook@1.1.1
| | | |   `-- onetime@1.1.0 deduped
| | | +-- cli-width@2.1.0
| | | +-- figures@1.7.0
| | | | +-- escape-string-regexp@1.0.5 deduped
| | | | `-- object-assign@4.1.1
| | | +-- lodash@4.17.4 deduped
| | | +-- readline2@1.0.1
| | | | +-- code-point-at@1.1.0 deduped
| | | | +-- is-fullwidth-code-point@1.0.0 deduped
| | | | `-- mute-stream@0.0.5
| | | +-- run-async@0.1.0
| | | | `-- once@1.4.0 deduped
| | | +-- rx-lite@3.1.2
| | | +-- string-width@1.0.2 deduped
| | | +-- strip-ansi@3.0.1 deduped
| | | `-- through@2.3.8 deduped
| | +-- is-my-json-valid@2.16.0
| | | +-- generate-function@2.0.0
| | | +-- generate-object-property@1.2.0
| | | | `-- is-property@1.0.2
| | | +-- jsonpointer@4.0.1
| | | `-- xtend@4.0.1 deduped
| | +-- is-resolvable@1.0.0
| | | `-- tryit@1.0.3
| | +-- js-yaml@3.8.3
| | | +-- argparse@1.0.9
| | | | `-- sprintf-js@1.0.3
| | | `-- esprima@3.1.3
| | +-- json-stable-stringify@1.0.1
| | | `-- jsonify@0.0.0
| | +-- levn@0.3.0
| | | +-- prelude-ls@1.1.2
| | | `-- type-check@0.3.2
| | |   `-- prelude-ls@1.1.2 deduped
| | +-- lodash@4.17.4 deduped
| | +-- mkdirp@0.5.1 deduped
| | +-- natural-compare@1.4.0
| | +-- optionator@0.8.2
| | | +-- deep-is@0.1.3
| | | +-- fast-levenshtein@2.0.6
| | | +-- levn@0.3.0 deduped
| | | +-- prelude-ls@1.1.2 deduped
| | | +-- type-check@0.3.2 deduped
| | | `-- wordwrap@1.0.0 deduped
| | +-- path-is-inside@1.0.2
| | +-- pluralize@1.2.1
| | +-- progress@1.1.8
| | +-- require-uncached@1.0.3 deduped
| | +-- shelljs@0.7.7
| | | +-- glob@7.1.1
| | | | +-- fs.realpath@1.0.0 deduped
| | | | +-- inflight@1.0.6 deduped
| | | | +-- inherits@2.0.3 deduped
| | | | +-- minimatch@3.0.3 deduped
| | | | +-- once@1.4.0 deduped
| | | | `-- path-is-absolute@1.0.1 deduped
| | | +-- interpret@1.0.3 deduped
| | | `-- rechoir@0.6.2 deduped
| | +-- strip-bom@3.0.0
| | +-- strip-json-comments@2.0.1
| | +-- table@3.8.3
| | | +-- ajv@4.11.7
| | | | +-- co@4.6.0
| | | | `-- json-stable-stringify@1.0.1 deduped
| | | +-- ajv-keywords@1.5.1
| | | +-- chalk@1.1.3 deduped
| | | +-- lodash@4.17.4 deduped
| | | +-- slice-ansi@0.0.4
| | | `-- string-width@2.0.0
| | |   +-- is-fullwidth-code-point@2.0.0
| | |   `-- strip-ansi@3.0.1 deduped
| | +-- text-table@0.2.0
| | `-- user-home@2.0.0
| |   `-- os-homedir@1.0.2 deduped
| `-- gulp-util@3.0.8 deduped
+-- gulp-istanbul@1.1.1
| +-- gulp-util@3.0.8 deduped
| +-- istanbul@0.4.5
| | +-- abbrev@1.0.9
| | +-- async@1.5.2
| | +-- escodegen@1.8.1
| | | +-- esprima@2.7.3
| | | +-- estraverse@1.9.3
| | | +-- esutils@2.0.2 deduped
| | | +-- optionator@0.8.2 deduped
| | | `-- source-map@0.2.0
| | |   `-- amdefine@1.0.1
| | +-- esprima@2.7.3
| | +-- glob@5.0.15
| | | +-- inflight@1.0.6 deduped
| | | +-- inherits@2.0.3 deduped
| | | +-- minimatch@3.0.3 deduped
| | | +-- once@1.4.0 deduped
| | | `-- path-is-absolute@1.0.1 deduped
| | +-- handlebars@4.0.6
| | | +-- async@1.5.2
| | | +-- optimist@0.6.1
| | | | +-- minimist@0.0.8 deduped
| | | | `-- wordwrap@0.0.3
| | | +-- source-map@0.4.4
| | | | `-- amdefine@1.0.1 deduped
| | | `-- uglify-js@2.8.22
| | |   +-- source-map@0.5.6
| | |   +-- uglify-to-browserify@1.0.2
| | |   `-- yargs@3.10.0
| | |     +-- camelcase@1.2.1
| | |     +-- cliui@2.1.0
| | |     | +-- center-align@0.1.3
| | |     | | +-- align-text@0.1.4
| | |     | | | +-- kind-of@3.1.0 deduped
| | |     | | | +-- longest@1.0.1
| | |     | | | `-- repeat-string@1.6.1 deduped
| | |     | | `-- lazy-cache@1.0.4
| | |     | +-- right-align@0.1.3
| | |     | | `-- align-text@0.1.4 deduped
| | |     | `-- wordwrap@0.0.2
| | |     +-- decamelize@1.2.0 deduped
| | |     `-- window-size@0.1.0
| | +-- js-yaml@3.8.3 deduped
| | +-- mkdirp@0.5.1 deduped
| | +-- nopt@3.0.6
| | | `-- abbrev@1.0.9 deduped
| | +-- once@1.4.0
| | | `-- wrappy@1.0.2
| | +-- resolve@1.1.7
| | +-- supports-color@3.2.3
| | | `-- has-flag@1.0.0
| | +-- which@1.2.14
| | | `-- isexe@2.0.0
| | `-- wordwrap@1.0.0
| +-- istanbul-threshold-checker@0.1.0
| | +-- istanbul@0.3.22
| | | +-- abbrev@1.0.9 deduped
| | | +-- async@1.5.2
| | | +-- escodegen@1.7.1
| | | | +-- esprima@1.2.5
| | | | +-- estraverse@1.9.3
| | | | +-- esutils@2.0.2 deduped
| | | | +-- optionator@0.5.0
| | | | | +-- deep-is@0.1.3 deduped
| | | | | +-- fast-levenshtein@1.0.7
| | | | | +-- levn@0.2.5
| | | | | | +-- prelude-ls@1.1.2 deduped
| | | | | | `-- type-check@0.3.2 deduped
| | | | | +-- prelude-ls@1.1.2 deduped
| | | | | +-- type-check@0.3.2 deduped
| | | | | `-- wordwrap@0.0.3
| | | | `-- source-map@0.2.0 deduped
| | | +-- esprima@2.5.0
| | | +-- fileset@0.2.1
| | | | +-- glob@5.0.15
| | | | | +-- inflight@1.0.6 deduped
| | | | | +-- inherits@2.0.3 deduped
| | | | | +-- minimatch@2.0.10 deduped
| | | | | +-- once@1.4.0 deduped
| | | | | `-- path-is-absolute@1.0.1 deduped
| | | | `-- minimatch@2.0.10
| | | |   `-- brace-expansion@1.1.7 deduped
| | | +-- handlebars@4.0.6 deduped
| | | +-- js-yaml@3.8.3 deduped
| | | +-- mkdirp@0.5.1 deduped
| | | +-- nopt@3.0.6 deduped
| | | +-- once@1.4.0 deduped
| | | +-- resolve@1.1.7
| | | +-- supports-color@3.2.3
| | | | `-- has-flag@1.0.0 deduped
| | | +-- which@1.2.14 deduped
| | | `-- wordwrap@1.0.0 deduped
| | `-- lodash@3.6.0
| +-- lodash@4.17.4 deduped
| +-- through2@2.0.3 deduped
| `-- vinyl-sourcemaps-apply@0.2.1
|   `-- source-map@0.5.6
+-- gulp-jsdoc3@0.3.0
| +-- bluebird@3.5.0
| +-- debug@2.2.0 deduped
| +-- gulp-util@3.0.8 deduped
| +-- ink-docstrap@1.3.0
| | +-- moment@2.18.1 deduped
| | `-- sanitize-html@1.14.1
| |   +-- htmlparser2@3.9.2
| |   | +-- domelementtype@1.3.0
| |   | +-- domhandler@2.3.0
| |   | | `-- domelementtype@1.3.0 deduped
| |   | +-- domutils@1.5.1
| |   | | +-- dom-serializer@0.1.0
| |   | | | +-- domelementtype@1.1.3
| |   | | | `-- entities@1.1.1 deduped
| |   | | `-- domelementtype@1.3.0 deduped
| |   | +-- entities@1.1.1
| |   | +-- inherits@2.0.3 deduped
| |   | `-- readable-stream@2.2.9
| |   |   +-- buffer-shims@1.0.0 deduped
| |   |   +-- core-util-is@1.0.2 deduped
| |   |   +-- inherits@2.0.3 deduped
| |   |   +-- isarray@1.0.0
| |   |   +-- process-nextick-args@1.0.7 deduped
| |   |   +-- string_decoder@1.0.0
| |   |   | `-- buffer-shims@1.0.0 deduped
| |   |   `-- util-deprecate@1.0.2 deduped
| |   +-- regexp-quote@0.0.0
| |   `-- xtend@4.0.1 deduped
| +-- jsdoc@3.4.3
| | +-- bluebird@3.4.7
| | +-- catharsis@0.8.8
| | | `-- underscore-contrib@0.3.0
| | |   `-- underscore@1.6.0
| | +-- escape-string-regexp@1.0.5 deduped
| | +-- espree@3.1.7
| | | +-- acorn@3.3.0
| | | `-- acorn-jsx@3.0.1 deduped
| | +-- js2xmlparser@1.0.0
| | +-- klaw@1.3.1 deduped
| | +-- marked@0.3.6
| | +-- mkdirp@0.5.1 deduped
| | +-- requizzle@0.2.1
| | | `-- underscore@1.6.0
| | +-- strip-json-comments@2.0.1 deduped
| | +-- taffydb@2.6.2
| | `-- underscore@1.8.3 deduped
| +-- map-stream@0.0.6
| `-- tmp@0.0.28
|   `-- os-tmpdir@1.0.2
+-- gulp-tape@0.0.9
| +-- gulp-util@3.0.8 deduped
| +-- require-uncached@1.0.3
| | +-- caller-path@0.1.0
| | | `-- callsites@0.2.0
| | `-- resolve-from@1.0.1
| `-- through2@2.0.3 deduped
+-- gulp-watch@4.3.11
| +-- anymatch@1.3.0
| | +-- arrify@1.0.1
| | `-- micromatch@2.3.11
| |   +-- arr-diff@2.0.0
| |   | `-- arr-flatten@1.0.3
| |   +-- array-unique@0.2.1
| |   +-- braces@1.8.5
| |   | +-- expand-range@1.8.2
| |   | | `-- fill-range@2.2.3
| |   | |   +-- is-number@2.1.0
| |   | |   | `-- kind-of@3.1.0 deduped
| |   | |   +-- isobject@2.1.0
| |   | |   | `-- isarray@1.0.0
| |   | |   +-- randomatic@1.1.6
| |   | |   | +-- is-number@2.1.0 deduped
| |   | |   | `-- kind-of@3.1.0 deduped
| |   | |   +-- repeat-element@1.1.2 deduped
| |   | |   `-- repeat-string@1.6.1
| |   | +-- preserve@0.2.0
| |   | `-- repeat-element@1.1.2
| |   +-- expand-brackets@0.1.5
| |   | `-- is-posix-bracket@0.1.1
| |   +-- extglob@0.3.2
| |   | `-- is-extglob@1.0.0 deduped
| |   +-- filename-regex@2.0.0
| |   +-- is-extglob@1.0.0
| |   +-- is-glob@2.0.1 deduped
| |   +-- kind-of@3.1.0
| |   | `-- is-buffer@1.1.5
| |   +-- normalize-path@2.1.1
| |   | `-- remove-trailing-separator@1.0.1
| |   +-- object.omit@2.0.1
| |   | +-- for-own@0.1.5
| |   | | `-- for-in@1.0.2
| |   | `-- is-extendable@0.1.1
| |   +-- parse-glob@3.0.4
| |   | +-- glob-base@0.3.0
| |   | | +-- glob-parent@2.0.0 deduped
| |   | | `-- is-glob@2.0.1 deduped
| |   | +-- is-dotfile@1.0.2
| |   | +-- is-extglob@1.0.0 deduped
| |   | `-- is-glob@2.0.1 deduped
| |   `-- regex-cache@0.4.3
| |     +-- is-equal-shallow@0.1.3
| |     | `-- is-primitive@2.0.0 deduped
| |     `-- is-primitive@2.0.0
| +-- chokidar@1.6.1
| | +-- anymatch@1.3.0 deduped
| | +-- async-each@1.0.1
| | +-- UNMET OPTIONAL DEPENDENCY fsevents@^1.0.0
| | +-- glob-parent@2.0.0
| | | `-- is-glob@2.0.1 deduped
| | +-- inherits@2.0.3 deduped
| | +-- is-binary-path@1.0.1
| | | `-- binary-extensions@1.8.0
| | +-- is-glob@2.0.1
| | | `-- is-extglob@1.0.0 deduped
| | +-- path-is-absolute@1.0.1 deduped
| | `-- readdirp@2.1.0
| |   +-- graceful-fs@4.1.11 deduped
| |   +-- minimatch@3.0.3 deduped
| |   +-- readable-stream@2.2.9
| |   | +-- buffer-shims@1.0.0 deduped
| |   | +-- core-util-is@1.0.2 deduped
| |   | +-- inherits@2.0.3 deduped
| |   | +-- isarray@1.0.0
| |   | +-- process-nextick-args@1.0.7 deduped
| |   | +-- string_decoder@1.0.0
| |   | | `-- buffer-shims@1.0.0 deduped
| |   | `-- util-deprecate@1.0.2 deduped
| |   `-- set-immediate-shim@1.0.1
| +-- glob-parent@3.1.0
| | +-- is-glob@3.1.0
| | | `-- is-extglob@2.1.1
| | `-- path-dirname@1.0.2
| +-- gulp-util@3.0.8 deduped
| +-- object-assign@4.1.1
| +-- path-is-absolute@1.0.1
| +-- readable-stream@2.2.9
| | +-- buffer-shims@1.0.0
| | +-- core-util-is@1.0.2
| | +-- inherits@2.0.3 deduped
| | +-- isarray@1.0.0
| | +-- process-nextick-args@1.0.7
| | +-- string_decoder@1.0.0
| | | `-- buffer-shims@1.0.0 deduped
| | `-- util-deprecate@1.0.2
| +-- slash@1.0.0
| +-- vinyl@1.2.0
| | +-- clone@1.0.2
| | +-- clone-stats@0.0.1
| | `-- replace-ext@0.0.1 deduped
| `-- vinyl-file@2.0.0
|   +-- graceful-fs@4.1.11 deduped
|   +-- pify@2.3.0
|   +-- pinkie-promise@2.0.1
|   | `-- pinkie@2.0.4
|   +-- strip-bom@2.0.0
|   | `-- is-utf8@0.2.1 deduped
|   +-- strip-bom-stream@2.0.0
|   | +-- first-chunk-stream@2.0.0
|   | | `-- readable-stream@2.2.9
|   | |   +-- buffer-shims@1.0.0 deduped
|   | |   +-- core-util-is@1.0.2 deduped
|   | |   +-- inherits@2.0.3 deduped
|   | |   +-- isarray@1.0.0
|   | |   +-- process-nextick-args@1.0.7 deduped
|   | |   +-- string_decoder@1.0.0
|   | |   | `-- buffer-shims@1.0.0 deduped
|   | |   `-- util-deprecate@1.0.2 deduped
|   | `-- strip-bom@2.0.0
|   |   `-- is-utf8@0.2.1 deduped
|   `-- vinyl@1.2.0
|     +-- clone@1.0.2 deduped
|     +-- clone-stats@0.0.1 deduped
|     `-- replace-ext@0.0.1 deduped
+-- gunzip-maybe@1.4.0
| +-- browserify-zlib@0.1.4
| | `-- pako@0.2.9
| +-- is-deflate@1.0.0
| +-- is-gzip@1.0.0
| +-- peek-stream@1.1.2
| | +-- duplexify@3.5.0
| | | +-- end-of-stream@1.0.0
| | | | `-- once@1.3.3
| | | |   `-- wrappy@1.0.2 deduped
| | | +-- inherits@2.0.3 deduped
| | | +-- readable-stream@2.2.9
| | | | +-- buffer-shims@1.0.0 deduped
| | | | +-- core-util-is@1.0.2 deduped
| | | | +-- inherits@2.0.3 deduped
| | | | +-- isarray@1.0.0
| | | | +-- process-nextick-args@1.0.7 deduped
| | | | +-- string_decoder@1.0.0
| | | | | `-- buffer-shims@1.0.0 deduped
| | | | `-- util-deprecate@1.0.2 deduped
| | | `-- stream-shift@1.0.0
| | `-- through2@2.0.3 deduped
| +-- pumpify@1.3.5
| | +-- duplexify@3.5.0 deduped
| | +-- inherits@2.0.3 deduped
| | `-- pump@1.0.2 deduped
| `-- through2@2.0.3 deduped
+-- intercept-stdout@0.1.2
| `-- lodash.toarray@3.0.2
|   +-- lodash._arraycopy@3.0.0
|   +-- lodash._basevalues@3.0.0
|   `-- lodash.keys@3.1.2
|     +-- lodash._getnative@3.9.1
|     +-- lodash.isarguments@3.1.0
|     `-- lodash.isarray@3.0.4
+-- jsrsasign@6.2.2
+-- log4js@0.6.38
| +-- readable-stream@1.0.34
| | +-- core-util-is@1.0.2 deduped
| | +-- inherits@2.0.3 deduped
| | +-- isarray@0.0.1
| | `-- string_decoder@0.10.31
| `-- semver@4.3.6 deduped
+-- mock-couch@0.1.8 (git+https://github.com/jimthematrix/mock-couch.git#38c1b03ab80966e5fb88284e3c9cdef1ab04244f)
| +-- couch-viewkey-compare@1.0.1
| +-- ramda@0.8.0
| +-- restify@3.0.3 (git+https://github.com/jimthematrix/node-restify.git#c4adf56b1f51d790c87f3a381cce20bc3ef287d1)
| | +-- assert-plus@0.1.5
| | +-- backoff@2.5.0
| | | `-- precond@0.2.3
| | +-- bunyan@1.3.4
| | | +-- dtrace-provider@0.4.0 deduped
| | | +-- mv@2.1.1 deduped
| | | `-- safe-json-stringify@1.0.4 deduped
| | +-- csv@0.4.6
| | | +-- csv-generate@0.0.6
| | | +-- csv-parse@1.2.0
| | | +-- csv-stringify@0.0.8
| | | `-- stream-transform@0.1.2
| | +-- deep-equal@1.0.1 deduped
| | +-- dtrace-provider@0.4.0
| | | `-- nan@1.5.3
| | +-- escape-regexp-component@1.0.2
| | +-- formidable@1.1.1
| | +-- http-signature@0.10.1
| | | +-- asn1@0.1.11
| | | +-- assert-plus@0.1.5 deduped
| | | `-- ctype@0.5.3
| | +-- keep-alive-agent@0.0.1
| | +-- lru-cache@2.7.3
| | +-- mime@1.3.4
| | +-- negotiator@0.5.3
| | +-- node-uuid@1.4.8 deduped
| | +-- once@1.4.0 deduped
| | +-- qs@2.4.2
| | +-- semver@4.3.6 deduped
| | +-- spdy@2.1.0
| | | +-- debug@2.2.0 deduped
| | | +-- handle-thing@1.2.5
| | | +-- http-deceiver@1.2.7
| | | +-- select-hose@2.0.0
| | | `-- spdy-transport@1.2.1
| | |   +-- debug@2.2.0 deduped
| | |   +-- hpack.js@2.1.6
| | |   | +-- inherits@2.0.3 deduped
| | |   | +-- obuf@1.1.1 deduped
| | |   | +-- readable-stream@2.2.9
| | |   | | +-- buffer-shims@1.0.0 deduped
| | |   | | +-- core-util-is@1.0.2 deduped
| | |   | | +-- inherits@2.0.3 deduped
| | |   | | +-- isarray@1.0.0
| | |   | | +-- process-nextick-args@1.0.7 deduped
| | |   | | +-- string_decoder@1.0.0
| | |   | | | `-- buffer-shims@1.0.0 deduped
| | |   | | `-- util-deprecate@1.0.2 deduped
| | |   | `-- wbuf@1.7.2 deduped
| | |   +-- obuf@1.1.1
| | |   +-- readable-stream@2.2.9
| | |   | +-- buffer-shims@1.0.0 deduped
| | |   | +-- core-util-is@1.0.2 deduped
| | |   | +-- inherits@2.0.3 deduped
| | |   | +-- isarray@1.0.0
| | |   | +-- process-nextick-args@1.0.7 deduped
| | |   | +-- string_decoder@1.0.0
| | |   | | `-- buffer-shims@1.0.0 deduped
| | |   | `-- util-deprecate@1.0.2 deduped
| | |   `-- wbuf@1.7.2
| | |     `-- minimalistic-assert@1.0.0 deduped
| | +-- tunnel-agent@0.4.3 deduped
| | `-- verror@1.9.0
| |   +-- assert-plus@1.0.0
| |   +-- core-util-is@1.0.2 deduped
| |   `-- extsprintf@1.3.0
| `-- underscore@1.8.3
+-- nano@6.2.0
| +-- debug@2.2.0 deduped
| +-- errs@0.3.2
| +-- follow@0.12.1
| | +-- browser-request@0.3.3
| | +-- debug@2.2.0 deduped
| | `-- request@2.55.0
| |   +-- aws-sign2@0.5.0
| |   +-- bl@0.9.5
| |   | `-- readable-stream@1.0.34 deduped
| |   +-- caseless@0.9.0
| |   +-- combined-stream@0.0.7
| |   | `-- delayed-stream@0.0.5
| |   +-- forever-agent@0.6.1 deduped
| |   +-- form-data@0.2.0
| |   | +-- async@0.9.2
| |   | +-- combined-stream@0.0.7 deduped
| |   | `-- mime-types@2.0.14 deduped
| |   +-- har-validator@1.8.0
| |   | +-- bluebird@2.11.0
| |   | +-- chalk@1.1.3 deduped
| |   | +-- commander@2.9.0 deduped
| |   | `-- is-my-json-valid@2.16.0 deduped
| |   +-- hawk@2.3.1
| |   | +-- boom@2.10.1 deduped
| |   | +-- cryptiles@2.0.5 deduped
| |   | +-- hoek@2.16.3 deduped
| |   | `-- sntp@1.0.9 deduped
| |   +-- http-signature@0.10.1 deduped
| |   +-- isstream@0.1.2 deduped
| |   +-- json-stringify-safe@5.0.1 deduped
| |   +-- mime-types@2.0.14
| |   | `-- mime-db@1.12.0
| |   +-- node-uuid@1.4.8 deduped
| |   +-- oauth-sign@0.6.0
| |   +-- qs@2.4.2 deduped
| |   +-- stringstream@0.0.5 deduped
| |   +-- tough-cookie@2.3.2 deduped
| |   `-- tunnel-agent@0.4.3 deduped
| +-- request@2.76.0 deduped
| `-- underscore@1.8.3 deduped
+-- require-dir@0.3.1
+-- rewire@2.5.2
+-- tap-colorize@1.2.0
| +-- colornames@0.0.2
| +-- minimist@0.2.0
| +-- quotemeta@0.0.0
| +-- split@0.3.3
| | `-- through@2.3.8 deduped
| +-- stream-combiner@0.2.2
| | +-- duplexer@0.1.1
| | `-- through@2.3.8 deduped
| +-- through2@1.0.0
| | +-- readable-stream@1.1.14
| | | +-- core-util-is@1.0.2 deduped
| | | +-- inherits@2.0.3 deduped
| | | +-- isarray@0.0.1 deduped
| | | `-- string_decoder@0.10.31 deduped
| | `-- xtend@2.1.2
| |   `-- object-keys@0.4.0
| `-- x256@0.0.2
+-- tape@4.6.3",,,,,,,,,,,,,,,,FAB-1293,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vud:,,,,,,,,jjjjibm,,,,,,,,,,master,,,true,19/Apr/17 6:55 PM;jjjjibm;A little internet search shows that Win32 126 can mean 'Module could not be found' which makes sense in this context.   Should SDK surface the error as is?,19/Apr/17 7:19 PM;jimthematrix;not going to support windows 7 so let's try to get a test on windows 10 and see what happens.,"27/Apr/17 7:59 PM;jjjjibm;I have recreated this problem on Windows 10 Pro.  Here is the error message from the win10pro run: 

not ok 267 Should attempt to load the bccsp_pkcs11 module and fail because of the dummy library path
  ---
    operator: throws
    expected: |-
      '/Error:.*\\/usr\\/local\\/lib/'
    actual: |-
      { [Error: Win32 error 126
    at Error (native) PKCS11::Load:129] message: 'Win32 error 126\n    at Error (native) PKCS11::Load:129' }
    at: test (C:\Users\ibmadmin\go\src\github.com\hyperledger\fabric-sdk-node\test\unit\cryptosuite-ecdsa-aes.js:165:4)",01/May/17 9:45 PM;jjjjibm;Please link to Gerrit patch before closing.  Thanks. ,02/May/17 3:39 PM;jimthematrix;after discussing with [~ChristopherFerris] we'll address this as a unique problem for contributors or app developers windows support,"23/May/17 9:21 PM;jjjjibm;commit ef61a8bffb6f77f8a664d0760ed8004e32b6d308

Author: jjjjibm <jcwolf@us.ibm.com>

Date: Tue May 23 17:10:06 2017 -0400

　

[FAB-3253] Should attempt to load bccsp_pkcs11

　

Windows platforms (Win7, Win10) throw a different error message

for this case. The solution is to test process.platform for 'Win32'

and use the Windows error as the expected error.

　

Change-Id: I66e86a3e5284ee267ebd24c0a6b47514155979a9

Signed-off-by: jjjjibm <jcwolf@us.ibm.com>

 

The fix was easy once I had node-SDK running natively on Win7 and Win10.

 ",23/May/17 9:22 PM;jjjjibm;https://gerrit.hyperledger.org/r/#/c/9731/,,,,,,,,,,,,,,,,,
Inaccurate error message when event registration message is not properly signed,FAB-3252,15844,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,19/Apr/17 3:48 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,10/May/17 5:14 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"If the event message is not properly signed, the peer returns the following error:

event message must be properly signed by an identity from a participating organization in any of the channels existing in the peer

This is not accurate because the latest logic is only check against the local MSP, no checks against channel is done for v1.0.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vu5:,,Sprint 16 - SDK node,,,,,,,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
unused variables in github.com/hyperledger/fabric/core/deliverservice,FAB-3251,15843,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,19/Apr/17 3:45 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,21/Apr/17 9:12 PM,v1.0.0,,,,,,v1.0.0,,,fabric-peer,,,,0,staticanalysis,,,,,,,,"unused github.com/hyperledger/fabric/core/deliverservice
core/deliverservice/client_test.go:85:6: type atomicBroadcastBroadcastClient is unused (U1000)",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vtx:,,,,,,,,ChristopherFerris,,,,,,,,,,master,,,true,19/Apr/17 3:55 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8237/,,,,,,,,,,,,,,,,,,,,,,,
"examples/e2e_cli fails when channel name contains ""_""",FAB-3250,15842,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,mrkiouak,mrkiouak,19/Apr/17 3:15 PM,15/Jul/17 12:35 PM,26/Apr/18 6:50 AM,25/May/17 3:48 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-quality,,,,0,,,,,,,,,"Ubuntu 16.04

docker-compose down && docker-compose up -d && ./network_setup.sh up underscore-test && docker-compose down && docker-compose up -d && ./network_setup.sh up underscore_test

./network_setup.sh up underscore-test succeeds, ./network_setup.sh up underscore_test fails

https://pastebin.com/nNxZyAXY",,,,,,,,,,,,,,,,,,,,15/Jul/17 12:35 PM;chawlanikhil24;orderer-logs.png;https://jira.hyperledger.org/secure/attachment/11682/orderer-logs.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vtp:,,,,,,,,chawlanikhil24,hanwei,mrkiouak,wlahti,,,,,,,,,,,"21/Apr/17 8:07 AM;hanwei;you can find the reason at func validateChainID in fabric/common/configtx/manager.go.
To kafka, the legal is ""[a-zA-Z0-9\\._\\-]"", and find it for detail:
https://github.com/apache/kafka/blob/trunk/core/src/main/scala/kafka/common/Topic.scala#L29","21/Apr/17 8:10 AM;hanwei;You can find the error log with ""docker logs orderer"",which looks like:

2017-04-21 07:51:58.100 UTC [orderer/multichain] Apply -> DEBU 178 Rejecting channel creation because: Failed to create config manager and handlers: Bad channel id: Chain ID 'test_test' contains illegal characters
2017-04-21 07:51:58.100 UTC [orderer/common/broadcast] Handle -> WARN 179 Rejecting broadcast message because of filter error: Rejected by rule: *multichain.systemChainFilter
2017-04-21 07:51:58.105 UTC [orderer/common/deliver] Handle -> WARN 17a Error reading from stream: stream error: code = 1 desc = ""context canceled""
","25/May/17 3:48 PM;wlahti;Yes, as [~hanwei] pointed out, a valid channel ID cannot contain an underscore. Here are the code comments for the validateChainID function: 
{code:java}
// validateChainID makes sure that proposed chain IDs (i.e. channel names)
// comply with the following restrictions:
// 1. Contain only ASCII alphanumerics, dots '.', dashes '-'
// 2. Are shorter than 250 characters.
// 3. Are not the strings ""."" or "".."".
//
// Our hand here is forced by:
// https://github.com/apache/kafka/blob/trunk/core/src/main/scala/kafka/common/Topic.scala#L29{code}
 

 ","15/Jul/17 12:33 PM;chawlanikhil24;Hi, I am setting up fabric-1.0 over kubernetes. I've successfully created channel on K8s but, peers are not able to join these channels. I went though the source code of fabric and found out that error is due to grpc. I am attaching the logs of orderer-service in K8s and the highlighted warning is the possible cause of that GRPC error. 

!image-2017-07-15-18-04-25-581.png!  ",15/Jul/17 12:35 PM;chawlanikhil24;!orderer-logs.png!,,,,,,,,,,,,,,,,,,,
Make gossip random functions have more entropy,FAB-3245,15837,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,19/Apr/17 1:06 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,24/Apr/17 11:34 AM,,,,,,,v1.0.0,,,fabric-gossip,,,,0,gossip,,,,,,,,"In gossip the random uses math instead of crypto, and it is initialized with a static seed of 42 instead of something more random. 

I think we should make it be more random.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00vst:,,Sprint 16 - Gossip,,,,,,ChristopherFerris,yacovm,,,,,,,,,master,,,true,21/Apr/17 8:35 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8219/,,,,,,,,,,,,,,,,,,,,,,,
Do not send redundant StateInfo messages in gossip,FAB-3241,15833,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,19/Apr/17 9:56 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,21/Apr/17 7:21 AM,,,,,,,v1.0.0,,,fabric-gossip,,,,0,gossip,,,,,,,,"In gossip, whenever the channel related metadata is updated, a ""dirty flag"" is turned on, and periodically a goroutine disseminates to peers if the dirty flag is turned on.
There is a bug that this dirty flag is never turned off. 
This causes a redundant dissemination of StateInfo. 

The stateInfo is periodically pulled from peers via a pull mechanism anyway- so there is no point in having periodical dissemination and thus the dirty flag should be turned off after dissemination.

https://github.com/hyperledger/fabric/blob/master/gossip/gossip/channel/channel.go#L230-L238

{code}

func (gc *gossipChannel) publishStateInfo() {
	if atomic.LoadInt32(&gc.shouldGossipStateInfo) == int32(0) {
		return
	}
	gc.RLock()
	stateInfoMsg := gc.stateInfoMsg
	gc.RUnlock()
	gc.Gossip(stateInfoMsg)
}
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vrx:,,Sprint 16 - Gossip,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
ca error when install chaincode,FAB-3239,15830,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,baohua,baohua,baohua,19/Apr/17 3:07 AM,21/Apr/17 1:37 AM,26/Apr/18 6:50 AM,21/Apr/17 1:37 AM,,,,,,,v1.0.0,,,fabric-sdk-py,,,,0,SDK-Python,,,,,,,,When install chaincode with fabric-sdk-py,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vrh:,,,,,,,,baohua,honghongbuqi,,,,,,,,,master,,,true,20/Apr/17 7:38 AM;baohua;https://gerrit.hyperledger.org/r/#/c/8205/,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] npm test not npm test-headless ,FAB-3234,15823,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,18/Apr/17 9:27 PM,10/May/17 5:05 AM,26/Apr/18 6:50 AM,10/May/17 5:05 AM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,,,,,,,,,"This web page: https://github.com/hyperledger/fabric-sdk-node
has this instruction:

+npm test-headless +to run the headless tests that do not require any additional set up

However, if you attempt npm test-headless from the <fabric-sdk-node> directory, you get this result:
_ibmadmin@jcwNodeSDK:~/work/src/github.com/hyperledger/fabric-sdk-node$ npm test-headless

Usage: npm <command>

where <command> is one of:
    access, adduser, bin, bugs, c, cache, completion, config,
    ddp, dedupe, deprecate, dist-tag, docs, edit, explore, get,
    help, help-search, i, init, install, install-test, it, link,
    list, ln, logout, ls, outdated, owner, pack, ping, prefix,
    prune, publish, rb, rebuild, repo, restart, root, run,
    run-script, s, se, search, set, shrinkwrap, star, stars,
    start, stop, t, tag, team, test, tst, un, uninstall,
    unpublish, unstar, up, update, v, version, view, whoami

npm <cmd> -h     quick help on <cmd>
npm -l           display full usage info
npm help <term>  search for help on <term>
npm help npm     involved overview

Specify configs in the ini-formatted file:
    /home/ibmadmin/.npmrc
or on the command line via: npm <command> --key value
Config info can be viewed via: npm help config

npm@3.10.3 /usr/local/lib/node_modules/npm
ibmadmin@jcwNodeSDK:~/work/src/github.com/hyperledger/fabric-sdk-node$
_
You can enter 'npm test' and this will drive gulp test-headless.","Any browser will display the erroneous command. 
fabric-sdk-node: commit b00a5234891766111613a5235b21a3136cf7321d
",,,,,,,,,,,,,,,,FAB-1293,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vpx:,,,,,,,,jjjjibm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
dead links in Building the fabric page,FAB-3229,15818,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,tkuhrt,jjjjibm,jjjjibm,18/Apr/17 6:24 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,24/Apr/17 12:10 AM,,,,,,,,,,fabric-docs,,,,0,,,,,,,,,"1.Using a browser, navigate here: http://hyperledger-fabric.readthedocs.io/en/latest/dev-setup/build.html
2. In this section,
_Building the fabric

The following instructions assume that you have already set up your{color:#14892c} development environment._{color}

click the highlighted phrase {color:#14892c}development environment{color}. 

and see this output\          SORRY            /
h1.          \                         /
h1.           \    This page does     /
h1.            ]   not exist yet.    [    ,'|
h1.            ]                     [   /  |
h1.            ]___               ___[ ,'   |
h1.            ]  ]\             /[  [ |:   |
h1.            ]  ] \           / [  [ |:   |
h1.            ]  ]  ]         [  [  [ |:   |
h1.            ]  ]  ]__     __[  [  [ |:   |
h1.            ]  ]  ] ]\ _ /[ [  [  [ |:   |
h1.            ]  ]  ] ] (#) [ [  [  [ :===='
h1.            ]  ]  ]_].nHn.[_[  [  [
h1.            ]  ]  ]  HHHHH. [  [  [
h1.            ]  ] /   `HH(""N  \ [  [
h1.            ]__]/     HHH  ""  \[__[
h1.            ]         NNN         [
h1.            ]         N/""         [
h1.            ]         N H         [
h1.           /          N            \
h1.          /           q,            \
h1.         /                           \
h1. 3.In this section:
_Running Node.js Unit Tests

You must also run the Node.js unit tests to insure that the Node.js client SDK is not broken by your changes. To run the Node.js unit tests, follow the instructions here._

click the highlighted word{color:#14892c} here{color}
and see this output: 
Not Found

4.In this section:
_Running Behave BDD Tests
Note: currently, the behave tests must be run from within in the Vagrant environment. See the devenv setup instructions if you have not already set up your Vagrant environment._

click the highlighted words {color:#14892c}Vagrant environment{color}
and see this output: 
\          SORRY            /
         \                         /
          \    This page does     /
           ]   not exist yet.    [    ,'|
           ]                     [   /  |
           ]___               ___[ ,'   |
           ]  ]\             /[  [ |:   |
           ]  ] \           / [  [ |:   |
           ]  ]  ]         [  [  [ |:   |
           ]  ]  ]__     __[  [  [ |:   |
           ]  ]  ] ]\ _ /[ [  [  [ |:   |
           ]  ]  ] ] (#) [ [  [  [ :===='
           ]  ]  ]_].nHn.[_[  [  [
           ]  ]  ]  HHHHH. [  [  [
           ]  ] /   `HH(""N  \ [  [
           ]__]/     HHH  ""  \[__[
           ]         NNN         [
           ]         N/""         [
           ]         N H         [
          /          N            \
         /           q,            \
        /                           \
5. In this sectionBuilding on Power Platform

_Development and build on Power (ppc64le) systems is done outside of vagrant as outlined here. _
click the highlighted word {color:#cccccc}here{color} 

and see no output whatsoever (a truly dead link).

6.In this section:
_Logging
_Logging utilizes the go-logging library.

The available log levels in order of increasing verbosity are: CRITICAL | ERROR | WARNING | NOTICE | INFO | DEBUG

See specific logging control instructions when running the peer process.
_

click the highlighted{color:#14892c} phrase specific logging control {color}
and see this output:
{color:#59afe1}404 This is not the web page you are looking for
{color}",,,,,,,,,,,,,,,,,FAB-1293,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vot:,,,,,,,,jjjjibm,tkuhrt,,,,,,,,,master,,,true,21/Apr/17 7:36 PM;tkuhrt;https://gerrit.hyperledger.org/r/#/c/8325/,,,,,,,,,,,,,,,,,,,,,,,
Peer logs doesnt have any log indication for Trasaction Commited or Block Notification Sent,FAB-3227,15816,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,rhegde,rhegde,18/Apr/17 6:18 PM,26/Apr/17 6:31 PM,26/Apr/18 6:50 AM,26/Apr/17 6:31 PM,,,,,,,,,,,,,,0,,,,,,,,,"During debugging of an block event notification, no notification was received by the java fabric sdk client. Peer logs doesn't help to indicate there is no block transaction notification sent. Peer logging will help to indicate that there could be a issue in Java Fabric SDK. 

Raised issue after discussion. CC: [~jimthematrix]  ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vod:,,,,,,,,rhegde,wlahti,,,,,,,,,,,,,19/Apr/17 5:39 PM;wlahti;Didn't notice this JIRA item so I created a new one. Additional logging has been merged via https://jira.hyperledger.org/browse/FAB-3233.,,,,,,,,,,,,,,,,,,,,,,,
dead link in Setting up the development environment/Building the fabric,FAB-3225,15814,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,tkuhrt,jjjjibm,jjjjibm,18/Apr/17 6:00 PM,25/Apr/17 1:32 PM,26/Apr/18 6:50 AM,25/Apr/17 1:32 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,,"1.Using a browser, navigate here: http://hyperledger-fabric.readthedocs.io/en/latest/getting_started.html

2.Scroll down to  this section: 
{color:#59afe1}Building the fabric

Once you have all the dependencies installed, and have cloned the repository, you can proceed to* build and test *the fabric.{color}

3.In that section, click the highlighted phrase {color:#cccccc}build and test{color}

4.See this output:
 \          SORRY            /
         \                         /
          \    This page does     /
           ]   not exist yet.    [    ,'|
           ]                     [   /  |
           ]___               ___[ ,'   |
           ]  ]\             /[  [ |:   |
           ]  ] \           / [  [ |:   |
           ]  ]  ]         [  [  [ |:   |
           ]  ]  ]__     __[  [  [ |:   |
           ]  ]  ] ]\ _ /[ [  [  [ |:   |
           ]  ]  ] ] (#) [ [  [  [ :===='
           ]  ]  ]_].nHn.[_[  [  [
           ]  ]  ]  HHHHH. [  [  [
           ]  ] /   `HH(""N  \ [  [
           ]__]/     HHH  ""  \[__[
           ]         NNN         [
           ]         N/""         [
           ]         N H         [
          /          N            \
         /           q,            \
        /                           \

How to recreate:
As described.",IE 11 browser on Win7  (but probably no important for this defect),,,,,,,,,,,,,,,,FAB-1293,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vnx:,,,,,,,,ChristopherFerris,jjjjibm,tkuhrt,,,,,,,,,,,,23/Apr/17 2:23 PM;ChristopherFerris;This is usually the result of a link to a markdown file not having been translated to point to the corresponding rst file (html).,"24/Apr/17 12:15 AM;tkuhrt;Janet, can you verify that this is still a problem.  I just checked the getting started file, and I could not find the link that you mention.","24/Apr/17 5:03 PM;jjjjibm;Found the link:
Building the fabric

Once you have all the dependencies installed, and have cloned the repository, you can proceed to build and test the fabric.


It looks like the link has been fixed.",25/Apr/17 1:32 PM;tkuhrt;Marked as Done since this has been fixed outside of this bug.,,,,,,,,,,,,,,,,,,,,
Deadlock in Event Hub,FAB-3217,15806,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,bstasyszyn,bstasyszyn,bstasyszyn,18/Apr/17 1:21 PM,20/Apr/17 2:36 PM,26/Apr/18 6:50 AM,20/Apr/17 2:36 PM,,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,The Recv() function holds a read lock on the event hub struct while calling the default callback function txCallback() which in turn tries to create it's own read lock. If a call is made to register/unregister event before the second read lock is acquired then a deadlock will occur.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00trf:,,,,,,,,bstasyszyn,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Add revocation support to gossip,FAB-3213,15802,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,18/Apr/17 10:05 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,20/Apr/17 11:39 AM,,,,,,,,,,,,,,0,,,,,,,,,"When a peer gets a new config block and it contains CRLs, the gossip layer needs to be notified in order to close existing connections to peers that their certificates have been expired. 

If this is not done, then these peers are still forwarded data like peer membership and channel membership, because the connection is already open.

What can be done, is to simply expand the [config | https://github.com/hyperledger/fabric/blob/master/gossip/service/eventer.go#L27-L37] interface:
{code}
// Config enumerates the configuration methods required by gossip
type Config interface {
	// ChainID returns the chainID for this channel
	ChainID() string

	// Organizations returns a map of org ID to ApplicationOrgConfig
	Organizations() map[string]config.ApplicationOrg

	// Sequence should return the sequence number of the current configuration
	Sequence() uint64
}
{code}
To have an object/function that given a serialized identity, it returns true or false whether it is revoked.
Then, this object would be passed further down to the [gossip package | https://github.com/hyperledger/fabric/blob/master/gossip/gossip/], where we'd iterate over the certificates known to us, and obtain the PKI-IDs that their corresponding connections should be closed (we can detect if a certificate is revoked by simply asking the MSP to [validate | https://github.com/hyperledger/fabric/blob/master/gossip/api/crypto.go#L55] that certificate) , and then the code would make the gossip's code layer to [close | https://github.com/hyperledger/fabric/blob/master/gossip/comm/comm.go#L53] the connection

[~C0rWin] [~mastersingh24] [~binhn] [~elli-androulaki]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00vl9:,,Sprint 16 - Gossip,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
configtxgen bug -outputBlock & -channelID,FAB-3210,15798,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,Lin-YiTang,Lin-YiTang,18/Apr/17 4:09 AM,02/Jun/17 6:18 PM,26/Apr/18 6:50 AM,02/Jun/17 5:55 PM,v1.0.0-alpha1,,,,,,WON'T FIX,,,fabric-orderer,,,,0,won't-fix,,,,,,,,"i try -outputBlock & -channelID
and Orderer use that Block(setting ORDERER_GENERAL_GENESISFILE)
it can't work , when ""peer channel create""
example 
configtxgen -profile TwoOrgs -outputBlock orderer.block {color:red}-channelID mychannel{color}

you can try modify e2e_cli/generateCfgTrx.sh ,then you will understand my mind

./build/bin/configtxgen -profile TwoOrgs -outputBlock orderer.block 
change to
./build/bin/configtxgen -profile TwoOrgs -outputBlock orderer.block {color:red}-channelID $CHANNEL_NAME{color}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vkl:,,,,,,,,arun17,jyellick,Lin-YiTang,,,,,,,,,,,,"02/Jun/17 5:53 PM;jyellick;I do not believe this is a bug.  I cannot reproduce.

I've attempted to recreate this locally.

I ran the following:

{noformat}
configtxgen -outputBlock foo.block -channelID foo

ORDERER_GENESIS_METHOD=file ORDERER_GENESIS_FILE=foo.block orderer &

configtxgen -outputCreateChannelTx -channelID bar.tx -profile SampleEmptyInsecureChannel

peer channel create -f bar.tx -c bar -o 127.0.0.1:7050
{noformat}

The channel was created and the bar.block was retrieved.

I also tested this in e2e with similar results.

It looks to me like what may have been done to the e2e script was to re-use the variable $CHANNEL_NAME to generate the genesis block.  If you have done this, this would mean that the peer is trying to create a channel with the same name as the ordering system channel, which will most certainly, and correctly fail (causing the e2e test to fail).

",,,,,,,,,,,,,,,,,,,,,,,
Update Java example_cc for fabric 82ecbeaf,FAB-3209,15796,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,sanchezl,sanchezl,18/Apr/17 1:52 AM,19/Apr/17 1:45 PM,26/Apr/18 6:50 AM,19/Apr/17 1:45 PM,,,,,,,v1.0.0,,,fabric-sdk-java,,,,0,chaincode,,,,,,,,"Update Java chain code example_cc to sync with:
* FAB-3066
* FAB-3101",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vk5:,,Sprint 16 - SDK Java,,,,,,sanchezl,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Join channel might fail if events are failed to be published,FAB-3207,15794,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,yacovm,yacovm,17/Apr/17 6:47 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,18/Apr/17 6:43 PM,v1.0.0,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"The code below is invoked when join channel is called:
https://github.com/hyperledger/fabric/blob/master/core/scc/cscc/configure.go#L124-L127
{code}
	if err := producer.SendProducerBlockEvent(block); err != nil {
		msg := fmt.Sprintf(""Error sending block event %s"", err)
		return shim.Error(msg)
	}
{code}
While the call to publish the event might fail in case a subscriber is reading ""too slow"" from the channel/stream:
https://github.com/hyperledger/fabric/blob/master/events/producer/events.go#L324-L327
{code}
func Send(e *pb.Event) error {
                ...
                ...
                ... 
		select {
		case gEventProcessor.eventChannel <- e:
		case <-time.After(time.Duration(gEventProcessor.timeout) * time.Millisecond):
			return fmt.Errorf(""could not send the blocking event"")
		}
	}
{code}

IMO an event publishing shouldn't fail a channel joining, and this also exposes the peer to an attack by a client - it can render the peer unable to join to any channel in this way.
[~C0rWin] [~mastersingh24] [~binhn]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vjp:,,,,,,,,yacovm,,,,,,,,,,master,,,true,"17/Apr/17 6:49 PM;yacovm;Also - my opinion is that slow reading clients should just be removed as subscribers from the event hub, as they also ""block"" the publishing for all other subscribers:
https://github.com/hyperledger/fabric/blob/master/events/producer/events.go#L212-L236
{code}
		hl.foreach(e, func(h *handler) {
			if e.Event != nil {
				h.SendMessage(e)
			}
		})
{code}",,,,,,,,,,,,,,,,,,,,,,,
Check if hf.Revoker attribute is set to true to determine if an identity has revoker previlege,FAB-3206,15793,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,aambati,aambati,17/Apr/17 5:29 PM,26/May/17 3:39 PM,26/Apr/18 6:50 AM,26/May/17 3:38 PM,v1.0.0-alpha1,,,,,,v1.0.0,WON'T FIX,,,,,,0,,,,,,,,,"Check if *hf.Revoker* attribute is set to ""true"" to determine if an identity has revoker privilege, as opposed to just checking if *hf.Revoker* attribute is set (to some value)

Also, in configuration template hf.Revoker attribute in the admin identity section is set to true, instead of ""true"" as attribute values need to be strings
",,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vjh:,,,,,,,,aambati,ChristopherFerris,,,,,,,,,,,,,08/May/17 10:55 AM;ChristopherFerris;This needs more information - have no idea what this is about.,26/May/17 6:47 AM;ChristopherFerris;[~aambati] [~bmos299] this needs more information to make it actionable.,26/May/17 3:38 PM;aambati;I think it is working as it is currently – code is checking if the attribute hf.Revoker is set or not.  There is no need to check if the value is true or not. I will close this.,,,,,,,,,,,,,,,,,,,,,
Fix broken links in Read the Docs (using relative file paths),FAB-3201,15788,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,tkuhrt,nickgaski,nickgaski,17/Apr/17 2:55 PM,17/May/17 4:58 PM,26/Apr/18 6:50 AM,17/May/17 4:56 PM,v1.0.0-alpha2,,,,,,v1.0.0,,,fabric-docs,,,,0,Documentation,,,,,,,,A lot of these broken links occurred as a result of the md -> rst conversion.  A good number will need to be scrubbed.  This will be ongoing... ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3040,0|hzzz5h:,,Sprint 17 - Documentation,,,,,,ChristopherFerris,JonathanLevi,lehors,markparz,nickgaski,,,,,,master,,,true,27/Apr/17 7:08 PM;markparz;[~tkuhrt] [~lehors] and [~nickgaski] are collaborating together on these.,16/May/17 12:08 PM;JonathanLevi;Gerrit CR: https://gerrit.hyperledger.org/r/#/c/8887,"17/May/17 7:57 AM;lehors;With the merge of CR8887 the only broken links left according to Xenu are the following:
{code:java}
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxOERBMTRGRDBFMUUxMUUzODUwMkJCOThDMEVFNURFMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxOERBMTRGRTBFMUUxMUUzODUwMkJCOThDMEVFNURFMCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjE4REExNEZCMEUxRTExRTM4NTAyQkI5OEMwRUU1REUwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjE4REExNEZDMEUxRTExRTM4NTAyQkI5OEMwRUU1REUwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+EwrlwAAAAA5JREFUeNpiMDU0BAgwAAE2AJgB9BnaAAAAAElFTkSuQmCC
error code: 404 (not found), linked from page(s):
	file:///C:/Users/lehors/Documents/Projects/Go/src/github.com/hyperledger/fabric/docs/build/html/_static/css/theme.css

file:///C:/Users/lehors/Documents/Projects/Go/src/github.com/hyperledger/fabric/docs/build/html/_static/fonts/fontawesome-webfont.woff2
error code: 2 (file not found), linked from page(s):
	file:///C:/Users/lehors/Documents/Projects/Go/src/github.com/hyperledger/fabric/docs/build/html/_static/css/theme.css

file:///C:/Users/lehors/Documents/Projects/Go/src/github.com/hyperledger/fabric/docs/build/html/_static/images/fabric1.png
error code: 2 (file not found), linked from page(s):
	file:///C:/Users/lehors/Documents/Projects/Go/src/github.com/hyperledger/fabric/docs/build/html/_static/css/custom.css
{code}
I'd like to address those so we can close this ticket but I have to admit not to be sure what to do about those.

The fabric1.png is nowhere in the tree. Should its reference just be removed from the custom.css file? Obviously no one would see any different.

As for the problem with fontawesome it comes from the theme.css file which gets generated but I don't know how...

Any help on this would be appreciated.

Thanks.

 ","17/May/17 12:18 PM;ChristopherFerris;for problems with other software (e.g. theme.css) ignore. For the fabric1.png, just delete the reference.","17/May/17 1:29 PM;lehors;All right. Fair enough.

Thanks for the input.

 ",17/May/17 4:57 PM;lehors;It's not like the doc is perfect by any means but I believe the crux of this issue has been addressd. So I'm closing it now.,,,,,,,,,,,,,,,,,,
Committer should call CSCC upong config block arrival,FAB-3199,15786,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,17/Apr/17 9:50 AM,02/Jun/17 2:35 PM,26/Apr/18 6:50 AM,02/Jun/17 2:35 PM,v1.0.0-alpha1,v1.0.0-alpha2,,,,,v1.0.0,,,fabric-peer,,,,6,gossip,peer,,,,,,,"Currently while new configuration block arrives from the ordering service no call for CSCC *UpdateConfig* is made, this need to be fixed and once configuration block reaches the committer it has to call the appropriate CSCC.

Right now code which is responsible of any updates regarding new configuration arrival is:

{code}
 
// createChain creates a new chain object and insert it into the chains
func createChain(cid string, ledger ledger.PeerLedger, cb *common.Block) error {

	envelopeConfig, err := utils.ExtractEnvelope(cb, 0)
	if err != nil {
		return err
	}

	configtxInitializer := configtx.NewInitializer()

	gossipEventer := service.GetGossipService().NewConfigEventer()

	gossipCallbackWrapper := func(cm configtxapi.Manager) {
		gossipEventer.ProcessConfigUpdate(&chainSupport{
			Manager:     cm,
			Application: configtxInitializer.ApplicationConfig(),
		})
	}

	trustedRootsCallbackWrapper := func(cm configtxapi.Manager) {
		updateTrustedRoots(cm)
	}

	configtxManager, err := configtx.NewManagerImpl(
		envelopeConfig,
		configtxInitializer,
		[]func(cm configtxapi.Manager){gossipCallbackWrapper, trustedRootsCallbackWrapper},
	)
	if err != nil {
		return err
	}

	// TODO remove once all references to mspmgmt are gone from peer code
	mspmgmt.XXXSetMSPManager(cid, configtxManager.MSPManager())

	cs := &chainSupport{
		Manager:     configtxManager,
		Application: configtxManager.ApplicationConfig(), // TODO, refactor as this is accessible through Manager
		ledger:      ledger,
	}

	c := committer.NewLedgerCommitter(ledger, txvalidator.NewTxValidator(cs))
	ordererAddresses := configtxManager.ChannelConfig().OrdererAddresses()
	if len(ordererAddresses) == 0 {
		return errors.New(""No orderering service endpoint provided in configuration block"")
	}
	service.GetGossipService().InitializeChannel(cs.ChainID(), c, ordererAddresses)

	chains.Lock()
	defer chains.Unlock()
	chains.list[cid] = &chain{
		cs:        cs,
		cb:        cb,
		committer: c,
	}
	return nil
}
{code}

Where relevant part of callback registration for config block arrival is:

{code}
	configtxManager, err := configtx.NewManagerImpl(
		envelopeConfig,
		configtxInitializer,
		[]func(cm configtxapi.Manager){gossipCallbackWrapper, trustedRootsCallbackWrapper},
	)
{code}

This should be refactored and replaced with call for *CofigUpdate* from CSCC:

{code}
// These are function names from Invoke first parameter
const (
	JoinChain         string = ""JoinChain""
	UpdateConfigBlock string = ""UpdateConfigBlock""
	GetConfigBlock    string = ""GetConfigBlock""
	GetChannels       string = ""GetChannels""
)
{code}

And 

{code}
func updateConfigBlock(blockBytes []byte) pb.Response {
	if blockBytes == nil {
		return shim.Error(""Configuration block must not be nil."")
	}
	block, err := utils.GetBlockFromBlockBytes(blockBytes)
	if err != nil {
		return shim.Error(fmt.Sprintf(""Failed to reconstruct the configuration block, %s"", err))
	}
	chainID, err := utils.GetChainIDFromBlock(block)
	if err != nil {
		return shim.Error(fmt.Sprintf(""Failed to get the chain ID from the configuration block, %s"", err))
	}

	if err := peer.SetCurrConfigBlock(block, chainID); err != nil {
		return shim.Error(err.Error())
	}

	return shim.Success(nil)
}
{code}",,,,,,,,,,,,FAB-3430,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vid:,,Sprint 16 - Gossip,,,,,,binhn,C0rWin,ChristopherFerris,JonathanLevi,jyellick,mastersingh24,,,,,master,,,true,25/May/17 11:09 PM;mastersingh24;I don't think we need to call CSCC.  We should be able to register a callback / handler function on the configtx manager.  We do this for gossip and TLS already ,"26/May/17 7:24 PM;binhn;+1

In review CR [https://gerrit.hyperledger.org/r/#/c/8403]","27/May/17 9:48 PM;C0rWin;{quote}
I don't think we need to call CSCC.  We should be able to register a callback / handler function on the configtx manager.  We do this for gossip and TLS already 
{quote}

I think that I'd agree with this approach especially keeping in mind that configuration manager already takes care of updating msp and gossip with callbacks upon configuration update.

{code}
	gossipEventer := service.GetGossipService().NewConfigEventer()

	gossipCallbackWrapper := func(cm configtxapi.Manager) {
		gossipEventer.ProcessConfigUpdate(&chainSupport{
			Manager:     cm,
			Application: configtxInitializer.ApplicationConfig(),
		})
		service.GetGossipService().SuspectPeers(func(identity api.PeerIdentityType) bool {
			// TODO: this is a place-holder that would somehow make the MSP layer suspect
			// that a given certificate is revoked, or its intermediate CA is revoked.
			// In the meantime, before we have such an ability, we return true in order
			// to suspect ALL identities in order to validate all of them.
			return true
		})
	}

	trustedRootsCallbackWrapper := func(cm configtxapi.Manager) {
		updateTrustedRoots(cm)
	}

	configtxManager, err := configtx.NewManagerImpl(
		envelopeConfig,
		configtxInitializer,
		[]func(cm configtxapi.Manager){gossipCallbackWrapper, trustedRootsCallbackWrapper},
	)
	if err != nil {
		return err
	}

	// TODO remove once all references to mspmgmt are gone from peer code
	mspmgmt.XXXSetMSPManager(cid, configtxManager.MSPManager())
{code}","01/Jun/17 6:51 PM;jyellick;Are we certain we even want to keep these two methods?

{noformat}
	UpdateConfigBlock string = ""UpdateConfigBlock""
	GetConfigBlock    string = ""GetConfigBlock""
{noformat}

The only consumer I found of {{GetConfigBlock}} was {{peer/chaincode/common.go}} the {{GetOrdererEndpointOfChain}} method.  Here, the config block is retrieved, a new manager is constructed, the config block is fed in and parsed, and finally the resulting config is read.  This method probably should simply be retrieving the existing config manager, and querying the config.

The existance of the {{GetConfigBlock}} method seems to encourage users to re-parse configuration which has already been parsed, so seems to invite bad patterns like {{GetOrdererEndpointOfChain}} above.

And as best as I can tell, there are currently no consumers of {{UpdateConfigBlock}}.

My suggestion would be to remove these, rather than update the code to call them.
","01/Jun/17 10:03 PM;ChristopherFerris;This has received the requisite votes to proceed, but [~jyellick] has some reasonable feedback that should be considered (IMO). [~C0rWin] Please work with Jason. Thanks I'll remove from review-needed.","01/Jun/17 10:54 PM;C0rWin;[~jyellick] I'd agree that {{UpdateConfigBlock}} API should be removed from the CSCC API, while I think that {{GetConfigBlock}} could not be changed to simply retrieve configuration manager instead of configuration block, simply because the only change in code is peer cli which creates it again to parse the block. CSCC is a public API which invoked via system chaincode invocation and finding usages in the code it not enough to take a decision of removing/changing {{GetConfigBlock}} API.

Will update my CR accordingly.",01/Jun/17 11:22 PM;C0rWin;CR updated: https://gerrit.hyperledger.org/r/#/c/8403/,02/Jun/17 3:00 AM;binhn;[~C0rWin] [~jyellick]  That is correct. CSCC.GetConfigBlock is an external API for App/SDK to retrieve the current configuration block on a channel. ,"02/Jun/17 11:05 AM;JonathanLevi;As noted in Gerrit, [https://gerrit.hyperledger.org/r/#/c/8403] looks good to merge (at least to me), in case we all agree on the behavior functionality. Are we there?","02/Jun/17 2:25 PM;jyellick;Thanks for the explanation, although I'll maintain we should not be invoking this call internally within the peer, it makes sense to supply {{GetConfigBlock}} as an external API for the App/SDK.

My primary concern was the {{UpdateConfigBlock}} call, which I see has been removed in [~C0rWin]'s CR.  I can support this as is.","02/Jun/17 2:27 PM;JonathanLevi;[~jyellick] Thank you, can you please formally vote? (top right)",,,,,,,,,,,,,
Remove un-necessary WARN log from gossip comm at shutdown,FAB-3198,15785,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,17/Apr/17 9:33 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,18/Apr/17 7:50 AM,,,,,,,v1.0.0,,,,,,,0,gossip,,,,,,,,"The gossip comm layer exposes a subscription-like API and returns a dedicated channel
to the caller.

Since it is convenient to iterate over a channel until it's closed, or to understand that a channel has been closed when nil is returned from select - it was implemented that at the comm layer shutdown - the subscriptions channels are closed.

This might have caused a ""send to closed channel"" error- and so- the implementation has a defer statement with recover() that recovers from that.

It also logs a WARN message un-necessarily because that's not something that shouldn't have happened.

So, unless anyone objects( [~C0rWin] / [~gennadyl] ) I'm removing this WARN logging message.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00vi5:,,,,,,,,C0rWin,yacovm,,,,,,,,,master,,,true,"17/Apr/17 9:54 AM;C0rWin;Sounds right to me, please do it [~yacovm]",,,,,,,,,,,,,,,,,,,,,,,
Adjust anchor peers in docker-compose-no-tls of e2e,FAB-3195,15782,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,17/Apr/17 8:34 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,18/Apr/17 7:12 AM,,,,,,,v1.0.0,,,fabric-examples,,,,0,quality,Usability,,,,,,,"The examples/e2e_cli/docker-compose-no-tls.yaml has peer0 as an anchor peer for all peers.
This is against the design (it needs to be in the same org), and should be synced to what is found in docker-compose.yaml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vhh:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
unused variable in core/endorser/endorser_test.go,FAB-3190,15777,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,17/Apr/17 12:40 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,17/Apr/17 12:20 PM,v1.0.0,,,,,,v1.0.0,,,,,,,0,,,,,,,,,"core/endorser/endorser_test.go:53:5: var mspInstance is unused (U1000)
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vgd:,,,,,,,,ChristopherFerris,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
dead code in core/errors/errors.go,FAB-3189,15776,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,17/Apr/17 12:15 AM,17/Apr/17 12:42 AM,26/Apr/18 6:50 AM,17/Apr/17 12:34 AM,v1.0.0,,,,,,WON'T FIX,,,fabric-peer,,,,0,quality,,,,,,,,"core/errors/errors.go:32:5: var errorLogger is unused (U1000)
core/errors/errors.go:63:6: func newHLError is unused (U1000)",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vg5:,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,17/Apr/17 12:35 AM;ChristopherFerris;believe that this was a temporary situation as the errors package is not fully implemented.,,,,,,,,,,,,,,,,,,,,,,,
dead code in admin.go,FAB-3187,15774,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,16/Apr/17 11:31 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,17/Apr/17 12:20 PM,v1.0.0,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,worker function is unused code. Appears to be original code that had been added but never used. ,,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vfp:,,,,,,,,ChristopherFerris,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
historyDatabase is under 'state' section in core.yaml,FAB-3185,15772,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,chris.elder,denyeart,denyeart,16/Apr/17 12:00 PM,19/Aug/17 3:52 PM,26/Apr/18 6:50 AM,25/Apr/17 6:06 PM,,,,,,,,,,fabric-ledger,,,,0,,,,,,,,,"historyDatabase is under 'state' section in core.yaml.  'history' should be a peer of 'state', with the config option being called something like enableHistoryDatabase.  This will allow for other history config options distinct from state config options.

Somewhat related, we have queryLimit under 'ledger' section.  This should be moved to couchDBConfig section after this one gets merged:
https://gerrit.hyperledger.org/r/#/c/7255/",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-199,0|hzzz76:zzzrkc,,Sprint 16  - Ledger,,,,,,denyeart,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"Peer Timouts - some are configured as 'integers', some as 'durations'",FAB-3184,15771,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,denyeart,denyeart,16/Apr/17 11:48 AM,04/May/17 8:49 PM,26/Apr/18 6:50 AM,04/May/17 8:49 PM,,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"Viper allows for setting properties as 'durations', such as 30s for 30 seconds.
Most peer and orderer properties are set as durations, but a few are set as integers.  Durations are probably better since the unit makes them unambiguous. This inconsistency should be fixed prior to 1.0 release.
Here are a few examples from core.yaml that should should be fixed:

timeout: 10
startuptimeout: 300000
executetimeout: 30000
deploytimeout: 30000",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vf1:,,,,,,,,denyeart,wlahti,,,,,,,,,,,,,"16/Apr/17 11:50 AM;denyeart;[~muralisr] [~wlahti]
Will, do you want to take this one?","17/Apr/17 1:30 PM;wlahti;[~denyeart] Yes, I'll handle this. ",,,,,,,,,,,,,,,,,,,,,,
CI failure in delivery service - goroutines didn't finish,FAB-3182,15769,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,16/Apr/17 9:48 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,18/Apr/17 6:44 PM,,,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,ci_failure,gossip,test,,,,,"I think that the goroutine check needs to be poll-based, it seems that it's too brittle as I saw a CI failure:

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/9618/console

09:43:12 unit-tests_1  | 2017-04-16 09:42:45.470 UTC [deliveryClient] connect -> ERRO 02e Failed obtaining connection: Failed connecting
09:43:12 unit-tests_1  | stream error: code = 1 desc = ""context canceled""
09:43:12 unit-tests_1  | 2017-04-16 09:42:47.473 UTC [deliveryClient] connect -> ERRO 02f Connection to  localhost:5611 established but was unable to create gRPC stream: Failed creating ABC
09:43:12 unit-tests_1  | 2017-04-16 09:42:48.473 UTC [deliveryClient] connect -> ERRO 030 Connection to  localhost:5611 established but was unable to create gRPC stream: Failed creating ABC
09:43:12 unit-tests_1  | --- FAIL: TestProductionUsage (1.00s)
09:43:12 unit-tests_1  | 	assertions.go:219: 
                        
	Error Trace:	deliveryclient_test.go:353
09:43:12 unit-tests_1  | 		
			client_test.go:599
09:43:12 unit-tests_1  | 		
	Error:		Not equal: 4 (expected)
09:43:12 unit-tests_1  | 			        != 3 (actual)
09:43:12 unit-tests_1  | 		
	Messages:	Some goroutine(s) didn't finish: goroutine 78 [running]:
09:43:12 unit-tests_1  | 		github.com/hyperledger/fabric/core/deliverservice.getStackTrace(0x3, 0xc420350000)
09:43:12 unit-tests_1  | 			/opt/gopath/src/github.com/hyperledger/fabric/core/deliverservice/deliveryclient_test.go:359 +0x79
09:43:12 unit-tests_1  | 		github.com/hyperledger/fabric/core/deliverservice.ensureNoGoroutineLeak.func1()
09:43:12 unit-tests_1  | 			/opt/gopath/src/github.com/hyperledger/fabric/core/deliverservice/deliveryclient_test.go:353 +0x86
09:43:12 unit-tests_1  | 		github.com/hyperledger/fabric/core/deliverservice.TestProductionUsage(0xc4202ac540)
09:43:12 unit-tests_1  | 			/opt/gopath/src/github.com/hyperledger/fabric/core/deliverservice/client_test.go:599 +0x49b
09:43:12 unit-tests_1  | 		testing.tRunner(0xc4202ac540, 0xa10b18)
09:43:12 unit-tests_1  | 			/opt/go/src/testing/testing.go:610 +0x81
09:43:12 unit-tests_1  | 		created by testing.(*T).Run
09:43:12 unit-tests_1  | 			/opt/go/src/testing/testing.go:646 +0x2ec
09:43:12 unit-tests_1  | 		
09:43:12 unit-tests_1  | 		goroutine 1 [chan receive]:
09:43:12 unit-tests_1  | 		testing.(*T).Run(0xc4202a1200, 0x9cd8ed, 0x13, 0xa10b18, 0xc420173c01)
09:43:12 unit-tests_1  | 			/opt/go/src/testing/testing.go:647 +0x316
09:43:12 unit-tests_1  | 		testing.RunTests.func1(0xc4202a1200)
09:43:12 unit-tests_1  | 			/opt/go/src/testing/testing.go:793 +0x6d
09:43:12 unit-tests_1  | 		testing.tRunner(0xc4202a1200, 0xc420173d78)
09:43:12 unit-tests_1  | 			/opt/go/src/testing/testing.go:610 +0x81
09:43:12 unit-tests_1  | 		testing.RunTests(0xa11c40, 0xe5ff20, 0x12, 0x12, 0x412e8e)
09:43:12 unit-tests_1  | 			/opt/go/src/testing/testing.go:799 +0x2f5
09:43:12 unit-tests_1  | 		testing.(*M).Run(0xc420173ed8, 0x9e2f76)
09:43:12 unit-tests_1  | 			/opt/go/src/testing/testing.go:743 +0x85
09:43:12 unit-tests_1  | 		main.main()
09:43:12 unit-tests_1  | 			github.com/hyperledger/fabric/core/deliverservice/_test/_testmain.go:138 +0x1bd
09:43:12 unit-tests_1  | 		
09:43:12 unit-tests_1  | 		goroutine 17 [syscall, locked to thread]:
09:43:12 unit-tests_1  | 		runtime.goexit()
09:43:12 unit-tests_1  | 			/opt/go/src/runtime/asm_amd64.s:2086 +0x1
09:43:12 unit-tests_1  | 		
09:43:12 unit-tests_1  | 		
09:43:12 unit-tests_1  | 2017-04-16 09:42:50.477 UTC [deliveryClient] StartDeliverForChannel -> ERRO 031 Delivery service - block provider already exists for TEST_CHAINID found, can't start delivery
09:43:12 unit-tests_1  | 2017-04-16 09:42:50.478 UTC [deliveryClient] StopDeliverForChannel -> ERRO 032 Delivery service - no block provider for TEST_CHAINID2 found, can't stop delivery
09:43:12 unit-tests_1  | 2017-04-16 09:42:50.998 UTC [deliveryClient] StartDeliverForChannel -> ERRO 033 Delivery service is stopping cannot join a new channel TEST_CHAINID
09:43:12 unit-tests_1  | 2017-04-16 09:42:50.998 UTC [deliveryClient] StopDeliverForChannel -> ERRO 034 Delivery service is stopping, cannot stop delivery for channel TEST_CHAINID
09:43:12 unit-tests_1  | 2017-04-16 09:42:56.314 UTC [blocksProvider] DeliverBlocks -> WARN 035 Receive error: Client is closing
09:43:12 unit-tests_1  | 2017-04-16 09:43:06.320 UTC [ConnProducer] NewConnection -> ERRO 036 Failed connecting to localhost:5612 , error: grpc: timed out when dialing
09:43:12 unit-tests_1  | 2017-04-16 09:43:06.322 UTC [blocksProvider] DeliverBlocks -> WARN 037 Receive error: Client is closing
09:43:12 unit-tests_1  | 2017-04-16 09:43:08.325 UTC [blocksProvider] DeliverBlocks -> WARN 038 Receive error: Client is closing
09:43:12 unit-tests_1  | FAIL",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00vel:,,Sprint 16 - Gossip,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Can't create 3rd participant in Asset Registry.,FAB-3181,15768,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,mohamoud.egal,mohamoud.egal,16/Apr/17 2:36 AM,26/May/17 6:23 AM,26/Apr/18 6:50 AM,26/May/17 6:23 AM,v1.0.0-alpha1,,,,,,WON'T FIX,,,,,,,0,,,,,,,,,"I'm trying to create 3 Member assets, but every time I try to create the 3rd member (using either generated or specific data) it won't let me. What happens is that the Create Participant button is white.

I tried using localstorage.clear() and refreshing my browser twice, but still no change.",,,,,,,,,,,,,,,,,,,,16/Apr/17 2:33 AM;mohamoud.egal;Screen Shot 2017-04-15 at 10.32.43 PM.png;https://jira.hyperledger.org/secure/attachment/10668/Screen+Shot+2017-04-15+at+10.32.43+PM.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ved:,,,,,,,,ChristopherFerris,mohamoud.egal,,,,,,,,,,,,,"08/May/17 10:53 AM;ChristopherFerris;This appears to be related to Composer, which manages their issues on GitHub. Please open a defect there.",,,,,,,,,,,,,,,,,,,,,,,
staticcheck found errors in peer,FAB-3180,15767,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,ChristopherFerris,ChristopherFerris,16/Apr/17 12:45 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,17/Apr/17 6:00 PM,v1.0.0,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"ran https://github.com/dominikh/go-tools/tree/master/cmd/staticcheck

peer/chaincode/install.go:46:26: printf-style function with dynamic first argument and no further arguments should use print-style function instead (SA1006)
peer/chaincode/install.go:47:26: printf-style function with dynamic first argument and no further arguments should use print-style function instead (SA1006)
peer/chaincode/instantiate.go:39:26: printf-style function with dynamic first argument and no further arguments should use print-style function instead (SA1006)
peer/chaincode/instantiate.go:40:26: printf-style function with dynamic first argument and no further arguments should use print-style function instead (SA1006)
peer/channel/join.go:71:2: this value of spec is never used (SA4006)
",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ve5:,,,,,,,,ChristopherFerris,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
staticcheck found errors in orderer package,FAB-3179,15766,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,ChristopherFerris,ChristopherFerris,16/Apr/17 12:43 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,22/Apr/17 7:26 PM,v1.0.0-alpha1,,,,,,v1.0.0-alpha2,,,fabric-orderer,,,,0,sbft,,,,,,,,"ran https://github.com/dominikh/go-tools/tree/master/cmd/staticcheck

orderer/sbft/backend/backend.go:471:11: this value of err is never used (SA4006)
orderer/sbft/connection/connection.go:59:10: this value of err is never used (SA4006)
orderer/sbft/simplebft/newview_test.go:121:2: this value of xset is never used (SA4006)
orderer/sbft/simplebft/newview_test.go:167:2: this value of xset is never used (SA4006)",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00s80:r,,,,,,,,ChristopherFerris,kchristidis,,,,,,,,,master,,,true,21/Apr/17 5:57 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/8339/,,,,,,,,,,,,,,,,,,,,,,,
staticcheck found errors in gossip package,FAB-3178,15765,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,gennadyl,ChristopherFerris,ChristopherFerris,16/Apr/17 12:40 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,26/Apr/17 11:26 AM,v1.0.0,,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,gossip,,,,,,,"ran https://github.com/dominikh/go-tools/tree/master/cmd/staticcheck

gossip/comm/comm_impl.go:111:4: should call commInst.stopWG.Add(1) before starting the goroutine to avoid a race (SA2000)
gossip/comm/comm_impl.go:361:5: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/comm/comm_test.go:112:2: this value of err is never used (SA4006)
gossip/comm/comm_test.go:115:8: this value of err is never used (SA4006)
gossip/comm/comm_test.go:392:4: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/comm/comm_test.go:395:4: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/comm/comm_test.go:624:4: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/comm/comm_test.go:627:4: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/comm/conn.go:312:4: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/comm/crypto.go:52:6: this value of err is never used (SA4006)
gossip/discovery/discovery_impl.go:281:4: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/discovery/discovery_impl.go:307:4: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/discovery/discovery_impl.go:504:2: this value of lastAliveTS is never used (SA4006)
gossip/gossip/algo/pull_test.go:94:5: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/gossip/gossip_impl.go:231:4: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/gossip/gossip_impl.go:279:4: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/gossip/gossip_impl.go:687:5: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/state/state.go:309:5: unsigned values are never < 0 (SA4003)",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00vdp:,,Sprint 16 - Gossip,,,,,,ChristopherFerris,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
staticcheck errors in common package,FAB-3177,15764,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,ChristopherFerris,ChristopherFerris,16/Apr/17 12:34 AM,29/Apr/17 1:33 AM,26/Apr/18 6:50 AM,29/Apr/17 1:33 AM,v1.0.0,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"ran https://github.com/dominikh/go-tools/tree/master/cmd/staticcheck

common/configtx/test/helper_test.go:48:14: this value of err is never used (SA4006)
common/configtx/tool/configtxgen/main.go:72:8: this value of err is never used (SA4006)
common/configtx/tool/configtxgen/main.go:131:8: this value of err is never used (SA4006)
common/configtx/update_test.go:152:2: this value of policy is never used (SA4006)
common/ledger/blkstorage/fsblkstorage/blockfile_mgr_test.go:108:2: should check returned error before deferring itr.Close() (SA5001)
common/ledger/blkstorage/fsblkstorage/blockfile_scan_test.go:70:2: should check returned error before deferring file.Close() (SA5001)
common/ledger/blkstorage/fsblkstorage/blocks_itr_test.go:38:2: should check returned error before deferring itr.Close() (SA5001)
common/policies/policy.go:230:2: this value of pendingConfig is never used (SA4006)
common/tools/cryptogen/ca/generator.go:51:16: this value of err is never used (SA4006)
common/tools/cryptogen/msp/msp_test.go:74:10: this value of err is never used (SA4006)",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vdh:,,,,,,,,ChristopherFerris,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
staticcheck errors in bccsp package,FAB-3176,15763,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,adc,ChristopherFerris,ChristopherFerris,16/Apr/17 12:31 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,26/Apr/17 1:56 PM,v1.0.0,,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,,"ran https://github.com/dominikh/go-tools/tree/master/cmd/staticcheck against bccsp package

bccsp/pkcs11/aes_test.go:291:2: empty branch (SA9003)
bccsp/pkcs11/fileks.go:200:8: this value of err is never used (SA4006)
bccsp/pkcs11/impl_test.go:1105:2: this value of R is never used (SA4006)
bccsp/pkcs11/pkcs11.go:589:13: this value of err is never used (SA4006)
bccsp/pkcs11/pkcs11_test.go:102:9: this value of err is never used (SA4006)
bccsp/pkcs11/pkcs11_test.go:168:9: this value of err is never used (SA4006)
bccsp/pkcs11/pkcs11_test.go:194:8: this value of err is never used (SA4006)
bccsp/sw/aes_test.go:291:2: empty branch (SA9003)
bccsp/sw/fileks.go:232:8: this value of err is never used (SA4006)
bccsp/sw/impl_test.go:1098:2: this value of R is never used (SA4006)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzbt:l0hi,,,,,,,,angelo.decaro,ChristopherFerris,elli-androulaki,,,,,,,,master,,,true,19/Apr/17 9:18 AM;elli-androulaki;[~vpaprots] and [~adecaro] can you guys take a look at this?,23/Apr/17 3:59 PM;angelo.decaro;Addressed sw package in https://gerrit.hyperledger.org/r/#/c/8443/. Thanks :),,,,,,,,,,,,,,,,,,,,,,
Delivery client test fails sometimes in CI ,FAB-3175,15762,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,15/Apr/17 9:00 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,18/Apr/17 7:13 AM,v1.0.0,,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,ci_failure,gossip,test,,,,,"This is the 2nd time this weekend I saw it fail. 

TestNewDeliverService  is the one that was there before I did the revamp, so maybe we need to adjust some stuff there.

IMO we should take a look at this.
[~C0rWin] [~gennadyl]

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/9607/console

20:49:39 unit-tests_1  | 2017-04-15 20:49:07.441 UTC [deliveryClient] connect -> ERRO 02e Failed obtaining connection: Failed connecting
20:49:39 unit-tests_1  | stream error: code = 1 desc = ""context canceled""
20:49:39 unit-tests_1  | 2017-04-15 20:49:09.453 UTC [deliveryClient] connect -> ERRO 02f Connection to  localhost:5611 established but was unable to create gRPC stream: Failed creating ABC
20:49:39 unit-tests_1  | 2017-04-15 20:49:10.453 UTC [deliveryClient] connect -> ERRO 030 Connection to  localhost:5611 established but was unable to create gRPC stream: Failed creating ABC
20:49:39 unit-tests_1  | 2017-04-15 20:49:12.456 UTC [deliveryClient] StartDeliverForChannel -> ERRO 031 Delivery service - block provider already exists for TEST_CHAINID found, can't start delivery
20:49:39 unit-tests_1  | 2017-04-15 20:49:12.456 UTC [deliveryClient] StopDeliverForChannel -> ERRO 032 Delivery service - no block provider for TEST_CHAINID2 found, can't stop delivery
20:49:39 unit-tests_1  | 2017-04-15 20:49:12.471 UTC [blocksProvider] DeliverBlocks -> WARN 033 Receive error: Client is closing
20:49:39 unit-tests_1  | 2017-04-15 20:49:17.982 UTC [deliveryClient] StartDeliverForChannel -> ERRO 034 Delivery service is stopping cannot join a new channel TEST_CHAINID
20:49:39 unit-tests_1  | 2017-04-15 20:49:17.982 UTC [deliveryClient] StopDeliverForChannel -> ERRO 035 Delivery service is stopping, cannot stop delivery for channel TEST_CHAINID
20:49:39 unit-tests_1  | --- FAIL: TestNewDeliverService (6.53s)
20:49:39 unit-tests_1  | 	assertions.go:225: 
                        
	Error Trace:	deliveryclient_test.go:345
20:49:39 unit-tests_1  | 		
			deliveryclient_test.go:120
20:49:39 unit-tests_1  | 		
	Error:		Didn't gossip a new block within a timely manner
20:49:39 unit-tests_1  | 		
20:49:39 unit-tests_1  | 2017-04-15 20:49:23.369 UTC [blocksProvider] DeliverBlocks -> WARN 036 Receive error: Client is closing
20:49:39 unit-tests_1  | 2017-04-15 20:49:33.419 UTC [ConnProducer] NewConnection -> ERRO 037 Failed connecting to localhost:5612 , error: grpc: timed out when dialing
20:49:39 unit-tests_1  | 2017-04-15 20:49:33.421 UTC [blocksProvider] DeliverBlocks -> WARN 038 Receive error: Client is closing
20:49:39 unit-tests_1  | 2017-04-15 20:49:35.424 UTC [blocksProvider] DeliverBlocks -> WARN 039 Receive error: Client is closing
20:49:39 unit-tests_1  | FAIL
20:49:39 unit-tests_1  | coverage: 93.5% of statements
20:49:39 unit-tests_1  | FAIL	github.com/hyperledger/fabric/core/deliverservice	35.100s
20:49:39 unit-tests_1  | error: exit status 1
20:49:39 unit-tests_1  | panic: EOF
20:49:39 unit-tests_1  | 
20:49:39 unit-tests_1  | goroutine 1 [running]:
20:49:39 unit-tests_1  | panic(0x4daca0, 0xc42000a0f0)
20:49:39 unit-tests_1  | 	/opt/go/src/runtime/panic.go:500 +0x1a1
20:49:39 unit-tests_1  | main.main()
20:49:39 unit-tests_1  | 	/opt/gotools/obj/gopath/src/github.com/AlekSi/gocov-xml/gocov-xml.go:60 +0x15fd
20:49:40 unittest_unit-tests_1 exited with code 2
20:49:40 Stopping couchdb ... 
20:49:40 Stopping unittest_vp_1 ... 
20:49:42 
Stopping unittest_vp_1 ... done

Stopping couchdb ... done",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00vd1:,,Sprint 16 - Gossip,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Fix compile error in tls.go,FAB-3174,15761,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,smithbk,smithbk,15/Apr/17 6:03 PM,12/May/17 4:55 PM,26/Apr/18 6:50 AM,16/Apr/17 2:04 PM,,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"There is compile error in tls.go as follows:

# github.com/hyperledger/fabric-ca/lib/tls
lib/tls/tls.go:62: cfg.CertFilesList undefined (type *ClientTLSConfig has no field or method CertFilesList)

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vct:,,,,,,,,mastersingh24,smithbk,,,,,,,,,master,,,true,15/Apr/17 6:05 PM;smithbk;See http://gerrit.hyperledger.org/r/8073,16/Apr/17 2:04 PM;mastersingh24;make sure you assign things you are working on to yourself,,,,,,,,,,,,,,,,,,,,,,
"Remove ""support"" for chaincode paths with http(s) URLs",FAB-3172,15759,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,mastersingh24,mastersingh24,15/Apr/17 10:11 AM,03/Jun/17 5:28 PM,26/Apr/18 6:50 AM,03/Jun/17 5:28 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,Should we continue to allow people to enter chaincode paths which use http(s)?  I don't think we need / want this functionality given the updated packaging and install,,,,,,,,,,,,FAB-4245,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vcd:,,,,,,,,aambati,baohua,greg.haskins,mastersingh24,muralisr,,,,,,master,,,true,"15/Apr/17 10:12 AM;mastersingh24;[~greg.haskins]  [~muralisr] What do you think?

Feel free to close and set fix version to WON'T FIX if we still want this functionality","15/Apr/17 2:37 PM;muralisr;[~mastersingh24]  Any http access (if needed) can be left to the SDKs especially now that we have a GO SDK too. CLI can be left for minimal local access I think.

[~greg.haskins] what do you think ?","31/May/17 5:19 PM;muralisr;This has been identified by security scan as a potential attack vector.

[~mastersingh24] [~greg.haskins] what do you say to a few lines disabling this feature while leaving the code in ?",31/May/17 5:47 PM;greg.haskins;I think we can drop it.,02/Jun/17 1:39 PM;aambati;https://gerrit.hyperledger.org/r/#/c/10075/,03/Jun/17 4:12 AM;baohua;I guess we can totally migrate this part to SDK's feature.,,,,,,,,,,,,,,,,,,
Cannot invoke another chaincode from java chaincode,FAB-3170,15757,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,sanchezl,sanchezl,14/Apr/17 11:31 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,27/Apr/17 1:54 PM,,,,,,,v1.0.0,,,fabric-endorser,,,,0,chaincode,,,,,,,,The invokeChaincode API support on the Java shim does not match the behavior found on the golang shim.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00vbx:,,Sprint 16  - Endorser,,,,,,sanchezl,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
configtx.yaml in peer was not override  by CORE_PEER_COMMITTER_LEDGER_ORDERER ,FAB-3158,15745,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,oleksandr.borysenko,oleksandr.borysenko,14/Apr/17 2:49 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,21/Apr/17 2:57 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-peer,,,,0,orderer,peer,,,,,,,"During joining to channel I have got error:
{code}
#CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:7050 CORE_PEER_ADDRESS=peer0:7051 peer channel join -b myc.block -o orderer:5005

peer0      | 2017-04-14 12:46:43.089 UTC [ledgermgmt] CreateLedger -> INFO 02a Creating ledger with id = myc
peer0      | 2017-04-14 12:46:43.156 UTC [ledgermgmt] CreateLedger -> INFO 02b Created ledger with id = myc
peer0      | 2017-04-14 12:46:43.161 UTC [kvledger] Commit -> INFO 02c Channel [myc]: Created block [0] with 1 transaction(s)
peer0      | 2017-04-14 12:46:43.174 UTC [gossip/state] NewGossipStateProvider -> INFO 02d Updating node metadata information, current ledger sequence is at = 0, next expected block is = 1
peer0      | 2017-04-14 12:46:43.179 UTC [deliveryClient] NewDeliverService -> INFO 02e Creating delivery service to get blocks from the ordering service, 127.0.0.1:7050
peer0      | 2017-04-14 12:46:46.180 UTC [deliveryClient] NewDeliverService -> ERRO 02f Cannot dial to 127.0.0.1:7050, because of grpc: timed out when dialing
peer0      | 2017-04-14 12:46:46.180 UTC [gossip/service] InitializeChannel -> WARN 030 Cannot create delivery client, due to Wasn't able to connect to any of ordering service endpoints [127.0.0.1:7050]
peer0      | 2017-04-14 12:46:46.180 UTC [gossip/service] InitializeChannel -> WARN 031 Delivery client is down won't be able to pull blocks for chain myc
peer0      | 2017-04-14 12:46:46.180 UTC [chaincode] Init -> INFO 032 Init CSCC
peer0      | 2017-04-14 12:46:46.180 UTC [sysccapi] deploySysCC -> INFO 033 system chaincode cscc/myc(github.com/hyperledger/fabric/core/scc/cscc) deployed
peer0      | 2017-04-14 12:46:46.180 UTC [sysccapi] deploySysCC -> INFO 034 system chaincode lccc/myc(github.com/hyperledger/fabric/core/scc/lccc) deployed
peer0      | 2017-04-14 12:46:46.181 UTC [escc] Init -> INFO 035 Successfully initialized ESCC
peer0      | 2017-04-14 12:46:46.181 UTC [sysccapi] deploySysCC -> INFO 036 system chaincode escc/myc(github.com/hyperledger/fabric/core/scc/escc) deployed
peer0      | 2017-04-14 12:46:46.181 UTC [sysccapi] deploySysCC -> INFO 037 system chaincode vscc/myc(github.com/hyperledger/fabric/core/scc/vscc) deployed
peer0      | 2017-04-14 12:46:46.181 UTC [qscc] Init -> INFO 038 Init QSCC
peer0      | 2017-04-14 12:46:46.181 UTC [sysccapi] deploySysCC -> INFO 039 system chaincode qscc/myc(github.com/hyperledger/fabric/core/chaincode/qscc) deployed

{code}

2 peers were started with parameter:
      - CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005

But in configtx.yaml it was not updated

{code}
Orderer: &OrdererDefaults

    # Orderer Type: The orderer implementation to start.
    # Available types are ""solo"" and ""kafka"".
    OrdererType: solo

    Addresses:
        - 127.0.0.1:7050
{code}

File configtx.yaml, docker manifest and logs are attached.","root@26a50eba32a7:/etc/hyperledger/fabric# peer -v
Fabric peer server version 1.0.0-alpha",;15/Apr/17 10:58 AM;mastersingh24;180,;15/Apr/17 10:58 AM;mastersingh24;180,360,0,360,100%,360,0,360,,,,,,,,,,14/Apr/17 2:47 PM;oleksandr.borysenko;Log.txt;https://jira.hyperledger.org/secure/attachment/10663/Log.txt,14/Apr/17 2:47 PM;oleksandr.borysenko;configtx.yaml;https://jira.hyperledger.org/secure/attachment/10662/configtx.yaml,14/Apr/17 2:47 PM;oleksandr.borysenko;docker-2peer.yml;https://jira.hyperledger.org/secure/attachment/10664/docker-2peer.yml,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00v99:,,,,,,,,mastersingh24,oleksandr.borysenko,scottz,,,,,,,,master,,,true,15/Apr/17 10:51 AM;mastersingh24;[~oleksandr.borysenko] - per https://gerrit.hyperledger.org/r/#/c/6757/  the CORE_PEER_COMMITTER_LEDGER_ORDERER is no longer used.  I'll go ahead and remove the env variable from the compose files in the e2e as well to avoid confusion.,15/Apr/17 10:58 AM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/8063/,15/Apr/17 1:18 PM;mastersingh24;[~jeffgarratt] [~scottz]  Can you guys look at the use of this variable in the BDD and OTE tests as well?,"15/Apr/17 5:08 PM;scottz;We will remove this variable from OTE code with our next planned update, hopefully early this week.","18/Apr/17 1:44 PM;oleksandr.borysenko;I didn't found how can I add parameter for orderer service. Only one solution what is works it's mounting manually modified file configtx.yaml

{code}
  cli:
    container_name: cli
    image: hyperledger/fabric-peer:x86_64-1.0.0-alpha
    tty: true
    environment:
      - GOPATH=/opt/gopath
      - CORE_PEER_ADDRESSAUTODETECT=true
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      - CORE_NEXT=true
      - CORE_PEER_ID=cli
      - CORE_PEER_ENDORSER_ENABLED=true
      - CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005
      - CORE_PEER_ADDRESS=peer0:7051
      - CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/fabric/msp/sampleconfig
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    command: /bin/sh
    links:
      - orderer:orderer
      - peer0:peer0
    volumes:
        - /var/run/:/host/var/run/
        - /home/osboxes/work/hyperledger/vol/configtx.yaml:/etc/hyperledger/fabric/configtx.yaml
        #in the ""- <HOST>:/opt/gopath/src/github.com/hyperledger/fabric/examples/"" mapping below, the HOST part
        #should be modified to the path on the host. This will work as is in the Vagrant environment
        - /home/osboxes/work/hyperledger/fabric/examples/:/opt/gopath/src/github.com/hyperledger/fabric/examples/
    depends_on:
      - orderer
      - peer0
      - peer1
    networks:
      - bridge
{code}

How it can be done using parameters?","21/Apr/17 3:00 PM;mastersingh24;[~oleksandr.borysenko] - When you invoke a JoinChannel on the peer, it will actually parse the configuration block which is submitted as part of the JoinChannel and then it will parse it to obtain the addresses of the ordering service nodes.  So if you need to change the orderer addresses, then you need to modify the configtx.yaml and add the correct endpoints for orderers as you indicate above",,,,,,,,,,,,,,,,,,
Peer can't find orderer when running in prod mode on Vagrant VM,FAB-3152,15739,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,pschnap,pschnap,13/Apr/17 8:21 PM,31/May/17 6:11 PM,26/Apr/18 6:50 AM,31/May/17 5:26 PM,v1.0.0,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"h1. Issue
I've seen this issue in versions from the v1.0.0-alpha to the latest master code: launching the peer in production mode in the Vagrant VM, it can't find the orderer. I get errors like this:

bq. 2017-04-13 19:04:31.566 UTC [ConnProducer] NewConnection -> ERRO 038 Failed connecting to orderer:7050 , error: grpc: timed out when dialing
bq. 2017-04-13 19:04:31.566 UTC [deliveryClient] connect -> ERRO 039 Failed obtaining connection: Could not connect to any of the endpoints: [orderer:7050]

It seems that it's using the host name ""orderer"" which isn't set up in the VM; once I add it to the VM's /etc/hosts pointing to 127.0.0.1 the error goes away.

(solution found on this StackOverflow post: [http://stackoverflow.com/a/42971813|http://stackoverflow.com/a/42971813])

This affects the peer's deployment of chaincode.

h1. Reproduction
* Download the latest code
* Start the VM, and inside:
* Compile the peer with `make` -- the behave target always fails for me
* Run the orderer in one terminal
* Run  `peer node start` in another terminal

Observe the error(s) in the peer's output.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00v8d:,,,,,,,,muralisr,pdespot,pschnap,,,,,,,,,,,,25/May/17 9:19 PM;muralisr;[~pschnap] I have seen this (and a few variations of this) early on but should be fixed in latest master. Moving this to Done. Please reopen if the problem persists.,"26/May/17 1:27 AM;pdespot;May I ask what the solution was? I'm not clear on the comment in the post about the ""hostname 'ordered'"".

 

Thanks in advance.","26/May/17 1:46 AM;muralisr;[~pdespot] Absolutely. The orderer's hostname is needed by the peer to submit transactions, receive blocks etc. This orderer name is provided to at configuration time.

I'm not sure exactly what [~pschnap] was running into but here is my experience with previous levels of code
* the orderer host was only in configtx.yaml and could not be provided to CLI in the peer commands
* once - by mistake - restarted the peer after storing a unresolvable orderer host name in the peer config and didn't realize that was being used even when I had changed the orderer name elsewhere (I should have cleared the database and started over).
* in some cases the docker wasn't able to resolve orderer instances. The solution was to add a ""dns_search: ."" entry in docker-compose.yaml

With the latest, we have the ""-o <orderer>"" option in all CLI commands that talk to orderer. 

Given the above, there's a good chance that the original problem is gone. ","26/May/17 2:50 PM;pschnap;[~muralisr] it does not appear to have been fixed :/

I did some more testing and it appears to error not only in production mode but also in development mode.

Here's a better explanation of how I produced the error:
 * Download the latest master (the commit I just used is 9683d72e0033d5f3224b4bee7e1fc3f67a81eda0)
 * `cd` into devenv and run `vagrant up` (after destroying the previous machine, if it existed)
 * `vagrant ssh` into the VM
 * Run `make` (which will fail on linting)
 * Run `orderer`
 * Open another terminal
 * `cd devenv` (if needed)
 * `vagrant ssh`
 * `peer node start -o localhost:7050` (or use ""orderer:7050"" or ""0.0.0.0:7050"" or ""127.0.0.1:7050"", it doesn't matter)
 * Observe the ""Failed connecting to orderer:7050..."" error in the output after a few seconds – this will always say ""orderer:7050"" regardless of what you provided for the `-o` argument

*It seems the `-o` flag is not being _used_ when it tries to connect to the orderer,* at least not when using the default chain. I can give it bad input for `-o` and it errors on parsing it (in peer/node/start.go) but it doesn't seem to be using it by the time it gets around to throwing the error (in core/comm/producer.go).

If you add ""127.0.0.1   orderer"" to the /etc/hosts file of the VM then the error won't appear, but it seems there's bad logic in using the `-o` flag in the peer. Or maybe my setup is just wonky, but it's been pretty consistent for me.

 ","26/May/17 3:54 PM;muralisr;[~pschnap] can you try removing /var/hyperledger/* please ?

* ...
* ...
* Run `make` (which will fail on linting)
* rm -rf /var/hyperledger/*
* Run `orderer`
* ...
* ","26/May/17 7:04 PM;pschnap;[~muralisr] Doing what you suggest on a fresh install doesn't seem to work, but sometimes when doing it after attempting to run a couple of times it does work. I don't know what the deal is and haven't been able to figure out under which circumstances it is successful.","26/May/17 7:34 PM;pschnap;[~muralisr] ok, I think I figured it out. If I specify the `-o` flag the first time I run it after a build – i.e. with a fresh /var/hyperledger – then it runs fine _regardless of whether I specify the flag in subsequent runs (or even provide the correct value)_. If I run it and _don't_ specify the `-o` flag the first time, then it _doesn't_ work in subsequent runs, regardless of whether I specify the `-o` flag in the other runs.

So, the peer seems to be ignoring the `-o` flag after the first run and the default of ""orderer:7050"" that's used when no flag is specified is broken on the first run w.r.t. the vagrant environment since it's not in the hosts file.","26/May/17 8:05 PM;muralisr;[~pschnap] Right. That was the reasoning behind the cryptic remark in earlier comment

{code:java}
once - by mistake - restarted the peer after storing a unresolvable orderer host name in the peer config and didn't realize that was being used even when I had changed the orderer name elsewhere (I should have cleared the database and started over).
{code}

If you restart the peer with previous config, it'll use that config after restart. The config holds the orderer address too. If you had started without the ""-o"" the first time, by default it stores ""orderer"" and will continue to use that.","26/May/17 8:18 PM;pschnap;[~muralisr] Ah, that was not clear to me from that comment.

This still seems broken to me, shouldn't the command-line argument override (and possibly overwrite) what was saved in the configuration? It also seems to me that the default value (no `-o`) should work in the development/testing vagrant environment.","31/May/17 5:11 PM;muralisr;[~pschnap] Long story short, with latest master the peer accepts the ""-o""  option but does not use it.

Details:

It was needed in older commit levels when the default ""testchainid"" was still around for use. In that mode peer created the configuration internally and needed the orderer ip supplied via ""-o"". ""testchainid"" has been removed in the latest master and so the only way a peer can join a channel is by supplying it with a block (containing orderer IP besides other information). The ""-o"" option is not used any longer but left behind so it won't break other tools that depend upon it. It will removed soon.","31/May/17 5:25 PM;pschnap;[~muralisr] Ok, I guess I'll put it back to resolved since it's till a WIP. Thanks for your feedback","31/May/17 6:11 PM;muralisr;[~pschnap] Just to be clear, the WIP part is just the removal of the unused ""-o"" option.

Your original issue was real where that orderer ip address was saved on to the block configuration when ""testchainid"" was in use (and if you didn't supply the right one the first time the default ""orderer"" would be  stored). 

Now since we are no longer using ""testchainid"" the peer no longer has a path that saves provided orderer IP... all that remains is removing the unused ""-o"" option.

This CR https://gerrit.hyperledger.org/r/#/c/6821/ provides the background for the original ""-o"" option where you saw the problem. Comparing that with master might provide more background.",,,,,,,,,,,,
facing issues while enrolling the user by using fabric cop configuration,FAB-3135,15722,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,arun17,arun17,13/Apr/17 7:32 AM,01/May/17 2:49 PM,26/Apr/18 6:50 AM,01/May/17 2:49 PM,v1.0.0,,,,,,v1.0.0,,,fabric-ca,,,,0,MembershipServices,v1.0,,,,,,,i am trying to configure cop server file after initializing and starting the server while enrolling the user i m facing issues...u can view the issue in the attatchment...,,,,,,,,,,,,FAB-1622,,,,,,,,13/Apr/17 7:28 AM;arun17;Screenshot (6).png;https://jira.hyperledger.org/secure/attachment/10659/Screenshot+%286%29.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00v4t:,,,,,,,,arun17,mastersingh24,skarim,smithbk,,,,,,,,,,,15/Apr/17 12:00 PM;mastersingh24;[~skarim] Please have a look at this,"18/Apr/17 2:40 PM;skarim;[~arun17] You are using an outdated version (fabric-cop), please get the latest version (fabric-ca). See links below.

https://github.com/hyperledger/fabric-ca
http://hyperledger-fabric.readthedocs.io/en/latest/Setup/ca-setup.html","01/May/17 2:49 PM;smithbk;Given that this was using a COP configuration file and that is no longer used, closing this.  Pls reopen if this is still a problem with the latest fabric-ca",,,,,,,,,,,,,,,,,,,,,
Ensure chaincode upgrade can only move chaincode to a newer version,FAB-3124,15711,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mne,elli-androulaki,elli-androulaki,12/Apr/17 6:01 PM,27/Apr/17 8:33 AM,26/Apr/18 6:50 AM,26/Apr/17 5:43 PM,,,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,,"Chaincode upgrade currently allows an earlier version of the chaincode to be installed.
The issue was reported by [~mne].",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzbt:l0f,,,,,,,,elli-androulaki,mne,muralisr,,,,,,,,,,,,"25/Apr/17 3:49 PM;mne;[~ellaki] and [~muralisr] - could you clarify whether this is this a feature or a bug? In my opinion ""upgrade"" means moving to a new version.","26/Apr/17 3:20 PM;mne;If this is indeed intended behavior / a feature, I'd recommend to change the name of the command from ""upgrade"" to something that does not imply moving to a newer version. For example, ""reinstantiate"".","26/Apr/17 3:23 PM;elli-androulaki;Ok, [~binhn] confirmed that we leave it to the app to decide which version to move a chaincode's instance in a chain to.
[~mne] interesting proposal for changing the name, since we are not enforcing any ""upgrade"" to actually take place. 
[~binhn], [~muralisr] what do you think?","27/Apr/17 8:33 AM;muralisr;[~ellaki]  version being arbitrary string with no metric properties agree with [~binhn] to leave it to user to upgrade. Indeed they may find they want to backout a change and go back to a previous version. 

""reinstantiate"" feels like ""reset"" with the same chaincode but could work... others are ""changeversion"" ? ""applyversion"" ?

Or we leave it as ""upgrade"" .... ",,,,,,,,,,,,,,,,,,,,
fabric-ca-server should require user:pass@ in URL scheme for -u option,FAB-3121,15708,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,rennman,rennman,12/Apr/17 4:47 PM,26/May/17 1:52 AM,26/Apr/18 6:50 AM,26/May/17 1:52 AM,v1.0.0,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"I think this is really two issues, depending on whether or not I mis-understand how it's supposed to be configured.

At any rate the certificate that is created on behalf of a delegate/subordinate registration authority is created with the Basic Constrains extension flagged 'critical' and set to CA:FALSE. It should be CA:TRUE.

Secondly, I could not figure out how to populate the data for the CSR (the potential 2nd issue). It seems that it comes from an instantiation of the ServerConfig.Client.ClientConfig object, but I don't know where this data is coming from. In order to create the certificate, I coded the CSR data manually in getCACertAndKey(). The documentation should make this explicit.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00v2l:,,,,,,,,rennman,smithbk,,,,,,,,,master,,,true,"13/Apr/17 6:12 PM;rennman;Changing the focus of this defect. Ultimately, I think still requires both a code change and a doc change. The bottom-line is that I should have specified user:pass as part of the URL scheme.

1 - 
The instructions for starting a registration authority (child CA) in the ""Fabric CA User’s Guide"" should also specify that the 'user' and 'passwd' are part of the URL for the -u option. Here is the current text:

""The fabric-ca-server init command generates a self-signed CA certificate unless the -u <parent-fabric-ca-server-URL> option is specified. If the -u is specified, the server’s CA certificate is signed by the parent fabric-ca-server. The fabric-ca-server init command also generates a default configuration file named fabric-ca-server-config.yaml in the server’s home directory.""


2 -
This URL scheme should be enforced. Currently the command proceeds w/o it, but is doomed to fail with an 'Authentication error'",16/May/17 11:57 PM;smithbk;http://gerrit.hyperledger.org/r/9429,,,,,,,,,,,,,,,,,,,,,,
Image fabric-ccenv was not automatically pulled for chaincode instantiate,FAB-3118,15705,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,greg.haskins,oleksandr.borysenko,oleksandr.borysenko,12/Apr/17 2:38 PM,23/May/17 4:57 PM,26/Apr/18 6:50 AM,23/May/17 4:57 PM,v1.0.0-alpha1,v1.0.0-alpha2,,,,,v1.0.0,,,fabric-peer,,,,1,ccenv,v1.0,,,,,,,"I tried to reproduce actions from lesson from Hyperledger chaтnel.
[Hyperledger fabric install & instantiate chaincode|https://www.youtube.com/watch?v=SXTAVFM2liU]

I executed next commands in client
{code}
docker exec -it cli bash
peer channel create -c myc -o orderer:5005
CORE_PEER_ADDRESS=peer0:7051 peer channel join -b myc.block
{code}

Then on local peer
{code}
docker exec -it peer0 bash
export GOPATH=/opt/gopath
peer chaincode install -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v v0
{code}

And on chaincode instantiate step
{code}
docker exec -it cli bash
CORE_PEER_ADDRESS=peer0:7051 peer chaincode instantiate -C myc -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v v0 -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}'
{code}

I have got error:
{noformat}
peer0      | 2017-04-12 13:22:29.075 UTC [chaincode-platform] func1 -> ERRO 03a Failed to generate platform-specific docker build: Error creating container: no such image
peer0      | 2017-04-12 13:22:29.076 UTC [dockercontroller] deployImage -> ERRO 03b Error building images: Failed to generate platform-specific docker build: Error creating container: no such image
peer0      | 2017-04-12 13:22:29.076 UTC [dockercontroller] deployImage -> ERRO 03c Image Output:
peer0      | ********************
peer0      | 
peer0      | ********************
peer0      | 2017-04-12 13:22:29.076 UTC [chaincode] Launch -> ERRO 03d launchAndWaitForRegister failed Error starting container: Failed to generate platform-specific docker build: Error creating container: no such image
{noformat}

I pulled 
{code}
docker pull hyperledger/fabric-ccenv:x86_64-1.0.0-alpha
{code}
And It fixed issue:
{code}
root@671076dcdd3a:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer0:7051 peer chaincode instantiate -C myc -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v v0 -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}' -o orderer:5005
2017-04-12 14:21:53.204 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 001 Using default escc
2017-04-12 14:21:53.205 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 002 Using default vscc
2017-04-12 14:21:53.225 UTC [main] main -> INFO 003 Exiting.....
{code}

I attached full log and my manifests


Images list
{noformat}
osboxes@osboxes:~/work/hyperledger$ docker images
[sudo] password for osboxes: 
REPOSITORY                     TAG                  IMAGE ID            CREATED             SIZE
peer0-peer0-mycc-v0            latest               426e73fe1590        22 minutes ago      176.2 MB
yeasy/hyperledger-fabric-ca    latest               4dcd0dcdfeb5        9 days ago          814.9 MB
yeasy/hyperledger-fabric-cop   latest               79b32d4f7aff        2 weeks ago         814 MB
hyperledger/fabric-ca          latest               35311d8617b4        3 weeks ago         239.8 MB
hyperledger/fabric-ca          x86_64-1.0.0-alpha   35311d8617b4        3 weeks ago         239.8 MB
hyperledger/fabric-orderer     latest               5685fd77ab7c        3 weeks ago         181.6 MB
hyperledger/fabric-orderer     x86_64-1.0.0-alpha   5685fd77ab7c        3 weeks ago         181.6 MB
hyperledger/fabric-peer        x86_64-1.0.0-alpha   784c5d41ac1d        3 weeks ago         184.3 MB
hyperledger/fabric-ccenv       x86_64-1.0.0-alpha   91792014b61f        3 weeks ago         1.294 GB
hyperledger/fabric-baseimage   latest               f4751a503f02        10 weeks ago        1.271 GB
hyperledger/fabric-baseimage   x86_64-0.3.0         f4751a503f02        10 weeks ago        1.271 GB
hyperledger/fabric-baseos      x86_64-0.3.0         c3a4cf3b3350        10 weeks ago        161 MB
hyperledger/fabric-peer        latest               21cb00fb27f4        5 months ago        1.424 GB
hyperledger/fabric-baseimage   x86_64-0.1.0         db53d04b117c        6 months ago        1.39 GB
{noformat}

And containers
{noformat}
671076dcdd3a        hyperledger/fabric-peer:x86_64-1.0.0-alpha   ""/bin/sh""                About an hour ago   Up About an hour                                       cli
6cdfab02c366        hyperledger/fabric-peer:x86_64-1.0.0-alpha   ""peer node start --pe""   About an hour ago   Up About an hour                                       peer0
201cbd6307a8        hyperledger/fabric-peer:x86_64-1.0.0-alpha   ""peer node start --pe""   About an hour ago   Up About an hour                                       peer1
da1ca3044ea8        hyperledger/fabric-orderer                   ""orderer""                2 hours ago         Up About an hour    0.0.0.0:5005->5005/tcp, 7050/tcp   orderer
{noformat}",,,,,,,,,,,,,,,,,,,,12/Apr/17 2:37 PM;oleksandr.borysenko;Log.txt;https://jira.hyperledger.org/secure/attachment/10657/Log.txt,12/Apr/17 2:37 PM;oleksandr.borysenko;docker-2peer.yml;https://jira.hyperledger.org/secure/attachment/10658/docker-2peer.yml,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00v1x:,,,,,,,,greg.haskins,hariharanatarajan,oleksandr.borysenko,,,,,,,,master,,,true,"11/May/17 3:10 PM;hariharanatarajan;Did u have to run the pull on the peer or on the host . I have the same issue on windows . 

But I have a slightly different way to recreate it : 

      I have a local checkout on vagrant on windows and I was to create the entire set of local containers and the tests passed

      i pushed the images to a local registry and then tried running the tests from a different machine which does not have the sources and the paths are different

 ",15/May/17 6:45 PM;greg.haskins;Fix submitted: https://gerrit.hyperledger.org/r/#/c/9379/,"15/May/17 6:49 PM;greg.haskins;Arguments for 1.0 merge consideration:

Without this patch, the system will not automatically pull the ccenv container when it is not found locally, such as the case when deployed from binary artifacts rather than built from source.  The implications of this are:
 * Best case, the operator and/or deployment scripts are forced manually pull the image
 * Worst case, the system is not deployable.  This can happen when using distributed docker orchestration engines (e.g. Kubernetes) because the peer can be run on arbitrary nodes in the network.",,,,,,,,,,,,,,,,,,,,,
Peers not authorized to Chain allowed to join,FAB-3117,15704,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,timpii,timpii,12/Apr/17 11:48 AM,21/Apr/17 3:00 PM,26/Apr/18 6:50 AM,21/Apr/17 3:00 PM,v1.0.0,,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,,"Peers which are not authorized to a Chain can successfully join the chain. However, they can not invoke transactions. Being able to query has not been tested. 

The joining of a chain should ensure prior authorization to the chain.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzbt:l0h,,,,,,,,denyeart,elli-androulaki,kchristidis,timpii,,,,,,,,,,,"12/Apr/17 4:09 PM;denyeart;[~ellaki] [~adc] [~ales]
Moving to fabric-crypto for you to assess.","12/Apr/17 4:18 PM;elli-androulaki;Hi, I believe this relates to the changesets that [~adc] has under review :)
","19/Apr/17 9:16 AM;elli-androulaki;Assigned to Costas, as this is to be taken care of by the config framework :)","21/Apr/17 5:44 AM;kchristidis;Tim you need to update this issue by describing:

The configuration of the genesis block
The configuration of the channel
The precise sequence of steps that you followed, edited down to the bare minimum

(In StackOverflow lingo, you need to provide the MWE.)

I suspect that you are using configtxgen which defaults to an AcceptAll policy, hence the behavior that you see, while unfortunate, is justified.",21/Apr/17 9:21 AM;timpii;Yes - you are correct. We were using the configgentx. As that is the case and you have explained it is the expected behavior then we can close this JIRA item.,,,,,,,,,,,,,,,,,,,
add error to log in case of gossip authentication failure,FAB-3113,15700,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,12/Apr/17 7:34 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,13/Apr/17 8:05 AM,,,,,,,v1.0.0,,,,,,,0,,,,,,,,,"The error isn't printed to the log here: https://github.com/hyperledger/fabric/blob/master/gossip/comm/comm_impl.go#L519

we should add to the log entry the error. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00v0t:,,Sprint 16 - Gossip,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Gossip doesn't have timeout in a dialOption when running in production,FAB-3110,15697,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,11/Apr/17 10:02 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,13/Apr/17 8:04 AM,,,,,,,v1.0.0,,,,,,,0,beta,gossip,,,,,,,"https://github.com/hyperledger/fabric/blob/master/gossip/comm/comm_impl.go#L80
{code}
	if len(dialOpts) == 0 {
		dialOpts = []grpc.DialOption{grpc.WithTimeout(util.GetDurationOrDefault(""peer.gossip.dialTimeout"", defDialTimeout))}
	}
{code}
The dial timeout is only set in code paths that are in tests.
In production, the gossip layers inherit dial options that are set in gossip_service, which doesn't set a dial timeout.

I suggest we simply add a dial timeout to the comm layer here:
https://github.com/hyperledger/fabric/blob/master/gossip/comm/comm_impl.go#L126-L145
and that's it.
{code}
// NewCommInstance creates a new comm instance that binds itself to the given gRPC server
func NewCommInstance(s *grpc.Server, cert *tls.Certificate, idStore identity.Mapper, peerIdentity api.PeerIdentityType, dialOpts ...grpc.DialOption) (Comm, error) {
	commInst, err := NewCommInstanceWithServer(-1, idStore, peerIdentity, dialOpts...)
	if err != nil {
		return nil, err
	}

	if cert != nil {
		inst := commInst.(*commImpl)
		if len(cert.Certificate) == 0 {
			inst.logger.Panic(""Certificate supplied but certificate chain is empty"")
		} else {
			inst.selfCertHash = certHashFromRawCert(cert.Certificate[0])
		}
	}

	proto.RegisterGossipServer(s, commInst.(*commImpl))

	return commInst, nil
}
{code}
[~C0rWin] [~gennadyl]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00v05:,,Sprint 16 - Gossip,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Anchor peer connection logic on joinChannel is flawed,FAB-3109,15696,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,11/Apr/17 9:49 PM,28/Sep/17 10:30 AM,26/Apr/18 6:50 AM,21/May/17 4:34 PM,v1.0.0,,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,gossip,,,,,,,"The connection to anchor peer logic works well if mutual TLS is used:
https://github.com/hyperledger/fabric/blob/master/gossip/discovery/discovery_impl.go#L139-L163
{code}
func (d *gossipDiscoveryImpl) Connect(member NetworkMember, sendInternalEndpoint func() bool) {
	d.logger.Debug(""Entering"", member)
	defer d.logger.Debug(""Exiting"")

	go func() {
		for i := 0; i < maxConnectionAttempts && !d.toDie(); i++ {
			peer := &NetworkMember{
				InternalEndpoint: member.InternalEndpoint,
				Endpoint:         member.Endpoint,
			}

			if !d.comm.Ping(peer) {
				if d.toDie() {
					return
				}
				d.logger.Warning(""Could not connect to"", member)
				time.Sleep(getReconnectInterval())
				continue
			}
			req := d.createMembershipRequest(sendInternalEndpoint()).NoopSign()
			d.comm.SendToPeer(peer, req)
			return
		}
	}()
}
{code}
But, if we don't have mutual TLS, the probe works(because, the server (anchor peer) doesn't authenticate the client) as long as the remote anchor peer is online, regardless if join channel was called on it or not.
A very likely scenario is that a peer connects to an anchor peer that join channel wasn't called on it yet, and the membership request is sent, but is discarded by the anchor peer because it cannot find the MSP manager for the channel (because, it hadn't join a channel yet...).

IMO We need to change the logic to support such scenarios.

* I guess the simplest thing would be to periodically (once in every few minutes?) send a membership request, if the peer is responding to a ping.

* Or, maybe have only anchor peers do that to other anchor peers?

[~C0rWin] [~gennadyl] thoughts? ",,,,,,,,,,,,FAB-2965,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00uzx:,,Sprint 16 - Gossip,,,,,,C0rWin,ChristopherFerris,yacovm,,,,,,,,master,,,true,"12/Apr/17 8:12 AM;C0rWin;I think that after sending membership request and before exiting the go routine which makes connection we can wait for corresponding membership response with timeout. And in cases timeout expires before we getting the response retry again.

Additionally I think that retry logic should be exponential backoff strategy to increase the probability of getting connected in case of the network partition.","12/Apr/17 9:23 AM;yacovm;> I think that after sending membership request and before exiting the go routine which makes connection we can wait for corresponding membership response with timeout. And in cases timeout expires before we getting the response retry again.

If we can pull this off, it'll be great!

> Additionally I think that retry logic should be exponential backoff strategy to increase the probability of getting connected in case of the network partition.

Agreed.","18/May/17 4:15 PM;ChristopherFerris;[https://gerrit.hyperledger.org/r/#/c/9199/16] needs some review. It is a fix to an intermittently failing test. I believe that @yacovm and @C0rWinwant it in, certainly we need to fix the intermittent CI failures. However, there are two approaches that we could take. one being simply skip the intermittently failing test for now. This does introduce about 200 LOC in the production code, but also adds lots of test code. Thoughts?",,,,,,,,,,,,,,,,,,,,,
"Use ""identity"" instead of ""user"" in the help and docs",FAB-3107,15694,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,aambati,aambati,11/Apr/17 9:12 PM,12/May/17 4:55 PM,26/Apr/18 6:50 AM,28/Apr/17 11:05 PM,v1.0.0,,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,,"Currently, user and identity are being used interchangeably, which causes confusion. An identity can be of type ""user"".",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00uzh:,,,,,,,,aambati,,,,,,,,,,master,,,true,18/Apr/17 7:13 PM;aambati;https://gerrit.hyperledger.org/r/7989,,,,,,,,,,,,,,,,,,,,,,,
Doing a server stop right after a server start returns error,FAB-3100,15687,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,skarim,skarim,11/Apr/17 7:06 PM,17/May/17 8:13 PM,26/Apr/18 6:50 AM,17/May/17 8:13 PM,v1.0.0,v1.0.0-alpha1,,,,,v1.0.0-alpha2,,,fabric-ca,,,,0,,,,,,,,,"Starting a server and then immediately stopping it results in the error below. This is only seems to manifest itself during CI and not able to reproduce on a local machine. 

panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x654f12]

A simple test case ran in CI that simply starts and stop server will cause this error to occur. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00uxx:,,,,,,,,skarim,smithbk,,,,,,,,,master,,,true,"04/May/17 5:55 PM;smithbk;The panic is as follows:

goroutine 80 [running]:
panic(0x4687ae0, 0xc420016100)
   /usr/local/Cellar/go/1.7.3/libexec/src/runtime/panic.go:500 +0x1a1
net/http.(*Server).Serve(0xc4202ca380, 0x0, 0x0, 0x0, 0x0)
   /usr/local/Cellar/go/1.7.3/libexec/src/net/http/server.go:2257 +0x62
net/http.Serve(0x0, 0x0, 0x49c0400, 0xc4203c8a20, 0x0, 0x0)
   /usr/local/Cellar/go/1.7.3/libexec/src/net/http/server.go:2091 +0x99
github.com/hyperledger/fabric-ca/lib.(*Server).serve(0xc420314320, 0x1, 0x1)
   github.com/hyperledger/fabric-ca/lib/_test/_obj_test/server.go:704 +0x5e
created by github.com/hyperledger/fabric-ca/lib.(*Server).listenAndServe
   github.com/hyperledger/fabric-ca/lib/_test/_obj_test/server.go:698 +0x732
FAIL  github.com/hyperledger/fabric-ca/lib   0.135s
error: exit status 1
panic: EOF",04/May/17 6:01 PM;smithbk;http://gerrit.hyperledger.org/r/8975 [FAB-3100] Fix panic in server start,"11/May/17 2:27 AM;smithbk;The problem is that when starting the server in non-blocking mode (which is only done for tests), the tests which start and stop servers very quickly may stop it (and thus make the listener nil) before the go routine runs and passes the listener into http.Serve.

The fix is to add this code snippet to the beginning of the serve function in lib/server.go.

    listener := s.listener
    if listener == nil \{
        // It's already been closed
        return nil
    }

    http.Serve(listener, ...)

This prevents us from passing a nil listener into http.Serve",,,,,,,,,,,,,,,,,,,,,
deploy different chaincodes by one name,FAB-3092,15674,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,YuryAndreev,YuryAndreev,11/Apr/17 1:06 PM,13/Apr/17 5:53 AM,26/Apr/18 6:50 AM,13/Apr/17 5:52 AM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"1) in my docker-compose I can made volumes different chaincode by on path
2) I can install and instantiate different chaincode with one name and its run well",,,,,,,,,,,,FAB-2859,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00uwd:,,,,,,,,C0rWin,muralisr,YuryAndreev,,,,,,,,,,,,"11/Apr/17 7:22 PM;C0rWin;[~YuryAndreev] Can you please add *exact* steps to reproduce the problem and also describe what is the problem is. 

1. What do you think the problem is? Why do you think this is a problem.
2. How exactly anyone can reproduce it?
3. Is there any suggestions of how this could be fixed/handled?","13/Apr/17 5:35 AM;muralisr;[~YuryAndreev]  https://jira.hyperledger.org/browse/FAB-2859 links install with instantiation and will prevent chaincode mismatches (using a different chaincodes on different peers with the same name than an instantiated one , replacing the chaincode with a new one after instantiation etc).

In general, instantiation links the fingerprint of the chaincode withe installed package. Corresponding CRs are https://gerrit.hyperledger.org/r/#/c/7875 /https://gerrit.hyperledger.org/r/#/c/7879/

If you agree, please close the issue once the CRs are merged.",13/Apr/17 5:51 AM;YuryAndreev;Thank you for remedying this problem.,,,,,,,,,,,,,,,,,,,,,
error: [Peer.js]: GRPC client failed to get a proper response from the peer.,FAB-3088,15670,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,Souvik.Dey,Souvik.Dey,11/Apr/17 9:46 AM,15/Apr/17 1:42 PM,26/Apr/18 6:50 AM,15/Apr/17 1:42 PM,v1.0.0,v1.0.0-alpha1,,,,,WON'T FIX,,,fabric-sdk-node,,,,0,,,,,,,,,"Hi,


1> I have created followning the stapes from http://hyperledger-fabric.readthedocs.io/en/latest/asset_setup.html.
2> I try to run the deploy.js using GOPATH=$PWD node deploy.js cmd
and deployment failed ..
error is: 
error: [Peer.js]: GRPC client failed to get a proper response from the peer.
error: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: GRPC client failed to get a proper response from the peer.

Please help providing solution 


  


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00uvh:,,,,,,,,mastersingh24,Souvik.Dey,,,,,,,,,,,,,"15/Apr/17 1:40 PM;mastersingh24;The problem is that unfortunately asset sample and setup docs are outdated as they were created for the v1.0.0-preview (aka sfhackfest) images and not update to work with v1.0.0-alpha and later.

I'm going to close this for now as I've removed the docs in question with https://gerrit.hyperledger.org/r/#/c/8063/

","15/Apr/17 1:42 PM;mastersingh24;We do need to work out the ""officially"" supported samples / examples we will take forward as part of every release",,,,,,,,,,,,,,,,,,,,,,
Misleading comments in peer/core.yaml,FAB-3087,15669,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,11/Apr/17 8:57 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,12/Apr/17 9:11 AM,,,,,,,,,,,,,,0,,,,,,,,,"The following comments in the core.yaml are misleading and confusing to users.
    # The Address this Peer will bind to for providing services --> This is simply not true
    address: 0.0.0.0:7051
    # Whether the Peer should programmatically determine the address to bind to.
    # This case is useful for docker containers. ---> This is not accurate
    addressAutoDetect: false
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00uv9:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Fix formatting in peer cli log event,FAB-3086,15668,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,11/Apr/17 8:46 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,13/Apr/17 5:38 AM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"in *peer/chaincode/install.go*
        if proposalResponse != nil {
                logger.*Debug*(""Installed remotely %v"", proposalResponse)
        }



should be *Debugf*",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00uv1:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"Query/Invoke fails on peer2 of organizations ""org1"" and ""org2""",FAB-3083,15665,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Ratnakar,Ratnakar,Ratnakar,11/Apr/17 3:03 AM,17/Apr/17 4:41 AM,26/Apr/18 6:50 AM,16/Apr/17 3:30 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,,,,,,,,,"When Query/Invoke is made on peer2 of organizations org1 and org2 the transaction fails with below error

{panel}
'Error: failed to obtain cds for end2end - transaction not found end2end/mychannel'
{panel}

*STEPs to reproduce:*
1. change +queryChaincode+  function to query on peer2
2. spin the network from test/fixtures using the below command
    _docker-compose up -d_
3. run the e2e tests 
    cd fabric-sdk-node
    _node test/integration/e2e.js_

This steps fails while querying


*Gist of error log:*

{code}
debug: [Peer.js]: Peer.sendProposal - Start
debug: [Peer.js]: Received proposal response from: grpcs://localhost:8056 status: Error: failed to obtain cds for end2end - transaction not found end2end/mychannel
error: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: failed to obtain cds for end2end - transaction not found end2end/mychannel
    at /home/itpc/go/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:434:17
debug: [Peer.js]: Received proposal response from: grpcs://localhost:7056 status: Error: failed to obtain cds for end2end - transaction not found end2end/mychannel
error: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: failed to obtain cds for end2end - transaction not found end2end/mychannel
    at /home/itpc/go/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:434:17
debug: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: failed to obtain cds for end2end - transaction not found end2end/mychannel
debug: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: failed to obtain cds for end2end - transaction not found end2end/mychannel
debug: [Chain.js]: Chain-queryByChaincode - results received
not ok 78 checking query results are correct that user b has 410 now after the move
  ---
    operator: equal
    expected: |-
      '410'
    actual: |-
      'Error: failed to obtain cds for end2end - transaction not found end2end/mychannel'
    at: hfc.newDefaultKeyValueStore.then.then.then (/home/itpc/go/src/github.com/hyperledger/fabric-sdk-node/test/integration/e2e/e2eUtils.js:658:7)
  ...

{code}
",,,,,,,,,,,,,,,,,,,,11/Apr/17 4:45 AM;Ratnakar;docker-compose.yaml;https://jira.hyperledger.org/secure/attachment/10656/docker-compose.yaml,11/Apr/17 2:59 AM;Ratnakar;e2eUtils.js;https://jira.hyperledger.org/secure/attachment/10655/e2eUtils.js,11/Apr/17 3:03 AM;Ratnakar;query_error_log.txt;https://jira.hyperledger.org/secure/attachment/10654/query_error_log.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00uud:,,,,,,,,Ratnakar,,,,,,,,,,master,,,true,11/Apr/17 4:45 AM;Ratnakar;fix for this is provided with patch https://gerrit.hyperledger.org/r/#/c/7919/,,,,,,,,,,,,,,,,,,,,,,,
e2e.js test failure fabric-sdk-node/test/integration,FAB-3076,15657,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,geminatea,geminatea,10/Apr/17 11:24 PM,14/Apr/17 9:12 PM,26/Apr/18 6:50 AM,14/Apr/17 9:12 PM,v1.0.0,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,,,,,,,,,"Running on OSX with with the latest docker images:
```
dev-peer0-events_unit_test1491865431130-v1491865431130   latest                          c94a05a30b3a        18 minutes ago      177 MB
dev-peer0-events_unit_test1491865217314-v1491865217314   latest                          816cb6013b9a        22 minutes ago      177 MB
hyperledger/fabric-couchdb                               latest                          231217971e2a        48 minutes ago      1.51 GB
hyperledger/fabric-couchdb                               x86_64-1.0.0-snapshot-a076bba   231217971e2a        48 minutes ago      1.51 GB
hyperledger/fabric-kafka                                 latest                          1dfe256e5e0d        54 minutes ago      1.3 GB
hyperledger/fabric-kafka                                 x86_64-1.0.0-snapshot-a076bba   1dfe256e5e0d        54 minutes ago      1.3 GB
hyperledger/fabric-zookeeper                             latest                          316dc5be7969        56 minutes ago      1.31 GB
hyperledger/fabric-zookeeper                             x86_64-1.0.0-snapshot-a076bba   316dc5be7969        56 minutes ago      1.31 GB
hyperledger/fabric-testenv                               latest                          a3e8976b76f5        57 minutes ago      1.4 GB
hyperledger/fabric-testenv                               x86_64-1.0.0-snapshot-a076bba   a3e8976b76f5        57 minutes ago      1.4 GB
hyperledger/fabric-buildenv                              latest                          e3ad35936468        58 minutes ago      1.31 GB
hyperledger/fabric-buildenv                              x86_64-1.0.0-snapshot-a076bba   e3ad35936468        58 minutes ago      1.31 GB
hyperledger/fabric-orderer                               latest                          8a44dedafe65        58 minutes ago      182 MB
hyperledger/fabric-orderer                               x86_64-1.0.0-snapshot-a076bba   8a44dedafe65        58 minutes ago      182 MB
hyperledger/fabric-peer                                  latest                          f3f75fc3d66c        59 minutes ago      185 MB
hyperledger/fabric-peer                                  x86_64-1.0.0-snapshot-a076bba   f3f75fc3d66c        59 minutes ago      185 MB
hyperledger/fabric-javaenv                               latest                          0d304aa50423        59 minutes ago      1.43 GB
hyperledger/fabric-javaenv                               x86_64-1.0.0-snapshot-a076bba   0d304aa50423        59 minutes ago      1.43 GB
hyperledger/openldap                                     latest                          54480bd341c0        About an hour ago   1.52 GB
hyperledger/openldap                                     x86_64-1.0.0-snapshot-ee34334   54480bd341c0        About an hour ago   1.52 GB
hyperledger/fabric-ccenv                                 latest                          07dc462377b7        About an hour ago   1.3 GB
hyperledger/fabric-ccenv                                 x86_64-1.0.0-snapshot-a076bba   07dc462377b7        About an hour ago   1.3 GB
hyperledger/fabric-ca                                    latest                          1be28941621c        About an hour ago   240 MB
hyperledger/fabric-ca                                    x86_64-1.0.0-snapshot-ee34334   1be28941621c        About an hour ago   240 MB
dev-peer0-events_unit_test1491860866388-v1491860866389   latest                          400665ca4411        About an hour ago   177 MB
<none>                                                   <none>                          cc57dba0a2e7        About an hour ago   1.31 GB
dev-peer0-events_unit_test1491859755568-v1491859755568   latest                          3857ed8621d7        About an hour ago   177 MB
dev-peer0-events_unit_test1491859512396-v1491859512396   latest                          2a42d67974f4        About an hour ago   177 MB
dev-peer0-events_unit_test1491858613219-v1491858613219   latest                          539911db22cb        2 hours ago         177 MB
dev-peer2-end2end-v1                                     latest                          50b2e2310576        2 hours ago         177 MB
dev-peer0-end2end-v1                                     latest                          1bc25da8a8f9        2 hours ago         177 MB
dev-peer2-end2end-v0                                     latest                          7f6aa79f2086        2 hours ago         177 MB
dev-peer0-end2end-v0                                     latest                          1f18819a0ce4        2 hours ago         177 MB
couchdb                                                  latest                          b15a0ea0ffc9        2 weeks ago         225 MB
nginx                                                    latest                          6b914bbcb89e        5 weeks ago         182 MB
hyperledger/fabric-baseimage                             x86_64-0.3.0                    f4751a503f02        2 months ago        1.27 GB
hyperledger/fabric-baseos                                x86_64-0.3.0                    c3a4cf3b3350        2 months ago        161 MB
yeasy/hyperledger                                        latest                          f015c74d82a9        5 months ago        837 MB
hyperledger/fabric-membersrvc                            latest                          b3654d32e4f9        5 months ago        1.42 GB
```

After removing all docker containers and running `/test/fixtures/docker-compose up --abort-on-container-exit` in different terminal, I get the following test failure from `node test/integration/e2e.js`
in the `instantiate chaincode` section:

```
...
[Peer.js]: Peer.sendProposal - Start
debug: [Orderer.js]: sendDeliver - on error
debug: [Orderer.js]: sendDeliver - on status:{""code"":11,""details"":""EOF"",""metadata"":{""_internal_repr"":{}}}
debug: [Peer.js]: Received proposal response from: grpcs://localhost:7051 status: Error: Transaction returned with failure: Failed extracting proposal fields. [Could not extract the channel header from the proposal: UnmarshalChannelHeader failed, err proto: bad wiretype for field common.ChannelHeader.Type: got wiretype 2, want 0]
error: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Transaction returned with failure: Failed extracting proposal fields. [Could not extract the channel header from the proposal: UnmarshalChannelHeader failed, err proto: bad wiretype for field common.ChannelHeader.Type: got wiretype 2, want 0]
    at /Users/drams/go/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:434:17
debug: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Transaction returned with failure: Failed extracting proposal fields. [Could not extract the channel header from the proposal: UnmarshalChannelHeader failed, err proto: bad wiretype for field common.ChannelHeader.Type: got wiretype 2, want 0]
error: [E2E testing]: instantiate proposal was bad
not ok 27 Failed to send instantiate Proposal or receive valid response. Response null or status is not 200. exiting...
  ---
    operator: fail
    at: hfc.newDefaultKeyValueStore.then.then.then.then (/Users/drams/go/src/github.com/hyperledger/fabric-sdk-node/test/integration/e2e/e2eUtils.js:350:6)
  ...
not ok 28 Error: Failed to send instantiate Proposal or receive valid response. Response null or status is not 200. exiting... at hfc.newDefaultKeyValueStore.then.then.then.then (/Users/drams/go/src/github.com/hyperledger/fabric-sdk-node/test/integration/e2e/e2eUtils.js:351:10) at process._tickCallback (internal/process/next_tick.js:103:7)
  ---
    operator: fail
    at: hfc.newDefaultKeyValueStore.then.then.then.then.then (/Users/drams/go/src/github.com/hyperledger/fabric-sdk-node/test/integration/e2e/e2eUtils.js:369:5)
  ...
not ok 29 Failed to instantiate chaincode 
  ---
    operator: fail
    at: e2eUtils.instantiateChaincode.then (/Users/drams/go/src/github.com/hyperledger/fabric-sdk-node/test/integration/e2e/instantiate-chaincode.js:40:6)
  ...
info: [E2E testing]: Disconnecting the event hub
debug: [EventHub.js]: connect - unregister event received```

I have confirmed that Ubuntu 16.0.4 doesn't seem to have this problem.",OSX 10.12.14,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00usl:,,,,,,,,geminatea,,,,,,,,,,,,,,14/Apr/17 9:12 PM;geminatea;This no longer seems to be present.,,,,,,,,,,,,,,,,,,,,,,,
Fix affiliation hierarchy checking during revocation,FAB-3074,15655,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,skarim,skarim,10/Apr/17 8:09 PM,21/Apr/17 5:39 PM,26/Apr/18 6:50 AM,21/Apr/17 5:38 PM,v1.0.0,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"Affiliation hierarchy checking currently will some with an affiliation of ""hyperledger"" to revoke someone with an affiliation of ""hyperledger2"". Currently a prefix comparison is done, so in this scenario ""hyperledger"" is a prefix of ""hyperledger2"". Whole word comparison needs to be done. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00us5:,,Sprint 16 - Membership Service,,,,,,ChristopherFerris,skarim,,,,,,,,,master,,,true,"21/Apr/17 5:39 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/7903/
",,,,,,,,,,,,,,,,,,,,,,,
CA name is not persisted correctly,FAB-3061,15642,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,smithbk,smithbk,10/Apr/17 1:29 PM,12/May/17 4:55 PM,26/Apr/18 6:50 AM,22/Apr/17 7:01 PM,,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"The following should persist the CA name to the fabric-ca-server-config.yaml but does not.  The default CA name (which is the domain name) is used.
{code}
fabric-ca-server init -b admin:adminpw --ca.name MYCA
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00uqh:,,Sprint 16 - Membership Service,,,,,,JonathanLevi,smithbk,,,,,,,,,master,,,true,"11/Apr/17 9:49 PM;JonathanLevi;Why do we need two tickets for this? https://jira.hyperledger.org/browse/FAB-3007
That is, are we going to end up submitting two Gerrit CRs for these?","19/Apr/17 8:57 PM;smithbk;This is a different problem from FAB-3007, so yes, different CRs",,,,,,,,,,,,,,,,,,,,,,
chaincode url decode should never return empty urllocation with no error,FAB-3055,15636,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,baohua,baohua,baohua,10/Apr/17 9:11 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,15/Apr/17 2:32 PM,v1.0.0,,,,,,v1.0.0,,,fabric-endorser,,,,0,chaincode,,,,,,,,"Exisiting code will decode  the url ""http:///"" with returning """",nil.

The usage only check `err != nil` and thought it was successful (core/chaincode/platform/golang/package.go#252).

Actually, in this case the decode should throw error as it's not a valid chaincode location url.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00up5:,,Sprint 4,,,,,,baohua,ChristopherFerris,,,,,,,,,master,,,true,13/Apr/17 7:23 PM;ChristopherFerris;please add CR link,"14/Apr/17 2:24 AM;baohua;Code submitted at https://gerrit.hyperledger.org/r/#/c/7885/.

Welcome for review!

Thanks!",,,,,,,,,,,,,,,,,,,,,,
[SECURITY] fabric-ca does not check/enforce maximum length for DNs,FAB-3051,15632,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,rennman,rennman,08/Apr/17 6:45 PM,31/Jul/17 10:03 AM,26/Apr/18 6:50 AM,27/Jul/17 1:56 PM,v1.0.0,v1.0.0-rc1,,,,,v1.0.1,,,fabric-ca,,,,0,security,Security,,,,,,,"There are no checks on length of RDN, nor total DN for a CSR. This causes an issue for authentication, since a DN of > approx. 3700 chars causes an error related to the authentication token (presumably, since that's the most likely thing to be affected):


{code:java}
2017/04/08 14:42:59 [DEBUG] Received response
statusCode=400 (400 Bad request)
<html><body><h1>400 Bad request</h1>
Your browser sent an invalid request.
</body></html>
{code}

We should define a maximum length for the DN.
Although the LDAP specifications do not define a maximum length for DNs, the industry standards range from approximately 255-2048. Even for multiple products within the same company, there are often no consistent rules, e.g. 

||Product|IBM® Tivoli® Directory Server|IBM z/OS® Security Server|Novell eDirectory Server|Sun Java™ System Directory Server|Microsoft® Active Directory Server|Lotus® Domino® Server|Active Directory Application Mode (ADAM)|Optimal length||
||Max allowed|1024|1024|1024|1024|2048|255|1024|255||
",,,,,,,,,,,,FAB-4546,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:rhw9c,,,,,,,,mastersingh24,rennman,skarim,,,,,,,,release-1.0,master,,true,"08/Apr/17 8:13 PM;rennman;Unless contraindicated, I submit that we follow the X.520 recommendations of the ITU:

||attribute|upper bound||
||commonName|ub-common-name INTEGER ::= 64||
||serialNumber|ub-serial-number INTEGER ::= 64||
||organizationalUnitName|ub-organizational-unit-name INTEGER ::= 64||
||organizationName|ub-organization-name INTEGER ::= 64||
||localityName|ub-locality-name INTEGER ::= 128||
||stateOrProvinceName|ub-state-name INTEGER ::= 128||
||countryName|ub-country-code INTEGER ::= 4||",14/Jul/17 6:04 PM;skarim;https://gerrit.hyperledger.org/r/11657,16/Jul/17 9:23 AM;mastersingh24;I think this should be OK for a patch release as well so setting target to 1.0.1,21/Jul/17 10:58 AM;mastersingh24;[~skarim] -  We can't include this in the 1.0.1 unless you unstack it from the other changes as they will not go into 1.0.1,,,,,,,,,,,,,,,,,,,,
fabric-ca serialnumber for CSR not documented,FAB-3050,15631,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,rennman,rennman,08/Apr/17 6:10 PM,12/May/17 4:55 PM,26/Apr/18 6:50 AM,08/May/17 10:48 PM,v1.0.0,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"Whether this optional parameter is useful is debatable.  Either way, it's intended use is unclear, since the sample does not include it, nor does the help text adequately describe it's use. I'm not advocating either way for the elimination, nor retention of this field; if we keep it, it needs to honor the syntax rules defined by the OID, and is well-documented.

The expected use of the Serial Number attribute type defined by the LDAP schema (2.5.4.5 - id-at-serialNumber) would used as a qualifier RDN of the certificate subject, e.g.
CN=admin,serialNumber=<number>, ...

The cfssl implementation violates the syntax of the the ASN.1 definition, since the printable string's 'ub-serial-number' restricts the length from 1-64. cfssl apparently has no upper limit for this field as I was able to stuff well over 8K chars into the cert.

This is apparently raises a separate issue since we should restrict the DN's length to a reasonable value. I'll open a separate defect for that.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00uj1:,,,,,,,,mastersingh24,rennman,smithbk,,,,,,,,master,,,true,"16/Apr/17 2:51 PM;mastersingh24;I can't think of any reason why we would need to allow the client to specify the serial number of the certificate.  I believe we can disable that functionality in the signing profile for the server.

Not sure how high a priority this is but we can keep tracking it","18/Apr/17 5:08 PM;rennman;This has nothing whatever to do with the serial number of the certificate.

It is one of the RDN's contained in the distinguished name, as per above:
CN=admin,serialNumber=<number>, ...

It is a user-defined field.
",01/May/17 4:51 PM;smithbk;See http://gerrit.hyperledger.org/r/8803 [FAB-3050] Document serial number of CSR,,,,,,,,,,,,,,,,,,,,,
Create couchdb batch read operations for optimization,FAB-3045,15626,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,chris.elder,chris.elder,08/Apr/17 3:26 PM,08/Apr/17 3:29 PM,26/Apr/18 6:50 AM,08/Apr/17 3:29 PM,,,,,,,,,,fabric-ledger,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00un5:,,,,,,,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Removing leading zeros from serial and aki in database lookup of certificate,FAB-3038,15618,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,skarim,skarim,07/Apr/17 1:53 PM,12/May/17 4:55 PM,26/Apr/18 6:50 AM,12/Apr/17 2:56 PM,v1.0.0,v1.0.0-alpha1,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"AKI and serial are stored in the database with no leading zeros. However, when using openSSL command line to get serial or AKI from a certificate there are times when these might contain a leading zero. 

Need to make lookup logic more robust to accept a leading zero or not when doing a look up against the certificate table using serial or AKI. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6i:zzi,,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,,mastersingh24,skarim,,,,,,,,,master,,,true,"08/Apr/17 10:42 AM;mastersingh24;[~skarim] - Make sure to use fabric-ca as the component and please make sure to fill in affects version and fixed version fields.  I took care of this already, but please make sure to do so in the future so we can track / target releases and fixes / features",,,,,,,,,,,,,,,,,,,,,,,
Prevent recursion in client.go in delivery service when used recursively,FAB-3034,15614,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,07/Apr/17 7:20 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,13/Apr/17 8:04 AM,v1.0.0,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"The client in the delivery service package encapsulates a delivery stream from the peer to the ordering service. It accepts a function in construction time that is invoked upon each successful (re)connection to the ordering service. The purpose of this design, is to make the peer send a SeekInfo message to the orderer, if it disconnects (or, if the orderer crashes and the peer connects to a new orderer). This function may also use the client *itself*.

There is a bug that prevented the usage of the client in the function, because the connection reference and the stream reference were updated only after a successful invocation of the function, and thus- caused recursive reconnection attempts.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ukp:,,,,,,,,muralisr,yacovm,,,,,,,,,master,,,true,"13/Apr/17 7:59 AM;muralisr;[~yacovm] status please ? I thought this was fixed, no ?","13/Apr/17 8:05 AM;yacovm;yes, thanks for reminding me!",,,,,,,,,,,,,,,,,,,,,,
Client.getUserContext() does not always return the requested user,FAB-3023,15603,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,06/Apr/17 2:54 PM,17/Apr/17 4:35 AM,26/Apr/18 6:50 AM,17/Apr/17 4:35 AM,v1.0.0,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,,,,,,,,,"if the client object has userA as the current context, and wants to switch to userB, it may want to first call client.getUserContext(""userB"") but the code always returns the current user which is userA.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ui9:,,,,,,,,,,,,,,,,,,master,,,true,17/Apr/17 4:35 AM;jimthematrix;resolved by https://gerrit.hyperledger.org/r/#/c/7805/,,,,,,,,,,,,,,,,,,,,,,,
definition of function *GetQueryValue* in *BaseTestSetup* and *BaseSetupImpl* are inconsistent,FAB-3022,15602,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,hanhzf,hanhzf,hanhzf,06/Apr/17 2:24 PM,07/Apr/17 3:53 AM,26/Apr/18 6:50 AM,07/Apr/17 3:53 AM,,,,,,,v1.0.0,,,fabric-sdk-go,,,,0,,,,,,,,,"in *BaseTestSetup*, we define *GetQueryValue* as  
`GetQueryValue(t *testing.T, chain fabricClient.Chain) (string, error)` , 

while in *BaseSetupImpl*, we define it as 
`func (setup *BaseSetupImpl) GetQueryValue(chain fabricClient.Chain) (string, error) `, they should be consistent.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00uhh:,,,,,,,,hanhzf,,,,,,,,,,master,,,true,06/Apr/17 2:28 PM;hanhzf;fix submitted: http://gerrit.hyperledger.org/r/7797,,,,,,,,,,,,,,,,,,,,,,,
Fail to run chaincode_example05,FAB-3019,15599,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,daijianw,daijianw,06/Apr/17 1:55 PM,11/May/17 11:45 PM,26/Apr/18 6:50 AM,11/May/17 11:45 PM,v1.0.0,v1.0.0-alpha1,,,,,DUPLICATE,,,fabric-samples,,,,0,,,,,,,,,"Based on https://github.com/hyperledger/fabric/blob/master/examples/e2e_cli/end-to-end.rst to setup network,  created the channel ""mychannel"",  joined the  channel. Install and instantiate chaincode_example02 on all peers, it works fine.  But after install and instantiate chaincode_example05, it failed to do query operation.

1)The command to install the chaincode ""chaincode_example05""
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID=""Org0MSP"" CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig/cacerts/peerOrg0.pem peer chaincode install -n mycc2 -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example05

2)The command to instantiate the chaincode ""chaincode_example05""
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID=""Org0MSP"" CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig/cacerts/peerOrg0.pem peer chaincode instantiate -o orderer0:7050 --tls true --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/orderer/localMspConfig/cacerts/ordererOrg0.pem  -n mycc2 -v 1.0 -c '{""Args"":[""init"",""sum"",""0""]}'


3)The command to query the chaincode ""chaincode_example05""
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID=""Org0MSP"" CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig/cacerts/peerOrg0.pem peer chaincode query -C mychannel -n mycc2 -c '{""Args"":[""query"",""github.com/hyperledger/fabric/core/example/chaincode/chaincode_example02"",""sum""]}'


4)The error output of the query command
2017-04-05 21:07:54.984 UTC [logging] InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'chaincode'
2017-04-05 21:07:54.995 UTC [msp] GetLocalMSP -> DEBU 002 Returning existing local MSP
2017-04-05 21:07:54.995 UTC [msp] GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity
2017-04-05 21:07:54.997 UTC [msp] Sign -> DEBU 004 Sign: plaintext: 0A90050A5A080322096D796368616E6E...655F6578616D706C6530320A0373756D 
2017-04-05 21:07:54.997 UTC [msp] Sign -> DEBU 005 Sign: digest: F72CE08E132719D2B9F105CAC15810A873D48CBD19307A0A81809BE0AB0D3C1C 
Error: Error endorsing query: rpc error: code = 2 desc = Error executing chaincode: Transaction returned with failure: Failed to find ledger for called channel hyperledger/fabric/core/example/chaincode/chaincode_example02

5)The output of container ""dev-peer1-mycc2-1.0""

_2017-04-05 21:07:55.031 UTC [shim] func1 -> DEBU 01a [b41c6178]Received message TRANSACTION from shim
2017-04-05 21:07:55.033 UTC [shim] handleMessage -> DEBU 01b [b41c6178]Handling ChaincodeMessage of type: TRANSACTION(state:ready)
2017-04-05 21:07:55.033 UTC [shim] beforeTransaction -> DEBU 01c [b41c6178]Received TRANSACTION, invoking transaction on chaincode(Src:ready, Dst:ready)
2017-04-05 21:07:55.035 UTC [shim] handleInvokeChaincode -> DEBU 01d [b41c6178]Sending INVOKE_CHAINCODE
2017-04-05 21:07:55.042 UTC [shim] func1 -> DEBU 01e [b41c6178]Received message ERROR from shim
2017-04-05 21:07:55.042 UTC [shim] handleMessage -> DEBU 01f [b41c6178]Handling ChaincodeMessage of type: ERROR(state:ready)
2017-04-05 21:07:55.043 UTC [shim] sendChannel -> DEBU 020 [b41c6178]before send
2017-04-05 21:07:55.044 UTC [shim] sendChannel -> DEBU 021 [b41c6178]after send
2017-04-05 21:07:55.044 UTC [shim] afterError -> DEBU 022 [b41c6178]Error received from validator ERROR, communicated(state:ready)
2017-04-05 21:07:55.044 UTC [shim] handleInvokeChaincode -> ERRO 023 [b41c6178]Received ERROR.
2017-04-05 21:07:55.044 UTC [shim] func1 -> DEBU 024 [b41c6178]Transaction completed. Sending COMPLETED
2017-04-05 21:07:55.044 UTC [shim] func1 -> DEBU 025 [b41c6178]Move state message COMPLETED
2017-04-05 21:07:55.044 UTC [shim] handleMessage -> DEBU 026 [b41c6178]Handling ChaincodeMessage of type: COMPLETED(state:ready)
2017-04-05 21:07:55.044 UTC [shim] func1 -> DEBU 027 [b41c6178]send state message COMPLETED_",1.0.0.-alpha,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00uht:,,,,,,,,daijianw,yuki-kon,,,,,,,,,,,,,"25/Apr/17 9:35 PM;yuki-kon;Do you still have this problem? Chaincode_example05 was modified by CR7595 (https://gerrit.hyperledger.org/r/#/c/7595/).
Chaincode_example05 works well in my environment with the following steps.

1)Based on https://github.com/hyperledger/fabric/blob/master/examples/e2e_cli/end-to-end.rst, run e2e test.
$ ./network_setup.sh up

2)Based on https://github.com/hyperledger/fabric/blob/master/examples/e2e_cli/end-to-end.rst#modify-the-docker-compose-file, open the docker-compose file and comment out the command to run script.sh for manual operation.

3)Restart cli container and enter to it.
$ docker-compose up -d cli
$ docker exec -it cli bash

4)Install the chaincode ""chaincode_example05"" on Peer1
$ CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID=""Org0MSP"" CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig/cacerts/peerOrg0.pem peer chaincode install -n mycc2 -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example05

5)Instantiate the chaincode ""chaincode_example05"" on Peer1
$ CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID=""Org0MSP"" CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig/cacerts/peerOrg0.pem peer chaincode instantiate -o orderer0:7050 --tls --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/orderer/localMspConfig/cacerts/ordererOrg0.pem -C mychannel -n mycc2 -v 1.0 -c '{""Args"":[""init"",""sum"",""0""]}'

6)Install the chaincode ""chaincode_example02"" on Peer1. # chaincode_expample02 is not installed by network_setup.sh
$ CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID=""Org0MSP"" CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig/cacerts/peerOrg0.pem peer chaincode install -n mycc -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02

7)Query the chaincode ""chaincode_example05"" on Peer1
$ CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID=""Org0MSP"" CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig/cacerts/peerOrg0.pem peer chaincode query -C mychannel -n mycc2 -c '{""Args"":[""query"",""mycc"",""sum""]}'
","26/Apr/17 6:03 AM;daijianw;Hi Yuki,

Thanks. Yes, it works now, with the patch from CR7595 ",,,,,,,,,,,,,,,,,,,,,,
Fix max enrollment checking logic,FAB-3011,15591,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,skarim,skarim,05/Apr/17 9:46 PM,02/Jun/17 12:17 AM,26/Apr/18 6:50 AM,02/Jun/17 12:17 AM,v1.0.0-alpha2,,,,,,v1.0.0,,,fabric-ca,,,,5,,,,,,,,,"The max enrollment configuration setting is not implemented correctly.  It should work as follows.

Let *ca**MaxEnrollments* be the globally configured max enrollments for the CA, and *user**MaxEnrollments* be the per-user/identity max enrollments setting.  The userMaxEnrollments setting is part of the registration request for a user/identity.**

The valid values (and semantics) for *ca**MaxEnrollments* are:
{code:java}
-1: Infinite number of enrollments (i.e. no limit)
0: Enrollments disabled globally
>0: Maximum number of enrollments allowed globally{code}
The valid values (and semantics) for *user**MaxEnrollments* are:
{code:java}
-1: Infinite number of enrollments (i.e. no limit)
0: Use the caMaxEnrollments value
>0: Maximum number of enrollments{code}
 

When a registration request is received which contains a userMaxEnrollments setting, an error is returned if:

1) userMaxEnrollments is -1 (infinite) and caMaxEnrollments is not -1

2) userMaxEnrollments > 0 and userMaxEnrollments > caMaxEnrollments

If userMaxEnrollments is 0 (the default value), the userMaxEnrollments value is set to the current value of caMaxEnrollments.

 

Keep in mind that the caMaxEnrollments setting may change between the time that a user is registered and when that user enrolls (multiple times).

 

When an enrollment request is received for a particular user/identity, the current max enrollment ** setting for that user which is enforced is calculated as the minimum of the current caMaxEnrollments setting (if not -1) and the userMaxEnrollments setting for that user.

 

This allows the caMaxEnrollment setting to always act as a backstop for max enrollments.

For example, the following scenarios are supported:

1) caMaxEnrollments set to 0 means enrollment is temporarily disabled for the CA

2) caMaxEnrollments set to 1 means all passwords are treated as a OTP (One-Time Password)

3) caMaxEnrollments set to -1 means registrars are in *complete* control of managing the max enrollments settings on a per user basis.

4) caMaxEnrollments > 1 means registrars have *partial* control of managing the max enrollments setting on a per user basis.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6i:zz,,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,,baohua,ChristopherFerris,mastersingh24,skarim,smithbk,weeds,,,,,master,,,true,"09/Apr/17 1:22 PM;mastersingh24;I don't actually understand the reasoning behind the logic written above.

I believe we want things to work in the following manner:

1) At the CA level, there is a max enrollments setting

2) The CA max enrollments setting has the following possible values:

-1 - no limit on the number of enrollments
0 - no enrollments (although I am not sure what this would be for other than to say that by default users are not able to enroll)
>= 1 - the maximum number of enrollments for a user

3) We have the ability to set per user max enrollments

4) The following policies apply for per user max enrollments:

- if the register user request does not contain max enrollments, the CA max enrollment value should be used 
- if the CA max enrollments is >=1, then the max enrollments for a user must be <= CA max enrollments
- if the CA max enrollments = 0, then it follows that user max enrollments must be 0

Questions / Comments:

1) I'm not sure why one would set CA max enrollments to 0 nor why someone would set user max enrollments to 0.  Do we really need this case?
2) I do not believe that we ""calculate"" the user max enrollments based on CA max enrollments.  We should simply return an error if the user request enrollment is not in line with the CA max enrollments setting, for example:

- if  CA max enrollments >= 1 and user max enrollment > CA max enrollments, return error stating the max enrollment for the CA has been exceeded (we can decide whether or not we should return the actual CA max enrollment value or not)

- if CA max enrollments = 0 and user max enrollments != 0, return an error

3) are we allowing unlimited enrollments per user (it's a nice development setting)?","10/Apr/17 1:59 PM;smithbk;1) A user max enrollment of 0 does not make sense, but a CA max enrollment of 0 simply means we disable enrollment for some period of time, which I think is a valid use case.   For example, an open enrollment period comes to an end.

2) I agree with both of your examples and that is the way that the code should work.  Another use case is as follows:
* If user A is registered with max enrollments of 3 and CA max enrollments is later changed to 2, then the user should be limited to 2 enrollments.
* Continuing the above example, if CA max enrollments is later changed to -1 (unlimited), then user A has max enrollments of 3.

3) Yes, we are allowing max enrollments per user as long as the CA max enrollments is unlimited.",11/Apr/17 4:21 PM;mastersingh24;I think we should make sure that when someone register's a user that the enrollment limits match the CA setting and if not reject the register request.  This keeps things much simpler IMHO rather than allowing people to THINK they registered a user with one value and have another enforced,"19/Apr/17 9:54 PM;smithbk;Gari, we do exactly this.  That is, we do reject a register request that does not match the CA setting.  If we do not do this, it is a bug.

But we also want to reject an enrollment request if it exceeds either the per-user max_enrollments setting OR the current CA's max_enrollment settings, where ""current"" means at the time the enroll request is received.",22/Apr/17 7:00 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/7741/,"23/May/17 8:00 PM;ChristopherFerris;I'm trying to understand the impact of leaving this post 1.0, if any.",24/May/17 7:39 PM;mastersingh24;The logic is currently flawed and will not work the way users expect.  I don't see any risk in doing this given that what we have does not work correctly anyway,"25/May/17 1:37 AM;baohua;Would like to suggest switch the meaning of the enrollment number value between -1 and 0.

The following seems more natural for me :)
0: Infinite number of enrollments (i.e. no limit)
-1: Enrollments disabled globally",26/May/17 10:25 AM;mastersingh24;[~baohua] I've seen things done both ways (which I agree is odd) but I tend to think the current way is the way to go (basically -1 means we are not honoring limits which means unlimited),"27/May/17 12:32 AM;baohua;Thanks gari!

I agree, however, still try to post a comment here, to indicate that the configuration semantic  inconsistency between fabric and fabric-ca if we keep unchanged.

e.g., in configtx.yaml, we use 0 means unlimited for the Orderer.MaxChannels.

I guess it would be better if we use the same style in future :)",27/May/17 12:33 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/7741/,"01/Jun/17 10:06 PM;weeds;any  more votes for this one?

 ",02/Jun/17 12:16 AM;ChristopherFerris;This now has the requisite number of votes and can be merged,,,,,,,,,,,
fabric-ca init creates hidden file by writing emtpy filename for ca certificate,FAB-3007,15587,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,rennman,rennman,05/Apr/17 8:43 PM,12/May/17 4:55 PM,26/Apr/18 6:50 AM,21/Apr/17 3:02 PM,v1.0.0,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"When the fabric-ca init command is run, I end up with a hidden file in 
$ENROLLMENT_DIR/msp/cacerts/.pem

This is evidently taken from 
fabric-ca-server-config.yaml
ca.name

The default is to use the domain name of the local system by parsing the result of os.Hostname(). 

However, os.Hostname() is not guaranteed to return a domain name, so it can end up <nul>

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ufl:,,,,,,,,aambati,JonathanLevi,rennman,,,,,,,,master,,,true,"11/Apr/17 9:49 PM;JonathanLevi;Why do we need two tickets for this? ( https://jira.hyperledger.org/browse/FAB-3061 )
That is, are we going to end up submitting two Gerrit CRs for these?","18/Apr/17 3:34 PM;aambati;[~jonathan]Sorry I missed your comment. fab-3007 is to make sure server errors out if ca.name is empty and fab-3061 is to make sure --ca.name value is stored in the default config file that is generated. Yes, I have two change sets in gerrit.",18/Apr/17 7:13 PM;aambati;https://gerrit.hyperledger.org/r/7739,,,,,,,,,,,,,,,,,,,,,
Remove fabric-ca-server extraneous command-specific flags,FAB-3004,15584,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,smithbk,smithbk,05/Apr/17 6:42 PM,12/May/17 4:55 PM,26/Apr/18 6:50 AM,21/Apr/17 1:39 PM,v1.0.0,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"There are extra flags that can be seen as follows which should not be present.
All fabric-ca-server flags are global flags, and all that are in the ""Flags"" section should be removed.

{code}
# fabric-ca-server init -h

Generate the key material needed by the server if it doesn't already exist

Usage:
  fabric-ca-server init [flags]

Flags:
      --ca.certfile string    PEM-encoded certificate file used for certificate issuance (default ""cert.pem"")
      --ca.keyfile string     PEM-encoded key file for certificate issuance (default ""key.pem"")
      --tls.certfile string   PEM-encoded certificate file used for TLS (default ""cert.pem"")
      --tls.keyfile string    PEM-encoded key file used for TLS (default ""key.pem"")

Global Flags:
      --address string                         Listening address of fabric-ca-server (default ""0.0.0.0"")
  -b, --boot string                            The user:pass for bootstrap admin which is required to build default config file
      --ca.chainfile string                    PEM-encoded CA chain file (default ""ca-chain.pem"")
  -n, --ca.name string                         Certificate Authority name
  -c, --config string                          Configuration file (default ""fabric-ca-server-config.yaml"")
      --csr.cn string                          The common name field of the certificate signing request to a parent fabric-ca-server
      --csr.hosts stringSlice                  A host name in a certificate signing request to a parent fabric-ca-server
      --csr.serialnumber string                The serial number in a certificate signing request to a parent fabric-ca-server
      --db.datasource string                   Data source which is database specific (default ""fabric-ca-server.db"")
      --db.tls.certfiles stringSlice           PEM-encoded list of trusted certificate files
      --db.tls.client.certfile string          PEM-encoded certificate file when mutual authenticate is enabled
      --db.tls.client.keyfile string           PEM-encoded key file when mutual authentication is enabled
      --db.type string                         Type of database; one of: sqlite3, postgres, mysql (default ""sqlite3"")
  -d, --debug                                  Enable debug level logging
      --ldap.enabled                           Enable the LDAP client for authentication and attributes
      --ldap.groupfilter string                The LDAP group filter for a single affiliation group (default ""(memberUid=%s)"")
      --ldap.url string                        LDAP client URL of form ldap://adminDN:adminPassword@host[:port]/base
      --ldap.userfilter string                 The LDAP user filter to use when searching for users (default ""(uid=%s)"")
  -p, --port int                               Listening port of fabric-ca-server (default 7054)
      --registry.maxenrollments int            Maximum number of enrollments; valid if LDAP not enabled
      --tls.clientauth.certfiles stringSlice   PEM-encoded list of trusted certificate files
      --tls.clientauth.type string             Policy the server will follow for TLS Client Authentication. (default ""noclientcert"")
      --tls.enabled                            Enable TLS on the listening port
  -u, --url string                             URL of the parent fabric-ca-server

{code}

{code}
# fabric-ca-server start -h

Start the fabric-ca server

Usage:
  fabric-ca-server start [flags]

Flags:
  -a, --addr string           Listening address (default ""0.0.0.0"")
      --ca.certfile string    PEM-encoded certificate file used for certificate issuance (default ""cert.pem"")
      --ca.keyfile string     PEM-encoded key file for certificate issuance (default ""key.pem"")
  -p, --port int              Listening port (default 7054)
      --tls.certfile string   PEM-encoded certificate file used for TLS (default ""cert.pem"")
      --tls.keyfile string    PEM-encoded key file used for TLS (default ""key.pem"")

Global Flags:
      --address string                         Listening address of fabric-ca-server (default ""0.0.0.0"")
  -b, --boot string                            The user:pass for bootstrap admin which is required to build default config file
      --ca.chainfile string                    PEM-encoded CA chain file (default ""ca-chain.pem"")
  -n, --ca.name string                         Certificate Authority name
  -c, --config string                          Configuration file (default ""fabric-ca-server-config.yaml"")
      --csr.cn string                          The common name field of the certificate signing request to a parent fabric-ca-server
      --csr.hosts stringSlice                  A host name in a certificate signing request to a parent fabric-ca-server
      --csr.serialnumber string                The serial number in a certificate signing request to a parent fabric-ca-server
      --db.datasource string                   Data source which is database specific (default ""fabric-ca-server.db"")
      --db.tls.certfiles stringSlice           PEM-encoded list of trusted certificate files
      --db.tls.client.certfile string          PEM-encoded certificate file when mutual authenticate is enabled
      --db.tls.client.keyfile string           PEM-encoded key file when mutual authentication is enabled
      --db.type string                         Type of database; one of: sqlite3, postgres, mysql (default ""sqlite3"")
  -d, --debug                                  Enable debug level logging
      --ldap.enabled                           Enable the LDAP client for authentication and attributes
      --ldap.groupfilter string                The LDAP group filter for a single affiliation group (default ""(memberUid=%s)"")
      --ldap.url string                        LDAP client URL of form ldap://adminDN:adminPassword@host[:port]/base
      --ldap.userfilter string                 The LDAP user filter to use when searching for users (default ""(uid=%s)"")
      --registry.maxenrollments int            Maximum number of enrollments; valid if LDAP not enabled
      --tls.clientauth.certfiles stringSlice   PEM-encoded list of trusted certificate files
      --tls.clientauth.type string             Policy the server will follow for TLS Client Authentication. (default ""noclientcert"")
      --tls.enabled                            Enable TLS on the listening port
  -u, --url string                             URL of the parent fabric-ca-server

{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6i:zz9,,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,,baohua,smithbk,,,,,,,,,master,,,true,11/Apr/17 12:10 AM;smithbk;See http://gerrit.hyperledger.org/r/7911,11/Apr/17 1:19 AM;smithbk;posted to wrong jira item ... deleting this comment,11/Apr/17 3:26 AM;baohua;So why would the `git clone` issue affect this?,"14/Apr/17 2:27 PM;smithbk;Ooppss ... the 2nd comment should have been posted to another jira item, not this one.  I updated the comment.",,,,,,,,,,,,,,,,,,,,
Security-sensitive system chaincodes should not be callable from the outside,FAB-2997,15577,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ales,bmos299,bmos299,05/Apr/17 3:25 PM,03/Aug/17 6:43 AM,26/Apr/18 6:50 AM,19/Apr/17 9:06 PM,,,,,,,v1.0.0,,,fabric-crypto,,,,0,Security,,,,,,,,"I can query the chaincodes escc and vscc from the cli.  I suspect this is a security exposure. 
I opened this as medium, but it may be higher.  Murali suggest I assign to Alessandro.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzbt:kow,,Sprint 16 - Crypto,,,,,,aleksandar.likic@gmail.com,ales,angelo.decaro,bmos299,elli-androulaki,muralisr,,,,,master,,,true,"08/Apr/17 7:48 AM;ales;I'm preparing 3 change sets to fix this issue:
1) prevent system security sensitive system chaincodes from being invoked directly through a proposal
2) prevent system security sensitive system chaincodes from being invoked through a cc2cc invocation
3) expose through the shim a method that reveals to the chaincode developer which path was followed for that invocation - direct invocation through a proposal, cc2cc, internal invocation from the peer; this way, the chaincode developer may choose to only allow certain kinds of invocation

[~muralisr] [~binhn]: any feedback?","12/Apr/17 11:58 AM;angelo.decaro;[~ales][~ellaki][~muralisr][~binhn], I think this FAB is really critic and must be addressed asap. 
Point 3 is especially important for also for scc. For example, during invocation, cc2cc, etc, the peer invokes system chaincodes like LCCC to get information about the chaincode. In this case, LCCC should be able to recognize that the call is an internal one (coming from the peer) and it should just process it. 

[~ales], thanks for taking care of this.
","18/Apr/17 8:07 AM;elli-androulaki;Hi CRs addressing items (1) and (2) are there:

https://gerrit.hyperledger.org/r/#/c/7853/
https://gerrit.hyperledger.org/r/#/c/7849/

I think the first two parts are important. The third one I believe we can add later without impacting the tests of the entire infrastructure? [~binhn] [~muralisr] [~ales] [~adc], thoughts?","18/Apr/17 4:28 PM;elli-androulaki;So, after discussing with [~ales], we both agree that item (3) can be added later, and is associated more to the application level access control. Therefore this bit makes sense to be added with the invocation library post V1.0. 

Unless there are any objections, I will mark this item as ""done"" and create a new issue referring to work item (3) with fix-version v1.1.

[~binhn] [~muralisr] would you be fine with this?","18/Apr/17 9:27 PM;muralisr;[~ellaki]  unless we have specific need, keeping is simple and not give too many choices makes sense. Plus 3 is quite invasive at this stage IMO. Better leave it for investigation in 1.1 I think. In 1.0, if user doesn't want SCC to be accessed, he flags it as as such wholesale.","19/Apr/17 10:06 AM;elli-androulaki;Related CR: 
https://gerrit.hyperledger.org/r/#/c/7853/",,,,,,,,,,,,,,,,,,
make e2e test run from any directory,FAB-2994,15574,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jjjjibm,jimthematrix,jimthematrix,05/Apr/17 4:06 AM,03/May/17 9:03 PM,26/Apr/18 6:50 AM,12/Apr/17 7:49 PM,v1.0.0,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,,,,,,,,,right now due to file path handling issues the e2e test can only successfully run from the project root.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:zy,,Sprint 15 - SDK node,,,,,,jjjjibm,,,,,,,,,,master,,,true,"11/Apr/17 4:52 PM;jjjjibm;$ git log -1
commit 3f9fa0675f8ec48d58f68409d3d3c0d3a0cbbae9
Author: jjjjibm <jcwolf@us.ibm.com>
Date:   Tue Apr 11 12:46:19 2017 -0400

    node-SDK FAB-2994 make e2d test run from any directory

    I changed the pathname of mychannel.tx such that it is now
    calculated relative to __dirname, and normalized.

    Change-Id: I1f4eda2762b06e6d8aeef2a1dc85d9c35e19093d
    Signed-off-by: jjjjibm <jcwolf@us.ibm.com>

",11/Apr/17 4:53 PM;jjjjibm;https://gerrit.hyperledger.org/r/#/c/7939/,,,,,,,,,,,,,,,,,,,,,,
Constantly see warning - The primary peer must be on this chain's peer list ,FAB-2992,15572,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,cdaughtr,dshuffma,dshuffma,04/Apr/17 8:45 PM,27/May/17 6:01 AM,26/Apr/18 6:50 AM,27/May/17 6:01 AM,v1.0.0,,,,,,DUPLICATE,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"So I constantly get this message ""The primary peer must be on this chain\'s peer list"".  I don't think this check is right!  Here is the SDK code.

{code:javascript}
setPrimaryPeer(peer) {
		if(peer) {
			for (let i = 0; i < this._peers.length; i++) {
				if (this._peers[i] === peer) {               //<---- not what we want
					this._primary_peer = this._peers[i];
					return;
				}
			}
		}
		throw new Error('The primary peer must be on this chain\'s peer list');
	}
{code}

You are comparing 1 object to another... This isn't going to work out. You could change it to the peer's url and that would be enough for most things.  If we are super paranoid that the TLS settings have changed then the url check will miss that...  If this matters, you can JSON.stringify the objects and compare the strings, but order can be tricky. In practice order of the keys should be kept, but it may reshuffle in some bizarre scenario.  Therefore another idea would be to just concat all the fields that are important into 1 string and compare each string.

ie:

{code:javascript}
setPrimaryPeer(peer) {
		if(peer) {
			for (let i = 0; i < this._peers.length; i++) {
				if (buildStr(this._peers[i]) === buildStr(peer)) {
					this._primary_peer = this._peers[i];
					return;
				}
			}
		}
		throw new Error('The primary peer must be on this chain\'s peer list');
	}
function buildStr(obj){
     return obj.getUrl() + obj.mythicalGetPemAsStr();
}
{code}

I would think comparing URLs is good enough, but you guys might know better.

Currently its not a huge problem b/c it will throw the error and then default to peer[0] and that's the one I want anyway. But its in the logs. and not ideal.


",,,,,,,,,,,,,,,,FAB-2991,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:rhzi,,,,,,,,dshuffma,,,,,,,,,,,,,,25/May/17 11:29 PM;jimthematrix;[~cdaughtr] this should be resolved together with your work on FAB-2991,,,,,,,,,,,,,,,,,,,,,,,
fabric-peer container should not be used for CLI,FAB-2984,15564,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,greg.haskins,greg.haskins,greg.haskins,04/Apr/17 1:40 PM,26/May/17 6:13 PM,26/Apr/18 6:50 AM,26/May/17 6:13 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"The fabric-peer container was designed to be used as a lightweight container for running a peer node.  However, some docker-compositions have started using it to drive the ""peer chaincode"" type CLI commands.  This is not advised, as the environment is too stripped down to support things like chaincode development.  This will break as we move forward with tighter integration with chaincode development.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3095,0|i00uap:,,,,,,,,greg.haskins,muralisr,rameshthoomu,,,,,,,,master,,,true,04/Apr/17 1:50 PM;greg.haskins;https://gerrit.hyperledger.org/r/#/c/7681/,"04/Apr/17 1:51 PM;rameshthoomu;[~ghaskins] e2e CLI tests are using peer image in CLI container. If not fabric-peer image, which image fulfill CLI container needs. Could you please provide your inputs on how to fix this issue.. Thanks! ",04/Apr/17 3:06 PM;greg.haskins;testenv is probably more appropriate,"11/Apr/17 4:53 PM;greg.haskins;A better solution is probably to forego the container all together.  I would suggest we consider the following:

# Separate ""peer node start"" from all the other subcommands so that this is the only function for the ""peer"" binary.
# Create a new binary (""fabric-cli"", ""fabric-ctl"", etc) that implements the other subcommands (chaincode, channel, logging, etc)
   a)  Should ideally be buildable with minimal dependencies (e.g. ""go get ../fabric-cli"" should not need anything more than golang 1.7)
# Integrate configtxgen into the CLI as a subcommand",20/Apr/17 10:57 PM;muralisr;[~greg.haskins] +1 for 1 and 2... need to think about 3,,,,,,,,,,,,,,,,,,,
Broken links in docs due to code refactoring,FAB-2983,15563,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,04/Apr/17 12:05 PM,05/Apr/17 6:48 PM,26/Apr/18 6:50 AM,05/Apr/17 4:07 AM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,several methods have been moved from Chain.js to Client.js,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz8y:zz8,,Sprint 15 - SDK node,,,,,,,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Fabric CA Client configurations are ignored,FAB-2979,15559,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,biljana.lukovic,biljana.lukovic,biljana.lukovic,03/Apr/17 7:20 PM,15/Apr/17 12:04 PM,26/Apr/18 6:50 AM,15/Apr/17 12:04 PM,v1.0.0,,,,,,v1.0.0,,,fabric-sdk-go,,,,0,,,,,,,,,"MSP server URL always defaults to localhost even when a valid JSON configuration is provided.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ua1:,,,,,,,,biljana.lukovic,mastersingh24,,,,,,,,,master,,,true,15/Apr/17 12:04 PM;mastersingh24;[~biljana.lukovic]  Please make sure to assign issues to yourself if you are going to work on them and then please make sure to update the status,,,,,,,,,,,,,,,,,,,,,,,
Duplicate affiliations are created in the db every time fabric-ca server is started,FAB-2976,15556,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,aambati,aambati,03/Apr/17 3:59 PM,22/May/17 6:07 PM,26/Apr/18 6:50 AM,22/May/17 6:07 PM,v1.0.0,,,,,,,,,fabric-ca,,,,0,,,,,,,,,Duplicate affiliations are created in the Affiliations table every time fabric-ca server is started. It does not check if an affiliation already exists before add it to the db.  This is a problem because the DB will infinitely grow until it finally fails from running out of disk space.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00u9d:,,Sprint 16 - Membership Service,,,,,,aambati,,,,,,,,,,master,,,true,18/Apr/17 7:13 PM;aambati;https://gerrit.hyperledger.org/r/7725,,,,,,,,,,,,,,,,,,,,,,,
Java e2e tests are failing on latest commits,FAB-2973,15553,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rickr,rameshthoomu,rameshthoomu,03/Apr/17 2:36 PM,10/Apr/17 11:45 AM,26/Apr/18 6:50 AM,10/Apr/17 11:45 AM,,,,,,,,,,fabric-sdk-java,,,,0,,,,,,,,,"Observed java e2e tests are failing on latest fabric, fabric-ca and fabric-sdk-java. 

{code:java}
12:44:50 2017-04-03 12:44:50 ERROR Chain:1664 - Sending proposal to peer0 failed because of gRPC failure=Status{code=UNKNOWN, description=invalid chaincode name example_cc.go, cause=null}
12:44:50 java.lang.Exception: io.grpc.StatusRuntimeException: UNKNOWN: invalid chaincode name example_cc.go
{code}

{code:java}
CA_COMMIT=77dc0ce
FABRIC_COMMIT=fb7727d
JAVA_SDK_COMMIT_LEVEL=315420e

{code}

Build Reference: 
https://jenkins.hyperledger.org/sandbox/job/e2e_java_x86_64/4/consoleFull

Docker Log File: https://jenkins.hyperledger.org/sandbox/job/e2e_java_x86_64/4/artifact/gopath/src/github.com/hyperledger/fabric-sdk-java/src/test/fixture/sdkintegration/dockerlogfile.log",,,,,,,,,,,,,,,,,FAB-2754,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00u8p:,,,,,,,,rameshthoomu,rickr,,,,,,,,,,,,,03/Apr/17 2:45 PM;rickr;Has a fix for this,,,,,,,,,,,,,,,,,,,,,,,
Error message gives no indication of why,FAB-2971,15551,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,rickr,rickr,03/Apr/17 12:15 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,12/Apr/17 9:34 PM,v1.0.0,,,,,,v1.0.0,,,fabric-endorser,,,,0,,,,,,,,,"Reproduce by installing CC with a period in the name.

code=UNKNOWN, description=invalid chaincode name example_cc.go, cause=null

?why is it invalid ?
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz7e:r,,Sprint 16  - Endorser,,,,,,rickr,wlahti,,,,,,,,,master,,,true,11/Apr/17 3:16 PM;wlahti;https://gerrit.hyperledger.org/r/#/c/7717/ (awaiting code review) will improve the error messages for invalid chaincode names/versions. ,12/Apr/17 9:34 PM;wlahti;The CR has been merged. ,,,,,,,,,,,,,,,,,,,,,,
TestConnectToAnchorPeers sometime times out,FAB-2965,15545,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,gennadyl,C0rWin,C0rWin,02/Apr/17 7:01 PM,18/May/17 2:04 PM,26/Apr/18 6:50 AM,18/May/17 2:04 PM,,,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,ci_failure,gossip,test,,,,,"https://jenkins.hyperledger.org/job/fabric-verify-x86_64/9030/consoleFull
https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10431/consoleFull",,,,,,,,,,,,,,,,,FAB-3109,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|hzzz7j:,,Sprint 15 - Gossip,Sprint 16 - Gossip,,,,,C0rWin,gennadyl,yacovm,,,,,,,,,,,,26/Apr/17 3:22 PM;yacovm;https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10554/console,26/Apr/17 6:54 PM;yacovm;https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10569/console,"26/Apr/17 7:49 PM;gennadyl;[~yacovm] I have enough of them now, you don't have to add... ",18/May/17 2:04 PM;C0rWin;I believe that test failure relates to the FAB-3109 and will be fixed ones CR-9199 (https://gerrit.hyperledger.org/r/#/c/9199/) will be merged. As for now marking current item as DONE.,,,,,,,,,,,,,,,,,,,,
Gossip: do not relay any messages to other orgs if the peer has no external endpoint,FAB-2963,15543,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,02/Apr/17 3:54 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,23/Apr/17 10:41 AM,,,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,ga,gossip,,,,,,"Currently, peers do not forward membership information of peers that have no external endpoint to outside of their organization.
However, identities, and stateInfo messages are still relayed.

It makes no sense that a peer of an outside organization would know about a peer's identity, and ledger height (of channels) but the only thing it will not know is its internal address.

Therefore, we should take care that *any* information about a peer that has no external endpoint is not relayed to other orgs. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|hzzz9e:r,,Sprint 16 - Gossip,,,,,,ChristopherFerris,yacovm,,,,,,,,,master,,,true,22/Apr/17 12:20 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8091/,,,,,,,,,,,,,,,,,,,,,,,
Do not expose channel names in plaintext in gossip stateInfo messages,FAB-2962,15542,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,02/Apr/17 3:46 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,14/Apr/17 9:01 PM,,,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,ga,gossip,,,,,,"There is a security/confidentiality benefit if it will be possible to not expose the channel name when a peer sends a StateInfo message to peers.

I propose to concatenate the PKI-ID with the channel name, and then hash it. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00u75:,,Sprint 16 - Gossip,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"[fabric] Makefile apparently makes coucbdb, but the prologue doesn't say so",FAB-2953,15533,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,jjjjibm,jjjjibm,31/Mar/17 2:53 PM,02/Apr/17 11:40 AM,26/Apr/18 6:50 AM,02/Apr/17 11:40 AM,,,,,,,v1.0.0-alpha1,,,fabric-baseimage,,,,0,,,,,,,,,"A RocketChat comment in the fabric-sdk-node forum indicates Makefile for directory $GOPATH/src/gitub.com/hyperledger/fabric  now includes a coucbdb.rule.

Here is the comment:
_also the change to fabric-couchdb was intentional (so it'll work on s390 architecture) but i neglected to update the README: {color:#d04437}you need to run `make couchdb` in fabric {color}in addition to `make docker`
_
And here is what happens when you try it:

{color:#59afe1}ibmadmin@jcwNodeSDK:~/work/src/github.com/hyperledger/*fabric*$ make couchdb
*make: Nothing to be done for `couchdb'.
*ibmadmin@jcwNodeSDK:~/work/src/github.com/hyperledger/fabric$
{color}

However, when I inspected the Makefile prologue for more information about making couchcb, it had nothing.

Here is the fabric/Makefile prologue: 

#_ -------------------------------------------------------------
# This makefile defines the following targets
#
#   - all (default) - builds all targets and runs all tests/checks
#   - checks - runs all tests/checks
#   - peer - builds a native fabric peer binary
#   - orderer - builds a native fabric orderer binary
#   - unit-test - runs the go-test based unit tests
#   - test-cmd - generates a ""go test"" string suitable for manual customization
#   - behave - runs the behave test
#   - behave-deps - ensures pre-requisites are available for running behave manually
#   - gotools - installs go tools like golint
#   - linter - runs all code checks
#   - native - ensures all native binaries are available
#   - docker[-clean] - ensures all docker images are available[/cleaned]
#   - peer-docker[-clean] - ensures the peer container is available[/cleaned]
#   - orderer-docker[-clean] - ensures the orderer container is available[/cleaned]
#   - protos - generate all protobuf artifacts based on .proto files
#   - clean - cleans the build area
#   - dist-clean - superset of 'clean' that also removes persistent state
#   - unit-test-clean - cleans unit test state (particularly from docker)
# 
PROJECT_NAME   = hyperledger/fabric
BASE_VERSION   = 1.0.0
IS_RELEASE     = false

_","fabric: commit 7da5f5da97456e7eb0b33e0a2271c3ca979e9846
Running Ubuntu 14 on a vlaunch VM",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00u55:,,,,,,,,jjjjibm,mastersingh24,,,,,,,,,,,,,31/Mar/17 2:58 PM;jjjjibm;Assigning to Greg for screening since I know he worked on Makefile at one point.,"02/Apr/17 11:39 AM;mastersingh24;I am going to close this as I just went through and everything works.  The only thing missing is that we don't list the ""couchdb"" target in the list in the Makefile.

But {{make docker}} actually does build fabric-couchdb 
If you run {{make docker}} first, then fabric-couchdb already exists and {{make couchdb}} correctly returns with {{make: Nothing to be done for `couchdb'.}}",,,,,,,,,,,,,,,,,,,,,,
CONFIGTX_ORDERER_KAFKA_BROKERS can't override the value in configtx.yaml,FAB-2952,15532,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,daijianw,daijianw,31/Mar/17 9:43 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,10/May/17 6:22 PM,v1.0.0-alpha1,,,,,,WON'T FIX,,,fabric-orderer,,,,0,kafka,,,,,,,,"Follow the https://github.com/hyperledger/fabric/blob/master/examples/e2e_cli/end-to-end.rst to setup up network. When setting orderer type to kafka,  the orderer can't connect to kafka cluster. 

The error output from ""docker logs orderer0"":
2017-03-29 13:08:50.312 UTC [orderer/kafka] newProducer -> DEBU 13b Connecting to Kafka cluster: [127.0.0.1:9092]
panic: Failed to create Kafka producer: kafka: client has run out of available brokers to talk to (Is your cluster reachable?)

In docker-compose.yaml,  orderer section, already set environment 
- CONFIGTX_ORDERER_KAFKA_BROKERS=[kafka1:9092]

The fabric version is 1.0.0-alpha.

",,,,,,,,,,,,,,,,,,,,31/Mar/17 9:44 AM;daijianw;configtx.yaml;https://jira.hyperledger.org/secure/attachment/10637/configtx.yaml,31/Mar/17 9:44 AM;daijianw;docker-compose.yaml;https://jira.hyperledger.org/secure/attachment/10636/docker-compose.yaml,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00s7z:,,,,,,,,daijianw,kchristidis,,,,,,,,,,,,,"10/May/17 6:21 PM;kchristidis;Jian, thank you for reporting this and submitting all the relevant details. This doesn't happen often ;)

So, the error you're seeing is expected, but I can see why it threw you off.

Let me give the step-by-step of what we're trying to achieve:
 # We want to run the E2E test with the Kafka-based ordering service
 # So, we need to create a genesis block for the ordering service that sets the ordering type to ""kafka"", and encodes the right addresses for the Kafka brokers.
 # The E2E script runs (via the generateArtifacts shell script) configtxgen with the TwoOrgsOrdererGenesis profile
 # Then brings up the network defined the Docker Compose YAML file

Setting the CONFIGTX_* env var on the orderer container (as you did) modifies the ""configtx.yaml"" that the orderer container sees, but the thing is that the orderer does not even care about this configuration at this point. The orderer reads the configuration from the genesis block that was created in step 3.

Setting any CONFIGTX_ env var makes sense only if the genesis method for the orderer is set to provisional, i.e. the genesis block is generated dynamically when the orderer launches. This is not the case here, since we are generating the genesis block in advance.

So, the TL;DR version:

This ENV var does override the value in configtx.yaml, but you are overriding a file that the orderer does not look into.

In order to achieve what you want, you'd modify the genesis block that configtxgen generates, in a manner similar to this one (just an example): https://github.com/kchristidis/fabric/commit/7f83f40fdd8c5cd0a837a820f728f3b864e1cce2","10/May/17 6:22 PM;kchristidis;I am going to mark this as DONE. If there are follow-up questions, please let me know.","11/May/17 2:11 AM;daijianw;Hi Kostas,

Thanks for clarifying the usage. I'm OK to close this issue.",,,,,,,,,,,,,,,,,,,,,
It must be an absolute path in gotools/Makefile ,FAB-2950,15530,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,hanwei,hanwei,hanwei,31/Mar/17 8:14 AM,13/Apr/17 1:00 AM,26/Apr/18 6:50 AM,13/Apr/17 1:00 AM,,,,,,,v1.0.0,,,fabric-devenv,,,,0,v1.0,,,,,,,,"root@ceph:/opt/go/src/github.com/hyperledger/fabric# make gotools
mkdir -p build/bin
cd gotools && make install BINDIR=/opt/go//bin
make[1]: Entering directory '/opt/go/src/github.com/hyperledger/fabric.git/gotools'
make[2]: Entering directory '/opt/go/src/github.com/hyperledger/fabric.git/gotools'
Building github.com/golang/lint/golint -> golint
cannot install, GOBIN must be an absolute path
Makefile:47: recipe for target 'gotool.golint' failed
make[2]: *** [gotool.golint] Error 1
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00u4h:,,,,,,,,hanwei,,,,,,,,,,master,,,true,03/Apr/17 7:31 AM;hanwei;https://gerrit.hyperledger.org/r/#/c/7607/,,,,,,,,,,,,,,,,,,,,,,,
Fix leader election test intermittent CI failures.,FAB-2944,15523,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,yacovm,yacovm,30/Mar/17 4:14 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,02/Apr/17 7:00 PM,,,,,,,,,,,,,,0,,,,,,,,,"Since call of leader election change status has been changed there are few intermittent failures in CI, in order to prevent future failures need to switch back to synchronous call. Later logic should be revisited and refactored to allow async mode of operation.

[~gennadyl] [~C0rWin]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00u2x:,,,,,,,,C0rWin,yacovm,,,,,,,,,master,,,true,"01/Apr/17 6:50 PM;C0rWin;Meanwhile I've pushed a CR which simply makes callback calls synchronous, to stop CI from failing due to the test. ",,,,,,,,,,,,,,,,,,,,,,,
Committer implementation reports an error on failure of publishing a block committing event.,FAB-2943,15522,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,30/Mar/17 11:50 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,11/Apr/17 8:27 PM,,,,,,,v1.0.0,,,fabric-peer,,,,0,beta,ga,,,,,,,"Scenario: if from some reason, an events consumer is connected to the peer and subscribes to block events, and from some reason- the publishing to that consumer by the peer fails, the peer logs the following output:

2017-03-30 07:26:43.881 EDT [committer] Commit -> ERRO d10dc Error sending block event could not send the blocking event
2017-03-30 07:26:43.881 EDT [gossip/state] commitBlock -> ERRO d10dd Got error while committing(Error sending block event could not send the blocking event)

The code of the committer that is relevant to the section is below:
{code}
func (lc *LedgerCommitter) Commit(block *common.Block) error {
	// Validate and mark invalid transactions
	logger.Debug(""Validating block"")
	if err := lc.validator.Validate(block); err != nil {
		return err
	}

	if err := lc.ledger.Commit(block); err != nil {
		return err
	}

	// send block event *after* the block has been committed
	if err := producer.SendProducerBlockEvent(block); err != nil {
		logger.Errorf(""Error sending block event %s"", err)
		return fmt.Errorf(""Error sending block event %s"", err)
	}

	return nil
}
{code}

When this function fails due to inability of publishing a block event, an error is returned to the gossip state transfer layer, and the ledger height gossiped to peers isn't updated.
In my opinion, the committer Commit function shouldn't return an error if it can't publish a block event to a connected events client. 

[~muralisr]
[~binhn]
[~C0rWin]
[~mastersingh24]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|hzzzhy:zz9xr6zzi,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
CouchDB image used by node SDK's docker-compose does not run on s390 architecture,FAB-2934,15513,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,29/Mar/17 8:10 PM,30/Mar/17 5:59 PM,26/Apr/18 6:50 AM,30/Mar/17 5:59 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhq:zwif,,,,,,,,,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Improve unit test coverage:  fabric-ca-client.js,FAB-2930,15509,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jjjjibm,jjjjibm,jjjjibm,29/Mar/17 7:25 PM,04/Apr/17 6:50 PM,26/Apr/18 6:50 AM,04/Apr/17 6:50 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,Adding more unit test coverage for classes  FabricCAClient and FabricCAServer. ,Ubuntu vlaunch VM,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00u01:,,,,,,,,jjjjibm,,,,,,,,,,master,,,true,"30/Mar/17 11:10 PM;jjjjibm;commit 51e6974e8dd45ffe8fa7d420dd789c3aaeb29091
Author: jjjjibm <jcwolf@us.ibm.com>
Date:   Thu Mar 30 18:57:45 2017 -0400

    node-SDK FAB-2930 UT coverage -- fabric-ca-client

    Add test cases to drive uncovered paths in
    FabricCAClientImpl.js: getCrypto(), enroll(), revoke(),
    _parseURL(), toString().
    Add tlsOptions to constructor tests.

    Change-Id: I3e215f43a8fd0b40e3ed373132191a239e28eb12
    Signed-off-by: jjjjibm <jcwolf@us.ibm.com>
","30/Mar/17 11:59 PM;jjjjibm;commit 0779cf05234309eb140cfd29ad8122c6b513be46
Author: jjjjibm <jcwolf@us.ibm.com>
Date:   Thu Mar 30 18:57:45 2017 -0400

    node-SDK FAB-2930 UT coverage -- fabric-ca-client

    Add test cases to drive uncovered paths in
    FabricCAClientImpl.js: getCrypto(), enroll(), revoke(),
    _parseURL(), toString().
    Add tlsOptions to constructor tests.

    Change-Id: I3e215f43a8fd0b40e3ed373132191a239e28eb12
    Signed-off-by: jjjjibm <jcwolf@us.ibm.com>
",,,,,,,,,,,,,,,,,,,,,,
node sdk tests are failing in Z (s390x) build machines,FAB-2921,15499,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,rameshthoomu,rameshthoomu,29/Mar/17 2:51 PM,02/Apr/17 3:17 PM,26/Apr/18 6:50 AM,02/Apr/17 3:17 PM,,,,,,,,,,,,,,0,,,,,,,,,"Observed node sdk tests are failing in z (s390x) build machines. 
Also observed couchdb container is not starting
Below is the error log

{code:java}
test step# 442 Error initializing CouchDB KeyValueStore. Exiting

{code}
{code:java}
15:49:27 # Use FabricCAServices with a CouchDB KeyValueStore
15:49:27 # Cleanup of existing my_member_db returned false
15:49:27 # Initialize the CouchDB KeyValueStore
15:49:27 not ok 442 Error initializing CouchDB KeyValueStore. Exiting.
15:49:27   ---
15:49:27     operator: fail
15:49:27     at: process._tickDomainCallback (internal/process/next_tick.js:129:7)
15:49:27 error: [couchdb-fabricca]: Error: Error creating my_member_db database to store membership data: Error: connect ECONNREFUSED 127.0.0.1:5984
{code}

*Jenkins Build log:* https://jenkins.hyperledger.org/view/fabric-sdk-node/job/fabric-sdk-node-merge-s390x/67/consoleFull
*Docker log file:* https://jenkins.hyperledger.org/view/fabric-sdk-node/job/fabric-sdk-node-merge-s390x/67/artifact/gopath/src/github.com/hyperledger/fabric-sdk-node/test/fixtures/dockerlogfile.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00txt:,,,,,,,,rameshthoomu,,,,,,,,,,,,,,02/Apr/17 3:17 PM;rameshthoomu;fix has been provided to pull hyperledger/fabric-couchdb images. ,,,,,,,,,,,,,,,,,,,,,,,
OSX local run chaincode -> Killed: 9,FAB-2910,15486,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,baohua,Lin-YiTang,Lin-YiTang,28/Mar/17 6:52 PM,11/Jul/17 6:12 PM,26/Apr/18 6:50 AM,01/Apr/17 9:54 AM,,,,,,,,,,,,,,0,,,,,,,,,"OSX local run chaincode -> Killed: 9 
build peer ./peer -> Killed: 9 
build configtxgen ./configtxgen  -> Killed: 9 
build about fabirc run the program on MacOS -> killed 9
Maybe is my problem",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzza:6wqw7c,,Sprint 4,,,,,,Lin-YiTang,sanchezl,,,,,,,,,,,,,"04/Apr/17 1:31 PM;sanchezl;Native binaries are broken on macOS once you update to XCode 8.3 (check via {{xcodebuild --version}} command). As a workaround, edit the {{build/bin/%}} target in the fabric {{Makefile}}, changing {{""$(GO_LDFLAGS)""}} in the recipe to {{""$(GO_LDFLAGS) -s""}}.",,,,,,,,,,,,,,,,,,,,,,,
e2e_cli marble invoke runs ok even though peer not installed chaincode,FAB-2905,15481,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,AdnanChoudhury,bh4rtp,bh4rtp,28/Mar/17 3:09 PM,10/May/17 4:35 PM,26/Apr/18 6:50 AM,09/May/17 9:14 AM,v1.0.0,,,,,,v1.0.0,,,fabric-ledger,,,24/Mar/17 12:00 AM,0,endorser,invoke,marble,peer,,,,,"Firstly, the e2e_cli default example runs ok. We built the marble02 test-case based on network_setup.sh, docker-compose-no-tls.yaml, and scripts/script.sh. And the corresponding test-case files are named with marbles_network_setup.sh, docker-compose-marbles-no-tls.yaml, and scripts/myscript.sh. 

It needs to mention that the network automatically built by marbles_network_setup.sh can successfully run the marbles02 chaincode examples that are given on the top of marbles_chaincode.go ([https://github.com/hyperledger/fabric/blob/master/examples/chaincode/go/marbles02/marbles_chaincode.go]).

The test steps are as follows.
1. copy three attached files to e2e_cli
2. copy marble02 directory from examples/chaincode/go to e2e_cli/examples/chaincode/go
3. run ./marbles_network_setup.sh up eprich1
4. run docker exec -it cli bash
5. run ./scripts/myscript.sh eprich1

The myscript.sh will do:
1) install chaincode marbles02 on peer0
2) install and instantiate chaincode marbles02 on peer3, the endorsement policy is specified as -P ""OR ('Org0MSP.member', 'Org1MSP.member')""
3) invoke initMarble runs ok on peer2
4) query fails with error endorsing on peer2. The error message shows:
Error: Error endorsing query: rpc error: code = 2 desc = Error executing chaincode: Could not get deployment transaction from LCCC for marbles:v0 - Get ChaincodeDeploymentSpec for marbles/eprich1 from LCCC error: transaction not found marbles/eprich1 

Why does invoke initMarble on peer2 run ok? Is query fails correct?",,,,,,,,,,,,,,,,,,,,28/Mar/17 3:07 PM;bh4rtp;docker-compose-marbles-no-tls.yaml;https://jira.hyperledger.org/secure/attachment/10625/docker-compose-marbles-no-tls.yaml,28/Mar/17 3:07 PM;bh4rtp;marbles_network_setup.sh;https://jira.hyperledger.org/secure/attachment/10624/marbles_network_setup.sh,20/Apr/17 3:39 AM;bh4rtp;myscript.sh;https://jira.hyperledger.org/secure/attachment/10672/myscript.sh,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz76:zzzs6,,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,AdnanChoudhury,bh4rtp,denyeart,,,,,,,,,,,,"29/Mar/17 12:38 AM;bh4rtp;Keeping other steps unchanged except step 2), both invoke and query on peer2 will fail if using endorsement policy -P ""AND ('Org0MSP.member', 'Org1MSP.member')"".",11/Apr/17 12:08 PM;denyeart;[~AdnanChoudhury] Could you assess this one? Can you reproduce? Do you have an explanation?,20/Apr/17 3:39 AM;bh4rtp;myscript.sh is updated.,,,,,,,,,,,,,,,,,,,,,
"Leader election unit tests fails CI, wrong leadership selection.",FAB-2901,15475,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,gennadyl,C0rWin,C0rWin,27/Mar/17 9:54 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,02/Apr/17 6:12 PM,,,,,,,,,,fabric-gossip,,,,0,,,,,,,,,"{code}
05:38:21 unit-tests_1  | ok  	github.com/hyperledger/fabric/gossip/comm/mock	0.045s	coverage: 82.4% of statements
05:38:21 unit-tests_1  | ?   	github.com/hyperledger/fabric/gossip/common	[no test files]
05:38:41 unit-tests_1  | ok  	github.com/hyperledger/fabric/gossip/discovery	7.573s	coverage: 83.2% of statements
05:39:02 unit-tests_1  | --- FAIL: TestPartition (3.10s)
05:39:02 unit-tests_1  | 	assertions.go:219: 
                        
	Error Trace:	election_test.go:330
05:39:02 unit-tests_1  | 		
	Error:		Should be true
05:39:02 unit-tests_1  | 		
	Messages:	Leadership callback result is wrong for p0
05:39:02 unit-tests_1  | 		
05:39:02 unit-tests_1  | FAIL
05:39:02 unit-tests_1  | coverage: 94.8% of statements
05:39:02 unit-tests_1  | FAIL	github.com/hyperledger/fabric/gossip/election	7.153s
05:39:02 unit-tests_1  | error: exit status 1
05:39:02 unit-tests_1  | panic: EOF
05:39:02 unit-tests_1  | 
05:39:02 unit-tests_1  | goroutine 1 [running]:
05:39:02 unit-tests_1  | panic(0x4daca0, 0xc42006c020)
05:39:02 unit-tests_1  | 	/opt/go/src/runtime/panic.go:500 +0x1a1
05:39:02 unit-tests_1  | main.main()
05:39:02 unit-tests_1  | 	/opt/gotools/obj/gopath/src/github.com/AlekSi/gocov-xml/gocov-xml.go:60 +0x15fd
05:39:03 unittest_unit-tests_1 exited with code 2
05:39:03 Stopping unittest_vp_1 ... 
05:39:03 Stopping couchdb ... 
05:39:04 
Stopping couchdb ... done

Stopping unittest_vp_1 ... done
Aborting on container exit...
{code}

Full log could be seen here:
https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8889/console
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz9d:,,Sprint 14 - Gossip,Sprint 15 - Gossip,,,,,C0rWin,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
SDK Go - TLS Certificate location under GOPATH,FAB-2895,15469,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,firas.qutishat,firas.qutishat,27/Mar/17 4:32 PM,18/Apr/17 11:29 PM,26/Apr/18 6:50 AM,18/Apr/17 11:29 PM,v1.0.0,,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzck:9,,,,,,,,firas.qutishat,mastersingh24,,,,,,,,,master,,,true,02/Apr/17 11:49 AM;mastersingh24;[~firas.qutishat] - what exactly are you trying to say / ask for / do here?,"03/Apr/17 1:32 PM;firas.qutishat;[~mastersingh24] Go-client has integration test with tls enabled so we need to provide the absolute path for tls Certificate which currently inside the fixture folder in go-client project. But we can't provide the absolute path because each machine has different GOPATH so when go-client read the certificate location through VIPER it check if variable $GOPATH exist and replace with value from os.Getenv(""GOPATH"") in this way we provide dynamic absolute path to run the integration test in different machine.",,,,,,,,,,,,,,,,,,,,,,
Build failures with log config issue in Jenkins (CI),FAB-2890,15464,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,27/Mar/17 1:44 PM,18/Aug/17 2:22 PM,26/Apr/18 6:50 AM,02/Apr/17 3:14 PM,,,,,,,,,,,,,,0,build-system,,,,,,,,"noticed builds are failing with below error **jenkins-log-archives-settings but can not find the config**

{code:java}
04:23:57 ERROR: your Apache Maven build is setup to use a config with id jenkins-log-archives-settings but can not find the config
04:23:57 ERROR: Build step failed with exception
04:23:57 java.lang.IllegalStateException: your Apache Maven build is setup to use a config with id jenkins-log-archives-settings but can not find the config
04:23:57 	at org.jenkinsci.plugins.configfiles.maven.job.MvnSettingsProvider.supplySettings(MvnSettingsProvider.java:76)
04:23:57 	at jenkins.mvn.SettingsProvider.getSettingsFilePath(SettingsProvider.java:53)
04:23:57 	at jenkins.mvn.SettingsProvider.getSettingsRemotePath(SettingsProvider.java:70)
04:23:57 	at hudson.tasks.Maven.perform(Maven.java:331)
04:23:57 	at org.jenkinsci.plugins.postbuildscript.PostBuildScript.processBuildSteps(PostBuildScript.java:204)
04:23:57 	at org.jenkinsci.plugins.postbuildscript.PostBuildScript.processScripts(PostBuildScript.java:143)
04:23:57 	at org.jenkinsci.plugins.postbuildscript.PostBuildScript._perform(PostBuildScript.java:105)
04:23:57 	at org.jenkinsci.plugins.postbuildscript.PostBuildScript.perform(PostBuildScript.java:85)
04:23:57 	at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:20)
04:23:57 	at hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild.java:779)
04:23:57 	at hudson.model.AbstractBuild$AbstractBuildExecution.performAllBuildSteps(AbstractBuild.java:720)
04:23:57 	at hudson.model.Build$BuildExecution.post2(Build.java:185)
04:23:57 	at hudson.model.AbstractBuild$AbstractBuildExecution.post(AbstractBuild.java:665)
04:23:57 	at hudson.model.Run.execute(Run.java:1753)
04:23:57 	at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:43)
04:23:57 	at hudson.model.ResourceController.execute(ResourceController.java:98)
04:23:57 	at hudson.model.Executor.run(Executor.java:404)
04:23:57 Build step 'Execute a set of scripts' marked build as failure
04:23:57 Archiving artifacts
04:23:58 Recording fingerprints
04:23:58 Finished: FAILURE
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00tqh:,,,,,,,,rameshthoomu,,,,,,,,,,,,,,03/May/17 6:29 PM;rameshthoomu;this issue is fixed changing the configuration in Jenkins master,,,,,,,,,,,,,,,,,,,,,,,
Different chaincodes could be installed on two peers with same chaincode name on the same channel,FAB-2888,15462,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,fennelD7,fennelD7,27/Mar/17 4:19 AM,11/Apr/17 7:30 PM,26/Apr/18 6:50 AM,11/Apr/17 7:30 PM,v1.0.0,v1.0.0-alpha1,,,,,v1.0.0,,,fabric-endorser,,,,0,,,,,,,,," !image-2017-03-27-12-15-50-566.png|thumbnail! 

I found that two different chaincodes could both be installed successfully on two peers (same chaincode name and channel).
As I tested with example02 and example02_fake, chaincode installed on peer0 always dominate, no matter the sequence they were installed and instantiated. 
Logs attached. ",,,,,,,,,,,,,,,,,,,,27/Mar/17 4:15 AM;fennelD7;image-2017-03-27-12-15-50-566.png;https://jira.hyperledger.org/secure/attachment/10610/image-2017-03-27-12-15-50-566.png,27/Mar/17 3:27 AM;fennelD7;log1_fake_succeed.txt;https://jira.hyperledger.org/secure/attachment/10612/log1_fake_succeed.txt,27/Mar/17 3:27 AM;fennelD7;log2_example02_succeed.txt;https://jira.hyperledger.org/secure/attachment/10611/log2_example02_succeed.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhy:zz9xr6zz,,,,,,,,denyeart,fennelD7,muralisr,,,,,,,,,,,,"27/Mar/17 3:15 PM;muralisr;[~fennelD7] Currently we don't link the chaincode that's installed against the chaincode that's instantiated.  This will be done as part of the ""packaging"" work described in https://jira.hyperledger.org/browse/FAB-2859.

The instantiation record for the chaincode will live on the channel ledger. The record will contain the hash of the installed chaincode package (among other things) which will make sure that ""example02_fake"" will not be brought up on a peer from its installed package when ""example02"" was instantiated on the channel.","28/Mar/17 1:45 AM;fennelD7;Srinivasan Muralidharan, ""The instantiation record for the chaincode will live on the channel ledger"", this is all I want to know. Thank you!",11/Apr/17 7:29 PM;denyeart;Covered by FAB-2859. Please re-open if there is still an issue after testing FAB-2859.,,,,,,,,,,,,,,,,,,,,,
Invoking chaincode returns endorsing error when couchdb enabled,FAB-2876,15449,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,pd93,pd93,24/Mar/17 5:17 PM,09/Apr/17 2:42 PM,26/Apr/18 6:50 AM,24/Mar/17 8:28 PM,v1.0.0,v1.0.0-alpha1,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,,"*Error*

{color:red}{code}Error: Error endorsing invoke: rpc error: code = 2 desc = Unknown error{code}{color}

*Solution*

This turned out to be an uncaught chaincode error. If you're seeing this error. Make sure you're outputting errors in your chaincode with {code}fmt.Print(err){code}. You can then view the errors by checking your chaincode logs: {code}docker logs <chaincode_container>{code}

*Steps to Reproduce*

1 - Set up a directory structure like this:
{code}
- chaincode
    - chaincode.go
- crypto
- docker
    - docker-compose.yml (using attached docker-compose.yml)
- gen
{code}

2 - Generate crypto material using the cryptogen tool
{code}cryptogen -peerOrgs 1 -peersPerOrg 4{code}
(Rename generated folder to ""crypto"" to match directory structure)

3 - Generate orderer.block and channel.tx using the configtxgen tool (with attached configtx.yaml)
{code}
configtxgen -profile EQ -channelID sysch -outputBlock ./gen/orderer.block
configtxgen -profile EQ -channelID mych -outputCreateChannelTx ./gen/channel.tx
{code}

4 - {code}docker-compose up -d{code}

5 - Run the following commands from the cli container
{code}
CORE_PEER_LOCALMSPID=""OrdererOrg""
CORE_PEER_MSPCONFIGPATH=""$MNT/crypto/ordererOrgs/ordererOrg/orderer""

peer channel create -o orderer:7050 -c mych -f channel.tx

# TODO: Uncomment when name resolution works again
#CORE_PEER_ADDRESS=""peer0:7051""
CORE_PEER_ADDRESS=""172.18.0.5:7051""
CORE_PEER_LOCALMSPID=""Org1""
CORE_PEER_MSPCONFIGPATH=""$MNT/crypto/peerOrgs/Org1/peers/peer0""

peer channel join -b mych.block

peer chaincode install -o orderer:7050 -n mycc -v 0.1 -p mnt/chaincode

peer chaincode instantiate -o orderer:7050 -C mych -n mycc -v 0.1 -p mnt/chaincode -c '{""Args"":[""init""]}' -P ""OR ('$CORE_PEER_LOCALMSPID.member')""

# Error occurs here
peer chaincode invoke -o orderer:7050 -C mych -n mycc -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}'
{code} ",,,,,,,,,,,,,,,,,,,,24/Mar/17 5:17 PM;pd93;configtx.txt;https://jira.hyperledger.org/secure/attachment/10607/configtx.txt,24/Mar/17 5:17 PM;pd93;docker-compose.txt;https://jira.hyperledger.org/secure/attachment/10608/docker-compose.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00tnd:,,,,,,,,pd93,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Failing behave scenarios/features on ppc64le,FAB-2873,15446,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,harsha544,harsha544,24/Mar/17 11:59 AM,14/Apr/17 12:36 AM,26/Apr/18 6:50 AM,14/Apr/17 12:36 AM,v1.0.0,,,,,,v1.0.0,,,fabric-build,,,,0,,,,,,,,,"Evaluating behave tests on master code, the 4 x CouchDB scenario of bootstrap.feature is failing https://github.com/hyperledger/fabric/blob/master/bddtests/features/bootstrap.feature#L283

    Given user ""dev0Org0"" gives ""genesisBlockForMyNewChannel"" to user ""dev0Org1""                                                                                                                                                                     # steps/bootstrap_impl.py:331 0.000s
    When user ""dev0Org0"" using cert alias ""dev0Org0App1"" requests to join channel using genesis block ""genesisBlockForMyNewChannel"" on peers with result ""joinChannelResult""                                                                         # steps/bootstrap_impl.py:256 0.325s
      | Peer  |
      | peer0 |
      | peer1 |
      Traceback (most recent call last):
        File ""/root/Envs/behave_venv2/local/lib/python2.7/site-packages/behave/model.py"", line 1456, in run
          match.run(runner.context)
        File ""/root/Envs/behave_venv2/local/lib/python2.7/site-packages/behave/model.py"", line 1903, in run
          self.func(context, *args, **kwargs)
        File ""steps/bootstrap_impl.py"", line 274, in step_impl
          resultsDict =  dict(zip(endorsers, [respFuture.result() for respFuture in proposalResponseFutures]))
        File ""/root/Envs/behave_venv2/local/lib/python2.7/site-packages/grpc/_channel.py"", line 295, in result
          raise self
      _Rendezvous: <_Rendezvous of RPC that terminated with (StatusCode.UNAVAILABLE, Connect Failed)>

      Captured stdout:
      Will copy gensisiBlock over at this point
      ipAddress in getABStubForComposeService == 172.20.0.3
      Returning GRPC for address: 172.20.0.3
      dev0Org0 received reply: status: SUCCESS
      , counter = 1
      Done
      Start and end = 0/0

      SeekInfo = start {
        specified {
        }
      }
      stop {
        specified {
        }
      }
      behavior: FAIL_IF_NOT_READY


      Done receiving blocks
      Returning GRPC for address: 172.20.0.7
      Returning GRPC for address: 172.20.0.9

```

docker ps -a shows, none of the containers are in exit state
And here's what I see inside the newly spawned peer-container :-

```
2017-03-23 14:54:26.098 UTC [couchdb] handleRequest -> DEBU 010 HTTP Request: GET / HTTP/1.1 | Host: couchdb2:5984 | User-Agent: Go-http-client/1.1 | Accept: multipart/related | Accept-Encoding: gzip |  |
2017-03-23 14:54:26.101 UTC [couchdb] handleRequest -> WARN 011 Retrying couchdb request in 125ms. Attempt:1  Error:Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused
2017-03-23 14:54:26.229 UTC [couchdb] handleRequest -> WARN 012 Retrying couchdb request in 250ms. Attempt:2  Error:Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused
2017-03-23 14:54:26.482 UTC [couchdb] handleRequest -> WARN 013 Retrying couchdb request in 500ms. Attempt:3  Error:Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused
2017-03-23 14:54:26.985 UTC [couchdb] handleRequest -> WARN 014 Retrying couchdb request in 1s. Attempt:4  Error:Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused
2017-03-23 14:54:27.989 UTC [couchdb] handleRequest -> WARN 015 Retrying couchdb request in 2s. Attempt:5  Error:Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused
2017-03-23 14:54:30.078 UTC [couchdb] handleRequest -> WARN 016 Retrying couchdb request in 4s. Attempt:6  Error:Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused
2017-03-23 14:54:34.082 UTC [couchdb] handleRequest -> WARN 017 Retrying couchdb request in 8s. Attempt:7  Error:Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused
2017-03-23 14:54:42.086 UTC [couchdb] handleRequest -> WARN 018 Retrying couchdb request in 16s. Attempt:8  Error:Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused
2017-03-23 14:54:58.090 UTC [couchdb] handleRequest -> WARN 019 Retrying couchdb request in 32s. Attempt:9  Error:Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused
2017-03-23 14:55:30.093 UTC [couchdb] handleRequest -> WARN 01a Retrying couchdb request in 1m4s. Attempt:10  Error:Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused
panic: Error in instantiating ledger provider: Unable to connect to CouchDB, check the hostname and port: Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused

goroutine 1 [running]:
panic(0x108c4da0, 0xc420232060)
        /opt/go/src/runtime/panic.go:500 +0x3a8
github.com/hyperledger/fabric/core/ledger/ledgermgmt.initialize()
        /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:59 +0x278
github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize.func1()
        /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:47 +0x24
sync.(*Once).Do(0x10de11c0, 0x10a4d5a0)
        /opt/go/src/sync/once.go:44 +0x190
github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize()
        /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:48 +0x3c
github.com/hyperledger/fabric/peer/node.serve(0xc42024f890, 0x0, 0x1, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:94 +0x48
github.com/hyperledger/fabric/peer/node.glob..func1(0x10d8a3a0, 0xc42024f890, 0x0, 0x1, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:82 +0x44
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0x10d8a3a0, 0xc42024f870, 0x1, 0x1, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:599 +0x4c8
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x10d8ac20, 0x10d8a3a0, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 +0x3f4
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x10d8ac20, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 +0x34
main.main()
        /opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:111 +0x6c0
(behave_venv2) root@sys-86315:/opt/gopath/src/github.com/hyperledger/fabric/bddtests#",,,,,,,,,,,,,,,,,,,,01/Apr/17 12:59 PM;harsha544;behave.coucdb.tar;https://jira.hyperledger.org/secure/attachment/10642/behave.coucdb.tar,24/Mar/17 12:42 PM;harsha544;behave_Output;https://jira.hyperledger.org/secure/attachment/10604/behave_Output,01/Apr/17 12:58 PM;harsha544;network.json;https://jira.hyperledger.org/secure/attachment/10640/network.json,24/Mar/17 6:06 PM;harsha544;requirements.txt;https://jira.hyperledger.org/secure/attachment/10609/requirements.txt,01/Apr/17 12:58 PM;harsha544;scenario.html;https://jira.hyperledger.org/secure/attachment/10641/scenario.html,04/Apr/17 12:54 PM;harsha544;scenario_.942814080f4defef916f56d955a3f4e277739597_passinghtml;https://jira.hyperledger.org/secure/attachment/10649/scenario_.942814080f4defef916f56d955a3f4e277739597_passinghtml,04/Apr/17 8:20 AM;harsha544;scenario_.942814080f4defef916f56d955a3f4e277739597html;https://jira.hyperledger.org/secure/attachment/10648/scenario_.942814080f4defef916f56d955a3f4e277739597html,10/Apr/17 6:52 PM;AdnanChoudhury;scenario_passes_step_30.html;https://jira.hyperledger.org/secure/attachment/10653/scenario_passes_step_30.html,,,,,,,,,,,,,,,,,,,,,,,,0|i00tlp:,,,,,,,,AdnanChoudhury,ChristopherFerris,harsha544,rameshthoomu,sanchezl,SriramaSharma,,,,,,,,,24/Mar/17 12:42 PM;harsha544; [^behave_Output] ,"24/Mar/17 2:23 PM;AdnanChoudhury;1. What is the commit level/image tag used?

2. Is it working with previous commits?

3. If its reproducable, A ""steps to reproduce"" would be helpful.
","24/Mar/17 4:01 PM;rameshthoomu;[~harsha544] Also please provide the environment details as well.. I don't see any errors in CI Behave builds.. https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-behave-x86_64/

We observed this issue in previous commits but this should fix in latest fabric commits.. see the fix here https://gerrit.hyperledger.org/r/#/c/6979/","24/Mar/17 6:21 PM;harsha544;[~AdnanChoudhury] So here are the details :-

1) This was tested on latest head code of fabric.
2) Per this https://github.com/hyperledger/fabric/blob/v1.0.0-alpha/bddtests/features/bootstrap.feature, there's no couchdb specific behave-testing done earlier in V1.0.0-alpha.
3) Yes the steps to reproduce would be per following this https://github.com/hyperledger/fabric/tree/v1.0.0-alpha/bddtests .
     The pip modules were installed --no-cache-dir option using the contents of  this txt file supplied by [~jeffgarratt]  

 [^requirements.txt] 


[~rameshthoomu]

Here are my environment details :- 

1) ARCH -- ppc64le, OS -- Ubuntu 1604
2) Python 2.7.12, pip 9.0.1
3) go version go1.7.4
4)  Docker version 1.12.6, docker-compose version 1.11.2.
5) It is more of a couchdb-testing that's failing, per [~jeffgarratt] suggestion, I tested behave by increasing *SystemUpWaitTime* value to 8.10.20.40.60.90 intervals of https://github.com/hyperledger/fabric/blob/master/bddtests/features/bootstrap.feature#L283 , but it doesn't pass.",28/Mar/17 7:51 PM;AdnanChoudhury;Unable to reproduce in x86.,"29/Mar/17 2:03 AM;harsha544;[~AdnanChoudhury] I've been hitting couple of issues while trying to setup the env on x86_64, but can you only run this scenario https://github.com/hyperledger/fabric/blob/master/bddtests/features/bootstrap.feature#L283 provided others are commented and kindly help me with O/P along with the scenario.html file that gets created in latest directory of $GOPATH/src/github.com/hyperledger/fabric/bddtests/tmp/ . Thank you !!","01/Apr/17 12:58 PM;harsha544;I've recently tested behave ( at that time fabric-commit was pointing at _375ccf1eb56dc74f1c22c5bdff25f531b8724465_) and I've observed that behave test(s) when executed multiple times inside virtualenv passed seamlessly for scenarios listed in line [https://github.com/hyperledger/fabric/blob/master/bddtests/features/bootstrap.feature#L283] of bootstrap.feature only. Enclosing tarball the encloses scenario.html file generate after each run.

Also, I've tested scenarios listed in 281,282,283 of bootstrap.feature and it passed. ","04/Apr/17 8:20 AM;harsha544;I've tried behave on fabric-commit on _942814080f4defef916f56d955a3f4e277739597_ and unfortunately behave is not working, attaching scenario.html.","04/Apr/17 12:54 PM;harsha544;I've performed the following steps :- 

1) make dist-clean
2) make docker
3) Created a new virtualenv, installed the required python modules, and executed behave inside bddtests, and they appear to be passing now. Attaching the passing scenario.html file",04/Apr/17 1:38 PM;sanchezl;The fix for https://jira.hyperledger.org/browse/FAB-2908 includes a fix to speedup the couchdb container startup when running outside of Vagrant. ,04/Apr/17 2:11 PM;harsha544;Thanks for the update [~sanchezl] ,"10/Apr/17 6:52 PM;AdnanChoudhury;In the latest commit level (commit 7984725990fd8227124ab46cb27bed127e699cfc, Sat April 8th) unable to reproduce the issue in a ppc64le platform. Attaching the html that shows passing (file named scenario_passes_step_30.html). 

The peer containers and the couch containers show expected behavior, the peers show via log that they were able to connect successfully to its corresponding couchdb container.


{code:java}
new_behave_venv) u0017004@sys-86504:~/src/github.com/hyperledger/fabric/bddtests$ docker logs 388f60ee1e1911e7bddf5254008cf8f3_peer1_1 
2017-04-10 18:12:25.596 UTC [ledgermgmt] initialize -> INFO 001 Initializing ledger mgmt
2017-04-10 18:12:25.596 UTC [kvledger] NewProvider -> INFO 002 Initializing ledger provider
2017-04-10 18:12:25.599 UTC [kvledger.util] CreateDirIfMissing -> DEBU 003 CreateDirIfMissing [/var/hyperledger/production/ledgersData/ledgerProvider/]
2017-04-10 18:12:25.599 UTC [kvledger.util] logDirStatus -> DEBU 004 Before creating dir - [/var/hyperledger/production/ledgersData/ledgerProvider/] does not exist
2017-04-10 18:12:25.600 UTC [kvledger.util] logDirStatus -> DEBU 005 After creating dir - [/var/hyperledger/production/ledgersData/ledgerProvider/] exists
2017-04-10 18:12:25.613 UTC [kvledger.util] CreateDirIfMissing -> DEBU 006 CreateDirIfMissing [/var/hyperledger/production/ledgersData/chains/index/]
2017-04-10 18:12:25.613 UTC [kvledger.util] logDirStatus -> DEBU 007 Before creating dir - [/var/hyperledger/production/ledgersData/chains/index/] does not exist
2017-04-10 18:12:25.614 UTC [kvledger.util] logDirStatus -> DEBU 008 After creating dir - [/var/hyperledger/production/ledgersData/chains/index/] exists
2017-04-10 18:12:25.739 UTC [kvledger] NewProvider -> DEBU 009 Constructing CouchDB VersionedDBProvider
2017-04-10 18:12:25.741 UTC [statecouchdb] NewVersionedDBProvider -> DEBU 00a constructing CouchDB VersionedDBProvider
2017-04-10 18:12:25.742 UTC [couchdb] CreateConnectionDefinition -> DEBU 00b Entering CreateConnectionDefinition()
2017-04-10 18:12:25.748 UTC [couchdb] CreateConnectionDefinition -> DEBU 00c Created database configuration  URL=[http://couchdb1:5984]
2017-04-10 18:12:25.748 UTC [couchdb] CreateConnectionDefinition -> DEBU 00d Exiting CreateConnectionDefinition()
2017-04-10 18:12:25.753 UTC [couchdb] handleRequest -> DEBU 00e Entering handleRequest()  method=GET  url=http://couchdb1:5984/
2017-04-10 18:12:25.753 UTC [couchdb] handleRequest -> DEBU 00f HTTP Request: GET / HTTP/1.1 | Host: couchdb1:5984 | User-Agent: Go-http-client/1.1 | Accept: multipart/related | Accept-Encoding: gzip |  | 
2017-04-10 18:12:25.762 UTC [couchdb] handleRequest -> WARN 010 Retrying couchdb request in 125ms. Attempt:1  Error:Get http://couchdb1:5984/: dial tcp 172.26.0.6:5984: getsockopt: connection refused
2017-04-10 18:12:25.890 UTC [couchdb] handleRequest -> WARN 011 Retrying couchdb request in 250ms. Attempt:2  Error:Get http://couchdb1:5984/: dial tcp 172.26.0.6:5984: getsockopt: connection refused
2017-04-10 18:12:26.150 UTC [couchdb] handleRequest -> WARN 012 Retrying couchdb request in 500ms. Attempt:3  Error:Get http://couchdb1:5984/: dial tcp 172.26.0.6:5984: getsockopt: connection refused
2017-04-10 18:12:26.657 UTC [couchdb] handleRequest -> WARN 013 Retrying couchdb request in 1s. Attempt:4  Error:Get http://couchdb1:5984/: dial tcp 172.26.0.6:5984: getsockopt: connection refused
2017-04-10 18:12:27.662 UTC [couchdb] handleRequest -> WARN 014 Retrying couchdb request in 2s. Attempt:5  Error:Get http://couchdb1:5984/: dial tcp 172.26.0.6:5984: getsockopt: connection refused
2017-04-10 18:12:29.887 UTC [couchdb] handleRequest -> DEBU 015 Exiting handleRequest()
2017-04-10 18:12:29.887 UTC [couchdb] VerifyConnection -> DEBU 016 VerifyConnection() dbResponseJSON: {""couchdb"":""Welcome"",""version"":""2.0.0"",""vendor"":{""name"":""The Apache Software Foundation""}}

{code}



{code:java}
 [^scenario_passes_step_30.html] 
{code}

  ","14/Apr/17 12:36 AM;ChristopherFerris;ok, if unreproducable now, closing.",,,,,,,,,,,
Updated proto files,FAB-2872,15445,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,baohua,baohua,baohua,24/Mar/17 3:43 AM,24/Mar/17 8:49 AM,26/Apr/18 6:50 AM,24/Mar/17 8:49 AM,,,,,,,v1.0.0,,,fabric-sdk-py,,,,0,SDK-Python,,,,,,,,"Use latest proto files, and generate py files.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00tmh:,,Sprint 4,,,,,,baohua,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"fabric-ca-sever should return 401, not 500 for restricted operations",FAB-2868,15441,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,rennman,rennman,23/Mar/17 5:43 PM,12/May/17 4:55 PM,26/Apr/18 6:50 AM,26/Apr/17 5:42 PM,v1.0.0,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"Currently, if the client violates the rule regarding who can revoke, based on affiliation, the server returns HTTP status code 500:

2017/03/23 14:58:00 [DEBUG] Received response
statusCode=500 (500 Internal Server Error)
Error: Error response from server was: Revoker admin does not have proper affiliation to revoke user

It should return status code 401.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00tll:,,Sprint 16 - Membership Service,,,,,,ChristopherFerris,rennman,,,,,,,,,master,,,true,23/Apr/17 11:39 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8145/,,,,,,,,,,,,,,,,,,,,,,,
Leader election module test failure in CI,FAB-2857,15430,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,gennadyl,yacovm,yacovm,22/Mar/17 10:36 PM,14/Apr/17 7:47 PM,26/Apr/18 6:50 AM,14/Apr/17 7:46 PM,v1.0.0,,,,,,v1.0.0,,,fabric-gossip,,,,0,ci_falure,gossip,test,,,,,,"https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8808/console

21:49:01 unit-tests_1  | panic: assert: arguments: Cannot call Get(0) because there are 0 argument(s).
21:49:01 unit-tests_1  | 
21:49:01 unit-tests_1  | goroutine 15 [running]:
21:49:01 unit-tests_1  | panic(0x860dc0, 0xc420348270)
21:49:01 unit-tests_1  | 	/opt/go/src/runtime/panic.go:500 +0x1a1
21:49:01 unit-tests_1  | github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock.Arguments.Get(0xb97e48, 0x0, 0x0, 0x0, 0xb97e48, 0x0)
21:49:01 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock/mock.go:526 +0x19b
21:49:01 unit-tests_1  | github.com/hyperledger/fabric/gossip/election.(*peer).Peers(0xc4200d12c0, 0x0, 0x0, 0x0)
21:49:01 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/election/election_test.go:124 +0x34a
21:49:01 unit-tests_1  | github.com/hyperledger/fabric/gossip/election.(*leaderElectionSvcImpl).isAlive(0xc4200e0600, 0xc4203481e8, 0x2, 0x8, 0x1)
21:49:01 unit-tests_1  | 	github.com/hyperledger/fabric/gossip/election/_test/_obj_test/election.go:326 +0x42
21:49:01 unit-tests_1  | github.com/hyperledger/fabric/gossip/election.(*leaderElectionSvcImpl).handleMessages(0xc4200e0600)
21:49:01 unit-tests_1  | 	github.com/hyperledger/fabric/gossip/election/_test/_obj_test/election.go:131 +0x3d1
21:49:01 unit-tests_1  | created by github.com/hyperledger/fabric/gossip/election.(*leaderElectionSvcImpl).start
21:49:01 unit-tests_1  | 	github.com/hyperledger/fabric/gossip/election/_test/_obj_test/election.go:111 +0x6a
21:49:01 unit-tests_1  | FAIL	github.com/hyperledger/fabric/gossip/election	1.628s
21:49:01 unit-tests_1  | error: exit status 1
21:49:01 unit-tests_1  | panic: EOF
21:49:01 unit-tests_1  | 

According to the code, p.Called() returned an Arguments with no arguments.
This (according to the documentation) can happen when:
// Panics if the call is unexpected (i.e. not preceded by
// appropriate .On .Return() calls)

But, in the test code- p.mockedMethods is written to with a lock, and read from using a RLock, and each time a value is written into- it's while holding a lock.
This needs to be looked at.

[~C0rWin] [~gennadyl]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00tjl:,,,,,,,,C0rWin,ChristopherFerris,yacovm,,,,,,,,,,,,13/Apr/17 11:48 PM;ChristopherFerris;has this been resolved? [~yacovm] [~gennadyl],"14/Apr/17 6:14 AM;yacovm;No, but we changed the concurrency model since (a routine is now called synchronously instead of asynchronously) so I'm not 100% sure this can be reproduced (though haven't looked into it too deep).

I also haven't seen this failure since.
[~C0rWin] should we close this and re-open if it resurfaces? ","14/Apr/17 7:47 PM;C0rWin;[~yacovm] closing, since wasn't reproduced for quite a while.
",,,,,,,,,,,,,,,,,,,,,
[node-SDK] FabricCAClientImpl.js -- test for 'undefined' fails,FAB-2853,15426,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jjjjibm,jjjjibm,jjjjibm,22/Mar/17 4:18 PM,30/Mar/17 8:02 PM,26/Apr/18 6:50 AM,30/Mar/17 8:02 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"In fabric-sdk-node/fabric-ca-client/lib/FabricCAClientImpl.js, I was trying to drive the 'if' legs of this code with a unit test program:

var FabricCAClient = class {
{color:#654982}<lines skipped>{color}
constructor(connect_opts, cryptoPrimitives) {
{color:#654982}<lines skipped>
{color}
if (this._tlsOptions.verify==='undefined'){
				{color:#8eb021}this._tlsOptions.verify = true;
{color}		}
			if (this._tlsOptions.trustedRoots==='undefined'){
				{color:#8eb021}this._tlsOptions.trustedRoots = [];
{color}			}

In my source code, I passed connect_opts.tlsOptions = {} to the constructor, expecting to drive the legs with undefined 'verify' and 'trustedRoots' fields.  Instead, as confirmed in Node Inspector, the fields are indeed not defined but the tests for 'undefined' fail.

Locally, I was able to drive the code by changing the test like this:
if ({color:#d04437}typeof{color} this._tlsOptions.verify === 'undefined') {
				this._tlsOptions.verify = true;
			}
			if {color:#d04437}(typeof {color}this._tlsOptions.trustedRoots === 'undefined') {
				this._tlsOptions.trustedRoots = [];
			}

You can see other tests for undefined coded this way in the same part.

At first, after making the change, I saw errors of this nature:
_/home/ibmadmin/work/src/github.com/hyperledger/fabric-sdk-node/node_modules/fabric-ca-client/lib/FabricCAClientImpl.js:477
                var cert = Buffer.from(signingI
                                       ^^^^^^^^
SyntaxError: missing ) after argument list
    at Object.exports.runInThisContext (vm.js:76:16)
    at Module._compile (module.js:513:28)
    at Object.Module._extensions..js (module.js:550:10)
    at Module.load (module.js:458:32)
    at tryModuleLoad (module.js:417:12)
    at Function.Module._load (module.js:409:3)
    at Module.require (module.js:468:17)
    at require (internal/module.js:20:19)
    at Object.<anonymous> (/home/ibmadmin/work/src/github.com/hyperledger/fabric-sdk-node/test/unit/util.js:25:18)
    at Module._compile (module.js:541:32)

_I was able to fix these by adding a semi-colon (';') between methods.  I'll attach my source code for your perusal.","fabric-sdk-node: commit cca72f8d3c5cbb7da5ee311f80200d36b1a67891
on Ubuntu 14 vlaunch VM",,,,,,,,,,,,,,,,,,,22/Mar/17 4:17 PM;jjjjibm;FabricCAClientImpl.js;https://jira.hyperledger.org/secure/attachment/10601/FabricCAClientImpl.js,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00tip:,,,,,,,,jjjjibm,,,,,,,,,,master,,,true,"22/Mar/17 7:34 PM;jjjjibm;Hi Jim.  If you agree with the attached part, and you're short on time, you can assign this back to me.  Cheers.","29/Mar/17 3:48 PM;jjjjibm;commit 6c7345b64e892c08f901a92f7c9f5a69959bad3d
Author: jjjjibm <jcwolf@us.ibm.com>
Date:   Wed Mar 29 11:39:56 2017 -0400

    node-SDK FAB-2853 test for 'undefined' fails

    I changed some tests like this:
    if (<variable> === 'undefined)
    to
    if (typeof <variable> === 'undefined').
    I also needed to add semi-colons to FabricCAClientImpl.js.
    See FAB-2853 for more discussion.

    Change-Id: I8471ba6e8b3ed151ce35ea07732c09ff9a295a49
    Signed-off-by: jjjjibm <jcwolf@us.ibm.com>
","29/Mar/17 8:44 PM;jjjjibm;Today, I was able to remove the magic semi-colons, and the job worked.   

commit d9c870b46471d084d7bd99227df1955b4e0c6915
Author: jjjjibm <jcwolf@us.ibm.com>
Date:   Wed Mar 29 11:39:56 2017 -0400

    node-SDK FAB-2853 test for 'undefined' fails

    I changed some tests like this:
    if (<variable> === 'undefined)
    to
    if (typeof <variable> === 'undefined').
    See FAB-2853 for more discussion.

    Change-Id: I8471ba6e8b3ed151ce35ea07732c09ff9a295a49
    Signed-off-by: jjjjibm <jcwolf@us.ibm.com>
",,,,,,,,,,,,,,,,,,,,,
Error when create channel,FAB-2851,15424,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,baohua,baohua,baohua,22/Mar/17 2:09 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,15/Apr/17 1:45 AM,,,,,,,v1.0.0,,,fabric-orderer,,,,0,common-components,,,,,,,,"Existing code will throw error of

```
UTC [protoutils] ValidateTransaction -> ERRO 03a validateCommonHeader
returns err invalid header type ORDERER_TRANSACTION
[txvalidator] Validate ->
ERRO 03b Invalid transaction with index 0, error %!s(<nil>)
```
as it does not know the `ORDERER_TRANSACTION` header.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ti9:,,,,,,,,baohua,denyeart,jsong1230,kchristidis,,,,,,,,,,,"10/Apr/17 4:53 AM;jsong1230;I have the same problem. Did you find a solution?
Thanks in advance.

Jeffrey",12/Apr/17 2:51 AM;denyeart;[~baohua] Will you be adding a test case for the fix in https://gerrit.hyperledger.org/r/#/c/7375/? Can you provide an outlook date?,"12/Apr/17 3:32 AM;baohua;Jeffrey, David

I tried latest code, while not finding the problem again, so not sure whether need to add the fix, which may protect from occasional msgs.

Also, this is difficult to design the test case, as needing fvt and log analysis?","12/Apr/17 10:47 AM;denyeart;[~kchristidis]
Could you provide your opinion on this one, as well as the proposed fix in https://gerrit.hyperledger.org/r/#/c/7375.",14/Apr/17 6:06 PM;kchristidis;Taking a look at this now.,"14/Apr/17 6:32 PM;kchristidis;[~denyeart]: Left comments on the changeset as requested.

[~baohua]: Please check and let me know.","15/Apr/17 1:44 AM;baohua;I would like to close this issue first, as we are not finding the issue with latest code.

If anyone else find similar issues, can re-open again, thanks!",,,,,,,,,,,,,,,,,
Unable to query and invoke successfully,FAB-2847,15420,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,latitiah,latitiah,21/Mar/17 2:00 PM,22/Mar/17 3:38 PM,26/Apr/18 6:50 AM,22/Mar/17 3:38 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"System:
* TLS off
* 3 orderers, 2 peers
* using node SDK (though saw the same error when using cli commands as well)
* peer image version: 0.7.0-snapshot-14055d7

After installing chaincode (example_cc) on both peers, then instantiating the chaincode on 1 peer (1a), I performed a query on 1c. 

Expected (Neither happened):
* chaincode container to start for peer 1c
* receive initial values from the instantiation

I performed a query on 1a. 
Received:
{code:none}
Error: Error endorsing query: rpc error: code = 2 desc = failed to obtain cds for itzmine - transaction not found itzmine/itzmine
{code}

When performing an invoke:
Expected:
* chaincode container to start for peer (since it didn't come up for the query)
* some message that says that the invoke was completed successfully

Received:
{code:none}
[lccc] Invoke -> ERRO 005�[0m ChaincodeId: itzmine does not exist on channel: itzmine(err:chaincode not found itzmine)
{code}

I verified that the chaincode container was running after the instantiation for peer 1a. The chaincode logs show:
{code:none}
########### example_cc Init ###########
Aval = 100, Bval = 200
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00thd:,,,,,,,,latitiah,,,,,,,,,,,,,,"22/Mar/17 3:38 PM;latitiah;After speaking with a number of people on this issue, I narrowed the problem down to a lack of communication with the orderer.  Even though it looked as though the instantiation was completing (the chaincode container came up, the log indicating the initial values), the initial values were not being written to the ledger. ",,,,,,,,,,,,,,,,,,,,,,,
"fabric-ca-client revoke should allow combination of SN,AKI, as well as EID",FAB-2841,15414,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,rennman,rennman,20/Mar/17 11:01 PM,12/May/17 4:55 PM,26/Apr/18 6:50 AM,22/Apr/17 6:05 PM,v1.0.0,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"The revoke command requires (SN && AKI) || EID

It should allow (SN && AKI) && EID
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00syg:i,,,,,,,,aambati,ChristopherFerris,rennman,smithbk,,,,,,,master,,,true,"21/Mar/17 2:45 PM;smithbk;If they provide both and the cert with the matching SN && AKI doesn't belong to the EID, we would need to return an error.
I'm trying to see the value in doing this.
I guess it could provide an extra layer of sanity checking before revoking a cert, but not sure how valuable it is.
Allen, is this what you were thinking?
","21/Mar/17 2:56 PM;rennman;1 - For one, yes, it's just a sanity check. Granted, the chances of having two certs with the same SN, AKI and owner are small, minuscule perhaps (and if compliant with the PKI specifications, impossible), but it would give me as a user, a higher degree of confidence that I had targeted the correct user.

2 - In reviewing previous operations it is more clearly apparent on inspection, just which user was intended to be targeted.

3 - Then there's just the argument from the purist perspective. The input is logically consistent and it is confusing when it's rejected. ",21/Mar/17 3:17 PM;smithbk;Agreed ... thanks,"06/Apr/17 4:20 PM;aambati;[~rennman] is this still happening? Looking at the code it seems to look for aki and serial , if provided then it will try to revoke the cert associated with them. If aki/serial is not provided, then it will look for identity name, if there it will try to revoke the identity. If neither name or aki/serial is provided, an error is returned.",13/Apr/17 11:44 PM;ChristopherFerris;please link gerrit CR thanks,18/Apr/17 4:43 PM;rennman;[https://gerrit.hyperledger.org/r/#/c/7815/],,,,,,,,,,,,,,,,,,
Error response has body twice,FAB-2839,15412,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,smithbk,smithbk,20/Mar/17 9:34 PM,30/Mar/17 2:01 PM,26/Apr/18 6:50 AM,30/Mar/17 2:01 PM,,,,,,,,,,fabric-ca,,,,0,,,,,,,,,"To reproduce:
1) fabric-ca-server start -b admin:adminpw
2) fabric-ca-client revoke -a foo -s bar

The server returns a response with two bodies as follows:
{code}
{""success"":false,""result"":null,""errors"":[{""code"":10003,""message"":""sql: no rows in result set""}],""messages"":[]}
{""success"":false,""result"":null,""errors"":[{""code"":10003,""message"":""sql: no rows in result set""}],""messages"":[]}
{code}

The server has the following error:
{code}
2017/03/20 17:30:06 http: multiple response.WriteHeader calls
{code}

Apparently it is writing the error twice and the 2nd one is trying to explicitly write the headers again.  This is probably something to do with cfssl's handler's that are registered in lib/server.go's registerHandler func.  It isn't obvious though.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz8i:zx,,Sprint 14 - Membership Service,Sprint 15 - Membership Service,,,,,smithbk,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Don't print usage message for non-usage errors,FAB-2835,15408,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,smithbk,smithbk,20/Mar/17 6:53 PM,30/Mar/17 2:01 PM,26/Apr/18 6:50 AM,30/Mar/17 2:01 PM,,,,,,,,,,fabric-ca,,,,0,,,,,,,,,"This is more general, but here is one case

1) Enroll admin
2) As admin, revoke admin's ecert
3) fabric-ca-client revoke -a foo -s bar

It will print the usage message along with an authorization failure, but should just print an auth failure ERROR message",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz8i:zr,,Sprint 14 - Membership Service,Sprint 15 - Membership Service,,,,,smithbk,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Node SDK - Peer GRPC connection needs timeout to avoid hang,FAB-2834,15407,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,20/Mar/17 5:48 PM,05/Apr/17 6:54 PM,26/Apr/18 6:50 AM,05/Apr/17 6:54 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,Peer asynchronous connection needs an external timeout to avoid a GRPC hang in the event that the peer does does not response in a configurable amount of time. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00tep:,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Unexpected chaincode language: JAVA when deploying java chaincode,FAB-2832,15405,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,sanchezl,sanchezl,20/Mar/17 1:42 PM,20/Mar/17 8:25 PM,26/Apr/18 6:50 AM,20/Mar/17 8:25 PM,,,,,,,,,,fabric-sdk-java,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00te9:,,,,,,,,sanchezl,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"npm install hfc ""[Throwing Errors]""",FAB-2831,15404,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,coderundebug12,coderundebug12,20/Mar/17 9:41 AM,17/Apr/17 4:46 AM,26/Apr/18 6:50 AM,17/Apr/17 4:46 AM,v1.0.0,,,,,,WON'T FIX,,,fabric-sdk-node,,,,0,,,,,,,,,"while trying to install hfc via npm error are observed, tried with manual way also as instructed on IBM site , still not able to install ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00te1:,,,,,,,,coderundebug12,,,,,,,,,,,,,,05/Apr/17 6:54 PM;jimthematrix;[~coderundebug12] can you give more details? which version of the sdk? what errors are you seeing? what environment are you seeing this in? note that Vagrant at this point is NOT supported by the node SDK.,17/Apr/17 4:46 AM;jimthematrix;Closing as WONT FIX due to lack of details,,,,,,,,,,,,,,,,,,,,,,
Intermittent startup errors occur for hyperledger/fabric-couchdb Docker containers,FAB-2830,15403,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrijk,harrijk,harrijk,19/Mar/17 2:21 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,27/Mar/17 1:37 PM,,,,,,,v1.0.0,,,fabric-quality,,,,0,build-system,,,,,,,,"The hyperledger/fabric-couchdb docker images's entry point executes a script to start couchdb.  On occasion the hyperledger/fabric-couchdb Docker container exits with the following error:

su-exec: /opt/couchdb/bin/couchdb: Text file busy

I believe that delaying the execution of the /opt/couchdb/bin/couchdb command through the use of a sleep command just prior to starting couchdb would resolve the issue.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00tdt:,,,,,,,,AdnanChoudhury,harrijk,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Delivery service persists connection to ordering service when not needed,FAB-2828,15401,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,19/Mar/17 8:42 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,09/Apr/17 9:54 PM,,,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,,"The delivery service (core/deliveryclient.go) creates a connection at its creation, and doesn't close it even when it's not a leader. 

This will impact scalability of a fabric deployment with a large number of peers. ",,,,,,,,,,,,,,,,FAB-2759,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00tdd:,,Sprint 15 - Gossip,,,,,,C0rWin,yacovm,,,,,,,,,master,,,true,"08/Apr/17 9:20 AM;C0rWin;Issue duplicates FAB-2759, closing this one.","09/Apr/17 9:50 PM;C0rWin;[~yacovm], I'm not sure why you re-opened this item, as it duplicates FAB-2759. If this is not a duplicated then it should not be ""In Review"" state as nothing related is in gerrit.",09/Apr/17 9:54 PM;yacovm;it is not clear indeed,,,,,,,,,,,,,,,,,,,,,
"""failed to obtain cds for mycc"" error in e2e_cli test modified to Invoke before first Query",FAB-2822,15395,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,binhn,scottz,scottz,17/Mar/17 11:36 PM,03/Jun/17 1:47 AM,26/Apr/18 6:50 AM,03/Jun/17 12:34 AM,v1.0.0,v1.0.0-alpha1,,,,,v1.0.0,,,fabric-endorser,,,,0,quality,,,,,,,,"{noformat}
Error endorsing invoke: rpc error: code = 2 desc = failed to obtain cds for mycc - transaction not found mycc/mychannel
{noformat}


The above error was seen in cli logs during the attempt to invoke on peer 0, when executing e2e_cli using commit: fa3d88c Release 1.0.0-alpha. 

**Note* there was one tiny modification to e2e_cli/scripts/script.sh : I moved up the statement to send the Invoke on peer0 PRIOR TO the Query on peer0.


{noformat}
vagrant@hyperledger-devenv:v0.3.0-db6af20:/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli$ ./network_setup.sh restart
{noformat}


There were other changes which seemed to be contributing factors in reproducing this, but hopefully this writeup provides the simplest form and is enough to find the root cause.  For example, increasing the BatchTimeout often (but not always) resulted in this error, especially when  > 30 seconds.

For reference, some logs are attached. And, below in the ""Environment"" section are details of my test environment, showing the script changes.","
For reference, some logs are attached. And, below are details of my test environment (docker containers in vagrant, on linux laptop), showing the script changes.


{noformat}
vagrant@hyperledger-devenv:v0.3.0-db6af20:/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli$ git diffdiff --git a/examples/e2e_cli/docker-compose.yaml b/examples/e2e_cli/docker-compose.yaml
index dee9eae..b2f455a 100644
--- a/examples/e2e_cli/docker-compose.yaml
+++ b/examples/e2e_cli/docker-compose.yaml
@@ -6,6 +6,7 @@ services:
     container_name: orderer0
     image: hyperledger/fabric-orderer
     environment:
+      - CORE_LOGGING_LEVEL=DEBUG
       - ORDERER_GENERAL_LOGLEVEL=debug
       - ORDERER_GENERAL_LISTENADDRESS=0.0.0.0
       - ORDERER_GENERAL_GENESISMETHOD=file
diff --git a/examples/e2e_cli/scripts/script.sh b/examples/e2e_cli/scripts/script.sh
index 6591709..39ec238 100755
--- a/examples/e2e_cli/scripts/script.sh
+++ b/examples/e2e_cli/scripts/script.sh
@@ -2,7 +2,7 @@
 
 CHANNEL_NAME=""$1""
 : ${CHANNEL_NAME:=""mychannel""}
-: ${TIMEOUT:=""60""}
+: ${TIMEOUT:=""90""}
 COUNTER=0
 MAX_RETRY=5
 ORDERER_CA=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/orderer/localMspConfig/cacerts/ordererOrg0.pem
@@ -158,13 +158,13 @@ installChaincode 2
 echo ""Instantiating chaincode on Peer2/Org1 ...""
 instantiateChaincode 2
 
-#Query on chaincode on Peer0/Org0
-chaincodeQuery 0 100
-
 #Invoke on chaincode on Peer0/Org0
 echo ""send Invoke transaction on Peer0/Org0 ...""
 chaincodeInvoke 0
 
+#Query on chaincode on Peer0/Org0
+chaincodeQuery 0 90
+
 ## Install chaincode on Peer3/Org1
 installChaincode 3
{noformat}
",,,,,,,,,,,,,,,,,,,17/Mar/17 11:36 PM;scottz;logs_fail_2s_10_invokefirst_FriMar172017.tar.gz;https://jira.hyperledger.org/secure/attachment/10595/logs_fail_2s_10_invokefirst_FriMar172017.tar.gz,17/Mar/17 11:36 PM;scottz;logs_pass_2s_10_queryfirst_FriMar172017.tar.gz;https://jira.hyperledger.org/secure/attachment/10596/logs_pass_2s_10_queryfirst_FriMar172017.tar.gz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhy:zz9xr6zy,,,,,,,,antitoine,binhn,denyeart,Honglei,scottz,,,,,,master,,,true,"27/Mar/17 10:55 AM;Honglei;The root cause is chaincode-instantiate txn has not been committed yet.  In e2e, query will retry, and wait for the instantiation, but invoke will not.
I think it is expected?","27/Mar/17 10:55 PM;scottz;Even if development team members all agree that this is expected to fail based on the current design, then we still have a problem. If this and other early transactions fail due to the instantiation not being completed, then it should say that. This error message seems to be intended for a real problem: any generic situation where the internal data objects are not present when they should be present. However, this is a special case for the first transaction (one or several). It is explainable. 

Moreover, I would hope the transaction should not fail but rather should just take a long time (and it is up to the application to avoid time out for say 20 secs to give it time to succeed). If it is expected to fail, then there is a bigger problem because that implies the first transaction(s) will always fail, which is unacceptable. Minimally, we should provide a better error message - so the user can understand and retry. In addition, we should consider propagating the deployment to all peers once one peer is instantiated - so the network is ready when users start to send in transactions.","11/Apr/17 8:24 PM;denyeart;Since the problem happens when BatchTimeout is increased, my first guess is that the chaincode instantiation has not been committed by the time you do invoke/query.

If you still see this issue and it is in fact not due to a timing issue, please re-open.","12/Apr/17 2:34 PM;scottz;Sorry, but closing issues requires verification, not a theory. The problem was not simply due to a large batchtimeout. And please read my comments, written after the description, which describe other work that must be done regardless.","26/Apr/17 1:30 PM;binhn;[~scottz] 
It looks like we should change the error message to be clearer, which we can take up during serviceability work. I think it is the same as HTTP 404
","02/Jun/17 2:22 PM;scottz;Part 1:  I agree this most likely falls under category of serviceability. I don't know, but it may require another check or two in the code to confirm the ""failed to instantiate"" theory, to differentiate that situation from other error conditions leading to this error, and to print appropriate message.

Part 2: I don't see any responses to my suggestion to instantiate on all peers that have already deployed the chaincode, at the same time when the instantiate is done on the first peer. By not doing that, the first (several) queries/invokes to a peer are significantly delayed and could easily fail due to the delay of the instantiation on each peer.","02/Jun/17 6:13 PM;binhn;[~scottz]

Ok I think we're settled on part 1. I can try to do that with better message when we can't local CDS, meaning the chaincode has not been instantiated.

re part 2:  
{quote}my suggestion to instantiate on all peers that have already deployed the chaincode, at the same time
{quote}
This is a distributed system, so there's no concept of ""the same time"". Each peer must operate independently, and only through consensus, they agree on a value, again, not at the same time, but the same sequence.",02/Jun/17 9:15 PM;binhn;In review https://gerrit.hyperledger.org/r/#/c/10093/,"03/Jun/17 1:47 AM;scottz;OK.

We can discuss #2 separately, to see if there is something we can do to prevent the probably failiure of the first transactions on each peer that joins the party. Let me reword the following way, to enable that discussion:

The phrase ""at the same time"" would make sense if you consider ""the moment"" when it is first instantiated on any peer with the assumptions that multiple peers have installed the chaincode and have joined the channel. If I am not mistaken, every other peer in the channel is notified, but does not actually start the chaincode running until it is invoked or queried on each peer. (If not, then they could be. And won't they need it to be running to process received delivered transactions anyways?) At that moment, those other peers could start the chaincode running.

A more general way I might express that concept, would be to say whenever any peer reaches the state where it has both joined a channel containing the chaincode and that chaincode is installed on that peer, (and optionally also requiring at least one peer on the channel to instantiate it, which could trigger notification to other peers). Then, as you suggest, yes they would each instantiate/start the chaincode running at different times - but it could be consistently said that would mean each of them would do it as soon as it becomes ready and able and willing to run it (instead of waiting until it is needed - which will undoubtedly result in failures the first time a transaction arrives that requests it).",,,,,,,,,,,,,,,
getHistoryForMarble called as 'invoke' operation passes the test with incorrect results,FAB-2808,15381,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,denyeart,Nishi,Nishi,16/Mar/17 7:25 PM,07/Jun/17 4:45 PM,26/Apr/18 6:50 AM,07/Jun/17 4:45 PM,,,,,,,v1.0.0,,,fabric-ledger,,,,0,Ledger,,,,,,,,"Commit level: *14055d70d9593e99295c7846076fc9dcfb1e052e*
In e2e test scenario using chaincodeAPIDriver, chaincode calls executed on marble1 before getHistory:
init, delete

call that incorrectly executed in shell script as CLI:
peer chaincode invoke -o $ORDERER_IP:7050 -C $CHANNEL_NAME$i -n $CHAINCODE_NAME$ch -c '{""Args"":[""getHistoryForMarble"",""marble1""]}'
*instead of*
peer chaincode query -o $ORDERER_IP:7050 -C $CHANNEL_NAME$i -n $CHAINCODE_NAME$ch -c '{""Args"":[""getHistoryForMarble"",""marble1""]}'

Had the e2e scenario pass, but the results from getHistoryForMarble were incorrect with 2 txID's for (assuming they were for two operations init, delete), txID for was repeated with same exact value in the output.

Sample Output file after ""invoke"" on ""getHistoryForMarble"":
{code}
2017-03-16 14:05:18.702 UTC [chaincodeCmd] chaincodeInvokeOrQuery -> INFO 008 Invoke result: version:1 response:<status:200 message:""OK"" payload:""[{\""TxId\"":\""a6fab9381bb33c163ec6ba5cecc48a1ca38b139c8f8b008932e48a6a86c7646f\"", \""Value\"":{\""docType\"":\""marble\"",\""name\"":\""marble3\"",\""color\"":\""blue\"",\""size\"":45,\""owner\"":\""tom\""}}]"" > payload:""\n \250\004\316\331\222\307\177x\021\301\034z\242\330\347\0253F^\007\025]\333\203eM\246\323\263\350aU\022\302\001\n\024\001\004lccc\001\005mycc0\004\001\001\001\001\000\000\032\251\001\010\310\001\032\243\001[{\""TxId\"":\""a6fab9381bb33c163ec6ba5cecc48a1ca38b139c8f8b008932e48a6a86c7646f\"", \""Value\"":{\""docType\"":\""marble\"",\""name\"":\""marble3\"",\""color\"":\""blue\"",\""size\"":45,\""owner\"":\""tom\""}}]"" endorsement:<endorser:""\n\007Org0MSP\022\210\004-----BEGIN -----\nMIIBYzCCAQmgAwIBAwICA+gwCgYIKoZIzj0EAwIwEzERMA8GA1UEAwwIcGVlck9y\nZzAwHhcNMTcwMjIwMTkwNjExWhcNMTgwMjIwMTkwNjExWjAQMQ4wDAYDVQQDDAVw\nZWVyMTBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABI9/7z3nMORUeS3rZ+F93ymD\nR2jiB6Wm+QSoSz/uQuRavnoksgU6peF5rBMfebk/PfNoVjdR4egCqAHBHIpp7Iuj\nUDBOMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYEFJpxVAXpMAEOHtbNCwvL1m/ku9gt\nMB8GA1UdIwQYMBaAFFQzuQR1RZP/Qn/BNDtGSa8n4eN/MAoGCCqGSM49BAMCA0gA\nMEUCIQDsQ6lmuLdKmMgnN5+9YjlpCRQEJCoaG3uxRHhrAecZngIgQZlwnvwka+TM\ngF/yC3r2MeELK9ocw8c22DAe6x71RT4=\n-----END -----\n"" signature:""0E\002!\000\216\2253\330\2370(h\346 e\344;3\010\2235\250\275\367*\001\364\340\nfh\n\3320\252\374\002 (\200\344\203{\002*!\273pD\000\013\323B\302\021\003}\033r\r\316|\234K\\,'(\330\037"" > 
2017-03-16 14:05:18.703 UTC [main] main -> INFO 009 Exiting.....
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz76:zzzssyi,,Sprint 16  - Ledger,,,,,,denyeart,Nishi,,,,,,,,,,,,,"07/Jun/17 4:45 PM;denyeart;It looks like the JSON is simply printed twice in the log message, rather than the txid appearing twice in the response JSON.  I don't think this is an issue.  I will close, but please open if you think there is a real issue here.",,,,,,,,,,,,,,,,,,,,,,,
"error ""Extensions not allowed in v2 certificate"" while loading certs from genesis block",FAB-2807,15380,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,tuand,tuand,16/Mar/17 5:35 PM,17/Mar/17 6:01 PM,26/Apr/18 6:50 AM,17/Mar/17 6:01 PM,,,,,,,v1.0.0,,,fabric-crypto,,,,0,v1.0,,,,,,,,"I'm trying to drive the e2e scenario from the Java SDK. 

configtx.yaml, mychannel.tx, twoorgs.orderer.block and all the certs were copied from the node SDK test/fixture/channel directory.

I get this error after creating channel completes and I get the genesis block and I read the MSP certs into my trust store.

There are a few certs that looked suspicious , e.g.  channel/crypto-config/peerOrganizations/peerOrg2/msp/cacerts/peerOrg1.pem  which  when I do a 
_openssl x509 -text -noout -in peerOrg1.pem_ , I get this
{quote}
Certificate:
    Data:
        Version: 4 (0x3)
        Serial Number: 1000 (0x3e8)
        Signature Algorithm: ecdsa-with-SHA256
        Issuer: CN=peerOrg1
        Validity
            Not Before: Feb 20 19:06:10 2017 GMT
            Not After : Feb 20 19:06:10 2018 GMT
        Subject: CN=peerOrg1
        Subject Public Key Info:
{quote}

Both [~jimthematrix] and [~ashutosh_kumar] think this is the problem
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00t9d:,,,,,,,,tuand,,,,,,,,,,,,,,"17/Mar/17 6:01 PM;tuand;The error comes from trying to parse an extraneous cert in the node-sdk/crypto-config/peerOrganizations/peerOrg2/msp directory.

Closing this issue.",,,,,,,,,,,,,,,,,,,,,,,
fabric-ca readthedocs update to match current features for alpha,FAB-2805,15378,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,smithbk,smithbk,16/Mar/17 2:48 PM,28/Apr/17 1:58 AM,26/Apr/18 6:50 AM,14/Apr/17 12:30 AM,v1.0.0,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,This is an update for the fabric-ca's readthedocs to match the current features for alpha.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6i:zz6,,Sprint 14 - Membership Service,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,smithbk,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
BCCSP factories aren't initialized in fabric-ca-client,FAB-2799,15371,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,smithbk,smithbk,15/Mar/17 8:46 PM,06/Apr/17 12:29 AM,26/Apr/18 6:50 AM,06/Apr/17 12:29 AM,,,,,,,,,,fabric-ca,,,,0,,,,,,,,,"The following error message is printed for every fabric-ca-client command:

2017/03/15 15:56:24 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.

The fix is to call InitFactories with nil explicitly.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00t7l:,,,,,,,,smithbk,,,,,,,,,,master,,,true,06/Apr/17 12:29 AM;smithbk;This is fixed,,,,,,,,,,,,,,,,,,,,,,,
Sample Endorsor Creator certificate is not marked correctly,FAB-2798,15370,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,harrisob@us.ibm.com,harrisob@us.ibm.com,15/Mar/17 7:19 PM,12/May/17 2:58 PM,26/Apr/18 6:50 AM,12/May/17 2:57 PM,,,,,,,v1.0.0,,,fabric-endorser,,,,0,,,,,,,,,"NodeSDK is unable to validate the signature with the creator's certificate as it is not tagged correctly.
Looks like:
-----BEGIN -----
MIICEjCCAbmgAwIBAgIRANUoapuJGF/Om0hyk45bQiQwCgYIKoZIzj0EAwIwYDEL
...
RjKXfWVXfXdEoq8mgWa6ir11QloCIB9mpenM34EsuH9AZR83cIMZZC2HiQbfFNAa
5zKksj3o
-----END -----

Should be
-----BEGIN CERTIFICATE-----
MIICEjCCAbmgAwIBAgIRANUoapuJGF/Om0hyk45bQiQwCgYIKoZIzj0EAwIwYDEL
...
RjKXfWVXfXdEoq8mgWa6ir11QloCIB9mpenM34EsuH9AZR83cIMZZC2HiQbfFNAa
5zKksj3o
-----END CERTIFICATE-----",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00t7d:,,,,,,,,ChristopherFerris,harrisob@us.ibm.com,kchristidis,mastersingh24,,,,,,,,,,,"11/Apr/17 6:23 PM;kchristidis;Removing fabric-orderer component, as this doesn't seem to be orderer-related?",16/Apr/17 2:55 PM;mastersingh24;[~harrisob@us.ibm.com] - is this still an issue?   I assume you were having problems verifying the signature(s) returned from endorsers?,11/May/17 11:47 PM;ChristopherFerris;[~harrisob@us.ibm.com] can you please answer [~mastersingh24] question above? Thanks,12/May/17 2:58 PM;harrisob@us.ibm.com;The provided certs now have -----BEGIN CERTIFICATE----- and -----END CERTIFICATE-----,,,,,,,,,,,,,,,,,,,,
"[node-SDK] Using apt-get install softhsm2, node pkcs11.js fails but sudo node pkcs11.js succeeds ",FAB-2797,15369,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,jjjjibm,jjjjibm,15/Mar/17 6:51 PM,11/May/17 2:40 AM,26/Apr/18 6:50 AM,11/May/17 2:40 AM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"I installed softhsm2 on an Ubuntu 16 vlaunch VM like this: apt-get install softhsm2

This is consistent with the way CI installs softhsm2.  The goal is to enable fabric-sdk-node/test/unit/pkcs11.js to run in the CI environment. 

Having installed softhsm2, the command 'node pkcs11.js' fails in C_Initialize with the rc 'GENERAL ERROR':

Error: CKR_GENERAL_ERROR:5
at Error (native) C_Initialize:152]
at: Test.onetime [as end] (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/onetime/index.js:22:12)
stack: |-
Error: CKR_GENERAL_ERROR:5
at Error (native) C_Initialize:152
at Error (native)
at CryptoSuite_PKCS11._pkcs11OpenSession (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/fabric-client/lib/impl/bccsp_pkcs11.js:157:10)
at new CryptoSuite_PKCS11 (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/fabric-client/lib/impl/bccsp_pkcs11.js:110:8)
at Object.module.exports.getCryptoSuite 


However, adding sudo enables all pkcs11.js tests to pass:  sudo node pkcs11.js

So, 'sudo' is one fix.  Unfortunately, it is probably not possible to sudo in the CI environment.
[~vpaprots] suggested two commands that enable me to call 'node pkcs11.js' successfully, even though I am not running as root. 

Ramesh requested this issue is to work out how we can issue these commands in CI  so we can add pkcs11.js to the node SDK CI test bucket. 

I'm appending a transcript of my conversation with Ramesh beginning from the time I told him I had a break through with pkcs11.js.  The commands suggested by [~vpaprots] are in the transcript. ","fabric-sdk-node: commit e2edc9bae777b9b12418da2a2c33dce7da33e340
fabric commit d7920a9c3fa0b3fe96ed8e4dde86795de97ae1e2
fabric-ca  commit c73ce65eaa9732dcf51930e75ed99adfb4edce85

Vlaunch VM running Ubuntu 16 
softhsm2 installed via apt-get",,,,,,,,,,,,,,,,,,,15/Mar/17 7:06 PM;jjjjibm;FAB-2797.txt;https://jira.hyperledger.org/secure/attachment/10587/FAB-2797.txt,15/Mar/17 6:55 PM;jjjjibm;FAB-2797.txt;https://jira.hyperledger.org/secure/attachment/10586/FAB-2797.txt,15/Mar/17 7:06 PM;jjjjibm;bccsp_pkcs11.js;https://jira.hyperledger.org/secure/attachment/10588/bccsp_pkcs11.js,15/Mar/17 7:05 PM;jjjjibm;pkcs11.js;https://jira.hyperledger.org/secure/attachment/10590/pkcs11.js,15/Mar/17 7:05 PM;jjjjibm;test.js;https://jira.hyperledger.org/secure/attachment/10589/test.js,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:rhz,,Sprint 15 - SDK node,,,,,,jjjjibm,rameshthoomu,,,,,,,,,,,,,"03/May/17 3:15 AM;rameshthoomu;[~jjjjibm] I have followed below steps on patch on your patch shared to me

{code:java}
apt-get -qq install -y softhsm2
mkdir -p /var/lib/softhsm/tokens/
softhsm2-util --init-token --slot 0 --label ""ForFabric"" --so-pin 1234 --pin 98765432
chown -R jenkins:jenkins /var/lib/softhsm /etc/softhsm
{code}

cd to /w/workspace/gopath/src/github.com/hyperledger/fabric-sdk-node`
then run `node test/unit/pkcs11.js

below are the observations

{noformat}

1) Tests are worked as expected on `ppc64le` platform
2) FAILED in `x86_64` and `s390x`
{noformat}


[~vpaprots] suggested below changes are required in code to fix these issues

The tests specify an incorrect location for the pkcs11 dll  

{code:java}

	pin = ""98765432""
		label = ""ForFabric""
		possibilities := []string{
			""/usr/lib/softhsm/libsofthsm2.so"",                            //Debian
			""/usr/lib/x86_64-linux-gnu/softhsm/libsofthsm2.so"",           //Ubuntu
			""/usr/lib/s390x-linux-gnu/softhsm/libsofthsm2.so"",            //Ubuntu
			""/usr/lib/powerpc64le-linux-gnu/softhsm/libsofthsm2.so"",      //Power
			""/usr/local/Cellar/softhsm/2.1.0/lib/softhsm/libsofthsm2.so"", //MacOS
		}
{code}

","11/May/17 2:40 AM;rameshthoomu;Integrated required softhsm2 changes in sandbox packer image and tested [~jjjjibm] patch on PKCS tests.. CI changes are working as expected and PKCS tests are working as expected but one of the test is failed.

 

ok 11 Successfully signed message not ok 12 Failed. Error: CKR_SIGNATURE_LEN_RANGE:193 at Error (native) C_Verify:814 --- operator: fail at: process._tickCallback (internal/process/next_tick.js:103:7) ... #",,,,,,,,,,,,,,,,,,,,,,
Client home has incorrect path when environment variables specified,FAB-2796,15368,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,skarim,skarim,15/Mar/17 6:51 PM,20/Mar/17 2:45 PM,26/Apr/18 6:50 AM,20/Mar/17 2:45 PM,,,,,,,,,,fabric-ca,,,,0,,,,,,,,,If you specify either FABRIC_CA_CLIENT_HOME or FABRIC_CA_HOME environment variables it will create a hidden folder for client home (.fabric-ca-client). The hidden folder should only get created when no location for the client home directory has been specified. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00t6x:,,Sprint 14 - Membership Service,,,,,,skarim,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca-client should check TLS cert expiration,FAB-2795,15367,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,rennman,rennman,15/Mar/17 6:46 PM,13/Apr/17 3:00 PM,26/Apr/18 6:50 AM,13/Apr/17 2:59 PM,v1.0.0,v1.0.0-alpha1,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"The fabric-ca-client (via the golang SSL layer) dis-allows the use of an unsupported certificate. These include
  - a cert with an inappropriate KeyUsage extension
  - a cert with an unsupported key type (e.g. DSA)

However, the underlying secure socket code doesn't seem to care about certificate expiration.

To be consistent, we should check the certificates expiration and reject it.

Even better, it would be nice if any and all of these errors get logged. As it stands, e.g. for an unsupported extension, we quietly drop the cert and send the request anyway. Depending on the server's configuration this can fail on the server side, with 
  'client didn't provide a certificate'
It seems odd to me that the the client may be blissfully unaware, thinking that he did send a cert, until the server says he didn't... all because the bad cert is ignored without warning on the client side.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00t6p:,,Sprint 16 - Membership Service,,,,,,rennman,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Parsing enrollment response mismatch,FAB-2792,15364,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,latitiah,latitiah,15/Mar/17 4:12 PM,27/Jul/17 4:38 AM,26/Apr/18 6:50 AM,17/May/17 5:01 PM,,,,,,,,,,fabric-sdk-node,,,,1,,,,,,,,,"Environment:
* *OS:* Ubuntu 14.04
* *node:* v6.9.5
* *npm:* 3.10.10
* *fabric-ca commit:* 73866b8a87939c489c11d346d9e78b436818dbde
* *fabric-sdk-node commit:* 6f77cdf9bbb1e683a601873a2c23cb2d5cdb6d3d
* *network composition:* test/fixtures/docker-compose.yml

When running the test/integration/e2e.js (using TLS) the following error was recieved:
{code:none}

Could not parse enrollment response [{""success"":true,""result"":""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUIzekNDQVlTZ0F3SUJBZ0lVUVVKVVgvWkNpYWtaYkxZODdxdEVNck9ueUs4d0NnWUlLb1pJemowRUF3SXcKWURFTE1Ba0dBMVVFQmhNQ1ZWTXhFekFSQmdOVkJBZ1RDa05oYkdsbWIzSnVhV0V4RmpBVUJnTlZCQWNURFZOaApiaUJHY21GdVkybHpZMjh4RVRBUEJnTlZCQW9UQ0hCbFpYSlBjbWN5TVJFd0R3WURWUVFERXdod1pXVnlUM0puCk1qQWVGdzB4TnpBek1UVXhOVEEzTURCYUZ3MHhPREF5TVRFeU16QTNNREJhTUJBeERqQU1CZ05WQkFNVEJXRmsKYldsdU1Ga3dFd1lIS29aSXpqMENBUVlJS29aSXpqMERBUWNEUWdBRWVudmdnalN3OVNkSE1zVUUyOWRrM2VpaQpZOUtwTm1zZGhYTlV6elZ0UFIzR0s1djJmTmRHTlZsTVQ3dU5XYi83S3JubVhKR00yR0xpZXpjQzBJK1BTNk5zCk1Hb3dEZ1lEVlIwUEFRSC9CQVFEQWdJRU1Bd0dBMVVkRXdFQi93UUNNQUF3SFFZRFZSME9CQllFRkxKM0dTeUEKTW9XRWRSY005QW5KV3gveDQ5SGlNQ3NHQTFVZEl3UWtNQ0tBSUphOXRYOU8rOXp5QWFKcGlaNjBmaXB6KzdjbwpyaFRVZlExYSszWGQ2bkhlTUFvR0NDcUdTTTQ5QkFNQ0Ewa0FNRVlDSVFDcEh2RnNud2Q0UmI4disxWHZmWXVpCjdMMlJPdW9adUdVTnNKS3Bra25TSndJaEFPK2JsWUZZS2hnN2VBakpoWHhJa3Rxd05RbWdEZ1lFdDFPL2x0V0EKTjNjUgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="",""errors"":[],""messages"":[]} ] as JSON due to error [TypeError: First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.] at IncomingMessage.<anonymous> (/opt/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/fabric-ca-client/lib/FabricCAClientImpl.js:560:14) at emitNone (events.js:91:20) at IncomingMessage.emit (events.js:185:7) at endReadableNT (_stream_readable.js:974:12) at _combinedTickCallback (internal/process/next_tick.js:74:11) at process._tickCallback (internal/process/next_tick.js:98:9)
  ---
    operator: fail
    at: cop.enroll.then.then.then.catch (/opt/gopath/src/github.com/hyperledger/fabric-sdk-node/test/unit/util.js:119:8)
{code}

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00t61:,,,,,,,,jackieliu,jjjjibm,latitiah,pranavkaushik,vdods,Yogendrasri,,,,,,,,,15/Mar/17 8:52 PM;latitiah;We're pretty sure this is an environment issue and are trying to figure out what's causing these failures. Thanks Jim for your help!,16/Mar/17 11:57 PM;jimthematrix;hi [~latitiah] were you able to find out the cause of the failure?,"27/Mar/17 10:40 PM;jjjjibm;FYI Jim.  I am seeing a similar sort of error using today's build:

not ok 13 Failed to enroll 'testUser'. Error: Could not parse enrollment response [{""success"":false,""result"":null,""errors"":[{""code"":400,""message"":""Authorization failure""}],""messages"":[]} ] as JSON due to error [TypeError: Cannot read property 'errors' of undefined]
  ---
    operator: fail
    at: process._tickCallback (internal/process/next_tick.js:103:7)

fabric-sdk-node: commit be3cf0b35ebfde560a366ed7e3782b7ff5f69db9
fabric: commit 397f5de8a7787b4ce2a52a81448fd35258ab610e
commit e724a8951e5260f8129fc9d3ba578cb47dbf812f

It is easy to recreate.
1.Git checkout levels or just get the latest.
2.cd fabric-sdk-node/test/integration
3.node fabric-ca-services-tests.js
","29/Mar/17 7:13 PM;jjjjibm;Update:  It's become harder to recreate, but this works:

fabric: commit 561443e60b3331354892e9716cc05eaa6ce1679f
fabric-ca: commit c9498646e67355227d46cb7d1b1c0f6c8b35cf02
fabric-sdk-node: commit 567644d5ec027bd639cf8e1f8a8a5fe2ad5bad9c

1.Checkout levels as indicated
2.Build images from scratch before starting local network
3. cd fabric-sdk-node/test/integration
4.node fabric-ca-services-tests.js (works)
5.(again) node fabric-ca-services-tests.js 
to see this result:
<lines omitted>
not ok 13 Failed to enroll 'testUser'. Error: Could not parse enrollment response [{""success"":false,""result"":null,""errors"":[{""code"":400,""message"":""Authorization failure""}],""messages"":[]} ] as JSON due to error [TypeError: Cannot read property 'errors' of undefined]
  ---
    operator: fail
    at: process._tickCallback (internal/process/next_tick.js:103:7)
  ...



","05/Apr/17 9:21 PM;vdods;I'm still seeing this on the latest;

fabric: cacb292921553900ea808344599b9914632bf1d3
fabric-ca: 77dc0ce08853615e6876db81fb9384c4e9c31209
fabric-sdk-node: 45c2f389ef37f3eab64cfceace46b0157abb9d33

In particular, running the docker-compose in test/fixtures/docker-compose.yaml and then running from the project root `node test/integration/e2e.js` produces 100% failure.

I've determined that the error occurs in the lines (in fabric-ca-client/lib/FabricCAClientImpl.js)

							enrollResponse.enrollmentCert = Buffer.from(res.result.Cert, 'base64').toString();
							enrollResponse.caCertChain = Buffer.from(res.result.ServerInfo.CAChain, 'base64').toString();

because res.result is just a base64 encoded string, not a JSON object having attributes Cert and ServerInfo.  It looks like res.result is probably the Cert, but then it seems as though ServerInfo is missing.  I tried changing these lines to 

							enrollResponse.enrollmentCert = Buffer.from(res.result, 'base64').toString();

And it gets past the current error, but still times out during the ""***** U P G R A D E flow: invoke transaction to move money *****"" section.  Commenting out `require('./e2e/upgrade.js');` from e2e.js then allows all remaining tests (which would be the full non-upgrade path) to pass.

Note that the suggested change above leaves enrollResponse.caCertChain un-assigned, so it may cause another 'undefined attribute' bug down the line, in particular, in setting the rootCertificate attribute of the response to the FabricCAServices.enroll method.
","06/Apr/17 8:56 AM;jackieliu;I have the same issue, is there any solution?

LiuXins-MBP:test liuxin$ node query.js
info: Returning a new winston logger with default configurations
info: [Chain.js]: Constructed Chain instance: name - fabric-client1, securityEnabled: true, TCert download batch size: 10, network mode: true
info: [Peer.js]: Peer.const - url: grpc://localhost:7051 options  grpc.ssl_target_name_override=tlsca, grpc.default_authority=tlsca
info: [Peer.js]: Peer.const - url: grpc://localhost:8055 options  grpc.ssl_target_name_override=tlsca, grpc.default_authority=tlsca
info: [Peer.js]: Peer.const - url: grpc://localhost:8056 options  grpc.ssl_target_name_override=tlsca, grpc.default_authority=tlsca
info: [Client.js]: Failed to load user ""admin"" from local key value store
info: [FabricCAClientImpl.js]: Successfully constructed Fabric CA service client: endpoint - {""protocol"":""http"",""hostname"":""localhost"",""port"":7054}
info: [crypto_ecdsa_aes]: This class requires a KeyValueStore to save keys, no store was passed in, using the default store /Users/liuxin/.hfc-key-store
[2017-04-06 16:50:07.903] [ERROR] Helper - Error: Could not parse enrollment response [{""success"":true,""result"":{""Cert"":""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUI4akNDQVplZ0F3SUJBZ0lVU1JjODd6eXBERlhhUit6MXR1RFg3NklLUk53d0NnWUlLb1pJemowRUF3SXcKZnpFTE1Ba0dBMVVFQmhNQ1ZWTXhFekFSQmdOVkJBZ1RDa05oYkdsbWIzSnVhV0V4RmpBVUJnTlZCQWNURFZOaApiaUJHY21GdVkybHpZMjh4SHpBZEJnTlZCQW9URmtsdWRHVnlibVYwSUZkcFpHZGxkSE1zSUVsdVl5NHhEREFLCkJnTlZCQXNUQTFkWFZ6RVVNQklHQTFVRUF4TUxaWGhoYlhCc1pTNWpiMjB3SGhjTk1UY3dOREEyTURnME5UQXcKV2hjTk1UZ3dNekExTVRZME5UQXdXakFRTVE0d0RBWURWUVFERXdWaFpHMXBiakJaTUJNR0J5cUdTTTQ5QWdFRwpDQ3FHU000OUF3RUhBMElBQkgwb0RZblFRanBpSXIrMHhGSzExa3NFNVBhQUVOdy9TSVg1VjRYMXdRMksvVEJHClVkTENKLzZiU3VHWHdkMWEvMHcyOUZGeGRnbm53ZmlvOXdHcE5lV2pZREJlTUE0R0ExVWREd0VCL3dRRUF3SUMKQkRBTUJnTlZIUk1CQWY4RUFqQUFNQjBHQTFVZERnUVdCQlNGanZtSVBqOFdOdFJIU2VDZTIvVmxJYmRpVXpBZgpCZ05WSFNNRUdEQVdnQlFYWjBJOXFwNkNQOFRGSFo5Ync1blJ0WnhJRURBS0JnZ3Foa2pPUFFRREFnTkpBREJHCkFpRUFoNmNSRWh1VTBoMzN5UDdwblIyRHFCUkQzb2oyaVgwTE9sSGg4V056Wm80Q0lRQzJJMkRsRDlVbkRoQmQKMW1KQVN5cHR3cEt5aGh2em4rNTR6Ly9WdmhvNVlRPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo="",""ServerInfo"":{""CAName"":"""",""CAChain"":""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNZakNDQWdtZ0F3SUJBZ0lVQjNDVERPVTQ3c1VDNUs0a24vQ2FxbmgxMTRZd0NnWUlLb1pJemowRUF3SXcKZnpFTE1Ba0dBMVVFQmhNQ1ZWTXhFekFSQmdOVkJBZ1RDa05oYkdsbWIzSnVhV0V4RmpBVUJnTlZCQWNURFZOaApiaUJHY21GdVkybHpZMjh4SHpBZEJnTlZCQW9URmtsdWRHVnlibVYwSUZkcFpHZGxkSE1zSUVsdVl5NHhEREFLCkJnTlZCQXNUQTFkWFZ6RVVNQklHQTFVRUF4TUxaWGhoYlhCc1pTNWpiMjB3SGhjTk1UWXhNREV5TVRrek1UQXcKV2hjTk1qRXhNREV4TVRrek1UQXdXakIvTVFzd0NRWURWUVFHRXdKVlV6RVRNQkVHQTFVRUNCTUtRMkZzYVdadgpjbTVwWVRFV01CUUdBMVVFQnhNTlUyRnVJRVp5WVc1amFYTmpiekVmTUIwR0ExVUVDaE1XU1c1MFpYSnVaWFFnClYybGtaMlYwY3l3Z1NXNWpMakVNTUFvR0ExVUVDeE1EVjFkWE1SUXdFZ1lEVlFRREV3dGxlR0Z0Y0d4bExtTnYKYlRCWk1CTUdCeXFHU000OUFnRUdDQ3FHU000OUF3RUhBMElBQktJSDViMkphU21xaVFYSHlxQytjbWtuSUNjRgppNUFkZFZqc1FpekRWNnVaNHY2cytQV2lKeXpmQS9yVHRNdllBUHEveWVFSHBCVUIxajA1M214bnBNdWpZekJoCk1BNEdBMVVkRHdFQi93UUVBd0lCQmpBUEJnTlZIUk1CQWY4RUJUQURBUUgvTUIwR0ExVWREZ1FXQkJRWFowSTkKcXA2Q1A4VEZIWjlidzVuUnRaeElFREFmQmdOVkhTTUVHREFXZ0JRWFowSTlxcDZDUDhURkhaOWJ3NW5SdFp4SQpFREFLQmdncWhrak9QUVFEQWdOSEFEQkVBaUFIcDVSYnA5RW0xRy9VbUtuOFdzQ2JxRGZXZWNWYlpQUWozUks0Cm9HNWtRUUlnUUFlNE9PS1loSmRoM2Y3VVJhS2ZHVGY0OTIvbm1SbXRLK3lTS2pwSFNyVT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=""}},""errors"":[],""messages"":[]}
] as JSON due to error [TypeError: First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.]
    at IncomingMessage.<anonymous> (/Users/liuxin/ProjectSource/new/hyperledger/hackfest/node_modules/fabric-ca-client/lib/FabricCAClientImpl.js:394:14)
    at emitNone (events.js:91:20)
    at IncomingMessage.emit (events.js:185:7)
    at endReadableNT (_stream_readable.js:974:12)
    at _combinedTickCallback (internal/process/next_tick.js:74:11)
    at process._tickCallback (internal/process/next_tick.js:98:9)
[2017-04-06 16:50:07.905] [ERROR] QUERY - Error: Failed to obtain an enrolled user
    at ca_client.enroll.then.then.then.catch (/Users/liuxin/ProjectSource/new/hyperledger/hackfest/helper.js:59:12)
    at process._tickCallback (internal/process/next_tick.js:103:7)
","12/May/17 12:57 PM;pranavkaushik;Hi, I am facing same issue during enroll.

One thing I noticed and may be of help is:

res.result is not a nested object but just contains the enrollmentCert then why is line 550 & 551 of FabricCAClientImpl.js trying to extract res.cert and res.result.ServerInfo.CAChain

 

When i changed the code from 
{code:java}
enrollResponse.enrollmentCert = new Buffer.from(res.result.Cert, 'base64').toString();
 enrollResponse.caCertChain = new Buffer.from(res.result.ServerInfo.CAChain, 'base64').toString();{code}
 

to just this 
{code:java}
enrollResponse.enrollmentCert = new Buffer.from(res.result, 'base64').toString();{code}
 

the error vanished. However, this might result in other issues due to to not returning caCertChain which I am not sure of.

 

Please suggest.

 ","15/May/17 5:53 AM;pranavkaushik;Any update on this? Please let me know if this is the right place to ask a question or discuss about this issue?

 

Thanks,

Pranav","17/May/17 5:01 PM;jimthematrix;[~pranavkaushik] what level of SDK and fabric-ca are you using? we run this on every CI build and it has not turned up for a long time. closing the defect for now. if you are still seeing it on the latest, please re-open and let us know the levels.","27/Jul/17 4:38 AM;Yogendrasri;Is there any solution of above issue, I am still facing this error with ""fabric-ca-client"": "">=1.0.0-rc1 <1.0.0-rc1.10"", ""fabric-client"": "">=1.0.0-rc1 <1.0.0-rc1.10"".

Below is the error:

Caught Error Error: Could not parse enrollment response [404 page not found
] as JSON due to error [SyntaxError: Unexpected token p in JSON at position 4]
    at IncomingMessage.<anonymous> (/Users/yogendra/blockchain-first-example/fabric-samples/
fabcar/node_modules/fabric-ca-client/lib/FabricCAClientImpl.js:704:14)
    at emitNone (events.js:91:20)
    at IncomingMessage.emit (events.js:185:7)

 

 ",,,,,,,,,,,,,,
unit-test cannot be performed with low version docker-compose,FAB-2789,15361,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,huyanyan,huyanyan,15/Mar/17 9:31 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,14/Apr/17 8:59 PM,v1.0.0,v1.0.0-alpha1,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,,"Low version docker-compose(e.g. 1.5.2) doesn't support ""--abort-on-container-exit"" option for ""up"" operation and thus will fail the unit-test execution.

https://github.com/hyperledger/fabric/blob/master/Makefile#L118",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00t5l:,,,,,,,,Amanskywalker,huyanyan,mastersingh24,,,,,,,,master,,,true,"15/Mar/17 3:20 PM;Amanskywalker;Explicitly set the version of the docker-compose.yml file to version '3'
and create a pull request at https://github.com/hyperledger/fabric/pull/34","16/Mar/17 1:55 AM;huyanyan;Hi, Aman, thanks for the fix! But I guess if we enforce the compose yaml version to ""3"", users who only have lower version of docker and docker compose will not be able to run unit-tests?","02/Apr/17 12:08 PM;mastersingh24;Actually, we don't want to do that.  What we need to do is document the minimum version of docker compose needed - which is 1.8.1 or higher",02/Apr/17 1:13 PM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/7633/,,,,,,,,,,,,,,,,,,,,
Peer response becomes slow and finally crashed after writing many entries to World State,FAB-2788,15360,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,ryokawajp,ryokawajp,15/Mar/17 7:42 AM,12/Apr/17 4:04 PM,26/Apr/18 6:50 AM,12/Apr/17 3:58 PM,,,,,,,v0.6,WON'T FIX,,fabric-ledger,,,,0,,,,,,,,,"I understand that Table API and Rocks DB are no longer supported in Fabric v1.0, but just want to share this information with v0.6.

- During a long run (about one or two days), Client 1 sends many transactions using HFC for Node.js. The chaincode recorded the contents of the transactions to World State, creating one key for one transaction with Table API.
   - Approximately 0.1-0.5 transactions per second.
   - I guess there were approximately 10K records.
- Another client (Client 2) queries a small amount of records (about 10 records), or invokes a transaction with very low frequency (less than 0.01 TPS).
- During the long run, the response time of the query / invoke by Client 2 becomes gradually slower by approx. 2x - 5x. One query requires 20 seconds.
- Sometimes the peer crashes.
   - The error messages are not always the same. Typical two errors are attached.
   - The crash may be accompanied by chaincode crash or may not.

I got a kind comment from Manish that when there are a large number of entries in World State and one queries a small number of entries, ledger.state.dataStructure.name='trie' instead of 'bucketree' in core.yaml gives a better performance.
https://github.com/hyperledger/fabric/blob/v0.6/peer/core.yaml#L360

So as a workaround,
-I tried 'trie' configuration with a few thousand records and up to now, I observe no response time increase nor crash. Looks working fine to me.-
- Sorry. I found a mistake in a test case. Let me confirm it later.

I believe that Problem 1 of this JIRA item does not apply to our case because we only query small number of items up to 10. While Problem 2 could apply because we are using v0.6.0.
https://jira.hyperledger.org/browse/FAB-860

The error message and its situation are similar to this JIRA item, but we did not see ""Timeout expired while executing transaction"". Instead we see ""Context canceled"".
https://jira.hyperledger.org/browse/FAB-1163

A sample chaincode program to be attached later.
Error 1. (I remember that this crash happened when I send an Invoke TX)
{noformat}
[31m15:04:23.654 [chaincode] processStream -> ERRO 01d[0m Error handling chaincode support stream: stream error: code = 1 desc = ""context canceled""
pure virtual method called
terminate called without an active exception
SIGABRT: abort
PC=0x7f07cf69ec37 m=8
signal arrived during cgo execution

goroutine 1134 [syscall, locked to thread]:
runtime.cgocall(0xbb7a90, 0xc8249636c0, 0x0)
	/opt/go/src/runtime/cgocall.go:123 +0x11b fp=0xc824963670 sp=0xc824963640
github.com/hyperledger/fabric/vendor/github.com/tecbot/gorocksdb._Cfunc_rocksdb_iter_seek(0x7f07bc000930, 0xc820a18690, 0xe1)
	github.com/hyperledger/fabric/vendor/github.com/tecbot/gorocksdb/_obj/_cgo_gotypes.go:1090 +0x3a fp=0xc8249636c0 sp=0xc824963670
github.com/hyperledger/fabric/vendor/github.com/tecbot/gorocksdb.(*Iterator).Seek(0xc8200205e8, 0xc820a18690, 0xe1, 0xf0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/tecbot/gorocksdb/iterator.go:93 +0xd1 fp=0xc824963730 sp=0xc8249636c0
github.com/hyperledger/fabric/core/ledger/statemgmt/buckettree.(*RangeScanIterator).seekForStartKeyWithinBucket(0xc8249ae930, 0xb22c3)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/statemgmt/buckettree/range_scan_iterator.go:92 +0x9a fp=0xc824963790 sp=0xc824963730
github.com/hyperledger/fabric/core/ledger/statemgmt/buckettree.(*RangeScanIterator).Next(0xc8249ae930, 0xf9e620)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/statemgmt/buckettree/range_scan_iterator.go:70 +0x634 fp=0xc8249639f8 sp=0xc824963790
github.com/hyperledger/fabric/core/ledger/statemgmt/state.(*CompositeRangeScanIterator).Next(0xc8249b3860, 0xc8214c2bb0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/statemgmt/state/composite_range_scan_iterator.go:51 +0x183 fp=0xc824963af8 sp=0xc8249639f8
github.com/hyperledger/fabric/core/ledger/statemgmt/state.(*CompositeRangeScanIterator).Next(0xc8249b3860, 0xc8214c2ab0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/statemgmt/state/composite_range_scan_iterator.go:79 +0x7e2 fp=0xc824963bf8 sp=0xc824963af8
github.com/hyperledger/fabric/core/ledger/statemgmt/state.(*CompositeRangeScanIterator).Next(0xc8249b3860, 0xc824929000)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/statemgmt/state/composite_range_scan_iterator.go:79 +0x7e2 fp=0xc824963cf8 sp=0xc824963bf8
github.com/hyperledger/fabric/core/chaincode.(*Handler).handleRangeQueryState.func1(0xc822b3c180, 0xc823783a90)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:729 +0xb85 fp=0xc824963f90 sp=0xc824963cf8
runtime.goexit()
	/opt/go/src/runtime/asm_amd64.s:1998 +0x1 fp=0xc824963f98 sp=0xc824963f90
created by github.com/hyperledger/fabric/core/chaincode.(*Handler).handleRangeQueryState
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:774 +0x3f

(stack trace continues ...)
{noformat}

Error 2
{noformat}
panic: runtime error: invalid memory address or nil pointer dereference
	panic: runtime error: invalid memory address or nil pointer dereference
[signal 0xb code=0x1 addr=0x0 pc=0x7789b1]

goroutine 436555 [running]:
panic(0xd96880, 0xc8200120b0)
	/opt/go/src/runtime/panic.go:464 +0x3e6
github.com/hyperledger/fabric/core/chaincode.(*Handler).handleRangeQueryStateClose.func1.1(0xc820470180, 0xc8228d83c0, 0xc820927ea0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:911 +0x261
panic(0xd96880, 0xc8200120b0)
	/opt/go/src/runtime/panic.go:426 +0x4e9
github.com/hyperledger/fabric/core/chaincode.(*Handler).getRangeQueryIterator(0xc820470180, 0x0, 0xc8234c8b70, 0x24, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:155 +0x89
github.com/hyperledger/fabric/core/chaincode.(*Handler).handleRangeQueryStateClose.func1(0xc820470180, 0xc8228d83c0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:925 +0x52f
created by github.com/hyperledger/fabric/core/chaincode.(*Handler).handleRangeQueryStateClose
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:945 +0x3f
{noformat}

A sample program added. This program queries 10 records which have a common prefix using RangeQueryState(), from World State which also has 20000 entries of a different prefix. 
As in memo2.txt, the result shows that the query time increased by 6 times in the case of ""buckettree"" and no increase observed in the case of ""trie"". In either cases, I did not observe crashes (it took only 3.5s in the worst case.).

After you deployed the chaincode to a blockchain network of a clean database, you can run
{noformat}
time ./query.sh
./create_keys_l.sh
time ./query.sh
{noformat}
(it takes 20 minuites to run the second step.)
","- Fabric v0.6.0-preview docker image, 
- HFC for Node.js 0.6.5, 
- consensus=noop, 
- batch size=1
- one peer",,,,,,,,,,,,,,,,,,,17/Mar/17 5:03 AM;ryokawajp;create_keys_l.sh;https://jira.hyperledger.org/secure/attachment/10594/create_keys_l.sh,17/Mar/17 5:03 AM;ryokawajp;longrunperformance.go;https://jira.hyperledger.org/secure/attachment/10591/longrunperformance.go,17/Mar/17 5:03 AM;ryokawajp;memo2.txt;https://jira.hyperledger.org/secure/attachment/10592/memo2.txt,17/Mar/17 5:03 AM;ryokawajp;query.sh;https://jira.hyperledger.org/secure/attachment/10593/query.sh,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00t5d:,,,,,,,,denyeart,jorgedr,nextisd,ryokawajp,,,,,,,,,,,"24/Mar/17 11:05 AM;ryokawajp;I got an additional information on peer crash problem FAB-1163 from Dave Enyeart.
https://chat.hyperledger.org/channel/fabric-ledger?msg=5e8tveA4YnraFJnGc

In summary, there is a timeout when a transaction (query/invoke/deploy) takes to much time. This option was a fixed value of 30s and not configurable but extended to be configurable in v1.0 a few days ago.
https://jira.hyperledger.org/browse/FAB-2767
","12/Apr/17 3:57 PM;denyeart;Thanks for providing all the detail [~rjkuro].
I'll move this to fabric-ledger so that it can be easily referenced, but I'll actually close the bug since it is not applicable to 1.0 and no enhancements are planned for 0.6.",,,,,,,,,,,,,,,,,,,,,,
Chain cleanup,FAB-2782,15354,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rickr,denisgaebler,denisgaebler,14/Mar/17 3:26 PM,13/Apr/17 9:51 PM,26/Apr/18 6:50 AM,13/Apr/17 9:51 PM,,,,,,,v1.0.0,,,fabric-sdk-java,,,,0,java-SDK,v1.0,,,,,,,"JVM never terminates due to Executors Thread Pool - expose interface to cancel or access completablefutures in Chain.java

Hi,

when running the fabric sdk in a single main with no threading from the callers end, the JVM never terminates after any successful query or invoke calls with the hyperledger SDK.
When looking at the JVM threads the threads from the executor threadpool can be seen.
While this is ok for a server or long running jvm to keep the threadpool, when just running a java main, it is expected that the JVM terminates, but it does not.

Exposing the Executors es did not help, because the shutdown or shutdownnow methods just cause the threads to interrupt, they do not terminate.
I would like to have the completablefutures to be exposed on the chain object with a public method to be able to explicitly terminate it. Maybe a chain.terminate() or chain.close() method would be great.

I saw the comments on timeout, but thats not what is needed, the JVM should not continue to run for x seconds (=timeout value) until the timeout hits after the replys.

I have also noticed that some of the threads disappear after 60 seconds (the grpc channels) but there are threads that remain active.

Thanks, Denis.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzcm:zb,,Sprint 16 - SDK Java,,,,,,denisgaebler,rickr,,,,,,,,,master,,,true,09/Apr/17 7:50 PM;rickr;Have a fix for this locally. ,"10/Apr/17 10:05 PM;rickr;I don't think that was the main cause.  But this high lighted the need for a cleanup aka shutdown chain that will clean up resources. 
Even without calling the shutdown I think you'll see the process come to an end.",,,,,,,,,,,,,,,,,,,,,,
fabric peer crash because transaction.proto is not matching fabric proto,FAB-2781,15353,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,denisgaebler,denisgaebler,14/Mar/17 3:16 PM,15/Mar/17 7:39 AM,26/Apr/18 6:50 AM,15/Mar/17 7:39 AM,,,,,,,v1.0.0,,,fabric-sdk-java,,,,0,java-SDK,v1.0,,,,,,,"Hi,

after changing peer/transaction.proto to the following code, it worked:



{code:java}
message Transaction {

        // Version indicates message protocol version.
        int32 version = 1;

        // Timestamp is the local time that the
        // message was created by the sender
        google.protobuf.Timestamp timestamp = 2;

        // The payload is an array of TransactionAction. An array is necessary to
        // accommodate multiple actions per transaction
        repeated TransactionAction actions = 3;

}
{code}

On the other hand, not matching message format should not cause the fabric peer/orderer to crash.

Thanks, Denis.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00t49:,,,,,,,,denisgaebler,rickr,,,,,,,,,,,,,"14/Mar/17 10:52 PM;rickr;Most likely you got a miss match with the server client in the READ.me .. I just check the recent that they're in sync.

Please get the the version of Fabric in the README.md and confirm.","15/Mar/17 7:39 AM;denisgaebler;Hi Rick,

I have used the https://github.com/hyperledger/fabric/blob/v1.0.0-preview/protos/peer/transaction.proto with the java SDK which has the additional fields.
The master branch was broken, so I have used the preview.

I think the problem can be closed then.

Thanks.",,,,,,,,,,,,,,,,,,,,,,
EnrollmentException: Failed to enroll user admin on non ASCII/UTF platform,FAB-2776,15347,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rickr,denisgaebler,denisgaebler,14/Mar/17 1:08 PM,18/Mar/17 3:16 PM,26/Apr/18 6:50 AM,18/Mar/17 3:16 PM,,,,,,,v1.0.0,,,fabric-sdk-java,,,,0,java-SDK,v1.0,,,,,,,"Hi,

when running the java sdk as client on a non ASCII/UTF platform I get the following exception:
org.hyperledger.fabric.sdk.exception.EnrollmentException: Failed to enroll user admin                                                                           
        at org.hyperledger.fabric.sdk.MemberServicesFabricCAImpl.enroll(MemberServicesFabricCAImpl.java:272)                                                    
        at org.hyperledger.fabric.sdk.User.enroll(User.java:248)                
        at org.hyperledger.fabric.sdk.HFClient.enroll(HFClient.java:301)        
        at com.ibm.blockchain.BlockchainWrapper.getText(BlockchainWrapper.java:58)                                                                              
        at com.ibm.blockchain.RunBlockChainWrapper.main(RunBlockChainWrapper.java:10)                                                                           
Caused by: java.lang.IllegalArgumentException: Illegal base64 character -2d     
        at java.util.Base64$Decoder.decode0(Base64.java:725)                    
        at java.util.Base64$Decoder.decode(Base64.java:537)                     
        at org.hyperledger.fabric.sdk.MemberServicesFabricCAImpl.enroll(MemberServicesFabricCAImpl.java:261)                                                    
        ... 4 more  

The reason is, that the following line in MemberServicesFabricCAImpl.enroll:

{code:java}
261 String signedPem = new String(b64dec.decode(result.getBytes()));
{code}

Uses getBytes with default encoding.

So I changed it to:

{code:java}
            String signedPem = new String(b64dec.decode(result.getBytes(StandardCharsets.UTF_8)));
{code}


and it worked on both x86 and the other platform.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00t2x:,,,,,,,,denisgaebler,rickr,,,,,,,,,master,,,true,"18/Mar/17 1:26 PM;rickr;https://gerrit.hyperledger.org/r/#/c/7329/

Thanks for pointing this out",,,,,,,,,,,,,,,,,,,,,,,
[fabric-ca] Cannot clone or checkout fabric-ca  -- error: unable to create file <filename> (invalid argument),FAB-2771,15339,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,jjjjibm,jjjjibm,13/Mar/17 8:33 PM,02/Apr/17 12:16 PM,26/Apr/18 6:50 AM,02/Apr/17 12:16 PM,v1.0.0,,,,,,WON'T FIX,,,fabric-ca,,,,0,,,,,,,,,"Today, I cannot clone or update fabric-ca.

First attempt: git pull 
$ git pull
Already up-to-date.

Windows Account@IBM-TGGEOH4VC1O MINGW64 /c/go/src/github.com/hyperledger/fabric-ca (master)
$ git status
On branch master
Your branch is up-to-date with 'origin/master'.
Changes not staged for commit:
  (use ""git add/rm <file>..."" to update what will be committed)
  (use ""git checkout -- <file>..."" to discard changes in working directory)

        deleted:    vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA.crt
        deleted:    vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA_2.crt

Untracked files:
  (use ""git add <file>..."" to include in what will be committed)

        vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/S-TRUSTAuthenticationandEncryptionRootCA2005
        vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/http


Seeing missing files, I tried git checkout:

{color:#654982}Windows Account@IBM-TGGEOH4VC1O MINGW64 /c/go/src/github.com/hyperledger/fabric-ca (master)
$ git checkout vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/S-TRUSTAuthenticationandEncryptionRootCA2005
error: pathspec 'vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/S-TRUSTAuthenticationandEncryptionRootCA2005' did not match any file(s) known to git.

Windows Account@IBM-TGGEOH4VC1O MINGW64 /c/go/src/github.com/hyperledger/fabric-ca (master)
$ git checkout vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/http
error: pathspec 'vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/http' did not match any file(s) known to git.
{color}
Checkout didn't work, so I decided to remove the directory and clone a new one: 
{color:#654982}$ rm -rf fabric-ca

Windows Account@IBM-TGGEOH4VC1O MINGW64 /c/go/src/github.com/hyperledger
$ git clone http://gerrit.hyperledger.org/r/fabric-ca
Cloning into 'fabric-ca'...
remote: Counting objects: 2969, done
remote: Finding sources: 100% (13/13)
remote: Total 4714 (delta 0), reused 4705 (delta 0)
Receiving objects: 100% (4714/4714), 19.39 MiB | 2.64 MiB/s, done.
Resolving deltas: 100% (1244/1244), done.
Checking connectivity... done.
{color:#654982}error: unable to create file {color}vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA.crt (Invalid argument)
{color:#654982}error: unable to create file {color}vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA_2.crt (Invalid argument)
Checking out files: 100% (4039/4039), done.
fatal: unable to checkout working tree
warning: Clone succeeded, but checkout failed.
You can inspect what was checked out with 'git status'
and retry the checkout with 'git checkout -f HEAD'
{color}

I decided to follow the suggestion in the error message: 

{color:#654982}$ cd fabric-ca

Windows Account@IBM-TGGEOH4VC1O MINGW64 /c/go/src/github.com/hyperledger/fabric-ca (master)
$ git checkout -f HEAD
error: unable to create file vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA.crt (Invalid argument)
error: unable to create file vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA_2.crt (Invalid argument)
Checking out files: 100% (4039/4039), done.
Your branch is up-to-date with 'origin/master'.{color}

git status = same as before



","Vagrant VM for Win7
fabric-ca commit c73ce65eaa9732dcf51930e75ed99adfb4edce85
fabric: commit 77760ef1c420816bd6984c33bd3d3f97323ffa71

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00t1d:,,,,,,,,aambati,chrisconway,jjjjibm,mastersingh24,,,,,,,,,,,"14/Mar/17 3:25 PM;aambati;[~jjjjibm] https://github.com/hyperledger/fabric-ca is the correct github URL for fabric-ca. 

You can try _go get github.com/hyperledger/fabric-ca/cmd/…_
",02/Apr/17 12:15 PM;mastersingh24;[~jjjjibm] - the issue is that one of the files used by the vendored cfssl packages uses illegal Windows characters.  There's not much that can be done about that but if should not actually cause you any issues.  If built the fabric-ca directly on Windows before as well as submitted changes.  So I'm going to close this because there's really nothing that can be done about it and I don't believe this actually affects anything,02/Apr/17 12:16 PM;mastersingh24;marking as WON'T FIX,,,,,,,,,,,,,,,,,,,,,
Unable to use HFC with PM2 and another gRPC call,FAB-2765,15333,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,Asara,Asara,13/Mar/17 6:40 PM,17/Apr/17 4:51 AM,26/Apr/18 6:50 AM,17/Apr/17 4:49 AM,v1.0.0,,,,,,WON'T FIX,,,fabric-sdk-node,,,,0,,,,,,,,,"We have created a repo on github to exhibit the issue.

https://github.com/jrosmith/hfc_test

When using hfc along with PM2 and making other gRPC calls, there seems to be a deadlock which causes the service to completely lock up. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00t01:,,,,,,,,Asara,binhn,,,,,,,,,,,,,09/Apr/17 8:15 PM;binhn;I am not sure what you are trying to do and which service locks up? ,"17/Apr/17 4:51 AM;jimthematrix;thanks for reporting the issue. At this point we are not touching HFC 0.6.x, all development efforts focused on v1.0 (fabric-client and fabric-ca-client in npm). if you want to contribute a fix we can consider reviewing and publishing it. in that case please re-open and assign to yourself.",,,,,,,,,,,,,,,,,,,,,,
CI build script needs to install node v6.9.x,FAB-2763,15331,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,cdaughtr,cdaughtr,13/Mar/17 3:10 PM,05/Apr/17 6:46 PM,26/Apr/18 6:50 AM,05/Apr/17 6:46 PM,,,,,,,,,,fabric-sdk-node,,,,0,build-system,,,,,,,,"The build script is installing node v7.4.0, but we currently support v6.9.x, so this needs to be changed to v6.9.x.

In the fabric-sdk-node README.md,
To build and test, the following pre-requisites must be installed first: 
node runtime version 6.9.x, note that 7.0 is not supported at this point
npm tool version 3.10.x

https://github.com/hyperledger/ci-management/blob/master/packer/provision/docker.sh#L156

deb_install_node() {
    # Node install
    pushd /usr/local
    curl https://nodejs.org/dist/v7.4.0/node-v7.4.0-linux-x64.tar.xz | tar xJf - --strip-components=1
    popd
    echo npm -v: `npm -v`
    echo node -v: `node -v`
}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00szl:,,,,,,,,cdaughtr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enrollment request with bad authentication header succeeds (it should fail),FAB-2761,15329,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,aambati,aambati,13/Mar/17 2:48 PM,15/Mar/17 3:50 PM,26/Apr/18 6:50 AM,15/Mar/17 3:50 PM,,,,,,,,,,,,,,0,,,,,,,,,"If authType == basic and a bogus authorization header is sent , fcaAuthHandler serveHTTP function will allow the request through, instead of returning an error.

For example:
curl -X POST -H ""Authorization:blah"" http://fabrica-ca-server-hostname:7055/enroll -d '{""hosts"":null,""certificate_request"":""-----BEGIN CERTIFICATE REQUEST-----\nMIIBATCBqQIBADAQMQ4wDAYDVQQDEwVhZG1pbjBZMBMGByqGSM49AgEGCCqGSM49\nAwEHA0IABCK1am728KdO0iOeJuK3+Z05T9Mw2rxmQO3SIMfiGEJ56GZvcP/iN/z5\np43hTiF5do98O0DtByD37b4bCdJ/3l+gNzA1BgkqhkiG9w0BCQ4xKDAmMCQGA1Ud\nEQQdMBuCGWFuaWxzLW1icC5yYWxlaWdoLmlibS5jb20wCgYIKoZIzj0EAwIDRwAw\nRAIgIeZDliMQEX9+uqZXCcLvAfRUXoBzg/74jZQReaHmWKMCIAovDiMdrmbSIzT5\nlDSknJdgXMST2HF9SoRzHewuR6cL\n-----END CERTIFICATE REQUEST-----\n"",""profile"":"""",""crl_override"":"""",""label"":""""}'
will succeed even though authorization header is invalid

Keith Smith suggested this:
We should add an enroll test case for this and make sure the test case fails before fixing it.  To add this test case, I recommend adding a testBogusAuthHeader test case to lib/client_test.go by copying the Client.Enroll func and changing this line: ""post.SetBasicAuth(req.Name, req.Secret)"" to add the bogus authorization header instead.

To fix the code in this function, I recommend just changing the logic to a switch statement based on ah.authType just to make the 3 cases more explicit and easy to follow logic, each being self-contained.",,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sz5:,,,,,,,,aambati,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Delivery service client need to failover to another ordering service endpoints in case of failure.,FAB-2759,15327,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,C0rWin,C0rWin,13/Mar/17 11:09 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,13/Apr/17 8:05 AM,,,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,ga,gossip,gossip_component,,,,,Currently the peer code has no fallback logic of retries in case of the ordering service is not up and running. We need to take care of implementing some circuit breaker to make sure to eventually get connected to the ordering service once it becomes available. Moreover need to keep special care of making peer still be able to maintain the ability of peers to join the new channels and starting pulling out object from ordering right after peer will connect to it.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|hzzz9b:,,Sprint 13 - Gossip,Sprint 14 - Gossip,Sprint 16 - Gossip,,,,C0rWin,kchristidis,mrshah-ibm,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Batching of state transfer request.,FAB-2756,15324,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,13/Mar/17 8:44 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,13/Apr/17 7:28 PM,,,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,ga,gossip,,,,,,"Currently anti entropy procedure tries to complete missing blocks in one batch, this need to be changed to batch the range of missed blocks to request from the neighbor peers",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|hzzz7f:,,Sprint 13 - Gossip,Sprint 14 - Gossip,Sprint 15 - Gossip,Sprint 16 - Gossip,,,C0rWin,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Orderer TLS config not populated from orderer yaml,FAB-2738,15306,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,10/Mar/17 7:59 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,28/Mar/17 6:32 PM,,,,,,,,,,fabric-orderer,,,,0,common-components,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00su1:,,,,,,,,jyellick,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
make dist-clean all fails on test,FAB-2733,15301,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jeffgarratt,justatad,justatad,10/Mar/17 5:06 PM,11/Jan/18 8:06 AM,26/Apr/18 6:50 AM,09/Jun/17 4:20 PM,v1.0.0-alpha2,,,,,,v1.0.0,,,fabric-quality,,,,2,,,,,,,,,"Hi - I am unable to build Fabric, it fails with the following error:

Failing scenarios:
features/bootstrap.feature:263 Bootstrap a development network with 4 peers (2 orgs) and 1 orderer (1 org), each having a single independent root of trust (No fabric-ca, just openssl) – @1.1 Orderer Options

0 features passed, 1 failed, 2 skipped
0 scenarios passed, 1 failed, 24 skipped
21 steps passed, 1 failed, 249 skipped, 0 undefined
Took 0m14.204s
make: *** [behave] Error 1",OS X Sierra,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ssx:,,,,,,,,ChristopherFerris,hiteshjoshi1,jeffgarratt,justatad,latitiah,rameshthoomu,scottz,tiennv,,,,,,,09/Apr/17 8:16 PM;binhn;Looking into Makefile and try to build peer and orderer separately. There is an effort to overhaul the build procedure https://jira.hyperledger.org/browse/FAB-2999,"14/Apr/17 12:29 AM;ChristopherFerris;[~justatad] just ran with latest master and while it did fail, it failed on a different feature test. Are you still having the same problem?",23/Apr/17 2:25 PM;ChristopherFerris;[~justatad] have you followed the set up steps in the bddtests/README.md? https://github.com/hyperledger/fabric/tree/master/bddtests,23/Apr/17 2:26 PM;ChristopherFerris;It may also be a duplicate of https://jira.hyperledger.org/browse/FAB-3216,"26/Apr/17 5:01 AM;hiteshjoshi1;I have the exact same issue. 
Build Environment
Base Machine: Windows 8.1 Professional
Vagrant VM - Ubuntu 
Python 2.7.12","28/Apr/17 2:04 PM;rameshthoomu;[~hiteshjoshi1] [~justatad] I see behave tests are working as expected on fabric commit # *fc268dabd0c5d93ba5e7a5cbdc1e02c366b5827a*.. Please find below the build log.

{code:java}
00:10:31.522 context.failed = False
00:10:31.522 1 feature passed, 0 failed, 2 skipped
00:10:31.522 1 scenario passed, 0 failed, 24 skipped
00:10:31.522 71 steps passed, 0 failed, 211 skipped, 0 undefined
00:10:31.522 Took 0m50.277s
{code}

https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-behave-x86_64/634/consoleFull..
","26/May/17 10:49 PM;ChristopherFerris;This is a weird one, but the directions to install a virtual env don't seem to resolve the problem. The tests pass in some environments and not in others. Finding the difference is the key. ",01/Jun/17 8:59 PM;latitiah;Assigning to Jeff since this seems to be a behave test failure depending on the environment.,"01/Jun/17 9:32 PM;ChristopherFerris;Note that [~jeffgarratt] and I spent better part of an afternoon on this. Very puzzling. I still cannot get a certain test to run.

FWIW here is my environment:

alabaster (0.7.10)

appdirs (1.4.3)

asn1crypto (0.22.0)

b3j0f.aop (0.8.4)

b3j0f.utils (1.4.4)

Babel (2.4.0)

behave (1.2.5)

certifi (2017.4.17)

cffi (1.10.0)

chardet (3.0.3)

cryptography (1.8.2)

docutils (0.13.1)

ecdsa (0.13)

enum34 (1.1.6)

futures (3.1.1)

grpcio (1.3.5)

grpcio-tools (1.3.5)

idna (2.5)

imagesize (0.7.1)

ipaddress (1.0.18)

Jinja2 (2.9.6)

MarkupSafe (1.0)

ordereddict (1.1)

packaging (16.8)

parse (1.8.0)

parse-type (0.3.4)

pip (9.0.1)

protobuf (3.3.0)

pycparser (2.17)

Pygments (2.2.0)

pyOpenSSL (17.0.0)

pyparsing (2.2.0)

pysha3 (1.0b1)

python-slugify (1.2.4)

pytz (2017.2)

PyYAML (3.12)

requests (2.17.3)

setuptools (35.0.2)

six (1.10.0)

snowballstemmer (1.2.1)

Sphinx (1.6.2)

sphinx-rtd-theme (0.2.4)

sphinxcontrib-websupport (1.0.1)

typing (3.6.1)

Unidecode (0.4.20)

urllib3 (1.21.1)

wheel (0.29.0)

 ","02/Jun/17 2:50 PM;jeffgarratt;[~justatad] Hey Mathew, can you connect with me on rocket chat ([https://chat.hyperledger.org/channel/fabric)] when you get a chance and we can reproduce and see if we can figure it out?

My username is jeffgarratt",07/Jun/17 4:17 PM;jeffgarratt;I have not yet heard from [~justatad].  If this is still an issue please let me know.,"08/Jun/17 1:30 PM;justatad;Hi all - I've switched to using Docker images of Fabric V1 Alpha so this is no longer an issue for me.

Thanks for your help,

Matthew","09/Jun/17 4:21 PM;jeffgarratt;Good to hear!!! [~justatad], going to mark this as done.  Feel free to reopen if need be.",24/Sep/17 12:25 PM;tiennv;[~justatad] I am using v1.0.1 and v1.0.2 and I still get the problem.,,,,,,,,,,
e2e_perf 100 ch 2 cc fails to keep ledgers in sync on diff peers at ch7cc1p3,FAB-2730,15298,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,scottz,scottz,scottz,10/Mar/17 4:35 PM,27/Apr/17 4:34 PM,26/Apr/18 6:50 AM,27/Apr/17 4:34 PM,v1.0.0,,,,,,v1.0.0,,,fabric-quality,,,,0,quality,,,,,,,,"Caveat: Not sure yet if this is a problem with resources on laptop testbed, or with fabric software. My vagrant ssh terminals responded to some basic commands, but hung forever when tried to clean or make. Opening bug to track and retest.

Found with fabric commit a976c50f. To reproduce, follow instructions
    https://github.com/ratnakar-asara/e2e
to get the e2e_perf tool and execute test with 100 channels, 2 chaincodes, 4 peers:
    $  ./network_setup.sh  restart  testchan  100  2  4
Total execution time 2909 secs on Lenovo 540 laptop, using vagrant.
Tests succeeded on channels 0-6, two chaincodes on each, all 4 peers, and then
- the FIRST query on peer 3 fails, which means:
- the invoke on peer 0 reduced counter to 990, and was confirmed on peer 0 (for channel 7 chaincode 1),
- the invoke on peer 1 reduced counter to 980, and was confirmed on peer 1,
- the invoke on peer 2 reduced counter to 970, and was confirmed on peer 2,
- the first query on peer 3 (even after waiting 100 secs) still showed the value as 980.
",,,,,,,,,,,,,,,,,,,,10/Mar/17 4:36 PM;scottz;fail_100_2_on_ch7cc1p3_peer3logsNextMorning.txt;https://jira.hyperledger.org/secure/attachment/10574/fail_100_2_on_ch7cc1p3_peer3logsNextMorning.txt,10/Mar/17 4:36 PM;scottz;fail_100_2_on_ch7cc1p3_stdout.txt;https://jira.hyperledger.org/secure/attachment/10573/fail_100_2_on_ch7cc1p3_stdout.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ss9:,,,,,,,,scottz,,,,,,,,,,,,,,"27/Apr/17 4:34 PM;scottz;Due to resource constraints (no swap space) on the vagrant environment running all the docker containers, it appears that the instantiation of chaincode1 on the 7th channel on peer 3 did succeed after awhile and we were able to query it to get a value (980), but the latest transaction had not yet been delivered to that peer. Since this test and a larger test (100 channels with 10 chaincodes each) passed successfully using vLaunch machine with more resources, we can close this issue due to test environment resource constraints.",,,,,,,,,,,,,,,,,,,,,,,
Windows style path is not acceptable by peer for chaincode install path,FAB-2726,15294,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,dshuffma,dshuffma,10/Mar/17 2:54 PM,22/May/17 4:21 PM,26/Apr/18 6:50 AM,22/May/17 4:21 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,1,node-SDK,,,,,,,,"Due to this code in [platform.go|https://github.com/hyperledger/fabric/blob/aac444366cf66fb6dc449c28c0eb9b2c55a1d20b/core/chaincode/platforms/golang/platform.go#L117] it will not accept paths that have back slashes.

Need to change lib/packager/Golang.js in client sdk to format the `desc.name` to *not* use OS dependent pathing. 

Example:
{code}
var desc = {
		name: path.relative(goPath, entry.path).split('\\').join('/'),
		fqp: entry.path
};
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:rh6,,Sprint 15 - SDK node,,,,,,dshuffma,shanlusun,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
 Error: No such container: cli while running e2e CLI tests in CI,FAB-2721,15289,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,09/Mar/17 10:52 PM,10/Mar/17 8:41 PM,26/Apr/18 6:50 AM,10/Mar/17 8:41 PM,,,,,,,,,,,,,,0,,,,,,,,,"Observed "" Error: No such container: cli "" error while running e2e CLI tests in CI environment. CLI container is not starting up with in the sleep 30 sec's in CI script.. It's inconsistently failing.. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sqp:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,10/Mar/17 8:41 PM;rameshthoomu;Fix has been provided and now we see end-to-end (CLI) tests are running.. Closing this issue.,,,,,,,,,,,,,,,,,,,,,,,
Case sensitivity should be consistent across multiple backend DBs,FAB-2720,15288,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,rennman,rennman,09/Mar/17 9:23 PM,29/Mar/17 1:49 PM,26/Apr/18 6:50 AM,29/Mar/17 1:49 PM,,,,,,,,,,fabric-ca,,,,0,,,,,,,,,"I noticed during testing that different databases exhibit different behaviors regarding case-sensitivity.

Notably, the values that populate the USERS 'name' field is case-sensitive in postgres, but case-insensitive in mysql. Case sensitive makes the most sense in this case.

However, tables names *are* case-sensitive in mysql. I could live with this, but this feels weird. Case insensitive makes more sense here.

The lager issue is that the rules governing the data in any of the DBs should be consistent.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sqh:,,Sprint 15 - Membership Service,,,,,,rennman,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
CLI Install should not require orderer endpoint,FAB-2708,15276,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,binhn,binhn,08/Mar/17 10:29 PM,22/Mar/17 2:36 PM,26/Apr/18 6:50 AM,22/Mar/17 2:36 PM,,,,,,,,,,,,,,0,,,,,,,,,"The install CLI below should not require the orderer since it only need to put the chaincode package on the peer.

peer chaincode install -o $ORDERER_IP:7050 -n mycc -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00so1:,,,,,,,,binhn,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
CLI should find orderers from channel config TX,FAB-2707,15275,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Honglei,binhn,binhn,08/Mar/17 10:27 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,06/May/17 4:00 PM,,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"The current CLI added an -o flag requiring the orderer endpoint. This is unnecessary since it already has the channel, from which it can figure out the orderers.

peer chaincode query -o $ORDERER_IP:7050 -C $CHANNEL_NAME -n mycc -c '{""Args"":[""query"",""a""]}'

peer chaincode invoke -o $ORDERER_IP:7050  -C $CHANNEL_NAME -n mycc -c '{""Args"":[""invoke"",""a"",""b"",""10""]}'

peer chaincode instantiate -o $ORDERER_IP:7050 -C $CHANNEL_NAME -n mycc -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}' -P ""OR	('Org0MSP.member','Org1MSP.member')""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz7e:m,,Sprint 16  - Endorser,,,,,,binhn,ChristopherFerris,,,,,,,,,master,,,true,21/Apr/17 5:33 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/7299/,,,,,,,,,,,,,,,,,,,,,,,
Group mod policy resolved to wrong policy manager,FAB-2699,15267,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,08/Mar/17 6:02 PM,10/Mar/17 6:23 PM,26/Apr/18 6:50 AM,10/Mar/17 6:23 PM,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sm1:,,,,,,,,jyellick,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
configtxgen crash when multiple anchor peers supplied,FAB-2697,15265,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,08/Mar/17 4:42 PM,10/Mar/17 6:23 PM,26/Apr/18 6:50 AM,10/Mar/17 6:23 PM,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sll:,,,,,,,,jyellick,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Default chain broken because of missing HashingAlgorithm,FAB-2696,15264,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,08/Mar/17 4:07 PM,10/Mar/17 6:22 PM,26/Apr/18 6:50 AM,10/Mar/17 6:22 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sld:,,,,,,,,jyellick,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Remaining proto style bugs,FAB-2692,15259,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,08/Mar/17 3:09 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,11/Apr/17 7:22 PM,,,,,,,,,,fabric-orderer,,,,0,,,,,,,,,"There are a few pieces of proto which escaped the pass of proto style fixing in FAB-2026

Notably, the MSP identities.proto is still in the msp directory.

It also contains mis-styled field names.

msp_principal.proto contains an inappropriate upper case field.

policies.proto contains an inappropriate upper case field.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sk9:,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Seek prints no message what channel it can't find ,FAB-2691,15258,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,rickr,rickr,08/Mar/17 12:46 PM,29/May/17 4:43 AM,26/Apr/18 6:50 AM,13/Mar/17 1:43 PM,v1.0.0,,,,,,v1.0.0,,,fabric-orderer,,,,0,v1.0,,,,,,,,"Provided log show channel foo being used ok.   At bottom notice NO mention of any error or debug statements on order showing which channel it thinks it should be doing the seek for .. nothing in the message returned also provides that information. What's there is just provided by the SDK not from the ""wire""

Java error

INFO: [io.grpc.internal.ManagedChannelImpl-31] Created with target localhost:7050
2017-03-08 07:34:54 ERROR Chain:730 - Bad newest block expected status 200  got  404, Chain foo
org.hyperledger.fabric.sdk.exception.TransactionException: Bad newest block expected status 200  got  404, Chain foo
	at org.hyperledger.fabric.sdk.Chain.getConfigurationBlock(Chain.java:714)





FYI [~Clayton Sims] [~bmos299]",,,,,,,,,,,,,,,,,FAB-4201,,,08/Mar/17 12:49 PM;rickr;fab-2691.20170308074848.log;https://jira.hyperledger.org/secure/attachment/10565/fab-2691.20170308074848.log,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sk1:,,,,,,,,jyellick,rickr,,,,,,,,,master,,,true,"08/Mar/17 1:03 PM;rickr;For reference here is how the call is set up in java

Orderer orderer = orderers.iterator().next();

            Ab.SeekPosition seekPosition = Ab.SeekPosition.newBuilder()
                    .setNewest(Ab.SeekNewest.newBuilder().build())
                    .build();

            Ab.SeekPosition seekPositionStop = Ab.SeekPosition.newBuilder()
                    .setNewest(Ab.SeekNewest.newBuilder().build())
                    .build();

            Ab.SeekInfo seekInfo = Ab.SeekInfo.newBuilder()
                    .setStart(seekPosition)
                    .setStop(seekPositionStop)
                    .setBehavior(Ab.SeekInfo.SeekBehavior.BLOCK_UNTIL_READY)
                    .build();

            ChannelHeader seekInfoHeader = createChannelHeader(HeaderType.DELIVER_SEEK_INFO, name, {color:red} /// Name here is the channel{color}
                    txContext.getTxID(), txContext.getEpoch(), null);

            SignatureHeader signatureHeader = SignatureHeader.newBuilder()
                    .setCreator(txContext.getIdentity().toByteString())
                    .setNonce(txContext.getNonce())
                    .build();

            Header seekHeader = Header.newBuilder()
                    .setSignatureHeader(signatureHeader.toByteString())
                    .setChannelHeader(seekInfoHeader.toByteString())
                    .build();

            Payload seekPayload = Payload.newBuilder()
                    .setHeader(seekHeader)
                    .setData(seekInfo.toByteString())
                    .build();

            Envelope envelope = Envelope.newBuilder().setSignature(txContext.signByteString(seekPayload.toByteArray()))
                    .setPayload(seekPayload.toByteString())
                    .build();

            DeliverResponse[] deliver = orderer.sendDeliver(envelope);



Block newestBlock;
            if (deliver.length < 1) {
                throw new TransactionException(format(""newest block for channel %s fetch bad deliver missing status block only got blocks:%d"", name, deliver.length));

            } else {

                DeliverResponse status = deliver[0];
                if (status.getStatusValue() != 200) { * {color:red} //////////   we print out the channel here on this error >>>>>>>>>>>>>>{color}*
                    throw new TransactionException(format(""Bad newest block expected status 200  got  %d, Chain %s"", status.getStatusValue(), name));
                } else {
                    if (deliver.length < 2) {
                        throw new TransactionException(format(""newest block for channel %s fetch bad deliver missing genesis block only got %d:"", name, deliver.length));
                    } else {

                        DeliverResponse blockresp = deliver[1];
                        newestBlock = blockresp.getBlock();
                    }
                }
            }",08/Mar/17 1:04 PM;rickr;I just moved this to medimum priority because I found the error in my code. :)  But I'm leaving it open because I do think we need better message returned and logged on the orderer !  ,"10/Mar/17 6:23 PM;jyellick;Could you take a look at the improved logging, and close this if it meets your needs?",13/Mar/17 1:43 PM;rickr;[~jyellick] It's an improvement and I'll close but in the long run it'll be you providing support so more importantly _does it meet your needs_ ? :),,,,,,,,,,,,,,,,,,,,
v1.0 pom compile error due to grpc.io wrong version,FAB-2690,15257,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,denisgaebler,denisgaebler,08/Mar/17 10:41 AM,08/Mar/17 3:49 PM,26/Apr/18 6:50 AM,08/Mar/17 3:49 PM,,,,,,,v1.0.0,,,fabric-sdk-java,,,,0,java-SDK,v1.0,,,,,,,"Hi,

I got compile errors when creating the 1.0 snapshot jar. The reason is, that in the pom there is v1.0.3 as requirement. After changing grpc.version to 1.1.2 the compile worked fine.

Thanks, Denis.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sjt:,,,,,,,,denisgaebler,rickr,,,,,,,,,master,,,true,08/Mar/17 11:44 AM;rickr;Thanks we'll look into this.,,,,,,,,,,,,,,,,,,,,,,,
Limit attempt number when connecting to bootstrap peers in gossip,FAB-2689,15256,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,08/Mar/17 8:32 AM,13/Mar/17 7:41 AM,26/Apr/18 6:50 AM,13/Mar/17 7:41 AM,,,,,,,,,,,,,,0,,,,,,,,,"In gossip, when a peer starts up- it tries to connect to the bootstrap set indefinitely. 
This needs to be limited up to a finite number.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sjl:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Validate blocks on delivery from ordering service and during state transfer.,FAB-2688,15255,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,08/Mar/17 8:13 AM,02/Apr/17 2:20 PM,26/Apr/18 6:50 AM,02/Apr/17 2:20 PM,,,,,,,,,,,,,,0,,,,,,,,,"Currently delivery service client pulls blocks from the ordering service and gossip them to other peer without actually validating them. Exactly same issue exists also in in gossip state transfer layer, where anti entropy procedure receives blocks via peer-to-peer communication and commits them directly into the ledger without actually verifying them.

Need to add blocks verification in both of these cases leveraging MessageCryptoService implementation, VerifyBlock API.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00sjd:,,Sprint 13 - Gossip,,,,,,C0rWin,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
chaincode not found intermittent error when all peers in e2e test were NOT leaders ,FAB-2683,15250,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,Nishi,Nishi,07/Mar/17 11:09 PM,10/Mar/17 4:33 PM,26/Apr/18 6:50 AM,10/Mar/17 4:33 PM,v1.0.0,,,,,,v1.0.0,,,fabric-gossip,,,,0,,,,,,,,,"It appears that Gossip is sometimes failing to share chaincode with the other non-leader peer in the organization. 

Commit Level: *30a0e216c50cb8cf6c1423566d1e4c899e24205f*
Test Env: 1 orderer, 2 kafka brokers, 4 peers, 2 Orgs (org1:peer0/peer1, org2: peer2/peer3), 1 channel, 1 chaincode

Test Case:
{code}
Create one channel 'myc1'
Join peer0, peer1, peer2, peer3 on 'myc1'
Install chaincode on peer0, peer1, peer2, peer3
Instantiate chaincode on peer0
sleep 20sec(after instantiate)
for each channel
  for each chaincode
    on each peer
       Query initial values
        Invoke 
       Query after invoke
{code}

*Scenario1 - FAILURE case*:
In docker-compose.yaml following value was set 
{code}
 CORE_PEER0_GOSSIP_ORGLEADER=true
 CORE_PEER1_GOSSIP_ORGLEADER=false
 CORE_PEER2_GOSSIP_ORGLEADER=true
 CORE_PEER3_GOSSIP_ORGLEADER=false
{code} 

Observations after 10 RUNS:

It passed once on all peers
It failed on peer1 8 times. - 7 when could not find chaincode, once when query results did not match expected results after invoke.
It failed on peer3 - once when query results did not match expected results after invoke.

When it could not find chaincode, following error message was seen 
{code}
docker logs -f cli

Error: Error endorsing invoke: rpc error: code = 2 desc = failed to obtain cds for mycc0 - transaction not found mycc0/myc0
{code}

{code}
docker logs -f peer1

vagrant@hyperledger-devenv:v0.3.0-927ff1c:/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e$ docker logs -f peer1
2017-03-07 21:38:52.835 UTC [lccc] Invoke -> ERRO 001 ChaincodeId: mycc0 does not exist on channel: myc0(err:chaincode not found mycc0)
2017-03-07 21:38:52.937 UTC [lccc] Invoke -> ERRO 002 ChaincodeId: mycc0 does not exist on channel: myc0(err:chaincode not found mycc0)
vagrant@hyperledger-devenv:v0.3.0-927ff1c:/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e$
{code}

*Comparison Scenario2 - SUCCESS case*:
When all peers are set as ORG_LEADERS, all the 10 runs passed successfully on all peers.",,,,,,,,,,,,,,,,,,,,08/Mar/17 7:33 PM;Ratnakar;docker-compose-with-externalendpoint.yaml;https://jira.hyperledger.org/secure/attachment/10571/docker-compose-with-externalendpoint.yaml,08/Mar/17 5:57 PM;Ratnakar;docker-compose.yaml;https://jira.hyperledger.org/secure/attachment/10569/docker-compose.yaml,08/Mar/17 5:50 PM;Ratnakar;docker-logs.txt;https://jira.hyperledger.org/secure/attachment/10568/docker-logs.txt,08/Mar/17 4:25 PM;yacovm;out.log;https://jira.hyperledger.org/secure/attachment/10566/out.log,08/Mar/17 12:28 AM;Ratnakar;script.sh;https://jira.hyperledger.org/secure/attachment/10564/script.sh,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sih:,,,,,,,,bmos299,gennadyl,Nishi,Ratnakar,yacovm,YingShi,,,,,,,,,"08/Mar/17 12:17 AM;Ratnakar;
Scripts is availble in this repo https://github.com/asararatnakar/perf-test
the docker-compose has been changed to have all the peers as 
{panel}
 - CORE_PEER_GOSSIP_ORGLEADER=true
{panel}

How to run the script
{code}
* git clone https://github.com/hyperledger/fabric
* cd fabric
* make docker
* cd fabric/examples
* git clone https://github.com/asararatnakar/perf-test.git e2e
* cd e2e
./network_setup.sh restart <channel name> <total channels> <total chaincodes> <total endorsers>
./network_setup.sh restart mychannel 10 10 4
{code}

Changing the non anchor peers orgleader flag to ""false"" causes the issue
*- CORE_PEER_GOSSIP_ORGLEADER=false*


[~2020Nishi] ran the script attached to this jira, please replace *scripts/script.sh* with this file, to reproduce this
 issue.",08/Mar/17 2:19 PM;bmos299;Changing to highest.,"08/Mar/17 2:53 PM;gennadyl;One question - what exactly written in docker-compose.yaml

CORE_PEER0_GOSSIP_ORGLEADER=true
CORE_PEER1_GOSSIP_ORGLEADER=false
CORE_PEER2_GOSSIP_ORGLEADER=true
CORE_PEER3_GOSSIP_ORGLEADER=false
 look wrong. In each peer section should be written CORE_PEER_GOSSIP_ORGLEADER flag, not CORE_PEER_AND_NUMBER_GOSSIP_ORGLEADER



","08/Mar/17 3:41 PM;Ratnakar;we still see the issue on commit level *babdeee87981ac92af13ed5d767294588fa89cfd*


Hi [~gennadyl], Thanks for the pointer.
We haven't used the peer number in our docker-compose, we gave that number here to indicate what value is passed to what peer.

You can refer our docker-compose file here https://github.com/asararatnakar/perf-test/blob/master/docker-compose.yaml

https://github.com/asararatnakar/perf-test/blob/master/docker-compose.yaml#L61
https://github.com/asararatnakar/perf-test/blob/master/docker-compose.yaml#L81
https://github.com/asararatnakar/perf-test/blob/master/docker-compose.yaml#L102
https://github.com/asararatnakar/perf-test/blob/master/docker-compose.yaml#L124





A gist of error log here
{code}
===================== Querying on PEER1 on xyz0/mycc1... ===================== 
Attempting to Query PEER ...3 secs
Attempting to Query PEER ...6 secs
Attempting to Query PEER ...9 secs
Attempting to Query PEER ...12 secs
Attempting to Query PEER ...15 secs
Attempting to Query PEER ...18 secs
Attempting to Query PEER ...21 secs
Attempting to Query PEER ...24 secs
Attempting to Query PEER ...27 secs
Attempting to Query PEER ...30 secs
Attempting to Query PEER ...33 secs
Attempting to Query PEER ...37 secs
Attempting to Query PEER ...40 secs
Attempting to Query PEER ...43 secs
Attempting to Query PEER ...46 secs
Attempting to Query PEER ...49 secs
Attempting to Query PEER ...52 secs
Attempting to Query PEER ...55 secs
Attempting to Query PEER ...58 secs
Attempting to Query PEER ...62 secs
Attempting to Query PEER ...65 secs
Attempting to Query PEER ...68 secs
Attempting to Query PEER ...71 secs
Attempting to Query PEER ...75 secs
Attempting to Query PEER ...78 secs
Attempting to Query PEER ...81 secs
Attempting to Query PEER ...84 secs
Attempting to Query PEER ...87 secs
Attempting to Query PEER ...90 secs
Attempting to Query PEER ...93 secs
Attempting to Query PEER ...96 secs
Attempting to Query PEER ...99 secs
Attempting to Query PEER ...102 secs

2017-03-08 15:36:50.616 UTC [logging] InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'chaincode'
2017-03-08 15:36:50.618 UTC [msp] GetLocalMSP -> DEBU 002 Returning existing local MSP
2017-03-08 15:36:50.618 UTC [msp] GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity
2017-03-08 15:36:50.620 UTC [msp] Sign -> DEBU 004 Sign: plaintext: 0AAF070A550803220478797A302A4066...796363311A0A0A0571756572790A0161 
2017-03-08 15:36:50.620 UTC [msp] Sign -> DEBU 005 Sign: digest: D558A110D9F9565EC2178938BA0F79E0C898944CECBE0A356201CE566CAEF9D4 
Error: Error endorsing query: rpc error: code = 2 desc = failed to obtain cds for mycc1 - transaction not found mycc1/xyz0
Usage:
  peer chaincode query [flags]

Flags:
  -x, --hex   If true, output the query value byte array in hexadecimal. Incompatible with --raw
  -r, --raw   If true, output the query value as raw bytes, otherwise format as a printable string

Global Flags:
  -C, --chainID string             The chain on which this command should be executed (default ""testchainid"")
  -c, --ctor string                Constructor message for the chaincode in JSON format (default ""{}"")
  -E, --escc string                The name of the endorsement system chaincode to be used for this chaincode
  -l, --lang string                Language the chaincode is written in (default ""golang"")
      --logging-level string       Default logging level and overrides, see core.yaml for full syntax
  -n, --name string                Name of the chaincode
  -o, --orderer string             Ordering service endpoint
  -p, --path string                Path to chaincode
  -P, --policy string              The endorsement policy associated to this chaincode
      --test.coverprofile string   Done (default ""coverage.cov"")
  -t, --tid string                 Name of a custom ID generation algorithm (hashing and decoding) e.g. sha256base64
  -u, --username string            Username for chaincode operations when security is enabled
  -v, --version string             Version of the chaincode specified in install/instantiate/upgrade commands
  -V, --vscc string                The name of the verification system chaincode to be used for this chaincode

!!!!!!!!!!!!!!! Query result on PEER1 is INVALID !!!!!!!!!!!!!!!!
================== ERROR !!! FAILED to execute End-2-End Scenario ==================

Total execution time 261 secs

{code}",08/Mar/17 4:09 PM;yacovm;any chance of a log dump of all 4 peers? (with a logging level of debug),"08/Mar/17 4:25 PM;yacovm;Also - I ran examples/e2e-cli/network__setup.sh up with orgleader on non-anchor peers set to true, and on anchor peers set to false, and I didn't see any problems:
 [^out.log] ","08/Mar/17 5:25 PM;yacovm;I also see that peers 3, 2 are configured to have peer0 as the bootstrap peer.
bootstrap peers of a peer should only be peers from the organization of the peer.","08/Mar/17 5:57 PM;Ratnakar;Just now we reproduced the problem using commit , with the following steps.
We create 10 channel creation transaction files.
{panel}
./generateCfgTrx.sh testchannel 10
{panel}

Command to launch network and run the tests on CLI container:
{panel}
CHANNEL_NAME=testchannel CHANNELS_NUM=10 CHAINCODES_NUM=2 ENDORSERS_NUM=4 docker-compose up
{panel}

We are attaching the logs file  [^docker-logs.txt]  we used, and the docker-compose file [^docker-compose.yaml] too.
Observe in the docker-compose file that it shows that peers 1 and 3 are not leader peers. And note the configtx.yaml file shows that our anchor peers are 0 and 2, which are same as leader peers.","08/Mar/17 6:06 PM;yacovm;I think there might be a bug, but in the meantime this trick should fix it:
For each peer, put the following env var:
      - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0:7051


EDIT: not a bug ","08/Mar/17 6:06 PM;Ratnakar;[~yacovm] As per your sugegstion 
{panel}
I also see that peers 3, 2 are configured to have peer0 as the bootstrap peer.
bootstrap peers of a peer should only be peers from the organization of the peer.
{panel}

I changed peer3 to have peer2 as the bootstrap peer and removed the bootstrap peer flag *CORE_PEER_GOSSIP_BOOTSTRAP* from peer2 section.
However I still see the same issue.
",08/Mar/17 7:04 PM;yacovm;what about the external endpoint? did you configure that? can you post the yaml file of the docker-compose please?,"08/Mar/17 7:21 PM;Ratnakar;It didn't make any difference and issue is seen even after adding the configuration *CORE_PEER_GOSSIP_EXTERNALENDPOINT* for each peer
{code}
peer0:
          ---
          - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0:7051
          ---

peer1:
          ---
          - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer1:7051
          ---
peer2:
          ---
          - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer2:7051
          ---

peer3:
          ---
          - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer3:7051
          ---

{code}
The docker compose file  [^docker-compose-with-externalendpoint.yaml] that been used with external endpoint configuration changes

Issue is easily reproducible with the below command.
{panel}
./network_setup.sh restart testchannel 10 5 4
{panel}","08/Mar/17 9:24 PM;yacovm;Hmmm, it seems that at least for p0 and p1, the identities are the same, no?


yacovm@fabric1:/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e/crypto/peer$ openssl x509 -in peer0/localMspConfig/signcerts/cert.pem  -text -noout
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            58:83:3b:bb:10:25:48:23:2a:15:20:20:a0:b1:09:d5:38:bc:f3:72
    Signature Algorithm: ecdsa-with-SHA256
        Issuer: C=US, ST=North Carolina, O=Hyperledger, OU=Fabric, CN=fabric-ca-server
        Validity
            Not Before: Mar  1 04:29:00 2017 GMT
            Not After : Jan 28 12:29:00 2018 GMT
        Subject: C=US, ST=North Carolina, O=Hyperledger, OU=Fabric, CN=admin
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub:
                    04:9c:48:b5:07:d6:d7:37:da:f8:bd:ab:32:d2:e4:
                    28:35:50:7c:d0:c2:34:03:0f:58:db:5e:90:2b:07:
                    bc:04:40:6f:e8:6c:5d:d7:aa:89:fb:91:6f:fd:b9:
                    99:3c:fd:d2:c1:c4:10:b0:6a:a1:79:0a:94:7a:b3:
                    50:73:84:dc:6d
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        X509v3 extensions:
            X509v3 Key Usage: critical
                Certificate Sign
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Key Identifier:
                BC:D3:BA:CF:88:CB:42:37:B5:13:CB:68:DC:F7:E1:DF:C1:1D:5F:34
            X509v3 Authority Key Identifier:
                keyid:E3:3B:29:59:7A:F2:02:61:67:74:9A:2D:CC:B4:6F:7B:12:0C:60:F4

            X509v3 Subject Alternative Name:
                DNS:ubuntu
    Signature Algorithm: ecdsa-with-SHA256
         30:45:02:20:41:aa:f0:9d:bc:1c:9b:24:c3:96:4b:c1:d7:f4:
         60:6c:90:0f:15:f0:ab:c4:d5:2f:91:16:6f:71:39:46:b9:36:
         02:21:00:9d:a8:c6:01:bc:ea:2e:46:25:03:8c:13:fb:71:39:
         22:42:46:62:69:5a:a7:5e:5a:a4:6f:74:25:ab:35:ae:9b
yacovm@fabric1:/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e/crypto/peer$ openssl x509 -in peer1/localMspConfig/signcerts/cert.pem  -text -noout
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            58:83:3b:bb:10:25:48:23:2a:15:20:20:a0:b1:09:d5:38:bc:f3:72
    Signature Algorithm: ecdsa-with-SHA256
        Issuer: C=US, ST=North Carolina, O=Hyperledger, OU=Fabric, CN=fabric-ca-server
        Validity
            Not Before: Mar  1 04:29:00 2017 GMT
            Not After : Jan 28 12:29:00 2018 GMT
        Subject: C=US, ST=North Carolina, O=Hyperledger, OU=Fabric, CN=admin
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub:
                    04:9c:48:b5:07:d6:d7:37:da:f8:bd:ab:32:d2:e4:
                    28:35:50:7c:d0:c2:34:03:0f:58:db:5e:90:2b:07:
                    bc:04:40:6f:e8:6c:5d:d7:aa:89:fb:91:6f:fd:b9:
                    99:3c:fd:d2:c1:c4:10:b0:6a:a1:79:0a:94:7a:b3:
                    50:73:84:dc:6d
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        X509v3 extensions:
            X509v3 Key Usage: critical
                Certificate Sign
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Key Identifier:
                BC:D3:BA:CF:88:CB:42:37:B5:13:CB:68:DC:F7:E1:DF:C1:1D:5F:34
            X509v3 Authority Key Identifier:
                keyid:E3:3B:29:59:7A:F2:02:61:67:74:9A:2D:CC:B4:6F:7B:12:0C:60:F4

            X509v3 Subject Alternative Name:
                DNS:ubuntu
    Signature Algorithm: ecdsa-with-SHA256
         30:45:02:20:41:aa:f0:9d:bc:1c:9b:24:c3:96:4b:c1:d7:f4:
         60:6c:90:0f:15:f0:ab:c4:d5:2f:91:16:6f:71:39:46:b9:36:
         02:21:00:9d:a8:c6:01:bc:ea:2e:46:25:03:8c:13:fb:71:39:
         22:42:46:62:69:5a:a7:5e:5a:a4:6f:74:25:ab:35:ae:9b
","08/Mar/17 9:57 PM;bmos299;I did a diff between crypto peer0,peer1,peer2,peer3. For this test they are all the same....which is a config issue by the enduser.  That being said, I can EASILY customers doing the same thing.  This was very difficult to debug.  I am hoping we can add code in gossip to ensure the PKI-ID does not match its own and it does we take appropriate actions, cut an ERROR message, stop talking to this peer? etc.    Thoughts are appreciated.  ",08/Mar/17 10:00 PM;bmos299;This is a RAS/Serviceability issue.,"08/Mar/17 10:06 PM;yacovm;It is possible to add a warning message in a case where an alive message is received with an endpoint which is different than the peers endpoint (and the pki-id is the peer's pki-id).
However- a separate JIRA issue needs to be opened for that.","09/Mar/17 1:45 PM;bmos299;Ratnakar Jira Task: https://jira.hyperledger.org/browse/FAB-2710 for this RAS item.

","10/Mar/17 1:43 PM;bmos299;Nishi,  Can you please retest and verify the warning message is issued: 

Yacov added the following error message:


{code:java}
d.logger.Error(""Bad configuration detected: Received AliveMessage from a peer with the same PKI-ID as myself:"", m.GossipMessage)
{code}


With Gerrit CR:
commit 3ad3e43d2e5bee8c2a43e6bd319cda08c1f658ba
Author: YACOVM <YACOVM@il.ibm.com>
Date:   Thu Mar 9 10:41:28 2017 +0200

    [FAB-2710] Gossip: Log WARN upon bad network config

    This commit adds a log warning in case a peer detects peers
    with the same PKI-ID as itself but with different endpoints.
    The only reason that this can happen is that someone configured different
    peers with the same identity.

https://gerrit.hyperledger.org/r/#/c/7065
","10/Mar/17 4:02 PM;Nishi;Tested on commit level: *32959205a7ae8fc499a764c8b0e567f000f3a846*

2 channels, 10 chaincodes , sending query/invoke/query on all 4 peers. crypto material on all the 4 peers kept the same to reproduce error message.

Found the following message in all peer logs:
{code}
2017-03-10 15:10:25.633 UTC [gossip/discovery#172.18.0.8:7051] handleAliveMessage -> * ERRO 001 Bad configuration detected: Received AliveMessage from a peer with the same PKI-ID as myself: * tag:EMPTY alive_msg:<membership:<endpoint:""peer3:7051"" pki_id:""W98\007\357r\305j\207\n\357g:\265\200p\3706\303n\232('\305\032\242\261,\373\033/C"" > timestamp:<inc_number:1489158625569456942 seq_num:1 > identity:""\n\007Org1MSP\022\254\006-----BEGIN -----\nMIICOjCCAeCgAwIBAgIUWIM7uxAlSCMqFSAgoLEJ1Ti883IwCgYIKoZIzj0EAwIw\naDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK\nEwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt\nY2Etc2VydmVyMB4XDTE3MDMwMTA0MjkwMFoXDTE4MDEyODEyMjkwMFowXTELMAkG\nA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl\ncmxlZGdlcjEPMA0GA1UECxMGRmFicmljMQ4wDAYDVQQDEwVhZG1pbjBZMBMGByqG\nSM49AgEGCCqGSM49AwEHA0IABJxItQfW1zfa+L2rMtLkKDVQfNDCNAMPWNtekCsH\nvARAb+hsXdeqifuRb/25mTz90sHEELBqoXkKlHqzUHOE3G2jczBxMA4GA1UdDwEB\n/wQEAwICBDAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBS807rPiMtCN7UTy2jc9+Hf\nwR1fNDAfBgNVHSMEGDAWgBTjOylZevICYWd0mi3MtG97Egxg9DARBgNVHREECjAI\nggZ1YnVudHUwCgYIKoZIzj0EAwIDSAAwRQIgQarwnbwcmyTDlkvB1/RgbJAPFfCr\nxNUvkRZvcTlGuTYCIQCdqMYBvOouRiUDjBP7cTkiQkZiaVqnXlqkb3QlqzWumw==\n-----END -----\n"" > 

2017-03-10 15:10:50.607 UTC [gossip/discovery#172.18.0.8:7051] handleAliveMessage -> *ERRO 002 Bad configuration detected: Received AliveMessage from a peer with the same PKI-ID as myself*: tag:EMPTY alive_msg:<membership:<endpoint:""peer3:7051"" pki_id:""W98\007\357r\305j\207\n\357g:\265\200p\3706\303n\232('\305\032\242\261,\373\033/C"" > timestamp:<inc_number:1489158625569456942 seq_num:14 > > 
2017-03-10 15:11:15.614 UTC [gossip/discovery#172.18.0.8:7051] handleAliveMessage -> *ERRO 003 Bad configuration detected: Received AliveMessage from a peer with the same PKI-ID as myself*: tag:EMPTY alive_msg:<membership:<endpoint:""peer3:7051"" pki_id:""W98\007\357r\305j\207\n\357g:\265\200p\3706\303n\232('\305\032\242\261,\373\033/C"" > timestamp:<inc_number:1489158625569456942 seq_num:25 > > 

{code}",,,,,
panic when executing behave tests,FAB-2682,15249,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,latitiah,latitiah,latitiah,07/Mar/17 8:40 PM,06/Apr/17 7:05 PM,26/Apr/18 6:50 AM,06/Apr/17 7:05 PM,,,,,,,,,,fabric-quality,,,,0,,,,,,,,,"When running behave tests, there is always a panic message at the beginning of the run:
{code:none}
Output:

Error Message:
panic: Fatal error when setting up MSP from directory msp/sampleconfig: err Could not load a valid signer certificate from directory msp/sampleconfig/signcerts, err Could not read directory open msp/sampleconfig/signcerts: no such file or directory, err msp/sampleconfig/signcerts


goroutine 1 [running]:
panic(0xb0f240, 0xc4201f7630)
	/opt/go/src/runtime/panic.go:500 +0x1a1
main.main()
	/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:107 +0x67a
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00si9:,,,,,,,,latitiah,Lin-YiTang,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
generate protos into new java packages,FAB-2678,15245,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,sanchezl,sanchezl,07/Mar/17 5:14 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,02/Apr/17 8:11 PM,,,,,,,,,,fabric-peer,,,,0,quality,,,,,,,,"Protos in shim still generate into {{org.hyperledger.protos}} package. This is a mismatch with packages used in golang, and the packages expected by the java sdk.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00shd:,,,,,,,,sanchezl,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
orderer crashed when launched with docker-compose.yaml,FAB-2675,15242,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,07/Mar/17 3:51 AM,08/Mar/17 4:01 AM,26/Apr/18 6:50 AM,08/Mar/17 4:01 AM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,test/fixtures/channel/docker-compose.yaml uses a genesis block generated from before a breaking change in the config block proto. as a result the orderer crashes on start up.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhq:zwi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix scaling issue in orderer-n-kafka-n env,FAB-2673,15240,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,kchristidis,kchristidis,06/Mar/17 9:38 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,21/Mar/17 3:45 PM,,,,,,,,,,fabric-orderer,,,,0,,,,,,,,,"A user of the `orderer-n-kafka-n` environment is not able to scale the number of orderer containers, because the `orderer` service has a hard-coded `container-name`.

This is the message the user is faced with:

{{WARNING: The ""orderer"" service is using the custom container name ""orderer"". Docker requires each container to have a unique name. Remove the custom name to scale the service.}}

References:

https://docs.docker.com/compose/compose-file/#containername",,,,,,,,,,,,,,,,,FAB-2848,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzaq:r,,Sprint 13 - Consensus,Sprint 14 - Consensus,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix discovery test due to CI failures,FAB-2672,15239,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,06/Mar/17 9:28 PM,13/Mar/17 7:41 AM,26/Apr/18 6:50 AM,13/Mar/17 7:41 AM,,,,,,,,,,,,,,0,,,,,,,,,"https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8252/console

Sometimes the sleep in the test isn't enough so when a comparison is being made, the peers do not have enough time to discover each other, and the result is the actual membership is is a subset of the expected.

	Error:		Not equal: []int{8611, 8612, 8613, 8614, 8616, 8618} (expected)
19:52:52 [32munit-tests_1  |[0m 			        != []int{8611, 8612, 8613, 8614} (actual)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00sg9:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
e2e scripts need to be tweaked to accept proper Orderer MSP IDs,FAB-2671,15238,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,muralisr,muralisr,06/Mar/17 9:07 PM,13/Apr/17 11:33 PM,26/Apr/18 6:50 AM,13/Apr/17 11:33 PM,v1.0.0,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,e2e_cli is using DEFAULT but has configs coded to OrdererMSP. Make it uniform by using OrdereMSP everywhere.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sg1:,,,,,,,,muralisr,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Revoked user should not be able to make requests,FAB-2668,15235,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,skarim,skarim,06/Mar/17 8:05 PM,12/May/17 4:55 PM,26/Apr/18 6:50 AM,27/Mar/17 2:43 PM,,,,,,,,,,fabric-ca,,,,0,,,,,,,,,"Once a user has been revoked or if it's certificate has 
been revoked, it should not be able to continue to make requests
such as requesting tcert batch or registering a new user.

This will add the necessary logic to check the status of the
certificate in the token in the authorization header 
to make sure that it is not revoked. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzay:zi,,Sprint 13 - Membership Service,Sprint 14 - Membership Service,,,,,skarim,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
CLI delivery client not signing orderer messages,FAB-2665,15232,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,muralisr,muralisr,06/Mar/17 6:00 PM,15/Apr/17 2:35 PM,26/Apr/18 6:50 AM,15/Apr/17 2:33 PM,,,,,,,v1.0.0,,,fabric-endorser,,,,0,,,,,,,,,CLI delivery client was getting away without properly signing messages to orderer. Not any more.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhy:zz9xm8i,,,,,,,,denyeart,mastersingh24,muralisr,,,,,,,,master,,,true,11/Apr/17 8:11 PM;denyeart;[~muralisr] Is this must-fix for 1.0.0?,15/Apr/17 1:56 PM;mastersingh24;[~muralisr] isn't this done?,15/Apr/17 2:35 PM;muralisr;[~mastersingh24] it is done by the checkin in Git. Marking as such,,,,,,,,,,,,,,,,,,,,,
Java chain code needs to work,FAB-2660,15227,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,sanchezl,sanchezl,06/Mar/17 3:17 PM,19/Mar/18 3:39 PM,26/Apr/18 6:50 AM,10/Apr/17 3:40 PM,,,,,,,v1.0.0,,,fabric-peer,,,,0,quality,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2832,FAB-3101,FAB-3170,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-8063,0|i00sdl:,,,,,,,,sanchezl,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Peer crash when gets a block from another peer,FAB-2659,15226,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,06/Mar/17 3:02 PM,13/Mar/17 7:41 AM,26/Apr/18 6:50 AM,13/Mar/17 7:41 AM,,,,,,,,,,,,,,0,,,,,,,,,"When a peer gets a block it crashes with:

panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x38 pc=0x664811]

goroutine 51 [running]:
panic(0xc192e0, 0xc420016050)
        /opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/common/cauthdsl.compile.func2(0xc420026af0, 0x1, 0x1, 0xc421765d99, 0x1, 0x1, 0x880b0a)
        /opt/gopath/src/github.com/hyperledger/fabric/common/cauthdsl/cauthdsl.go:78 +0x1f1
github.com/hyperledger/fabric/common/cauthdsl.compile.func1(0xc420026af0, 0x1, 0x1, 0xc421765d98, 0x1, 0x1, 0xc4217f6580)
        /opt/gopath/src/github.com/hyperledger/fabric/common/cauthdsl/cauthdsl.go:51 +0x1ce
github.com/hyperledger/fabric/common/cauthdsl.(*policy).Evaluate(0xc420128d98, 0xc420026af0, 0x1, 0x1, 0x7fba81923000, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/common/cauthdsl/policy.go:73 +0x96
github.com/hyperledger/fabric/common/policies.(*implicitMetaPolicy).Evaluate(0xc4216658c0, 0xc420026af0, 0x1, 0x1, 0x1, 0xc420026af0)
        /opt/gopath/src/github.com/hyperledger/fabric/common/policies/implicitmeta.go:72 +0x9a
github.com/hyperledger/fabric/peer/gossip/mcs.(*mspMessageCryptoService).VerifyBlock(0xc4201f53e0, 0xc421765c00, 0x3, 0x3, 0xbc24e0, 0xc4217f85a0, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/peer/gossip/mcs/mcs.go:185 +0xa79
github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).verifyBlock(0xc42000fef0, 0xc4217f6400, 0xc42165eb00, 0x20, 0x20, 0x8)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:490 +0x166
github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).HandleMessage(0xc42000fef0, 0x12e4e80, 0xc42175eea0)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:428 +0x49b
github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).handleMessage(0xc420222c80, 0x12e4e80, 0xc42175eea0)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:326 +0x5c3
github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).acceptMessages(0xc420222c80, 0xc4213366c0)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:262 +0x223
created by github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).start
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:247 +0xb4
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sdd:,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Blocks not passed correctly from gossip layer to MSP layer,FAB-2658,15225,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,06/Mar/17 2:56 PM,13/Mar/17 7:42 AM,26/Apr/18 6:50 AM,13/Mar/17 7:42 AM,,,,,,,,,,,,,,0,,,,,,,,,"The MSP complains:

2017-03-06 13:11:34.153 UTC [gossip/channel#172.18.0.6:7051] verifyBlock -> WARN 0cc Received fabricated block from [63 59 141 175 35 93 196 235 73 110 50 138 97 20 187 49 1 85 185 50 14 201 201 248 23 221 205 174 224 120 125 238] in DataUpdate: Failed casting SignedBlock to []byte on channel [foo]

Because the object that was passed wasn't a []byte as expected but the object that contains the []byte as a field.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sd5:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Not able to access Rest API in Hypeldger fabric,FAB-2652,15219,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,AbhilekhSingh,AbhilekhSingh,06/Mar/17 1:09 PM,09/Apr/17 8:21 PM,26/Apr/18 6:50 AM,09/Apr/17 8:21 PM,,,,,,,,,,,,,,0,Rest,,,,,,,,"Hi,

Can some please tell me how can I access the rest API?

Do I need to add another docker container for rest api? If yes please can you please tel which one.


I followed these instructions https://hyperledger-fabric.readthedocs.io/en/latest/asset_setup.html

My current setup:

{code:none}
CONTAINER ID        IMAGE                                                          COMMAND                  CREATED             STATUS              PORTS                                            NAMES
ad24e0bd9e03        sfhackfest22017/fabric-peer:x86_64-0.7.0-snapshot-c7b3fe0      ""sh -c './channel_tes""   2 hours ago         Up 2 hours                                                           cli
53f43299ef28        sfhackfest22017/fabric-peer:x86_64-0.7.0-snapshot-c7b3fe0      ""peer node start --pe""   2 hours ago         Up 2 hours          0.0.0.0:8056->7051/tcp                           peer2
38f6c202730e        sfhackfest22017/fabric-peer:x86_64-0.7.0-snapshot-c7b3fe0      ""peer node start --pe""   2 hours ago         Up 2 hours          0.0.0.0:8055->7051/tcp                           peer1
cf75626f6c43        sfhackfest22017/fabric-peer:x86_64-0.7.0-snapshot-c7b3fe0      ""peer node start --pe""   2 hours ago         Up 2 hours          0.0.0.0:8051->7051/tcp, 0.0.0.0:8053->7053/tcp   peer0
96d180297052        sfhackfest22017/fabric-ca:x86_64-0.7.0-snapshot-6294c57        ""sh -c 'sleep 10; fab""   2 hours ago         Up 2 hours          0.0.0.0:8054->7054/tcp                           ca
6b3047b8aa53        sfhackfest22017/fabric-orderer:x86_64-0.7.0-snapshot-c7b3fe0   ""orderer""                2 hours ago         Up 2 hours          0.0.0.0:8050->7050/tcp                           orderer
{code}

{code:none}
ubuntu@ip-172-31-31-186:~$ curl -X GET localhost:7050/registrar
curl: (7) Failed to connect to localhost port 7050: Connection refused
{code}

Tried with IP addresses of all machines but no luck:

{code:none}
ubuntu@ip-172-31-31-186:~$ curl -X GET 172.19.0.6:7050/registrar
curl: (7) Failed to connect to 172.19.0.6 port 7050: Connection refused
ubuntu@ip-172-31-31-186:~$ curl -X GET 172.19.0.3:7050/registrar
curl: (7) Failed to connect to 172.19.0.3 port 7050: Connection refused
ubuntu@ip-172-31-31-186:~$ curl -X GET 172.19.0.1:7050/registrar
curl: (7) Failed to connect to 172.19.0.1 port 7050: Connection refused
{code}




",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sbt:,,,,,,,,AbhilekhSingh,binhn,,,,,,,,,,,,,"09/Apr/17 8:20 PM;binhn;Fabric has no REST API.
This is not a bug.  You should have asked the question on either chat or stackoverflow.",,,,,,,,,,,,,,,,,,,,,,,
A number of Unit Tests are using an incorrect path to the MSP sampleconfig keystore,FAB-2651,15218,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrijk,harrijk,harrijk,06/Mar/17 12:17 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,27/Mar/17 1:37 PM,,,,,,,v1.0.0-alpha1,,,fabric-peer,,,,0,,,,,,,,,"For some unit tests, a test configuration is setup to create a BCCSP keystore.  Other unit tests that require a keystore are using the one located in fabric/msp/sampleconfig/keystore.  Although the test configuration setup is attempting to use the fabric/msp/sampleconfig/keystore, the relative path to get to the keystore directory starts from the directory the unit test is located rather than the fabric directory.  As a result a new directory structure is created within the directory the unit test is located to setup a keystore.

This causes some unintended consequences.  The most serious of which is the creation of the keystore directory structure that is owned by root.  Within the CI environment fabric jobs first wipe clean the previous build's workspace.  Since the workspace contains directories owned by root (e.g., created during the events unit tests), the clean workspace operation fails.  This results in the failure of Fabric verify and merge jobs for the z and p platforms since the non-root user, jenkins, cannot delete files owned by root.

The reason that Fabric verify and merge jobs don't fail on the x86 platform is due to the fact that all x86 Jenkins workers are destroyed after the Jenkins job completes, and new x86 Jenkins workers are instantiated from a fresh image prior to starting any Jenkins jobs.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sbl:,,,,,,,,harrijk,mastersingh24,,,,,,,,,master,,,true,18/Mar/17 10:08 AM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/6905/,,,,,,,,,,,,,,,,,,,,,,,
grpc Netty throws exception when has too many connections to Orderer,FAB-2650,15217,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ruslankryukov,ruslankryukov,ruslankryukov,06/Mar/17 10:42 AM,07/Mar/17 9:18 AM,26/Apr/18 6:50 AM,07/Mar/17 9:17 AM,,,,,,,v1.0.0,,,fabric-sdk-java,,,,0,java-SDK,v1.0,,,,,,,"When we create connection to orderer in OrdererClient, we expect that this connection will be closed in finalize-method. But when we have a lot of connections (which were created by sending a many invokeProposals), JVM just doesn't have time to close OrdererClient by calling finalize-method where channel will be shut down.

Finally, we have got a NullPointer exception like this: 
https://github.com/grpc/grpc-java/issues/2296",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sbd:,,,,,,,,rickr,ruslankryukov,,,,,,,,,master,,,true,06/Mar/17 3:24 PM;rickr;Just want to say thanks much for working on this !,,,,,,,,,,,,,,,,,,,,,,,
Viper concurrent read/write bug at discovery,FAB-2649,15216,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,gennadyl,yacovm,yacovm,06/Mar/17 12:05 AM,13/Mar/18 9:54 AM,26/Apr/18 6:50 AM,07/Jun/17 8:35 AM,v1.0.0,,,,,,Future,,,fabric-gossip,,,,0,beta,ci_failure,gossip,test,,,,,"https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8202/consoleFull

23:53:44 [32munit-tests_1  |[0m [33m2017-03-05 23:53:43.712 UTC [gossip/discovery#localhost:8610] func1 -> WARN 4bd[0m Could not connect to {localhost:8612 [] [] localhost:8612}
23:53:44 [32munit-tests_1  |[0m fatal error: concurrent map read and map write
23:53:44 [32munit-tests_1  |[0m 
23:53:44 [32munit-tests_1  |[0m goroutine 10620 [running]:
23:53:44 [32munit-tests_1  |[0m runtime.throw(0x9f6a96, 0x21)
23:53:44 [32munit-tests_1  |[0m 	/opt/go/src/runtime/panic.go:566 +0x95 fp=0xc4200348b8 sp=0xc420034898
23:53:44 [32munit-tests_1  |[0m runtime.mapaccess2_faststr(0x947e20, 0xc4201550e0, 0xc4237f17a0, 0x22, 0xebeae0, 0xc420034900)
23:53:44 [32munit-tests_1  |[0m 	/opt/go/src/runtime/hashmap_fast.go:306 +0x52b fp=0xc420034918 sp=0xc4200348b8
23:53:44 [32munit-tests_1  |[0m github.com/hyperledger/fabric/vendor/github.com/spf13/viper.(*Viper).find(0xc42014e680, 0xc4237f17a0, 0x22, 0x22, 0xc4237f1740)
23:53:44 [32munit-tests_1  |[0m 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/viper/viper.go:628 +0x13a fp=0xc420034ca0 sp=0xc420034918
23:53:44 [32munit-tests_1  |[0m github.com/hyperledger/fabric/vendor/github.com/spf13/viper.(*Viper).Get(0xc42014e680, 0x9f78d8, 0x22, 0x1d, 0x3b9aca00)
23:53:44 [32munit-tests_1  |[0m 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/viper/viper.go:404 +0xe5 fp=0xc420034db0 sp=0xc420034ca0
23:53:44 [32munit-tests_1  |[0m github.com/hyperledger/fabric/vendor/github.com/spf13/viper.(*Viper).GetDuration(0xc42014e680, 0x9f78d8, 0x22, 0xc420034e30)
23:53:44 [32munit-tests_1  |[0m 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/viper/viper.go:481 +0x3f fp=0xc420034de8 sp=0xc420034db0
23:53:44 [32munit-tests_1  |[0m github.com/hyperledger/fabric/vendor/github.com/spf13/viper.GetDuration(0x9f78d8, 0x22, 0x3b9aca00)
23:53:44 [32munit-tests_1  |[0m 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/viper/viper.go:479 +0x41 fp=0xc420034e18 sp=0xc420034de8
23:53:44 [32munit-tests_1  |[0m github.com/hyperledger/fabric/gossip/util.GetDurationOrDefault(0x9f78d8, 0x22, 0x12a05f200, 0x5311db)
23:53:44 [32munit-tests_1  |[0m 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/util/misc.go:156 +0x35 fp=0xc420034e40 sp=0xc420034e18
23:53:44 [32munit-tests_1  |[0m github.com/hyperledger/fabric/gossip/discovery.getAliveExpirationTimeout(0x0)
23:53:44 [32munit-tests_1  |[0m 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:906 +0x48 fp=0xc420034e70 sp=0xc420034e40
23:53:44 [32munit-tests_1  |[0m github.com/hyperledger/fabric/gossip/discovery.getReconnectInterval(0xc423b74ed0)
23:53:44 [32munit-tests_1  |[0m 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:918 +0x22 fp=0xc420034ea0 sp=0xc420034e70
23:53:44 [32munit-tests_1  |[0m github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).Connect.func1(0xc4212b7860, 0xc423b87040, 0xe, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xc423b87040, ...)
23:53:44 [32munit-tests_1  |[0m 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:152 +0x24c fp=0xc420034f50 sp=0xc420034ea0
23:53:44 [32munit-tests_1  |[0m runtime.goexit()",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00sb5:,,Sprint 16 - Gossip,,,,,,ChristopherFerris,dolanor,yacovm,,,,,,,,master,,,true,13/Apr/17 11:47 PM;ChristopherFerris;has this been resolved? [~C0rWin] [~yacovm]??,"14/Apr/17 6:11 AM;yacovm;No.
This happens only in test code.
The solution is either to make the tests run not in parallel, or do something smarter. 
[~C0rWin] correct me if I'm wrong but this belongs to the backlog","13/Mar/18 9:54 AM;dolanor;I have a similar situation with the fabric-sdk-go (a previous version though).

I had to serialize the access to a call creating a new client with a mutex.

 

Viper is not thread-safe and is supposed to just be read once at the startup of a program, or with the WatchConfig util. The rest of the calls are not thread-safe. They need to be serialized on our side.

 

[https://github.com/spf13/viper/issues/268]

[https://github.com/spf13/viper/issues/174]

[https://github.com/spf13/viper/issues/353]

 ",,,,,,,,,,,,,,,,,,,,,
Update FIT to run the new end to end test,FAB-2644,15211,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,jimthematrix,jimthematrix,05/Mar/17 7:00 PM,10/Mar/17 8:44 PM,26/Apr/18 6:50 AM,10/Mar/17 8:44 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"two changes are needed:
- run test/fixtures/channel/docker-compose.yaml instead of test/fixtures/docker-compose.yaml
- run test/integration/e2e.js instead of end-to-end.js",,,,,,,,,,,,,,,,FAB-2655,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sa9:,,,,,,,,rameshthoomu,,,,,,,,,,,,,,10/Mar/17 8:44 PM;rameshthoomu;FIT job has been updated with new e2e program. ,,,,,,,,,,,,,,,,,,,,,,,
NullPointerException in verifyByChannel,FAB-2643,15210,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,05/Mar/17 6:06 PM,13/Mar/17 7:42 AM,26/Apr/18 6:50 AM,13/Mar/17 7:42 AM,,,,,,,,,,,,,,0,,,,,,,,,"Scenario: 

Peer gets an AliveMessage in gossip from an external organization, and the messageCryptoService tries to validate it.
The validation first goes to the local MSP (and fails) so it tries validating using one of the channel policies (which were recently introduced), but it fails because the channelPolicyManagerGetter returns a nil policyManager from some reason.
This results in a null dereference panic and the unexpected and sorrowful death of the peer.

panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0x756ff5]

goroutine 45 [running]:
panic(0xc1ad00, 0xc420016050)
        /opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/peer/gossip/mcs.(*mspMessageCryptoService).VerifyByChannel(0xc4201dd3b0, 0xc4200c2358, 0x3, 0x8, 0xc420293b00, 0x214, 0x214, 0xc42153ee10, 0x46, 0x46, ...)
        /opt/gopath/src/github.com/hyperledger/fabric/peer/gossip/mcs/mcs.go:234 +0x225
github.com/hyperledger/fabric/peer/gossip/mcs.(*mspMessageCryptoService).Verify(0xc4201dd3b0, 0xc420293b00, 0x214, 0x214, 0xc42153ee10, 0x46, 0x46, 0xc42153edc0, 0x42, 0x42, ...)
        /opt/gopath/src/github.com/hyperledger/fabric/peer/gossip/mcs/mcs.go:216 +0x1c0
github.com/hyperledger/fabric/gossip/gossip.(*discoverySecurityAdapter).validateAliveMsgSignature.func1(0xc420293b00, 0x214, 0x214, 0xc42153ee10, 0x46, 0x46, 0xc42153edc0, 0x42, 0x42, 0x3, ...)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:884 +0xa6
github.com/hyperledger/fabric/protos/gossip.(*SignedGossipMessage).Verify(0xc4200bf940, 0xc420293b00, 0x214, 0x214, 0xc4200bfbe0, 0x294, 0xc42148a600)
        /opt/gopath/src/github.com/hyperledger/fabric/protos/gossip/extensions.go:410 +0xcb
github.com/hyperledger/fabric/gossip/gossip.(*discoverySecurityAdapter).validateAliveMsgSignature(0xc4201ada80, 0xc4200bf940, 0xc420293b00, 0x214, 0x214, 0x214)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:888 +0xf2
github.com/hyperledger/fabric/gossip/gossip.(*discoverySecurityAdapter).ValidateAliveMsg(0xc4201ada80, 0xc4200bf940, 0xc42028d5c0)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:854 +0x190
github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleAliveMessage(0xc420086870, 0xc4200bf940)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:431 +0x208
github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMsgFromComm(0xc420086870, 0xc4200be2f0)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:338 +0x3aa
github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMessages(0xc420086870)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:282 +0x200
created by github.com/hyperledger/fabric/gossip/discovery.NewDiscoveryService
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:116 +0x50e
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00sa1:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Prevent initialization of gossip state transfer with zero height committer,FAB-2642,15209,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,05/Mar/17 4:58 PM,08/Mar/17 8:02 AM,26/Apr/18 6:50 AM,08/Mar/17 8:02 AM,,,,,,,,,,,,,,0,,,,,,,,,"Since block sequence numbers modeled with uint64 golang type and if committer returns current ledger height equals to zero the gossip metastate will be initialized with -1, which will caused by overflow and will lead anti entropy to request large amount of missing blocks to transfer.

Need to make sure state transfer will not be initialized with ledger of height zero.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00s9t:,,Sprint 13 - Gossip,,,,,,C0rWin,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Make gossip forwarding not send to the peer in which the message was received from,FAB-2641,15208,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,yacovm,yacovm,05/Mar/17 1:44 PM,27/Nov/17 11:11 PM,26/Apr/18 6:50 AM,27/Nov/17 11:11 PM,v1.0.0,,,,,,v1.1,,,fabric-gossip,,,,0,active,gossip,,,,,,,"When a message is gossiped via forwarding, it is simply added to the batching emitter and then decided to which peers to be sent according to all kinds of decisions based on the message type, origin, etc. etc. 
The decision of to which the message is sent doesn't take in account the peer the message came from. There is no reason to send back the message to the peer from which the message came from. 

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00s9l:,,Sprint 13 - Endorser,Sprint 16 - Gossip,,,,,C0rWin,denyeart,yacovm,,,,,,,,master,,,true,27/Nov/17 3:12 AM;denyeart;[~C0rWin] Do you still intend to work on this one?,"27/Nov/17 7:07 AM;C0rWin;There is work in progress, https://gerrit.hyperledger.org/r/#/c/15579/, almost done, once finished I will update.",27/Nov/17 4:12 PM;C0rWin;https://gerrit.hyperledger.org/r/#/c/15579/15,,,,,,,,,,,,,,,,,,,,,
Add support for an empty set of anchor peers,FAB-2640,15207,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,05/Mar/17 1:20 PM,13/Mar/17 7:42 AM,26/Apr/18 6:50 AM,13/Mar/17 7:42 AM,,,,,,,,,,,,,,0,,,,,,,,,"Gossip currently doesn't support an empty set of anchor peers in the genesis block.
In such a case, it should be assumed that the organization of the peer is the only member in the channel.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00s9d:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] pkcs11.js  assign PKCS libpath based on search ,FAB-2637,15204,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,04/Mar/17 1:59 AM,24/May/17 3:19 PM,26/Apr/18 6:50 AM,24/May/17 3:19 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"Test fabric-sdk-node/test/unit/pkcs11.js identifies the PKCS11 libpath based on the value of process.platform.   The assumption was that when process.platform is equal to 'linux', the PKCS library provided will be /usr/local/lib/softhsm/libsofthsm2.so.

This is true when softHSM2 is installed by downloading the product from this link suggested in the test case: https://wiki.opendnssec.org/display/SoftHSMDOCS/SoftHSM+Documentation+v2

However, an alternate method to install softHSM2 is with apt-get install.  When installed with apt-get on a Vagrant Ubuntu VM, the PKCS11 library is located at /usr/lib/x86_64-linux-gnu/softhsm/libsofthsm2.so.  Thus setting the PKCS11 libpath based on process.platform is not reliable.

The solution is to port _findPKCS11Lib()_ in +fabric/bccsp/pkcs11/impl_test.g+o to Nodejs and use that method.   This function searches for the library in five directories.  I have added /usr/local/lib/softhsm/libsofthsm2.so to the search based on the installation on my vLaunch Ubuntu VM. 

Another goal of this fix is to enable fabric-sdk-node/test/unit/pkcs11.js to run in the CI.  A fabric  PKCS11 test case is already running successfully in CI.  I have changed the user pin coded in pkcs11.js to the one used by this other test case so both tests can run.  I also added some tracing to fabric-sdk-node/./fabric-client/lib/impl/bccsp_pkcs11.js to help debug issues in CI. 

One consequence of this fix is that all users of 'gulp test-headless' need to install softHSM version 2, or else accept that pkcs11.js fails.   I added a sample softhsm2-util command line configuration to test case comments for the convenience of testers. ","fabric-sdk-node commit d99495fe674dad5061860ffc9bd537962ce649b7
vlaunch VM ",,,,,,,,,,,,,,,,FAB-2797,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00s8p:,,,,,,,,jjjjibm,,,,,,,,,,master,,,true,"04/Mar/17 2:28 AM;jjjjibm;commit 4e53357584374bb8c34b797660087335bbd5bc19
Author: jjjjibm <jcwolf@us.ibm.com>
Date:   Fri Mar 3 21:26:00 2017 -0500

    node-SDK FAB-2337 assign PKCS11 libpath based on search

    1.Change  PKCS11 libpath assignment algorithm to
       search among common paths for the softHSM2 installation.
    2.Change hard coded user pin to be consistent with existing
       successful CI pkcs11 tests.
    2.Add tracing to fabric-sdk-node/fabric-client/lib/impl/bccsp_pkcs11.js
    3.Change fabric-sdk-node/build/tasks/test.js to
       include pkcs11.js in test-headless task.

    This will cause CI to execute pkcs11.js.  The tracing will help us debug
    problems.  It can be removed later.

    Change-Id: I0fa094142a1aadb3315ff23f45ba70b3de2f36d5
    Signed-off-by: jjjjibm <jcwolf@us.ibm.com>
",04/Mar/17 2:29 AM;jjjjibm;https://gerrit.hyperledger.org/r/#/c/6825/,"04/Apr/17 6:54 PM;jjjjibm;$ git log -1
commit ee339f9eaa8db97636a26ebdbb3998e702210445
Author: jjjjibm <jcwolf@us.ibm.com>
Date:   Fri Mar 3 21:26:00 2017 -0500

    node-SDK FAB-2337 assign PKCS11 libpath based on search

    1.Change  PKCS11 libpath assignment algorithm to
       search among common paths for the softHSM2 installation.
    2.Change hard coded user pin to be consistent with existing
       successful CI pkcs11 tests.
    2.Add tracing to fabric-sdk-node/fabric-client/lib/impl/bccsp_pkcs11.js
    3.Change fabric-sdk-node/build/tasks/test.js to
       include pkcs11.js in test-headless task.

    This will cause CI to execute pkcs11.js.  The tracing will help us debug
    problems.  It can be removed later.

    Change-Id: I0fa094142a1aadb3315ff23f45ba70b3de2f36d5
    Signed-off-by: jjjjibm <jcwolf@us.ibm.com>
",04/Apr/17 6:55 PM;jjjjibm;The fix is not yet working in CI.  Ramesh requested FAB-2797 assigned to him so he can investigate solutions for CI. ,,,,,,,,,,,,,,,,,,,,
Verify genesis block after receiving join channel command,FAB-2636,15203,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,04/Mar/17 1:25 AM,01/Nov/17 1:47 PM,26/Apr/18 6:50 AM,01/Nov/17 1:47 PM,,,,,,,Abandoned,Future,,fabric-peer,,,,0,,,,,,,,,"Peer commits block after receiving it from join channel command, while peer doesn't verifies block correctness with the genesis block available on ordering service. In fact peer doesn't try to request genesis block from the orderer. Need to add an ability to run validation after receiving join channel command and prevent peer to join in case wrong block is received. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhy:zz9xr6zr,,,,,,,,C0rWin,denyeart,jeffgarratt,knagware9,muralisr,,,,,,,,,,"11/Apr/17 8:07 PM;denyeart;[~C0rWin]Can you be more specific on what validation? Is there existing validation logic? Is this must-do in v1.0.0, that is, is it really a bug if not done, or is this an enhancement that could come in 1.1?","12/Apr/17 12:18 AM;C0rWin;[~denyeart] Currently peer accepts genesis block via join channel command, I guess there is need to verify orderer signature and ensure this is indeed same block as at orderer service. Currently block accepted without additional checks, as I stated in the description once peer gets block it creates the ledger and commits the block, at the time item was opened no one passed validation on the genesis block, I'd guess validation suppose to be the same as for any other configuration blocks. While I assume there is might be potential chicken and the egg problem, since genesis block includes information on how to validate the block.",31/May/17 9:18 PM;C0rWin;Per agreement with [~binhn] targeting this for post v1.0.,07/Sep/17 5:48 PM;muralisr;[~C0rWin] is this still a problem ... let me assign it to you for now.,26/Oct/17 7:15 PM;jeffgarratt;[~C0rWin] should this remain open?,"26/Oct/17 8:26 PM;C0rWin;Well, currently peer accepts genesis block, w/o verifying whenever it matches genesis block at ordering service.
Not sure this is a real concerns since next block hash will have to match to the previous one. But I think for integrity
we need to take care of this and do this extra check.
","01/Nov/17 1:47 PM;C0rWin;Thinking of it a bit more, there is no actual point of verifying the genesis block upon join channel command, since if one would like to provide tampered genesis block it will be also able to provide faked ordering service endpoint. For now, I'd prefer to close this ticket.",,,,,,,,,,,,,,,,,
For testchainid there is a need to add ordering endpoint into genesis block generated.,FAB-2635,15202,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,04/Mar/17 1:15 AM,05/Mar/17 5:29 PM,26/Apr/18 6:50 AM,05/Mar/17 5:29 PM,,,,,,,,,,,,,,0,,,,,,,,,"Ordering service endpoint now read from the configuration block, while there is a still part of the code to maintain backward compatibility which works with *testchainid*. Need to add option to the peer cli command such that it will allow to encode into configuration block ordering service address.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00s89:,,Sprint 13 - Gossip,,,,,,C0rWin,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Produce event once genesis block committed to the ledger,FAB-2634,15201,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,04/Mar/17 1:10 AM,05/Mar/17 5:29 PM,26/Apr/18 6:50 AM,05/Mar/17 5:29 PM,,,,,,,,,,,,,,0,,,,,,,,,"Usually when new block is committed on peer there is an event produced. However this is not the case for the the genesis block, need to make sure to generate event for very first block as well, while peer joins the channel.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00s81:,,Sprint 13 - Gossip,,,,,,C0rWin,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
some blocks not delivered to peer/client connecting to orderer after orderer is docker stop/paused and restarted,FAB-2633,15200,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,suryalnvs,scottz,scottz,03/Mar/17 11:39 PM,05/Jun/17 9:10 PM,26/Apr/18 6:50 AM,05/Jun/17 9:10 PM,v1.0.0-alpha2,,,,,,v1.0.0,,,fabric-orderer,,,,0,qa,quality,,,,,,,"Using commit 25dbdeeab8f3d4e431a5434bcee149ee30cf556e from Wed Mar 1,
running continual transactions through the orderer service (kafka in this testcase),
then ""docker stop"" and start an orderer,
then connect a new peer client to the orderer after it recovers,
and we observe that many of the blocks from the beginning of the chain are not delivered to that new consumer (peer) client.

Same behavior is observed when ""docker pause"" and unpause, instead of stop and start.

EXPECTED Behavior: all blocks, from genesis up to the latest block, should be delivered, as is the case when no restarts are performed.
In this example (test output logs are attached), we see that the first block delivered to the MasterConsumer-o3-c1 is block number 1687 containing 10 transactions (and therefore is NOT the genesis block), and in fact only 1713 blocks are delivered to that consumer (when all 3400 blocks are delivered to other consumers).

Some key points in the log are:

===Stopping orderer1 at  2017-03-03 23:13:06.190899593 +0000 UTC
===Producer-o1-c0 failed to broadcast TX 646 (ACK=646 NACK=1), 2017-03-03 23:13:06.267421243 +0000 UTC, err: rpc error: code = 13 desc = transport is closing
===Consumer-o1-c0 CLOSING. Totals received numtrans=1891 numBlocks=190
===Started  orderer1 at  2017-03-03 23:13:39.201764559 +0000 UTC
===Started client MasterConsumer-o3-c1 to recv delivered batches from ord[3] ch[0] srvr=127.0.0.1:5006 chID=testchainid
===Consumer-o3-c0 recvd blockNum 1687 with numtrans=10/10; numBlocks=1, 2017-03-03 23:14:47.578756839 +0000 UTC
===Consumer-o3-c0 recvd blockNum 1688 with numtrans=10/10; numBlocks=2, 2017-03-03 23:14:47.57969228 +0000 UTC

===Consumer-o3-c0 CLOSING. Totals received numtrans=17121 numBlocks=1713, 2017-03-03 23:15:17.43225854 +0000 UTC
===Consumer-o0-c0 CLOSING. Totals received numtrans=33982 numBlocks=3400, 2017-03-03 23:15:17.432255955 +0000 UTC
===Consumer-o2-c0 CLOSING. Totals received numtrans=33982 numBlocks=3400, 2017-03-03 23:15:17.432390377 +0000 UTC


To reproduce, run the following tests:
 $  cd  $GOPATH/github.com/hyperledger/fabric/bddtests/regression/go/ote
 $  go test -run ORD92
 $  go test -run ORD93

func Test_ORD92_50000TX_1ch_3ord_kafka_3kbs(t *testing.T) {
        go stopAndStart(""orderer1"") // sleep 40 && docker stop orderer1 && sleep 30 && docker start orderer1
        spyOnOrdererAfterSecs(1, 120)  // returns immediately after starting a go thread which waits (20=launchDelaySecs + 120) seconds and then starts MasterSpy on orderer1
        passResult, finalResultSummaryString := ote(""ORD-92"", 50000, 1, 3, ""kafka"", 3, spyDefer, 1 )
        if !passResult { t.Error(finalResultSummaryString) }
}

//93 pause an orderer (not orderer0, so we can still see progress logs)
func Test_ORD93_50000TX_1ch_3ord_kafka_3kbs(t *testing.T) {
        go pauseAndUnpause(""orderer1"")
        spyOnOrdererAfterSecs(1, 120)  // returns immediately after starting a go thread which waits (20=launchDelaySecs + 120) seconds and then starts MasterSpy on orderer1
        passResult, finalResultSummaryString := ote(""ORD-93"", 50000, 1, 3, ""kafka"", 3, spyDefer, 1 )
        if !passResult { t.Error(finalResultSummaryString) }
}
",,,,,,,,,,,,,,,,,,,,03/Mar/17 11:39 PM;scottz;fail_ORD92.txt;https://jira.hyperledger.org/secure/attachment/10560/fail_ORD92.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00s7t:,,,,,,,,kchristidis,scottz,suryalnvs,,,,,,,,,,,,"05/Jun/17 4:16 AM;kchristidis;When reproducing this, please make sure that the ""verbose"" flag for Kafka logs is set to true: [https://github.com/hyperledger/fabric/blob/master/bddtests/dc-orderer-base.yml#L17]

Please also attach the logs from every ordering service node used in this run.","05/Jun/17 9:09 PM;suryalnvs;I retested using *commit 3b40efaee8584fd2662c59c0f7fc5a1a18c38f58, Date: Fri Jun 2 03:00:52 2017 +0000*, *OTE testname=ORD-78 TX=30000 Channels=1 Orderers=3 ordererType=kafka kafka-brokers=4 oteSpy=OFF producersPerCh=1* and manually stopped orderer0.example.com and started again and connected a deliver client from another terminal which delivered all the blocks that were delivered to other orderers (orderer1.example.com, orderer2.example.com). Similarly tested the same scenario by pausing and unpausing the orderer0.example.com instead of stopping and starting. Observed that all blocks are delivered to orderer0.example.com. *{color:#14892c}So issue is no more reproducible.{color}*",,,,,,,,,,,,,,,,,,,,,,
  Unable to deploy (instantiate) chaincode using default channel testchainid,FAB-2629,15196,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,Ratnakar,Ratnakar,03/Mar/17 9:18 PM,05/Mar/17 6:20 AM,26/Apr/18 6:50 AM,05/Mar/17 6:20 AM,,,,,,,v1.0.0,,,fabric-endorser,fabric-peer,,,0,Endorser,v1.0,,,,,,,"For quick verification of chaincode functionality, I would prefer using the CLI commands with default channel (testchainid).
However, while instantiating the chaincode it fails with below error

{code}
Error: Error endorsing chaincode: rpc error: code = 2 desc = Failure while looking up the ledger testchainid
{code}


Verified on commit level : *5f4b99a894826f0e8f2ea1ddcfe27099da5e7760*
h2. Steps to reproduce the issue:

*Pre-Req:*
Verified this on Vagrant environment
{code}
	vagrant up 
	vagrant ssh
	make native peer-docker
{code}


*Vagrant Terminal 1:*
{panel}
	orderer
{panel}

*Vagrant Terminal 2:*
{panel}
	peer node start
{panel}


*Vagrant Terminal 2:*
{code}
peer chaincode install -o 127.0.0.1:7050 -n mycc -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02

$ ls /var/hyperledger/production/chaincodes/
-rw-r--r-- 1 vagrant vagrant 18398890 Mar  3 20:44 mycc.1.0
{code}

while instantiating the chaincode it fails
{code}
$ peer chaincode instantiate -o 127.0.0.1:7050 -n mycc -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c '{""Args"":[""init"",""a"", ""100"", ""b"",""200""]}'
Error: Error endorsing chaincode: rpc error: code = 2 desc = Failure while looking up the ledger testchainid
Usage:
  peer chaincode instantiate [flags]

Global Flags:
  -C, --chainID string             The chain on which this command should be executed (default ""testchainid"")
  -c, --ctor string                Constructor message for the chaincode in JSON format (default ""{}"")
  -E, --escc string                The name of the endorsement system chaincode to be used for this chaincode
  -l, --lang string                Language the chaincode is written in (default ""golang"")
      --logging-level string       Default logging level and overrides, see core.yaml for full syntax
  -n, --name string                Name of the chaincode
  -o, --orderer string             Ordering service endpoint
  -p, --path string                Path to chaincode
  -P, --policy string              The endorsement policy associated to this chaincode
      --test.coverprofile string   Done (default ""coverage.cov"")
  -t, --tid string                 Name of a custom ID generation algorithm (hashing and decoding) e.g. sha256base64
  -u, --username string            Username for chaincode operations when security is enabled
  -v, --version string             Version of the chaincode specified in install/instantiate/upgrade commands
  -V, --vscc string                The name of the verification system chaincode to be used for this chaincode
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00s6x:,,,,,,,,Ratnakar,,,,,,,,,,,,,,05/Mar/17 6:20 AM;Ratnakar;Issue has been fixed with the commit : https://gerrit.hyperledger.org/r/#/c/6821/,,,,,,,,,,,,,,,,,,,,,,,
"devenv Vagrant on Windows - Fabric-ca: ""Error: The creator certificate is not valid, err The supplied identity is not valid, Verify() returned x509: certificate signed by unknown authority""",FAB-2627,15194,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,2020Nishi,mrkiouak,mrkiouak,03/Mar/17 9:02 PM,25/May/17 4:25 PM,26/Apr/18 6:50 AM,25/May/17 4:25 PM,v1.0.0,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"From windows git bash:
{code:bash}
git clone http://gerrit.hyperledger.org/r/fabric
cd fabric/devenv
vagrant up
vagrant ssh
cd ..
git clone http://gerrit.hyperledger.org/r/fabric-ca
git clone http://gerrit.hyperledger.org/r/fabric-chaintool
cd fabric
make clean
make docker
cd ../fabric-ca
make clean
make docker
cd ../fabric-chaintool/examples/example02/src/app
chaintool build
chaintool package
cd ../client/nodejs
npm install (with cding to tmp, creating a folder with appropriate permissions, and soft symlinking to this dir if issues with path length)
node client.js -p ../../app/build/org.hyperledger.chaincode.example02-0.1-SNAPSHOT.car
{code:bash}

{code:bash}
info: Returning a new winston logger with default configurations
info: [Chain.js]: Constructed Chain instance: name - chaintool-demo, securityEnabled: true, TCert download batch size: 10, network mode: true
info: [Peer.js]: Peer.const - url: grpc://localhost:7051 options  grpc.ssl_target_name_override=tlsca, grpc.default_authority=tlsca
info: [FabricCAClientImpl.js]: Successfully constructed Fabric CA service client: endpoint - {""protocol"":""http"",""hostname"":""localhost"",""port"":7054}
info: [crypto_ecdsa_aes]: This class requires a CryptoKeyStore to save keys, using the store: {""opts"":{""path"":""/home/vagrant/.hfc-key-store""}}
info: [Client.js]: Successfully loaded user ""admin"" from local key value store
[Function]
info: [packager/Car.js]: Packaging CAR file from ../../app/build/org.hyperledger.chaincode.example02-0.1-SNAPSHOT.car
error: [Peer.js]: GRPC client got an error response from the peer. Error: The creator certificate is not valid, err The supplied identity is not valid, Verify() returned x509: certificate signed by unknown authority
    at /chaintool-node_modules/nest/node_modules/grpc/src/node/src/client.js:434:17
error: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: The creator certificate is not valid, err The supplied identity is not valid, Verify() returned x509: certificate signed by unknown authority
    at Object.callback (/chaintool-node_modules/nest/node_modules/fabric-client/lib/Peer.js:191:13)
    at /chaintool-node_modules/nest/node_modules/grpc/src/node/src/client.js:437:14

{code}

Additionally, in some instances after image/container creation, ca-cert.pem in test_ca_1 container does not match vagrant or windows file system md5sum.

Even when hash does match, above error occurs.","Windows 10 64 Bit
Vagrant + VirtualBox
fabric/devenv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00syd:,,,,,,,,bmos299,mrkiouak,Nishi,smithbk,YingShi,,,,,,,,,,03/Mar/17 9:30 PM;bmos299;I'll work on reproducing in the lab. ,"10/Mar/17 2:48 AM;YingShi;Run into the same issue in Win7 node SDK, no matter peers are in vagrant VM or Ubuntu OS.

error[39m: [Peer.js]: GRPC client got an error response from the peer ""grpc://localhost:7051"". Error: The creator certificate is not valid, err The supplied identity is not valid, Verify() returned x509: certificate signed by unknown authority","17/Apr/17 4:22 PM;Nishi;On following commit levels:
fabric: *a076bbada80cbcda4825c62233f16290edb1d1b1*
fabric-ca: *de5f4bdc49f63fd4f9f48acf99689fc131313ec6*
fabric-chaintool: *b8f8a5c23ba97f5034a19bbefb1730e31739a564*

Installed prereq JDK 1.8.0_121 as in http://fabric-chaintool.readthedocs.io/en/latest/getting-started/
$ git clone https://github.com/hyperledger/fabric-chaintool.git
$ cd fabric-chaintool && make install

cd /fabric-chaintool/examples/example02/app
@step 
_chaintool build_ 
it failed with following message:
{code}
ubuntu@hyperledger-devenv:a076bba:/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app$ chaintool build
Build using configuration for  ./
[CCI] parse org.hyperledger.chaincode.example02
[CCI] parse appinit
[PB] protoc --go_out=/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/org/hyperledger/chaincode/example02 --proto_path=/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/org/hyperledger/chaincode/example02 /opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/org/hyperledger/chaincode/example02/interface.proto
Exception in thread ""main"" java.io.IOException: Cannot run program ""protoc"": error=2, No such file or directory
	at java.lang.ProcessBuilder.start(ProcessBuilder.java:1048)
	at me.raynes.conch.low_level$proc.invokeStatic(low_level.clj:33)
	at me.raynes.conch.low_level$proc.doInvoke(low_level.clj:7)
	at clojure.lang.RestFn.applyTo(RestFn.java:137)
	at clojure.core$apply.invokeStatic(core.clj:648)
	at clojure.core$apply.invoke(core.clj:641)
	at me.raynes.conch$run_command.invokeStatic(conch.clj:197)
	at me.raynes.conch$run_command.invoke(conch.clj:196)
	at me.raynes.conch$execute.invokeStatic(conch.clj:245)
	at me.raynes.conch$execute.doInvoke(conch.clj:236)
	at clojure.lang.RestFn.applyTo(RestFn.java:139)
	at clojure.core$apply.invokeStatic(core.clj:648)
	at clojure.core$apply.invoke(core.clj:641)
	at chaintool.platforms.golang.core$protoc.invokeStatic(core.clj:29)
	at chaintool.platforms.golang.core$protoc.doInvoke(core.clj:29)
	at clojure.lang.RestFn.invoke(RestFn.java:457)
	at chaintool.platforms.golang.core$protoc_cmd.invokeStatic(core.clj:73)
	at chaintool.platforms.golang.core$protoc_cmd.invoke(core.clj:66)
	at chaintool.platforms.golang.core$emit_proto.invokeStatic(core.clj:203)
	at chaintool.platforms.golang.core$emit_proto.invoke(core.clj:195)
	at chaintool.platforms.golang.core$generate$iter__2280__2284$fn__2285.invoke(core.clj:230)
	at clojure.lang.LazySeq.sval(LazySeq.java:40)
	at clojure.lang.LazySeq.seq(LazySeq.java:49)
	at clojure.lang.RT.seq(RT.java:521)
	at clojure.core$seq__4357.invokeStatic(core.clj:137)
	at clojure.core$dorun.invokeStatic(core.clj:3024)
	at clojure.core$dorun.invoke(core.clj:3024)
	at chaintool.platforms.golang.core$generate.invokeStatic(core.clj:229)
	at chaintool.platforms.golang.core$generate.invoke(core.clj:225)
	at chaintool.platforms.golang.userspace.GolangUserspacePlatform.build(userspace.clj:47)
	at chaintool.platforms.api$fn__76$G__55__79.invoke(api.clj:17)
	at chaintool.platforms.api$fn__76$G__54__83.invoke(api.clj:17)
	at chaintool.build.core$run.invokeStatic(core.clj:22)
	at chaintool.build.core$run.invoke(core.clj:20)
	at chaintool.build.core$compile.invokeStatic(core.clj:26)
	at chaintool.build.core$compile.invoke(core.clj:25)
	at chaintool.subcommands.build$run.invokeStatic(build.clj:28)
	at chaintool.subcommands.build$run.invoke(build.clj:24)
	at chaintool.core$_app.invokeStatic(core.clj:175)
	at chaintool.core$_app.doInvoke(core.clj:143)
	at clojure.lang.RestFn.applyTo(RestFn.java:137)
	at clojure.core$apply.invokeStatic(core.clj:646)
	at clojure.core$apply.invoke(core.clj:641)
	at chaintool.core$_main.invokeStatic(core.clj:184)
	at chaintool.core$_main.doInvoke(core.clj:183)
	at clojure.lang.RestFn.applyTo(RestFn.java:137)
	at chaintool.core.main(Unknown Source)
Caused by: java.io.IOException: error=2, No such file or directory
	at java.lang.UNIXProcess.forkAndExec(Native Method)
	at java.lang.UNIXProcess.<init>(UNIXProcess.java:247)
	at java.lang.ProcessImpl.start(ProcessImpl.java:134)
	at java.lang.ProcessBuilder.start(ProcessBuilder.java:1029)
	... 46 more
{code}
","19/Apr/17 12:25 AM;Nishi;protoc compiler which was required to execute ""chaintool build"" was missing on my system.
Extracted from  https://github.com/google/protobuf/releases/download/v3.2.0/protoc-3.2.0-linux-x86_64.zip protoc binary and placed it under /usr/local/bin.

Then *chaintool build*  completed successfully with following messages:

{code}
ubuntu@hyperledger-devenv:a076bba:/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app$ chaintool build
Build using configuration for  ./
[CCI] parse org.hyperledger.chaincode.example02
[CCI] parse appinit
[PB] protoc --go_out=/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/org/hyperledger/chaincode/example02 --proto_path=/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/org/hyperledger/chaincode/example02 /opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/org/hyperledger/chaincode/example02/interface.proto

[PB] protoc --go_out=/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/appinit --proto_path=/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/appinit /opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/appinit/interface.proto

[PB] protoc --go_out=/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/org/hyperledger/chaintool/meta --proto_path=/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/org/hyperledger/chaintool/meta /opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/org/hyperledger/chaintool/meta/interface.proto

[GO] go get -d -v chaincode
	Using GOPATH /opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/deps:/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build:/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app:/opt/gopath
github.com/golang/protobuf (download)

[GO] go build -o /opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/bin/org.hyperledger.chaincode.example02-0.1-SNAPSHOT -ldflags -linkmode external -extldflags '-static' chaincode
	Using GOPATH /opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/deps:/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build:/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app:/opt/gopath

Compilation complete
{code}

After that ran *chaintool package* successfully as follows

{code}
ubuntu@hyperledger-devenv:a076bba:/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app$ chaintool package
Writing CAR to: /opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/org.hyperledger.chaincode.example02-0.1-SNAPSHOT.car
Using path ./ [""src"" ""chaincode.yaml""]
|------+------------------------------------------+--------------------------------------------------------|
| Size |                   SHA1                   |                          Path                          |
|------+------------------------------------------+--------------------------------------------------------|
| 438  | d28b22c7c30506af926dcb5bc8b946ac35ddac7f | chaincode.yaml                                         |
| 3904 | 71d7b7253158c006d2b619e192fd04812e812514 | src/chaincode/chaincode_example02.go                   |
| 143  | 7305f65e18e4aab860b201d40916bb7adf97544f | src/interfaces/appinit.cci                             |
| 360  | 5000028a491f27946e76f0ec4dfd05a293223fad | src/interfaces/org.hyperledger.chaincode.example02.cci |
|------+------------------------------------------+--------------------------------------------------------|
Platform:            org.hyperledger.chaincode.golang version 1
Digital Signature:   none
Raw Data Size:       4845 bytes
Archive Size:        2366 bytes
Compression Alg:     gzip
Chaincode SHA3:      1f23c4ab60c1e47d9efb3728e5d3f2922cf7d79fdce359281b26d72f979ad223c8bea18366fc92bd08eca0ee9e7db9a57899560b8cffa4267eae3e34cf5ac48f
{code}","01/May/17 2:17 PM;smithbk;Hi Nishi, just checking on the status of this.  Any progress?","15/May/17 12:51 PM;Nishi;Keith.

Successfully built and ran chaintool package. Comments posted above.

Thanks!

 ","16/May/17 10:06 PM;smithbk;[~mrkiouak] can you close this if you agree that it is fixed?

Thanks","25/May/17 4:25 PM;smithbk;Marked done as I believe that it is fixed.  If not, pls reopen.",,,,,,,,,,,,,,,,
original end-to-end.js test should be kept to testing the default config,FAB-2619,15186,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,03/Mar/17 1:21 PM,04/Mar/17 4:11 AM,26/Apr/18 6:50 AM,04/Mar/17 4:11 AM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"some changes went in by accident that got the original test/integration/end-to-end.js to target the new ""mychannel"" with new msp ids. it should have been kept on the default config and left the new config to the new test/integration/e2e.js",,,,,,,,,,,,,,,,FAB-2621,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00r19:,,,,,,,,,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Potential crash due to FIXME in cauthdsl,FAB-2616,15183,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,03/Mar/17 12:55 AM,10/Mar/17 6:24 PM,26/Apr/18 6:50 AM,10/Mar/17 6:24 PM,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00s4p:,,,,,,,,jyellick,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
root permissions setting up on msp directory after running fabric unit-tests,FAB-2613,15180,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,rameshthoomu,rameshthoomu,02/Mar/17 10:27 PM,15/Apr/17 4:09 AM,26/Apr/18 6:50 AM,15/Apr/17 4:09 AM,,,,,,,v1.0.0,,,fabric-quality,,,,0,build-system,,,,,,,,"Observed root permissions are setting up on ""msp"" directory after running fabric unit-tests. with this we are unable to delete ""workspace"" from ""power"" and ""z"" Jenkins builds. We observed this is causing because of the mount implemented in ""unit-test/docker-compose.yaml"" file.

https://github.com/rameshthoomu/fabric/blob/master/unit-test/docker-compose.yml#L25

as a workaround we are deleting workspace manually using cron job but this has to fix soon.
https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-power-ppc64le/418/console
",Jenkins CI,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00s41:,,,,,,,,rameshthoomu,,,,,,,,,,,,,,15/Apr/17 4:09 AM;rameshthoomu;This issue is not reproducing now..,,,,,,,,,,,,,,,,,,,,,,,
deliver_stdout client hard-codes starting point,FAB-2605,15172,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,kchristidis,kchristidis,02/Mar/17 6:04 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,05/Mar/17 2:45 AM,,,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00s2h:,,Sprint 13 - Consensus,,,,,,kchristidis,,,,,,,,,,master,,,true,02/Mar/17 6:11 PM;kchristidis;https://gerrit.hyperledger.org/r/#/c/6751/,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] http.<ip:port> /docs/gen/EventHub.html,FAB-2599,15166,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,02/Mar/17 2:53 PM,05/Apr/17 6:39 PM,26/Apr/18 6:50 AM,05/Apr/17 6:39 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"(0) json --> JSON

(1) from an event {color:#205081}source(peer) {color}--> from an event{color:#205081} source (peer)
{color}

(2) connect()
 This needs to document thows  Error('Must set peer address before connecting.');


(3) registerChaincodeEvent(ccid, eventname, callback)
The Type token appears twice in this table:

 ccid             string            {color:#205081}string{color} chaincode id
 eventname string            {color:#205081}string{color} The regex string used to filter events
 callback 	    function        {color:#205081}Function{color} Callback function for filter matches that takes a single parameter which is a json object representation of type ""message ChaincodeEvent"" from lib/proto/chaincodeevent.proto


(4) registerTxEvent(txid, callback)
used by the sdk ==> used by the SDK
instantiate and invoke ==> Instantiate and Invoke ?

(4a)
txid 	string 	string transaction id
==>
txid 	string 	transaction id

(4b) (very long sentence) 
Function that takes a parameter which is a json object representation of type ""message Transaction"" from lib/proto/fabric.proto and a parameter which is a boolean that indicates if the transaction is invalid (true=invalid)
==>
Function that takes a parameter which is a JSON object representation of type ""message Transaction"" from lib/proto/fabric.{color:#205081}proto, and {color}a parameter which is a Boolean that indicates if the transaction is invalid (true=invalid).

or
==>
Function that takes a parameter which is a JSON object, and a parameter which is a boolean. The JSON object represents type 'message transaction' from lib/proto/fabric.proto.  The boolean indicates whether the transaction is invalid (true = invalid) 

(4c)  lib/proto/fabric.proto.   
There's no fabric.proto in fabric-sdk-node/fabric-client/lib/protos, and there's no
fabric-sdk-node/fabric-client/lib/proto.  Please correct this pathname  (but it is great that the pathname of the prototype is mentioned here!)

(5) setPeerAddr(peeraddr, opts) vs setPeerAddr(peerUrl)
The generated document describes the opts parameter, but the code has no such parameter:
setPeerAddr(peerUrl)

(6) txCallback(block)
private internal callback for processing tx events
==>
Private internal callback for processing transaction events

(6a) If this is private in the sense that we don't want nodejs clients calling it, is it wise to document its parameters?
(6b) json object representing block of tx from the fabric
==>
JSON object representing block of transactions from the fabric

(7) unregisterTxEvent(txid)
In the Parameters table, for row txid, the Type column is empty but 'string' appears in the Description column.  

","fabric      commit 39da6d5f263913668567112399c1708e3f87efc3
fabric-ca commit c9fb04e0f795589485915883fcbca3ae2fc0aaad
fabric      commit 817fa851931e2614646800bcdd6da75940f85dd8",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00s1d:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] http://<ip:port>/docs/gen/CryptoSuite_ECDSA_AES.html  -- describe parameters and results,FAB-2596,15163,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,02/Mar/17 2:18 PM,05/Apr/17 6:39 PM,26/Apr/18 6:50 AM,05/Apr/17 6:39 PM,,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"The generated documentation for class CryptoSuite_ECDSA_AES has a couple issues.

Mostly I complain the parameters and results aren't described.  But 6a, 8a, and 10 are different issues.

(1)
Generated documentation:
_decrypt()   /* no parameters */
_Actual code:
_+_decrypt(key, cipherText, opts)   /* parameters that should be documented_+_

Documenting the inputs will also help this generated remark make sense:
_The opts argument should be appropriate for the algorithm used.
_D

(2) Here's another
Generated document:
deriveKey()   /* incidentally, I like the way the document says To be implemented.  This will help if this method is not implemented by our first release.

Actual code:
deriveKey(key, opts) 

(3) 
encrypt()  vs encrypt(key, plaintext, opts)
I like the way it throws an error so users won't be confused if they try this before it is implemented

(4) 
generateKey()  vs  generateKey(opts)
This one is implemented 

(5) 
getKey()       vs  getKey(ski)

(5a) Subject Key Identifier ski. --> Subject Key Identifier (ski).

(6)  hash()   vs   hash(msg, opts)

 (6a) Hashes {color:#205081}messages msg{color} using options opts.
===>{color:#205081} messages msg {color}needs to be cleaned up, but this may be moot once the parameters are documented.  

(7) importkey() vs  importKey(raw, opts)

(8) sign()  vs sign(key, digest, opts)

(8a) in sign() ""The opts argument is not needed"".   do you mean it is optional, or do you mean it is ignored by this implementation?    The code seems to be ignoring it.  
Suggestion:
===> The opts argument is not used by this implementation.
===> The opts argument is not used in this implementation.
===> This implementation ignores the opts argument.

(9) verify() vs verify(key, signature, digest)

(10 Key k is mentioned a lot in this class.  I searched the web to see if key k has a specific meaning.  I didn't find any  mention of it.  Will the meaning be clear to users of this class?

How to recreate:
1.Clone fabric-sdk-node
2.Gulp doc to generate doc
3.python -m SimpleHTTPServer &
4.Use a browser to navigate to <your ip>:8000
5.Navigate to docs/gen/
6.Select CryptoSuite_ECDSA_AES from the Classes pull down menu. ","fabric      commit 39da6d5f263913668567112399c1708e3f87efc3
fabric-ca commit c9fb04e0f795589485915883fcbca3ae2fc0aaad
fabric      commit 817fa851931e2614646800bcdd6da75940f85dd8",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00s0p:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix unkeyed fields in sbft composite literal,FAB-2588,15155,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,kchristidis,kchristidis,02/Mar/17 5:57 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,06/Mar/17 4:05 PM,,,,,,,,,,fabric-orderer,,,,0,sbft,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ryx:,,Sprint 13 - Consensus,,,,,,kchristidis,,,,,,,,,,master,,,true,02/Mar/17 5:58 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/6719/,,,,,,,,,,,,,,,,,,,,,,,
"first TX of new broadcast client is NACKed, sometimes",FAB-2583,15150,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,suryalnvs,scottz,scottz,02/Mar/17 1:37 AM,05/Jun/17 12:49 AM,26/Apr/18 6:50 AM,05/Jun/17 12:49 AM,v1.0.0-alpha2,,,,,,v1.0.0,,,fabric-orderer,,,,0,qa,reproduction-requested,,,,,,,"In some test iterations it works, but occasionally when connecting a new broadcast client to an orderer, it fails to send even one transaction successfully. In this test, we connect 3 producers (broadcast clients) - one to each orderer. Only one fails; the others send msgs just fine.

vagrant@hyperledger-devenv:v0.3.0-64a7ca4:/opt/gopath/src/github.com/hyperledger/fabric/bddtests/regression/go/ote$ go test -run ORD97
========== OTE testname=ORD-97 TX=100000 Channels=1 Orderers=3 ordererType=kafka kafka-brokers=3 oteSpy=OFF producersPerCh=1

Using DEFAULT channelID = testchainid
Finished creating all CONSUMERS clients
Finished creating all 3 PRODUCERs at 2017-03-02 01:03:10.385641961 +0000 UTC
Broadcast error on TX 1 (the first error for Producer-o0-c0 after 0 ACKs); 2017-03-02 01:03:12.394240667 +0000 UTC, err: Got unexpected status: SERVICE_UNAVAILABLE


Some code snippet:

        b := newBroadcastClient(client, chanID)
        time.Sleep(2 * time.Second)
                b.broadcast([]byte(fmt.Sprintf(""Testing %s %v %s"", myName, time.Now(), extraTxData)))
                err = b.getAck()
                if err != nil {
                                logger(fmt.Sprintf(""Broadcast error on TX %d (the first error for %s after %d ACKs); %v, err: %v"", i+1, myName,  (*txSentCntrP), time.Now(), err))

 + + + + +
Note: I reran the test several times. The logs attached happen to refer to a testrun where the failure occurred at this time:

Broadcast error on TX 1 (the first error for Producer-o0-c0 after 0 ACKs); 2017-03-02 01:32:39.043012559 +0000 UTC, err: Got unexpected status: SERVICE_UNAVAILABLE
",,,,,,,,,,,,,,,,,,,,02/Mar/17 1:34 AM;scottz;fail_firstBroadcast.txt;https://jira.hyperledger.org/secure/attachment/10552/fail_firstBroadcast.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rxt:,,,,,,,,scottz,suryalnvs,weeds,,,,,,,,,,,,"04/Jun/17 7:24 PM;suryalnvs;I tried the above scenario multiple times using *OTE testname=ORD-97 TX=100000 Channels=1 Orderers=3 ordererType=kafka kafka-brokers=3 oteSpy=OFF producersPerCh=1* on commit *3b40efaee8584fd2662c59c0f7fc5a1a18c38f58*, Date: Fri Jun 2 03:00:52 2017 +0000 in vagrant and TLS enabled, but haven't seen the behavior as mentioned above, *{color:#14892c}so issue is no more reproducible.{color}*","04/Jun/17 8:59 PM;weeds;Scott - should we close this now, given new levels of code etc,.?",,,,,,,,,,,,,,,,,,,,,,
lost transactions and divergent orderers after stop and start all kafka brokers,FAB-2582,15149,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,suryalnvs,scottz,scottz,02/Mar/17 1:11 AM,05/Jun/17 2:54 AM,26/Apr/18 6:50 AM,05/Jun/17 2:54 AM,v1.0.0-alpha2,,,,,,v1.0.0,,,fabric-orderer,,,,0,qa,reproduction-requested,,,,,,,"Similar test and results as FAB-2575, with additional problems:

Even if the network halts, we do not expect to see the orderers out of sync, or lost transactions.
Sometimes we observe in final totals: LOST transactions and the orderers are not consistent

Execute ORD97 which runs orderer traffic while executing this command sequence:
docker stop kafka0 kafka1 kafka2 && sleep 20 && docker start kafka0 kafka1 kafka2",,,,,,,,,,,,,,,,,,,,02/Mar/17 1:09 AM;scottz;fail_2575_part2_stdout.txt;https://jira.hyperledger.org/secure/attachment/10551/fail_2575_part2_stdout.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rxl:,,,,,,,,scottz,suryalnvs,weeds,,,,,,,,,,,,"04/Jun/17 8:06 PM;suryalnvs;During retests using *commit 3b40efaee8584fd2662c59c0f7fc5a1a18c38f58, Date: Fri Jun 2 03:00:52 2017 +0000*, *OTE testname=ORD-97 TX=100000 Channels=1 Orderers=3 ordererType=kafka kafka-brokers=3 oteSpy=OFF producersPerCh=1,* here are the logs

Producer-o1-c0 failed to broadcast TX 18037 (ACK=18037 NACK=1), 2017-06-04 19:45:11.269346816 +0000 UTC, err: Got unexpected status: SERVICE_UNAVAILABLE
Producer-o2-c0 failed to broadcast TX 18022 (ACK=18022 NACK=1), 2017-06-04 19:45:11.273714936 +0000 UTC, err: Got unexpected status: SERVICE_UNAVAILABLE
Producer-o0-c0 failed to broadcast TX 18201 (ACK=18201 NACK=1), 2017-06-04 19:45:11.339148899 +0000 UTC, err: Got unexpected status: SERVICE_UNAVAILABLE
All the kafka brokers are restarted, 2017-06-04 19:46:06.64164905 +0000 UTC

Send Duration (seconds):  257
Recovery Duration (secs):  21
waitSecs for last batch:   21
PRODUCERS   OrdererIdx  ChannelIdx ChannelID              TX Target         ACK        NACK
                     0           0 mychannel                  33334       18201       15133
                     1           0 mychannel                  33333       18037       15296
                     2           0 mychannel                  33333       18022       15311
CONSUMERS   OrdererIdx  ChannelIdx ChannelID                    TXs     Batches
                     0           0 mychannel                  54260         543
                     1           0 mychannel                  54260         543
                     2           0 mychannel                  54260         543
Not counting genesis blks (1 per chan)        1
Total TX broadcasts Requested to Send    100000
Total TX broadcasts send success ACK      54260
Total TX broadcasts sendFailed - NACK     45740
Total Send-LOST TX (Not Ack or Nack))         0
Total Recv-LOST TX (Ack but not Recvd)        0 
Total deliveries received TX on each ordrr     [  54260   54260   54260]
Total deliveries received Blocks on each ordrr [    543     543     543]
TEST ORD-97 Every ACked TX was delivered, but failures occurred: RESULT=FAILED: TX Req=100000 BrdcstACK=54260 NACK=45740 DelivBlk=[543 543 543] DelivTX=[54260 54260 54260] numChannels=1 batchSize=100

 I haven't seen any lost transactions during multiple retests, *{color:#14892c}so issue is no more reproducible.{color}*","04/Jun/17 9:01 PM;weeds;Scott- do you think we should close this since it's not reproducible anymore?  obviously, we are on new levels of code, but want to confirm with you.",,,,,,,,,,,,,,,,,,,,,,
Leader election tests are failing in CI,FAB-2576,15143,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,gennadyl,C0rWin,C0rWin,01/Mar/17 10:50 PM,06/Mar/17 2:37 PM,26/Apr/18 6:50 AM,06/Mar/17 2:37 PM,,,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,,"After leader election integration was merged into master there are a few cases where leader election tests failed during CI:

1. https://jenkins.hyperledger.org/job/fabric-verify-x86_64/7859/consoleFull
2. https://jenkins.hyperledger.org/job/fabric-verify-x86_64/7878/consoleFull

Need to take closer look on test and validate whenever failures are false positive or indeed real issues. If first is correct need to harness the test and make sure to minimize/remove false alarms.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00rw9:,,Sprint 13 - Gossip,,,,,,C0rWin,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"""chaintool inspect"" does not work on v1.0",FAB-2568,15135,Bug,Backlog,FAB,Fabric,software,ChristopherFerris,,,Medium,,greg.haskins,greg.haskins,greg.haskins,01/Mar/17 4:13 PM,04/Jan/18 12:58 PM,26/Apr/18 6:50 AM,,v1.0.0,,,,,,v1.2,,,fabric-chaintool,,,,0,,,,,,,,,"This command relies on the now defunct REST endpoint in the peer.  This needs to be ported to v1.0 facilities, either via raw GRPC or the java-sdk.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ruh:,,,,,,,,denyeart,greg.haskins,,,,,,,,,,,,,27/Nov/17 3:11 AM;denyeart;[~greg.haskins] What do you want to do with this one?,27/Nov/17 4:10 AM;greg.haskins;Shoot for 1.2?,"27/Nov/17 5:45 AM;denyeart;OK, updated Fix Version to 1.2.",,,,,,,,,,,,,,,,,,,,,
fabric-ca-server.db is written on / in stead of /etc/hyperledger/fabric-ca-server,FAB-2559,15126,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,ibmamnt,ibmamnt,01/Mar/17 6:03 AM,19/Apr/17 1:27 AM,26/Apr/18 6:50 AM,19/Apr/17 1:27 AM,,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"Description:
 The sqlite DB (fabric-ca-server.db) is written on / in stead of FABRIC_CA_HOME=/etc/hyperledger/fabric-ca-server . 

Detail:
When I run exec on fabric-ca-server (ca here) to run ""ls /"" command, I got this.

$ docker-compose exec ca ls /
bin   dev  fabric-ca-server.db	lib    media  opt   root  sbin	sys  usr
boot  etc  home			lib64  mnt    proc  run   srv	tmp  var

This is the listing of ${FABRIC_CA_HOME} is this:
$ docker-compose exec ca ls /etc/hyperledger/fabric-ca-server
ca-cert.pem  ca-key.pem  fabric-ca-server-config.yaml

Impact:
Can not backup the DB, since it is impossible to mount ""/"" from local file system.

Expected Fix:
Store the DB to $(FABRIC_CA_HOME}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rsp:,,,,,,,,aambati,ibmamnt,,,,,,,,,,,,,"15/Mar/17 12:33 PM;aambati;I think this is a duplicate of FAB-2502. This was fixed on March 09. [~amnt] can you please try with latest code, it should be fixed",,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] http://<ip:port>/docs/gen/Client.html -- continued ,FAB-2553,15120,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,28/Feb/17 10:02 PM,05/Apr/17 6:39 PM,26/Apr/18 6:50 AM,05/Apr/17 6:39 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"In the generated documentation for class Client, a few errors appear.

(1) getChain(name)
If an application is not able to look up the chain information from storage, it may call 
==> 
If an application cannot obtain chain information from storage, it can call 

(2) getUserContext(name)

    {color:#d04437}As explained above{color}, the client instance can have an optional state store. 

It's not really explained above, although there are references to a 'state store'.   The explanation of 'state store' is scattered throughout the methods in this class.  A good place to explain the state store and why you may or may not want one might be near this sentence : 

Each Client instance can maintain several Chain instances representing channels and the associated private ledgers.

Or, each method that interacts with the state store can repeat an explanation of the state store.

(3) getUserContext(name)
Is now:
{color:#205081}As explained above, the client instance can have an optional state store. The SDK saves enrolled users in the storage which can be accessed by authorized users of the application (authentication is done by the application outside of the SDK). {color}{color:#d04437}This function attempts to load the user by name from the local storage (via the KeyValueStore interface). The loaded user object must represent an enrolled user with a valid enrollment certificate signed by a trusted CA (such as the CA server).
{color}
Should be:
{color:#d04437}This function attempts to load the user by name from the local storage (via the KeyValueStore interface). The loaded user object must represent an enrolled user with a valid enrollment certificate signed by a trusted CA (such as the CA server). {color}
{color:#205081}The client instance can have an optional state store. The SDK saves enrolled users in the storage which can be accessed by authorized users of the application (authentication is done by the application outside of the SDK). {color}

because the explanation of what the call does is obscured by the explanation of the state store.  Reversing the explanations should clarify it.

(3) getUserContext(name) 
...the client instance can have an optional state store. 
   This somewhat  contradicts the setStateStore() explanation which implies the SDK should use a state store.  In what sense is it optional?  

(3) getUserContext()
... This function attempts to load the user by name from the local storage (via the KeyValueStore interface). 
vs
Optional. If not specified, will only return the in-memory user context object,  or null if not found in memory. If ""name"" is specified, will also attempt to load it from the state store if search in memory failed.
vs
Returns:

The user object corresponding to the name, or null if  ...

The three  explanations are mildly contradictory.   If the name parameter description is to be believed, getUserContext(<no parm>) retrieves the local user context object but getUserContext(name) returns a user object. 

(4) loadUserFromStateStore()
==> loadUserFromStateStore(name)   according to the code

(5) loadUserFromStateStore()
Restore the state of this member from the key value store
As described, 'this member' would seem to be the client that calls this method, which is confusing. 

(6) queryChainInfo(name, peers)
 .... if the target Peer(s) does not know anything about the chain.
===>
...if none of the peers queried returns information about the chain.

(7) setStateStore(keyValueStore)

(a)     The enrollment materials for Users that have appeared in the instances of the application.

This is a description, but not of what setStateStore() does.  Did you mean:
    Set the optional state store.  The state store contains enrollment materials ...

(b) appeared in the instances of the application.
What exactly are 'instances of the application'?  Do you  mean Users referenced by the application?  User objects instantiated by the application?  Is it the case that the state store does not contain user materials unless the application has called saveUserToStateStore()?  If there's another way to populate the state store, it should be explained somewhere on this page. 


(8) The SDK {color:#205081}should have {color}a built-in key value store file-based implementation to allow easy setup during development. 
 ==>
The SDK{color:#205081} has {color}a built-in key value store file-based implementation to allow easy setup during development.   (If I recall correctly, even though it is built in, your application needs to call setStateStore() to enable its use.  This would be a good time to mention that.   E.G., To enable the built-in state store, ....

(9) setUserContext(user, skipPersistence)
Sets an instance of the User class as the security context of *self* client instance.
==>
Sets an instance of the User class as the security context of *this* client instance.


How to recreate:
1.Clone fabric-sdk-node
2.Gulp doc to generate doc
3.python -m SimpleHTTPServer &
4.Use a browser to navigate to <your ip>:8000/docs/gen
5.Select Client from the Classes pull down menu. 

Find the errors on the displayed page. 

","fabric-sdk-node commit d3fcbe2299c840dfd7886076b009b88eb25a7dd8
fabric commit a0d032bc5c4853b43972163f502a03ee7770c1d5
fabric-ca commit c9fb04e0f795589485915883fcbca3ae2fc0aaad

Ubuntu is running on a vlaunch VM ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rrd:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] http://<ip:port>/docs/gen/Client.html  -- HFC reference and typos,FAB-2550,15117,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,28/Feb/17 8:28 PM,05/Apr/17 6:39 PM,26/Apr/18 6:50 AM,05/Apr/17 6:39 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"In the generated documentation for class Client, a few errors appear:

(1) 
These files will override the default settings and be{color:#d04437} overriden {color}by environment, 
===> 
These files will override the default settings and be {color:#d04437}overridden{color} by environment{color:#d04437} variables{color}, 

(2) settings programmatically set into configuration settings.
==>
programmatically configured values
===>
programmatically configured settings.

(3) hierarchy search order
==>
Hierarchy search order

(4) memory - all settings added with ...
===>
Memory - all settings added with sdkUtils.setConfigSetting(name,value)
===>
Storage - all settings added with sdkUtils.setConfigSetting(name,value)

(5) Environment variables (names will be change from AAA-BBB to aaa-bbb)
==>
Environment variables (names will be {color:#d04437}changed{color} from AAA-BBB to aaa-bbb)

Even with the suggested correction, the meaning is unclear.  At first I thought it mean the SDK will convert all environment variable names to lower case.  But why would an application programmer care how the SDK internally represents the environment variable *name*? Is it saying the values will be lower - cased?    What warning is this sentence trying to convey?

(6)  all files added with the addConfigFile(path) will
==>
 all files added with the addConfigFile(path) {color:#d04437}method{color} will
==>
 all files added with addConfigFile(path) will

(7) ordered by when added, were last one
==>
ordered by when added, {color:#d04437}where{color} last one

Even with this correction, it sounds as though the last file added causes the SDK to completely disregard any earlier file added.  If that is the case, all references to 'files' in this description need to be changed to 'file', and remove the reference to 'list'  as the SDK reads at most one custom file. 

Since the description refers to a list of configuration setting files, I presume what you really mean is if the last file sets value 'a', and the prior file sets values 'a' and 'b', the net is 'a' comes from the last file and 'b' comes from the earlier file.
===>
Custom files -- all files added with addConfigFile(path).  The values set in the last file added override values set in prior configuration files. 

(8) The file located at 'config/default.json' with default settings
Do you mean
==>
The file located at  fabric-sdk-node/config/default.json  ?
===>
The file located at fabric-sdk-node/fabric-client/config/default.json ?
 Edit 3/1/2016:  Removed lines from (8) because I think I answered my own question.

(9) The path to the file to be added to the top of list of configuration files
==>
The pathname of the file to be added to the top of list of configuration files
'pathname' has meaning to Linux users.
(10)  getConfigSetting
  Items (3) - (8) apply to this method also.

(11) setConfigSetting
Is now: 
Adds a setting to override all settings that are part of the hierarchical configuration.

hierarchy search order:

    memory - settings added with this call
    Command-line arguments
    Environment variables (names will be change from AAA-BBB to aaa-bbb)
    Custom Files - all files added with the addConfigFile(path) will be ordered by when added, were last one added will override previously added files
    The file located at 'config/default.json' with default settings

Should be: 
Adds a setting to override all settings that are part of the hierarchical configuration.
(We don't need to provide the search hierarchy because this method is telling the SDK to ignore it for the specified name). 

If you really want to include the search hierarchy, comments (3) - (8) apply to this section.

(12) setLogger(logger)
Configures a logger for the entire {color:#d04437}HFC{color} SDK to use and override the default logger. Unless this method is called, {color:#d04437}HFC{color} uses a default logger (based on winston). When using the built-in ""winston"" based logger, use the environment variable {color:#d04437}HFC_LOGGING {color}to pass in configurations in the following format:

HFC SDK ==> SDK
 I thought we were moving away from 'HFC'. 
HFC  uses ==> the SDK uses?
                 ==> the fabric-client uses ? 
(13) HFC_LOGGING  Should this envvar be renamed ?

(14) setLogger(logger)
Is now:
{ 'error': 'error.log', // 'error' logs are printed to file 'error.log' relative of the current working dir for node.js 'debug': '/tmp/myapp/debug.log', // 'debug' and anything more critical ('info', 'warn', 'error') can also be an absolute path 'info': 'console' // 'console' is a keyword for logging to console }
Should be:
{ 'error': 'error.log', // 'error' logs are printed to file 'error.log' relative of the current working dir for node.js 
'debug': '/tmp/myapp/debug.log', // 'debug' and anything more critical ('info', 'warn', 'error') can also be an absolute path 
'info': 'console' // 'console' is a keyword for logging to console }



","fabric-sdk-node commit d3fcbe2299c840dfd7886076b009b88eb25a7dd8
fabric commit a0d032bc5c4853b43972163f502a03ee7770c1d5
fabric-ca commit c9fb04e0f795589485915883fcbca3ae2fc0aaad

Ubuntu is running on a vlaunch VM ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rqp:,,,,,,,,jjjjibm,,,,,,,,,,,,,,01/Mar/17 8:45 PM;jjjjibm;I will edit (8) to include information about fabric-sdk-node/fabric-client/config/default.json,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] http://<ip:port>/docs/gen  documented but not implemented,FAB-2548,15115,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,28/Feb/17 7:15 PM,05/Apr/17 6:39 PM,26/Apr/18 6:50 AM,05/Apr/17 6:39 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,,,,,,,,,"In my review of generated documentation I see  a couple functions which are documented, but not implemented.  Here is an example from class Chain.

updateChain()

    Calls the orderer(s) to update an existing chain. This allows the addition and deletion of Peer nodes to an existing chain, as well as the update of Peer certificate information upon certificate renewals.

    Returns:

    Whether the chain update process was successful.

    Type
        boolean 

I was surprised to see no input parameters, so I looked at the code.

**
	 * Calls the orderer(s) to update an existing chain. This allows the addition and
	 * deletion of Peer nodes to an existing chain, as well as the update of Peer
	 * certificate information upon certificate renewals.
	 * @returns {boolean} Whether the chain update process was successful.
	 */
	updateChain() {
		//to do
	}

As you can see, it is not actually implemented. 

Here is an example of an unimplemented function which could actually be harmful:

isReadonly() {
		return false;//to do
	}

A user might trust the result of this function call, not realizing it has not actually been implemented.  

Possible solutions for 'to do' functions:
 - implement all 'todo' methods before code cut-off
 - throw new Error(""this function is not fully implemented yet"") until method is implemented. 
 -  log.error('Method x is not yet implemented');  until method is implemented


","fabric-sdk-node commit d3fcbe2299c840dfd7886076b009b88eb25a7dd8
fabric commit a0d032bc5c4853b43972163f502a03ee7770c1d5
fabric-ca commit c9fb04e0f795589485915883fcbca3ae2fc0aaad

Ubuntu is running on a vlaunch VM ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rq9:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"[node-sdk] <ip:port>/docs/gen/User.html  identities .. has --> identities .. have, and why call it toString()?",FAB-2543,15110,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,28/Feb/17 6:32 PM,05/Apr/17 6:39 PM,26/Apr/18 6:50 AM,05/Apr/17 6:39 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"Generated documentation for class User has these minor grammar errors.

(1) 
Is now:
User identitie{color:#205081}s{color} represent signing capability because {color:#205081}it has {color}access

Should be:
User identities represent signing capability because {color:#205081}they have {color}access ..

Could be: 
The user identity represents signing capability because it has access ...

(2) 
Is now:
Peer identitie{color:#205081}s{color} in the context of the application/SDK only {color:#205081}has{color} the ...

Should be:
Peer{color:#205081} identities {color}in the context of the application/SDK only {color:#205081}have{color}  the ...

Could be:
The peer identity in the context of the application/SDK only has the ...

If you pick the 'Could be' or similar solution for (1) you should select the 'Could be' solution or similar for (2) for consistent style.  For the same reason, match the 'should be' solution for (1) with a 'should be' solution for (2). 

(3) Some method descriptions end with '.', and others do not 
(See what I did that?) 
Example: 
getAffiliation()

    Get the affiliation{color:#d04437}.
{color}
The description ends with a period '.'

Example:
fromString()

    Set the current state of this member from a string based JSON object

The description does not with a period.

I count 9 descriptions  punctuated standardly,  5 dangling
(See what I did with that?)

Solution:  pick one style and use it consistently. 

(4)  toString() is defined or named in an unconventional way 

These classes in the node SDK have the method toString(): Chain, FabricCAServices, Peer, Remote.

Tt is always defined like this:

_toString()

    return a printable representation of this object
_

Class User also has a method toString(), defined like this:

toString()

    Save the current state of this member as a string


If this method does something that is not identical to what the other class toString() methods do, overloading the name will cause confusion.  The method should be renamed. 

If this method does the same thing the other class toString() methods do, this description or the other descriptions need to change.  ","fabric-sdk-node commit d3fcbe2299c840dfd7886076b009b88eb25a7dd8
fabric commit a0d032bc5c4853b43972163f502a03ee7770c1d5
fabric-ca commit c9fb04e0f795589485915883fcbca3ae2fc0aaad

Ubuntu is running on a vlaunch VM ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rp5:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] http://<ip:port>/docs/gen/Remote.html,FAB-2541,15108,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,28/Feb/17 4:40 PM,05/Apr/17 6:39 PM,26/Apr/18 6:50 AM,05/Apr/17 6:39 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"In the generated documentation, in the class Remote:

(1) typo
Is now:
The Remote class represents {color:#205081}a the {color}base class for all remote {color:#d04437}nodes,{color} Peer, {color:#d04437}Orderer , {color}and MemberServicespeer.

Should be: 
The Remote class represents {color:#d04437}the {color}base class for all remote {color:#d04437}nodes:{color} Peer, {color:#d04437}Orderer{color}, and MemberServicespeer.

(2) ambiguity in this description:

opts
Object that may contain options to override the global settings {color:#205081}pem{color} The certificate file, in PEM format, to use with the gRPC protocol (that is, with TransportCredentials).  Required when using the grpcs protocol.

(2a) It's not clear opts is an optional parameter.  The code remote.js is treating it as an optional parameter.
(2b) It's not clear if 'The certificate file ... TransportCredentials).' is an example of an opts object or a new definition of an opts object.  
(2c) the PEM option is described, but the code seems to recognize 'ssl-target-name-override', 'default-authority'.   Shouldn't these be described also? ","abric-sdk-node commit d3fcbe2299c840dfd7886076b009b88eb25a7dd8
fabric commit a0d032bc5c4853b43972163f502a03ee7770c1d5
fabric-ca commit c9fb04e0f795589485915883fcbca3ae2fc0aaad

Ubuntu is running on a vlaunch VM ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rop:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
During installation of chaincode on a peer in E2E test failed with panic,FAB-2539,15106,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,Nishi,Nishi,28/Feb/17 4:27 PM,12/Apr/17 2:09 AM,26/Apr/18 6:50 AM,12/Apr/17 2:09 AM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"Scenario:

Network:
1 orderer
4 peers (peer0, peer1, peer2, peer3)

Bring network with orderer, peer0, peer2, peer3 cli

Test Execution:

1. Create 100 channels.
2. Join all peer0, peer2, peer3 on all channels
3. Install Chaincode on peer0 and peer2
4. Instantiate chaincode from peer2 on all channels
5. Query initial values from peer0 on all channels
6. Invoke on chaincode from peer0 on all channels

7. Install on peer3 
8. Query from peer3 on all channels

Test step 7 failed with following messages from docker logs -f cli


{noformat}
===================== Invoke transaction on PEER0 on ORG0 is successful ===================== 
2017-02-28 15:14:33.918 UTC [logging] InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'chaincode'
2017-02-28 15:14:33.922 UTC [msp] GetLocalMSP -> DEBU 002 Returning existing local MSP
2017-02-28 15:14:33.922 UTC [msp] GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity
2017-02-28 15:14:33.925 UTC [golang/hash] collectChaincodeFiles -> DEBU 004 not using input for hash computation for path:""github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02"" name:""mycc"" version:""1.0""  
2017-02-28 15:14:33.925 UTC [golang/hash] getCodeFromFS -> DEBU 005 getCodeFromFS github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02
2017-02-28 15:14:33.926 UTC [util] HashFilesInDir -> DEBU 006 hashFiles /opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02
2017-02-28 15:14:33.928 UTC [container] WriteGopathSrc -> INFO 007 rootDirectory = /opt/gopath/src
2017-02-28 15:14:33.928 UTC [container] WriteFolderToTarPackage -> INFO 008 rootDirectory = /opt/gopath/src
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x30 pc=0x82810d]

goroutine 1 [running]:
panic(0xc09ac0, 0xc420014080)
	/opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/core/container/util.WriteFolderToTarPackage.func1(0xc4202d58b0, 0x43, 0x0, 0x0, 0x12c2180, 0xc4205f0930, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/container/util/writer.go:65 +0xad
path/filepath.walk(0xc4202259c0, 0x32, 0x12ce9a0, 0xc42041f520, 0xc4202254c0, 0x0, 0x0)
	/opt/go/src/path/filepath/path.go:372 +0x22e
path/filepath.walk(0xc4205f0000, 0x2d, 0x12ce9a0, 0xc42032a340, 0xc4202254c0, 0x0, 0x0)
	/opt/go/src/path/filepath/path.go:376 +0x344
path/filepath.walk(0xc4202c9ef0, 0x26, 0x12ce9a0, 0xc42032a270, 0xc4202254c0, 0x0, 0x0)
	/opt/go/src/path/filepath/path.go:376 +0x344
path/filepath.walk(0xc4203104c0, 0x1a, 0x12ce9a0, 0xc42032a1a0, 0xc4202254c0, 0x0, 0x0)
	/opt/go/src/path/filepath/path.go:376 +0x344
path/filepath.walk(0xc4202fccd0, 0xf, 0x12ce9a0, 0xc42032a0d0, 0xc4202254c0, 0x0, 0xc4202d4501)
	/opt/go/src/path/filepath/path.go:376 +0x344
path/filepath.Walk(0xc4202fccd0, 0xf, 0xc4202254c0, 0xcdfb28, 0x1)
	/opt/go/src/path/filepath/path.go:398 +0xd5
github.com/hyperledger/fabric/core/container/util.WriteFolderToTarPackage(0xc4202ca900, 0xc4202fccd0, 0xf, 0xc4202d4550, 0x48, 0xc420153740, 0x0, 0xc4202fc860, 0xc420151908)
	/opt/gopath/src/github.com/hyperledger/fabric/core/container/util/writer.go:104 +0x1d1
github.com/hyperledger/fabric/core/container/util.WriteGopathSrc(0xc4202ca900, 0x7ffc10150cee, 0x47, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/container/util/writer.go:120 +0x1e1
github.com/hyperledger/fabric/core/chaincode/platforms/golang.writeChaincodePackage(0xc420310060, 0xc4202ca900, 0xc420225480, 0x40)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/package.go:36 +0xee
github.com/hyperledger/fabric/core/chaincode/platforms/golang.(*Platform).GetDeploymentPayload(0x130c198, 0xc420310060, 0x130c198, 0x0, 0x0, 0x4a5831, 0x130c198)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:173 +0x12c
github.com/hyperledger/fabric/core/chaincode/platforms.GetDeploymentPayload(0xc420310060, 0x0, 0xc4201d18f8, 0x3, 0xcdffc0, 0x3)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/platforms/platforms.go:74 +0x5d
github.com/hyperledger/fabric/core/container.GetChaincodePackageBytes(0xc420310060, 0x0, 0x0, 0x0, 0x0, 0x110150cdf)
	/opt/gopath/src/github.com/hyperledger/fabric/core/container/vm.go:100 +0xaa
github.com/hyperledger/fabric/peer/chaincode.getChaincodeBytes(0xc420310060, 0xc420310001, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/common.go:63 +0x168
github.com/hyperledger/fabric/peer/chaincode.chaincodeInstall(0xc4201fa6c0, 0xc4202c6060, 0x0, 0x6, 0xc4202c9a40, 0x9, 0x9)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/install.go:105 +0x2b1
github.com/hyperledger/fabric/peer/chaincode.installCmd.func1(0xc4201fa6c0, 0xc4202c6060, 0x0, 0x6, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/install.go:44 +0x52
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0xc4201fa6c0, 0xc4201ffe60, 0x6, 0x6, 0xc4201fa6c0, 0xc4201ffe60)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:599 +0x234
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x12b6ce0, 0xf, 0xc420010035, 0x7)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 +0x367
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x12b6ce0, 0x5b, 0xc420010035)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 +0x2b
main.main()
	/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:111 +0x52d
!!!!!!!!!!!!!!! Chaincode installation on remote peer PEER3 is Failed !!!!!!!!!!!!!!!!
========== ERROR !!! Please check peer logs to verify the issue ===========
===================== FAILED to execute E2E Scenario ===================
{noformat}
==

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ro9:,,,,,,,,denyeart,Nishi,,,,,,,,,,,,,12/Apr/17 2:08 AM;denyeart;Similar scenarios have succeeded on alpha release.  Please re-open if there is still an issue.,,,,,,,,,,,,,,,,,,,,,,,
instantiate is not properly qualifying image lookups with .version field,FAB-2533,15100,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,greg.haskins,greg.haskins,greg.haskins,28/Feb/17 2:56 PM,28/Feb/17 9:08 PM,26/Apr/18 6:50 AM,28/Feb/17 9:08 PM,,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"The instantiate() validation logic includes a check to see if the image being referred to is present.  However, it doesn't seem to include the version qualifier, leading to the likelihood of a false positive.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rmx:,,,,,,,,greg.haskins,muralisr,,,,,,,,,,,,,"28/Feb/17 8:54 PM;muralisr;[~greg.haskins] The check during instantiate is an existence check. As only one version of a chaincode can be installed on the channel, it merely checks if the named chaincode exists on the channel - and issues an error if it does.  I think its working correctly... do let me know if i'm missing anything.",28/Feb/17 9:08 PM;greg.haskins;Ah!  I read that wrong [~muralisr].  Very sorry.  Will close,,,,,,,,,,,,,,,,,,,,,,
Gossip Conn store - thread safety bug,FAB-2529,15096,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,28/Feb/17 1:16 PM,01/Mar/17 3:08 PM,26/Apr/18 6:50 AM,01/Mar/17 3:08 PM,,,,,,,,,,,,,,0,,,,,,,,,"When the gossip comm layer is shutdown, the connection store
is also shutdown as a result.
While a connection is deleted/added, and the conn store is shutdown
at the same time- a concurrent map read-write occures.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00rm9:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Unit test fails behind proxy,FAB-2523,15090,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,ynamiki,ynamiki,28/Feb/17 2:48 AM,09/Apr/17 8:27 PM,26/Apr/18 6:50 AM,09/Apr/17 8:27 PM,,,,,,,,,,fabric-baseimage,,,,0,,,,,,,,,"`make` fails at unit test with the following error.

Docker might not see the proxy configuration.

Fabric revision: 7134f9f270317958fc5718762882930c3a2d4a38

{noformat}
$ http_proxy=""<proxy>"" https_proxy=""<proxy>"" make
...
unit-tests_1  | 2017/02/28 02:22:12 setting Number of procs to -1, was 2
unit-tests_1  | 2017/02/28 02:22:12 KeyStore path [msp/sampleconfig/keystore] missing [true]: [<clean>]
unit-tests_1  | 2017/02/28 02:22:12 Creating KeyStore at [msp/sampleconfig/keystore]...
unit-tests_1  | 2017/02/28 02:22:12 KeyStore created at [msp/sampleconfig/keystore].
unit-tests_1  | 2017/02/28 02:22:12 KeyStore opened at [msp/sampleconfig/keystore]...done
unit-tests_1  | 2017/02/28 02:22:12 Initialize BCCSP [SW]
unit-tests_1  | 2017/02/28 02:22:12
unit-tests_1  | FROM hyperledger/fabric-baseos:x86_64-0.3.0
unit-tests_1  | ADD binpackage.tar /usr/local/bin
unit-tests_1  | LABEL org.hyperledger.fabric.chaincode.id.name=""cartest"" \
unit-tests_1  |       org.hyperledger.fabric.chaincode.id.version="""" \
unit-tests_1  |       org.hyperledger.fabric.chaincode.type=""CAR"" \
unit-tests_1  |       org.hyperledger.fabric.version=""0.7.0-snapshot-7134f9f"" \
unit-tests_1  |       org.hyperledger.fabric.base.version=""0.3.0""
unit-tests_1  | 2017/02/28 02:22:35 Failed to generate platform-specific docker build: Error building CAR: Error returned from build: 255 ""Building CAR /chaincode/input/codepackage.car
unit-tests_1  | [CCI] parse org.hyperledger.chaincode.example02
unit-tests_1  | [CCI] parse appinit
unit-tests_1  | [PB] protoc --go_out=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaincode/example02 --proto_path=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaincode/example02 /tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaincode/example02/interface.proto
unit-tests_1  | [PB] protoc --go_out=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/appinit --proto_path=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/appinit /tmp/buildcar-1488248538670-1650840794/bu
ild/src/hyperledger/cci/appinit/interface.proto
unit-tests_1  | [PB] protoc --go_out=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaintool/meta --proto_path=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaintool/meta /tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaintool/meta/interface.proto
unit-tests_1  | [GO] go get -d -v chaincode
unit-tests_1  |  Using GOPATH /tmp/buildcar-1488248538670-1650840794/build/deps:/tmp/buildcar-1488248538670-1650840794/build:/tmp/buildcar-1488248538670-1650840794:/opt/gopath
unit-tests_1  | Error: github.com/golang/protobuf (download)
unit-tests_1  | # cd .; git clone https://github.com/golang/protobuf /tmp/buildcar-1488248538670-1650840794/build/deps/src/github.com/golang/protobuf
unit-tests_1  | Cloning into '/tmp/buildcar-1488248538670-1650840794/build/deps/src/github.com/golang/protobuf'...
unit-tests_1  | fatal: unable to access 'https://github.com/golang/protobuf/': Failed to connect to github.com port 443: No route to host
unit-tests_1  | package github.com/golang/protobuf/proto: exit status 128
unit-tests_1  |
unit-tests_1  | ""
unit-tests_1  | --- FAIL: TestCar_BuildImage (22.53s)
unit-tests_1  |  platform_test.go:51: Error building docker: Failed to generate platform-specific docker build: Error building CAR: Error returned from build: 255 ""Building CAR /chaincode/input/codepackage.car
unit-tests_1  |          [CCI] parse org.hyperledger.chaincode.example02
unit-tests_1  |          [CCI] parse appinit
unit-tests_1  |          [PB] protoc --go_out=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaincode/example02 --proto_path=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaincode/example02 /tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaincode/example02/interface.proto
unit-tests_1  |
unit-tests_1  |          [PB] protoc --go_out=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/appinit --proto_path=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/appinit /tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/appinit/interface.proto
unit-tests_1  |
unit-tests_1  |          [PB] protoc --go_out=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaintool/meta --proto_path=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaintool/meta /tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaintool/meta/interface.proto
unit-tests_1  |
unit-tests_1  |          [GO] go get -d -v chaincode
unit-tests_1  |                  Using GOPATH /tmp/buildcar-1488248538670-1650840794/build/deps:/tmp/buildcar-1488248538670-1650840794/build:/tmp/buildcar-1488248538670-1650840794:/opt/gopath
unit-tests_1  |          Error: github.com/golang/protobuf (download)
unit-tests_1  |          # cd .; git clone https://github.com/golang/protobuf /tmp/buildcar-1488248538670-1650840794/build/deps/src/github.com/golang/protobuf
unit-tests_1  |          Cloning into '/tmp/buildcar-1488248538670-1650840794/build/deps/src/github.com/golang/protobuf'...
unit-tests_1  |          fatal: unable to access 'https://github.com/golang/protobuf/': Failed to connect to github.com port 443: No route to host
unit-tests_1  |          package github.com/golang/protobuf/proto: exit status 128
unit-tests_1  |
unit-tests_1  |          "" (output = )
unit-tests_1  | FAIL
unit-tests_1  | coverage: 0.0% of statements
unit-tests_1  | FAIL     github.com/hyperledger/fabric/core/chaincode/platforms/car/test 22.551s
unit-tests_1  | error: exit status 1
{noformat}

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rkx:,,,,,,,,binhn,ynamiki,,,,,,,,,,,,,09/Apr/17 8:26 PM;binhn;The build process requires network access. Please find a suitable environment.,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] http://<ip:port>/docs/gen/chain.html -- getPrimaryPeer(),FAB-2522,15089,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,28/Feb/17 12:38 AM,05/Apr/17 6:39 PM,26/Apr/18 6:50 AM,05/Apr/17 6:39 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"In the generated documentation for class chain, some minor errors appear in the description for getPrimaryPeer()

How to recreate:
1.Clone fabric-sdk-node
2.Gulp doc to generate doc
3.python -m SimpleHTTPServer &
4.Use a browser to navigate to <your ip>:8000
5.Navigate to docs/gen/
6.Select Chain from the Classes pull down menu. 

Find these errors on the displayed page:


getPrimaryPeer()

    Get the primary peer The peer to use for doing queries. Default: When no primary peer has been set the first peer on the list will be used.
(a) 
 peer The 
===>
 peer: the 
===>
 peer, the 
==>
 peer.  The primary peer is the peer 

(b)
set the 
==>
set, the 

(c) 
on the list 
===>
on the chain's list of peers","fabric-sdk-node : commit bc36ef5e6a70bf31adb852951f1b5a217f24a099
fabric commit 29d7fc035df697a68d271d628e693c556354486f
fabric-ca commit c3d00c32499232c484df57b68b6f2314f784179e

Ubuntu is running on a vlaunch VM ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rkp:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] http://<ip:port>/docs/gen/Chain.html -- undocumented inputs and outputs,FAB-2521,15088,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,28/Feb/17 12:31 AM,05/Apr/17 6:38 PM,26/Apr/18 6:50 AM,05/Apr/17 6:38 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"In the generated documenation for class Chain, some of the methods do not document their parameters and results.

getOrderers()

    Get orderers of a chain.

getTCertBatchSize()

    Get the tcert batch size.

isDevMode()

    Determine if dev mode is enabled.

isPreFetchMode()

    Determine if pre-fetch mode is enabled to prefetch tcerts.

isSecurityEnabled()

    Determine if security is enabled.

setPreFetchMode()

    Set prefetch mode to true or false.

setTCertBatchSize()

    Set the tcert batch size.

Here are some examples of methods that document their inputs and outputs:
isReadonly()

    Get chain status to see if the underlying channel has been terminated, making it a read-only chain, where information (transactions and states) can be queried but no new transactions can be submitted.

    Returns:

    Is read-only, true or not.

    Type
        boolean 

getInitialAbsoluteMaxBytes()

    Get the initial absolute maximum bytes that will be used when this chain is created.

    Returns:

    initial absolute maximum bytes

    Type
        int 

getPeers()

    Get peers of a chain from local information.

    Returns:

    The peer list on the chain.

    Type
        Array.<Peer> 


For consistency and usability, all methods should describe their inputs and outputs.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rkh:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] http://<ip:port/docs/gen/Chain.html buildTransactionID -- an unique --> a unique AND created --> initialized,FAB-2520,15087,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,28/Feb/17 12:13 AM,05/Apr/17 6:38 PM,26/Apr/18 6:50 AM,05/Apr/17 6:38 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,,,,,,,,,"The generated documentation for class Chain  has a couple recurring errors: 
How to recreate:
1.Clone fabric-sdk-node
2.Gulp doc to generate doc
3.python -m SimpleHTTPServer & (the & is optional but leaves your terminal usable)
4.Use a browser to navigate to <your ip>:8000/docs/gen/Chain.html

Find these errors on the displayed page: 

(1) 
an unique --> a unique   (pronounced with a consonant sound even though it starts with a vowel letter) 
Occurs here : buildTransactionID(nonce, userContext)
an unique --> a unique 
An unique string --> A unique string  
and here:  getUserContext(nonce)
{color}an unique --> a unique 

(2) 
chain is created --> chain is initialzed with a call to initializeChain()
If you say 'created', it is confusing because you have to create the chain (new chain) before you can call this function, AND you can change this value with set* as many times as you like before chain.initializeChain() is called. 
occurs: 
    getConsensusType()
    getInitialAbsoluteMaxBytes()
    getInitialEpoch()
    getInitialMaxMessageCount()
    getInitialPreferredMaxBytes()
    getInitialTransactionId()
    setInitialAbsoluteMaxBytes(initial)
    setInitialEpoch(initial)
    setInitialMaxMessageCount(initial)
    setInitialPreferredMaxBytes(initial)
    setInitialTransactionId(initial)","fabric-sdk-node : commit bc36ef5e6a70bf31adb852951f1b5a217f24a099
fabric commit 29d7fc035df697a68d271d628e693c556354486f
fabric-ca commit c3d00c32499232c484df57b68b6f2314f784179e

Ubuntu is running on a vlaunch VM ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rk9:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[node-sdk] http://<ip:port>/docs/gen/module-fabric-client.html -- typos and dead links,FAB-2519,15086,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,27/Feb/17 11:20 PM,05/Apr/17 6:38 PM,26/Apr/18 6:50 AM,05/Apr/17 6:38 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,,,,,,,,,"In the generated documentation for fabric-sdk-node, from the Modules pull down menu, select:

1) api.  
     a) The APIs are defined according to the Hyperledger Fabric's common SDK specification
==> 
The APIs are defined according to the Hyperledger Fabric's common SDK specification.
    b) The linked document is out of date. 
2) fabric-ca-client 
    a) You can probably lose the quotes around fabric-ca-client and fabric-ca
    b) user certificates lifecycle
        ===>
        user certificate lifecycles?
        ==>
        a user certificate's lifecycle?
        ===>
       user certificates' lifecycles?
    c) authenticate with the fabric
        ==>
       authenticate with the fabric.

3) fabric-client
    a) No need to quote fabric-client.
    b) including Chain   ===> including Chain.
    c) chain is a link to 

_Error response

Error code 404.

Message: File not found.

Error code explanation: 404 = Nothing matches the given URI. 
 
    Either link to something live, or don't make it a link. 
_","fabric-sdk-node : commit bc36ef5e6a70bf31adb852951f1b5a217f24a099
fabric commit 29d7fc035df697a68d271d628e693c556354486f
fabric-ca commit c3d00c32499232c484df57b68b6f2314f784179e

Ubuntu is running on a vlaunch VM ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rk1:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[node-sdk] https://github.com/hyperledger/fabric-sdk-node -- Pluggability,FAB-2518,15085,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,27/Feb/17 10:53 PM,05/Apr/17 6:38 PM,26/Apr/18 6:50 AM,05/Apr/17 6:38 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"In the readme at https://github.com/hyperledger/fabric-sdk-node in the section{color:#205081} Pluggability{color},  

.. For each abstract class, a built-in implementation is included with the ability to load alternative implementations via designated environment variables: (a numbered list follows)

Items 1 and 2 in the list correlate an abstract class to an environment variable, as we would expect from the sentence prefacing the list. 

a)  Item 3 does not mention an abstract class, or an environment variable.  Is something missing here about  how to plug in an alternate member service?  Or does this item belong outside the list?

b) The list is numbered, not bulleted.  For items that do not need to be in any particular order,  use a bulleted list.  

c) To replace FileKeyValueStore with a different implementation 
Should FileKeyValueStore be KeyStoreValue? 
Should it be 'replace FileKeyValueStore.js with a diffferent  keyValueStore implementation'? 

d) In the Modules pull down menu on this page, select api.  The description reads: 

This module defines the API for the{color:#205081} pluggable {color}components of the node.js SDK.

Seeing the word pluggable, a reader will want to correlate this with the Pluggability section.  These classes are listed in the menu:  CryptoSuite, Key, and KeyStoreValue. 
 CryptoSuite and KeyStoreValue are mentioned in the numbered list in this Pluggability section.   Should Key be mentioned as well?  Or have pluggable components nothing to do with Pluggability as described in this section?  Or does the description for 'api' need to change ?


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rjt:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[node-sdk] https://github.com/hyperledger/fabric-sdk-node -- HFC objects and reference documentation,FAB-2516,15083,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,27/Feb/17 10:36 PM,20/Mar/17 8:06 PM,26/Apr/18 6:50 AM,09/Mar/17 6:24 PM,,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"In the readme at  https://github.com/hyperledger/fabric-sdk-node, in this section:

{color:#205081}HFC objects and reference documentation{color}

1) For a high-level design specificiation for Fabric SDKs of all languages, visit this google doc (Work-In-Progress).

The linked document is out of date.  Can we point to a more recent one?

2) HFC is written in CommonJS modules and is object-oriented. It's comprised of the following modules. (a bulleted list follows).

This is a little confusing because there's a Modules pull down  menu above this section which lists api, fabric-ca-client, and fabric-client.  This has no bearing on the bulleted list that follows, which includes a nodejs part, a couple classes, and an interface (that may or may 

2) The MemberServices interface provides ...
There's no identifiable  MemberServices interface in the pull down menus on this page. 
3) The Member class represents ...
There's no member class in the classes pull down on this page. 

4) The classes included this list seem a little arbitrary.  For example, Client, Peer, and User are omitted from this list.   What is this paragraph trying to accomplish? ","fabric-sdk-node : commit bc36ef5e6a70bf31adb852951f1b5a217f24a099
fabric commit 29d7fc035df697a68d271d628e693c556354486f
fabric-ca commit c3d00c32499232c484df57b68b6f2314f784179e

Ubuntu is running on a vlaunch VM 
",,,,,,,,,,,,,,,,FAB-2837,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pfs:x,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[node-sdk] https://github.com/hyperledger/fabric-sdk-node -- unit and integration tests,FAB-2515,15082,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,27/Feb/17 10:01 PM,09/Mar/17 6:24 PM,26/Apr/18 6:50 AM,09/Mar/17 6:24 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"In the readme at [node-sdk] https://github.com/hyperledger/fabric-sdk-node, in the section 
{color:#205081}Contributor Check-list{color}, it says 

Your new code should be accompanied with unit tests and pass 80% lines coverage or above.

1) Now that we have re-organized the test bucket into unit and integration tests, we should suggest an integration test also.  

2) ... and pass 80% lines coverage or above.
Something odd about this sentence.  Pass 80%, or not?  What above?  



",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pfs:v,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[node-sdk] https://github.com/hyperledger/fabric-sdk-node -- cop --> ca,FAB-2513,15080,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,27/Feb/17 9:40 PM,09/Mar/17 6:24 PM,26/Apr/18 6:50 AM,09/Mar/17 6:23 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"In the readme at [node-sdk] https://github.com/hyperledger/fabric-sdk-node, the section

{color:#59afe1}Set Up CouchDB Database for couchdb-fabriccop-tests.js
{color}

refers to couchdb-fabriccop-tests.js, which does not exist.  However, we do have the
test case couchdb-fabricca-tests.js and the test case cloudant-fabricca-tests.js.   The title should perhaps be more generic:

Could be
Set up coucbDB Database for cloudant and coucbdb tests.

node test/{color:#59afe1}unit{color}/couchdb-fabric{color:#59afe1}cop{color}-test.js
==>
node test/{color:#59afe1}integration{color}/couchdb-fabric{color:#59afe1}ca{color}-test.js

Should we mention cloudant-fabricca-tests.js here also?  It has a prerequisite, but is not mentioned in this readme. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pfs:r,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[node-sdk] https://github.com/hyperledger/fabric-sdk-node -- .hfc-key-store and missing tests,FAB-2512,15079,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,27/Feb/17 9:34 PM,08/Mar/17 5:18 AM,26/Apr/18 6:50 AM,08/Mar/17 5:18 AM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"In the readme at https://github.com/hyperledger/fabric-sdk-node, in the section{color:#d04437} Back in your native host (MacOS, or Windows, or Ubuntu, etc), run the following tests:
{color}
1) Deleting artifacts of previous runs seems to be described here: 

_Clear out your previous key value store if needed for fabric-sdk-node (rm -fr /tmp/hfc-*) and for fabric-ca (rm <...>/fabric-ca/testdata/fabric-ca.db)

I have been clearing out ~/.hfc-key-store.  We should mention that also if it is still required.

2) This paragraph references ca-tests.js: 
_Test user management by member services with the {color:#d04437}test/unit/ca-tests.js{color}. This test exercises the KeyValueStore implementations for a file-based KeyValueStore as well as a CouchDB KeyValueStore. To successfully run this test, you must first set up a CouchDB database instance on your local machine. Please see the instructions below._

The test {color:#d04437}unit/ca-test.js {color}was deleted here: https://gerrit.hyperledger.org/r/#/c/6511/  so this paragraph needs work.   If you meant to describe a test that requires couchdb:
see instructions below ===> see section{color:#d04437} Set Up CouchDB Database for couchdb-fabriccop-tests.js
{color}3) Test happy path from end to end, run node test/unit/end-to-end.js
test/unit  --> test/integration
We should probably avoid the phrase 'happy path' or even 'green path'.  Perhaps
Test end-to-end fuctionality:  node test/integration/end-to-end.js
4) Test transaction proposals, run node test/unit/endorser-tests.js
===>
Test transaction proposals{color:#d04437}: {color}run node test/i{color:#d04437}ntegration{color}/endorser-tests.js
5) Test sending endorsed transactions for consensus, run node test/unit/orderer-tests.js\===>
Test sending endorsed transactions for consensus{color:#d04437}:{color}  run node test/{color:#d04437}integration{color}/orderer-tests.js

6) We should probably mention that you can install softhsm to run test/unit/pkcs11.js

7) There are many tests in test/integration that are not listed here.  Do we want to describe every test in test/integration and why a user would or not not run the test? 




_

","fabric-sdk-node : commit bc36ef5e6a70bf31adb852951f1b5a217f24a099
fabric commit 29d7fc035df697a68d271d628e693c556354486f
fabric-ca commit c3d00c32499232c484df57b68b6f2314f784179e

Ubuntu is running on a vlaunch VM ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rih:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[node-sdk] https://github.com/hyperledger/fabric-sdk-node -- place start command closer to 'launch the following command' ,FAB-2510,15077,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,27/Feb/17 8:32 PM,08/Mar/17 5:18 AM,26/Apr/18 6:50 AM,08/Mar/17 5:18 AM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"For ease of reading, 

Is now:
* from the fabric-ca folder, launch the following command to start the fabric-ca server. The ec.pem and ec-key.pem {color:#d04437}certificates sets {color}up the fabric-ca server as the trusted root that the Peer nodes have been statically configured as a temporary measure. In other words, the Peers will be able to trust any user certificates that have been signed by the fabric-ca server. This is important because the endorser code inside the Peer will need to validate the user certificate issued by fabric-ca before using it to verify the signature of the transaction proposal.
* bin/fabric-ca server start -ca testdata/ec.pem -ca-key testdata/ec-key.pem -config testdata/testconfig.json

Should be:
from the fabric-ca folder, launch the following command to start the fabric-ca server.
* bin/fabric-ca server start -ca testdata/ec.pem -ca-key testdata/ec-key.pem -config testdata/testconfig.json

The ec.pem and ec-key.pem  {color:#d04437}certificates set{color} up the fabric-ca server as the trusted root that the Peer nodes have been statically configured as a temporary measure. In other words, the Peers will be able to trust any user certificates that have been signed by the fabric-ca server. This is important because the endorser code inside the Peer will need to validate the user certificate issued by fabric-ca before using it to verify the signature of the transaction proposal.
*  
Another thing:
that the Peer nodes have been statically configured as a temporary measure.

Something seems missing in that phrase?  configured {color:#654982}to use {color}as a temporary measure?","fabric-sdk-node : commit bc36ef5e6a70bf31adb852951f1b5a217f24a099
fabric commit 29d7fc035df697a68d271d628e693c556354486f
fabric-ca commit c3d00c32499232c484df57b68b6f2314f784179e

Ubuntu is running on a vlaunch VM ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ri1:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] https://github.com/hyperledger/fabric-sdk-node -- If you are using a Mac ....,FAB-2509,15076,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,27/Feb/17 8:25 PM,08/Mar/17 5:18 AM,26/Apr/18 6:50 AM,08/Mar/17 5:18 AM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,,,,,,,,,"The structure of the readme following this point is not as clear as it could be.  Everything following this paragraph is in a bulleted list subordinate to this paragraph, implying every bulleted item is something to do if you have a Mac and you want to build natively. 

{color:#707070}If you are using a Mac and would like to build the docker images and run them natively instead of using vagrant, do the following:{color}

Yet the list contains bullets such as : 
* To use vagrant, do the following:
* run vagrant up to launch the vagrant VM
* Once inside vagrant, follow these steps to start the fabric-ca server and the Peers network with orderer
* Back in your native host (MacOS, or Windows, or Ubuntu, etc), run the following tests:

It's really not clear which steps pertain only to Mac environments, and which steps are common to all environments.  I

As a suggestion, maybe we need to split this into two pars.
Vagrant Users
Mac Users who want to run without the Vagrant environment. 

For clarity, we may have to duplicate some information in both sections, or have a third 
section:
All users (vagrant and otherwise) 

1) Unclear as noted
2( Isn't Mac a trademark that needs to be flagged as such?  Same comment for Docker for Mac, Brew, etc.



* ","fabric-sdk-node : commit bc36ef5e6a70bf31adb852951f1b5a217f24a099
fabric commit 29d7fc035df697a68d271d628e693c556354486f
fabric-ca commit c3d00c32499232c484df57b68b6f2314f784179e

Ubuntu is running on a vlaunch VM ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rht:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] https://github.com/hyperledger/fabric-sdk-node -- you still need the vagrant environment,FAB-2508,15075,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,27/Feb/17 7:55 PM,08/Mar/17 5:17 AM,26/Apr/18 6:50 AM,08/Mar/17 5:17 AM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"The readme at https://github.com/hyperledger/fabric-sdk-node

contains this sentence which is logical to those of us how have  worked on Fabric since v0.5 days:

Because v1.0 is still in active development, you *still need *the vagrant environment to build the {color:#d04437}necessary{color} Docker images {color:#d04437}needed{color} to run the network. 

1) It will mystify users who are new to the project.   
2) If an image is 'needed to run ...' , it's redundant to call it necessary. 

Is now: 
you still need the vagrant environment to build the {color:#d04437}necessary {color}Docker images needed to run the network.

Should be:
you require a vagrant environment to build the  Docker images needed to run the network.

Allen and I have been happily testing without recourse to vagrant for a few months now, and this section of the readme is followed by a section on running natively without Vagrant.   
Is now:
Because v1.0 is still in active development, you *still need *the vagrant environment to build the necessary Docker images needed to run the network

Could be:
You can use a vagrant environment to build the Docker images needed to run the network. 


In the same readme, here is another reference which makes sense to old hands but not new users:
start fabric-ca {color:#d04437}(new {color}membership service)

Is now: 
start fabric-ca {color:#d04437}(new {color}membership service)

Should be:
start fabric-ca (membership service)

Could be:
start fabric-ca  (fabric-ca membership service replaces the V0.6 membership service) ","fabric-sdk-node : commit bc36ef5e6a70bf31adb852951f1b5a217f24a099
fabric commit 29d7fc035df697a68d271d628e693c556354486f
fabric-ca commit c3d00c32499232c484df57b68b6f2314f784179e

Ubuntu is running on a vlaunch VM ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rhl:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] https://github.com/hyperledger/fabric-sdk-node -- two subordinate clauses in one sentence,FAB-2507,15074,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,27/Feb/17 7:34 PM,09/Mar/17 6:23 PM,26/Apr/18 6:50 AM,09/Mar/17 6:23 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"A grammar error appears in the readme at https://github.com/hyperledger/fabric-sdk-node.  

Is now:
If the target blockchain network is configured with standard Certificate Authorities for trust anchors, {color:#d04437}then{color} the application does not need to use this package.

Should be: 
If the target blockchain network is configured with standard Certificate Authorities for trust anchors, the application does not need to use this package.


","fabric-sdk-node : commit bc36ef5e6a70bf31adb852951f1b5a217f24a099
fabric commit 29d7fc035df697a68d271d628e693c556354486f
fabric-ca commit c3d00c32499232c484df57b68b6f2314f784179e

Ubuntu is running on a vlaunch VM ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pfs:i,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] https://github.com/hyperledger/fabric-sdk-node --  Commands are missing,FAB-2506,15073,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,27/Feb/17 7:23 PM,09/Mar/17 6:23 PM,26/Apr/18 6:50 AM,09/Mar/17 6:22 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"The readme at https://github.com/hyperledger/fabric-sdk-node tells the reader to launch commands, but no command are given.  Instead, we immediately see a description of the two npm packages. 

Here is some context: 

_Clone the project and {color:#d04437}launch the following commands {color}to install the dependencies and perform various tasks.

This project publishes two separate npm packages:

    fabric-client - main client for the Hyperledger Fabric. Applications can use this package to install and instantiate chaincodes, submit transactions and make queries against a Hyperledger Fabric-based blockchain_","fabric-sdk-node : commit bc36ef5e6a70bf31adb852951f1b5a217f24a099
fabric commit 29d7fc035df697a68d271d628e693c556354486f
fabric-ca commit c3d00c32499232c484df57b68b6f2314f784179e

Ubuntu is running on a vlaunch VM ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pfs:,,,,,,,,jjjjibm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Setting home directory using config flag does not create database in specified location,FAB-2502,15069,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,skarim,skarim,27/Feb/17 3:47 PM,14/Mar/17 1:34 PM,26/Apr/18 6:50 AM,14/Mar/17 1:34 PM,,,,,,,,,,fabric-ca,fabric-membersrvc,,,0,membershipservices,,,,,,,,"Starting the server using ""fabric-ca-server start -c location/of/config/test.yaml"" will create the config file in location/of/config but the database will not get created here. Database should also be created in the same location that the configuration file gets created. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rg9:,,,,,,,,skarim,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Make Org Name and Org ID the same in configtxgen yaml,FAB-2499,15066,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,27/Feb/17 1:22 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,18/Apr/17 6:48 PM,,,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,ga,gossip,,,,,,"Hi.

A comment about the configuration:

    - &Org0
        # DefaultOrg defines the organization which is used in the sampleconfig
        # of the fabric.git development environment
        Name: Org0MSP

        # ID to load the MSP definition as
        ID: Org0MSP



The org Name and ID need to be the same because the org names that are returned from the Organizations() method, which gossip uses is actually the Org Name above (in bold), and the MSP-IDs of the peers are the IDs of the org above.

https://github.com/hyperledger/fabric/blob/master/common/configvalues/api.go#L45-L48
// Application stores the common shared application config
type Application interface {
	// Organizations returns a map of org ID to ApplicationOrg
	Organizations() map[string]ApplicationOrg
}

If they are not the same, it causes problems for gossip and make the gossip layer think the peers of its own org are not in its channel, and since this configuration is probably done in the same way by all org operators - most likely the gossip layer would
consider all peers not in the channel.

I suggest that we either:
Delete the Name and leave the ID 
Delete the ID and leave the Name
Change the implementation of Application so that the keys of the map are the IDs and not the Names.


This wasn't known until yesterday, and I have made a change set in gossip that ignores such a bad join channel config and logs an error ( https://gerrit.hyperledger.org/r/#/c/6513/ ) but I think it's better not to let the users/operators shoot themselves in the foot.


[~jyellick] [~binhn]
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00rfl:,,Sprint 16 - Gossip,,,,,,scottz,yacovm,,,,,,,,,master,,,true,"06/Apr/17 4:42 PM;scottz;From an operator's perspective, there are two possible solutions.
# Eliminate one of the configuration environment variables (either Name or ID) in the Organization section for the PeerOrgs in conffigtx.yaml. It is silly and confusing to define two things that must be equivalent based on internal reasons. Of course, this requires cleaning up the code - and impacts test scripts and tools in and out of fabric, so doing this soon is VERY desirable before even more dependencies and scripts are written.
# Leave both items in the config file. This makes sense only if they serve different purposes for the customer, in how they think and manage their network. Choosing this option means the customer can set them to different strings - which means we need to enhance the code to work when they are set to different values (which implies changing the title of this jira issue).
",17/Apr/17 8:28 PM;yacovm;I pushed a change set to take care of this so the requirement above will not be needed: https://gerrit.hyperledger.org/r/#/c/8121/,,,,,,,,,,,,,,,,,,,,,,
Panic upon peer startup when state db recovery is needed (CouchDB),FAB-2498,15065,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,denyeart,denyeart,denyeart,27/Feb/17 7:25 AM,01/Mar/17 12:31 PM,26/Apr/18 6:50 AM,01/Mar/17 12:31 PM,,,,,,,,,,fabric-ledger,,,,0,,,,,,,,,"panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x9d89df]

goroutine 1 [running]:
panic(0xb49b20, 0xc4200140c0)
	/opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb.(*VersionedDB).GetLatestSavePoint(0xc4203b28c0, 0xc42021d2b0, 0x9c6041, 0x7f7821f07398)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb/statecouchdb.go:405 +0x7f
github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr.(*LockBasedTxMgr).GetLastSavepoint(0xc420303f90, 0xbb1140, 0xc42036f500, 0x7f7821f07398)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/lockbased_txmgr.go:52 +0x33
github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr.(*LockBasedTxMgr).ShouldRecover(0xc420303f90, 0x3, 0xc4203b2900, 0x7f7821f07398, 0xc4203b2900, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/lockbased_txmgr.go:112 +0x2f
github.com/hyperledger/fabric/core/ledger/kvledger.(*kvLedger).recoverDBs(0xc42035c980, 0xc42035c980, 0xc420303f90)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger.go:83 +0x1ca
github.com/hyperledger/fabric/core/ledger/kvledger.newKVLedger(0xc4203a3a28, 0x4, 0x11df180, 0xc4203c48e0, 0x11de980, 0xc4203b28c0, 0x11dc880, 0xc4203b2900, 0xc42021d4f0, 0x748933, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger.go:62 +0x1b6
github.com/hyperledger/fabric/core/ledger/kvledger.(*Provider).Open(0xc42000cac0, 0xc4203a3a28, 0x4, 0x4, 0x1216320, 0x0, 0x21891f6b00413ae8)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger_provider.go:142 +0x294
github.com/hyperledger/fabric/core/ledger/ledgermgmt.OpenLedger(0xc4203a3a28, 0x4, 0x0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:95 +0x227
github.com/hyperledger/fabric/core/peer.Initialize(0xc9b218)
	/opt/gopath/src/github.com/hyperledger/fabric/core/peer/peer.go:96 +0x171
github.com/hyperledger/fabric/peer/node.serve(0xc420235220, 0x0, 0x1, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:199 +0x84b
github.com/hyperledger/fabric/peer/node.glob..func1(0x11c7500, 0xc420235220, 0x0, 0x1, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:75 +0x3f
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0x11c7500, 0xc4202351f0, 0x1, 0x1, 0x11c7500, 0xc4202351f0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:599 +0x234
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x11c7d80, 0xf, 0xc42015ed78, 0x7)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 +0x367
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x11c7d80, 0x10, 0xc42015ed78)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 +0x2b
main.main()
	/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:111 +0x52d",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzdr:,,Sprint 12 - Ledger,Sprint 13 - Ledger,,,,,denyeart,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"Instantiate proposal fails when missing ""path"" field in ChaincodeSpec",FAB-2495,15062,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,cdaughtr,jimthematrix,jimthematrix,27/Feb/17 4:56 AM,27/Feb/17 2:14 PM,26/Apr/18 6:50 AM,27/Feb/17 2:14 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rex:,,,,,,,,jimthematrix,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca should use base 64 encoding with padding,FAB-2491,15058,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,smithbk,smithbk,26/Feb/17 7:03 PM,10/Mar/17 6:49 PM,26/Apr/18 6:50 AM,10/Mar/17 6:49 PM,,,,,,,,,,fabric-ca,,,,0,,,,,,,,,"fabric-ca 64 encodes and decodes w/o padding, but the standard is to use padding.
So we need to change fabric-ca to encode with padding and handle decoding both with and w/o padding.

This problem became apparent when coding the register command for the java SDK.  The standard base 64 encoding was not recognized in the authorization header, so the request failed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzdi:zi,,Sprint 12 - Membership Service,Sprint 13 - Membership Service,,,,,smithbk,,,,,,,,,,master,,,true,26/Feb/17 7:31 PM;smithbk;https://gerrit.hyperledger.org/r/#/c/6547/,,,,,,,,,,,,,,,,,,,,,,,
docker-compose is not being cleaned up from unit tests,FAB-2485,15052,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,troyronda,rameshthoomu,rameshthoomu,26/Feb/17 1:27 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,29/Mar/17 3:34 PM,,,,,,,v1.0.0,,,,,,,0,,,,,,,,,"unit-tests are not starting with couchdb error in vagrant environment

on fresh vagrant environment follow below steps to reproduce this error:

*Step 1*: Run *make docker* from fabric directory
*Step 2:* Upon successful execution of `make docker` execute `*docker images*` should display peer, orderer, couchdb and other images
/hyperledger/fabric$ docker images

{noformat}
REPOSITORY                     TAG                             IMAGE ID            CREATED             SIZE
hyperledger/fabric-couchdb     latest                          1332ee04bd10        7 minutes ago       1.48 GB
hyperledger/fabric-couchdb     x86_64-0.7.0-snapshot-6daec3f   1332ee04bd10        7 minutes ago       1.48 GB
{noformat}

*Step3*: Run `*make unit-test*`.. Unit-tests should start after executing make unit-test

+Below is the result in vagrant:+
{code:java}
docker tag hyperledger/fabric-peer hyperledger/fabric-peer:x86_64-0.7.0-snapshot-6daec3f
cd unit-test && docker-compose up --abort-on-container-exit --force-recreate && docker-compose down
WARNING: The TEST_PKGS variable is not set. Defaulting to a blank string.
Recreating 931e2f7015ce_931e2f7015ce_931e2f7015ce_931e2f7015ce_couchdb
Recreating 54a7df37190d_54a7df37190d_54a7df37190d_54a7df37190d_unittest_vp_1

ERROR: for vp  No such image: sha256:9e95b8dbeca0cfc6ebaf4b89c47438756345c25e66eaaf7011cf4dcd35eb00a1

ERROR: for couchdb  No such image: sha256:4e109bf5798cec75baed0a594c1d79c946d2600675a886f039d3ba5d23760018
ERROR: Encountered errors while bringing up the project.
Makefile:117: recipe for target 'unit-test' failed
make: *** [unit-test] Error 1
vagrant@hyperledger-devenv:v0.3.0-398e366:/opt/gopath/src/github.com}
{code}


*How to reproduce*
Reproduce by:
* Killing unit-tests in the middle of the run (after docker-compose up has completed but prior to down).
* Run make dist-clean all

*Known Issue*
https://github.com/docker/compose/issues/1113
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rcp:,,,,,,,,AdnanChoudhury,denyeart,rameshthoomu,troyronda,,,,,,,master,,,true,26/Feb/17 6:21 AM;denyeart;[~AdnanChoudhury] can you take a look?,"26/Feb/17 9:12 PM;AdnanChoudhury;Unable to reproduce at the latest commit level:

{code:java}
commit 22ede4798fa1ab4459391dba4b6def80aab0f053
Merge: 2e7728d 72c03f1
Author: Srinivasan Muralidharan <muralisr@us.ibm.com>
Date:   Sun Feb 26 18:32:45 2017 +0000
{code}


[~rameshthoomu] Can you give the commit level you tested? 
Also, the error log indicates that in addition to couchdb, same error happened for ""vp"" container. 
The couchdb images I have in my vagrant are:

{code:java}
hyperledger/fabric-couchdb     latest                          d5d6162a0b20        8 minutes ago       1.48 GB
hyperledger/fabric-couchdb     x86_64-0.7.0-snapshot-22ede47   d5d6162a0b20        8 minutes ago       1.48 GB

{code}
","28/Feb/17 8:04 PM;rameshthoomu;Able to run ""make unit-tests"" now but I am seeing ""illegal file mode"" error on chaincode02",28/Feb/17 9:13 PM;denyeart;[~rameshthoomu] There was an illegal file mode issue fixed on Saturday.  Are you on the latest?,"01/Mar/17 6:33 PM;rameshthoomu;I am fabric latest commit and not observing the issue what I created here but I see ""illegal filemode while deploying chaincode spec""  https://jira.hyperledger.org/browse/FAB-2569
","01/Mar/17 7:13 PM;denyeart;ok, that issue is different than the prior file mode issue.
Since the issue in this Bug cannot be reproduced, I will close.","26/Mar/17 2:28 AM;troyronda;I encountered this issue outside vagrant on the 1.0 alpha release tag. I had to cleanup docker-compose.

in the unit-test directory, run docker-compose down (or docker-compose rm)
","26/Mar/17 4:06 AM;troyronda;See https://gerrit.hyperledger.org/r/#/c/7447/
",29/Mar/17 3:34 PM;troyronda;Changes have been merged.,,,,,,,,,,,,,,,
cleanup files with suspicious permissions in fabric,FAB-2482,15049,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,sanchezl,sanchezl,25/Feb/17 8:27 PM,26/Feb/17 5:11 AM,26/Apr/18 6:50 AM,26/Feb/17 5:11 AM,,,,,,,,,,fabric-ca,,,,0,quality,,,,,,,,"When trying to deploy chain code, I see get errors due to *Illegal file mode detected for file ...* .

This is for cleanup of the suspicious files in fabric:

{noformat}
Firehawk:fabric sanchezl$ find . -name ""*.go"" -perm 755
./core/ledger/kvledger/txmgmt/statedb/statecouchdb/statecouchdb.go
{noformat}",,,,,,,,,,,,,,FAB-2481,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rc1:,,,,,,,,sanchezl,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
cleanup files with suspicious permissions in fabric-ca,FAB-2481,15048,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,sanchezl,sanchezl,25/Feb/17 8:19 PM,26/Feb/17 5:12 AM,26/Apr/18 6:50 AM,26/Feb/17 5:12 AM,,,,,,,,,,fabric-ca,,,,0,quality,,,,,,,,"When trying to deploy chain code, I see get errors due to *Illegal file mode detected for file ...* .

This is for cleanup of the suspicious files in fabric-ca:

{noformat}
Firehawk:fabric-ca sanchezl$ find . -name ""*.go"" -perm 755
./cli/server/init.go
./cli/server/init_test.go
./vendor/github.com/google/certificate-transparency/go/asn1/asn1.go
./vendor/github.com/google/certificate-transparency/go/asn1/common.go
./vendor/github.com/google/certificate-transparency/go/asn1/marshal.go
./vendor/github.com/google/certificate-transparency/go/x509/cert_pool.go
./vendor/github.com/google/certificate-transparency/go/x509/pem_decrypt.go
./vendor/github.com/google/certificate-transparency/go/x509/pkcs1.go
./vendor/github.com/google/certificate-transparency/go/x509/pkcs8.go
./vendor/github.com/google/certificate-transparency/go/x509/pkix/pkix.go
./vendor/github.com/google/certificate-transparency/go/x509/root.go
./vendor/github.com/google/certificate-transparency/go/x509/root_darwin.go
./vendor/github.com/google/certificate-transparency/go/x509/root_plan9.go
./vendor/github.com/google/certificate-transparency/go/x509/root_stub.go
./vendor/github.com/google/certificate-transparency/go/x509/root_unix.go
./vendor/github.com/google/certificate-transparency/go/x509/root_windows.go
./vendor/github.com/google/certificate-transparency/go/x509/sec1.go
./vendor/github.com/google/certificate-transparency/go/x509/verify.go
./vendor/github.com/google/certificate-transparency/go/x509/x509.go
Firehawk:fabric-ca sanchezl$ find . -name ""*.json"" -perm 755
./testdata/csr_dsa.json
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00rbt:,,,,,,,,sanchezl,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Issue with Peer-to-Peer TLS,FAB-2478,15041,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,farhan3,farhan3,24/Feb/17 10:16 PM,02/Apr/17 1:43 PM,26/Apr/18 6:50 AM,02/Apr/17 1:43 PM,v0.6,v1.0.0,,,,,v1.0.0,v1.0.0-alpha1,,,,,,0,,,,,,,,,"When Peer A is trying to communicate with Peer B, Peer A acts as the client and Peer B acts as the server. This means Peer A calls {{fabric/core/comm/connection.go#InitTLSForPeer()}}. However, this method is wrong. More specifically, the following line:

{code}
creds, err = credentials.NewClientTLSFromFile(viper.GetString(""peer.tls.cert.file""), sn)
{code}

The method being called ({{NewClientTLSFromFile}}) is from [gprc-go|https://github.com/grpc/grpc-go/blob/master/credentials/credentials.go#L205]. The first parameter to this method is a PEM file containing Root CAs that are trusted. If you look at the source for this (https://github.com/grpc/grpc-go/blob/master/credentials/credentials.go#L214), it creates a {{NewCertPool}} and adds the certs from the provided PEM file. These certs are the Root CAs that should be trusted when the connection is being established.

However, the cert file being given as a parameter in {{fabric/core/comm/connection.go#InitTLSForPeer()}} is the cert file of Peer A, not the Root CA cert!

Instead of {{""peer.tls.cert.file""}}, it should be {{""peer.tls.rootcert.file""}}. This would mean that the rootcert, which has signed Peer A cert and Peer B cert, is the added to the NewCertPool and the TLS connection can be established.


In order for P2P TLS to work at the moment in v0.6 and v1.0, all peers must be using the same self-signed certificate, which is wrong. The above fix will only resolve the issue in v1.0 because {{peer.tls.rootcert.file}} is already defined in core.yaml. However, in v0.6 there is no {{peer.tls.rootcert.file}}.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ra9:,,,,,,,,farhan3,mastersingh24,,,,,,,,,,,,,02/Apr/17 1:43 PM;mastersingh24;Not going to fix this for v0.6 but this is fixed already for v1.0.0,,,,,,,,,,,,,,,,,,,,,,,
clean up .protos files to match Fabric versions,FAB-2476,15039,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,tuand,tuand,24/Feb/17 7:59 PM,28/Mar/17 5:40 PM,26/Apr/18 6:50 AM,28/Mar/17 5:40 PM,,,,,,,,,,fabric-sdk-java,,,,0,v1.0,,,,,,,,"Some of the .protos files have `option java_option` and `import` statements that are not in the versions in hyperledger/fabric/protos.

Also `identities.proto` is in hyperledger/fabric/msp and not in hyperledger/fabric/protos 

Clean up so that we have one official version of the files in one location (probably hyperledger/fabric/protos) and have the SDK builds automatically copy from there as needed.",,,,,,,,,,,,,,,,,FAB-2678,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00r9t:,,,,,,,,rickr,tuand,,,,,,,,,,,,,28/Mar/17 5:40 PM;rickr;Protos are being kept up to date,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca-server should allow config files with any valid filename,FAB-2474,15037,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,aambati,rennman,rennman,24/Feb/17 7:30 PM,16/Mar/17 12:05 PM,26/Apr/18 6:50 AM,16/Mar/17 12:05 PM,,,,,,,,,,fabric-ca,,,,0,Usability,,,,,,,,"Currently, fabric-ca-server enforces that the input <filename> passed to the -config arg ends with .json, .yml, or .yaml (there may be others, but I can confirm these)

It will not accept filenames without an extension, nor with extensions it does not recognize.

This does not appear to be a restriction for the fabric-ca-client command.

I propose that the command accept any valid filename, for both consistency and convenience to the user.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00r9d:,,,,,,,,rennman,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Enable Power CI builds for Hyperledger Fabric 1.0,FAB-2464,15027,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,bsmita,bsmita,24/Feb/17 3:10 PM,04/Mar/17 1:33 PM,26/Apr/18 6:50 AM,04/Mar/17 1:33 PM,,,,,,,,,,,,,,0,build-system,,,,,,,,Please enable verify and merge jobs for Power platform for Fabric CI.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00r75:,,,,,,,,bsmita,,,,,,,,,,master,,,true,"28/Feb/17 4:22 PM;bsmita;Ramesh dropped the CR in http://gerrit.hyperledger.org/r/6631

",,,,,,,,,,,,,,,,,,,,,,,
endorser proposal ACL needs to be configurable,FAB-2457,15020,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ellaki,muralisr,muralisr,24/Feb/17 2:20 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,26/Apr/17 1:38 PM,,,,,,,v1.0.0,,,fabric-endorser,,,,0,,,,,,,,,"Currently there is no means to specify the policy to use for checking ACL for proposals. The default policy of > 50% admins would not work for most situations (unlike the committer side VSCC validations). Its more reasonable to say ""is this creator issuing proposal an admin"" as opposed to ""are there >50% admins signing off on this proposal"".

In any case this needs to be revisited. Till then propose we revert checkACL to allow proposals through.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhy:zz9xm7,,,,,,,,binhn,denyeart,elli-androulaki,muralisr,yacovm,,,,,,master,,,true,"24/Feb/17 6:34 AM;binhn;It is not 1 policy fits all. 

I would suggest the following:
1) LCCC & CSCC:  local admins only but unfortunately we have to handle specific functions that are channel admins
2) QSCC is readers since it provides ledger query API
3) All other chaincode invokes on a channel are channel writers
","24/Feb/17 5:20 PM;elli-androulaki;Hi Binh,

Would you be fine with the following arrangement? 

LCCC & CSCC & QSCC chainless  =>  are only allowed to be invoked by local admins 
non-chainless LCCC => chaincodeAdmin of the chain the proposal refers to 
non-chainless QSCC chainless  =>  are only allowed to be invoked by channel readers
other application chaincodes => invoked allowed within channel writers

The issue so far has been that we use the same policy for non-chainless LCCC and admin policy used for reconfiguration. The latter uses a threshold signature based policy that the former cannot accommodate due to the singularity of the proposal creator (we can only have one signature). 

After talking to @jyellick, we would need to have an additional policy for that defining identities that are allowed to ""instantiate"" chaincodes, and invoke these type of chaincodes. 
In the short term though it would make sense to lower the threshold of signatures required in the admin policy to one, till we have this additional policy in.

What do you think? 
","28/Feb/17 10:05 PM;binhn;[~ellaki]  SCC may operate on any channels since it is not restricted to the chaincode APIs, but often SCC is invoked with a channel in the parameter. However, each function behaves differently depending on the implementation, so I think ACL on SCC should be left to SCC to implement per function, except when a CC calling SCC.

A CC is always called on a channel and can only operate within that channel. When a CC calls an SCC, as part of the API, it has to specify a channel. So the ACL for that (CC2SCC) can be done outside of the SCC, and we can apply the same criteria as CC2CC.

Assuming ability to extract a policy available, we need to provide a function that, given a policy and a proposal (or header), determines ACL so that SCC may call.

Examples
LCCC has functions that operate outside of channel such as Install and GetInstalledChaincodes. These functions require local MSP admins; whereas, Instantiate and other functions, that require a channel, can access if the user is a member of channel admins or writers or readers. Similarly for CSCC. JoinChannel requires local MSP admins, but others require channel policies as appropriate. On the other hand, QSCC is a ledger structure query, so ACL should be based on channel readers.
","01/Mar/17 1:09 PM;elli-androulaki;Ok, so regarding 

> A CC is always called on a channel and can only operate within that channel. When a CC calls an SCC, as part of the API, it has to specify a channel. So the ACL for that (CC2SCC) can be done outside of the SCC, and we can apply the same criteria as CC2CC.
Is there a chance indeed of a CC invoking an SCC? If the answer is ""currently no, but in the future it may be the case"" we think we should forbid such a call. Angelo's CR on CC2CC does that already after a discussion he and Murali had.

> Assuming ability to extract a policy available, we need to provide a function that, given a policy and a proposal (or header), determines ACL so that SCC may call.
A couple of clarification questions here: 
  - when you say ability to extract a policy available, do you refer to a policy object? policy is actually the expression of the ACL, and evaluating permissions of a signer against it is as simple as invoking policy.evaluate method.
  - where should the policy be extractable from? it seems to me that for requests/proposals that are not within a channel's scoped it is always only the peer msp admin's that should be considered. For channel scoped proposals, a policy from the channel genesis should be considered. Taking a closer look on what the latter can be 
       * chain-scoped LCCC (instantiate/terminate chaincodes): chaincode instantiators of the channel
       * chain-scoped QSCC (queries on the chaincodes/blocks of a channel): channel readers should be checked
  - for chainless proposals, though we want policies to be extractable, we do not want them to be configurable, correct? E.g., have the peer yaml contain a policy the peer should be authenticating LCCC install/uninstall requests.




","11/Apr/17 7:56 PM;denyeart;[~muralisr][~adc][~ales][~ellaki] Is this still needed or has it already been covered and therefore can be closed? If still valid, is it a story or a bug?  Is it required for 1.0.0?","19/Apr/17 10:58 AM;elli-androulaki;If we do this, can't we extend this config of the peer to define a peer's trustzone? Essentially, policy defining which identities should be allowed to receive StateInfo messages of peers. [~yacovm] [~C0rWin].","19/Apr/17 11:04 AM;yacovm;Currently - peers receive StateInfo messages from peers that their orgs are channel members, *and* that they know the name of the channel - what benefit does your approach give?
There is an overhead of computing the policy over a peer (signature verification overhead).",20/Apr/17 12:10 AM;muralisr;This belongs to all the ACL work that is being done.. assigning it to [~ellaki] for handling.,,,,,,,,,,,,,,,,
[node-sdk] query.js not ok 32 test exited without ending ,FAB-2456,15019,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jjjjibm,jjjjibm,jjjjibm,23/Feb/17 11:37 PM,27/Feb/17 6:10 PM,26/Apr/18 6:50 AM,27/Feb/17 6:10 PM,v1.0.0,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"Query.js works when invoked like this:  node query.js

However, it does not work when it is added to test.js like this:
gulp.task('test' ....
   gulp.task('test', ['lint', 'test-headless'], function() {
                'test/integration/chain-fabriccop-tests.js',
                'test/integration/endorser-tests.js',
                'test/integration/orderer-chain-tests.js'
{color:#14892c}+              * ,'test/integration/end-to-end.js'
+               ,'test/integration/query.js'
{color}*            
Here is the last part of  'gulp test' output:

{color:#59afe1}ok 33 checking query results are correct that user b has 300 now after the move
[2017-02-23 18:29:05.118] [INFO] E2E - Disconnecting the event hub
ok 34 checking query results are correct that user b has 300 now after the move
not ok 35 test exited without ending
  ---
    operator: fail
  ...

1..35
# tests 35
# pass  32
# fail  3
{color}
Query.js takes four optional parameters which are inspected by the second test() in query.js.  If no parameters are specified, all queries in the second test are attempted.  If parameters are specified, the query or queries corresponding to the parameters are attempted.

When called from gulp, parameters are passed to query.js, but not the parameters recognized by query.js.  The second test omits to attempt any queries because it checks querys.length == 0  or querys.indexOf(<supported parameter>) before attempting each query.  Querys.length is not zero, yet never a supported parameter.  Consequently, no queries are attempted, and the test ends without calling t.end(). 
","fabric-sdk-node: commit 425028f3f64b33d2ebaba57b276fca56c4b801ad
fabric: commit e829d2ecfd9a2bfc378a08a9364215f241a0a09b
fabric-ca: commit ec639409e248bc97bf5adc15dcb812d19dc93a88

vlaunch VM running Ubuntu",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00r5t:,,,,,,,,jjjjibm,,,,,,,,,,master,,,true,"23/Feb/17 11:54 PM;jjjjibm;commit 70fe8ad67d069bb159231f14e473767882fdd805
Author: jjjjibm <jcwolf@us.ibm.com>
Date:   Thu Feb 23 18:47:43 2017 -0500

    node-sdk FAB-2456 query.js exited without ending

    Fabric-sdk-node/test/integration/query.js test ends without calling
    t.end() when driven by gulp.  See FAB-2456 for a discussion of the
    problem. Query.js changed to distinguish gulp parameters from
    command line parameters.

    Change-Id: If445854d267c5f52d08a32ee050e769f3f7c7328
    Signed-off-by: jjjjibm <jcwolf@us.ibm.com>
",23/Feb/17 11:56 PM;jjjjibm;https://gerrit.hyperledger.org/r/#/c/6455/,,,,,,,,,,,,,,,,,,,,,,
Misleading log message in endorser.go,FAB-2455,15018,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,23/Feb/17 11:18 PM,10/Mar/17 6:25 PM,26/Apr/18 6:50 AM,10/Mar/17 6:25 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00r5l:,,,,,,,,jyellick,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
readthedocs builds is failing after commit# 55219e3,FAB-2451,15014,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,23/Feb/17 7:58 PM,26/Feb/17 4:12 PM,26/Apr/18 6:50 AM,26/Feb/17 4:12 PM,,,,,,,,,,,,,,0,,,,,,,,,"Readthedocs build is failing after commit # 5219e3


{noformat}
ERROR   -  file not found: /home/docs/checkouts/readthedocs.org/user_builds/hyperledger-fabric/checkouts/latest/docs/FAQ/architecture_FAQ.md 
ERROR   -  Error building page FAQ/architecture_FAQ.md 
{noformat}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00r4p:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,26/Feb/17 4:12 PM;rameshthoomu;RTD builds are working as expected now...,,,,,,,,,,,,,,,,,,,,,,,
Error on setup with docker,FAB-2442,15005,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,sodiaan,sodiaan,23/Feb/17 9:40 AM,23/Feb/17 10:00 PM,26/Apr/18 6:50 AM,23/Feb/17 10:00 PM,,,,,,,v1.0.0,,,,,,,0,,,,,,,,,"Here http://hyperledger-fabric.readthedocs.io/en/latest/asset_setup/
on step http://hyperledger-fabric.readthedocs.io/en/latest/asset_setup/#use-docker-to-spawn-network-entities-createjoin-a-channel
I got error ""ERROR: In file './docker-compose-gettingstarted.yml' service 'version' doesn't have any configuration options. All top level keys in your docker-compose.yml must map to a dictionary of configuration options.""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00r2p:,,,,,,,,rameshthoomu,sodiaan,,,,,,,,,,,,,"23/Feb/17 2:14 PM;sodiaan;the docker-compose version is 1.5.2, this is the problem, I upgraded and now it works",23/Feb/17 2:14 PM;sodiaan;please add this information to documentation,"23/Feb/17 10:00 PM;rameshthoomu;[~sodiaan]: Steps are added in once of the fabric documentation. Sure will add these steps in fabric docs. Just to capture note: Version: '2' support in docker-compose 1.5.2 is not available.. Please follow below link to upgrade docker-compose

If you are running on ubuntu
{code:java}
curl -L ""https://github.com/docker/compose/releases/download/1.8.0/docker-compose-$(uname -s)-$(uname -m)"" > /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
docker-compose version
{code}

If you running on ""Power"" platform:

{code:java}
apt-get install docker.io
pip install docker-compose
{code}",,,,,,,,,,,,,,,,,,,,,
npm test breaks on fabric-sdk-node,FAB-2434,14997,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,harsha544,harsha544,22/Feb/17 7:53 PM,08/Mar/17 5:11 AM,26/Apr/18 6:50 AM,08/Mar/17 5:11 AM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"*npm test* is failing because of missing *test/unit/headless-tests.js*
Ref :- https://github.com/hyperledger/fabric-sdk-node/blob/master/package.json#L10 ",,,,,,,,,,,,,,,,,,,,22/Feb/17 7:54 PM;harsha544;Error_Log;https://jira.hyperledger.org/secure/attachment/10529/Error_Log,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00r15:,,,,,,,,harsha544,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Consider Identity.Serialize may return a different byte representation of marshalled identity ,FAB-2430,14993,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ales,elli-androulaki,elli-androulaki,22/Feb/17 4:12 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,18/Apr/17 12:47 PM,,,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,,We would need to find a workaround there for uses of identity.Serialize that are used for identity comparison check. One such occurrence is the gossip getPKIidFromCertificate (another jira item) and another one is the satisfiesPolicy function inside msp/mspimpl.go. This work-item refers to the latter.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2420,0|i00udj:,,Sprint 13 - Crypto,Sprint 14 - Crypto,Sprint 15 - Crypto,Sprint 16 - Crypto,,,elli-androulaki,,,,,,,,,,master,,,true,"06/Apr/17 7:05 PM;elli-androulaki;[~ales], isn't this already done? :)",,,,,,,,,,,,,,,,,,,,,,,
The server failed to respond with a valid HTTP response,FAB-2425,14988,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,sodiaan,sodiaan,22/Feb/17 1:24 PM,18/Mar/17 3:53 PM,26/Apr/18 6:50 AM,18/Mar/17 3:53 PM,,,,,,,v1.0.0,,,fabric-sdk-java,,,,0,,,,,,,,,"Exception in thread ""main"" org.hyperledger.fabric.sdk.exception.EnrollmentException: Failed to enroll user admin 
        at org.hyperledger.fabric.sdk.MemberServicesFabricCAImpl.enroll(MemberServicesFabricCAImpl.java:312)
        at org.hyperledger.fabric.sdk.User.enroll(User.java:238)
        at org.hyperledger.fabric.sdk.Chain.enroll(Chain.java:560)
        at App.main(App.java:144)
Caused by: org.apache.http.client.ClientProtocolException
        at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:186)
        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)
        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:55)
        at org.hyperledger.fabric.sdk.MemberServicesFabricCAImpl.httpPost(MemberServicesFabricCAImpl.java:352)
        at org.hyperledger.fabric.sdk.MemberServicesFabricCAImpl.enroll(MemberServicesFabricCAImpl.java:283)
        ... 3 more
Caused by: org.apache.http.ProtocolException: The server failed to respond with a valid HTTP response
        at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:151)
        at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:57)
        at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:261)
        at org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:165)
        at org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:167)
        at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:272)
        at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:124)
        at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:271)
        at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)
        at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)
        at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
        at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)

for code https://gist.github.com/anonymous/a744c24d82cc761f897355c146fdaffe

membersrvc_1 | 2017/02/22 13:21:25 transport: http2Server.HandleStreams received bogus greeting from client: ""POST /api/v1/cfssl/enrol""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qzt:,,,,,,,,rickr,smithbk,sodiaan,,,,,,,,,,,,"22/Feb/17 1:42 PM;rickr;More than likely your fabric_ca is set up for TLS.
Check the testconfig.json make sure tls is disabled.
{
 ""tls_disable"":true,","22/Feb/17 1:46 PM;sodiaan;Where I can find testconfig.json ?
I'm using docker.",22/Feb/17 1:50 PM;rickr;Keith could you please update the README.md   with some instructions on disabling TLS if this is the issue.,"22/Feb/17 2:37 PM;smithbk;Rick, I would need some help in reproducing this, but first I have a recommendation for Di.

fabric-ca is in transition and we are breaking the server and client into 2 separate executables.
See https://jira.hyperledger.org/browse/FAB-2012
We are almost complete and I'll update the docs when done and the fabric-ca executable will
actually be going away.

So my recommendation is to use the fabric-ca-server command and see if this is still a problem.
It is very easy to use.

To install both the client and server: go get github.com/hyperledger/fabric-ca/cmd/...

To start the server:
    fabric-ca-server start -u admin:adminpw

Arg, there is a change set which is about to be merged which changes the ""-u"" option to ""-b"" for the bootstrap user,
so if ""-u"" doesn't work, try ""-b"" which is what it will eventually be.  This will create a default configuration fie for you
with the ""admin"" user and password ""adminpw"" as the bootstrap user.  It listens with TLS disabled by default.",12/Mar/17 8:39 PM;rickr;Can we close this I think it was user error .. I've not see any such issues.,18/Mar/17 3:53 PM;rickr;Closing as I asked 5 days ago on a response if we recreated.  I've not seen this reported [~sodiaan]  Please get the latest HLJSDK and Fabric Fabric_ca and see if you can reproduce and reopen this with detailed logs.,,,,,,,,,,,,,,,,,,
Make gossip consult MSP policies when authenticating peers in channels,FAB-2424,14987,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,22/Feb/17 12:54 PM,01/Mar/17 3:08 PM,26/Apr/18 6:50 AM,01/Mar/17 3:08 PM,,,,,,,,,,,,,,0,,,,,,,,,"Currently, in gossip - the peer checks decides whether a fellow peer is eligible for receiving blocks in a channel by checking if it is in the right organization by extracting its organization ID from the peer identity.

In some use-cases it is not enough, i.e: if all the peers use the same root CA.
Therefore, we need to also make the peer consult the policies that are in the configuration block of the channel, and check whether a channel readers policy asserts that the peer in question is eligible to read blocks.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00qzl:,,Sprint 12 - Gossip,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
HOW to enable TLS,FAB-2423,14986,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,zhangyijie,zhangyijie,22/Feb/17 9:31 AM,14/Apr/17 11:42 AM,26/Apr/18 6:50 AM,14/Apr/17 11:42 AM,,,,,,,v0.6,WON'T FIX,,fabric-docs,,,,0,,,,,,,,,"This is my configuration. How to set TLS? Is there more detail document ??   docker vm need open TLS ?
{code:java}
membersrvc.yaml:
  server:
        gomaxprocs: -1
        rootpath: ""/var/hyperledger/production""
        cadir: "".membersrvc""
        port: "":7054""

        # TLS certificate and key file paths
        tls:
            cert:
                file: ""/var/hyperledger/share/tlsca.crt""
            key:
                file: ""/var/hyperledger/share/tlsca.key""

security:
    # Either 256 or 384   (note: must be the exact same value as specified in the core.yaml file)
    level: 256

    # Either SHA2 or SHA3 (note: must be the exact same value as specified in the core.yaml file)
    hashAlgorithm: SHA3

    # The server host CN (Common Name) to be used (needs to match the TLS Server Certificate)
    serverhostoverride: OBC

    # Boolean (true/false) value indicating whether TLS should be used between the client and
    # the various CA services (ECA, TCA, TLSCA, ACA)
    tls_enabled: true

    # A PEM-encoded (X509 v3, Base64) certificate to use for establishing the TLS connection
    # between the client and the ACA service
    client:
       cert:
           file:_

core.yaml
    tls:
        enabled:  true
        cert:
            file: ""/var/hyperledger/share/tlsca.crt""
        key:
            file: ""/var/hyperledger/share/tlsca.key""
        # The server name use to verify the hostname returned by TLS handshake
        serverhostoverride: OBC

    # PKI member services properties
    pki:
        eca:
            paddr: localhost:7054
        tca:
            paddr: localhost:7054
        tlsca:
            paddr: localhost:7054
        tls:
            enabled: true
            rootcert:
                file: ""/var/hyperledger/share/tlsca.crt""
            # The server name use to verify the hostname returned by TLS handshake
            serverhostoverride: OBC

docker-compose.yml

membersrvc:
  image: hyperledger/fabric-membersrvc:x86_64-0.6.1-preview
  volumes:
  - /c/Users/xps15/share:/var/hyperledger/share
  - /c/Users/xps15/share/membersrvc.yaml:/opt/gopath/src/github.com/hyperledger/fabric/membersrvc/membersrvc.yaml
  ports:
    - ""7054:7054""
  command: membersrvc

vp0:
  image: hyperledger/fabric-peer:x86_64-0.6.1-preview
  volumes:
  - /var/run/docker.sock:/var/run/docker.sock
  - /c/Users/xps15/share:/var/hyperledger/share
  - /c/Users/xps15/share/core.yaml:/opt/gopath/src/github.com/hyperledger/fabric/peer/core.yaml
  ports:
    - ""7050:7050""
    - ""7051:7051""
    - ""7052:7052""
  environment:
    - CORE_PEER_ADDRESSAUTODETECT=true
    - CORE_VM_ENDPOINT=unix:///var/run/docker.sock
    - CORE_LOGGING_LEVEL=DEBUG
    - CORE_PEER_PKI_ECA_PADDR=membersrvc:7054
    - CORE_PEER_PKI_TCA_PADDR=membersrvc:7054
    - CORE_PEER_PKI_TLSCA_PADDR=membersrvc:7054
    - CORE_PEER_PKI_TLS_ENABLED=true
    - CORE_PEER_PKI_TLS_ROOTCERT_FILE=/var/hyperledger/share/tlsca.crt
    - CORE_PEER_PKI_TLS_SERVERHOSTOVERRIDE=OBC
    - CORE_SECURITY_ENABLED=true
    - CORE_SECURITY_PRIVACY=false
    - CORE_CHAINCODE_STARTUPTIMEOUT=600000
    - CORE_PEER_ID=vp0
    - CORE_SECURITY_ENROLLID=test_vp0
    - CORE_SECURITY_ENROLLSECRET=MwYpmSRjupbT
  command: sh  -c ""sleep 30; peer node start""
{code}
exception like:
33mvp0_1 |�[0m �[36m07:10:02.768 [crypto] Debugf -> DEBU 013�[0m [validator.test_vp0] Keystore opened at [/var/hyperledger/production/crypto/validator/test_vp0/ks]...done
�[33mvp0_1 |�[0m �[36m07:10:02.768 [crypto] Debug -> DEBU 014�[0m [validator.test_vp0] Registering node crypto engine...
�[33mvp0_1 |�[0m �[36m07:10:02.768 [crypto] Debug -> DEBU 015�[0m [validator.test_vp0] Initiliazing TLS...
�[33mvp0_1 |�[0m �[36m07:10:02.768 [crypto] Debugf -> DEBU 016�[0m [validator.test_vp0] Loading external certificate at [/var/hyperledger/share/tlsca.crt]...
�[33mvp0_1 |�[0m �[36m07:10:02.769 [crypto] Debug -> DEBU 017�[0m [validator.test_vp0] Initiliazing TLS...Done
�[33mvp0_1 |�[0m �[36m07:10:02.769 [crypto] Debug -> DEBU 018�[0m [validator.test_vp0] Getting ECA client...
�[33mvp0_1 |�[0m �[36m07:10:02.769 [crypto] Debugf -> DEBU 019�[0m [validator.test_vp0] Dial to addr:[membersrvc:7054], with serverName:[OBC]...
�[33mvp0_1 |�[0m �[36m07:10:02.769 [crypto] Debug -> DEBU 01a�[0m [validator.test_vp0] TLS enabled...
�[33mvp0_1 |�[0m �[36m07:10:02.769 [crypto] Debug -> DEBU 01b�[0m [validator.test_vp0] Getting ECA client...done
�[33mvp0_1 |�[0m �[31m07:10:12.775 [crypto] Errorf -> ERRO 01c�[0m [validator.test_vp0] Failed requesting read certificate [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure].
�[33mvp0_1 |�[0m �[31m07:10:12.775 [crypto] Errorf -> ERRO 01d�[0m [validator.test_vp0] Failed requesting ECA certificate [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure].
�[33mvp0_1 |�[0m �[31m07:10:12.775 [crypto] Errorf -> ERRO 01e�[0m [validator.test_vp0] Failed getting ECA certificate [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure].
�[33mvp0_1 |�[0m �[31m07:10:12.775 [crypto] Errorf -> ERRO 01f�[0m [validator.test_vp0] Failed retrieving ECA certs chain [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure].
�[33mvp0_1 |�[0m �[31m07:10:12.775 [crypto] Errorf -> ERRO 020�[0m [validator.test_vp0] Failed registering node crypto engine [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure].
�[33mvp0_1 |�[0m �[31m07:10:12.775 [crypto] Errorf -> ERRO 021�[0m [validator.test_vp0] Failed registering peer [test_vp0]: [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure]
�[33mvp0_1 |�[0m �[31m07:10:12.775 [crypto] Errorf -> ERRO 022�[0m [validator.test_vp0] Failed registering [test_vp0]: [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure]
�[33mvp0_1 |�[0m �[31m07:10:12.775 [crypto] RegisterValidator -> ERRO 023�[0m Failed registering validator [test_vp0] with name [test_vp0] [rpc error: code = 14 desc = grpc: RPC fai",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qzd:,,,,,,,,ChristopherFerris,zhangyijie,,,,,,,,,,,,,"14/Apr/17 11:41 AM;ChristopherFerris;[~zhangyijie] http://hyperledger-fabric.readthedocs.io/en/v0.6/Setup/TLSSetup.html is all there is in the docs. I suggest either upgrading to v1.0.0-alpha release or inquiring on rocket chat (https://chat.hyperledger.org). 

As for any prospect of updating the v0.6 documents, that release has been deprecated so that the community can focus on getting v1.0 released and solid as a rock. Sorry.",,,,,,,,,,,,,,,,,,,,,,,
Optimize the validate identity function in gossip mcs,FAB-2422,14985,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,angelo.decaro,elli-androulaki,elli-androulaki,22/Feb/17 7:40 AM,21/Apr/17 4:28 PM,26/Apr/18 6:50 AM,21/Apr/17 4:28 PM,,,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,,"As discussed 
 - check first if the provided identity is a member of the local msp and if so, process it with that
 - iterate afterwards over the channels the peer has joined
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2420,0|hzzzbt:l0g,,,,,,,,Clayton Sims,elli-androulaki,yacovm,,,,,,,,,,,,"09/Apr/17 11:10 AM;yacovm;This is done, right?
https://github.com/hyperledger/fabric/blob/master/peer/gossip/mcs/mcs.go#L238-L298",12/Apr/17 6:02 PM;elli-androulaki;Let's check if this is still feasible to optimise this operation.,13/Apr/17 3:44 PM;Clayton Sims;Trying to assign to one single component.  so removed gossip.    if its better to assign to gossip go ahead.  ,,,,,,,,,,,,,,,,,,,,,
Modify GetPKIidOfCert function of gossip mcs.go to derive its value from hash(PK),FAB-2411,14974,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,angelo.decaro,elli-androulaki,elli-androulaki,21/Feb/17 5:20 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,10/Apr/17 1:29 PM,,,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,,"This item requires modification of the GetPKIidOfCert function within mcs implementation in gossip, such that we derive the PKIid of a cert from the PK of the certificate and not of the hash of the SerializedIdentity (protobuf marshalled version of Certificate). 

The reason is that protobuf marshalling may be leading to different marshalled versions of the same certificate, and thus leading to different PKIids for the same certificate. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00udk:x9,,Sprint 12 - Crypto,Sprint 13 - Crypto,Sprint 14 - Crypto,Sprint 15 - Crypto,Sprint 16 - Crypto,,elli-androulaki,yacovm,,,,,,,,,master,,,true,"26/Feb/17 8:24 PM;yacovm;So, if I could iterate over the MSP managers and the local MSP and try to *DeserializeIdentity* with any of them, I'd get back an *Identity* but that doesn't have a method for getting the public key.

# What if I add to the *Identity* interface a method that returns the PKI-ID? After all, the *msp.identity* actually has a field that's an x509 certificate. 
# I see that the BCCSP MSP and the *msp.identity* struct are very tightly coupled, and that the only implementation of an *Identity* is currently the *identity*, right? 
# I assume what I can do to be as forward compatible as possible, is to prepend some string that identifies an identity that is derived from an x509 certificate (or that identifies a BCCSP MSP?) and then hash the concatenated byte slice, to avoid collisions of identities that have the same public key but are used in different PKIs? 

[~ales] [~angelo.decaro] Your thoughts are also welcome.","09/Apr/17 2:04 PM;yacovm;This one is now merged.
Thanks for the job, Angelo.",,,,,,,,,,,,,,,,,,,,,,
Policy manager not respecting absolute paths,FAB-2408,14971,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,21/Feb/17 4:40 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,10/Mar/17 6:27 PM,,,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qwx:,,,,,,,,jyellick,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
SDK should not allow different hashing algo to be used other than SHA256 when communication with the orderer,FAB-2405,14968,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jimthematrix,jimthematrix,21/Feb/17 2:58 PM,17/Mar/17 4:07 PM,26/Apr/18 6:50 AM,17/Mar/17 4:07 PM,,,,,,,WON'T FIX,,,fabric-sdk-node,,,,0,,,,,,,,,SHA256 is statically configured on the orderer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzbe:zzx,,Sprint 13 - SDK node,Sprint 14 - SDK node,,,,,jimthematrix,rickr,,,,,,,,,,,,,"09/Mar/17 6:26 PM;jimthematrix;[~jyellick], [~vpaprots@ca.ibm.com] I see that orderer.yaml now has a BCCSP section that specifies the hashing parameters among other things, that means it's configurable now right? ",17/Mar/17 4:07 PM;jimthematrix;closing as WONT-FIX per comment above,,,,,,,,,,,,,,,,,,,,,,
Change examples using SDK,FAB-2403,14966,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rickr,sodiaan,sodiaan,21/Feb/17 2:19 PM,22/Feb/17 1:31 PM,26/Apr/18 6:50 AM,22/Feb/17 1:31 PM,,,,,,,v1.0.0,,,fabric-sdk-java,,,,0,,,,,,,,,"Change examples using SDK in README.md

To use the SDK in your code, simply add the generated JAR file in your classpath. Once the JAR file is in your classpath, create a chain instance to interact with the network.
 Chain testChain = new Chain(""chain1""); 

This is wrong, Chain don't have public constructor.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qvt:,,,,,,,,rickr,sodiaan,,,,,,,,,,,,,22/Feb/17 1:30 PM;rickr;I updated the README.md to address this. Thank you for your input.,,,,,,,,,,,,,,,,,,,,,,,
MalformedURLException: unknown protocol: grpc,FAB-2402,14965,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,sodiaan,sodiaan,21/Feb/17 1:55 PM,21/Feb/17 2:06 PM,26/Apr/18 6:50 AM,21/Feb/17 2:06 PM,,,,,,,v1.0.0,,,fabric-sdk-java,,,,0,,,,,,,,,"I got an MalformedURLException when running the code

HFClient hfclient = HFClient.createNewInstance();
Chain testChain = hfclient.newChain(""chain1"");
testChain.setMemberServicesUrl(""grpc://localhost:7054"", null);

MalformedURLException: unknown protocol: grpc

dependencies:
compile group: 'io.grpc', name: 'grpc-all', version: '1.1.2'
compile group: 'org.hyperledger.fabric-sdk-java', name: 'fabric-sdk-java', version: '1.0-SNAPSHOT'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qvl:,,,,,,,,rickr,sodiaan,,,,,,,,,,,,,"21/Feb/17 2:06 PM;rickr;Members services does not use grpc . It uses https.
See the fabric-sdk-java/src/test/java/org/hyperledger/fabric/sdk/End2endIT.java  for a full example of deploying, invoking and installing chain code.",,,,,,,,,,,,,,,,,,,,,,,
HFC 0.6.5 fails to connect to membersrvc when running in Docker,FAB-2401,14964,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,aliblackwell,aliblackwell,21/Feb/17 10:24 AM,24/Aug/17 7:03 AM,26/Apr/18 6:50 AM,21/Feb/17 10:59 AM,,,,,,,v0.6,,,fabric-sdk-node,,,,0,,,,,,,,,"Member enrolment hangs indefinitely with no debug output provided to diagnose the error.

GRPC has protocol buffers & native code inside it, which may be responsible. It may also be due to a problem with the crypto module as some others seem to override it.

Does not appear to be limited to enrollment only as getTCertBatch and other method calls using GRPC also fail.

We have tried base images {{node:6.9}} and {{bitnami/node:6.9.0-r0}}


{noformat}
  crypto Using sha3-256 +6ms
  hfc Enrolling [req={""enrollmentID"":""admin"",""enrollmentSecret"":""Xurw3yU9zI0l""}] +206ms
  hfc [MemberServicesImpl.enroll] [{""enrollmentID"":""admin"",""enrollmentSecret"":""Xurw3yU9zI0l""}] +0ms
  hfc [MemberServicesImpl.enroll] Generating keys... +0ms
  hfc [MemberServicesImpl.enroll] Generating keys...done! +185ms
  hfc [MemberServicesImpl.enroll] Generating request! ""3059301306072a8648ce3d020106082a8648ce3d03010703420004482a38893a6f4f45874e9a22d305ec170f9ec92c0d68495980b9daaa73a194b40c8ad16f57aa7298c0e3fbb6e93fde1be6109df6e2328dd82c68e5758eaed783"" +3ms
  hfc [MemberServicesImpl.enroll] Adding signing key! +0ms
  hfc [MemberServicesImpl.enroll] Assding encryption key! +0ms
  hfc [MemberServicesImpl.enroll] [Contact ECA] {""ts"":{""seconds"":{""low"":1487672577,""high"":0,""unsigned"":false},""nanos"":0},""id"":{""id"":""admin""},""tok"":{""tok"":{""buffer"":{""type"":""Buffer"",""data"":[88,117,114,119,51,121,85,57,122,73,48,108]},""offset"":0,""markedOffset"":-1,""limit"":12,""littleEndian"":false,""noAssert"":false}},""sign"":{""type"":0,""key"":{""buffer"":{""type"":""Buffer"",""data"":[48,89,48,19,6,7,42,134,72,206,61,2,1,6,8,42,134,72,206,61,3,1,7,3,66,0,4,72,42,56,137,58,111,79,69,135,78,154,34,211,5,236,23,15,158,201,44,13,104,73,89,128,185,218,170,115,161,148,180,12,138,209,111,87,170,114,152,192,227,251,182,233,63,222,27,230,16,157,246,226,50,141,216,44,104,229,117,142,174,215,131]},""offset"":0,""markedOffset"":-1,""limit"":91,""littleEndian"":false,""noAssert"":false}},""enc"":{""type"":0,""key"":{""buffer"":{""type"":""Buffer"",""data"":[48,89,48,19,6,7,42,134,72,206,61,2,1,6,8,42,134,72,206,61,3,1,7,3,66,0,4,211,9,95,87,73,179,0,90,184,14,75,76,34,141,122,67,142,16,41,198,162,70,250,106,137,164,215,6,3,159,28,166,123,44,221,178,154,189,62,174,198,74,164,171,151,103,124,48,1,107,255,194,233,212,75,47,9,86,117,224,88,183,183,146]},""offset"":0,""markedOffset"":-1,""limit"":91,""littleEndian"":false,""noAssert"":false}},""sig"":null}  +0ms

(hangs indefinitely)
{noformat}

This is the output when running with GRPC debug

{{GRPC_VERBOSITY=DEBUG GRPC_TRACE=all node yourapp.js}}

{noformat}

I0221 10:32:06.259892515    1849 channel.c:231]              grpc_channel_create_call(channel=0x36e61a0, parent_call=(nil), propagation_mask=ffff, cq=0x36ffda0, method=/protos.ECAP/CreateCertificatePair, host=(null), deadline=gpr_timespec { tv_sec: 9223372036854775807, tv_nsec: 0, clock_type: 1 }, reserved=(nil))
I0221 10:32:06.262332450    1849 metadata_array.c:42]        grpc_metadata_array_init(array=0x7ffdd68d9560)
I0221 10:32:06.262382575    1849 metadata_array.c:42]        grpc_metadata_array_init(array=0x36ff648)
I0221 10:32:06.262392720    1849 metadata_array.c:42]        grpc_metadata_array_init(array=0x354d858)
I0221 10:32:06.262406165    1849 call.c:1690]                grpc_call_start_batch(call=0x35e1a10, ops=0x36062d0, nops=6, tag=0x36659a0, reserved=(nil))
I0221 10:32:06.262433118    1849 call.c:1366]                ops[0]: SEND_INITIAL_METADATA
I0221 10:32:06.262440332    1849 call.c:1366]                ops[1]: SEND_MESSAGE ptr=0x36e48e0
I0221 10:32:06.262446388    1849 call.c:1366]                ops[2]: SEND_CLOSE_FROM_CLIENT
I0221 10:32:06.262452997    1849 call.c:1366]                ops[3]: RECV_INITIAL_METADATA ptr=0x36ff648
I0221 10:32:06.262459165    1849 call.c:1366]                ops[4]: RECV_MESSAGE ptr=0x35ef7a8
I0221 10:32:06.262465746    1849 call.c:1366]                ops[5]: RECV_STATUS_ON_CLIENT metadata=0x354d858 status=0x354d870 details=0x354d878
I0221 10:32:06.262530992    1849 client_channel.c:109]       OP[client-channel:0x35e2018]: SEND_INITIAL_METADATA{key=3a 70 61 74 68 ':path' value=2f 70 72 6f 74 6f 73 2e 45 43 41 50 2f 43 72 65 61 74 65 43 65 72 74 69 66 69 63 61 74 65 50 61 69 72 '/protos.ECAP/CreateCertificatePair', key=3a 61 75 74 68 6f 72 69 74 79 ':authority' value=, key=67 72 70 63 2d 65 6e 63 6f 64 69 6e 67 'grpc-encoding' value=69 64 65 6e 74 69 74 79 'identity', key=67 72 70 63 2d 61 63 63 65 70 74 2d 65 6e 63 6f 64 69 6e 67 'grpc-accept-encoding' value=69 64 65 6e 74 69 74 79 2c 64 65 66 6c 61 74 65 2c 67 7a 69 70 'identity,deflate,gzip'} SEND_MESSAGE:flags=0x00000000:len=223 SEND_TRAILING_METADATA{} RECV_INITIAL_METADATA RECV_MESSAGE RECV_TRAILING_METADATA
I0221 10:32:06.262690022    1856 completion_queue.c:333]     grpc_completion_queue_next(cc=0x36ffda0, deadline=gpr_timespec { tv_sec: 9223372036854775807, tv_nsec: 0, clock_type: 1 }, reserved=(nil))
D0221 10:32:06.279838252    1859 dns_resolver.c:192]         dns resolution failed: {""created"":""@1487673126.279796172"",""description"":""OS Error"",""errno"":-5,""file"":""../src/core/lib/iomgr/resolve_address_posix.c"",""file_line"":115,""os_error"":""No address associated with hostname"",""syscall"":""getaddrinfo"",""target_address"":""""}
D0221 10:32:06.279860795    1859 dns_resolver.c:201]         retrying immediately
D0221 10:32:06.279880214    1859 connectivity_state.c:156]   SET: 0x36e62e8 client_channel: IDLE --> TRANSIENT_FAILURE [new_lb+resolver] error=0x7fd2f0001730 {""created"":""@1487673126.279870831"",""description"":""No load balancing policy"",""file"":""../src/core/ext/client_config/client_channel.c"",""file_line"":188}
D0221 10:32:07.297370847    1860 dns_resolver.c:192]         dns resolution failed: {""created"":""@1487673127.297344897"",""description"":""OS Error"",""errno"":-5,""file"":""../src/core/lib/iomgr/resolve_address_posix.c"",""file_line"":115,""os_error"":""No address associated with hostname"",""syscall"":""getaddrinfo"",""target_address"":""""}
D0221 10:32:07.297390643    1860 dns_resolver.c:201]         retrying immediately
D0221 10:32:07.297412393    1860 connectivity_state.c:156]   SET: 0x36e62e8 client_channel: TRANSIENT_FAILURE --> TRANSIENT_FAILURE [new_lb+resolver] error=0x7fd2f00018b0 {""created"":""@1487673127.297401869"",""description"":""No load balancing policy"",""file"":""../src/core/ext/client_config/client_channel.c"",""file_line"":188}
D0221 10:32:09.121116790    1861 dns_resolver.c:192]         dns resolution failed: {""created"":""@1487673129.121083749"",""description"":""OS Error"",""errno"":-5,""file"":""../src/core/lib/iomgr/resolve_address_posix.c"",""file_line"":115,""os_error"":""No address associated with hostname"",""syscall"":""getaddrinfo"",""target_address"":""""}
D0221 10:32:09.121139809    1861 dns_resolver.c:201]         retrying immediately
D0221 10:32:09.121160988    1861 connectivity_state.c:156]   SET: 0x36e62e8 client_channel: TRANSIENT_FAILURE --> TRANSIENT_FAILURE [new_lb+resolver] error=0x7fd2f0001cf0 {""created"":""@1487673129.121151085"",""description"":""No load balancing policy"",""file"":""../src/core/ext/client_config/client_channel.c"",""file_line"":188}

{noformat}


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qvd:,,,,,,,,aliblackwell,vdods,,,,,,,,,,,,,"21/Feb/17 10:58 AM;aliblackwell;This was not a bug in the system, rather in our docker-compose setup – we were using quotes where we shouldn't have been. Closing the issue!","24/Aug/17 7:03 AM;vdods;Alasdair – what in particular was wrongly quoted?  I'm experiencing the same issue, and I believe it's also a result of a misuse of docker.",,,,,,,,,,,,,,,,,,,,,,
Fabric Logs should not contain Security Sensitive Data,FAB-2389,14952,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,ashutosh_kumar,ashutosh_kumar,20/Feb/17 8:04 PM,14/Apr/17 11:48 AM,26/Apr/18 6:50 AM,14/Apr/17 11:47 AM,,,,,,,v0.6,WON'T FIX,,fabric-chaintool,,,,0,,,,,,,,,statement like *user %s is not logged in* or *user %s is logged in* should not appear in the log.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qsx:,,,,,,,,ashutosh_kumar,ChristopherFerris,,,,,,,,,,,,,14/Apr/17 11:48 AM;ChristopherFerris;could not find any evidence of the referenced code. closing.,,,,,,,,,,,,,,,,,,,,,,,
output from getTxTimeStamp from test chaincode is not readable when used in CLI Command,FAB-2381,14944,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,adc,Nishi,Nishi,20/Feb/17 6:15 PM,11/Apr/17 10:17 PM,26/Apr/18 6:50 AM,11/Apr/17 10:17 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"Command: peer chaincode query -C myc1 -n mycc -c '{""Args"":[""getTxTimeStamp""]}'
Output: Query Result: ��&zz��f맲�`�
                           :�>��۳X
���


code getTxTimeStamp as in testchaincode:

func (t *SimpleChaincode) getTxTimeStamp(stub shim.ChaincodeStubInterface) pb.Response {
        fmt.Printf(""- getTxTimestamp \n"")
        txTimeAsBytes, err := stub.GetBinding()
        if err != nil {
                return shim.Error(err.Error())
        }
       fmt.Printf("" txTimeBytes : %v"", txTimeAsBytes)
        return shim.Success(txTimeAsBytes)
}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qr5:,,,,,,,,denyeart,Nishi,,,,,,,,,,,,,"11/Apr/17 10:17 PM;denyeart;Timestamp is an object, to view it you would have to convert it to a string, for example:
time.Unix(response.Timestamp.Seconds, int64(response.Timestamp.Nanos)).String())

Closing.",,,,,,,,,,,,,,,,,,,,,,,
output from getBinding from test chaincode is not readable when used in CLI Command,FAB-2380,14943,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,adc,Nishi,Nishi,20/Feb/17 6:12 PM,11/Apr/17 10:14 PM,26/Apr/18 6:50 AM,11/Apr/17 10:14 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"vagrant@hyperledger-devenv:v0.3.0-ef962ca:/opt/gopath/src/github.com/hyperledger/fabric$ peer chaincode query -C myc1 -n mycc -c '{""Args"":[""getBinding""]}'
Query Result: 坦*�������e���i�oY��g��骹�J�

getBinding as in testchaincode:

func  (t *SimpleChaincode) getBinding(stub shim.ChaincodeStubInterface) pb.Response {
        fmt.Printf(""- getBinding \n"")
        bindingAsBytes, err := stub.GetBinding()
        if err != nil {
                return shim.Error(err.Error())
        }
       fmt.Printf("" binding from chaincode : %v"", bindingAsBytes)
        return shim.Success(bindingAsBytes)
}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qqx:,,,,,,,,denyeart,Nishi,,,,,,,,,,,,,11/Apr/17 10:14 PM;denyeart;Binding is binary and not meant to be viewed from a UI. Closing.,,,,,,,,,,,,,,,,,,,,,,,
CouchDB tests fail intermittently - resolve root cause,FAB-2378,14941,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,denyeart,denyeart,denyeart,20/Feb/17 4:39 PM,24/Feb/17 11:47 AM,26/Apr/18 6:50 AM,22/Feb/17 6:27 PM,,,,,,,,,,fabric-ledger,,,,0,,,,,,,,,"Receive intermittent errors during unit test such as:
08:55:26 [32munit-tests_1 [0m 2017/02/20 08:55:25 Couch DB error status code=500 error={""error"":""internal_server_error"",""reason"":""No DB shards could be opened."",""ref"":2413987899}

CouchDB tests were recently introduced to CI in:
https://gerrit.hyperledger.org/r/#/c/6091/

Disabled in:
https://jira.hyperledger.org/browse/FAB-2375
https://gerrit.hyperledger.org/r/#/c/6281/

Need to resolve root cause and then re-enable the tests.",,,,,,,,,,,,,,FAB-2375,FAB-2388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzfh:,,Sprint 12 - Ledger,,,,,,denyeart,,,,,,,,,,,,,,22/Feb/17 6:27 PM;denyeart;Will be fixed in FAB-2388,,,,,,,,,,,,,,,,,,,,,,,
CouchDB tests fail intermittently - need to disable in CI environment,FAB-2375,14938,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,denyeart,denyeart,denyeart,20/Feb/17 2:55 PM,22/Feb/17 3:27 PM,26/Apr/18 6:50 AM,20/Feb/17 4:40 PM,,,,,,,,,,fabric-ledger,,,,0,,,,,,,,,"Receive intermittent errors during unit test such as:
08:55:26 [32munit-tests_1 [0m 2017/02/20 08:55:25 Couch DB error status code=500 error={""error"":""internal_server_error"",""reason"":""No DB shards could be opened."",""ref"":2413987899}

CouchDB tests were recently introduced to CI in:
https://gerrit.hyperledger.org/r/#/c/6091/

We will disable the CouchDB tests in CI until the issue is resolved.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzfe:,,Sprint 12 - Ledger,,,,,,denyeart,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Fabric v0.6 PBFT is not working with 4 peers,FAB-2374,14936,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,baohua,jsong1230,jsong1230,20/Feb/17 12:30 PM,11/Apr/17 10:11 PM,26/Apr/18 6:50 AM,11/Apr/17 10:11 PM,,,,,,,v0.6,,,fabric-peer,,,,0,,,,,,,,,"I got the following error messages with PBFT setting (4 instances in AWS) in Fabric v0.6.
Is there any clue?
Thanks.
===================================================================
21:26:24.043 [peer] handleChat -> ERRO 27b Error handling message: Peer FSM cannot handle message (DISC_GET_PEERS) with payload size (0) while in state: created
21:26:25.656 [consensus/pbft] sendViewChange -> INFO 27c Replica 0 sending view-change, v:1, h:0, |C|:1, |P|:0, |Q|:1
21:26:25.656 [consensus/pbft] recvViewChange -> INFO 27d Replica 0 received view-change from replica 0, v:1, h:0, |C|:1, |P|:0, |Q|:1
21:26:25.656 [consensus/pbft] recvViewChange -> WARN 27e Replica 0 already has a view change message for view 1 from replica 0
21:26:27.686 [consensus/pbft] sendViewChange -> INFO 27f Replica 0 sending view-change, v:1, h:0, |C|:1, |P|:0, |Q|:1
21:26:27.687 [consensus/pbft] recvViewChange -> INFO 280 Replica 0 received view-change from replica 0, v:1, h:0, |C|:1, |P|:0, |Q|:1
21:26:27.687 [consensus/pbft] recvViewChange -> WARN 281 Replica 0 already has a view change message for view 1 from replica 0",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qpd:,,,,,,,,denyeart,jsong1230,ynamiki,,,,,,,,,,,,23/Feb/17 2:55 AM;ynamiki;[The comment in FAB-2221|https://jira.hyperledger.org/browse/FAB-2221?focusedCommentId=21128&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-21128] might also work for this.,"11/Apr/17 10:11 PM;denyeart;Issue does not occur on v1, closing.
If you have follow-on questions please use rocket.chat #fabric-questions channel.",,,,,,,,,,,,,,,,,,,,,,
[node-sdk] couchcb-fabricca-tests.js fix README and fix logging,FAB-2372,14934,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,20/Feb/17 10:03 AM,08/Mar/17 5:10 AM,26/Apr/18 6:50 AM,08/Mar/17 5:10 AM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,,,,,,,,,"1)   Readme contains an error. 

Is now: 
Run the associated unit test with the following command:

node test/*uni*t/couchdb-fabriccop-test.js

Should be:
Run the associated unit test with the following command:

node test/*integration*/couchdb-fabriccop-test.js


2. Can we change the way structures are logged for diagnosis:

Is now (for just one example):
logger.debug('constructor, options: ' + options);

which prints as: constructor, options: [object Object]

Could be:
logger.debug(util.inspect(options, {showHidden: false, depth: null}));

which prints as 
{ _url: 'http://localhost:5984',
  _name: 'member_db',
  _database:
   { info: [Function],
     replicate: [Function],
     compact: [Function],
     changes: [Function],
     follow: [Function],
     auth: [Function: auth],
     session: [Function: session],
     insert: [Function: insertDoc],
     get: [Function: getDoc],
     head: [Function: headDoc],
     copy: [Function: copyDoc],
     destroy: [Function: destroyDoc],
     bulk: [Function: bulksDoc],
     list: [Function: listDoc],
     fetch: [Function: fetchDocs],
     fetchRevs: [Function: fetchRevs],
     config: { url: 'http://localhost:5984', db: 'member_db' },
     multipart:
      { insert: [Function: insertMultipart],
        get: [Function: getMultipart] },
     attachment:
      { insert: [Function: insertAtt],
        get: [Function: getAtt],
        destroy: [Function: destroyAtt] },
     show: [Function: showDoc],
     atomic: [Function: updateWithHandler],
     updateWithHandler: [Function: updateWithHandler],
     search: [Function: viewSearch],
     spatial: [Function: viewSpatial],
     view: { [Function: viewDocs] compact: [Function] },
     viewWithList: [Function: viewWithList] } }
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qox:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
crash with badly constructed transaction payload,FAB-2368,14930,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,muralisr,muralisr,19/Feb/17 10:17 PM,20/Apr/17 12:24 AM,26/Apr/18 6:50 AM,20/Apr/17 12:24 AM,,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"We get a runtime panic if for some reason the Transaction does not contain a valid TransactionAction


{code:java}
panic: runtime error: index out of range

goroutine 146 [running]:
panic(0xb0eb40, 0xc420010100)
        /opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/protos/utils.GetActionFromEnvelope(0xc420072000, 0xc02, 0xc02, 0x0, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/protos/utils/proputils.go:472 +0xf4
github.com/hyperledger/fabric/core/ledger/kvledger/history/historydb/historyleveldb.(*historyDB).Commit(0xc421409100, 0xc4216b5e60, 0x36, 0xc4215cc500)
        /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/history/historydb/historyleveldb/historyleveldb.go:112 +0x294
github.com/hyperledger/fabric/core/ledger/kvledger.(*kvLedger).Commit(0xc4213f9300, 0xc4216b5e60, 0x1, 0x1)
        /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger.go:232 +0x3db
github.com/hyperledger/fabric/core/ledger/ledgermgmt.(*closableLedger).Commit(0xc421409220, 0xc4216b5e60, 0x0, 0x0)
        <autogenerated>:1 +0x54
github.com/hyperledger/fabric/core/committer.(*LedgerCommitter).Commit(0xc4214a3100, 0xc4216b5e60, 0x5, 0x2)
        /opt/gopath/src/github.com/hyperledger/fabric/core/committer/committer_impl.go:62 +0x121
github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).commitBlock(0xc4214a4cf0, 0xc4216b5e60, 0x1, 0x4, 0xc42166dfb8)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:397 +0x56
github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads(0xc4214a4cf0)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:294 +0x458
created by github.com/hyperledger/fabric/gossip/state.NewGossipStateProvider
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:148 +0x692
{code}

This happened because the nodejs client was out of sync on protos, but still, this should be handled gracefully.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhy:zz9xr6x,,Sprint 12 - Endorser,,,,,,muralisr,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Update node-sdk CI job to run end-to-end test from integratation folder,FAB-2360,14922,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,18/Feb/17 9:02 PM,20/Feb/17 3:27 AM,26/Apr/18 6:50 AM,20/Feb/17 3:27 AM,,,,,,,,,,,,,,0,,,,,,,,,"After merge of this patch (https://github.com/hyperledger/fabric-sdk-node/commit/691af6351dcd7b19c90572fce546990c1ccc626d) now end-to-end.js program is moved to test/integration folder.. This change impacted CI job failure as CI is referring to test/node/end-to-end.js. 

Refer new folder structure to run end-to-end.js in verify and Merge CI jobs.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qmh:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,20/Feb/17 3:26 AM;rameshthoomu;Patch has been submitted and merged https://gerrit.hyperledger.org/r/#/c/6229/,,,,,,,,,,,,,,,,,,,,,,,
Master is broken,FAB-2359,14921,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jyellick,jyellick,18/Feb/17 8:57 PM,13/Apr/17 11:31 PM,26/Apr/18 6:50 AM,13/Apr/17 11:30 PM,v1.0.0-alpha1,,,,,,v1.0.0-alpha1,,,,,,,0,,,,,,,,,"$ go test ./core/common/validation/
--- FAIL: TestValidateConfigTx (0.01s)
	config_test.go:56: ValidateTransaction failed, err Transaction is not valid. Got [], expected [G3GHI9vBQahR3+2QodO1RRSM9Xz3u3day6odPwjSKoI=]
FAIL
FAIL	github.com/hyperledger/fabric/core/common/validation	0.032s
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qm9:,,,,,,,,jyellick,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"Join failed with ""failure while looking up the ledger""",FAB-2357,14919,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,muralisr,muralisr,18/Feb/17 7:41 PM,11/Apr/17 8:28 PM,26/Apr/18 6:50 AM,11/Apr/17 8:28 PM,,,,,,,v1.0.0,,,fabric-endorser,,,,0,,,,,,,,,"Join command fails with

{code:java}
vagrant@hyperledger-devenv:v0.3.0-351f1b8:/opt/gopath/src/github.com/hyperledger/fabric$ peer channel join -b myc.block
2017-02-18 19:34:22.072 UTC [SW_BCCSP] createKeyStoreIfNotExists -> INFO 001 KeyStore path [/tmp] missing [false]: [<clean>]
{code}

Not all proposals are on channels (and have a ledger). Some proposals such as to the CSCC for join is ""channelless"".

In this instance, the failure is due to attempting to access the ledger for doing TX uniqueness checks. Given there's no ledger, we have to bypass ledger based uniqueness checks.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhy:zz9xm6,,,,,,,,muralisr,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Switch orderer Docker files to proper ENV vars,FAB-2348,14910,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,kchristidis,kchristidis,18/Feb/17 12:38 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,19/Feb/17 5:05 PM,,,,,,,,,,fabric-orderer,,,,0,kafka,,,,,,,,"In short, FAB-2162 configures the provisional bootstrapper via the `genesis.yaml` file and the `CONFIGTX_` ENV var prefix.

Before that, the bootstrapper would be set via the `orderer.yaml` file and the `ORDERER_` ENV var prefix.

The Kafka-related Docker environments set the orderer type via the ORDERER_ ENV var prefix and were not updated accordingly.

As a result, post FAB-2162, anyone bringing up any of the ordererXkafkaY networks was actually bringing up Y Kafka brokers without reason -- they were still running solo.

This changeset fixes this.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qk9:,,Sprint 12 - consensus,,,,,,kchristidis,,,,,,,,,,,,,,18/Feb/17 4:49 PM;kchristidis;https://gerrit.hyperledger.org/r/6187,,,,,,,,,,,,,,,,,,,,,,,
Registry information will not be written to fabric-ca-server.db,FAB-2347,14909,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,guhaihua,guhaihua,guhaihua,18/Feb/17 12:18 AM,21/Feb/17 8:25 AM,26/Apr/18 6:50 AM,21/Feb/17 8:25 AM,,,,,,,,,,fabric-ca,fabric-membersrvc,,,0,MembershipServices,,,,,,,,Registry init information in cmd/fabric-ca-server/config.go:122-136 will not be written to fabric-ca-server.db. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qk1:,,,,,,,,guhaihua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TOC items and some other content things,FAB-2346,14908,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,joshhus,joshhus,17/Feb/17 9:24 PM,25/Apr/17 3:52 PM,26/Apr/18 6:50 AM,25/Apr/17 3:52 PM,,,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,,"----------------------------------------------------------------------------------

B. Things that need updating in the current build / Barry's repo / build:

(I'm omitting from this list, all the ""WIP"" topics, b/c I think those are well-tracked already / have Jira issues.)

#     Release notes: http://fabric-rtd.readthedocs.io/en/latest/releases/
#     Nit / low FYI text in ""command"" table at the bottom too small: http://fabric-rtd.readthedocs.io/en/latest/chaincode/
#     TOC tweaks - a) ""Docker Compose"" caps. b) Are we going to use the ""smart contracts"" term – or instead ""chaincode applications"" only? c) ""CP Paper"" is redundant.
#     Notice – in some cases we point to doc that is NOT in the fabric/docs dir, but in other dirs, such as fabric/dev-setup.... There are some fabric/apis etc. directories also ... These will need some confirmation that the devs have updated their content in there for v1.0 ... e.g. this page still references Vagrant: http://fabric-rtd.readthedocs.io/en/latest/dev-setup/build/
#     Nit / low ... I don't like use of ""the blockchain"" ... there is no one ""blockchain"" that everyone uses. Even on one network, there are mutliple ""blockchains"" (ledgers with crypto-linked ""chain"" of blocks). So blockchain is a concept / abstraction, not a physical object. And can be used as a noun - ""we're using blockchain"" or an adjective - ""we're using a ""blockchain network"". See http://fabric-rtd.readthedocs.io/en/latest/carlease/ ...
#     While we're on car lease, let's at some point add title/registration tracking, and renewal / transfer of title/ownership, and insurance and registration renewal and proofs of purchase and not expired status. Also since we're selling the used car, also show me the carfax / vehicle history.
#     Usage FAQ: http://fabric-rtd.readthedocs.io/en/latest/FAQ/usage_FAQ/ (esp. ""validating node"" and the specific error message, which should be moved to Troubleshooting.)
#     ""Troubleshooting"" is currently limited to ""Docker Troubleshooting"" so it should either be renamed as such, or expanded to include other problems / error msgs. (It's also labeled ""optional"" ... which isn't really true for those having the problem. - delete ""optional"".) http://fabric-rtd.readthedocs.io/en/latest/asset_trouble/
#     TOC - ""Multi Channel"" - change to ""Channels"" and point to the new topic.
#     ""Consensus"" WIP http://fabric-rtd.readthedocs.io/en/latest/consensus/ ... text says that consensus is used as a ""broader term than ordering to include the entire transactional flow"" ... We should change that text--we don't want to reinvent the established concept of ""consensus algorithms"" or ""consensus protocols."" ... I think what we mean here is that depending on the plug-in used for the ordering component, it may or may not be a ""consensus"" algorithm/protocol. ... e.g. PFBT is a consensus protocol because it solves, to a degree, the consensus problem - which is when message recipients receive divergent conflicting messages, basically. (I'm not certain that SOLO and Kafka are also truly consensus protocols in that they solve the consensus problem - that a protocol orders stuff doesn't mean that it necessarily solves the consensus problem. ... I will have to look into that more.) If all agree, I can take the Consensus topic.
#     TOC: Appendix: ""Development process and code"" is limited to just ""Fabric development process and code"" so needs a rename.
#     TOC: Gerrit heading - there are a number of adjacent topics at same level as Gerrit heading that are also Gerrit topics.
#     Contributing - Legal Stuff - we have the signoff, but do we need to add the hooks for the ChangeID? ... (and is that really ""legal"" stuff? - scary.) http://fabric-rtd.readthedocs.io/en/latest/CONTRIBUTING/#legal-stuff
#     Nit / low - some of our links that take the user to an external site we should be opening a new browser tab for them. - someone goes to an external site, click a few times, and then can't find their way back to us easily. e.g. we link to https://jira.hyperledger.org/secure/Dashboard.jspa from http://fabric-rtd.readthedocs.io/en/latest/CONTRIBUTING/#coding-guidelines ... (and while we're there, it's fewer than eight, not less than, in Maintainers.)
# ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2254,0|hzzz8a:zzzzi,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,ChristopherFerris,joshhus,markparz,,,,,,,,,,,,"17/Feb/17 9:26 PM;joshhus;This was stuff found tangentially, during the ""move files from v0.6 directory examination, but separate tasks than that issue.  ",12/Apr/17 6:16 PM;ChristopherFerris;Do we still need this [~ibm.hlfab.aha.jira]?,"25/Apr/17 3:51 PM;markparz;Monster bug.... 
(I'm omitting from this list, all the ""WIP"" topics, b/c I think those are well-tracked already / have Jira issues.)

#     -Release notes: http://fabric-rtd.readthedocs.io/en/latest/releases/- Done
#     -Nit / low FYI text in ""command"" table at the bottom too small: http://fabric-rtd.readthedocs.io/en/latest/chaincode/- Redone
#     -TOC tweaks - a) ""Docker Compose"" caps. b) Are we going to use the ""smart contracts"" term – or instead ""chaincode applications"" only? c) ""CP Paper"" is redundant.- Gone / Done
#     -Notice – in some cases we point to doc that is NOT in the fabric/docs dir, but in other dirs, such as fabric/dev-setup.... There are some fabric/apis etc. directories also ... These will need some confirmation that the devs have updated their content in there for v1.0 ... e.g. this page still references Vagrant: http://fabric-rtd.readthedocs.io/en/latest/dev-setup/build/- Done
#     -Nit / low ... I don't like use of ""the blockchain"" ... there is no one ""blockchain"" that everyone uses. Even on one network, there are mutliple ""blockchains"" (ledgers with crypto-linked ""chain"" of blocks). So blockchain is a concept / abstraction, not a physical object. And can be used as a noun - ""we're using blockchain"" or an adjective - ""we're using a ""blockchain network"". See http://fabric-rtd.readthedocs.io/en/latest/carlease/ ...- Naming that is philosophical 
#     -While we're on car lease, let's at some point add title/registration tracking, and renewal / transfer of title/ownership, and insurance and registration renewal and proofs of purchase and not expired status. Also since we're selling the used car, also show me the carfax / vehicle history.- New requirement if desired to pursue
#     -Usage FAQ: http://fabric-rtd.readthedocs.io/en/latest/FAQ/usage_FAQ/ (esp. ""validating node"" and the specific error message, which should be moved to Troubleshooting.)- Page no longer exists, so assuming it has been updated.... Done
#     -""Troubleshooting"" is currently limited to ""Docker Troubleshooting"" so it should either be renamed as such, or expanded to include other problems / error msgs. (It's also labeled ""optional"" ... which isn't really true for those having the problem. - delete ""optional"".) http://fabric-rtd.readthedocs.io/en/latest/asset_trouble/- Living doc to be expanded... Done
#     -TOC - ""Multi Channel"" - change to ""Channels"" and point to the new topic.- Done
#     -""Consensus"" WIP http://fabric-rtd.readthedocs.io/en/latest/consensus/ ... text says that consensus is used as a ""broader term than ordering to include the entire transactional flow"" ... We should change that text--we don't want to reinvent the established concept of ""consensus algorithms"" or ""consensus protocols."" ... I think what we mean here is that depending on the plug-in used for the ordering component, it may or may not be a ""consensus"" algorithm/protocol. ... e.g. PFBT is a consensus protocol because it solves, to a degree, the consensus problem - which is when message recipients receive divergent conflicting messages, basically. (I'm not certain that SOLO and Kafka are also truly consensus protocols in that they solve the consensus problem - that a protocol orders stuff doesn't mean that it necessarily solves the consensus problem. ... I will have to look into that more.) If all agree, I can take the Consensus topic.- Exactly what we want to do, many spots that require 'consensus', or agreement. Consensus comes from the life cycle of the transaction, not just a protocol. Hence the topic, which Nick and I wrote. Done.
#     -TOC: Appendix: ""Development process and code"" is limited to just ""Fabric development process and code"" so needs a rename.- Reworked... Done
#    - TOC: Gerrit heading - there are a number of adjacent topics at same level as Gerrit heading that are also Gerrit topics.- reworked..Done
#     -Contributing - Legal Stuff - we have the signoff, but do we need to add the hooks for the ChangeID? ... (and is that really ""legal"" stuff? - scary.) http://fabric-rtd.readthedocs.io/en/latest/CONTRIBUTING/#legal-stuff- Yup, accurate
#    - Nit / low - some of our links that take the user to an external site we should be opening a new browser tab for them. - someone goes to an external site, click a few times, and then can't find their way back to us easily. e.g. we link to https://jira.hyperledger.org/secure/Dashboard.jspa from http://fabric-rtd.readthedocs.io/en/latest/CONTRIBUTING/#coding-guidelines ... (and while we're there, it's fewer than eight, not less than, in Maintainers.)- Not going to implement or worry about at this time. Done","25/Apr/17 3:52 PM;markparz;Went through all of these items, and verified we are good to close all these (or a a couple with different dispositions, of not going to fix, or open a requirement).... closing",,,,,,,,,,,,,,,,,,,,
Transaction in the glossary needs to be updated,FAB-2344,14906,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,markparz,markparz,17/Feb/17 7:14 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,15/Apr/17 2:49 PM,,,,,,,v1.0.0,,,fabric-docs,,,,0,Documentation,,,,,,,,"States - There are three unique types of transactions - deploy, invoke, and query.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2277,0|hzzz8a:zy,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,ChristopherFerris,joshhus,markparz,,,,,,,,master,,,true,17/Feb/17 10:18 PM;joshhus;What am I missing here? Don't see the actual update or suggested update. Will check the original emailed record. ,14/Apr/17 2:51 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/7279/,,,,,,,,,,,,,,,,,,,,,,
nil CodePackage is valid,FAB-2341,14903,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,greg.haskins,muralisr,muralisr,17/Feb/17 5:10 PM,17/Feb/17 8:57 PM,26/Apr/18 6:50 AM,17/Feb/17 8:57 PM,,,,,,,,,,fabric-endorser,,,,0,,,,,,,,,"Getting the following error from the peer on instantiate

{{Error: Error endorsing chaincode: rpc error: code = 2 desc = failure opening codepackage gzip stream: EOF}}

[~greg.haskins] pointed out ChaincodeDeploymentSpec.CodePackage is probably nil which turned out to be the case.

Deployment spec carries many information besides CodePackage. CodePackage will be nil in certain cases such as while instantiating (need the parameters of the chaincode such as name, version but the system will look for code on the peer). So nil CodePackage is a valid.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qix:,,,,,,,,greg.haskins,muralisr,,,,,,,,,master,,,true,17/Feb/17 5:14 PM;greg.haskins;Fix submitted: https://gerrit.hyperledger.org/r/#/c/6161/,,,,,,,,,,,,,,,,,,,,,,,
Review Use Cases for v1.0 changes,FAB-2337,14899,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,joshhus,joshhus,17/Feb/17 4:35 PM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,03/May/17 10:12 AM,v1.0.0,,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,,"This topic was moved from v0.6 doc; needs to be vetted for v1.0 changes, unless that's been done already (not to my knowledge). 

http://fabric-rtd.readthedocs.io/en/latest/biz/usecases/",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2277,0|hzzz8a:zzzy,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,ChristopherFerris,joshhus,,,,,,,,,master,,,true,"28/Apr/17 11:37 PM;ChristopherFerris;unclear to me why we wouldn't simply link to the wiki for the requirements WG which is developing use cases. None of the use cases documented for v0.6 actually mapped to implementation, so I think we should simply nuke this content and link to https://wiki.hyperledger.org/groups/requirements/use-case-inventory.",28/Apr/17 11:50 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8745/,,,,,,,,,,,,,,,,,,,,,,
CLI command to instantiate chaincode fails when argument -n has uppercase chars,FAB-2330,14892,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,Nishi,Nishi,17/Feb/17 3:10 PM,12/Apr/17 7:17 PM,26/Apr/18 6:50 AM,12/Apr/17 7:17 PM,,,,,,,v1.0.0,,,fabric-endorser,,,,0,,,,,,,,,"I could give uppercase chars to argument -n name of chaincode during install CLI command
peer chaincode install -C myc1 -n ccAPIDriver -v 1.0 -p github.com/hyperledger/fabric/examples/chaincodeAPIDriver

But using the same chanicode name for instantiate failed with following message

vagrant@hyperledger-devenv:v0.2.2-aaa998e:/opt/gopath/src/github.com/hyperledger/fabric$ peer chaincode instantiate -C myc1 -n ccAPIDriver -v 1.0 -p github.com/hyperledger/fabric/examples/chaincodeAPIDriver -c '{""Args"":[""""]}'
Error: Error endorsing chaincode: rpc error: code = 2 desc = Error starting container: API error (500): {""message"":""Error parsing reference: \""dev-jdoe-ccAPIDriver-1.0\"" is not a valid repository/tag""}


Had to change value in argument -n to lowercase in install and instantiate to make it work as follows:

peer chaincode install -C myc1 -n ccapidriver -v 1.0 -p github.com/hyperledger/fabric/examples/chaincodeAPIDriver
peer chaincode instantiate -C myc1 -n ccapidriver -v 1.0 -p github.com/hyperledger/fabric/examples/chaincodeAPIDriver -c '{""Args"":[""""]}'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qgh:,,,,,,,,denyeart,Nishi,wlahti,,,,,,,,,,,,"11/Apr/17 10:09 PM;denyeart;[~2020Nishi]
Does the problem still occur?","12/Apr/17 1:10 PM;Nishi;Chaincode could be installed and instantiated successfully with chaincode name having upper case characters.  Invoke and Query were also successfully on this instantiated chaincode having uppercase characters in installed name.

Tested with chaincodeName=MYCC0, testMYCC0 on marbles02 example.
Verified on commit level: *a076bbada80cbcda4825c62233f16290edb1d1b1*","12/Apr/17 1:59 PM;wlahti;[~Nishi] Unless I'm misreading your comment, you're saying this has been fixed and this JIRA item can be closed?",12/Apr/17 7:17 PM;wlahti;Chatted with Nishi and confirmed that the issue has been addressed and this JIRA item can be closed.,,,,,,,,,,,,,,,,,,,,
V1.0 Build verifiation timout and false positives,FAB-2328,14890,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,tuand,rickr,rickr,17/Feb/17 1:44 PM,13/Mar/17 1:20 PM,26/Apr/18 6:50 AM,13/Mar/17 1:20 PM,,,,,,,v1.0.0,,,fabric-sdk-java,,,,0,v1.0,,,,,,,,"https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/105/consoleFull
1 Figure a way for just the buildverification we can increase timeout .. maybe as long as two minutes 
2) Why is this reporting success when end2end failed.

13:27:38 -------------------------------------------------------
13:27:38  T E S T S
13:27:38 -------------------------------------------------------
13:27:38 Running org.hyperledger.fabric.sdk.End2endIT
13:27:38 log4j:WARN No appenders could be found for logger (io.netty.util.internal.logging.InternalLoggerFactory).
13:27:38 log4j:WARN Please initialize the log4j system properly.
13:27:38 log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
13:27:39 Feb 17, 2017 1:27:39 PM io.grpc.internal.ManagedChannelImpl <init>
13:27:39 INFO: [ManagedChannelImpl@687080dc] Created with target localhost:7051
13:27:41 Feb 17, 2017 1:27:41 PM io.grpc.internal.ManagedChannelImpl <init>
13:27:41 INFO: [ManagedChannelImpl@7b50df34] Created with target localhost:7053
13:27:41 Creating deployment proposal
13:27:41 Deploying chain code with a and b set to 100 and 200 respectively
13:27:53 Received 1 deployment proposal responses. Successful+verified: 0 . Failed: 1
13:27:53 Caught an exception
13:27:53 java.lang.Exception: Not enough endorsers :0.  Sending proposal to peer failed because of timeout(12000 milliseconds) expiration
13:27:53 	at org.hyperledger.fabric.sdk.End2endIT.setup(End2endIT.java:124)
13:27:53 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
13:27:53 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
13:27:53 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)


at the bottom

694085174 -DGERRIT_VERSION=2.12.2 ""-DGERRIT_EVENT_COMMENT_TEXT=Patch Set 2:
13:27:56 
13:27:56 reverify"" -DGERRIT_EVENT_ACCOUNT_EMAIL=cr22rc@gmail.com -DGERRIT_PATCHSET_NUMBER=2 ""-DGERRIT_CHANGE_OWNER_NAME=Tuan Dang"" clean deploy -V -B -q -Dmaven.repo.local=/tmp/r
13:27:56 Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-10T16:41:47+00:00)
13:27:56 Maven home: /w/tools/hudson.tasks.Maven_MavenInstallation/apache-maven-3.3.9
13:27:56 Java version: 1.8.0_121, vendor: Oracle Corporation
13:27:56 Java home: /usr/lib/jvm/java-8-openjdk-amd64/jre
13:27:56 Default locale: en_US, platform encoding: UTF-8
13:27:56 OS name: ""linux"", version: ""4.4.0-47-generic"", arch: ""amd64"", family: ""unix""
13:28:04 [description-setter] Description set: Build logs: <a href=""https://logs.hyperledger.org/jobbuilder/vex-yul-hyp-jenkins-2/fabric-sdk-java-verify-x86_64/105"">https://logs.hyperledger.org/jobbuilder/vex-yul-hyp-jenkins-2/fabric-sdk-java-verify-x86_64/105</a>
13:28:04 Finished: SUCCESS",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-686,0|hzzzcm:zz,,Sprint 5 - Consensus,Sprint 10 - Java SDK,Sprint 11 - Java SDK,,,,rickr,tuand,,,,,,,,,master,,,true,"20/Feb/17 3:43 PM;tuand;for jenkins to recognize that a test has failed, need to:
1. call maven with -Dmaven.test.failure.ignore=false . This makes the surefire plugin indicate errors during unit-test
1. set failsafe goal  <goal>verify</goal> . This makes the failsafe plugin indicate errors during IT tests","20/Feb/17 3:48 PM;tuand;To clear the timeout error, we need to increase org.hyperledger.fabric.sdk.proposal.wait.time  .  To make it easier for the jenkins script,  End2EndIT before executing the test case checks for environment variable FABRICSDKOVERRIDES which lists config values to be changed.

FABRICSDKOVEERIDES has format {quote}property1=value1,property2=value2 and so on ...{quote}",20/Feb/17 3:48 PM;tuand;https://gerrit.hyperledger.org/r/#/c/6155/,12/Mar/17 8:01 PM;rickr;Done ?,,,,,,,,,,,,,,,,,,,,
ConfigTest fails on Jenkins and some other machines,FAB-2320,14882,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,tuand,tuand,tuand,17/Feb/17 1:54 AM,20/Feb/17 3:49 PM,26/Apr/18 6:50 AM,20/Feb/17 3:49 PM,,,,,,,v1.0.0,,,fabric-sdk-java,,,,0,v1.0,,,,,,,,"The problem is that Config is a singleton and the other test suites are interfering with the setup of ConfigTest.

JUnit runs the test suites in random order so if it happens that ConfigTest runs first then everything runs. If not, like in the Jenkins case, then the test case fails",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00qe9:,,,,,,,,tuand,,,,,,,,,,master,,,true,20/Feb/17 3:49 PM;tuand;https://gerrit.hyperledger.org/r/#/c/6123/,,,,,,,,,,,,,,,,,,,,,,,
Peer Creation: Inconsistent Naming,FAB-2273,14835,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Honglei,pschnap,pschnap,16/Feb/17 7:12 PM,17/Mar/17 8:11 AM,26/Apr/18 6:50 AM,17/Mar/17 8:11 AM,,,,,,,v1.0.0,,,fabric-sdk-java,,,,0,v1.0,,,,,,,,"The naming of parameters in Peer for constructing a new instance is inconsistent/wrong:

    public Peer(String url, String pem) throws InvalidArgumentException {
        ...
    }

vs

    public static Peer createNewInstance(String name, String pem) throws InvalidArgumentException {
        return new Peer(name, pem);
    }

i.e. {{name}} vs {{url}} for the first parameter.

There _is_ a name field in the class, but that's not what's being set with the call to the constructor in the static function.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00q4h:,,,,,,,,pschnap,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"getHistoryforMarble, fails to print output when used in CLI Command",FAB-2272,14834,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,Nishi,Nishi,16/Feb/17 7:07 PM,19/Feb/17 8:27 PM,26/Apr/18 6:50 AM,17/Feb/17 3:19 AM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"Inside chaincodeAPiDriver a function ""getHistoryForMarble"" is implemented to call GetHistoryForKey on fabric/core/chaincode/shim/chaincode.go

When I try to invoek this function from CLI as:
peer chaincode invoke -C myc1 -n mycc -c '{""Args"":[""getHistoryForMarble"",""marble1""]}'

Expected Result: To see similar results as displayed on docker container logs as:
[{""TxId"":""a919b1eb-a569-4c03-9d8c-0bea86b95d4b"", ""Value"":{""docType"":""marble"",""id"":1,""name"":""marble1"",""color"":""blue"",""size"":35,""owner"":""tom""}}]

Actual Result:
No output value is returned from CLI command.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00q49:,,,,,,,,denyeart,Nishi,,,,,,,,,,,,,"17/Feb/17 3:19 AM;denyeart;Change the 'invoke' to 'query' and it will print out.
CLI only prints results for 'query'.","19/Feb/17 8:27 PM;Nishi;Verified successfully with query:

peer chaincode query -C myc1 -n mycc3 -c '{""Args"":[""getHistoryForMarble"",""marble1""]}' 
Query Result: [{""TxId"":""1INHI7EzYOV8FvdRa08WcL7hWgB3nK7sHBBpm4Gg0xI="", ""Value"":{""docType"":""marble"",""name"":""marble1"",""color"":""blue"",""size"":35,""owner"":""tom""}}]
",,,,,,,,,,,,,,,,,,,,,,
"returned value not from""GetChainInfo"" on qscc chaincode is not readable",FAB-2271,14833,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,Nishi,Nishi,16/Feb/17 6:30 PM,22/Feb/17 1:56 AM,26/Apr/18 6:50 AM,22/Feb/17 1:56 AM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"After a successful install, instantiate, invoke and query using test chainoce ""chaincodeAPIDriver"" issued a CLI command 

 peer chaincode query -C """" -n qscc -c '{""Args"":[""GetChainInfo"",""myc1""]}'

Expected Result: To see ChainInfo results.

Actual Result: �&�C8���f�o��=H�*�|�@���1��)��2l:����{��!�|��_

�w�p�L�'c�q*7+\ܢ���n����q�:��Y#���Ssx�&~gr",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00q41:,,,,,,,,denyeart,muralisr,Nishi,,,,,,,,,,,,"17/Feb/17 3:21 AM;denyeart;The problem is that the response is a serialized proto object which CLI doesn't understand.

[~muralisr] Is it possible for CLI to interpret the serialized proto and print the results in a nice format?","22/Feb/17 12:59 AM;muralisr;[~denyeart]  CLI is a tool with a narrow scope (mainly for dev activities). QSCC APIs are mainly for use from SDKs which will provide controlled access via covering APIs (as opposed to calling chaincode directly).  Users can pretty much call any chaincode from CLI and it would need deep introspection skills to decipher and pretty print arbitrary ""invoke/query"" calls. Beyond its scope, I'd say. ",22/Feb/17 1:56 AM;denyeart;Thanks [~muralisr].  I will close the work item and ask the tester to use SDK once the APIs are available via SDK.,,,,,,,,,,,,,,,,,,,,,
Test item,FAB-2268,14830,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,denyeart,denyeart,16/Feb/17 3:42 PM,16/Feb/17 7:10 PM,26/Apr/18 6:50 AM,16/Feb/17 7:10 PM,,,,,,,,,,fabric-docs,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00dzq:m6v6yu,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode deploy error messages not appearing correctly,FAB-2260,14822,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,chrism28,chrism28,16/Feb/17 1:44 AM,03/May/17 7:50 PM,26/Apr/18 6:50 AM,03/May/17 7:50 PM,,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"I am following the fabric 1.0 Getting Started guide here:
https://hyperledger-fabric.readthedocs.io/en/latest/gettingstarted/

which uses the file:
https://raw.githubusercontent.com/hyperledger/fabric/master/examples/sfhackfest/sfhackfest.tar.gz

I can successfully deploy the sample example_cc.go chaincode (using the Node SDK).

If however I edit example_cc.go and introduce a syntax error the deploy fails but does not display the root cause.
The error I see on the console output is:
{{error: [Peer.js]: GRPC client got an error response from the peer. Error: Failed to deploy chaincode spec(Error creating image: %!s(<nil>))
    at /home/blockchain/dev/hf/node_modules/grpc/src/node/src/client.js:434:17}}

So I have no way of knowing why the chaincode compilation failed.

(I've attached the full output from the deploy command)

",,,,,,,,,,,,,,,,,,,,16/Feb/17 1:43 AM;chrism28;deploy-output1.txt;https://jira.hyperledger.org/secure/attachment/10513/deploy-output1.txt,03/May/17 7:47 PM;wlahti;instantiate-cc-with-syntax-error-logs.txt;https://jira.hyperledger.org/secure/attachment/10702/instantiate-cc-with-syntax-error-logs.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00q21:,,,,,,,,chrism28,denyeart,muralisr,wlahti,,,,,,,,,,,05/Apr/17 6:45 PM;jimthematrix;the SDK is simply relaying the error message from the backend. the message has meta characters in it that seems to need fix in the peer code. moving this to the peer component.,"11/Apr/17 10:03 PM;denyeart;[~muralisr] [~chrism28]
Is this still an issue?","13/Apr/17 7:16 AM;muralisr;[~wlahti] There has been work done to improve logging at various levels (although your on the chaincode logging itself won't help with this one). In particular I'm thinking of the work to expose docker client logs  (see core.yaml -> attachStdout). Can you look to see if that helps debugging compilation/build issues and request closure please ?
",03/May/17 7:50 PM;wlahti;Tested this with the latest fabric and fabric-sdk-node. I introduced a syntax error in example_cc.go and I see the error message displayed correctly on both the fabric and fabric-sdk-node sides. See output in attached text document for further details. ,,,,,,,,,,,,,,,,,,,,
Orderer panics when kafka brokers restarted,FAB-2259,14820,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,suryalnvs,suryalnvs,15/Feb/17 10:03 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,28/Feb/17 4:13 PM,v1.0.0,,,,,,v1.0.0,,,fabric-orderer,,,,0,kafka,Quality,,,,,,,"Orderer is generating panics when kafka brokers are restarted while sending multiple transactions due to which the orderer is getting restarted.

Tested on Feb 15 2017 using:
commit: ad986bbf000ff34ebeb8e142cfcd747a01f12617
commit date: Wed Feb 15 15:02:34 2017 +0000

1. Using 1 orderer with 3 kafka brokers, 1 peer and 1 ca
2. cd $GOPATH/src/github.com/hyperledger/fabric/orderer/sampleclients/broadcast_timestamp
3. ./broadcast_timestamp -server 127.0.0.1:5005 -messages 100000
4. docker stop kafka0 kafka1 kafka2; sleep 5; docker start kafka0 kafka1 kafka2
5. After the restart of kafka brokers, a panic happens and orderer restarts and can be seen in orderer logs 

panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0x534dfe]

goroutine 70 [running]:
panic(0xa40840, 0xc42000c050)
	/opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/orderer/kafka.(*chainImpl).loop(0xc420072090)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/kafka/orderer.go:233 +0x1fe
created by github.com/hyperledger/fabric/orderer/kafka.(*chainImpl).Start
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/kafka/orderer.go:186 +0x567

Expected Result:
Even after the restart of kafka brokers, orderers needs to work as usual without getting restarted.

Actual Result:
Orderer is getting restarted after the restart of kafka brokers while sending transactions 

Here is the output of ""docker ps""  which shows the restart of kafka brokers and orderer.

vagrant@hyperledger-devenv:v0.2.2-aeb3f75:/opt/gopath/src/github.com/hyperledger/fabric/orderer/sample_clients/otd$ docker ps
CONTAINER ID        IMAGE                           COMMAND                  CREATED             STATUS              PORTS                              NAMES
4d6b096f090d        hyperledger/fabric-peer         ""peer node start""        4 minutes ago      Up 4 minutes       0.0.0.0:7061->7061/tcp             peer0
3cafcda235e5        hyperledger/fabric-orderer      ""orderer""                4 minutes ago      Up 3 minutes       0.0.0.0:5005->5005/tcp, 7050/tcp   orderer0
d2eee76ca8a7        hyperledger/fabric-kafka        ""/docker-entrypoint.s""   4 minutes ago      Up 3 minutes       9092-9093/tcp                      kafka2
76800afdd6c5        hyperledger/fabric-kafka        ""/docker-entrypoint.s""   4 minutes ago      Up 3 minutes       9092-9093/tcp                      kafka0
1697251266d1        hyperledger/fabric-kafka        ""/docker-entrypoint.s""   4 minutes ago      Up 3 minutes       9092-9093/tcp                      kafka1
171fcb0d3b75        rameshthoomu/fabric-ca-x86_64   ""sh -c 'fabric-ca ser""   4 minutes ago      Up 4 minutes       0.0.0.0:7054->7054/tcp             ca0
95ac7ff324bb        hyperledger/fabric-zookeeper    ""/docker-entrypoint.s""   4 minutes ago      Up 4 minutes       2181/tcp, 2888/tcp, 3888/tcp       zookeeper

========================================================================
Below are the successful cases:
========================================================================
1. When any one of the kafka brokers are restarted, the functioning of the orderer is as expected
2. When any  two of the three kafka brokers are restarted, the functioning of the orderer is as expected.



","Lenovo laptop running Linux, vagrant, docker containers for each orderer and kafka-broker",,,,,,,,,,,,,,,,FAB-2479,,,16/Feb/17 3:15 PM;suryalnvs;docker-compose.yml;https://jira.hyperledger.org/secure/attachment/10514/docker-compose.yml,15/Feb/17 10:03 PM;suryalnvs;output.log;https://jira.hyperledger.org/secure/attachment/10512/output.log,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzdq:x,,Sprint 12 - consensus,Sprint 13 - Consensus,,,,,kchristidis,scottz,suryalnvs,,,,,,,,master,,,true,"20/Feb/17 8:16 PM;kchristidis;Discussed this with [~scottz] and [~suryalnvs] today. This comes down to an out of range offset request error by the orderer's consumer:

{noformat}
The requested offset is outside the range of offsets maintained by the server for the given topic/partition.
{noformat}

It is out of range because the broker that we are accessing does not have access to the latest copy of the log.

Working on a combination of min.isr and req.acks settings to make this work.","25/Feb/17 10:45 PM;kchristidis;This should be taken care of with the fix put forward in:

https://jira.hyperledger.org/browse/FAB-2484 (CR: https://gerrit.hyperledger.org/r/#/c/6535/)

Please let me know if you keep seeing the issue, or if any more clarifications are needed.

If you confirm that the issue is addressed, let us mark it as Done.","28/Feb/17 4:13 PM;kchristidis;Marking this as Done based on the comments from Surya yesterday. If the issue persists, re-open it.",,,,,,,,,,,,,,,,,,,,,
[node-SDK] test.js restore old coverage report for gulp test-headless,FAB-2258,14819,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jjjjibm,jjjjibm,jjjjibm,15/Feb/17 9:15 PM,27/Feb/17 6:08 PM,26/Apr/18 6:50 AM,27/Feb/17 6:08 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,,,,,,,,,"Jim Zhang has re-organized the fabric-sdk-node test directory.  See issue FAB-2164
 and https://gerrit.hyperledger.org/r/#/c/5943/ for the story of the re-organization.

He also switched the unit test coverage report to a Coberatura xml file.  Insofar as the Coberatura report doesn't render in a browser (missing xml style file), we miss the old coverage report. 

Solution: 
The solution is to generate both.   I changed the test-headless reporter configuration to  reporters: [ 'lcov', 'json', 'text', 'text-summary', 'coberatura'].  


Edit: In my testing, whether I enter 'gulp test' or 'gulp test-headless', I see the old HTML coverage report.  ","Vlaunch VM running Ubuntu.  Firefox browser for reading coverage reports.
node-SDK: commit 691af6351dcd7b19c90572fce546990c1ccc626d
fabric: commit 4cc8d04f900cd2b96e8204c67f257345c3612aad
fabric-ca: commit 70ae36d9204b174efb85c3376aab9bf830153d04


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00q1d:,,,,,,,,jjjjibm,,,,,,,,,,master,,,true,"16/Feb/17 3:26 PM;jjjjibm;commit 59a96cef155d311d51f114e070f415a3f87e89e4
Author: jjjjibm <jcwolf@us.ibm.com>
Date:   Wed Feb 15 19:21:43 2017 -0500

    node-SDK FAB-2258 restore HTML coverage report

    This change sets the reporter configuration for gulp task
    test-headless to ['lcov', 'json', 'text', 'text-summary',
    'cobertura'], generating both HTML and XML coverage reports.

    Change-Id: Id08da35c54da51a97b50e36ad04989ccdd8b5f17
    Signed-off-by: jjjjibm <jcwolf@us.ibm.com>

",,,,,,,,,,,,,,,,,,,,,,,
Orderer startup locally is broken,FAB-2257,14818,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,15/Feb/17 8:28 PM,10/Mar/17 6:28 PM,26/Apr/18 6:50 AM,10/Mar/17 6:28 PM,,,,,,,,,,,,,,0,,,,,,,,,"In fixing the orderer docker startup, the orderer.yaml file was modified to include the LocalMSPDir.  This was required because without the variable in the yaml, the environment variable would not take effect.  However, this orderer.yaml variable was incorrectly set to ../msp when it was being set as a default in code to ../msp/sampleconfig.

Symptoms of this are:

$ ./orderer 
2017-02-15 15:24:32.938 EST [orderer/config] Load -> INFO 001 No orderer cfg path set, assuming development environment, deriving from go path
2017-02-15 15:24:32.939 EST [orderer/config] Load -> INFO 002 Setting ORDERER_CFG_PATH to: /home/yellickj/go/src/github.com/hyperledger/fabric/orderer
2017-02-15 15:24:32.940 EST [viperutil] EnhancedExactUnmarshal -> INFO 003 map[general:map[LocalMSPID:DEFAULT GenesisFile:./genesisblock ListenPort:7050 LogLevel:info MaxWindowSize:1000 ListenAddress:127.0.0.1 TLS:map[Certificate:<nil> RootCAs:<nil> ClientAuthEnabled:false ClientRootCAs:<nil> Enabled:false PrivateKey:<nil>] LocalMSPDir:../msp/ Profile:map[Enabled:false Address:0.0.0.0:6060] QueueSize:10 GenesisMethod:provisional LedgerType:ram] ramledger:map[HistorySize:1000] fileledger:map[Location:<nil> Prefix:hyperledger-fabric-ordererledger] kafka:map[Retry:map[Stop:60s Period:3s] Verbose:false TLS:map[PrivateKey:<nil> Certificate:<nil> RootCAs:<nil> Enabled:false]] sbftlocal:map[PeerCommAddr::6101 CertFile:sbft/testdata/cert1.pem KeyFile:sbft/testdata/key.pem DataDir:/tmp] genesis:map[DeprecatedBatchSize:99 MB SbftShared:map[N:1 F:0 RequestTimeoutNsec:1000000000 Peers:map[:6101:sbft/testdata/cert1.pem]] DeprecatedBatchTimeout:10s]]
2017-02-15 15:24:32.940 EST [orderer/config] completeInitialization -> INFO 004 Validated configuration to: &{General:{LedgerType:ram QueueSize:10 MaxWindowSize:1000 ListenAddress:127.0.0.1 ListenPort:7050 TLS:{Enabled:false PrivateKey: Certificate: RootCAs:[] ClientAuthEnabled:false ClientRootCAs:[]} GenesisMethod:provisional GenesisFile:./genesisblock Profile:{Enabled:false Address:0.0.0.0:6060} LogLevel:info LocalMSPDir:../msp/ LocalMSPID:DEFAULT} RAMLedger:{HistorySize:1000} FileLedger:{Location: Prefix:hyperledger-fabric-ordererledger} Kafka:{Retry:{Period:3s Stop:1m0s} Verbose:false Version:{version:[0 9 0 1]} TLS:{Enabled:false PrivateKey: Certificate: RootCAs:[] ClientAuthEnabled:false ClientRootCAs:[]}} Genesis:{DeprecatedBatchTimeout:10s DeprecatedBatchSize:103809024 SbftShared:{N:1 F:0 RequestTimeoutNsec:1000000000 Peers:map[:6101:sbft/testdata/cert1.pem]}} SbftLocal:{PeerCommAddr::6101 CertFile:sbft/testdata/cert1.pem KeyFile:sbft/testdata/key.pem DataDir:/tmp}}
panic: Failed initializing crypto [Could not load a valid ca certificate from directory ../msp/cacerts, err Could not read directory open ../msp/cacerts: no such file or directory, err ../msp/cacerts]

goroutine 1 [running]:
panic(0x970d00, 0xc42023a530)
	/usr/lib/go/src/runtime/panic.go:500 +0x1a1
main.main()
	/home/yellickj/go/src/github.com/hyperledger/fabric/orderer/main.go:90 +0x16f8
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00q15:,,,,,,,,jyellick,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
CouchDB name needs to be consistent with chain ID,FAB-2249,14809,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,chris.elder,chris.elder,chris.elder,15/Feb/17 3:18 PM,15/Feb/17 4:10 PM,26/Apr/18 6:50 AM,15/Feb/17 4:10 PM,,,,,,,,,,fabric-ledger,,,,0,,,,,,,,,The CouchDB database name need to be consistent with the chain ID.  This will require additional checks in addition to the normal couchdb restrictions and some remapping for characters allowed for the chain ID.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzh2:f,,,,,,,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
V1.0 need to create a chaincodeId for query,FAB-2240,14800,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,rickr,rickr,14/Feb/17 8:42 PM,28/Mar/17 5:32 PM,26/Apr/18 6:50 AM,28/Mar/17 5:32 PM,,,,,,,v1.0.0,,,fabric-sdk-java,,,,0,v1.0,,,,,,,,org.hyperledger.fabric.protos.peer.Chaincode  Needs a constructor for name and path.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-686,0|hzzzcm:zx,,Sprint 5 - Consensus,Sprint 10 - Java SDK,Sprint 11 - Java SDK,,,,isramos,rickr,,,,,,,,,,,,,18/Mar/17 3:05 PM;rickr;I think this has been addressed .. feel free to close,,,,,,,,,,,,,,,,,,,,,,,
LCCC chaincode record calls should not test for chaincode existence on file system,FAB-2220,14778,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,muralisr,muralisr,13/Feb/17 11:46 PM,07/Apr/17 3:17 PM,26/Apr/18 6:50 AM,07/Apr/17 3:17 PM,,,,,,,v1.0.0,,,fabric-endorser,,,,0,,,,,,,,,"LCCC exposes the following ""GET"" api. 
* getid - gets the name given name (basically ""exists"")
* getccdata - gets the record entry for the chaincode given name
* getdepspec - gets the deployment spec for the chaincode given name

Of these only the later needs the chaincode to be available on the peer. Other APIs should not look for the existence of the chaincode.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-37,0|hzzz8q:x,,Sprint 11 - Endorser,Sprint 12 - Endorser,Sprint 13 - Endorser,Sprint 14 - Endorser,Sprint 15 - Endorser,,muralisr,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
make peer error at Ubuntu 16.04,FAB-2218,14776,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,baohua,jsong1230,jsong1230,13/Feb/17 11:03 PM,09/Apr/17 9:02 PM,26/Apr/18 6:50 AM,09/Apr/17 9:02 PM,,,,,,,v0.6,,,fabric-devenv,,,,0,,,,,,,,,"I am trying to install Fabric peer v0.6 at 4 Ubuntu 16.04 machines to build a network.
But the following errors always come.
However, I can move to the directory peer and do ""go build""
What can I try more?

##### errors
build/bin/peer
CGO_CFLAGS="" "" CGO_LDFLAGS=""-lrocksdb -lstdc++ -lm -lz -lbz2 -lsnappy"" GOBIN=/opt/gopath/src/github.com/hyperledger/fabric/build/bin go install -ldflags ""-X github.com/hyperledger/fabric/metadata.Version=0.6.2-preview-snapshot-e29f1b6"" github.com/hyperledger/fabric/peer
can't load package: package github.com/hyperledger/fabric/peer: cannot find package ""github.com/hyperledger/fabric/peer"" in any of:
	/usr/lib/go-1.6/src/github.com/hyperledger/fabric/peer (from $GOROOT)
	($GOPATH not set)
Makefile:176: recipe for target 'build/bin/peer' failed
make: *** [build/bin/peer] Error 1",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ps9:,,,,,,,,baohua,jsong1230,,,,,,,,,,,,,"14/Feb/17 9:17 AM;baohua;Hi, song
From the error msg, seems u do not setup a GOPATH variable.

Pls read the official golang setup documentation, and setup those variable correctly.

https://golang.org/doc/install

Thanks!

",,,,,,,,,,,,,,,,,,,,,,,
"1st block in chain is block 0, not 1",FAB-2214,14772,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,manish-sethi,sanchezl,sanchezl,13/Feb/17 4:56 PM,28/Feb/17 6:39 PM,26/Apr/18 6:50 AM,28/Feb/17 6:39 PM,,,,,,,,,,fabric-ledger,,,,0,common-components,ledger,,,,,,,"# Initialize the fsblkstorage provider.
# Get ledger and add blocks.
# Close the provider.
# Re-initialize the fsblkstorage provider.
# Get the previously created ledger.
# ERROR: GetBlockchainInfo().Height is one less than it should be.",,,,,,,,,,,,FAB-1304,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00prd:,,,,,,,,sanchezl,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Failing behave scenarios/features on ppc64le,FAB-2209,14767,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harsha544,harsha544,harsha544,13/Feb/17 1:52 PM,14/Feb/17 7:06 PM,26/Apr/18 6:50 AM,14/Feb/17 7:06 PM,,,,,,,v1.0.0,,,,,,,0,behave,orderer.feature,,,,,,,"Following behave/orderer.features are consistently failing on ppc64le in v1.0 (Master Branch) :-

features/orderer.feature:27  Basic orderer function -- @1.1 Solo Orderer
features/orderer.feature:29  Basic orderer function -- @1.3 Solo Orderer
features/orderer.feature:63  Basic seek orderer function (Utilizing properties for atomic broadcast) -- @1.1 Solo Orderer
features/orderer.feature:65  Basic seek orderer function (Utilizing properties for atomic broadcast) -- @1.3 Solo Orderer
features/orderer.feature:96  Basic orderer function using oldest seek target -- @1.1 Solo Orderer ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pq9:,,,,,,,,bsmita,harsha544,,,,,,,,,master,,,true,13/Feb/17 3:09 PM;harsha544;The above JIRA Item is addressed by the changeset :- http://gerrit.hyperledger.org/r/5949 ,,,,,,,,,,,,,,,,,,,,,,,
Remove hardcoding of local MSP id in peer as soon as GOSSIP GETS the MSP ID from the genesis block,FAB-2200,14757,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ales,ales,ales,12/Feb/17 1:02 PM,12/Apr/17 6:18 PM,26/Apr/18 6:50 AM,12/Apr/17 6:18 PM,,,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00po1:,,,,,,,,ales,elli-androulaki,yacovm,,,,,,,,master,,,true,"07/Apr/17 5:08 PM;elli-androulaki;Hi, isn't this done?","09/Apr/17 11:12 AM;yacovm;[~ales] [~ellaki] This is done, right? ",,,,,,,,,,,,,,,,,,,,,,
infinite loop call ,FAB-2195,14752,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,muralisr,muralisr,11/Feb/17 7:20 PM,11/May/17 1:39 PM,26/Apr/18 6:50 AM,11/May/17 1:39 PM,v1.0.0-alpha1,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"Ran into this when trying end - to - end test


{code:java}
runtime: goroutine stack exceeds 1000000000-byte limit
fatal error: stack overflow

runtime stack:
runtime.throw(0xbc4f0e, 0xe)
	/opt/go/src/runtime/panic.go:566 +0x95
runtime.newstack()
	/opt/go/src/runtime/stack.go:1061 +0x416
runtime.morestack()
	/opt/go/src/runtime/asm_amd64.s:366 +0x7f

goroutine 227 [running]:
github.com/hyperledger/fabric/common/configtx/handlers/msp.(*MSPConfigHandler).DeserializeIdentity(0xc4213fd680, 0xc4214b5800, 0x3a6, 0x3a6, 0x0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/common/configtx/handlers/msp/config.go:78 fp=0xc44158e2a0 sp=0xc44158e298
github.com/hyperledger/fabric/common/configtx/handlers/msp.(*MSPConfigHandler).DeserializeIdentity(0xc4213fd680, 0xc4214b5800, 0x3a6, 0x3a6, 0x0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/common/configtx/handlers/msp/config.go:79 +0x49 fp=0xc44158e2f0 sp=0xc44158e2a0
github.com/hyperledger/fabric/common/configtx/handlers/msp.(*MSPConfigHandler).DeserializeIdentity(0xc4213fd680, 0xc4214b5800, 0x3a6, 0x3a6, 0x0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/common/configtx/handlers/msp/config.go:79 +0x49 fp=0xc44158e340 sp=0xc44158e2f0
github.com/hyperledger/fabric/common/configtx/handlers/msp.(*MSPConfigHandler).DeserializeIdentity(0xc4213fd680, 0xc4214b5800, 0x3a6, 0x3a6, 0x0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/common/configtx/handlers/msp/config.go:79 +0x49 fp=0xc44158e390 sp=0xc44158e340
github.com/hyperledger/fabric/common/configtx/handlers/msp.(*MSPConfigHandler).DeserializeIdentity(0xc4213fd680, 0xc4214b5800, 0x3a6, 0x3a6, 0x0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/common/configtx/handlers/msp/config.go:79 +0x49 fp=0xc44158e3e0 sp=0xc44158e390
{code}

The DeserializeIdentity on MSPConfigHandler calls itself. It should just be removed (or should provide an alternative implementation to the inherited msp.MSPManager's method).

[~jyellick] think this might be yours ?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pmx:,,,,,,,,jyellick,muralisr,,,,,,,,,master,,,true,"11/Feb/17 7:45 PM;jyellick;Yes, this slide in during a refactor, thanks for catching it!",,,,,,,,,,,,,,,,,,,,,,,
Deploy from node app fails on sfhackfest images,FAB-2173,14730,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nickgaski,Ratnakar,Ratnakar,10/Feb/17 3:36 PM,16/Apr/17 1:17 PM,26/Apr/18 6:50 AM,16/Apr/17 1:17 PM,,,,,,,v1.0.0,WON'T FIX,,fabric-docs,,,,0,quality,,,,,,,,"Solved by - https://gerrit.hyperledger.org/r/#/c/6217/1

After this change https://gerrit.hyperledger.org/r/#/c/5621/, merged into Node-sdk, 
the latest node app won't work against hackfestImages , those images expects Dockerfile which is not the case with latest node app.

Two ways to solve the problem :

1. pick the old node changes using the below command:
   {core}curl -OOOOOO https://raw.githubusercontent.com/hyperledger/fabric-sdk-node/e64871fb82efa171cb427acf32ebfa2707ecb939/examples/balance-transfer/{config.json,deploy.js,helper.js,invoke.js,query.js,package.json} {core}

2. Preferable and neat solution as [~jimthematrix] suggested, to use alpha branch
  {code}
curl -OOOOOO https://raw.githubusercontent.com/hyperledger/fabric-sdk-node/v1.0-alpha/examples/balance-transfer/{config.json,deploy.js,helper.js,invoke.js,query.js,package.json}
  {code}


Need the doc to be updated with the later command.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pi9:,,,,,,,,ChristopherFerris,markparz,Ratnakar,,,,,,,,,,,,"16/Feb/17 7:13 PM;markparz;[~jimthematrix] Is there a bug issue for this under SDK? this requires a code change as well as doc, this covers the doc change. ",16/Apr/17 1:17 PM;ChristopherFerris;I'm going to close this as the hackfest images are no longer relevant.,,,,,,,,,,,,,,,,,,,,,,
Peer command line help is not helpful,FAB-2167,14724,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,guoger,denyeart,denyeart,10/Feb/17 4:08 AM,14/Jun/17 3:05 AM,26/Apr/18 6:50 AM,14/Jun/17 3:05 AM,,,,,,,v1.0.0,,,fabric-peer,,,,0,help-wanted,,,,,,,,"I attempted ""peer chaincode"" looking for guidance on how to call instantiate, but it just provides the list of valid functions like 'instantiate' and a bunch flags. It doesn't indicate which flags are required for which functions, or any sample text.",,,,,,,,,,,,,,,,,FAB-4609,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pgx:,,,,,,,,binhn,ChristopherFerris,Clayton Sims,denyeart,guoger,muralisr,weeds,wlahti,,,master,,,true,"13/Apr/17 7:57 AM;muralisr;This is a big usability issue (the peer CLI interface is something that is used a lot and should have a good look and instructions). 

Going to leave this as 1.0 but going to bump up the priority as this is something that'll stick out badly.","20/Apr/17 12:16 AM;muralisr;This is a problem with all CLI commands. Adding ""help wanted"" tag. If no one picks it up will try to get to it in 1.0.","22/Apr/17 2:27 AM;guoger;[~muralisr] Hi, is this something that a newbie could start with?","22/Apr/17 4:13 AM;muralisr;[~guoger] I don't see why not. CLI is at the user level and easier for a beginner to the fabric to start to dig into it.

Also, some more information ... [~greg.haskins] introduced https://github.com/alecthomas/kingpin to handle command line for cryptogen https://gerrit.hyperledger.org/r/#/c/8269 ... and I believe the long time goal was to use that to clean up peer CLI as well.

I wonder  if this CR of cleaning up help can be a part of that. 

",22/Apr/17 7:42 AM;guoger;[~muralisr] Awesome! I only have some basic knowledge about v0.6 now but I'll give it a try! I'll keep you posted about progress. Could you shepherd this work? Thanks!,23/Apr/17 3:38 AM;muralisr;[~guoger] happy to help in any way I can. ,11/May/17 7:55 PM;ChristopherFerris;Hi [~guoger] - we should talk;) Ping me (@cbf) on RocketChat - I should be around this evening.,31/May/17 2:35 PM;Clayton Sims;Jay - how's it going on this one?,"31/May/17 3:14 PM;guoger;[~Clayton Sims] Still need couple of days to compile my notes into a doc. Will submit a draft patch over the weekend. Sorry for the delay, took some time to familiarize myself with the project :P",02/Jun/17 4:19 PM;weeds;Jay- Thanks! we are just really glad to have you on board. Welcome to the team!,"02/Jun/17 4:23 PM;muralisr;[~denyeart] Wouldn;t classify this as a ""High"" bug... let me lower it to medium and do change it back if you disagree.",07/Jun/17 11:56 AM;muralisr;[~guoger] any update on this ? We could do this post 1.0 if you like if [~denyeart] agrees.,"12/Jun/17 12:11 PM;guoger;[~muralisr] hi, sorry for the delay, I just posted a review here: https://gerrit.hyperledger.org/r/#/c/10463/
I refactored command implementation so flags could be categorized more easily and we need lesser code adding new flag. Essentially it's changed to use a map to maintain a list of flags, which could be assigned to specific sub-commands. So when adding new flag, we could just add that flag to the map, and refer to it using flag name as key at individual command impl. Otherwise, we need to duplicate code for every single one of commands using the flag.

I'm working on other parts of commands now, let me know what you think.

Yes we could do it post 1.0 if you think appropriate, although remaining work should be straightforward, as long as you agree with this approach. thx!","12/Jun/17 5:25 PM;wlahti;My initial notes after checking out [https://gerrit.hyperledger.org/r/#/c/10463/]:

general note: shouldn't channel be used in place of chain?
{code:java}
Flags:
-C, --chainID string The chain on which this command should be executed (default ""testchainid""){code}
invoke:
 - doesn't need path flag, does need channel flag added

instantiate:
 - doesn't need path flag

install
 - command isn't found by CLI

{code:java}
Usage:
peer chaincode [command]
Available Commands:
instantiate Deploy the specified chaincode to the network.
invoke Invoke the specified chaincode.
package Package the specified chaincode into a deployment spec.
query Query using the specified chaincode.
signpackage Sign the specified chaincode package
upgrade Upgrade chaincode.{code}
query:
 - doesn't need path flag, does need channel flag added

 ","12/Jun/17 6:03 PM;binhn;[~wlahti]  yes, we should change ""chainID"" to ""channelID"" and ""chain"" to ""channel"". ","12/Jun/17 9:36 PM;muralisr;[~wlahti] thanks much for the report.

[~guoger] The command line reporting is significantly better than before, thank you!  Can you make the corrections from [~wlahti] and [~binhn] review above please ?",13/Jun/17 7:57 AM;guoger;[~wlahti][~muralisr] I updated the patch to address comments and added `channel` subcommand as well. Appreciate your review!,,,,,,,
Panic upon instantiate without version provided,FAB-2166,14723,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,denyeart,denyeart,10/Feb/17 4:03 AM,13/Apr/17 7:54 AM,26/Apr/18 6:50 AM,13/Apr/17 7:54 AM,,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"I don't see instructions for how to run instantiate yet.  I attempted this:

peer chaincode instantiate -C myc1 -n marbles -c '{""Args"":[""init""]}'

Got a peer panic as follows:

panic: ---empty version---(chain=myc1,chaincode=marbles,version=,txid=863c198a-f07b-49bf-8527-971a2f3f37a1,syscc=false,proposal=0xc4214d2280

goroutine 896 [running]:
panic(0xaa1d80, 0xc42152f2c0)
	/opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/core/common/ccprovider.NewCCContext(0xc42154a358, 0x4, 0xc42152f248, 0x7, 0x0, 0x0, 0xc42142e000, 0x24, 0x0, 0xc4214d2280, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/core/common/ccprovider/ccprovider.go:137 +0x9b4
github.com/hyperledger/fabric/core/endorser.(*Endorser).callChaincode(0x117dc60, 0x7ff783a3c370, 0xc42142e1e0, 0xc42154a358, 0x4, 0xc2ba30, 0x16, 0xc42142e000, 0x24, 0xc4214d2280, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:118 +0x56e
github.com/hyperledger/fabric/core/endorser.(*Endorser).simulateProposal(0x117dc60, 0x7ff783a3c370, 0xc421527980, 0xc42154a358, 0x4, 0xc42142e000, 0x24, 0xc4214d2280, 0xc421527fb0, 0x11487e0, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:165 +0x16d
github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal(0x117dc60, 0x7ff783a3c370, 0xc421527980, 0xc4215279e0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:318 +0x433
github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler(0xb57660, 0x117dc60, 0x7ff783a3c370, 0xc421527980, 0xc4202bb4c0, 0x0, 0x0, 0x411b6c, 0x1160440, 0x7ff700000001)
	/opt/gopath/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:99 +0x27d
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC(0xc4201beb40, 0x1147000, 0xc4214cdc20, 0xc4213412c0, 0xc4200fd050, 0x11289a0, 0xc421527950, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:580 +0xa2d
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc4201beb40, 0x1147000, 0xc4214cdc20, 0xc4213412c0, 0xc421527950)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:737 +0x6ad
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc42156f400, 0xc4201beb40, 0x1147000, 0xc4214cdc20, 0xc4213412c0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:402 +0xab
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:403 +0xa3",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00dzq:m6v6yp,,,,,,,,denyeart,muralisr,,,,,,,,,master,,,true,10/Feb/17 12:18 PM;muralisr;Will fix and provide a test case shortly. Thanks [~denyeart],"13/Apr/17 7:54 AM;muralisr;peer chaincode instantiate -n mycc -c '{""Args"":[""init"", ""a"", ""100"", ""b"", ""200""]}' -o 127.0.0.1:7050
Error: Chaincode version is not provided for instantiate
Usage:
  peer chaincode instantiate [flags]

This is now fixed. Closing.",,,,,,,,,,,,,,,,,,,,,,
Deploy transaction content is too huge (about 70 MB) to display in Peer DEBUG logs.,FAB-2165,14722,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,Ratnakar,Ratnakar,10/Feb/17 3:58 AM,16/Feb/17 3:43 PM,26/Apr/18 6:50 AM,16/Feb/17 3:43 PM,,,,,,,v1.0.0,,,fabric-gossip,fabric-peer,,,0,quality,,,,,,,,"while deploying chaincode, a huge binary data (probably deploy payload message , which is about 70 MB) been displayed in debug console logs.


It is good to Display only the required information for debugging , instead of displaying the whole binary data.

A gist of logs for reference.

{code}

2017-02-09 23:01:08.936 UTC [protoutils] validateEndorserTransaction -> INFO 09b validateEndorserTransaction info: there are 1 actions
2017-02-09 23:01:08.936 UTC [protoutils] validateEndorserTransaction -> INFO 09c validateEndorserTransaction info: signature header is valid
2017-02-09 23:01:08.950 UTC [protoutils] ValidateTransaction -> INFO 09d ValidateTransactionEnvelope returns err %!s(<nil>)
2017-02-09 23:01:08.950 UTC [txvalidator] VSCCValidateTx -> INFO 09e [XXX remove me XXX] Transaction type, ENDORSER_TRANSACTION
2017-02-09 23:01:08.950 UTC [txvalidator] VSCCValidateTx -> INFO 09f Invocation of LCCC detected, no further VSCC validation necessary
2017-02-09 23:01:08.779 UTC [gossip/comm#-1] Send -> INFO 092 Entering, sending channel:""myc1"" tag:CHAN_AND_ORG dataMsg:<payload:<seqNum:1 data:""\n\206\001\010\001\022@}OMhd#{\221S\263\""\302\204\330\001
^\345\021W#\264\323\216\036\313\022e\240\265\244\346\271:p\216\224\373s\t\0238\363\2718\273\231y\274\""\215\004\256\315G\205#u\322^\350u\177\311\200\032@\tHJ\214\223\204./\000C\026\003\033AO\236B\017\277\22
1O\307\t\032\347A\177\037;*\003\222\213\224Q\231\020N\310\226y\264\264\033\354g\306gG\225\306f[V\310F:i\364\310\312\237\326\304\022\364\354\216\014\n\357\354\216\014\n\241\354\216\014\n\200\010\n8\010\003\
""\004myc1*$7ba34337-da31-45dc-998c-6b35f0d35f46:\010\022\006\022\004lccc\022\303\007\n\246\007\n\007DEFAULT\022\232\007-----BEGIN -----\nMIICjDCCAjKgAwIBAgIUBEVwsSx0TmqdbzNwleNBBzoIT0wwCgYIKoZIzj0EAwIw\nfz
ELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh\nbiBGcmFuY2lzY28xHzAdBgNVBAoTFkludGVybmV0IFdpZGdldHMsIEluYy4xDDAK\nBgNVBAsTA1dXVzEUMBIGA1UEAxMLZXhhbXBsZS5jb20wHhcNMTYxMTExMTcwNzAw\nWhcNMTcxM
TExMTcwNzAwWjBjMQswCQYDVQQGEwJVUzEXMBUGA1UECBMOTm9ydGgg\nQ2Fyb2xpbmExEDAOBgNVBAcTB1JhbGVpZ2gxGzAZBgNVBAoTEkh5cGVybGVkZ2Vy\nIEZhYnJpYzEMMAoGA1UECxMDQ09QMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE\nHBuKsAO43hs4JGpF
fiGMkB/xsILTsOvmN2WmwpsPHZNL6w8HWe3xCPQtdG/XJJvZ\n+C756KEsUBM3yw5PTfku8qOBpzCBpDAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYw\nFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYEFOFC\ndcUZ4es3ltiCgAVDoyLfVpP
IMB8GA1UdIwQYMBaAFBdnQj2qnoI/xMUdn1vDmdG1\nnEgQMCUGA1UdEQQeMByCCm15aG9zdC5jb22CDnd3dy5teWhvc3QuY29tMAoGCCqG\nSM49BAMCA0gAMEUCIDf9Hbl4xn3z4EwNKmilM9lX2Fq4jWpAaRVB97OmVEeyAiEA\n25aDPQHGGq2AvhKT0wvt08cX1GTGCI
bfmuLpMwKQj38=\n-----END -----\n\022\030\035\2519\310\035\332\231\207\366\003-\327\031iJ9\205!\013\201\225t\215U\022\231\344\216\014\032\224\344\216\014\n\303\007\n\246\007\n\007DEFAULT\022\232\007-----BEG
IN -----\nMIICjDCCAjKgAwIBAgIUBEVwsSx0TmqdbzNwleNBBzoIT0wwCgYIKoZIzj0EAwIw\nfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh\nbiBGcmFuY2lzY28xHzAdBgNVBAoTFkludGVybmV0IFdpZGdldHMsIEluYy4xDDA
K\nBgNVBAsTA1dXVzEUMBIGA1UEAxMLZXhhbXBsZS5jb20wHhcNMTYxMTExMTcwNzAw\nWhcNMTcxMTExMTcwNzAwWjBjMQswCQYDVQQGEwJVUzEXMBUGA1UECBMOTm9ydGgg\nQ2Fyb2xpbmExEDAOBgNVBAcTB1JhbGVpZ2gxGzAZBgNVBAoTEkh5cGVybGVkZ2Vy\nIEZh
YnJpYzEMMAoGA1UECxMDQ09QMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE\nHBuKsAO43hs4JGpFfiGMkB/xsILTsOvmN2WmwpsPHZNL6w8HWe3xCPQtdG/XJJvZ\n+C756KEsUBM3yw5PTfku8qOBpzCBpDAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYw\nFAYIKwYBBQU
HAwEGCCsGAQUFBwMCMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYEFOFC\ndcUZ4es3ltiCgAVDoyLfVpPIMB8GA1UdIwQYMBaAFBdnQj2qnoI/xMUdn1vDmdG1\nnEgQMCUGA1UdEQQeMByCCm15aG9zdC5jb22CDnd3dy5teWhvc3QuY29tMAoGCCqG\nSM49BAMCA0gAMEUCID
f9Hbl4xn3z4EwNKmilM9lX2Fq4jWpAaRVB97OmVEeyAiEA\n25aDPQHGGq2AvhKT0wvt08cX1GTGCIbfmuLpMwKQj38=\n-----END -----\n\022\030\035\2519\310\035\332\231\207\366\003-\327\031iJ9\205!
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pgp:,,,,,,,,Ratnakar,,,,,,,,,,,,,,"16/Feb/17 3:43 PM;Ratnakar;Not seeing this issue any more on latest commit level *3a61f6b61be404eb778d5d1be5179795eca218d0*.
Closing the issue.",,,,,,,,,,,,,,,,,,,,,,,
Fix async test error,FAB-2161,14718,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,grapebaba,grapebaba,10/Feb/17 2:34 AM,23/Apr/17 1:08 PM,26/Apr/18 6:50 AM,23/Apr/17 1:08 PM,,,,,,,v1.0.0,,,fabric-sdk-py,,,,0,,,,,,,,,Fix async test error,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pg1:,,,,,,,,grapebaba,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"""gulp test"" fails with default fabric-ca docker image",FAB-2159,14716,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,cdaughtr,yuki-kon,yuki-kon,10/Feb/17 1:13 AM,09/Mar/17 6:23 PM,26/Apr/18 6:50 AM,09/Mar/17 3:22 PM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"""gulp test"" with default fabri-ca Docker fails due to bug in test/unit/chain-fabriccop-tests.js.
The following error occurs when running ""chain-fabriccop-tests.js"".
The fabric-ca docker image uses server-config.json that has only one user: ""admin"".
""chain-fabriccop-tests.js"" must use that user in order to run successfully.

{noformat}
******************************************************************
$ cd fabric-sdk-node
$ HFC_LOGGING='{""debug"":""console""}' node test/unit/chain-fabriccop-tests.js

^[[32minfo^[[39m: Successfully constructed a winston logger with configurations debug=console
TAP version 13
# Attempt to use FabricCAServices
^[[34mdebug^[[39m: [FileKeyValueStore.js]: FileKeyValueStore.js - constructor
^[[34mdebug^[[39m: [crypto_ecdsa_aes]: Hash algorithm: SHA2, hash output size: 256
^[[32minfo^[[39m: [FabricCAClientImpl.js]: Successfully constructed Fabric CA service client: endpoint - {""protocol"":""http"",""hostname"":""localhost"",""port"":7054}
^[[32minfo^[[39m: [crypto_ecdsa_aes]: This class requires a CryptoKeyStore to save keys, using the store at %s
^[[34mdebug^[[39m: [FileKeyValueStore.js]: FileKeyValueStore.js - constructor
^[[34mdebug^[[39m: [crypto_ecdsa_aes]: _getKeyStore returning ks
^[[34mdebug^[[39m: [crypto_ecdsa_aes]: generateKey, store.setValue
^[[34mdebug^[[39m: [ecdsa/key.js]: ECDSA curve param X: d50b1bbe5ceadaa69e84e74ab660fb53082b081c0cd142dddd6b9c7b3a58d683
^[[34mdebug^[[39m: [ecdsa/key.js]: ECDSA curve param Y: b3e066b40e712de5b4f3ead8d8ba4b3e61277fda497c85db47015b1102f8119d
^[[34mdebug^[[39m: [FileKeyValueStore.js]: FileKeyValueStore -- setValue
not ok 1 Failed to use returned private key and certificate to construct a user object. Error: Error: Enrollment failed with errors [[{""code"":0,""message"":""sql: no rows in result set""}]]
  ---
    operator: fail
    at: process._tickCallback (internal/process/next_tick.js:103:7)
  ...
^[[34mdebug^[[39m: [Client.js]: setUserContext, user: undefined, skipPersistence: undefined
^[[34mdebug^[[39m: [Client.js]: setUserContext, Cannot save null userContext
not ok 2 Failed to load the user testUser from key value store. Error: Error: Cannot save null userContext.
  ---
    operator: fail
    at: process._tickCallback (internal/process/next_tick.js:103:7)
  ...

1..2
# tests 2
# pass  0
# fail  2


******************************************************************
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pfl:,,,,,,,,cdaughtr,yuki-kon,,,,,,,,,,,,,09/Mar/17 3:22 PM;cdaughtr;We've cleaned up the tests and have removed chain-fabriccop-tests.  Now fabric-ca-services-tests is used to test enrollment.,,,,,,,,,,,,,,,,,,,,,,,
multichannel Deploy is failing  on commit# 4ed176b,FAB-2138,14641,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,rameshthoomu,rameshthoomu,08/Feb/17 11:53 PM,22/Feb/17 2:23 PM,26/Apr/18 6:50 AM,22/Feb/17 2:23 PM,,,,,,,v1.0.0,,,,,,,0,,,,,,,,,"Deploy is failing on *commit#4ed176b:* (https://github.com/hyperledger/fabric/commit/4ed176bc119c36de963a712e96685bde9fcbe573)

Steps to reproduce: 
1) git checkout to commit #4ed176b from fabric repo
Build peer, orderer and ccenv images from above commit (make docker)
2) pull latest commit from fabric-ca repository and build CA image
3) modify the docker image reference to hyperledger and spinup the dokcer-compose script as mentioned in the gettingstarted.md document (https://github.com/hyperledger/fabric/blob/master/docs/gettingstarted.md)
4) After network is launched, exec into CLI container and execute deploy command as specified in the document.

*Below is the error log:*

Error: Error endorsing chaincode: rpc error: code = 2 desc = The creator certificate is not valid, err The supplied identity is not valid, Verify() returned x509: certificate signed by unknown authority

Attached is the error log for more information

Working Commit# f71d8a19fb183e54dc8944e2200560b4a5cc848f
{panel}
",,,,,,,,,,,,,,,,,,,,08/Feb/17 11:51 PM;rameshthoomu;4ed176b_failed_commit.txt;https://jira.hyperledger.org/secure/attachment/10426/4ed176b_failed_commit.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pax:,,,,,,,,rameshthoomu,,,,,,,,,,,,,,20/Feb/17 3:25 AM;rameshthoomu;Tested multichannel functionality on latest commits and observed this functionality is working as expected.,22/Feb/17 2:23 PM;rameshthoomu;Now the deploy tx divided into install and instantiate. This issue has been created on feb-8th and now the deploy process is changed. Closing this issue and tagging to FAB-2409,,,,,,,,,,,,,,,,,,,,,,
orderer service batching broken using new BATCHTIMEOUT,FAB-2137,14640,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,suryalnvs,scottz,scottz,08/Feb/17 11:40 PM,01/Jun/17 6:01 PM,26/Apr/18 6:50 AM,01/Jun/17 6:01 PM,v1.0.0-alpha2,,,,,,v1.0.0,,,fabric-orderer,,,,0,qa,reproduction-requested,,,,,,,"SIMPLE batching works with default values, but NOT when setting some environment variables to non-default values. This bug is for problems seen when changing the BatchTimeout.

Simple batching works ok when using default values:
solo orderer
default channel = testchainid
default batchtimeout = 10s
Broadcast/Send 4 TX or 14 TX
After 10 secs, the 4 transactions are batched and delivered as expected,
and the total number of blocks = 2.
 
Refer to FAB-2001 for problems when change the channel ID.
For this bug, we kept the default testchainid.
HOWEVER, for this bug:
Run same test, using ORDERER_GENESIS_BATCHTIMEOUT=20s
Instead of seeing the same result after waiting 20 secs for the 2nd batch,
we see a random number of batches (typically between 5 .. 13)
Consumer recvd a block, o 0 c 0 blkNum 1 numtrans 2
Consumer recvd a block, o 0 c 0 blkNum 2 numtrans 5
Consumer recvd a block, o 0 c 0 blkNum 3 numtrans 1
Consumer recvd a block, o 0 c 0 blkNum 4 numtrans 1
Consumer recvd a block, o 0 c 0 blkNum 5 numtrans 1
Consumer recvd a block, o 0 c 0 blkNum 6 numtrans 2
Send Duration (seconds):    0
Consumer recvd a block, o 0 c 0 blkNum 7 numtrans 2
Recovery Duration (secs):   2
waitSecs for last batch:    2
Error: Unexpected Block count 7 (expected 2)
Total deliveries received TX       [     14]
Total deliveries received Blocks  [      7]

Same goes for Kafka (works with default timeout, but not if we change it):
Run same test, using ORDERER_GENESIS_BATCHTIMEOUT=20s and
OTE_TXS=14 ORDERER_GENESIS_ORDERERTYPE=kafka OTE_KAFKABROKERS=3
and we see incorrect batches data like this:
Consumer recvd a block, o 0 c 0 blkNum 1 numtrans 1
Consumer recvd a block, o 0 c 0 blkNum 2 numtrans 2
Consumer recvd a block, o 0 c 0 blkNum 3 numtrans 5
Consumer recvd a block, o 0 c 0 blkNum 4 numtrans 2
Consumer recvd a block, o 0 c 0 blkNum 5 numtrans 2
Consumer recvd a block, o 0 c 0 blkNum 6 numtrans 2
Error: Unexpected Block count 6 (expected 2)
Total deliveries received TX on each ordr      [     14]
Total deliveries received Blocks on each ordr  [      6]
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ocn:,,,,,,,,ChristopherFerris,kchristidis,scottz,suryalnvs,,,,,,,,,,,"09/Feb/17 12:18 AM;scottz;Test failures found with
commit 5d9e4ede298ab646ac918dc5b034c7d319dd1d9a
commit date: Mon Jan 30 14:34:38 2017 +0000","25/Feb/17 11:14 PM;kchristidis;Scott, can you confirm whether this issue persists? If so, I'll look into it.","28/Feb/17 11:43 PM;scottz;Test still fails, using Feb 27 commit # 29d7fc035df697a68d271d628e693c556354486f . We see different results with each test invocation, but typically see 6 - 9 blocks delivered, each containing one or two transactions.

vagrant@hyperledger-devenv:v0.3.0-8d582eb:/opt/gopath/src/github.com/hyperledger/fabric/bddtests/regression/go/ote$ OTE_KAFKABROKERS=2 CONFIGTX_ORDERER_ORDERERTYPE=kafka OTE_TXS=11 CONFIGTX_ORDERER_BATCHTIMEOUT=20s ./ote
...
TEST <commandline> OTE_TXS=11 CONFIGTX_ORDERER_ORDERERTYPE=kafka OTE_KAFKABROKERS=2 ote  RESULT=FAILED: TX Req=11 BrdcstACK=11 NACK=0 DelivBlk=[7] DelivTX=[11] numChannels=1 batchSize=10
","11/May/17 10:07 PM;ChristopherFerris;[~scottz] is this still an issue? Please reverify, thanks. Also, is this in the automated CI test suite?","01/Jun/17 5:56 PM;suryalnvs;+*Pre-req:*+
 * Generate certs using the cryptogen tool for the clients and orderer
 * Launch the network with following configuration:
 _2 Orderers (with BATCHTIMEOUT=20s)_
 _3 Kafka brokers (3 zookeepers)_

*_Steps to run the test:_*
 1. Create a channel 'mychannel'

2. Start the deliver clients for two orderers
 *Terminal 1:*
{code:java}
 /deliver_stdout_msp -server localhost:7050 -tls -cafile ./crypto-config/ordererOrganizations/example.com/orderers/orderer0.example.com/tls/ca.crt -chainID mychannel -overridehostname orderer0.example.com -mspDir ./crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/msp -mspID Org1MSP -seek -2
{code}
*Terminal 2:*
{code:java}
 ./deliver_stdout_msp -server localhost:8050 -tls -cafile ./crypto-config/ordererOrganizations/example.com/orderers/orderer1.example.com/tls/ca.crt -chainID mychannel -overridehostname orderer1.example.com -mspDir ./crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/msp -mspID Org1MSP -seek -2
{code}
3. Start broadcast clients
     Send 110 transactions to the Orderer0 and Orderer1

*Terminal 3:*
{code:java}
./broadcast_timestamp_msp -server localhost:7050 -chainID mychannel -messages 110 -tls -cafile ./crypto-config/ordererOrganizations/example.com/orderers/orderer0.example.com/tls/ca.crt -chainID mychannel -overridehostname orderer0.example.com -mspDir ./crypto-config/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp -mspID Org1MSP
{code}
*Terminal 4:*
{code:java}
./broadcast_timestamp_msp -server localhost:8050 -chainID mychannel -messages 110 -tls -cafile ./crypto-config/ordererOrganizations/example.com/orderers/orderer1.example.com/tls/ca.crt -chainID mychannel -overridehostname orderer1.example.com -mspDir ./crypto-config/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp -mspID Org1MSP
{code}
*OUTPUT:*
 As a result of the above execution here is the result (seen in Ternminal 1 & 2)
{code:java}
Date is 2017-06-01 17:48:04.866544776 +0000 UTC
Transactions received in block : 1
Date is 2017-06-01 17:49:13.941226096 +0000 UTC
Transactions received in block : 100
Date is 2017-06-01 17:49:14.750159895 +0000 UTC
Transactions received in block : 100
Date is 2017-06-01 17:49:34.766522326 +0000 UTC
Transactions received in block : 20
{code}
{color:#14892c}*we see the blocks are getting batched up as per batchtimeout configuration and issue is no more reproducible, hence closing this issue.*
{color}

*NOTE:*
 * Tested on alpha2 based code/commit level
 * Please refer more details here, https://jira.hyperledger.org/browse/FAB-3993, [https://gerrit.hyperledger.org/r/#/c/9625/], source files are attached to FAB-2001",,,,,,,,,,,,,,,,,,,
"Chaincode query fails if the querying peer is not Gossip Leader, even though peer has joined the channel",FAB-2136,14639,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,AdnanChoudhury,AdnanChoudhury,08/Feb/17 11:11 PM,09/Feb/17 4:40 PM,26/Apr/18 6:50 AM,09/Feb/17 4:38 PM,,,,,,,,,,fabric-gossip,fabric-quality,,,0,,,,,,,,,"Steps to reproduce:
1. Following the guideline in the ""getting started"" document (http://hyperledger-fabric.readthedocs.io/en/latest/gettingstarted/) setting up a 3 peer network. The only exception is peer2 has ""PEER_GOSSIP_ORGLEADER=false"". Docker-compose is attached. [^docker-compose-goosip-error.yaml] 
2. From the same doc ( (http://hyperledger-fabric.readthedocs.io/en/latest/gettingstarted/), channel is created, all 3 peers join it, deploy and invoke the chaincode.
3. Querying the chaincode from peer0, peer1 works, but querying from peer2 gives error:

{code:java}
Error: Error endorsing query: rpc error: code = 2 desc = failed to obtain cds for mycc - transaction not found mycc/myc2
{code}

Expected: 
Query passes with query result ""90"" for the given example.

Note: The images used are the sfhackfest images. ",,,,,,,,,,,,,,,,,,,,08/Feb/17 11:10 PM;AdnanChoudhury;docker-compose-goosip-error.yaml;https://jira.hyperledger.org/secure/attachment/10425/docker-compose-goosip-error.yaml,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00pah:,,,,,,,,AdnanChoudhury,vishwass,,,,,,,,,,,,,"09/Feb/17 4:40 PM;AdnanChoudhury;As all the three peers belong to different organizations, and each of them are the sole peers from their respective orgs, all of them have to be leaders. ",,,,,,,,,,,,,,,,,,,,,,,
marbles02 chaincode fails to delete a marble,FAB-2133,14636,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,denyeart,Nishi,Nishi,08/Feb/17 6:33 PM,10/Feb/17 10:26 PM,26/Apr/18 6:50 AM,10/Feb/17 10:26 PM,,,,,,,,,,fabric-ledger,,,,0,,,,,,,,,"Using the latest marbles chaincode, deleting a marbles does not delete a marble.

Deleting a marble threw ""Failed to decode JSON.."" error from code snippet below.

 err = json.Unmarshal([]byte(jsonResp), &marbleJSON)
 if err != nil {
                jsonResp = ""{\""Error\"":\""Failed to decode JSON of: "" + marbleName + ""\""}""
                return shim.Error(jsonResp)
        }

Upon observation, code to json.Unmarshal was taking an empty string (jsonResp) upon changing it to valAsBytes returned from GetState a marble could be deleted successfully.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhy:zzzzp,,Sprint 11 - Ledger,,,,,,Nishi,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] generated documentation does not show all classes and methods,FAB-2109,14612,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jjjjibm,jjjjibm,jjjjibm,07/Feb/17 9:33 PM,08/Feb/17 3:25 PM,26/Apr/18 6:50 AM,08/Feb/17 3:23 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"Comparing fabric-sdk-node/coverage/lcov-report to fabric-sdk-node/docs/gen, it is clear fabric-sdk-node contains more classes and methods than are documented.

fabric-sdk-node/buld/tasks/doc.js has not been updated in awhile. 

Chat with Jim Zhang:
jjjjibm 3:35 PM
Looking at build/tasks/doc.js, I see files not included:
fabric-client/lib/msp/*
fabric-client/lib/config.fs,
.. EventHub.js
.. REmote.js
.. hash.js
.. utils-x509.js
.. utils.js 

fabric-client/lib/impl/ bccsp_pkcs11.js
fabric-client/lib/impl/ecdsa/*
fabric-client/lib/impl/aes/*
Any particular reason?
Maybe the ""utils"" don't need to be included?

jimthematrix 4:13 PM 
only these need to be added:

.. EventHub.js
.. REmote.js

fabric-client/lib/impl/ bccsp_pkcs11.js
fabric-client/lib/impl/ecdsa/*
fabric-client/lib/impl/aes/*

jjjjibm 4:24 PM
No MSP?

jimthematrix 4:25 PM
that's internal class

jjjjibm 4:25 PM
Cool, thanks

jimthematrix 4:25 PM
not ready as API for v1.0
yw

How to recreate:
1.Clone fabric-sdk-node
2.gulp doc to generate doc  fabric-sdk-node/docs
3.gulp test to generate test coverage report fabric-sdk-node/coverage
4.compare coverage report to generated documents",Ubuntu vlaunch VM (which has no bearing on this issue.; ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhp:zm,,Sprint 11 - SDK node,,,,,,jjjjibm,,,,,,,,,,master,,,true,"07/Feb/17 11:33 PM;jjjjibm;commit 5e43972eb9acf34be55848826a152ad8b07c2e2a
Author: jjjjibm <jcwolf@us.ibm.com>
Date:   Tue Feb 7 18:27:33 2017 -0500

    node-SDK Fix FAB-2109 doc.js

    Generated documentation for node SDK is controlled by file fabric-sdk-node/build/tasks/doc.js.
    This file had not been updated recently.
    The fix is to add pathnames to gulp.src in doc.js.
    See FAB-2109 for a discussion of which files to include.

    Change-Id: I84d381354026686996d7f6413dd13e77950677a5
    Signed-off-by: jjjjibm <jcwolf@us.ibm.com>
","08/Feb/17 3:25 PM;jjjjibm;commit 5e43972eb9acf34be55848826a152ad8b07c2e2a
Author: jjjjibm <jcwolf@us.ibm.com>
Date:   Tue Feb 7 18:27:33 2017 -0500

    node-SDK Fix FAB-2109 doc.js

    Generated documentation for node SDK is controlled by file fabric-sdk-node/build/tasks/doc.js.
    This file had not been updated recently.
    The fix is to add pathnames to gulp.src in doc.js.
    See FAB-2109 for a discussion of which files to include.

    Change-Id: I84d381354026686996d7f6413dd13e77950677a5
    Signed-off-by: jjjjibm <jcwolf@us.ibm.com>
",,,,,,,,,,,,,,,,,,,,,,
Marbles Chaincode needs to explicity maintain PartialCompositeKey indices,FAB-2085,14588,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,balaji.viswanathan,balaji.viswanathan,balaji.viswanathan,07/Feb/17 7:18 AM,08/Feb/17 3:33 PM,26/Apr/18 6:50 AM,08/Feb/17 3:32 PM,,,,,,,v1.0.0-alpha1,,,fabric-ledger,,,,0,,,,,,,,,"Chaincode needs to maintain the PartialCompositeKey index explicitly on Delete or Update of a key/value in state
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhy:zzzzo,,Sprint 11 - Ledger,,,,,,balaji.viswanathan,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
chaincode-chaincode invocation needs to allow calling system chaincode,FAB-2081,14584,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,muralisr,muralisr,06/Feb/17 10:56 PM,20/Apr/17 12:37 AM,26/Apr/18 6:50 AM,20/Apr/17 12:37 AM,,,,,,,v1.0.0,,,fabric-endorser,,,,0,,,,,,,,,Chaincode to chaincode invocation works only if the called chaincode is a user chaincode. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ozt:,,,,,,,,angelo.decaro,denyeart,muralisr,,,,,,,,master,,,true,"01/Mar/17 3:07 PM;angelo.decaro;[~muralisr] may you put more details in to better understand under which condition that should happen? For example, a reader of the channel should be allowed to do that or it needs to be an admin? What about chainless scenarios?","02/Mar/17 6:27 PM;muralisr;[~angelo.decaro] I'm not sure one size will fit all. Would it be better If we divide access into two parts
# At the system chaincode level - ""can this SCC be called from Chaincode at all""  and ""can this SCC called by an external user at all (say from SDK)"" ?
# Within the Invoke - ACL using based on proposal

With that, we can use (1) to completely eliminate cases where a SCC should not be called all except by the fabric (escc, vscc, etc). That will leaver user written SCCs that are written specifically for such accesses. Then we can leave (2) to the user.

Now, (1) is not currently there in the system chaincode framework. But we can easily add support for that as attributes to the SCC.

For now I'll create two tasks for this (1)  to get the mechanics of the bug fixed so CC-SCC call can be done (2) to implement the security aspects.

[~binhn] ","11/Apr/17 9:53 PM;denyeart;[~muralisr] [~binhn] [~adc]
Is this needed for 1.0.0? Is it a defect or new feature?","20/Apr/17 12:36 AM;muralisr;per my 02/Mar/17 comment above this is being handled in two parts. This is a dup of the following
* https://jira.hyperledger.org/browse/FAB-2997 - takes care of ""don't invoke some scc thru proposals"" and ""don't invoke some scc thru cc2cc""
* ACL checks done for various SCCs - https://jira.hyperledger.org/browse/FAB-2969 https://jira.hyperledger.org/browse/FAB-2103 https://jira.hyperledger.org/browse/FAB-2969 https://jira.hyperledger.org/browse/FAB-2969

Given all the attention above to SCC calls this is clearly a dup. Closing this out.
",,,,,,,,,,,,,,,,,,,,
Gossip inter-org confidentiality,FAB-2061,14564,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,06/Feb/17 7:19 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,22/Apr/17 9:20 PM,,,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,ga,gossip,,,,,,"The current membership infrastructure leaks information to organizations that might be confidential.
Let’s assume for simplicity that we have 3 organizations: X, Y, Z and only 2 channels: A and B, and the membership of channel A is: {X, Y} and the membership of channel B is: {Y, Z} .
AliveMessages and peer identities of organization X would be disseminated to organization Z although organization X and Z don’t share any channel. 
It might be that organization X doesn’t want organization Z to know anything about its peers.

An additional problem exists: if X and Y are in channel A, and Y and Z are in channel B, and X and Z are in channel C, then alive messages from X reach Y and then Z, and then Z knows that X and Y have a channel (A) that Z isn't part of (B or C).

In order to tackle this - we need (probably) to fine-grain more the membership routing policies, so that each org would gossip about a foreign org, only to that foreign org.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|hzzz9e:i,,Sprint 16 - Gossip,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
end-to-end tests are failing on fabric-sdk-node commit# a8ff8cd,FAB-2060,14563,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,greg.haskins,rameshthoomu,rameshthoomu,06/Feb/17 7:14 AM,08/Feb/17 1:04 PM,26/Apr/18 6:50 AM,08/Feb/17 1:04 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"*Follow below steps to recreate this issue:*

Step1: Build peer and orderer images on Fabric latest commits
Step2: Build fabric ca image on fabric-ca latest commit
Step3: Pull latest code or  commit# a8ff8cd from sdk-node and execute end-to-end.js after install npm

Build log reference: 
https://jenkins.hyperledger.org/view/FIT/job/FIT-node-x86_64/82/console
https://jenkins.hyperledger.org/view/FIT/job/FIT-node-x86_64/77/console

 recoveryParam: 1 }
00:19:40 [31merror[39m: [Peer.js]: GRPC client got an error response from the peer. Error: Failed to deploy chaincode spec(Error creating image: %!s(<nil>))
00:19:40     at /w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:434:17
00:19:40 [31merror[39m: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: Failed to deploy chaincode spec(Error creating image: %!s(<nil>))
00:19:40     at Object.callback (/w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/fabric-client/lib/Peer.js:191:13)
00:19:40     at /w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:437:14
00:19:40 [31merror[39m: [Peer.js]: GRPC client got an error response from the peer. Error: Failed to deploy chaincode spec(Error creating image: %!s(<nil>))
00:19:40     at /w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:434:17
00:19:40 [31merror[39m: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: Failed to deploy chaincode spec(Error creating image: %!s(<nil>))
00:19:40     at Object.callback (/w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/fabric-client/lib/Peer.js:191:13)
00:19:40     at /w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:437:14
00:19:40 [31m[2017-02-05 00:19:40.589] [ERROR] E2E - [39mdeploy proposal was bad
00:19:40 [31m[2017-02-05 00:19:40.590] [ERROR] E2E - [39mdeploy proposal was bad
00:19:40 not ok 3 Failed to send Proposal or receive valid response. Response null or status is not 200. exiting...
00:19:40   ---
00:19:40     operator: fail
00:19:40     at: process._tickCallback (internal/process/next_tick.js:103:7)
00:19:40   ...
00:19:40 [32m[2017-02-05 00:19:40.591] [INFO] E2E - [39mDisconnecting the event hub
00:19:40 not ok 4 Failed to get transaction notification within the timeout period
00:19:40   ---
00:19:40     operator: fail
00:19:40     at: process._tickCallback (internal/process/next_tick.js:103:7)",Jenkins CI,,,,,,,,,,,FAB-1741,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00owp:,,,,,,,,bmos299,rameshthoomu,,,,,,,,,master,,,true,"06/Feb/17 3:07 PM;rameshthoomu;*peer logs:*
f4125848bea488e5e1cfc85db5ac0) lock
2017-02-06 14:53:05.240 UTC [chaincode-platform] func1 -> ERRO 2fb Failed to generate platform-specific docker build: could not decode url: ChaincodeSpec's path/URL cannot be empty
2017-02-06 14:53:05.245 UTC [dockercontroller] deployImage -> ERRO 2fc Error building images: Failed to generate platform-specific docker build: could not decode url: ChaincodeSpec's path/URL canno                                        t be empty
2017-02-06 14:53:05.245 UTC [dockercontroller] deployImage -> ERRO 2fd Image Output:
********************

********************
*fabric-sdk-node Commit#*

https://github.com/hyperledger/fabric-sdk-node/commit/a8ff8cdec52cb4ca80db3488599347bbf77b033f
","06/Feb/17 5:19 PM;bmos299;This one is needed to cut the Alpha release.   I talked to Binh, and we want the Alpha to work with the gettingstarted in the docs, so please let us know what we would need to change externally (i.e. no more dockerfile, etc).  Thanks, bmos299",,,,,,,,,,,,,,,,,,,,,,
False build results in fabric sdk node CI jobs,FAB-2035,14538,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,04/Feb/17 2:28 AM,06/Feb/17 6:51 PM,26/Apr/18 6:50 AM,06/Feb/17 6:51 PM,,,,,,,,,,,,,,0,,,,,,,,,"Observed false build results on fabric sdk node CI (Jenkins) builds. CI is executing further commands irrespective of the lint errors executed in ""gulp"" command.

```+ gulp
21:22:02 [21:22:02] Using gulpfile /w/workspace/fabric-sdk-node-verify-x86_64/gopath/src/github.com/fabric-sdk-node/gulpfile.js
21:22:02 [21:22:02] Starting 'lint'...
21:22:08 [21:22:08] 
21:22:08 /w/workspace/fabric-sdk-node-verify-x86_64/gopath/src/github.com/fabric-sdk-node/test/unit/end-to-end.js
21:22:08   315:6  error  Expected indentation of 4 tabs but found 5  indent
21:22:08   316:6  error  Expected indentation of 4 tabs but found 5  indent
21:22:08   317:5  error  Expected indentation of 3 tabs but found 4  indent
21:22:08 
21:22:08 ✖ 3 problems (3 errors, 0 warnings)
21:22:08 
21:22:08 [21:22:08] 'lint' errored after 6.01 s
21:22:08 [21:22:08] ESLintError in plugin 'gulp-eslint'
21:22:08 Message:
21:22:08     Failed with 3 errors
21:22:08 + rm -rf node_modules/fabric-ca-client```",Jenkins CI,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00or5:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,"06/Feb/17 6:51 PM;rameshthoomu;fixed this issue from CI. With this fix, now sdk node build will fail if there are any errors while checking go ""linter""",,,,,,,,,,,,,,,,,,,,,,,
Cannot use fabric-client from npm without winston,FAB-2034,14537,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,sstone1,sstone1,03/Feb/17 11:32 PM,06/Feb/17 6:56 PM,26/Apr/18 6:50 AM,06/Feb/17 6:56 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"If I install the {{fabric-client}} module from npm and try to require it, it fails because {{winston}} is not available. Winston is listed in devDependencies and so won't get installed by default.

Reproduce:
{{npm install fabric-client && node -r fabric-client}}

I see that the sample code for the Hackfest installs {{winston}} as a dependency alongside {{fabric-client}}. If Winston is meant to be optional then the {{require}} needs to be moved.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oqx:,,,,,,,,sstone1,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Switch to 'channel' instead of 'chain' in protos,FAB-2033,14536,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,03/Feb/17 9:23 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,25/Feb/17 11:06 PM,,,,,,,v1.0.0,,,fabric-orderer,,,,0,,,,,,,,,"Apparently a community decision was made to settle on the word 'channel' to describe the set of resources (including backing hash chain structure) as opposed to the word 'chain' which is used throughout the code.

It is not reasonable to attempt to transition the nomenclature inside the code away from the word chain to the word channel in the near term, as this would require too much work.  However, the proto messages should stick with us for a very long time, so it makes sense to make the modification there before we cut the v1 release.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzfy:,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,jyellick,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Fabric protos do not conform to proto style guide,FAB-2026,14529,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jyellick,jyellick,03/Feb/17 3:49 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,25/Feb/17 10:59 PM,,,,,,,v1.0.0,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,"The fabric protos follow inconsistent naming conventions, which make it difficult to predict how to reference fabric proto messages.

The official proto style guide is here:

https://developers.google.com/protocol-buffers/docs/style

The fabric needs to bring its protos into line to be consistent according to this style guide before the release of v1 when non-backward compatible proto changes will be off the table",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzfx:,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,jyellick,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
ImportError: No module named sha3 error,FAB-2011,14514,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jeffgarratt,rameshthoomu,rameshthoomu,02/Feb/17 4:04 PM,12/May/17 2:09 PM,26/Apr/18 6:50 AM,09/Mar/17 10:45 PM,,,,,,,v1.0.0,,,,,,,0,,,,,,,,,"Run behave tests using below command:
make behave BEHAVE_OPTS=""-D logs=Y -o testsummary.log --junit --format=pretty""

*Below is the error in vagrant:*

vagrant@hyperledger-devenv:v0.2.2-2a123fe:/opt/gopath/src/github.com/hyperledger/fabric_latest$ cd bddtests/
vagrant@hyperledger-devenv:v0.2.2-2a123fe:/opt/gopath/src/github.com/hyperledger/fabric_latest/bddtests$ behave -k  features/bootstrap.feature
Exception ImportError: No module named sha3
Traceback (most recent call last):
  File ""/usr/local/bin/behave"", line 11, in <module>
    sys.exit(main())
  File ""/usr/local/lib/python2.7/dist-packages/behave/__main__.py"", line 109, in main
    failed = runner.run()
  File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 672, in run
    return self.run_with_paths()
  File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 678, in run_with_paths
    self.load_step_definitions()
  File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 658, in load_step_definitions
    exec_file(os.path.join(path, name), step_module_globals)
  File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 304, in exec_file
    exec(code, globals, locals)
  File ""steps/bootstrap_impl.py"", line 18, in <module>
    import bootstrap_util
  File ""/opt/gopath/src/github.com/hyperledger/fabric_latest/bddtests/steps/bootstrap_util.py"", line 20, in <module>
    import sha3
ImportError: No module named sha3
vagrant@hyperledger-devenv:v0.2.2-2a123fe:/opt/gopath/src/github.com/hyperledger/fabric_latest/bddtests$",,,,,,,,,,,,,,FAB-1801,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00om1:,,,,,,,,afrojewelz,jeffgarratt,murrekatt,rameshthoomu,szoghybe,,,,,,,,,,13/Feb/17 12:22 PM;murrekatt;Ran into the same after setup of dev env (http://hyperledger-fabric.readthedocs.io/en/latest/dev-setup/devenv/) and then building (http://hyperledger-fabric.readthedocs.io/en/latest/dev-setup/build/) ,09/Mar/17 10:46 PM;jeffgarratt;This is resolved with most recent updates and the new README.md which explains procedure for proper setup of python using virtual environments.,"12/May/17 2:09 PM;szoghybe;The README instructions referred to above are at the bottom of [https://github.com/hyperledger/fabric-sdk-java]

My complete Vagrantfile config.vm.synced_folder bloc is:

config.vm.synced_folder "".."", ""#\{SRCMOUNT}""
 config.vm.synced_folder "".."", ""/opt/gopath/src/github.com/hyperledger/fabric""
 config.vm.synced_folder ""fabric-sdk-java-master/src/test/fixture/sdkintegration"", ""/opt/gopath/src/github.com/hyperledger/fabric/sdkintegration""
 config.vm.synced_folder ENV.fetch('LOCALDEVDIR', ""..""), ""#\{LOCALDEV}""",,,,,,,,,,,,,,,,,,,,,
CouchDB Query Data Wrapper fails for some conditions,FAB-2010,14513,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,chris.elder,chris.elder,chris.elder,02/Feb/17 3:57 PM,17/Feb/17 12:37 PM,26/Apr/18 6:50 AM,17/Feb/17 12:37 PM,,,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,,"The data query wrapper used to ""wrap"" CouchDB queries for the ledger will fail for some instances of numbers and for complex queries using cascading operators.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-60,0|hzzzfa:v,,Sprint 11 - Ledger,Sprint 12 - Ledger,,,,,chris.elder,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Make gossip publish external endpoints to peers other organizations,FAB-2007,14510,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,02/Feb/17 2:42 PM,13/Mar/17 7:42 AM,26/Apr/18 6:50 AM,13/Mar/17 7:42 AM,,,,,,,v1.0.0,,,fabric-gossip,,,,0,,,,,,,,,"In some cases, peers in the same organization should communicate by connecting to endpoints only route-able from within the organization, and when communication with peers in different organizations, they should connect to endpoints that are route-able from outside the organization.

We need to add to gossip the ability to do that.

My plan is to add another endpoint, and to have the signature over a GossipMessage that contains an AliveMessage to be signed over a message that contains the internal endpoint as nil, and then the peer signs the GossipMessage it'll add the internal endpoint and the signature over the internal endpoint and then send the message.

When a peer forwards a GossipMessage that contains an alive message to a different peer outside of its organization, it'll delete the inner endpoint's ip address. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|hzzze3:,,Sprint 10 - Gossip,Sprint 11 - Gossip,Sprint 12 - Gossip,Sprint 13 - Gossip,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
swagger doc for enroll request body is wrong,FAB-2006,14509,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,smithbk,smithbk,02/Feb/17 2:29 PM,13/Apr/17 11:28 PM,26/Apr/18 6:50 AM,13/Apr/17 11:28 PM,v1.0.0,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"The swagger doc for the enroll request body is wrong.
It should match what is in the SignRequest struct of cfssl/signer/signer.go.
See fabric-ca/swagger/fabric-ca-swagger.json",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ol5:,,Sprint 10 - Membership Service,,,,,,smithbk,,,,,,,,,,master,,,true,10/Feb/17 6:22 PM;smithbk;See https://gerrit.hyperledger.org/r/#/c/5851/,,,,,,,,,,,,,,,,,,,,,,,
bootstrap tests are failing while running make behave,FAB-2004,14506,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jeffgarratt,rameshthoomu,rameshthoomu,02/Feb/17 12:34 AM,09/Mar/17 10:47 PM,26/Apr/18 6:50 AM,09/Mar/17 10:47 PM,,,,,,,v1.0.0,,,,,,,0,,,,,,,,,"Bootstrap tests are failing while running make behave from fabric master branch on latest commits:

Below is the error log observed from vagrant environment:

   | peerOrg1     |
    And the user ""dev0Org0"" creates config Tx ""configTx1"" using signedConfigEnvelope ""createChannelSignedConfigEnvelope1""                                                                        # steps/bootstrap_impl.py:191 0.001s
    And the user ""dev0Org0"" broadcasts config Tx ""configTx1"" to orderer ""orderer0"" to create channel ""com.acme.blockchain.jdoe.Channel1""                                                         # steps/bootstrap_impl.py:198 0.004s
      Traceback (most recent call last):
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1456, in run
          match.run(runner.context)
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1903, in run
          self.func(context, *args, **kwargs)
        File ""steps/bootstrap_impl.py"", line 203, in step_impl
          bootstrap_util.broadcastCreateChannelConfigTx(context=context, composeService=orderer, chainId=channelId, user=user, configTxEnvelope=configTxEnvelope)
        File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/bootstrap_util.py"", line 745, in broadcastCreateChannelConfigTx
          user.broadcastMessages(context=context,numMsgsToBroadcast=1,composeService=composeService, chainID=chainId ,dataFunc=dataFunc, chainHeaderType=common_dot_common_pb2.CONFIGURATION_TRANSACTION)
        File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/orderer_util.py"", line 168, in broadcastMessages
          abStub = self.getABStubForComposeService(context, composeService)
        File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/orderer_util.py"", line 188, in getABStubForComposeService
          channel = getGRPCChannel(*bdd_test_util.getPortHostMapping(context.compose_containers, composeService, 7050))
        File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/bdd_test_util.py"", line 95, in getPortHostMapping
          if port_protocol in container.ports:
      TypeError: argument of type 'NoneType' is not iterable

      Captured stdout:
      Will copy gensisiBlock over at this point
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00okh:,,,,,,,,jeffgarratt,rameshthoomu,,,,,,,,,,,,,02/Feb/17 4:33 PM;jeffgarratt;This occurs when one of the services has exited unexpectedly.  Try a 'docker ps -a' to verify that one of the services has exited.  Check the log and see the isse which is causing this.  I suspect it is an orderer failure due to misconfig.,09/Mar/17 10:46 PM;jeffgarratt;This should now be resolved as of https://gerrit.hyperledger.org/r/#/c/7085/,,,,,,,,,,,,,,,,,,,,,,
endorser tests are failing in behave while registering user,FAB-2003,14505,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jeffgarratt,rameshthoomu,rameshthoomu,02/Feb/17 12:32 AM,09/Mar/17 10:48 PM,26/Apr/18 6:50 AM,09/Mar/17 10:48 PM,,,,,,,v1.0.0,,,,,,,0,,,,,,,,,"endorser tests are failing while registering user. Run make behave from fabric master on latest commit. 

Below is the log from behave log file:

@endorser
Feature: Endorser # features/endorser.feature:10
  As a application developer
  I want to get endorsements and submit transactions and receive events
  @FAB-184
  Scenario Outline: Basic deploy endorsement for chaincode through GRPC to multiple endorsers -- @1.1 Orderer Options                                                       # features/endorser.feature:37
    Given we compose ""docker-compose-next-4.yml""                                                                                                                            # steps/peer_basic_impl.py:69 22.751s
    And I wait ""1"" seconds                                                                                                                                                  # steps/peer_basic_impl.py:121 1.005s
    And I register with CA supplying username ""binhn"" and secret ""7avZQLwcUe9q"" on peers                                                                                    # steps/peer_basic_impl.py:659 0.002s
      | vp0 |
    When user ""binhn"" creates a chaincode spec ""cc_spec"" of type ""GOLANG"" for chaincode ""github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02"" with args # steps/endorser_impl.py:21 0.007s
      | funcName | arg1 | arg2 | arg3 | arg4 |
      | init     | a    | 100  | b    | 200  |
      Traceback (most recent call last):
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1456, in run
          match.run(runner.context)
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1903, in run
          self.func(context, *args, **kwargs)
        File ""steps/endorser_impl.py"", line 23, in step_impl
          userRegistration = bdd_test_util.getUserRegistration(context, enrollId)
        File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/bdd_test_util.py"", line 74, in getUserRegistration
          raise Exception(""User has not been registered: {0}"".format(enrollId))
      Exception: User has not been registered: binhn
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ok9:,,,,,,,,jeffgarratt,rameshthoomu,,,,,,,,,,,,,02/Feb/17 4:32 PM;jeffgarratt;So far focusing on orderer.feature and bootstrap.feature.  The endorser.feature will fail due to v1 updates and will be addressed asap.,09/Mar/17 10:47 PM;jeffgarratt;Reworked behave features.  Endorser feature is currently not used.  May soon be removed.,,,,,,,,,,,,,,,,,,,,,,
"orderer service batching broken for non-default channel ID, 1 channel, mult orderers",FAB-2001,14503,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Ratnakar,scottz,scottz,01/Feb/17 11:21 PM,01/Jun/17 4:22 PM,26/Apr/18 6:50 AM,01/Jun/17 4:17 PM,v1.0.0-alpha2,,,,,,v1.0.0,,,fabric-orderer,,,,0,qa,quality,reproduction-requested,,,,,,"TXs recvd on multiple orderers (using same channel) are batched and delivered separately only by the recipient orderer

Tested on Feb 01 2017 using:
commit 5d9e4ede298ab646ac918dc5b034c7d319dd1d9a
commit date:   Mon Jan 30 14:34:38 2017 +0000

1. Using 1 new ""testchannel00000"" with 3 kafka orderers:
2. cd $GOPATH/src/github.com/hyperledger/fabric
3. CORE_PEER_COMMITTER_LEDGER_ORDERER=127.0.0.1:7050 peer channel create -c testchannel00000
4. Send a TX to each orderer at same time, on ""testchannel00000"".
EXPECTED RESULT:
Transactions should be put into single batch, and after 10 secs the batch
should be delivered (duplicated by each orderer).
ACTUAL RESULT (FAILURE):
Orderer service fails to batch them together. And after batchTimeout (10 secs)
each orderer delivers a unique batch with only the transaction that was sent to it.


======================================================================
Below are similar tests for comparison (which pass):

===============
RESULT: PASS:
1. Using 1 default channel ""testchainid"" with 3 orderers:
2. Send a TX to each orderer at same time, on ""testchainid"".
- Orderer service works fine. It puts them all in one batch after 
  batchtimeout(10secs), and all orderers deliver it.

===============
RESULT: PASS:
1. Using 3 new channels with 1 orderer:
2. cd $GOPATH/src/github.com/hyperledger/fabric
3. export CORE_PEER_COMMITTER_LEDGER_ORDERER=127.0.0.1:7050
3. peer channel create -c ""testchannel00000""
4. peer channel create -c ""testchannel00001""
5. peer channel create -c ""testchannel00002""
6. Send a TX on each channel at same time to the orderer.
- Orderer service works fine. Since each TX is in separate channel, each is put
  in its own batch, and after batchtimeout(10secs), each batch is delivered by
  the orderer on its own channel.
","Lenovo laptop running Linux, vagrant, docker containers for each orderer and kafka-broker",,,,,,,,,,,,,,,,,,,01/Jun/17 3:29 PM;suryalnvs;broadcast_timestamp_msp.go;https://jira.hyperledger.org/secure/attachment/10897/broadcast_timestamp_msp.go,01/Feb/17 11:20 PM;scottz;bug1_details.txt;https://jira.hyperledger.org/secure/attachment/10416/bug1_details.txt,01/Jun/17 3:29 PM;suryalnvs;deliver_stdout_msp.go;https://jira.hyperledger.org/secure/attachment/10898/deliver_stdout_msp.go,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00uir:,,Sprint 11 - consensus,Sprint 12 - consensus,Sprint 13 - Consensus,Sprint 14 - Consensus,Sprint 15 - Consensus,Sprint 16 - Consensus,ChristopherFerris,kchristidis,Ratnakar,scottz,suryalnvs,,,,,,,,,,"09/Feb/17 12:13 AM;scottz;For example:
 OTE_TXS=5 ORDERER_GENESIS_ORDERERTYPE=kafka OTE_KAFKABROKERS=3 OTE_ORDERERS=3
For this test with 5 transactions, 1 channel (non-default name) and 3 orderers
EXPECT to see:  1 block delivered (the same one should be delivered on all orderers) after 10 secs
FAILURE OBSERVED:  transactions sent to different orderers are NOT batched together:
Consumer recvd a block, o 2 c 0 blkNum 1 numtrans 1
Consumer recvd a block, o 0 c 0 blkNum 1 numtrans 3
Consumer recvd a block, o 1 c 0 blkNum 1 numtrans 1
in compute(): totalTxRecv[]= [3 1 1], totalBlockRecv[]= [1 1 1]
This shows that
Orderer 0 delivers 3 transactions in 1 block, block number 1.
Orderer 1 delivers 1 transaction in a different block number 1.
Orderer 2 delivers 1 transaction in yet another different block number 1.","13/Feb/17 3:19 PM;kchristidis;Folks, let me know what the progress is on this, and whether you'd like me to help.","28/Feb/17 9:46 PM;scottz;Still fails using Feb 27th commit # 29d7fc035df697a68d271d628e693c556354486f
for a new non-default channel ID name, AND ALSO FAILS using default testchainid.","26/May/17 10:24 PM;ChristopherFerris;[~scottz] this says affectedVersion alpha2, yet filed in Feb when alpha hadn't even been cut. Is this still a verified issue?","01/Jun/17 3:27 PM;suryalnvs;+*Pre-req:*+
 * Generate certs using the cryptogen tool for the clients and orderer
 * Launch the network with following configuration:
      _2 Orderers (with BATCHSIZE=100)_
      _3 Kafka brokers (3 zookeepers)_
 
*_Steps to run the test:_*
 1. Create a channel 'mychannel'

 2. Start the deliver clients for two orderers
 *Terminal 1:*
{code}
 /deliver_stdout_msp -server localhost:7050 -tls -cafile ./crypto-config/ordererOrganizations/example.com/orderers/orderer0.example.com/tls/ca.crt -chainID mychannel -overridehostname orderer0.example.com -mspDir ./crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/msp -mspID Org1MSP -seek -2
{code}

*Terminal 2:*
{code}
 ./deliver_stdout_msp -server localhost:8050 -tls -cafile ./crypto-config/ordererOrganizations/example.com/orderers/orderer1.example.com/tls/ca.crt -chainID mychannel -overridehostname orderer1.example.com -mspDir ./crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/msp -mspID Org1MSP -seek -2
{code}

 3. Start broadcast clients
     Send 110 transactions to the Orderer0 and Orderer1

*Terminal 3:*
{code}
./broadcast_timestamp_msp -server localhost:7050 -chainID mychannel -messages 110 -tls -cafile ./crypto-config/ordererOrganizations/example.com/orderers/orderer0.example.com/tls/ca.crt -chainID mychannel -overridehostname orderer0.example.com -mspDir ./crypto-config/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp -mspID Org1MSP
{code}

*Terminal 4:*
{code}
./broadcast_timestamp_msp -server localhost:8050 -chainID mychannel -messages 110 -tls -cafile ./crypto-config/ordererOrganizations/example.com/orderers/orderer1.example.com/tls/ca.crt -chainID mychannel -overridehostname orderer1.example.com -mspDir ./crypto-config/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp -mspID Org1MSP
{code}

*OUTPUT:*
As a result of the above execution here is the result (seen in Ternminal 1 & 2)
{code:java}
Total Transactions Received in block 0 :  1
Total Transactions Received in block 1 :  100
Total Transactions Received in block 2 :  100
Total Transactions Received in block 3 :  20
{code}
{color:#14892c}*we see the blocks are getting batched up properly and issue is no more reproducible, hence this issue can be closed*
{color}

*NOTE:*
* Tested on alpha2 based code/commit level
* Please refer more details here, https://jira.hyperledger.org/browse/FAB-3993, [https://gerrit.hyperledger.org/r/#/c/9625/]
 Also attached the source file for broadcast_timestamp_msp (added changes to broadcast_timestamp to read msps of the peers)","01/Jun/17 4:22 PM;Ratnakar;Verified the issue on Alpha2 commit level with few changes made to the clients to enable TLS.

Closing the issue.",,,,,,,,,,,,,,,,,,
base 64 decoding in auth header should handle padding,FAB-2000,14502,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,smithbk,smithbk,01/Feb/17 10:51 PM,14/Mar/17 2:55 PM,26/Apr/18 6:50 AM,14/Mar/17 2:54 PM,,,,,,,v1.0.0,,,fabric-ca,,,,1,,,,,,,,,"The B64Decode function in fabric-ca/util/util.go uses RawStdEncoding which doesn't handle padding.  It should use StdEncoding so it handles padding.  I'm not sure if StdEncoding also handles w/o padding, so it may be safer to try StdEncoding 1st and if it fails, try RawStdEncoding.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ojt:,,Sprint 10 - Membership Service,,,,,,rickr,smithbk,,,,,,,,,,,,,14/Mar/17 2:55 PM;smithbk;This was already changed.   See util/util.go's B64Encode/Decode functions.,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca client enroll/reenroll/revoke broken after commit a569df9 Change the default port to 7054,FAB-1991,14493,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,rennman,rennman,01/Feb/17 7:18 PM,06/Apr/17 1:00 AM,26/Apr/18 6:50 AM,06/Apr/17 12:59 AM,,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"After a little experimentation I see that after
   a569df9 Change the default port to 7054
enroll/reenroll/revoke isn't parsing correctly.

The results are consistent up through 
6294c57 Remove the fabric-ca docker directory

After 
5105f60 COP Client Configuration File
the results are slightly different, but still incorrect.

commit a569df9 through 6294c57
eabailey@amphion:~/gopath/src/github.com/hyperledger/fabric-ca$ /home/eabailey/gopath/src/github.com/hyperledger/fabric-ca/bin/fabric-ca client enroll -loglevel=0 admin adminpw http://127.0.0.1:7054
2017/02/01 14:08:46 [DEBUG] Entering cli/client/enrollMain
open -port: no such file or directory

eabailey@amphion:~/gopath/src/github.com/hyperledger/fabric-ca$ /home/eabailey/gopath/src/github.com/hyperledger/fabric-ca/bin/fabric-ca client reenroll -loglevel=0 http://127.0.0.1:7054
2017/02/01 14:09:05 [DEBUG] Entering cli/client/reenrollMain
open -port: no such file or directory

Revoke appears to work, but ""id"" is set to ""-port""
/home/eabailey/gopath/src/github.com/hyperledger/fabric-ca/bin/fabric-ca client revoke http://127.0.0.1:7054

eabailey@amphion:~/gopath/src/github.com/hyperledger/fabric-ca/scripts$ /home/eabailey/gopath/src/github.com/hyperledger/fabric-ca/bin/fabric-ca client revoke http://127.0.0.1:7054
POST http://127.0.0.1:7054/api/v1/cfssl/revoke
Authorization: 
  ...
{""id"":""-port""}


***********
commit 5105f60


eabailey@amphion:~/gopath/src/github.com/hyperledger/fabric-ca$ /home/eabailey/gopath/src/github.com/hyperledger/fabric-ca/bin/fabric-ca client enroll -loglevel=0 admin adminpw http://127.0.0.1:7054
2017/02/01 14:15:51 [DEBUG] Entering cli/client/enrollMain
2017/02/01 14:15:51 [INFO] Fabric-ca Client Configuration File: /home/eabailey/fabric-ca/client-config.json
open http://127.0.0.1:7054: no such file or directory

eabailey@amphion:~/gopath/src/github.com/hyperledger/fabric-ca$ /home/eabailey/gopath/src/github.com/hyperledger/fabric-ca/bin/fabric-ca client reenroll -loglevel=0 http://127.0.0.1:7054
2017/02/01 14:16:24 [DEBUG] Entering cli/client/reenrollMain
2017/02/01 14:16:24 [INFO] Fabric-ca Client Configuration File: /home/eabailey/fabric-ca/client-config.json
open http://127.0.0.1:7054: no such file or directory

eabailey@amphion:~/gopath/src/github.com/hyperledger/fabric-ca$ /home/eabailey/gopath/src/github.com/hyperledger/fabric-ca/bin/fabric-ca client revoke http://127.0.0.1:7054
2017/02/01 14:17:02 [INFO] Fabric-ca Client Configuration File: /home/eabailey/fabric-ca/client-config.json
POST https://localhost:7054/api/v1/cfssl/revoke
Authorization: 
....
{""id"":""http://127.0.0.1:7054""}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oi9:,,,,,,,,harsha544,rennman,smithbk,,,,,,,,master,,,true,"06/Apr/17 1:00 AM;smithbk;Allen, closing this as I assume it was fixed long ago.  If not, please reopen.",,,,,,,,,,,,,,,,,,,,,,,
fabric-ca registrar 'leaks' authority to delegates,FAB-1989,14491,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,rennman,rennman,01/Feb/17 5:28 PM,26/May/17 11:32 PM,26/Apr/18 6:50 AM,26/May/17 11:32 PM,,,,,,,v1.0.0,,,fabric-ca,,,,1,MembershipServices,Security,,,,,,,"In reference to 'Added test for registrar delegation'
https://gerrit.hyperledger.org/r/#/c/5025/

I think the mis-spelling is actually a degenerate case of a larger problem, in which 'hf.Registrar.DelegateRoles' is not set

I'm basically working of the premise that:
  -admin may register users
  -admin may register registrars
  -delegate may register users
  -delegate may register registrars
  -registrar may register users
  -registrar may not register registrars
  -users may not register anyone

Registrar role is set/Delegate not set
 User is allowed to register user of only the type specified:
   Fail case works as expected: [{""name"":""hf.Registrar.Roles"",""value"":""peer,validator,auditor""}]
      Error response from server was 'User 'A_client' may not register type 'client'' for request:

   However, in the successful case, the potential proagated authority is too broad.
   An admin that can only register 'clients' is allowed to delagate anything:
      {""id"":""A_client"",""type"":""client"",""group"":""bank_a"",""attrs"":[{""name"":""hf.Registrar.Roles"",""value"":""client""}]}

     Received request to register user with id: D_clientclient, group: bank_a, attributes: [{hf.Registrar.Roles client,peer,validator,auditor} {hf.Registrar.DelegateRoles client,peer,validator,auditor}], registrar: A_client
     canRegister - Check to see if user A_client can register
     User D_clientclient inserted into database successfully

   D_clientclient may now surpass (and propagate) 'A_client's authority
     Received request to register user with id: E_clientclientclient, group: bank_a, attributes: [{hf.Registrar.Roles client,peer,validator,auditor}], registrar: D_clientclient
     canRegister - Check to see if user D_clientclient can register
     User E_clientclientclient inserted into database successfully

Registrar role is not set/Delegate set
  User is not allowed to register anyone
  Fail case Works as expected:
      Error response from server was 'User 'A_client' may not register type 'client'' for request:

   Similar to above, the proagated authority is too broad.
      A_client|HbaYvYqQrYrU|client|bank_a|[{""name"":""hf.Registrar.Roles"",""value"":""client""}]|1|1

   A_client may register delegate, who in turn *should* only reigster client; however, A_client registers:
      D_clientclient|xRBPwVjaziqI|client|bank_a|[{""name"":""hf.Registrar.Roles"",""value"":""client""},{""name"":""hf.Registrar.DelegateRoles"",""value"":""client""}]|1|1

   Who in turn, registers a client with very broad authority indeed
      E_clientclientclient|hWDkNNWSAAyI|client|bank_a|[{""name"":""hf.Registrar.Roles"",""value"":""client,peer,validator,auditor""},{""name"":""hf.Registrar.DelegateRoles"",""value"":""client,peer,validator,auditor""}]|1|1
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6i:zzc,,Sprint 16 - Membership Service,,,,,,binhn,ChristopherFerris,rennman,smithbk,,,,,,,master,,,true,"06/Apr/17 1:04 AM;smithbk;Allen, I'm having a hard time parsing this to understand the problem.  Consider using {code} code brackets {code} as I think the formatting makes it harder to follow.  But some clarification is needed here regarding how to reproduce.  Maybe even a test case that fails.","06/Apr/17 6:43 PM;rennman;More simply stated:
when admin(A), 
    registers delegate(D) (who in turn is authorized to registers clients *only*)
D can turn around and register enduser(E) and also give delegate authority (*for any and all types*) to E. 

enduser(E) can now register clients, peers, auditors and validators. Not only does this exceed the authority of 'D', but also that of 'A'.

I don't think this is what was intended.",11/May/17 7:53 PM;ChristopherFerris;[~rennman] I think that the best way to address this is to write a test that tests your hypothesis (and results in failure).,"11/May/17 9:12 PM;rennman;Actually, this is based on empirical data from a failed test.

Consequently, the test was disabled.","11/May/17 11:21 PM;ChristopherFerris;[~rennman] which test, please?","18/May/17 4:49 PM;rennman;Sorry, there's a somewhat convoluted history to this.

Originally, it was delegation_test.sh ( now in the staging directory ).

After the split of the fabric client/server executables, we lost the ability to specify multiple attributes at registration time, thereby also losing the ability to drive the test. When I made mention of this, I was informed that multiple attributes was an advanced feature that would be deferred. Hence, I did not rework delegation_test.sh when I reworked the other tests.

Good timing on the comment though, since the feature is now sitting in a change set:
[https://gerrit.hyperledger.org/r/#/c/9479/]
ready to be tested.

I'll revisit delegation_test.sh and retest. I'm confident it's still broken because I hacked up a driver about a month ago and it failed.",26/May/17 12:50 AM;smithbk;http://gerrit.hyperledger.org/r/9847,26/May/17 7:11 PM;binhn;+1,,,,,,,,,,,,,,,,
newBroker utility might not connect to kafka over tls,FAB-1987,14489,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,sanchezl,sanchezl,01/Feb/17 3:49 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,27/May/17 3:41 AM,,,,,,,v1.0.0,,,fabric-orderer,,,,0,kafka,,,,,,,,"In {{func newBroker}}, in {{orderer/kafka/broker.go}}:
{code}
candidateBroker.Open(nil)
{code}
This will fail if Kafka is configured to use TLS only.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ocl:,,,,,,,,kchristidis,sanchezl,,,,,,,,,,,,,27/May/17 3:41 AM;kchristidis;Doing some mini-refactoring and UT writing for the kafka package (FAB-4184) and will be removing all `broker*.go` files since they are not used anywhere (as you had observed a while back). Closing this.,,,,,,,,,,,,,,,,,,,,,,,
"No PKCS11 library found, skipping/failing PKCS11 tests for Power",FAB-1980,14482,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,bsmita,bsmita,bsmita,01/Feb/17 2:28 PM,13/Feb/17 3:02 PM,26/Apr/18 6:50 AM,13/Feb/17 3:02 PM,,,,,,,v1.0.0,,,,,,,1,quality,,,,,,,,"Testcases in /fabric/bccsp/pkcs11 fail with the following errors:

unit-tests_1  | ok      github.com/hyperledger/fabric/bccsp/factory     0.004s  coverage: 50.8% of statements
unit-tests_1  | 2017/01/31 18:29:58 KeyStore path [/tmp] missing [false]: [<clean>]
unit-tests_1  | 2017/01/31 18:29:58 KeyStore opened at [/tmp]...done
unit-tests_1  | No PKCS11 library found, skipping PKCS11 tests2017/01/31 18:29:58 KeyStore path [/tmp/bccspks] missing [true]: [<clean>]
unit-tests_1  | 2017/01/31 18:29:58 Creating KeyStore at [/tmp/bccspks]...
unit-tests_1  | 2017/01/31 18:29:58 KeyStore created at [/tmp/bccspks].
unit-tests_1  | 2017/01/31 18:29:58 KeyStore opened at [/tmp/bccspks]...done
unit-tests_1  | 2017/01/31 18:29:58 Failed converting public key to PEM []: [Invalid rsa public key. It must be different from nil.]
unit-tests_1  | 2017/01/31 18:29:58 Failed converting private key to PEM []: [Invalid rsa private key. It must be different from nil.]
unit-tests_1  | 2017/01/31 18:29:58 Failed converting key to PEM [4bf5122f344554c53bde2ebb8cd2b7e3d1600ad631c385a5d7cce23c7785459a]: [Invalid aes key. It must be different from nil]
unit-tests_1  | 2017/01/31 18:29:58 Failed converting key to PEM [4bf5122f344554c53bde2ebb8cd2b7e3d1600ad631c385a5d7cce23c7785459a]: [Invalid aes key. It must be different from nil]
unit-tests_1  | --- FAIL: TestInvalidSKI (0.00s)

Fix:
By specifying the right path for libsofthsm2.so in /fabric/bccsp/pkcs11/impl_test.go this testcase passes",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00og1:,,,,,,,,bsmita,harsha544,,,,,,,,,master,,,true,01/Feb/17 6:50 PM;bsmita;Dropped changes to fix this to https://gerrit.hyperledger.org/r/#/c/5197/,,,,,,,,,,,,,,,,,,,,,,,
shim.GetCallerCertificate() always returns empty array,FAB-1977,14479,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,DrVadson,DrVadson,01/Feb/17 12:49 PM,02/Feb/17 3:03 PM,26/Apr/18 6:50 AM,02/Feb/17 3:03 PM,,,,,,,,,,,,,,0,,,,,,,,,"When executing shim.GetCallerCertificate(), it returns an empty array and no errors. In the code the stub.proposalContext.Transient field is returned, while it should probably be the Creator field instead. See https://github.com/hyperledger/fabric/blob/master/core/chaincode/shim/chaincode.go#L483
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ofd:,,,,,,,,DrVadson,,,,,,,,,,,,,,02/Feb/17 3:03 PM;DrVadson;Fixed in https://gerrit.hyperledger.org/r/#/c/5091/,,,,,,,,,,,,,,,,,,,,,,,
"""make native"" is creating ccenv and javaenv docker images along with peer and orderer binaries",FAB-1965,14467,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,rameshthoomu,rameshthoomu,31/Jan/17 8:17 PM,15/Apr/17 11:15 AM,26/Apr/18 6:50 AM,15/Apr/17 11:15 AM,v1.0.0,,,,,,WON'T FIX,,,fabric-baseimage,,,,0,,,,,,,,,"*""make native""* is creating fabric-ccenv and fabric-javaenv docker images along with peer and orderer binaries.  As mentioned in fabric Makefile, `make native` as to build peer and orderer binaries

[~ghaskins] Is this expected?
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ocp:,,,,,,,,mastersingh24,rameshthoomu,,,,,,,,,,,,,02/Apr/17 1:39 PM;mastersingh24;We've debated this before and there are differing opinions on this.  Some believe that peer must require the cc images.  FWIW - {{make orderer}} alone does not build the cc images,"15/Apr/17 11:15 AM;mastersingh24;this is not a bug - it's working as intended.  We can decide to change the behavior in the future, but for now this is inline with the current intended design",,,,,,,,,,,,,,,,,,,,,,
Seeing TestTenReplicasBombedWithBroadcastsIfLedgersConsistent test failure many time in CI.,FAB-1964,14466,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,hgabre,C0rWin,C0rWin,31/Jan/17 7:35 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,26/May/17 6:06 PM,v1.0.0-alpha1,,,,,,DUPLICATE,v1.0.0-alpha1,,fabric-orderer,,,,0,sbft,,,,,,,,"Seeing *TestTenReplicasBombedWithBroadcastsIfLedgersConsistent* failing on CI server for many times, here is the headline of the error. The fill trace could be found  [here|https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6032/console].

{code}
19:24:44 [33munit-tests_1  |[0m 2017/01/31 19:24:42 grpc: addrConn.transportMonitor exits due to: grpc: the connection is closing
19:24:44 [33munit-tests_1  |[0m 2017-01-31 19:24:42.229 UTC [backend] connectWorker -> INFO 151[0m connecting to replica 7 (b10dba [:6016])
19:24:44 [33munit-tests_1  |[0m 2017/01/31 19:24:42 transport: http2Client.notifyError got notified that the client transport was broken EOF.
19:24:44 [33munit-tests_1  |[0m --- FAIL: TestTenReplicasBombedWithBroadcastsIfLedgersConsistent (27.32s)
19:24:44 [33munit-tests_1  |[0m 	network_test.go:246: Failed to start up receiver: grpc: timed out when dialing
19:24:44 [33munit-tests_1  |[0m panic: runtime error: invalid memory address or nil pointer dereference [recovered]
19:24:44 [33munit-tests_1  |[0m 	panic: runtime error: invalid memory address or nil pointer dereference
19:24:44 [33munit-tests_1  |[0m [signal SIGSEGV: segmentation violation code=0x1 addr=0x8 pc=0x486898]

{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00och:,,,,,,,,C0rWin,ChristopherFerris,,,,,,,,,,,,,"31/Jan/17 10:13 PM;C0rWin;Another failure: https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6011/console
{code}
16:57:45 [33munit-tests_1  |[0m --- FAIL: TestTenReplicasBombedWithBroadcastsIfLedgersConsistent (84.47s)
16:57:45 [33munit-tests_1  |[0m 	network_test.go:264: Failed to receive some messages. (Received 10)
16:57:45 [33munit-tests_1  |[0m FAIL
16:57:45 [33munit-tests_1  |[0m coverage: 12.0% of statements
16:57:45 [33munit-tests_1  |[0m FAIL	github.com/hyperledger/fabric/orderer	94.403s
16:57:45 [33munit-tests_1  |[0m error: exit status 1
16:57:45 [33munit-tests_1  |[0m panic: EOF
16:57:45 [33munit-tests_1  |[0m 
16:57:45 [33munit-tests_1  |[0m goroutine 1 [running]:
16:57:45 [33munit-tests_1  |[0m panic(0x4daca0, 0xc42000a0f0)
16:57:45 [33munit-tests_1  |[0m 	/opt/go/src/runtime/panic.go:500 +0x1a1
16:57:45 [33munit-tests_1  |[0m main.main()
16:57:45 [33munit-tests_1  |[0m 	/opt/gotools/obj/gopath/src/github.com/AlekSi/gocov-xml/gocov-xml.go:60 +0x15fd
16:57:46 [33munittest_unit-tests_1 exited with code 2
{code}","31/Jan/17 10:15 PM;C0rWin;It looks like it keeps continuously to fail, [~hgabre] is there a way to either refactor or skip it for meanwhile until got fixed?","26/May/17 6:10 PM;ChristopherFerris;I believe that [~hgabre] fixed this with [https://github.com/hyperledger/fabric/commit/ae480207632392764f54abbdecb485e2b17b7fed]

closing since sbft not included in 1.0 anyway",,,,,,,,,,,,,,,,,,,,,
Can’t build docker image in proxy authentication environment.,FAB-1959,14461,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nnao,nnao,nnao,31/Jan/17 4:48 PM,02/Jun/17 8:11 PM,26/Apr/18 6:50 AM,02/Jun/17 8:11 PM,,,,,,,v1.0.0,,,fabric-baseimage,,,,0,,,,,,,,,"I can’t build docker image in proxy authentication environment,.
I get these error.

$ make docker
...
Step 12 : ADD payload/settings.gradle /root
---> Using cache
---> 72de8ce941ae
Step 13 : WORKDIR /root
---> Using cache
---> 996104490af9
Step 14 : RUN core/chaincode/shim/java/javabuild.sh
---> Running in 8627706c98de

FAILURE: Build failed with an exception.

* Where:
Build file '/root/core/chaincode/shim/java/build.gradle' line: 30

* What went wrong:
Error resolving plugin [id: 'com.google.protobuf', version: '0.8.0']
> Could not GET 'https://plugins.gradle.org/api/gradle/2.12/plugin/use/com.google.protobuf/0.8.0'.
   > <username>:<pasword>@<ip>: invalid IPv6 address

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00obd:,,,,,,,,ChristopherFerris,nnao,zhangchao,,,,,,,,master,,,true,"05/Apr/17 8:01 AM;zhangchao;This issue is due to these lines in javabuild.sh do not parse the username and password before symbo “@”
[ -n ""$http_proxy"" ] && JAVA_OPTS=""$JAVA_OPTS -Dhttp.proxyHost=$(getProxyHost $http_proxy) -Dhttp.proxyPort=$(getProxyPort $http_proxy)""
[ -n ""$https_proxy"" ] && JAVA_OPTS=""$JAVA_OPTS -Dhttps.proxyHost=$(getProxyHost $https_proxy) -Dhttps.proxyPort=$(getProxyPort $https_proxy)""
[ -n ""$HTTP_PROXY"" ] && JAVA_OPTS=""$JAVA_OPTS -Dhttp.proxyHost=$(getProxyHost $HTTP_PROXY) -Dhttp.proxyPort=$(getProxyPort $HTTP_PROXY)""
[ -n ""$HTTPS_PROXY"" ] && JAVA_OPTS=""$JAVA_OPTS -Dhttps.proxyHost=$(getProxyHost $HTTPS_PROXY) -Dhttps.proxyPort=$(getProxyPort $HTTPS_PROXY)""","05/Apr/17 4:19 PM;nnao;Yes. I already send a patch.
https://gerrit.hyperledger.org/r/#/c/5147/
But the review doesn't progress.","21/Apr/17 5:30 PM;ChristopherFerris;sorry for the delay in review. Please see the comments I left in Gerrit (and below). I ran tests of various correct permutations of the proxy URI and only the form with a user:password@domain:port work correctly.

cbf$ http_proxy=http://foo.com ./javabuild.sh
-Dhttp.proxyHost=http -Dhttp.proxyPort=//foo.com -Dhttp.proxyUser=foo.com -Dhttp.proxyPassword=foo.com
cbf$ http_proxy=http://chris@xxx:foo.com ./javabuild.sh
-Dhttp.proxyHost=xxx -Dhttp.proxyPort=foo.com -Dhttp.proxyUser=chris -Dhttp.proxyPassword=chris
cbf$ http_proxy=http://chris:xxx@foo.com ./javabuild.sh
-Dhttp.proxyHost=foo.com -Dhttp.proxyPort=foo.com -Dhttp.proxyUser=chris -Dhttp.proxyPassword=xxx
cbf$ http_proxy=http://chris:xxx@foo.com:80 ./javabuild.sh
-Dhttp.proxyHost=foo.com -Dhttp.proxyPort=80 -Dhttp.proxyUser=chris -Dhttp.proxyPassword=xxx
cbf$ https_proxy=http://chris:xxx@foo.com:80 ./javabuild.sh
-Dhttps.proxyHost=foo.com -Dhttps.proxyPort=80 -Dhttps.proxyUser=chris -Dhttps.proxyPassword=xxx
cbf$ https_proxy=http://chris:xxx@foo.com ./javabuild.sh
-Dhttps.proxyHost=foo.com -Dhttps.proxyPort=foo.com -Dhttps.proxyUser=chris -Dhttps.proxyPassword=xxx
cbf$ https_proxy=http://foo.com ./javabuild.sh
-Dhttps.proxyHost=http -Dhttps.proxyPort=//foo.com -Dhttps.proxyUser=foo.com -Dhttps.proxyPassword=foo.com
cbf$ HTTP_PROXY=http://foo.com ./javabuild.sh
-Dhttp.proxyHost=http -Dhttp.proxyPort=//foo.com -Dhttp.proxyUser=foo.com -Dhttp.proxyPassword=foo.com
cbf$ HTTP_PROXY=http://chris:xxx@foo.com ./javabuild.sh
-Dhttp.proxyHost=foo.com -Dhttp.proxyPort=foo.com -Dhttp.proxyUser=chris -Dhttp.proxyPassword=xxx
cbf$ HTTP_PROXY=http://chris:xxx@foo.com:80 ./javabuild.sh
-Dhttp.proxyHost=foo.com -Dhttp.proxyPort=80 -Dhttp.proxyUser=chris -Dhttp.proxyPassword=xxx
cbf$ HTTPS_PROXY=http://chris:xxx@foo.com:80 ./javabuild.sh
-Dhttps.proxyHost=foo.com -Dhttps.proxyPort=80 -Dhttps.proxyUser=chris -Dhttps.proxyPassword=xxx
cbf$ HTTPS_PROXY=http://chris:xxx@foo.com ./javabuild.sh
-Dhttps.proxyHost=foo.com -Dhttps.proxyPort=foo.com -Dhttps.proxyUser=chris -Dhttps.proxyPassword=xxx
cbf$ HTTPS_PROXY=http://foo.com ./javabuild.sh
-Dhttps.proxyHost=http -Dhttps.proxyPort=//foo.com -Dhttps.proxyUser=foo.com -Dhttps.proxyPassword=foo.com
cbf$ 
","22/Apr/17 5:59 AM;nnao;Thank you for review!
I will deal with this.",,,,,,,,,,,,,,,,,,,,
Required node engine and npm version ranges need to be tightened,FAB-1954,14456,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,31/Jan/17 3:48 PM,08/Feb/17 3:39 PM,26/Apr/18 6:50 AM,08/Feb/17 3:39 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,so that we don't end up supporting many versions that we won't be able to fully test,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhq:zzy,,Sprint 10 - nodeSDK,,,,,,jimthematrix,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
end-to-end.js test does not run with default fabric-ca docker image,FAB-1952,14454,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,31/Jan/17 11:51 AM,08/Feb/17 3:40 PM,26/Apr/18 6:50 AM,08/Feb/17 3:40 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"the fabric-ca docker image uses server-config.json that has only one user: ""admin"". the end-to-end.js test must use that user in order to run successfully",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhq:zzx,,Sprint 10 - nodeSDK,,,,,,jimthematrix,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
deploy is failing on latest commits (fabric 8762744),FAB-1951,14453,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,rameshthoomu,rameshthoomu,31/Jan/17 4:40 AM,01/Feb/17 4:01 AM,26/Apr/18 6:50 AM,01/Feb/17 4:01 AM,,,,,,,,,,,,,,0,,,,,,,,,"Deploy is failing on latest commits after create and join channel:
fabric 8762744
fabric-ca: 6294c57
*DEPLOY*

CORE_PEER_ADDRESS=peer0:7051 CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 peer chaincode deploy -C myc1 -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}'

Below is the log file on peer0 and cli container:

CLI: 2017-01-31 04:35:53.301 UTC [msp] Sign -> DEBU 02d Sign: digest: 9B50A73E79D5CA57096E0DC80DA79165926F8443A8F9B0BA4FE94E2976981B0A
Error: Error endorsing chaincode: rpc error: code = 2 desc = Failed to deploy chaincode spec(Error creating image: %!s(<nil>))

Usage:
  peer chaincode deploy [flags]

Global Flags:
  
PEER0:

2017-01-31 04:35:53.306 UTC [container] lockContainer -> DEBU 64f got container (peer0-peer0-mycc-0-c659a47dce16ded8af86b9f91dfc411edac0416e43dff2ced2faac39f7633bbbde2fcc9a65a5d07adaeca3513c970f7b8b9f4125848bea488e5e1cfc85db5ac0) lock
2017-01-31 04:35:53.356 UTC [dockercontroller] deployImage -> ERRO 650 Error building images: lstat src: no such file or directory
2017-01-31 04:35:53.356 UTC [dockercontroller] deployImage -> ERRO 651 Image Output:
********************
Step 1 : FROM hyperledger/fabric-ccenv:x86_64-0.7.0-snapshot-8762744
 ---> aacf3d44609f
Step 2 : COPY src $GOPATH/src

********************
2017-01-31 04:35:53.356 UTC [container] unlockContainer -> DEBU 652 container lock deleted(peer0-peer0-mycc-0-c659a47dce16ded8af86b9f91dfc411edac0416e43dff2ced2faac39f7633bbbde2fcc9a65a5d07adaeca3513c970f7b8b9f4125848bea488e5e1cfc85db5ac0)
2017-01-31 04:35:53.356 UTC [lockbasedtxmgr] Done -> DEBU 653 Done query executer/ tx simulator [82c227e4-8e8d-4c23-b124-619f5f87e048]
2017-01-31 04:35:54.381 UTC [peer] GetLocalMSP -> INFO 654 Returning existing local MSP
2017-01-31 04:35:54.381 UTC [msp] GetDefaultSigningIdentity -> INFO 655 Obtaining default signing identity
20",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00oa1:,,,,,,,,rameshthoomu,,,,,,,,,,,,,,"01/Feb/17 4:01 AM;rameshthoomu;Tested this on latest commits c7b3fe02ae982d974423c97bd983ecf7cb3e7deb (Fabric)  6294c57c4ac57ba713bf71ae32c6d77cdc6cae56 (fabric-ca) and observed create channel, join, deploy, invoke and query is working as expected. Closing this issue now..",,,,,,,,,,,,,,,,,,,,,,,
The fabric-ca cli/client unit tests fail when /tmp (or TMPDIR) and the fabric-ca codebase reside on different disk partitions or filesystem boundaries,FAB-1949,14451,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,harrijk,harrijk,30/Jan/17 11:56 PM,19/Apr/17 1:05 AM,26/Apr/18 6:50 AM,19/Apr/17 1:05 AM,,,,,,,v1.0.0,,,fabric-ca,,,,0,MembershipServices,,,,,,,,"Prior to issuing an enroll operation within the TestEnrollCLI test, a configuration file is setup within a temporary directory -- /tmp/client<random-number>.  The configuration file within the temporary directory is intended to be a hard link that is created using the *os.Link(""../../testdata/client-config2.json"", clientConfig)* statement.

If the testdata/client-config2.json file and intended hard link (value of clientConfig) are on different filesystem boundaries or span disk partitions, the hard link will NOT be created.

This will result in a cli/client unit test failure (TestEnrollCLI) and the following error messages are displayed:

13:59:45 --- FAIL: TestEnrollCLI (10.00s)
13:59:45 	client_test.go:62: Failed to register, err:  Failed to load client config file [open /tmp/client619326020/client-config.json: no such file or directory]; not sending

Perhaps symbolic links could be used instead of hard links.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o9l:,,,,,,,,harrijk,smithbk,,,,,,,,,master,,,true,"01/Feb/17 8:41 PM;harrijk;The commit associated with this issue is intended to be a ""workaround"" until the unit test code is changed to utilize symlinks instead of hard links. Theoretically, this issue could occur on x or p if the Jenkins workers have the cloned repos and /tmp on separate physical disks (or cross file system boundaries).",19/Apr/17 1:05 AM;smithbk;Closing this because there are no longer any occurrences of os.Link anywhere in fabric-ca code or test cases.,,,,,,,,,,,,,,,,,,,,,,
Add flexibility to change gopath from command line with sample node deploy,FAB-1948,14450,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Ratnakar,Ratnakar,Ratnakar,30/Jan/17 9:56 PM,01/Feb/17 3:37 AM,26/Apr/18 6:50 AM,01/Feb/17 3:37 AM,,,,,,,,,,,,,,0,quality,,,,,,,,"Instead of changing the config.json from https://github.com/hyperledger/fabric-sdk-node/blob/master/examples/balance-transfer/config.json

Add the flexibility to change the GOPATH from node program


{panel}
ex: GOPATH=<gopath> node deploy.js
{panel}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o9d:,,,,,,,,Ratnakar,,,,,,,,,,master,,,true,"30/Jan/17 11:01 PM;Ratnakar;Submitted patches for both branches Master and v1.0-alpha

Master : https://gerrit.hyperledger.org/r/#/c/5077
v1.0-alpha : https://gerrit.hyperledger.org/r/#/c/5087",,,,,,,,,,,,,,,,,,,,,,,
Connect gossip and MSP implementation,FAB-1947,14449,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,30/Jan/17 8:48 PM,01/Feb/17 7:14 PM,26/Apr/18 6:50 AM,01/Feb/17 7:14 PM,,,,,,,,,,,,,,0,,,,,,,,,"We need to connect the gossip with the MSP implementation of the message crypto service and the security advisor, which are interfaces that gossip uses for crypto/identity.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00o95:,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
U 1c6 Error while loading ledger %s with message %s. We continue to the next ledger rather than abort. testchainid Ledger already opened,FAB-1945,14447,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jjjjibm,jjjjibm,30/Jan/17 8:02 PM,07/Apr/17 7:01 PM,26/Apr/18 6:50 AM,07/Apr/17 7:01 PM,,,,,,,,,,fabric-ledger,,,,0,,,,,,,,,"I saw this in the log when starting fabric with attached yml file.

U 1c6 Error while loading ledger %s with message %s. We continue to the next ledger rather than abort. testchainid Ledger already opened

It seems %s should be expanded. ",vlaunch VM running Ubuntu,,,,,,,,,,,,,,,,,,,30/Jan/17 8:02 PM;jjjjibm;docker-compose.yml;https://jira.hyperledger.org/secure/attachment/10408/docker-compose.yml,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhy:zz9xr9,,,,,,,,denyeart,jjjjibm,,,,,,,,,,,,,07/Apr/17 7:01 PM;denyeart;Already fixed.,,,,,,,,,,,,,,,,,,,,,,,
Update readthedocs to work around fabric-ca bug,FAB-1942,14444,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,smithbk,smithbk,30/Jan/17 6:42 PM,06/Apr/17 1:10 AM,26/Apr/18 6:50 AM,06/Apr/17 1:10 AM,,,,,,,,,,fabric-ca,,,,0,,,,,,,,,"Updating the readthedocs to work around a bug which requires that we always specify a csr.json file on the enroll command.

The enroll command returns the following error when the csr.json argument (last optional argument) is omitted.
{code}
# fabric-ca client enroll -config client-config.json admin adminpw https://localhost:7054
open -port: no such file or directory
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o81:,,Sprint 10 - Membership Service,,,,,,smithbk,,,,,,,,,,master,,,true,30/Jan/17 7:42 PM;smithbk;https://gerrit.hyperledger.org/r/#/c/5035/,,,,,,,,,,,,,,,,,,,,,,,
"To run the Node.js unit tests, follow the instructions <dead link>",FAB-1937,14439,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,30/Jan/17 4:30 PM,13/Apr/17 11:33 PM,26/Apr/18 6:50 AM,13/Apr/17 11:33 PM,,,,,,,WON'T FIX,,,fabric-docs,,,,0,,,,,,,,,"This page on the hyperledger -fabric web site: http://hyperledger-fabric.readthedocs.io/en/latest/dev-setup/build/

Has this text:

Running Node.js Unit Tests

You must also run the Node.js unit tests to insure that the Node.js client SDK is not broken by your changes. To run the Node.js unit tests, follow the instructions <hyperlink named 'here'>

When you click the hyperlink, it takes you to this page: https://github.com/hyperledger/fabric-sdk-node/README.md

and displays the message Not Found.

How to recreate:
1.Enter http://hyperledger-fabric.readthedocs.io/en/latest/dev-setup/build/
in your browser navigation bar.
2.Scroll down or search page to locate this text: To run the Node.js unit tests, follow the instructions here.
3.Click the word 'here'.






",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o6x:,,,,,,,,ChristopherFerris,jjjjibm,,,,,,,,,,,,,13/Apr/17 11:33 PM;ChristopherFerris;no longer relevant,,,,,,,,,,,,,,,,,,,,,,,
Ledger ExecuteQuery() should not panic on leveldb,FAB-1933,14435,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,denyeart,denyeart,denyeart,30/Jan/17 4:52 AM,01/Feb/17 3:18 PM,26/Apr/18 6:50 AM,30/Jan/17 11:23 AM,,,,,,,,,,fabric-ledger,,,,0,,,,,,,,,"ExecuteQuery() is not supported on leveldb state
database.  Currently if called it will panic the peer.
This changeset changes it to a normal error
so that it does not kill the peer process.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00dzq:m6mj3i,,Sprint 10 - Ledger,,,,,,denyeart,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Update fabric-ca-client package.json with missing package bn.js,FAB-1932,14434,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,29/Jan/17 7:57 PM,08/Feb/17 3:37 PM,26/Apr/18 6:50 AM,08/Feb/17 3:37 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,Discovered when testing the example app in a standalone folder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhq:zzzv,,Sprint 10 - nodeSDK,,,,,,jimthematrix,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
V1.0 Update default test_chainid to testchainid,FAB-1923,14425,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rickr,jimthematrix,jimthematrix,29/Jan/17 2:51 AM,31/Jan/17 7:10 PM,26/Apr/18 6:50 AM,31/Jan/17 7:08 PM,,,,,,,v1.0.0,,,fabric-sdk-java,,,,0,v1.0,,,,,,,,due to https://gerrit.hyperledger.org/r/#/c/4931/,,,,,,,,,,,,,,FAB-1922,,,FAB-1839,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o49:,,Sprint 10 - Java SDK,,,,,,jimthematrix,rickr,,,,,,,,,,,,,31/Jan/17 7:09 PM;rickr;Done with FAB-1839,,,,,,,,,,,,,,,,,,,,,,,
Update default test_chainid to testchainid,FAB-1922,14424,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jimthematrix,jimthematrix,29/Jan/17 2:48 AM,08/Feb/17 3:38 PM,26/Apr/18 6:50 AM,08/Feb/17 3:38 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,due to https://gerrit.hyperledger.org/r/#/c/4931/,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhq:zzzr,,Sprint 10 - nodeSDK,,,,,,jimthematrix,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"end-to-end tests are failing as ""ca"" reference has been removed from fabric-sdk node docker-compose file",FAB-1921,14423,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,rameshthoomu,rameshthoomu,29/Jan/17 2:25 AM,29/Jan/17 8:31 PM,26/Apr/18 6:50 AM,29/Jan/17 8:31 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"end-to-end tests are failing as ""ca"" reference has been removed from fabric-sdk node docker-compose file",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o3t:,,,,,,,,rameshthoomu,,,,,,,,,,,,,,29/Jan/17 2:25 AM;rameshthoomu;Jim given fix: https://gerrit.hyperledger.org/r/#/c/4979/1,,,,,,,,,,,,,,,,,,,,,,,
occasional CI failures in TestTenReplicasBombedWithBroadcasts,FAB-1916,14418,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,hgabre,muralisr,muralisr,28/Jan/17 1:51 PM,02/Oct/17 11:54 AM,26/Apr/18 6:50 AM,02/Oct/17 11:54 AM,Future,,,,,,Future,,,fabric-orderer,,,,0,sbft,,,,,,,,"Hopefully a transient CI failure as a ""reverify"" works. However it has happened twice (at least) at different times. Would be good to check it out and eliminate any potential issues.

{code:java}
 |[0m --- FAIL: TestTenReplicasBombedWithBroadcasts (83.28s)
09:41:51 [33munit-tests_1  |[0m 	network_test.go:229: Failed to receive some messages. (Received 0)
{code}

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5847/console

[~yacovm] you may have some insight as well given you parallelized this test ?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00o35:,,,,,,,,ChristopherFerris,kchristidis,muralisr,yacovm,,,,,,,,,,,"28/Jan/17 3:00 PM;yacovm;I don't think I can have insight on this.
If the failure was that it tries to bind to the same port or something, that would've been something related to parallelization . ",28/Jan/17 3:00 PM;yacovm;Perhaps [~hgabre] ? ,13/Apr/17 11:50 PM;ChristopherFerris;has this been resolved? [~yacovm],"14/Apr/17 6:15 AM;yacovm;I think it has, as I didn't see such a failure in a long, long time. but this isn't related to me, it's an sBFT test :)
I say we close this.",14/Apr/17 6:25 AM;kchristidis;There is no reason for this to be tagged with v1.0 since sBFT is not a viable option for 1.0 to begin with. I am backlogging this until either Gabor resurfaces with more details or someone else starts working on sBFT.,,,,,,,,,,,,,,,,,,,
expecting block 2 instead of block 1 after join,FAB-1889,14390,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,muralisr,muralisr,27/Jan/17 1:43 PM,05/Mar/17 5:28 PM,26/Apr/18 6:50 AM,05/Mar/17 5:28 PM,,,,,,,,,,fabric-gossip,,,,0,,,,,,,,,The first deploy after join fails because fabric expects block2 instead of block 1. (The nice thing is that the incoming block is thrown out as it should be.),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00nwx:,,,,,,,,muralisr,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Genesis block is not committed to the ledger while creating a chain for the first time.,FAB-1872,14373,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,26/Jan/17 6:35 PM,27/Jan/17 4:23 PM,26/Apr/18 6:50 AM,26/Jan/17 11:17 PM,,,,,,,,,,,,,,0,,,,,,,,,"Currently, while join channel get call for very first time, it contains the genesis block, however this block is not get committed to the ledger. As a consequence whenever delivery client queries the committer for the current ledger height it's getting zero, therefore asking from the ordering service blocks starting from the 0 sequence number.

Since block with sequence number 0 gets to the peer it fails validation of configuration transaction, since it expect to get configuration blocks in the increasing order, while getting *again* same configuration blocks (genesis). Eventually the flow results with following errors in the log:

{code}
ND -----\n"" nonce:""O\233\373}.w\207M\221\245\317\030\276u\235\226#C\250\207+\213\245\370"" >
2017-01-26 17:00:31.866 UTC [protoutils] ValidateTransaction -> INFO 099 ValidateTransactionEnvelope returns err %!s(<nil>)
2017-01-26 17:00:31.867 UTC [txvalidator] Validate -> CRIT 09a Error validating configuration which passed initial validity checks:Config sequence number jumped from 0 to 0
2017-01-26 17:00:31.867 UTC [peer] createChain -> INFO 09b XXXXXXX: Currently ledger is at height =  0
2017-01-26 17:00:31.867 UTC [peer] createChain -> INFO 09c Calling gossip to initialize the channel
{code}

The solution should be to make genesis block get committed to the ledger for the first time it called for create chain.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ntd:,,,,,,,,C0rWin,inatatsu,muralisr,,,,,,,,master,,,true,"26/Jan/17 6:50 PM;muralisr;[~C0rWin] So the idea would be that if the first block on was a bad/incorrect/wrong for some reason, the chain wont work on subsequent blocks anyway... so it's ok to create the block at the time of creating the ledger on join, right ?","26/Jan/17 6:57 PM;C0rWin;As far as I concerned this is correct, but probably worth asking [~jyellick]",,,,,,,,,,,,,,,,,,,,,,
failing to deploy chaincode if peers are not launched with compose,FAB-1871,14372,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,nherbaut33,nherbaut33,26/Jan/17 6:24 PM,11/May/17 8:49 PM,26/Apr/18 6:50 AM,11/May/17 8:49 PM,,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"We want to run multiple peers on multiple machine by launching the containers by hand (not with compose)

When launching them with compose on a single machine, it works like a charm. However, when launching it by hand (using the hints from https://github.com/hyperledger/fabric/tree/master/examples/events/block-listener#run-4-docker-peers-with-pbft) on a single machine we have errors:

18:22:10.732 [consensus/pbft] ProcessEvent -> INFO 02d Replica 0 view change timer expired, sending view change: new request batch 7bdHx57T+4kLAy17eah3jxVBOOEMsN/IxK0b4XCEWoJEbzm6AevpdJkeQMYMVM+5Uw5sDyaub5sUkgdFD3zzWA==
18:22:10.732 [consensus/pbft] sendViewChange -> INFO 02e Replica 0 sending view-change, v:1, h:0, |C|:1, |P|:0, |Q|:1
18:22:10.732 [consensus/pbft] recvViewChange -> INFO 02f Replica 0 received view-change from replica 0, v:1, h:0, |C|:1, |P|:0, |Q|:1
18:22:12.733 [consensus/pbft] sendViewChange -> INFO 030 Replica 0 sending view-change, v:1, h:0, |C|:1, |P|:0, |Q|:1
18:22:12.733 [consensus/pbft] recvViewChange -> INFO 031 Replica 0 received view-change from replica 0, v:1, h:0, |C|:1, |P|:0, |Q|:1
18:22:12.733 [consensus/pbft] recvViewChange -> WARN 032 Replica 0 already has a view change message for view 1 from replica 0
18:22:14.734 [consensus/pbft] sendViewChange -> INFO 033 Replica 0 sending view-change, v:1, h:0, |C|:1, |P|:0, |Q|:1","lastest docker images:
hyperledger/fabric-peer latest              21cb00fb27f4",,,,,,,,,,,,,,,,,,,26/Jan/17 6:23 PM;nherbaut33;docker-compose.yml;https://jira.hyperledger.org/secure/attachment/10404/docker-compose.yml,26/Jan/17 6:22 PM;nherbaut33;issue-by-hand.txt;https://jira.hyperledger.org/secure/attachment/10406/issue-by-hand.txt,26/Jan/17 6:22 PM;nherbaut33;ok-with-compose.txt;https://jira.hyperledger.org/secure/attachment/10405/ok-with-compose.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00nt5:,,,,,,,,ChristopherFerris,dbourasseau,denyeart,jyellick,nherbaut33,,,,,,,,,,"21/Mar/17 3:48 PM;jyellick;This likely indicates one of two things:

1. The chaincode deployment was sent before the network was fully intiialized, and caused a view change timeout on vp0, but did not on the rest of the network.
2. The network is not actually up and connected.

Please attach logs for the other peers.","11/Apr/17 9:55 PM;denyeart;[~nherbaut33]
Were you able to make progress based on Jason's advice? Are you still having an issue?","11/May/17 7:48 PM;ChristopherFerris;[~nherbaut33] are you still seeing the issue above? If so, can you please share the logs as requested by Jason?","11/May/17 8:48 PM;nherbaut33;[~ChristopherFerris], we moved to v1.0 and modified our deployment scripts. We didn't encounter this problem anymore with the new implementaiton.

 

 ",,,,,,,,,,,,,,,,,,,,
Make paths work under windows,FAB-1865,14366,Bug,Invalid,FAB,Fabric,software,ChristopherFerris,,,Medium,,,vukolic,vukolic,26/Jan/17 4:06 PM,05/Apr/18 5:15 PM,26/Apr/18 6:50 AM,,Future,,,,,,Future,,,fabric-baseimage,,,,0,,,,,,,,,"under windows (outside vagrant), ""go test"" in /orderer yields sth like:

--- FAIL: TestTwoReplicasBroadcastAndDeliverUsingDifferent (0.08s)
panic: exec: ""C:\\Users\\mvu\\AppData\\Local\\Temp/orderer"": file does not exist [recovered]
       panic: exec: ""C:\\Users\\mvu\\AppData\\Local\\Temp/orderer"": file does not exist",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00nrt:,,,,,,,,ChristopherFerris,mastersingh24,vukolic,,,,,,,,,,,,31/May/17 11:55 PM;mastersingh24;we are planning to remove sbft from v1.0.0 so moving this to future release,05/Apr/18 5:15 PM;ChristopherFerris;no longer valid,,,,,,,,,,,,,,,,,,,,,,
"Multichannel deploy fails if user doesn't have ""hyperledger-fabric--cenv:x86_64-0.7.0-snapshot-<commit> tag",FAB-1860,14361,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,rameshthoomu,rameshthoomu,26/Jan/17 3:52 AM,26/Apr/17 2:38 AM,26/Apr/18 6:50 AM,26/Apr/17 2:38 AM,v1.0.0,,,,,,v1.0.0,,,,,,,0,chaincode,,,,,,,,"Multi channel Deploy fails if user doesn't have both latest and snapshot tags of hyperledger/fabric-ccenv image

*Issue Description:*
While deploying chaincode using multi channel execution commands, observed deploy is failing in the following scenarios.

*Scenario1:*  Deploy fails from node sdk, If user doesn't have hyperledger/fabric-ccenv:latest
*Scenario2*: , Deploy fails from CLI commands, If user doesn't have hyperledger/fabric-ccenv:<snapshot> tag

This works as expected when user builds images (*make docker*)and spinup the network using docker-compose files but deploy fails to the users who don't want to build images manually. You can consider the scenario like developers participating in hackthons or hackfest. They just spinup the network using docker-compose which will pull all the required images(Using Docker-compose file we can pull any one specified tag like ""latest"" or ""snapshot"")

*Workaround:* workaround for this mentioned here from Lines 7 to 19 https://github.com/hyperledger/fabric/blob/master/examples/sfhackfest/docker-compose-gettingstarted.yml#L7.",Vagrant,,,,,,,,,,,,,,,,,,,05/Feb/17 5:45 PM;rameshthoomu;ccenv-latest.txt;https://jira.hyperledger.org/secure/attachment/10420/ccenv-latest.txt,05/Feb/17 5:47 PM;rameshthoomu;ccenv-snapshottag.txt;https://jira.hyperledger.org/secure/attachment/10421/ccenv-snapshottag.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00nqp:,,,,,,,,kchristidis,muralisr,rameshthoomu,,,,,,,,,,,,02/Feb/17 5:06 PM;muralisr;[~rameshthoomu] core.yaml has the default setting and meant to be replaced with actual values...,"03/Feb/17 1:03 AM;muralisr;[~rameshthoomu] [~ghaskins]
Replacing CORE_CHAINCODE_DOCKERFILE via an environnment variable is hard (perhaps impossible) given the multiline format for Dockerfile.

Propose we introduce a new {{chaincode.dockertag}} property.

{code:java}
###############################################################################
#
#    Chaincode section
#
###############################################################################
chaincode:

    # docker tag default. Can be replaced via environment variable CORE_CHAINCODE_DOCKERTAG
    #This value in turn will replace $(DOCKERTAG) in the Dockerfile property
    dockertag: $(ARCH)-$(PROJECT_VERSION)

    # The id is used by the Chaincode stub to register the executing Chaincode
    # ID with the Peerand is generally supplied through ENV variables
    # the Path form of ID is provided when deploying the chaincode. The name is
    # used for all other requests. The name is really a hashcode
    # returned by the system in response to the deploy transaction. In
    # development mode where user runs the chaincode, the name can be any string
    id:
        path:
        name:

    golang:

        # This is the basis for the Golang Dockerfile.  Additional commands will
        # be appended depedendent upon the chaincode specification.
        Dockerfile:  |
          FROM hyperledger/fabric-ccenv:$(DOCKERTAG)
          COPY src $GOPATH/src
          WORKDIR $GOPATH

    car:

        # This is the basis for the CAR Dockerfile.  Additional commands will
        # be appended depedendent upon the chaincode specification.
        Dockerfile:  |
            FROM hyperledger/fabric-ccenv:$(DOCKERTAG)

    java:
        # This is an image based on java:openjdk-8 with addition compiler
        # tools added for java shim layer packaging.
        # This image is packed with shim layer libraries that are necessary
        # for Java chaincode runtime.
        Dockerfile:  |
            from hyperledger/fabric-javaenv:$(DOCKERTAG)
{code}

Where user can specify any tag to replace {{chaincode.dockertag}} property.  For example
{code}
CORE_CHAINCODE_DOCKERTAG=x86_64-0.7.0-snapshot-f7a9f37 peer chaincode deploy -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}'

CORE_CHAINCODE_DOCKERTAG=latest peer chaincode deploy -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}'


CORE_CHAINCODE_DOCKERTAG=badtag peer chaincode deploy -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}'

{code}

The first two will work and the last is an example of a tag that won't work.","05/Feb/17 12:04 AM;rameshthoomu;Below are the observations while deploying chaincode keeping ccenv image in system:

(hyp) vagrant@hyperledger-devenv:v0.3.0-c34b164:/opt/gopath/src/github.com/hyperledger$ docker images | grep hyperledger/fabric-ccenv
*hyperledger/fabric-ccenv         x86_64-0.7.0-snapshot-64bfdff   a8b9d7e615b2        27 hours ago        1.29 GB
*(hyp) vagrant@hyperledger-devenv:v0.3.0-c34b164:/opt/gopath/src/github.com/hyperledger$

CORE_CHAINCODE_DOCKERTAG=x86_64-0.7.0-snapshot-64bfdff peer chaincode deploy -C myc1 -n mycc -p github.com/hyperledger/fabric/examples -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}'* (Deploy Working)*
CORE_CHAINCODE_DOCKERTAG=latest peer chaincode deploy -C myc1 -n mycc -p github.com/hyperledger/fabric/examples -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}'* (Deploy Not working)*

(hyp) vagrant@hyperledger-devenv:v0.3.0-c34b164:/opt/gopath/src/github.com/hyperledger$ docker images | grep hyperledger/fabric-ccenv
*hyperledger/fabric-ccenv         latest   a8b9d7e615b2        27 hours ago        1.29 GB*
(hyp) vagrant@hyperledger-devenv:v0.3.0-c34b164:/opt/gopath/src/github.com/hyperledger$

CORE_CHAINCODE_DOCKERTAG=x86_64-0.7.0-snapshot-64bfdff peer chaincode deploy -C myc1 -n mycc -p github.com/hyperledger/fabric/examples -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}*' (Deploy Not Working)*
CORE_CHAINCODE_DOCKERTAG=latest peer chaincode deploy -C myc1 -n mycc -p github.com/hyperledger/fabric/examples -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}' *(Deploy working)*
","05/Feb/17 1:56 PM;muralisr;[~rameshthoomu] so basically using CORE_CHAINCODE_DOCKERTAG to override default core.yaml to match the docker image tag in the user workspace works with this fix, correct ?","05/Feb/17 5:44 PM;rameshthoomu;yes [~muralisr]. I see it is working when I have ccenv image with ""latest"" tag and try to deploy with ""latest"" tag. But shouldn't be a issue if user pulls ""ccenv snapshot tag"" and try to deploy with ""latest ""tag? I am seeing deploy failure if the overriding tag is not available in the system. refer above scenarios for the possible cases..  ","05/Feb/17 9:03 PM;muralisr;[~rameshthoomu] If user pulls ""ccenv snapshot tag"", then  ""CORE_CHAINCODE_DOCKERTAG"" should point to that. Basically "" ""CORE_CHAINCODE_DOCKERTAG"" should point to whatever's there on the system. If its not specified core.yaml will be used.

Why would one download  ""ccenv snapshot tag"" and then set ""CORE_CHAINCODE_DOCKERTAG=latest"" ?
","06/Feb/17 8:34 PM;rameshthoomu;
{panel}
[~muralisr]: Agree. We should stick to any one tag either ""snapshot"" or ""latest"" but as mentioned we may not push ""latest"" tag to hyperledger dockerhub. In this case, user has to depend on ""snapshot"" tag. I see [~ghaskins] removed ccenv:latest tag dependency from fabric-sdk-node repository

With Greg's change, ccenv:latest is more required for deployment  from sdk so this clears patch to use snapshot tag for CLI deployment.
{panel}
","19/Apr/17 1:39 PM;kchristidis;[~rameshthoomu], [~muralisr]: Where do we stand on this?

I've also removed the ""fabric-orderer"" component as it's not related.","20/Apr/17 12:03 AM;muralisr;This has been fixed by [~greg.haskins] properly with his work https://jira.hyperledger.org/browse/FAB-2826 (https://gerrit.hyperledger.org/r/#/c/7163/) which generalizes 3 key tags for even fine-grained control than what was originally intended in this CR and abandoned (see https://gerrit.hyperledger.org/r/#/c/5497/)
* docker namespace (default ""hyperledger"")
* arch
* project version

Given that I think this can be closed. 

Can you please close if you agree [~rameshthoomu] ?",26/Apr/17 2:38 AM;rameshthoomu;It's working as expected with [~greg.haskins] fixes.. Closing this issue.,,,,,,,,,,,,,,
Files containing colons in filename block Windows users from checking out repo,FAB-1854,14355,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ryjones,ryjones,ryjones,25/Jan/17 6:14 PM,12/May/17 4:55 PM,26/Apr/18 6:50 AM,06/Apr/17 4:57 PM,,,,,,,,,,fabric-ca,,,,0,,,,,,,,,"[Original report|https://github.com/hyperledger/fabric-ca/issues/1]

bq. hova0 commented 5 days ago
bq. When attempting to clone or fetch the current repository at commit 8894989
bq. the following files fail to download due to "":"" being in the filename which is illegal on Windows based filesystems:
bq. 
bq. vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA.crt
bq. vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA_2.crt

Repro on Windows:
{{git clone http://gerrit.hyperledger.org/r/fabric-ca}}",Any version of Windows,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00npd:,,,,,,,,lehors,ryjones,smithbk,,,,,,,,master,,,true,"25/Jan/17 8:04 PM;lehors;As far as I can tell this it not actually a problem with the files or Windows but with the Windows git command.
Running the same command with cygwin git works just fine:

With Cygwin git:
{code:java}
$ git clone http://gerrit.hyperledger.org/r/fabric-ca
Cloning into 'fabric-ca'...
remote: Counting objects: 2852, done
remote: Finding sources: 100% (5/5)
remote: Total 3852 (delta 0), reused 3849 (delta 0)
Receiving objects: 100% (3852/3852), 18.92 MiB | 322.00 KiB/s, done.
Resolving deltas: 100% (830/830), done.
Checking connectivity... done.
Checking out files: 100% (3987/3987), done.

$ ls fabric-ca/vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA*
'fabric-ca/vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA.crt'
'fabric-ca/vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA_2.crt'

$ which git
/usr/bin/git

$ git --version
git version 2.8.3
{code}

With Windows git:
{code:java}
C:\tmp>git clone http://gerrit.hyperledger.org/r/fabric-ca
Cloning into 'fabric-ca'...
remote: Counting objects: 2852, done
remote: Finding sources: 100% (5/5)
remote: Total 3852 (delta 0), reused 3849 (delta 0)
Receiving objects: 100% (3852/3852), 18.92 MiB | 1.65 MiB/s, done.
Resolving deltas: 100% (830/830), done.
error: unable to create file vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA.crt: Invalid argument
error: unable to create file vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA_2.crt: Invalid argument
Checking out files: 100% (3987/3987), done.
fatal: unable to checkout working tree
warning: Clone succeeded, but checkout failed.
You can inspect what was checked out with 'git status'
and retry the checkout with 'git checkout -f HEAD'

C:\tmp>where git
C:\Program Files (x86)\Git\cmd\git.exe

C:\tmp>git version
git version 2.11.0.windows.3
{code}
","06/Apr/17 1:27 AM;smithbk;Hi Ry, if this is really an issue that needs to be fixed, then it would require opening a bug against github.com/cloudflare/cfssl since the file names with colons are there.
",11/Apr/17 1:01 AM;smithbk;See http://gerrit.hyperledger.org/r/7913,,,,,,,,,,,,,,,,,,,,,
Revoked certificate incorrectly reported as not revoked,FAB-1853,14354,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,rennman,rennman,25/Jan/17 5:03 PM,06/Apr/17 1:28 AM,26/Apr/18 6:50 AM,06/Apr/17 1:28 AM,,,,,,,,,,fabric-ca,,,,0,MembershipServices,Security,,,,,,,"I revoked an admin certificate, but the admin was still able to register users.
     2017/01/25 11:11:07 [DEBUG] Revoke request: {RevocationRequest:{Name:admin Serial:17176555878820730978701962264948070847709639544 AKI:c7be28d6d6795edf28db1fa53d307d74f8930270 Reason:0}}
     2017/01/25 11:11:07 [DEBUG] Revoke was successful: %+v{{admin 17176555878820730978701962264948070847709639544 c7be28d6d6795edf28db1fa53d307d74f8930270 0}}
     2017/01/25 11:11:07 [INFO] 127.0.0.1:52444 - ""POST /api/v1/cfssl/revoke"" 200


revoke.VerifyCertificate is returning
  revokedOrExpired: false
  checked: true
indicating that cfssl considers the certificate non-revoked.

However, an inspection of the sqlite DB shows revoked:
admin|1.71765558788207e+46|c7be28d6d6795edf28db1fa53d307d74f8930270||revoked|0|2017-11-28 08:00:00+00:00|2017-01-25 16:11:07|-----BEGIN CERTIFICATE-----
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00np5:,,,,,,,,aambati,rennman,,,,,,,,,master,,,true,21/Mar/17 5:31 PM;aambati;[~rennman]This problem will be resolved by the change set: https://gerrit.hyperledger.org/r/#/c/6955,,,,,,,,,,,,,,,,,,,,,,,
Range query state handler should deep copy values from ledger,FAB-1837,14338,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,inatatsu,inatatsu,25/Jan/17 7:56 AM,11/Apr/17 9:29 PM,26/Apr/18 6:50 AM,11/Apr/17 9:28 PM,,,,,,,v1.0.0,,,fabric-peer,,,,0,common-components,quality,,,,,,,A value returned by shim.PartialCompositeKeyQuery() intermittently differs from the one returned by shim.GetState() for the corresponding key. The root cause is that the chaincode message handler copies byte array pointers instead of copied byte arrays for the values returned by the iterator of an underlying ledger.,,,,,,,,,,,,,,,,FAB-1541,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00nlt:,,,,,,,,denyeart,inatatsu,yoheiueda,,,,,,,,,,,,25/Jan/17 8:10 AM;inatatsu;https://gerrit.hyperledger.org/r/#/c/4805/,11/Apr/17 9:29 PM;denyeart;Will be tracked in FAB-1541.,,,,,,,,,,,,,,,,,,,,,,
Certificate revoke -aki value should be case-insensitive,FAB-1831,14332,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,rennman,rennman,24/Jan/17 10:48 PM,06/Mar/17 2:53 PM,26/Apr/18 6:50 AM,06/Mar/17 2:53 PM,,,,,,,,,,fabric-membersrvc,,,,0,,,,,,,,,"When issuing the fabric-ca client revoke command, the value passed in for the authority keyid (-aki) is case-sensitive for the purposes of the SQL query. Since this value represents a hexadecimal number, this should be a case-insensitive field.

e.g., I verified that this cert exists in the DB:
Name:admin
Serial:144790095028100641934921797894228565652597329902 AKI:54A784B1639C88B38B3111E80057233520940422

but SQL query fails:
    2017/01/24 15:14:53 [DEBUG] Revoke request: {RevocationRequest:{Name:admin Serial:144790095028100641934921797894228565652597329902 AKI:54A784B1639C88B38B3111E80057233520940422 Reason:0}}
    2017/01/24 15:14:53 [INFO] 127.0.0.1:51720 - ""POST /api/v1/cfssl/revoke"" 200
Error response from server was '{""code"":11200,""message"":""failed to revoke the certificate: certificate not found""}' for request:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00nkp:,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Certificate revocation fails to update user state in DB,FAB-1828,14329,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,rennman,rennman,24/Jan/17 7:54 PM,18/Apr/17 2:35 PM,26/Apr/18 6:50 AM,18/Apr/17 2:35 PM,v1.0.0,,,,,,v1.0.0,,,fabric-ca,,,,0,MembershipServices,Security,,,,,,,"1) Start fabric-ca
# ./scripts/fabric-ca_setup.sh -I -S -X

2) Enroll admin
# ./scripts/enroll.sh
     2017/01/24 14:31:45 [DEBUG] Getting user admin from the database
     2017/01/24 14:31:45 [DEBUG] DB: Login user admin with max enrollments of 1 and state of 0
     2017/01/24 14:31:45 [DEBUG] Successfully incremented state for user admin to 1
     2017/01/24 14:31:45 [DEBUG] DB: user admin successfully logged in
     2017/01/24 14:31:45 [DEBUG] User/Pass was correct
     2017/01/24 14:31:45 [DEBUG] Received request for endpoint enroll
     2017/01/24 14:31:45 [INFO] signed certificate with serial number 144790095028100641934921797894228565652597329902
     2017/01/24 14:31:45 [DEBUG] DB: Insert Certificate
     2017/01/24 14:31:45 [DEBUG] saved certificate with serial number 144790095028100641934921797894228565652597329902
     2017/01/24 14:31:45 [INFO] 127.0.0.1:51542 - ""POST /api/v1/cfssl/enroll"" 200
2017/01/24 14:31:45 [INFO] enrollment information was successfully stored in /home/ibmadmin/fabric-ca/key.pem and /home/ibmadmin/fabric-ca/cert.pem

3) Database contents of user and cert after enrollment (user status: '1' and cert status good, revoke date not set)
# sqlite3 ./testdata/fabric_ca.db ""SELECT * FROM users WHERE (id='admin');""
admin|adminpw|client|bank_a|[{""name"":""hf.Registrar.Roles"",""value"":""client,user,peer,validator,auditor""},{""name"":""hf.Registrar.DelegateRoles"",""value"":""client,user,validator,auditor""},{""name"":""hf.Revoker"",""value"":""true""}]|1|1

sqlite3 ./testdata/fabric_ca.db ""SELECT * FROM certificates WHERE (id='admin');""
admin|1.44790095028101e+47|54a784b1639c88b38b3111e80057233520940422||good|0|2017-11-28 08:00:00+00:00|0001-01-01 00:00:00+00:00|-----BEGIN CERTIFICATE-----

4) Revoke admin cert:
# ./bin/fabric-ca client revoke '127.0.0.1:8888' admin
     2017/01/24 14:33:43 [DEBUG] Revoke request received
     2017/01/24 14:33:43 [DEBUG] getUserAttrValue user=admin, attr=hf.Revoker
     2017/01/24 14:33:43 [DEBUG] Getting user admin from the database
     2017/01/24 14:33:43 [DEBUG] getUserAttrValue user=admin, name=hf.Revoker, value=true
     2017/01/24 14:33:43 [DEBUG] Revoke request: {RevocationRequest:{Name:admin Serial: AKI: Reason:0}}
     2017/01/24 14:33:43 [DEBUG] Getting user admin from the database
     2017/01/24 14:33:43 [DEBUG] Getting user admin information from the database
     2017/01/24 14:33:43 [DEBUG] userInfo: {admin adminpw client bank_a [{hf.Registrar.Roles client,user,peer,validator,auditor} {hf.Registrar.DelegateRoles client,user,validator,auditor} {hf.Revoker true}] 1 1}
     2017/01/24 14:33:43 [DEBUG] DB: Update User (admin) in database
     2017/01/24 14:33:43 [DEBUG] Revoke was successful: %+v{{admin   0}}
     2017/01/24 14:33:43 [INFO] 127.0.0.1:51546 - ""POST /api/v1/cfssl/revoke"" 200

5) Database contents of user and cert after revoke (user status: '1' and cert status good, revoke date not set):
sqlite3 ./testdata/fabric_ca.db ""SELECT * FROM users WHERE (id='admin');""
admin|adminpw|client|bank_a|[{""name"":""hf.Registrar.Roles"",""value"":""client,user,peer,validator,auditor""},{""name"":""hf.Registrar.DelegateRoles"",""value"":""client,user,validator,auditor""},{""name"":""hf.Revoker"",""value"":""true""}]|1|1

sqlite3 ./testdata/fabric_ca.db ""SELECT * FROM certificates WHERE (id='admin');""
admin|1.44790095028101e+47|54a784b1639c88b38b3111e80057233520940422||good|0|2017-11-28 08:00:00+00:00|0001-01-01 00:00:00+00:00|-----BEGIN CERTIFICATE-----
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00nk9:,,,,,,,,mastersingh24,rennman,skarim,,,,,,,,,,,,16/Apr/17 2:57 PM;mastersingh24;[~skarim] - I'm pretty sure this is not longer the case but can you please verify and close (or fix)?,18/Apr/17 2:34 PM;skarim;I can no longer reproduce this issue. I'm marking this as done. ,,,,,,,,,,,,,,,,,,,,,,
Need more robust certificate validation,FAB-1823,14324,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,rennman,rennman,24/Jan/17 4:30 PM,16/May/17 7:23 PM,26/Apr/18 6:50 AM,16/May/17 7:23 PM,v1.0.0,v1.0.0-alpha1,,,,,v1.0.0,,,fabric-ca,,,,0,MembershipServices,security,,,,,,,"At fabric-ca startup, when the server is passed a cert and key, the following tests fail -- certificate checks need to be beefed up.

1) Server should not accept expired CA certificate
        - past end date
        - future start date

     Currently, this is issued in both of the above cases:
     2017/01/18 17:21:44 [ERROR] Certificate expired
     2017/01/18 17:21:44 [WARNING] endpoint 'tcert' is disabled: Failed to initialize TCert handler: Certificate 
     expired
     2017/01/18 17:25:22 [INFO] 127.0.0.1:32822 - ""POST /api/v1/cfssl/enroll"" 200

     but we still use the cert for enrollment
     2017/01/18 17:25:22 [INFO] enrollment information was successfully stored in /root/cop/key.pem and 
     /root/cop/cert.pem

2) Server should not accept CA certificate with incorrect usage (must include at least 'Certificate Sign')
3) Server should not accept CA certificate with basicConstraint CA:false
4) Server should not accept CA RSA cert/key pair of < 2048 bits (this is consistent with the cfssl restriction)
5) Server should not accept CA certificate with non-matching private key
6) Server should gracefully handle the case of an unsupported key type (e.g. DSA)

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00lsl:,,Sprint 16 - Membership Service,,,,,,rennman,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Unit tests still use **TEST_CHAINID**,FAB-1803,14304,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,inatatsu,inatatsu,23/Jan/17 9:32 AM,24/Jan/17 4:11 AM,26/Apr/18 6:50 AM,24/Jan/17 4:11 AM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"While FAB-1763 had renamed the default chain ID from ""***TEST_CHAINID***"" to ""test_chainid"", unit tests in Node SDK still use the old chain ID, which causes test failure. Attached below is an output of the end-to-end test:
{code:java}
e2e        | ok 2 Successfully enrolled user 'admin'
e2e        | debug: [Chain.js]: getPeers - list size: 2.
e2e        | debug: [Chain.js]: Chain.sendDeployment- Successfully generated chaincode deploy archive and name (mycc)
e2e        | debug: [Chain.js]: buildChainHeader - type 3 chain_id **TEST_CHAINID** tx_id NaN epoch % chaincode_id null lccc
e2e        | [2017-01-23 07:37:02.142] [DEBUG] E2E - [crypto_ecdsa_aes]: ecdsa signature:  Signature {
e2e        |   r: <BN: 8630a5423becf5f9614dc47d96507d45190d938b80fa8231596e9e16486cb38>,
e2e        |   s: <BN: 6d7735c59a99c4e02c0c0d77a594c462e5510f906bd32e8ff437130ccd381fb4>,
e2e        |   recoveryParam: 0 }
e2e        | debug: [Chain.js]: _signProposal - signature::{""type"":""Buffer"",""data"":[48,68,2,32,8,99,10,84,35,190,207,95,150,20,220,71,217,101,7,212,81,144,217,56,184,15,168,35,21,150,233,225,100,134,203,56,2,32,109,119,53,197,154,153,196,224,44,12,13,119,165,148,196,98,229,81,15,144,107,211,46,143,244,55,19,12,205,56,31,180]}
e2e        | debug: [Chain.js]: getPeers - list size: 2.
e2e        | debug: [Peer.js]: Peer.sendProposal - Start
e2e        | debug: [Peer.js]: Peer.sendProposal - Start
e2e        | error: [Peer.js]: GRPC client got an error response from the peer. Error: Failed to deserialize creator identity, err MSP DEFAULT is unknown
e2e        |     at /fabric-sdk-node/node_modules/grpc/src/node/src/client.js:417:17
e2e        | error: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: Failed to deserialize creator identity, err MSP DEFAULT is unknown
e2e        |     at Object.callback (/fabric-sdk-node/node_modules/hfc/lib/Peer.js:191:13)
e2e        |     at /fabric-sdk-node/node_modules/grpc/src/node/src/client.js:420:14
e2e        | error: [Peer.js]: GRPC client got an error response from the peer. Error: Failed to deserialize creator identity, err MSP DEFAULT is unknown
e2e        |     at /fabric-sdk-node/node_modules/grpc/src/node/src/client.js:417:17
e2e        | error: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: Failed to deserialize creator identity, err MSP DEFAULT is unknown
e2e        |     at Object.callback (/fabric-sdk-node/node_modules/hfc/lib/Peer.js:191:13)
e2e        |     at /fabric-sdk-node/node_modules/grpc/src/node/src/client.js:420:14
e2e        | debug: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: Failed to deserialize creator identity, err MSP DEFAULT is unknown
e2e        | debug: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: Failed to deserialize creator identity, err MSP DEFAULT is unknown
e2e        | [2017-01-23 07:37:02.148] [ERROR] E2E - deploy proposal was bad
e2e        | [2017-01-23 07:37:02.148] [ERROR] E2E - deploy proposal was bad
e2e        | not ok 3 Failed to send Proposal or receive valid response. Response null or status is not 200. exiting...
e2e        |   ---
e2e        |     operator: fail
e2e        |     at: process._tickCallback (internal/process/next_tick.js:103:7)
e2e        |   ...
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00nep:,,,,,,,,inatatsu,,,,,,,,,,,,,,23/Jan/17 9:46 AM;inatatsu;https://gerrit.hyperledger.org/r/#/c/4709/,24/Jan/17 4:11 AM;inatatsu;Fixed by another change set https://gerrit.hyperledger.org/r/#/c/4639/ .,,,,,,,,,,,,,,,,,,,,,,
getSubmitter() fails after loading a user from COP,FAB-1802,14303,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,inatatsu,inatatsu,23/Jan/17 5:28 AM,25/Jan/17 2:02 AM,26/Apr/18 6:50 AM,25/Jan/17 2:02 AM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"After [https://jira.hyperledger.org/browse/FAB-1787] has been merged, getSubmitter() of util.js fails when a user is loaded remotely from COP. The end-to-end test fails at step 2:
{code:java}
e2e        | debug: [Client.js]: saveUserToStateStore, store.setValue, result = {""name"":""admin"",""roles"":null,""affiliation"":"""",""enrollmentSecret"":"""",""enrollment"":{""signingIdentity"":""59bac0ec04e7a146c15a923263aa442d3cf988f14adab47d968dafc6ceac9d80"",""identity"":{""id"":""testIdentity"",""certificate"":""-----BEGIN CERTIFICATE-----\nMIIB7zCCAZegAwIBAgIUcfqMVMGLZwDIx1psQTfhkari5bAwCgYIKoZIzj0EAwIw\nfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh\nbiBGcmFuY2lzY28xHzAdBgNVBAoTFkludGVybmV0IFdpZGdldHMsIEluYy4xDDAK\nBgNVBAsTA1dXVzEUMBIGA1UEAxMLZXhhbXBsZS5jb20wHhcNMTcwMTIyMDkzMTAw\nWhcNMTcxMjIxMTczMTAwWjAQMQ4wDAYDVQQDEwVhZG1pbjBZMBMGByqGSM49AgEG\nCCqGSM49AwEHA0IABPk8xg47qKpt+to7EHmWxDtKiMwrU/Iy2rwCh8OLrSzMN69e\njHhdy04hRnGhslS/cx+lf95TbQLYYNhHtId3OESjYDBeMA4GA1UdDwEB/wQEAwIC\nBDAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBRPiMCJmyR/YLVVBtZA+e3EFqiXbDAf\nBgNVHSMEGDAWgBQXZ0I9qp6CP8TFHZ9bw5nRtZxIEDAKBggqhkjOPQQDAgNGADBD\nAiBMZ2kPAIW1a+UdwHldeP1mGPUDzGIFSCRE6KqQ0LUJvAIfF6FYULDU1v31J9Hn\nNJi4oNLSE7yCzVrrO28p1ytbnA==\n-----END CERTIFICATE-----\n""}}}
e2e        | not ok 2 test exited without ending
e2e        |   ---
e2e        |     operator: fail
e2e        |     at: processEmit [as emit] (/fabric-sdk-node/node_modules/grpc/node_modules/node-pre-gyp/node_modules/npmlog/node_modules/gauge/node_modules/signal-exit/index.js:140:35)
e2e        |   ...
e2e        |
e2e        | 1..2
e2e        | # tests 2
e2e        | # pass  1
e2e        | # fail  1
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00neh:,,,,,,,,inatatsu,,,,,,,,,,master,,,true,23/Jan/17 5:43 AM;inatatsu;https://gerrit.hyperledger.org/r/#/c/4707/,,,,,,,,,,,,,,,,,,,,,,,
Exception ImportError: No module named 'cStringIO' - while running behave tests,FAB-1801,14302,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jeffgarratt,rameshthoomu,rameshthoomu,23/Jan/17 4:14 AM,09/Mar/17 10:49 PM,26/Apr/18 6:50 AM,09/Mar/17 10:49 PM,,,,,,,,,,,,,,0,,,,,,,,,"Observed below error while executing Behave tests Exception ImportError: No module named 'cStringIO'. Observed this error in Jenkins Sandbox environment.
*Jenkins Build Reference: *
https://jenkins.hyperledger.org/sandbox/job/fabric-verify-behave-x86_64/2/consoleText
*Fabric Commit:*: 627c094 
Run behave tests using below command:
make behave BEHAVE_OPTS=""-D logs=Y -o testsummary.log --junit --format=pretty""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ne9:,,,,,,,,jeffgarratt,rameshthoomu,,,,,,,,,,,,,09/Mar/17 10:49 PM;jeffgarratt;Resolved with most recent README.md instructions and their usage in CI.,,,,,,,,,,,,,,,,,,,,,,,
peer crashes reading bad config,FAB-1800,14301,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,muralisr,muralisr,22/Jan/17 4:40 PM,13/Apr/17 8:37 AM,26/Apr/18 6:50 AM,13/Apr/17 8:37 AM,,,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,"Attempted to boot up the peer with existing config which was no longer valid. It crashes with the following signature

{code:java}
panic(0xa9dfa0, 0xc4200100c0)
	/opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/core/chaincode.deploySysCC(0xc42021f298, 0x3, 0xee58a0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/sysccapi.go:103 +0x8c1
github.com/hyperledger/fabric/core/chaincode.DeploySysCCs(0xc42021f298, 0x3)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/importsysccs.go:82 +0x8d
github.com/hyperledger/fabric/peer/node.startDeliveryService(0xc42021f298, 0x3, 0x3, 0x3)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:87 +0x4d
github.com/hyperledger/fabric/core/peer.Initialize(0xbd36a8)
	/opt/gopath/src/github.com/hyperledger/fabric/core/peer/peer.go:100 +0x857
github.com/hyperledger/fabric/peer/node.serve(0xc4202cdb20, 0x0, 0x1, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:201 +0x4b6
github.com/hyperledger/fabric/peer/node.glob..func1(0xee85e0, 0xc4202cdb20, 0x0, 0x1, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:69 +0x3f
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0xee85e0, 0xc4202cdaf0, 0x1, 0x1, 0xee85e0, 0xc4202cdaf0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:599 +0x234
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0xee8e60, 0x12, 0xc42000e018, 0x3e)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 +0x367
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0xee8e60, 0x3e, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 +0x2b
main.main()
	/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:112 +0x4da
{code}


Peer should not continue starting up the chain if the config is invalid. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhy:zz9xm9,,,,,,,,muralisr,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Revendor fabric's bccsp into fabric-ca due to bccsp move,FAB-1797,14226,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,smithbk,smithbk,21/Jan/17 1:25 PM,13/Apr/17 11:27 PM,26/Apr/18 6:50 AM,13/Apr/17 11:27 PM,,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"The bccsp component moved in fabric, so we need to revendor and update code references in fabric-ca accordingly.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ncx:,,Sprint 10 - Membership Service,,,,,,smithbk,,,,,,,,,,master,,,true,21/Jan/17 1:45 PM;smithbk;See http://gerrit.hyperledger.org/r/4665,,,,,,,,,,,,,,,,,,,,,,,
Linter errors need cleanup,FAB-1796,14225,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,sanchezl,sanchezl,21/Jan/17 6:24 AM,23/Jan/17 3:37 PM,26/Apr/18 6:50 AM,23/Jan/17 3:37 PM,,,,,,,,,,fabric-gossip,,,,0,,,,,,,,,"goimports needed:
gossip/service/channel.go
gossip/service/channel_test.go

other linter errors:
gossip/service/gossip_service.go",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ncp:,,,,,,,,sanchezl,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Kafka option unrecognised: -Xloggc on ppc & z390x,FAB-1795,14224,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,sanchezl,sanchezl,21/Jan/17 1:55 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,30/Jan/17 2:48 PM,,,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00nch:,,Sprint 10 - consensus,,,,,,sanchezl,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Allow for Java SHIM build/installation within the hyperledger/javaenv Docker image for z Systems and Power,FAB-1794,14223,Bug,Backlog,FAB,Fabric,software,ChristopherFerris,,,Medium,,,harrijk,harrijk,21/Jan/17 12:16 AM,19/Mar/18 3:40 PM,26/Apr/18 6:50 AM,,,,,,,,v1.2,,,fabric-chaincode-java,,,,0,chaincode,java-chaincode,,,,,,,"Due to issues with building the Java SHIM while generating the hyperledger/javaenv Docker image, CR-2807 https://gerrit.hyperledger.org/r/#/c/2807/ was implemented last November to bypass the Java SHIM build/installation for z Systems and Power.

The patch was meant to be a temporary measure.

The purpose of opening this issue is to track the progress of fully implementing the Java SHIM within the hyperledger/javaenv Docker image for z Systems and Power.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-8063,0|i00nc9:,,,,,,,,bsmita,denyeart,harrijk,harsha544,mastersingh24,muralisr,sanchezl,SriramaSharma,,,master,,,true,"01/Mar/17 1:58 PM;harrijk;Bumping up the priority on this issue.  Currently both z and p cannot be used to run Java chaincode.

[~mastersingh24] ^^",11/Apr/17 9:48 PM;denyeart;[~sanchezl] Is there an update or outlook?,"13/Apr/17 6:53 AM;muralisr;[~sanchezl] given we have disabled the Java tests for power and z, I assume this is lower priority. Took the liberty of moving to 1.1 for now. If we have cycles we can work and move it back.","13/Apr/17 2:23 PM;harrijk;[~muralisr] The reason the Java chaincode unit tests were disabled was that it was causing a 100% failure rate for the fabric verify and merge jobs for z and p.  We would like to have z and p eventually vote for the verification of the fabric jobs.  It's been a struggle. :)

I have been trying to get the Java SHIM fixed for z and p as far back as last September.  I think that we should do everything we can to get Java chaincode working on z and p for v1.0.  If it's determined that the ""fix"" for this involves more time and effort than expected and cannot make the v1.0 cut then this is understandable.  We should at least make an effort to make the v1.0 cut.

[~sanchezl] [~mastersingh24]  ^^^",24/Nov/17 10:53 PM;mastersingh24;moving to v1.2,08/Jan/18 2:24 AM;denyeart;Changed to Medium since Java chaincode is not a production feature as of 1.1.,,,,,,,,,,,,,,,,,,
Cleanup kafka orderer compose environments,FAB-1785,14214,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,sanchezl,sanchezl,20/Jan/17 7:35 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,27/Jan/17 7:38 PM,,,,,,,,,,fabric-orderer,,,,0,kafka,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00na9:,,,,,,,,sanchezl,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Power builds in CI are getting stuck after executing crypto module,FAB-1784,14213,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,bsmita,rameshthoomu,rameshthoomu,20/Jan/17 7:05 PM,10/Apr/17 1:14 PM,26/Apr/18 6:50 AM,10/Apr/17 1:14 PM,,,,,,,,,,fabric-devenv,,,,0,,,,,,,,,"Power builds in CI are getting stuck after executing crypto module. Need some investigation why build are getting stuck.. CI is forcibly aborting the build after 120 mins Instead of keep builds in stuck mode for ever.

https://jenkins.hyperledger.org/view/fabric/job/fabric-verify-power-ppc64le/1082/console
https://jenkins.hyperledger.org/view/fabric/job/fabric-verify-power-ppc64le/1081/console",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00na1:,,,,,,,,binhn,bsmita,harsha544,rameshthoomu,,,,,,,,,,,"20/Jan/17 7:36 PM;bsmita;Hi Ramesh, Srirama narrowed down this problem is due to sbft/main stress tests added recently. The JIRA is

https://jira.hyperledger.org/browse/FAB-1688

We are waiting a fix to be dropped to that JIRA.",25/Jan/17 3:22 AM;rameshthoomu;[~bsmita] [~SriramaSharma]: Still builds are failing with the same issue.. Below is the build reference https://jenkins.hyperledger.org/view/fabric/job/fabric-verify-power-ppc64le/1241/console,"25/Jan/17 6:28 PM;bsmita;Talked to Gabor and this is a new test in orderer module.
I tried go test -run ""TestTen"" -v and go test -v multiple times, in some cases it passed and some cases the test failed with errors.
2017/01/25 17:40:18 transport: http2Client.notifyError got notified that the client transport was broken EOF.
2017/01/25 17:40:18 transport: http2Client.notifyError got notified that the client transport was broken EOF.
--- FAIL: TestTenReplicasBombedWithBroadcastsIfLedgersConsistent (148.06s)
       network_test.go:264: Failed to receive some messages. (Received 12)
       network_test.go:264: Failed to receive some messages. (Received 15)
FAIL
2017/01/25 17:40:18 grpc: addrConn.transportMonitor exits due to: grpc: the connection is closing
exit status 1
FAIL    github.com/hyperledger/fabric/orderer   161.786s","27/Jan/17 3:33 PM;bsmita;In the most recent unit tests, I notice that sbft/main is not even a test case under orderer/sbft.
The tests are hanging after 
12:31:29 unit-tests_1  | ok  	github.com/hyperledger/fabric/gossip/state	20.279s	coverage: 80.7% of statements
12:31:29 unit-tests_1  | ?   	github.com/hyperledger/fabric/gossip/util	[no test files]
12:31:34 unit-tests_1  | ok  	github.com/hyperledger/fabric/msp	0.050s	coverage: 55.8% of statements
{color:red}12:31:46 unit-tests_1  | ok  	github.com/hyperledger/fabric/msp/mgmt	0.084s	coverage: 79.5% of statements{color}

The next testcase in the list is the orderer directory. 
When I checked ps -aef|grep orderer on the system, it shows bunch of /tmp/orderer processes. So checking the tests orderer sub folder.","01/Feb/17 4:30 PM;bsmita;Looks like tests from sbft/main are moved to orderer/network_test.go and  orderer/sbft_test.go files. Running ""go test -v"" separately in orderer directory shows testcases passing. But ""make unit-test"" hangs at orderer. Still working with @hgabor on how we can isolate and fix the timing issue that's happening in orderer testcases.","13/Feb/17 3:07 PM;bsmita;Looks like in network_test.go TestTen* tests are hanging. Single tests pass fine, any combination of 2 of these tests hang. 
I tried running make unit-test with TEST_PKGS set to orderer sub directory.

Adding Sleep call StartPeers() seems to be fixing this issue.
func StartPeers(peers []*Peer) {
        for _, p := range peers {
                 p.start()
                 time.Sleep(3 * time.Second)                                   
        }
}
",09/Apr/17 8:45 PM;binhn;[~bsmita] Can we close this issue?,,,,,,,,,,,,,,,,,
Fix failing test in multichain package,FAB-1781,14210,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,kchristidis,kchristidis,20/Jan/17 3:05 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,20/Jan/17 5:50 PM,,,,,,,,,,fabric-orderer,,,,0,common-components,,,,,,,,"Changesets [1] and [2] got merged and as a result a test in the `multichain` package fails.

[1] https://gerrit.hyperledger.org/r/3867
[2] https://gerrit.hyperledger.org/r/4581",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n9d:,,Sprint 10 - consensus,,,,,,kchristidis,,,,,,,,,,master,,,true,20/Jan/17 3:11 PM;kchristidis;https://gerrit.hyperledger.org/r/#/c/4615/,,,,,,,,,,,,,,,,,,,,,,,
Orderer crash on empty chain creators and new chain proposal,FAB-1765,14194,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,19/Jan/17 9:12 PM,31/Jan/17 7:27 PM,26/Apr/18 6:50 AM,31/Jan/17 7:27 PM,,,,,,,,,,,,,,0,,,,,,,,,"When the orderer is initialized with an empty slice for ChainCreationPolicyNames, no chain is initialized as the system chain.  This does not cause a panic, and leads to a nil pointer dereference when a new chain proposal tries to reference the system chain.

This is a byproduct of the fact that empty slices marshal to nil under protobuf, so the sharedconfig code was setting the ChainCreationPolicyNames to nil rather than an empty slice.  The system chain was detected by looking for a non-nil ChainCreationPolicyNames.

Resulting trace looked like:

{code}
2017-01-19 19:16:38.594 UTC [ordererledger/ramledger] appendBlock -> DEBU 001 Sending signal that block 18446744073709551615 has a successor
2017-01-19 19:16:38.594 UTC [ordererledger/ramledger] Iterator -> DEBU 002 Attempting to return block 0
2017-01-19 19:16:38.594 UTC [ordererledger/ramledger] Iterator -> DEBU 003 Attempting to return block 0
2017-01-19 19:16:38.594 UTC [common/configtx] beginHandlers -> DEBU 004 Beginning new configuration for chain cb749a08de7b11e6bec308002790a540
2017-01-19 19:16:38.594 UTC [common/policies] GetPolicy -> DEBU 005 Returning dummy reject all policy because NewConfigurationItemPolicy could not be found
2017-01-19 19:16:38.594 UTC [common/configtx] processConfig -> DEBU 006 Proposed configuration item of type Policy and key %!t(string=chainCreatePolicy1) on chain cb749a08de7b11e6bec308002790a540 has been modified
2017-01-19 19:16:38.594 UTC [common/configtx] processConfig -> DEBU 007 Proposing configuration item of type Policy for key chainCreatePolicy1 on chain cb749a08de7b11e6bec308002790a540
2017-01-19 19:16:38.594 UTC [common/policies] ProposeConfig -> DEBU 008 Proposed new policy chainCreatePolicy1
2017-01-19 19:16:38.594 UTC [common/configtx] processConfig -> DEBU 009 Proposed configuration item of type Orderer and key %!t(string=ChainCreators) on chain cb749a08de7b11e6bec308002790a540 has been modified
2017-01-19 19:16:38.594 UTC [common/configtx] processConfig -> DEBU 00a Proposing configuration item of type Orderer for key ChainCreators on chain cb749a08de7b11e6bec308002790a540
2017-01-19 19:16:38.594 UTC [common/configtx] processConfig -> DEBU 00b Proposed configuration item of type MSP and key %!t(string=peerOrg0) on chain cb749a08de7b11e6bec308002790a540 has been modified
2017-01-19 19:16:38.594 UTC [common/configtx] processConfig -> DEBU 00c Proposing configuration item of type MSP for key peerOrg0 on chain cb749a08de7b11e6bec308002790a540
2017-01-19 19:16:38.594 UTC [common/configtx] processConfig -> DEBU 00d Proposed configuration item of type MSP and key %!t(string=peerOrg1) on chain cb749a08de7b11e6bec308002790a540 has been modified
2017-01-19 19:16:38.594 UTC [common/configtx] processConfig -> DEBU 00e Proposing configuration item of type MSP for key peerOrg1 on chain cb749a08de7b11e6bec308002790a540
2017-01-19 19:16:38.594 UTC [common/configtx] processConfig -> DEBU 00f Proposed configuration item of type MSP and key %!t(string=peerOrg2) on chain cb749a08de7b11e6bec308002790a540 has been modified
2017-01-19 19:16:38.594 UTC [common/configtx] processConfig -> DEBU 010 Proposing configuration item of type MSP for key peerOrg2 on chain cb749a08de7b11e6bec308002790a540
2017-01-19 19:16:38.595 UTC [common/configtx] processConfig -> DEBU 011 Proposed configuration item of type Orderer and key %!t(string=BatchSize) on chain cb749a08de7b11e6bec308002790a540 has been modified
2017-01-19 19:16:38.595 UTC [common/configtx] processConfig -> DEBU 012 Proposing configuration item of type Orderer for key BatchSize on chain cb749a08de7b11e6bec308002790a540
2017-01-19 19:16:38.595 UTC [common/configtx] processConfig -> DEBU 013 Proposed configuration item of type Orderer and key %!t(string=ConsensusType) on chain cb749a08de7b11e6bec308002790a540 has been modified
2017-01-19 19:16:38.595 UTC [common/configtx] processConfig -> DEBU 014 Proposing configuration item of type Orderer for key ConsensusType on chain cb749a08de7b11e6bec308002790a540
2017-01-19 19:16:38.595 UTC [common/configtx] processConfig -> DEBU 015 Proposed configuration item of type Policy and key %!t(string=AcceptAllPolicy) on chain cb749a08de7b11e6bec308002790a540 has been modified
2017-01-19 19:16:38.595 UTC [common/configtx] processConfig -> DEBU 016 Proposing configuration item of type Policy for key AcceptAllPolicy on chain cb749a08de7b11e6bec308002790a540
2017-01-19 19:16:38.595 UTC [common/policies] ProposeConfig -> DEBU 017 Proposed new policy AcceptAllPolicy
2017-01-19 19:16:38.595 UTC [common/configtx] processConfig -> DEBU 018 Proposed configuration item of type Orderer and key %!t(string=IngressPolicy) on chain cb749a08de7b11e6bec308002790a540 has been modified
2017-01-19 19:16:38.595 UTC [common/configtx] processConfig -> DEBU 019 Proposing configuration item of type Orderer for key IngressPolicy on chain cb749a08de7b11e6bec308002790a540
2017-01-19 19:16:38.595 UTC [common/configtx] processConfig -> DEBU 01a Proposed configuration item of type Orderer and key %!t(string=EgressPolicy) on chain cb749a08de7b11e6bec308002790a540 has been modified
2017-01-19 19:16:38.595 UTC [common/configtx] processConfig -> DEBU 01b Proposing configuration item of type Orderer for key EgressPolicy on chain cb749a08de7b11e6bec308002790a540
2017-01-19 19:16:38.595 UTC [common/configtx] processConfig -> DEBU 01c Proposed configuration item of type Policy and key %!t(string=DefaultModificationPolicy) on chain cb749a08de7b11e6bec308002790a540 has been modified
2017-01-19 19:16:38.595 UTC [common/configtx] processConfig -> DEBU 01d Proposing configuration item of type Policy for key DefaultModificationPolicy on chain cb749a08de7b11e6bec308002790a540
2017-01-19 19:16:38.595 UTC [common/policies] ProposeConfig -> DEBU 01e Proposed new policy DefaultModificationPolicy
2017-01-19 19:16:38.595 UTC [common/configtx] commitHandlers -> DEBU 01f Committing configuration for chain cb749a08de7b11e6bec308002790a540
2017-01-19 19:16:38.595 UTC [orderer/common/sharedconfig] CommitConfig -> DEBU 020 Adopting new orderer shared config: &{consensusType:solo batchSize:0xc420212810 batchTimeout:0 chainCreationPolicies:[] kafkaBrokers:[] ingressPolicyNames:[] egressPolicyNames:[]}
2017-01-19 19:16:38.595 UTC [orderer/multichain] NewManagerImpl -> DEBU 021 Starting chain: 6362373439613038646537623131653662656333303830303237393061353430
2017-01-19 19:16:38.595 UTC [orderer/main] NewServer -> INFO 022 Starting orderer
2017-01-19 19:16:38.596 UTC [orderer/main] main -> INFO 023 Beginning to serve requests
2017-01-19 19:16:41.271 UTC [orderer/main] Broadcast -> DEBU 024 Starting new Broadcast handler
2017-01-19 19:16:41.272 UTC [orderer/common/broadcast] Handle -> DEBU 025 Proposing new chain
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x5415b8]
goroutine 23 [running]:
panic(0x9a1360, 0xc42000c050)
        /opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/orderer/multichain.(*systemChain).authorize(0x0, 0xc420236280, 0x654)
        /opt/gopath/src/github.com/hyperledger/fabric/orderer/multichain/systemchain.go:175 +0x1c8
github.com/hyperledger/fabric/orderer/multichain.(*systemChain).authorizeAndInspect(0x0, 0xc42020ee70, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/orderer/multichain/systemchain.go:239 +0x2a9
github.com/hyperledger/fabric/orderer/multichain.(*systemChain).proposeChain(0x0, 0xc42020ee70, 0x5)
        /opt/gopath/src/github.com/hyperledger/fabric/orderer/multichain/systemchain.go:108 +0x4d
github.com/hyperledger/fabric/orderer/multichain.(*multiLedger).ProposeChain(0xc4201e79e0, 0xc42020ee70, 0xc420213a10)
        /opt/gopath/src/github.com/hyperledger/fabric/orderer/multichain/manager.go:152 +0x39
main.(*broadcastSupport).ProposeChain(0xc420213690, 0xc42020ee70, 0x13)
        <autogenerated>:1 +0x53
github.com/hyperledger/fabric/orderer/common/broadcast.(*handlerImpl).Handle(0xc4202136a0, 0xefc0c0, 0xc420213930, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/orderer/common/broadcast/broadcast.go:95 +0x1d8
main.(*server).Broadcast(0xc4201f1e80, 0xefc0c0, 0xc420213930, 0xc42001d4a8, 0xc42001d4d0)
        /opt/gopath/src/github.com/hyperledger/fabric/orderer/server.go:61 +0x8b
github.com/hyperledger/fabric/protos/orderer._AtomicBroadcast_Broadcast_Handler(0x9a4560, 0xc4201f1e80, 0xefaa40, 0xc420217d80, 0xc42020ee40, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/protos/orderer/ab.pb.go:525 +0xbb
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processStreamingRPC(0xc4201be360, 0xefb940, 0xc420234000, 0xc4201de960, 0xc42020e9c0, 0xee5400, 0xc42020ee10, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:657 +0x6f3
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc4201be360, 0xefb940, 0xc420234000, 0xc4201de960, 0xc42020ee10)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:741 +0xc33
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc4202137b0, 0xc4201be360, 0xefb940, 0xc420234000, 0xc4201de960)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:402 +0xab
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:403 +0xa3
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n5t:,,,,,,,,jyellick,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"devmode invoke fails: ""handler not found""",FAB-1747,14176,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,greg.haskins,greg.haskins,greg.haskins,19/Jan/17 3:35 AM,03/Feb/17 2:05 PM,26/Apr/18 6:50 AM,03/Feb/17 2:05 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"Deploying a chaincode application under devmode fails with:

```sending init failed(handler not found for chaincode mycc:0/**TEST_CHAINID**)```

Steps to reproduce:
# Start a peer/orderer with the peer in --peer-chaincodedev mode
# Compile/launch a chaincode manually (aka devmode launch)
# Initiate a deploy sequence (such as through the SDK).
# Initiate an invoke sequence (such as through the SDK).
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n29:,,,,,,,,greg.haskins,,,,,,,,,,master,,,true,"19/Jan/17 3:40 AM;greg.haskins;Known work-around:

Kill/restart the chaincode after the deploy but before the invoke.  The root cause is related to chaincode FSM: Non-devmode deployment naturally disconnects the chaincode container after the deployment.  Devmode FSM is still expecting disconnect.  However, since the code is manually driven, this will not happen unless the user takes action.

Actual fix will involve updating the FSM to understand devmode realities. ",03/Feb/17 2:05 PM;greg.haskins;Fixed: https://gerrit.hyperledger.org/r/#/c/4773/,,,,,,,,,,,,,,,,,,,,,,
"Primary node does not come back to normal operation after a fail-stop, a restart and a synchronization",FAB-1744,14173,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,ryokawajp,ryokawajp,19/Jan/17 2:41 AM,29/Jun/17 12:47 PM,26/Apr/18 6:50 AM,07/Apr/17 8:06 PM,v0.6,,,,,,WON'T FIX,,,fabric-orderer,,,,0,0.6,,,,,,,,"h2. Summary
We were testing the checkpoint and the state transfer features of Hyperledger Fabric.
During the test, we found a case that a failure peer does not accept new transactions even after recovery from the failure when the peer is a primary node.

h2. Related issues
- [FAB-707] disconnected Peer can't recover from lost connection, then start sending view change requests - Hyperledger JIRA
-- https://jira.hyperledger.org/browse/FAB-707
-- Looks like similar but the test cases are different. In FAB-707, a non-primary peer was stopped and restarted, while in this JIRA item, the primary node was stopped and restarted.

h2. Parameters
- 4 nodes (vp0, vp1, vp2, vp3). The initial primary node is vp0.
- chaincode_example02
- Fabric v0.6.0-preview
- Security and privacy enabled
- Ubuntu 14.04 (in Virtual Box and Vagrant)
- Docker  1.12.1
- REST API is used for sending transactions.
- docker-compose.yml (see the attached file)
- K=2
- logmultiplier=2
- PBFT consensus
- PBFT batch size = 1

h2. Test case
- invoke 2 transactions to vp0. 
- kill vp0
- invoke 3 transactions to vp1
- restart vp0
- invoke N transactions to vp1.

h2. Result
- Initial sync occurs at : block height=11
- The sync (state transfer) occurs periodically after the initial sync. Period of sync = 8 blocks (or 8 Tx).
-- Even after the sync, vp0 did not add a new block to its blockchain when it receives a new transactions. Other three peers (vp1, vp2, vp3) worked correctly.
-- This periodic behavior does not occur when we kill vp2 (a non-primary node) instead of vp0.

h2. Interpretation of the result
- It seems that it takes a time to start the Initial synchronization because in PBFT, Fabric executes the state transfer only when the sequence number exceeds the high water mark, which is order of K * logmultiplier. I suppose this is a designed behavior.
- However, vp0's block height does not grow at all, while the block heights of the rest of the peers grow as they accept the additional transactions. And another state transfer occurs after 8 transactions later. This occurs periodically in the number of transactions. This behavior is different from what is expected.
- When vp0 is killed, a view change occurs from view 0 to view 1. However, according to the log below, vp0 still thinks that he is still in view 0. Is this the reason why vp0 does not accept the new transactions, since the later transactions are sent to view 1?

Warning messages (example of K=2, logmultiplier=2)
{noformat}
vp0_1        | 01:27:42.250 [consensus/pbft] recvCommit -> WARN 0bc Replica 0 ignoring commit for view=1/seqNo=8: not in-wv, in view 0, high water mark 2
vp0_1        | 01:27:42.304 [consensus/pbft] recvCheckpoint -> WARN 0c5 Checkpoint sequence number outside watermarks: seqNo 8, low-mark 2
vp0_1        | 01:27:42.317 [consensus/pbft] weakCheckpointSetOutOfRange -> WARN 0cd Replica 0 is out of date, f+1 nodes agree checkpoint with seqNo 8 exists but our high water mark is 6
vp0_1        | 01:27:42.318 [consensus/pbft] sendPrePrepare -> WARN 0d5 Primary 0 not sending pre-prepare for batch aXZf/Zfi7CDLU5n5dANOpYIX81Oy0LuTZ2mX/Xly48d5yYaULtX+ndFIVKweQ/xej17JXRwkTIV0RiT1j+xKeA== - out of sequence numbers
vp0_1        | 01:27:47.356 [consensus/pbft] sendPrePrepare -> WARN 10d Primary 0 not sending pre-prepare for batch Tq+y1NuMKGw8eJjimsdRecr4RseJ//xE00lkjK+qvg2yK9giQwqCmPnlgCdBBVn/uzxwFsvYn/sHeLcL60O6Dw== - out of sequence numbers
vp0_1        | 01:27:47.357 [consensus/pbft] recvPrePrepare -> WARN 129 Pre-prepare from other than primary: got 1, should be 0
vp0_1        | 01:27:51.361 [consensus/pbft] recvViewChange -> WARN 181 Replica 0 already has a view change message for view 1 from replica 0
{noformat}

Following is a part of situation1.log filtered by a command: `grep ""Height"" situation1.log`. Synchronization is highlighted in a bold font.
{panel}
Height of vp0 : 1
Height of vp1 : 1
Height of vp2 : 1
Height of vp3 : 1
Height of vp0 : 3
Height of vp1 : 3
Height of vp2 : 3
Height of vp3 : 3
Height of vp0 : 4
Height of vp1 : 4
Height of vp2 : 4
Height of vp3 : 4
Height of vp0 :
Height of vp1 : 5
Height of vp2 : 5
Height of vp3 : 5
Height of vp0 :
Height of vp1 : 6
Height of vp2 : 6
Height of vp3 : 6
Height of vp0 :
Height of vp1 : 7
Height of vp2 : 7
Height of vp3 : 7
Height of vp0 : 4
Height of vp1 : 8
Height of vp2 : 8
Height of vp3 : 8
Height of vp0 : 4
Height of vp1 : 9
Height of vp2 : 9
Height of vp3 : 9
Height of vp0 : 4
Height of vp1 : 10
Height of vp2 : 10
Height of vp3 : 10
*Height of vp0 : 11*
*Height of vp1 : 11*
*Height of vp2 : 11*
*Height of vp3 : 11*
Height of vp0 : 11
Height of vp1 : 12
Height of vp2 : 12
Height of vp3 : 12
Height of vp0 : 11
Height of vp1 : 13
Height of vp2 : 13
Height of vp3 : 13
Height of vp0 : 11
Height of vp1 : 14
Height of vp2 : 14
Height of vp3 : 14
Height of vp0 : 11
Height of vp1 : 15
Height of vp2 : 15
Height of vp3 : 15
Height of vp0 : 11
Height of vp1 : 16
Height of vp2 : 16
Height of vp3 : 16
Height of vp0 : 11
Height of vp1 : 17
Height of vp2 : 17
Height of vp3 : 17
Height of vp0 : 11
Height of vp1 : 18
Height of vp2 : 18
Height of vp3 : 18
*Height of vp0 : 19*
*Height of vp1 : 19*
*Height of vp2 : 19*
*Height of vp3 : 19*
Height of vp0 : 19
Height of vp1 : 20
Height of vp2 : 20
Height of vp3 : 20
Height of vp0 : 19
Height of vp1 : 21
Height of vp2 : 21
Height of vp3 : 21
{panel}
","- Fabric v0.6.0-preview
- Security and privacy enabled
- Ubuntu 16.04
- Docker 
- REST API is used for sending transactions.
- docker-compose.yaml to be attached soon.
- K=2
- logmultiplier=2
- PBFT consensus
- PBFT batch size = 1
",,,,,,,,,,,,,,,,,,,19/Jan/17 4:45 AM;ryokawajp;docker-compose-4nodes.yml;https://jira.hyperledger.org/secure/attachment/10391/docker-compose-4nodes.yml,19/Jan/17 5:00 AM;ryokawajp;situation1.log;https://jira.hyperledger.org/secure/attachment/10392/situation1.log,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n1l:,,,,,,,,Honglei,ryokawajp,YingShi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
peer crashes when 100 concurrent threads tried to execute 20 invokes,FAB-1740,14169,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Ratnakar,Ratnakar,Ratnakar,18/Jan/17 11:24 PM,11/Feb/17 3:15 PM,26/Apr/18 6:50 AM,11/Feb/17 3:15 PM,,,,,,,,,,,,,,0,quality,,,,,,,,"Peer crashes when 100 threads tried to send invoke commands on a single peer
change the Concurrency to 100 in ccchecker.json

Gerrits changes used for testing [#3623] & 3625 


Steps to reproduce the issue:

1. vagrant window 1 - start orderer
        ./orderer
    
2. vagrant window 2 - start peer
        peer node start
    
3.vagrant window 3 - bring up chaincode for test
   
        //deploy the chaincode used by ccchecker out of the box
        peer chaincode deploy -n mycc -p github.com/hyperledger/fabric/examples/ccchecker/chaincodes/newkeyperinvoke -c '{""Args"":[""""]}'
        //wait for commit say for about 10 secs and then issue a query to bring the CC up
        peer chaincode query -n mycc -c '{""Args"":[""get"",""a""]}'
    
        //verify the chaincode is up
        docker ps
    
4. vagrant window 4 - run test
        cd examples/ccchecker
        go build
        ./ccchecker -c ccchecker.json 
      ( can reproduce the same with doublespender.json aswell)



*Result* :

*_peer crashes with the OutofMemory error_*
Logs enclosed",,,,,,,,,,,,,,,,,,,,18/Jan/17 11:22 PM;Ratnakar;concurrency-tests-logs.zip;https://jira.hyperledger.org/secure/attachment/10390/concurrency-tests-logs.zip,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00n0p:,,,,,,,,Ratnakar,,,,,,,,,,,,,,"18/Jan/17 11:26 PM;Ratnakar;fatal error: runtime: out of memory

runtime stack:
runtime.throw(0xb4bdb4, 0x16)
	/opt/go/src/runtime/panic.go:566 +0x95
runtime.sysMap(0xc50cdb0000, 0x1e20000, 0x0, 0xecf4b8)
	/opt/go/src/runtime/mem_linux.go:219 +0x1d0
runtime.(*mheap).sysAlloc(0xeb5a20, 0x1e20000, 0x40f800)
	/opt/go/src/runtime/malloc.go:407 +0x37a
runtime.(*mheap).grow(0xeb5a20, 0xf09, 0x0)
	/opt/go/src/runtime/mheap.go:726 +0x62
runtime.(*mheap).allocSpanLocked(0xeb5a20, 0xf09, 0x1)
	/opt/go/src/runtime/mheap.go:630 +0x4f2
runtime.(*mheap).alloc_m(0xeb5a20, 0xf09, 0x100000000, 0x7fe3f2580c08)
	/opt/go/src/runtime/mheap.go:515 +0xe0
runtime.(*mheap).alloc.func1()
	/opt/go/src/runtime/mheap.go:579 +0x4b
runtime.systemstack(0x7fe3ea7fbe18)
	/opt/go/src/runtime/asm_amd64.s:314 +0xab
runtime.(*mheap).alloc(0xeb5a20, 0xf09, 0x10100000000, 0xc420bac6b0)
	/opt/go/src/runtime/mheap.go:580 +0x73
runtime.largeAlloc(0x1e10f94, 0x7fe3ea7fbe01, 0x455c5a)
	/opt/go/src/runtime/malloc.go:774 +0x93
runtime.mallocgc.func1()
	/opt/go/src/runtime/malloc.go:669 +0x3e
runtime.systemstack(0xc420019500)
	/opt/go/src/runtime/asm_amd64.s:298 +0x79
runtime.mstart()
	/opt/go/src/runtime/proc.go:1079

goroutine 1239 [running]:
runtime.systemstack_switch()
	/opt/go/src/runtime/asm_amd64.s:252 fp=0xc4672675d0 sp=0xc4672675c8
runtime.mallocgc(0x1e10f94, 0xa39c60, 0x445b01, 0x1)
	/opt/go/src/runtime/malloc.go:670 +0x903 fp=0xc467267670 sp=0xc4672675d0
runtime.makeslice(0xa39c60, 0x1e10f94, 0x1e10f94, 0x0, 0xc445211288, 0x1)
	/opt/go/src/runtime/slice.go:57 +0x7b fp=0xc4672676c8 sp=0xc467267670
github.com/hyperledger/fabric/vendor/github.com/golang/protobuf/proto.(*Buffer).DecodeRawBytes(0xc436c391e0, 0x78a401, 0xc436c391e0, 0xc445211288, 0x1, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/golang/protobuf/proto/decode.go:204 +0x16b fp=0xc467267758 sp=0xc4672676c8
github.com/hyperledger/fabric/vendor/github.com/golang/protobuf/proto.(*Buffer).dec_slice_byte(0xc436c391e0, 0xc42078c140, 0xc4451ef340, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/golang/protobuf/proto/decode.go:578 +0x34 fp=0xc4672677a0 sp=0xc467267758
github.com/hyperledger/fabric/vendor/github.com/golang/protobuf/proto.(*Buffer).unmarshalType(0xc436c391e0, 0xe8cbe0, 0xaeef00, 0xc42021e6e0, 0xc4451ef300, 0xc4451ef340, 0x0, 0xc4202e8bd0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/golang/protobuf/proto/decode.go:441 +0x1ee fp=0xc467267b58 sp=0xc4672677a0
github.com/hyperledger/fabric/vendor/github.com/golang/protobuf/proto.(*Buffer).Unmarshal(0xc436c391e0, 0xe82680, 0xc4451ef340, 0xc467267c18, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/golang/protobuf/proto/decode.go:356 +0x1dd fp=0xc467267be0 sp=0xc467267b58
github.com/hyperledger/fabric/vendor/github.com/golang/protobuf/proto.UnmarshalMerge(0xc4dd8e0004, 0x1e10fa2, 0x1e11ffc, 0xe82680, 0xc4451ef340, 0x1, 0xc4451ef340)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/golang/protobuf/proto/decode.go:318 +0x13c fp=0xc467267c38 sp=0xc467267be0
github.com/hyperledger/fabric/vendor/github.com/golang/protobuf/proto.Unmarshal(0xc4dd8e0004, 0x1e10fa2, 0x1e11ffc, 0xe82680, 0xc4451ef340, 0x1e11ffc, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/golang/protobuf/proto/decode.go:304 +0x67 fp=0xc467267c80 sp=0xc467267c38
github.com/hyperledger/fabric/core/chaincode.(*LifeCycleSysCC).getChaincode(0xecce10, 0xe8b7e0, 0xc420bcd580, 0xc4453de0b0, 0x10, 0xc4453de0ac, 0x4, 0xc4451a85e0, 0x0, 0x0, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/lccc.go:221 +0x10e fp=0xc467267d10 sp=0xc467267c80
github.com/hyperledger/fabric/core/chaincode.(*LifeCycleSysCC).Invoke(0xecce10, 0xe8b7e0, 0xc420bcd580, 0xe83b80, 0xc4202a8940, 0x0, 0x0, 0xc45bd46e10)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/lccc.go:468 +0x598 fp=0xc467267e80 sp=0xc467267d10
github.com/hyperledger/fabric/core/chaincode/shim.(*Handler).handleTransaction.func1(0xc4202ce000, 0xc45bd4ac00)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim/handler.go:292 +0x45f fp=0xc467267fa0 sp=0xc467267e80
runtime.goexit()
	/opt/go/src/runtime/asm_amd64.s:2086 +0x1 fp=0xc467267fa8 sp=0xc467267fa0
created by github.com/hyperledger/fabric/core/chaincode/shim.(*Handler).handleTransaction
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim/handler.go:305 +0x49

goroutine 1 [chan receive, 5 minutes]:
github.com/hyperledger/fabric/peer/node.serve(0xecce10, 0x0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:250 +0xa1d
github.com/hyperledger/fabric/peer/node.glob..func2(0xea7ea0, 0xecce10, 0x0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:69 +0x3f
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0xea7ea0, 0xecce10, 0x0, 0x0, 0xea7ea0, 0xecce10)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:599 +0x234
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0xea8720, 0x0, 0x0, 0xc4202060d0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 +0x367
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0xea8720, 0x13, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 +0x2b
main.main()
	/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:114 +0x47b

goroutine 17 [syscall, 5 minutes, locked to thread]:
runtime.goexit()
	/opt/go/src/runtime/asm_amd64.s:2086 +0x1

goroutine 6 [sleep]:
time.Sleep(0x2faf080)
	/opt/go/src/runtime/time.go:59 +0xe1
github.com/hyperledger/fabric/gossip/gossip.(*batchingEmitterImpl).periodicEmit(0xc4202e4eb0)
	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/batcher.go:63 +0x46
created by github.com/hyperledger/fabric/gossip/gossip.newBatchingEmitter
	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/batcher.go:57 +0x136

goroutine 5 [chan receive]:
github.com/hyperledger/fabric/events/producer.(*eventProcessor).start(0xc4202f6ff0)
	/opt/gopath/src/github.com/hyperledger/fabric/events/producer/events.go:216 +0x100
created by github.com/hyperledger/fabric/events/producer.initializeEvents
	/opt/gopath/src/github.com/hyperledger/fabric/events/producer/events.go:249 +0x13a

goroutine 4 [syscall, 5 minutes]:
os/signal.signal_recv(0xc42001dfa8)
	/opt/go/src/runtime/sigqueue.go:116 +0x157
os/signal.loop()
	/opt/go/src/os/signal/signal_unix.go:22 +0x22
created by os/signal.init.1
	/opt/go/src/os/signal/signal_unix.go:28 +0x41
","11/Feb/17 3:15 PM;Ratnakar;Unable to reproduce this any more , re-open if seen again ",,,,,,,,,,,,,,,,,,,,,,
COP server gives back encoded enrollment secret,FAB-1730,14159,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,elast,elast,18/Jan/17 4:36 PM,06/Mar/17 2:53 PM,26/Apr/18 6:50 AM,06/Mar/17 2:53 PM,,,,,,,,,,,,,,0,,,,,,,,,"When I send a register request to the cop server, it gives back the response: 

{""success"":true,""result"":""VFhSa1lqa0NpSkRs"",""errors"":[],""messages"":[]}

However, when I tried to enroll the user with the secret given, the server tells me that the password is incorrect because the password is base64 encoded.  I need to decode the secret in order for it to be usable.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00myp:,,,,,,,,elast,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix peer filtering for push/pull,FAB-1723,14152,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,gennadyl,gennadyl,gennadyl,18/Jan/17 10:28 AM,18/Jan/17 12:18 PM,26/Apr/18 6:50 AM,18/Jan/17 12:18 PM,v1.0.0,,,,,,v1.0.0,,,fabric-gossip,,,,0,gossip,,,,,,,,"File gossip/filter/filter.go

Method SelectPeer - in case of small k, log(membership) for example, and many small channels in most cases it will return empty list - as first step it choose k peers from membership and only after that filter them, as result it will remain with zero peers

IMO, correct way to implement it is filter peers first and only after that choose k peers from filtered list.
",,,,,,,,,,,,FAB-290,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00mx5:,,,,,,,,gennadyl,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] hfc/lib/Client.js consesus --> consensus ?,FAB-1718,14147,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,jjjjibm,jjjjibm,18/Jan/17 2:53 AM,08/Feb/17 3:43 AM,26/Apr/18 6:50 AM,08/Feb/17 3:43 AM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"Class Chain  in hfc/lib/Client.js has two methods: getConsesus() and setConsesus()

consesus ---> consensus? ","Vlaunch VM 
Cloned directories yesterday Pm",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00mw1:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
createConfigItem in blockutils over-writes item type with ConfigurationItem_Orderer,FAB-1711,14140,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,17/Jan/17 9:34 PM,18/Jan/17 9:47 PM,26/Apr/18 6:50 AM,18/Jan/17 9:47 PM,,,,,,,,,,,,,,0,,,,,,,,,"In protos/utils/blockutils.go there is a bug:
{code:title=protos/utils/blockutils.go|borderStyle=solid}
func createConfigItem(chainID string,
	configItemKey string,
	configItemValue []byte,
	modPolicy string) *cb.ConfigurationItem {

	ciChainHeader := MakeChainHeader(cb.HeaderType_CONFIGURATION_ITEM,
		messageVersion, chainID, epoch)
	configItem := MakeConfigurationItem(ciChainHeader,
		cb.ConfigurationItem_Orderer, lastModified, modPolicy,
		configItemKey, configItemValue)

	return configItem
}
{code}

This is a problem because it's also used by methods not for orderer type of config items like: *EncodeMSPUnsigned*",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00muh:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] end-to-end.js not ok 6 TypeError: Cannot read property 'getIdentity' of null at /home/ibmadmin                   /work/src/github.com/hyperledger/fabric-sdk-node/node_modules/hfc/lib/Chain.js:7                   95:44,FAB-1707,14136,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,17/Jan/17 6:48 PM,08/Feb/17 3:48 AM,26/Apr/18 6:50 AM,08/Feb/17 3:48 AM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"Running
node end-to-end.js 

Test case 6 fails with this message: 
not ok 6 TypeError: Cannot read property 'getIdentity' of null at /home/ibmadmin                   /work/src/github.com/hyperledger/fabric-sdk-node/node_modules/hfc/lib/Chain.js:7                   95:44

Here is line 795:  header = Chain._buildHeader(userContext.getIdentity(), request.chainId, request.chaincodeId, request.txId, request.nonce);

Here is some context:

                var self = this;
                var proposal, header;
                return this._clientContext.getUserContext()
                .then(
                        function(userContext) {
                                header = Chain._buildHeader(userContext.getIdentity(), request.chainId, request.chaincodeId, request.txId, request.nonce);
                                proposal = self._buildProposal(invokeSpec, header);
                                let signed_proposal = self._signProposal(userContext.getSigningIdentity(), proposal);

                                return Chain._sendPeersProposal(self.getPeers(), signed_proposal);
                        }

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00mtl:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Appears message for orderer preferredMaxBytes is incorrect.,FAB-1696,14125,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,jeffgarratt,jeffgarratt,17/Jan/17 4:54 PM,18/Jan/17 1:39 AM,26/Apr/18 6:50 AM,18/Jan/17 1:39 AM,,,,,,,,,,fabric-orderer,,,,0,,,,,,,,,preferredMaxBytes parameter not being set seems to use the same message as absMaxBytes message.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00mr5:,,,,,,,,jeffgarratt,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Remove checks for modification policy compliance of unchanged config items in a config block,FAB-1693,14122,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,elli-androulaki,elli-androulaki,17/Jan/17 3:47 PM,31/Jan/17 7:28 PM,26/Apr/18 6:50 AM,31/Jan/17 7:28 PM,,,,,,,,,,fabric-crypto,fabric-orderer,fabric-peer,,0,Endorser,Security,,,,,,,"Currently: 

Given a reconfiguration block, the policy manager uses the modification policy of each config item (current one) to evaluate the config block.  Then a new chain object is created and used to substitute the older one if the setup completes successfully.

Assuming the reconfiguration tx has been issued to reconfigure a parameter A in the genesis block, then the entities authorized to change A create a reconfig tx, where they add a signed configuration item with A's new value, an updated ""LastModified"" field, and their signatures, and copy from the most recent reconfig tx the other (signed) configuration items. It sets the sequence number of the config tx, signs it and submits it to the nextwork. 

On the *validation* of this transaction, all the configuration items are checked for validity,  based on *the currently stored modification policy* for that item. However this causes a problem if the modification policy of an item has changed among configurations.

To resolve this we need to:
 - check for all configuration items that have not been updated, if they are (in their signed form) identical to the ones in the configuration transaction that last updated that item. This likely already  in the code.
 - remove subsequent signature checks on this item. 
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00mqh:,,Sprint 10 - Crypto,,,,,,elli-androulaki,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Confusing errors during cop server startup,FAB-1691,14120,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,keithsmith,kenzhang,kenzhang,17/Jan/17 1:56 PM,06/Apr/17 1:33 AM,26/Apr/18 6:50 AM,06/Apr/17 1:33 AM,,,,,,,,,,fabric-ca,,,,0,,,,,,,,,"The following errors are shown during the cop server startup:

2017/01/16 20:10:46 [INFO] Initializing signer
2017/01/16 20:10:46 [WARNING] couldn't initialize signer: {""code"":2000,""message"":""Unknown private key error""}
2017/01/16 20:10:46 [WARNING] couldn't initialize ocsp signer: open : no such file or directory

Opening defect based on reply:
keithsmith [2:49 AM] 
@kenzhang You can ignore those warnings pertaining to OCSP.  They come from cfssl and are ""normal"" but agree are confusing.  Pls open a Jira item and assign to me for clean up.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00mq1:,,,,,,,,kenzhang,smithbk,,,,,,,,,,,,,"06/Apr/17 1:33 AM;smithbk;This has been fixed for a while now, but forgot to mark so earlier.",,,,,,,,,,,,,,,,,,,,,,,
FSM Error,FAB-1689,14118,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,akarshagrawal792,akarshagrawal792,akarshagrawal792,17/Jan/17 9:55 AM,11/Apr/17 9:44 PM,26/Apr/18 6:50 AM,11/Apr/17 9:44 PM,,,,,,,WON'T FIX,,,fabric-peer,,,,0,,,,,,,,,"I'm not able to perform query command on my sample chaincode example, chaincode_example02.

I'm able to perform deploy and invoke commands after starting the docker images. But error pops up in query command.

I'm not using development mode for the peer images.
I get the following response after the error:

 ""Error when querying chaincode: Error:Failed to launch chaincode spec(Could not get deployment transaction for mycc - LedgerError - ResourceNotFound: ledger: resource not found)""

Also, I got some error of ""FSM Handler"" and ""RANGE_QUERY_STATE"" on the console log while executing the command.

I ran the blockchain on debug mode, so have seen all the logs and there was no error in deploying or invoking the chaincode.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzpl:s,,Sprint 10 - Ledger,,,,,,akarshagrawal792,denyeart,,,,,,,,,,,,,"11/Apr/17 9:43 PM;denyeart;I believe that is a 0.6 error, the error does not occur on 1.0.  v0.6 will not be enhanced.",,,,,,,,,,,,,,,,,,,,,,,
sbft/main unit test fails on Power (ppc64le) platform,FAB-1688,14117,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,SriramaSharma,SriramaSharma,17/Jan/17 9:51 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,26/May/17 6:09 PM,,,,,,,v1.0.0-alpha1,,,fabric-orderer,,,,2,,,,,,,,,"Since CR #2515 (https://gerrit.hyperledger.org/r/2515)  - ""Add networked stress tests for SBFT"" has been merged, the sbft/main tests fails as part of `make unit-tests` with below error on ppc64le platform.

{noformat}
unit-tests_1  | FAIL
unit-tests_1  | coverage: 49.2% of statements
unit-tests_1  | FAIL	github.com/hyperledger/fabric/orderer/sbft/main	834.346s
unit-tests_1  | error: exit status 1
unit-tests_1  | panic: EOF
unit-tests_1  | 
unit-tests_1  | goroutine 1 [running]:
unit-tests_1  | panic(0x11ae80, 0xc42000a0f0)
unit-tests_1  | 	/opt/go/src/runtime/panic.go:500 +0x3a8
unit-tests_1  | main.main()
unit-tests_1  | 	/opt/gotools/obj/gopath/src/github.com/AlekSi/gocov-xml/gocov-xml.go:60 +0x148
{noformat}

All unit tests passes when I checkout the previous commit tag (`git checkout ec83773a15a5bcff328dd1c641dd600b9fb8e9b4`) and do a build.

When I check out the commit tag - cf03f20e0ed7ba5fb5f0afc6be1bf8cfe260d187, the error is seen. 

Attaching the CLI output of make unit-test in both the above cases for reference.
",,,,,,,,,,,,,,,,,,,,17/Jan/17 9:50 AM;SriramaSharma;issue.txt.zip;https://jira.hyperledger.org/secure/attachment/10379/issue.txt.zip,17/Jan/17 9:49 AM;SriramaSharma;works.txt;https://jira.hyperledger.org/secure/attachment/10380/works.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00mpl:,,,,,,,,binhn,bsmita,ChristopherFerris,harsha544,SriramaSharma,,,,,,master,,,true,01/Feb/17 2:35 PM;bsmita;Looks like these tests were moved from sbft/main to orderer/network_test.go and orderer/sbft_test.go.,"09/Apr/17 8:48 PM;binhn;[~kchristidis]
We should remove sbft tests from 1.0","26/May/17 6:10 PM;ChristopherFerris;[~hgabre] submitted this, intending to address this bug. [https://github.com/hyperledger/fabric/commit/ae480207632392764f54abbdecb485e2b17b7fed]

While I agree we should remove sbft from 1.0, going to close this.",,,,,,,,,,,,,,,,,,,,,
failed to register admin : Identity or token does not match,FAB-1687,14116,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,RajkumarSomasundaram,RajkumarSomasundaram,17/Jan/17 5:19 AM,09/Apr/17 8:53 PM,26/Apr/18 6:50 AM,09/Apr/17 8:53 PM,,,,,,,,,,,,,,0,,,,,,,,,"I know this is a well known issue. But unfortunately none of the solutions work for me. 
As per the below link I have followed Option 3; Link says that docker handles cleanup.

https://github.com/hyperledger/fabric/blob/master/docs/Setup/Chaincode-setup.md#removing-temporary-files-when-security-is-enabled

1) Little Elaboration on docker cleanup part
2) How do I proceed forward??

here's what I did :
1-->In one Terminal I ran docker compose up.
2-->In another I went to the directory containing my chaincode and ran 
3-->CORE_CHAINCODE_ID_NAME=mycc CORE_PEER_ADDRESS=0.0.0.0:7051 ./chaincode

In the 3rd terminal I ran my app.js in this way:
CORE_CHAINCODE_ID_NAME=mycc CORE_PEER_ADDRESS=0.0.0.0:7051 MEMBERSRVC_ADDRESS=0.0.0.0:7054 DEPLOY_MODE=dev node app.js

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00mpd:,,,,,,,,binhn,RajkumarSomasundaram,,,,,,,,,,,,,"19/Jan/17 5:24 AM;RajkumarSomasundaram;Can someone please give your insight on this. This is holding me back for days.

Please.","09/Apr/17 8:52 PM;binhn;Please follow the end to end sample documented here https://github.com/hyperledger/fabric/tree/master/examples/e2e_cli
and post questions on chat channels",,,,,,,,,,,,,,,,,,,,,,
Items() in configtx doesn't set header type properly,FAB-1683,14110,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,16/Jan/17 10:10 PM,18/Jan/17 9:47 PM,26/Apr/18 6:50 AM,18/Jan/17 9:47 PM,,,,,,,,,,,,,,0,,,,,,,,,"How to reproduce: 
1) make a configuration item	
confItem := &common.ConfigurationItem{
		Header: &common.ChainHeader{
			ChainID: testChainID,
			Type:    int32(common.HeaderType_CONFIGURATION_ITEM),
		},
                ....

2) call configtx.NewSimpleTemplate(confItem).Items() and see the extracted type in the header is set to the zero value instead of the value set in (1).

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00moh:,,,,,,,,yacovm,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"[node-SDK] Error: Enrollment failed with errors [[{""code"":0,""message"":""User 'admin' is in state 1""}]]",FAB-1682,14109,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jjjjibm,jjjjibm,16/Jan/17 9:41 PM,08/Feb/17 12:58 PM,26/Apr/18 6:50 AM,08/Feb/17 12:58 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"I ran chain-fabriccop-tests.js with this result:

 node chain-fabriccop-tests.js
info: Returning a new winston logger with default configurations
TAP version 13
# Attempt to use FabricCOPServices
info: [crypto_ecdsa_aes]: This class requires a KeyValueStore to save keys, no store was passed in, using the default store
info: [crypto_ecdsa_aes]: This class requires a KeyValueStore to save keys, no store was passed in, using the default store
info: [Chain.js]: Constructed Chain instance: name - copTest, securityEnabled: true, TCert download batch size: 10, network mode: true
info: [crypto_ecdsa_aes]: This class requires a KeyValueStore to save keys, no store was passed in, using the default store
info: [FabricCOPImpl.js]: Successfully constructed Fabric COP service client: endpoint - {""protocol"":""http"",""hostname"":""localhost"",""port"":8888}
not ok 1 Failed to enroll admin with COP server. Error: Error: Enrollment failed with errors [[{""code"":0,""message"":""User 'admin' is in state 1""}]]
  ---
    operator: fail
    at: process._tickCallback (internal/process/next_tick.js:103:7)

The error comes from enroll:
var FabricCOPServices = require('hfc-cop/lib/FabricCOPImpl');
	var copService = new FabricCOPServices('http://localhost:8888');
copService.enroll({
		enrollmentID: 'admin',
		enrollmentSecret: 'adminpw'
	})

I checked these documents for the error message:
https://docs.google.com/document/d/1TO-sdHGpn8ifB9C_pH_y54H75Rx0RdXvZih7-lhsLII/edit#

https://docs.google.com/document/d/1R5RtIBMW9fZpli37E5Li5_Q9ve3BnQ4q3gWmGZj6Sv4/edit#

Neither describes the error, much less a solution. 

Either the error message needs to be revised, or the documentation needs improvement. 

A team member gave me this solution for sprint 7 commit levels: 
1. stop cop, 
2.rm $HOME/.cop/cop.db
3 rm -rf /tmp/hfc-*
","Vlaunch VM running Ubuntu and a local network on this VM.

git checkout $FABRIC ""sprint7""  ""d26b8b4aa8e382555f3e6b518a3ef9d5bbfc8091""
git	checkout $COP ""sprint7"" ""ffb4fc22b84775769c755c5c3db53f6911ba4835""
git checkout $FABRIC_SDK_NODE ""sprint7"" ""662135eedefd43e0d249362b991cf04e2b423783""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00mo9:,,,,,,,,jimthematrix,jjjjibm,,,,,,,,,,,,,08/Feb/17 12:57 PM;jimthematrix;[~jjjjibm] the solution you listed at the end of the description test is the expected set up to run the test,,,,,,,,,,,,,,,,,,,,,,,
Server throws stack trace when enrolling user with sign endpoint disabled,FAB-1680,14107,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,skarim,skarim,16/Jan/17 9:04 PM,10/Mar/17 3:55 PM,26/Apr/18 6:50 AM,10/Mar/17 3:55 PM,,,,,,,,,,fabric-ca,fabric-membersrvc,,,0,MembershipServices,,,,,,,,"Need to more gracefully handle error case where COP server was started with no certificate and key, and thus the CFSSL sign endpoint is not disabled. In the scenario, if an enroll is attempted the follow stack trace is seen on the server:

2017/01/16 15:33:51 [DEBUG] Received request for endpoint enroll
2017/01/16 15:33:51 http: panic serving 127.0.0.1:63301: runtime error: invalid memory address or nil pointer dereference
goroutine 36 [running]:
net/http.(*conn).serve.func1(0xc420691a80)
	/usr/local/go/src/net/http/server.go:1491 +0x12a
panic(0x4717fe0, 0xc4200140c0)
	/usr/local/go/src/runtime/panic.go:458 +0x243
github.com/hyperledger/fabric-cop/cli/server.(*signHandler).Handle(0xc42073d170, 0x4ab51a0, 0xc420244750, 0xc420734c30, 0xc42073e601, 0xc4202f8dc0)
	/Users/saadkarim/Development/src/github.com/hyperledger/fabric-cop/cli/server/enroll.go:76 +0x20d
github.com/hyperledger/fabric-cop/vendor/github.com/cloudflare/cfssl/api.HTTPHandler.ServeHTTP(0x4aacb20, 0xc42073d170, 0xc42073d180, 0x1, 0x1, 0x4ab51a0, 0xc420244750, 0xc420734c30)
	/Users/saadkarim/Development/src/github.com/hyperledger/fabric-cop/vendor/github.com/cloudflare/cfssl/api/api.go:85 +0x3e4
github.com/hyperledger/fabric-cop/vendor/github.com/cloudflare/cfssl/api.(*HTTPHandler).ServeHTTP(0xc4207319e0, 0x4ab51a0, 0xc420244750, 0xc420734c30)
	<autogenerated>:4 +0x8c
github.com/hyperledger/fabric-cop/cli/server.(*copAuthHandler).ServeHTTP(0xc42073e680, 0x4ab51a0, 0xc420244750, 0xc420734c30)
	/Users/saadkarim/Development/src/github.com/hyperledger/fabric-cop/cli/server/auth.go:82 +0x91
net/http.(*ServeMux).ServeHTTP(0x4aebe40, 0x4ab51a0, 0xc420244750, 0xc420734c30)
	/usr/local/go/src/net/http/server.go:2022 +0x7f
net/http.serverHandler.ServeHTTP(0xc420691880, 0x4ab51a0, 0xc420244750, 0xc420734c30)
	/usr/local/go/src/net/http/server.go:2202 +0x7d
net/http.(*conn).serve(0xc420691a80, 0x4ab5aa0, 0xc420241cc0)
	/usr/local/go/src/net/http/server.go:1579 +0x4b7
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2293 +0x44d

Need to provide more meaningful error.",,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhy:zzx,,Sprint 9 - Membership Services,Sprint 10 - Membership Service,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Delete cop.db after running COP unit tests,FAB-1677,14104,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,smithbk,smithbk,16/Jan/17 7:07 PM,13/Apr/17 11:27 PM,26/Apr/18 6:50 AM,13/Apr/17 11:26 PM,,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"If you try to run the unit-tests twice in a row, the 2nd run will fail because the test cases require that you start with a clean DB.  The fix is to remove the cop.db after running the unit tests.  The unit tests should themselves do this.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00mnd:,,Sprint 9 - Membership Services,,,,,,smithbk,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
COP returns 500 rather than appropriate http error code,FAB-1676,14103,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,smithbk,smithbk,16/Jan/17 6:48 PM,06/Apr/17 1:34 AM,26/Apr/18 6:50 AM,06/Apr/17 1:34 AM,,,,,,,,,,fabric-ca,,,,0,,,,,,,,,"To reproduce, try to enroll with an invalid enrollment ID or secret.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00mn5:,,Sprint 9 - Membership Services,,,,,,lehors,smithbk,,,,,,,,,,,,,"17/Jan/17 7:55 PM;lehors;One simple way to reproduce the problem is to add the following test to cli/client/client_test.go after TextEnrollCLI:


{code:java}
// do it again!
func TestEnrollCLI2(t *testing.T) {

    c := new(cli.Config)

    args := []string{""admin"", ""adminpw"", ""https://localhost:8888""}

    err := enrollMain(args, *c)
    if err != nil {
        t.Error(""Failed to register, err: "", err)
    }

}

{code}

Then run ""go test -v github.com/hyperledger/fabric-cop/cli/client -run EnrollCLI"", it will give:
...
2017/01/17 19:15:33 [DEBUG] Getting user admin from the database
2017/01/17 19:15:33 [DEBUG] DB: Login user admin with max enrollments of 1 and state of 1
2017/01/17 19:15:33 [DEBUG] Received response
statusCode=500 (500 Internal Server Error)
--- FAIL: TestEnrollCLI2 (0.01s)
       client_test.go:80: Failed to register, err:  Error response from server was 'The maximum number of enrollments is 1' for request:
               POST https://localhost:8888/api/v1/cfssl/enroll
               Authorization: Basic YWRtaW46YWRtaW5wdw==
...",06/Apr/17 1:34 AM;smithbk;This was fixed more than a month ago.,,,,,,,,,,,,,,,,,,,,,,
chaincode does not need core.yaml,FAB-1665,14092,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,muralisr,muralisr,16/Jan/17 6:10 AM,20/Jan/17 12:40 AM,26/Apr/18 6:50 AM,20/Jan/17 12:40 AM,,,,,,,,,,fabric-endorser,,,,0,,,,,,,,,"All parameters are passed to chaincode via environment variables or as parameters. Default properties need not be picked up from core.yaml. In 1.0 architecture, the peer no longer builds the chaincode package but only passes it to docker to deploy (the package is built by CLI or SDK). In this mode the core.yaml in the Dockerfile will typically not be available in the peer environment.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00mkx:,,,,,,,,muralisr,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
gossip test failure in CI,FAB-1660,14087,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,muralisr,muralisr,15/Jan/17 10:31 AM,11/Apr/17 7:07 PM,26/Apr/18 6:50 AM,11/Apr/17 5:23 PM,,,,,,,,,,fabric-gossip,,,,0,ci_failure,gossip,test,,,,,,"https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5168/console

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00mjt:,,,,,,,,muralisr,yacovm,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Update BDD Compose files with proper ENV vars,FAB-1659,14086,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,kchristidis,kchristidis,15/Jan/17 5:15 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,15/Jan/17 10:53 PM,,,,,,,,,,fabric-orderer,,,,0,common-components,kafka,,,,,,,"In [FAB-1612] new configuration keys were introduced on the `orderer.yaml` file. The ENV vars on the Compose files we use for the orderer-related BDD tests however were not updated accordingly. As a result, all tests would run against the default config setting (read: solo) and the Kafka path would not get tested.

We should also remove all ENV vars from the Compose files when these match the defaults in `orderer.yaml`. This reverses an earlier take on the matter. The thinking behind this change is that we don't need to keep two sets of settings unless absolutely necessary.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00mjl:,,Sprint 10 - consensus,,,,,,kchristidis,,,,,,,,,,master,,,true,15/Jan/17 6:34 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/3965/,,,,,,,,,,,,,,,,,,,,,,,
Fix occasional Deliver failure on Kafka BDD tests,FAB-1658,14085,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,kchristidis,kchristidis,15/Jan/17 5:07 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,15/Jan/17 11:52 PM,,,,,,,,,,fabric-orderer,,,,0,kafka,,,,,,,,"In [FAB-1382] the Deliver API was modified so as to work with a range. The BDD implementation of Deliver was also modified in that changesetso as to take an end block of `NEWEST`.

Occasionally, the Kafka orderer will fail on one of these BDD tests because the Deliver request comes before all the incoming (via Broadcast) messages have been processed. In that case, the `NEWEST` value is translated to a lower-numbered block than the expected one.

As an example, consider the case where we send 100 messages to the orderer, and each block has 10 messages. When we send the Deliver call, Kafka has processed 90 messages, so it translates NEWEST to 9. Our test expects NEWEST to be 10 and thus fails.

Until we find an elegant fix for this, I am adding a 1-second sleep before the Deliver call is invoked on the Kafka cases. This should add 14 seconds to the duration of these tests.

I stress that this is a temporary patch, and I am open to a more elegant solution, but the default should _not_ be a setup where the orderer fails occasionally.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00mjd:,,Sprint 10 - consensus,,,,,,kchristidis,,,,,,,,,,master,,,true,15/Jan/17 6:33 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/3967/,,,,,,,,,,,,,,,,,,,,,,,
Use of x86-based Zookeeper Docker image causes Orderer Kafka Behave test failures on z and p architectures,FAB-1657,14084,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harsha544,harrijk,harrijk,15/Jan/17 4:29 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,02/Feb/17 4:26 PM,,,,,,,v1.0.0,,,fabric-orderer,,,,0,kafka,,,,,,,,"The following files located in the fabric/bddtests directory are using an x86-based Docker image, which will result in failures for Orderer Kafka behave tests on the z and p architectures:

kafka/docker-compose.yml:5:    image: zookeeper:3.4.9
orderer-1-kafka-1/docker-compose.yml:5:    image: zookeeper:3.4.9
orderer-1-kafka-3/docker-compose.yml:5:    image: zookeeper:3.4.9
orderer-n-kafka-n/docker-compose.yml:5:    image: zookeeper:3.4.9
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzh2:z,,Sprint 10 - consensus,Sprint 11 - consensus,,,,,bsmita,harrijk,harsha544,kchristidis,,,,,,,master,,,true,"17/Jan/17 1:19 AM;kchristidis;[~harrijk]: Is someone assigned to this and working on it already? (And if so, can we update this JIRA accordingly?)",17/Jan/17 2:07 AM;harrijk;[~kchristidis]. I have assigned [~harsha544] as he is currently working on a patch for this issue.,"17/Jan/17 2:23 AM;kchristidis;Great, thank you John.

[~harsha544]: Please tag [~sanchezl] and myself on the changeset when you push it out for review. Thank you.","19/Jan/17 10:30 AM;harsha544;[~harrijk] [~kchristidis] [~sanchezl] [~bsmita] [~SriramaSharma]

 I have pushed https://gerrit.hyperledger.org/r/#/c/4555/ for review. ",,,,,,,,,,,,,,,,,,,,
Fix broken Docker Compose files for Kafka orderer,FAB-1656,14083,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrijk,kchristidis,kchristidis,15/Jan/17 2:29 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,15/Jan/17 6:12 PM,,,,,,,,,,fabric-orderer,,,,0,common-components,kafka,,,,,,,"The change introduced in [FAB-1413] does not address the case where the BDD tests are executed manually (via a `behave -k features/orderer.feature` invocation for instance); in this case, the `bddtests/environments/kafka` file remains without a proper Dockerfile, and the Kafka-related tests fail.

We need a way to point to the right Dockerfile for Kafka, and pass the required Docker tag.",,,,,,,,,,,,,,,,,FAB-1657,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00mix:,,Sprint 10 - consensus,,,,,,harrijk,kchristidis,,,,,,,,,,,,,15/Jan/17 4:18 AM;harrijk;I will open an issue to address the use of an x86-based Docker image for Zookeeper currently being used for the Orderer Kafka tests. Both p and z will still fail using the current zookeeper Docker image. One step at a time. :),"15/Jan/17 4:30 AM;harrijk;Issue opened and linked to this issue:
https://jira.hyperledger.org/browse/FAB-1657","15/Jan/17 5:18 AM;kchristidis;[~harrijk] I've updated the issue description so that it deals only with the [FAB-1413] induced change.

(The other part is handled in [FAB-1659].)","15/Jan/17 5:21 AM;harrijk;Thanks. Hopefully, we can get all platforms working with these tests.",15/Jan/17 4:29 PM;harrijk;[~kchristidis] I assume that you already tried running *make behave-deps* prior to running your individual behave tests?  The kafka Dockerfile and the hyperledger/fabric-testenv:<tag> Docker image are created at this time.,15/Jan/17 6:12 PM;kchristidis;[~harrijk] The fix posted in https://gerrit.hyperledger.org/r/3965 along with `make behave-deps` seem to work great. Closing this.,,,,,,,,,,,,,,,,,,
broadcast_timestamp client broken,FAB-1651,14078,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,jyellick,jyellick,13/Jan/17 10:39 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,14/Jan/17 8:55 PM,,,,,,,,,,fabric-orderer,,,,0,,,,,,,,,"The broadcast_timestamp client has gotten slightly out of sync with the
orderer code, and does not work.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00mht:,,,,,,,,jyellick,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
References to rocksdb should be removed from fabric,FAB-1636,14051,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,smithbk,smithbk,13/Jan/17 5:07 AM,12/May/17 4:45 PM,26/Apr/18 6:50 AM,16/Apr/17 12:05 PM,,,,,,,v1.0.0,,,fabric-ledger,,,,0,Ledger,,,,,,,,"The fabric still has references to rocksdb.  I'm removing the one in the CGO_LDFLAGS env variable in fabric/devenv/setup.sh so COP will build in https://jira.hyperledger.org/browse/FAB-1597, but looks like other references need to be removed and perhaps other clean up needed.   See references to rocksdb ...
# cd fabric
# grep -r rocksdb *
examples/chaincode/go/asset_management02/asset.yaml:        RUN cd /opt  && git clone --branch v4.1 --single-branch --depth 1 https://github.com/facebook/rocksdb.git && cd rocksdb
examples/chaincode/go/asset_management02/asset.yaml:        WORKDIR /opt/rocksdb
examples/chaincode/go/asset_management02/asset.yaml:        ENV LD_LIBRARY_PATH=/opt/rocksdb:$LD_LIBRARY_PATH
examples/chaincode/go/asset_management02/asset.yaml:        RUN CGO_CFLAGS=""-I/opt/rocksdb/include"" CGO_LDFLAGS=""-L/opt/rocksdb -lrocksdb -lstdc++ -lm -lz -lbz2 -lsnappy"" go install && cp $GOPATH/src/github.com/hyperledger/fabric/core.yaml $GOPATH/bin
examples/chaincode/go/asset_management_with_roles/asset.yaml:        RUN cd /opt  && git clone --branch v4.1 --single-branch --depth 1 https://github.com/facebook/rocksdb.git && cd rocksdb
examples/chaincode/go/asset_management_with_roles/asset.yaml:        WORKDIR /opt/rocksdb
examples/chaincode/go/asset_management_with_roles/asset.yaml:        ENV LD_LIBRARY_PATH=/opt/rocksdb:$LD_LIBRARY_PATH
examples/chaincode/go/asset_management_with_roles/asset.yaml:        RUN CGO_CFLAGS=""-I/opt/rocksdb/include"" CGO_LDFLAGS=""-L/opt/rocksdb -lrocksdb -lstdc++ -lm -lz -lbz2 -lsnappy"" go install && cp $GOPATH/src/github.com/hyperledger/fabric/core.yaml $GOPATH/bin
",,;15/Apr/17 1:29 PM;mastersingh24;600,,1800,0,600,33%,1800,0,600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz76:zzzr,,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,mastersingh24,smithbk,,,,,,,,,master,,,true,15/Apr/17 1:29 PM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/8067/,,,,,,,,,,,,,,,,,,,,,,,
COP client gives error messages when TLS is disabled,FAB-1624,14039,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,elast,elast,12/Jan/17 6:45 PM,06/Mar/17 2:54 PM,26/Apr/18 6:50 AM,06/Mar/17 2:54 PM,,,,,,,,,,,,,,0,,,,,,,,,"I started a COP server with TLS disabled in the cop.json config, then tried to enroll admin through the COP client:

[root@oc0337116681 bin]# ./cop client enroll admin adminpw http://localhost:8888
2017/01/12 07:46:05 [INFO] received CSR
2017/01/12 07:46:05 [INFO] generating key: ecdsa-256
2017/01/12 07:46:05 [INFO] encoded CSR
2017/01/12 07:46:05 [ERROR] Failed to load client configuration file [error: open /root/cop/cop_client.json: no such file or directory]
2017/01/12 07:46:05 [ERROR] Error: unexpected end of JSON input
2017/01/12 07:46:05 [WARNING] Client Cert or Key not provided, if server requires mutual TLS, the connection will fail [error: open : no such file or directory]
2017/01/12 07:46:05 [ERROR] No CA cert files provided, TLS connection cannot be established
2017/01/12 07:46:05 [INFO] enrollment information was successfully stored in /root/cop/key.pem and /root/cop/cert.pem

Even though the enrollment went through successfully, the client should not give error messages about TLS, seeing as TLS is disabled.  The same thing happened when I tried to register.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00m9l:,,,,,,,,elast,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
make docker failure for fabric,FAB-1620,14035,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ghaskins,smithbk,smithbk,12/Jan/17 2:25 PM,11/May/17 7:44 PM,26/Apr/18 6:50 AM,11/May/17 7:44 PM,v1.0.0,,,,,,Unverifiable,,,fabric-baseimage,fabric-peer,,,0,,,,,,,,,"Get the following error when building docker for fabric

$ make docker
Building build/docker/bin/peer
mkdir -p build/image/peer/payload
cp build/docker/bin/peer peer/core.yaml build/msp-sampleconfig.tar.bz2 build/image/peer/payload
Installing chaintool
curl -L https://github.com/hyperledger/fabric-chaintool/releases/download/v0.10.0/chaintool > build/bin/chaintool
 % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                Dload  Upload   Total   Spent    Left  Speed
100   582    0   582    0     0   1289      0 --:--:-- --:--:-- --:--:--  1290
100 14.6M  100 14.6M    0     0  3022k      0  0:00:04  0:00:04 --:--:-- 3480k
chmod +x build/bin/chaintool
mkdir -p build/image/ccenv/payload
cp build/docker/gotools/bin/protoc-gen-go build/bin/chaintool build/goshim.tar.bz2 build/image/ccenv/payload
cp: build/docker/gotools/bin/protoc-gen-go: No such file or directory
make: *** [build/image/ccenv/payload] Error 1

dependency issue in Makefile perhaps?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00m8p:,,,,,,,,binhn,smithbk,,,,,,,,,,,,,"09/Apr/17 8:55 PM;binhn;[~keithsmith] ""make docker"" works for me.  Retry?

If can't recreate, please close.",,,,,,,,,,,,,,,,,,,,,,,
Delete marbles.js from integration test suite,FAB-1592,14003,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,10/Jan/17 6:05 PM,05/Jun/17 7:54 PM,26/Apr/18 6:50 AM,05/Jun/17 7:54 PM,v1.0.0-alpha2,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,,,,,,,,,we have left the marbles.js behind so that we don't do dual maintenance with it and end-to-end.js. But at some point it should be updated to work with the latest fabric and SDK.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzz6a:y,,Sprint 12 - SDK node,Sprint 13 - SDK node,Sprint 14 - SDK node,Sprint 15 - SDK node,,,ChristopherFerris,jjjjibm,,,,,,,,,master,,,true,12/Apr/17 7:01 PM;ChristopherFerris;isn't this in progress? [~mastersingh24],"05/Jun/17 5:58 PM;jimthematrix;this one is referring to the fabric-sdk-node/test/integration/marbles.js, which at one point was used to demonstrate the JSON based chaincode state handling, based on the chaincode that [~denyeart] wrote. But the application code is not any different than using any other chaincodes. Nor does it really test anything additional that the rest of the integration test suite has not tested.

we should just delete the marbles.js and the chaincode.",,,,,,,,,,,,,,,,,,,,,,
[node-SDK] orderer-chain-tests.js not ok 6 Test setting an empty orderer address ,FAB-1590,14001,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,10/Jan/17 5:51 PM,08/Mar/17 4:55 AM,26/Apr/18 6:50 AM,08/Mar/17 4:55 AM,,,,,,,,,,fabric-sdk-node,,,,0,help-wanted,,,,,,,,"Having set up fabric, fabric-cop, and fabric-sdk-node per JIm Zhang's sprint 7 video, test 6 of orderer-chain-tests.js fails with this message:

not ok 6 Test setting an empty orderer address
  ---
    operator: throws
    expected: |-
      '/TypeError: Parameter \'url\' must be a string/'
    actual: |-
      { [TypeError: Parameter ""url"" must be a string, not undefined] message: 'Parameter ""url"" must be a string, not undefined' }
    at: Test.<anonymous> (/home/ibmadmin/work/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape-promise/index.es5.js:21:13)
  ...
#
How to recreate:  
1.Set up fabric per Jim Zhang's sprint 7 video.  See 'Environment in this issue for commit levels'. 
2.cd fabric-sdk-node/test/unit
3.node headless-tests.js  /* not sure this matters, but I happened to run this test first. */
4.node orderer-chain-tests.js 
","Use commit levels specified in Jim Zhang's sprint 7 video:

Fabric:
git checkout -b sprint7 d26b8b4aa8e382555f3e6b518a3ef9d5bbfc8091
fabric-cop:
        git checkout -b sprint7 ffb4fc22b84775769c755c5c3db53f6911ba4835
fabric-sdk-node
        git checkout -b sprint7 662135eedefd43e0d249362b991cf04e2b423783

I am running a vlaunch VM running Ubuntu ""trusty"" .  
I am using the docker compose file in fabric-sdk-",,,,,,,,,,,,,,,,FAB-1593,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00m15:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] headless-tests.js not ok 12 checking that able to test-2 value from an additional configuration file,FAB-1589,14000,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,10/Jan/17 5:40 PM,08/Feb/17 1:01 PM,26/Apr/18 6:50 AM,08/Feb/17 1:01 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"After running the example in Jim Zhang's sprint 7 video, one of the headless-test.js tests fails:

not ok 12 checking that able to test-2 value from an additional configuration file
  ---
    operator: equal
    expected: 'local'
    actual:   'notfound'
    at: Test.<anonymous> (/home/ibmadmin/work/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape-promise/index.es5.js:21:13)

...

1..205
# tests 205
# pass  204
# fail  1

  ...
How to recreate:
1.Set up environment as in JIm's sprint 7 video, stopping just short of the end-to-end test.
2.cd fabric-sdk-node/test/unit
3.node headless-tests.js ","Use commit levels specified in Jim Zhang's sprint 7 video:

Fabric:
git checkout -b sprint7 d26b8b4aa8e382555f3e6b518a3ef9d5bbfc8091
fabric-cop:
        git checkout -b sprint7 ffb4fc22b84775769c755c5c3db53f6911ba4835
fabric-sdk-node
        git checkout -b sprint7 662135eedefd43e0d249362b991cf04e2b423783

I am running a vlaunch VM running Ubuntu ""trusty"" .  
I am using the docker compose file in fabric-sdk-node/test/fixtures
",,,,,,,,,,,,,,,,FAB-1593,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00m0x:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] dead link in generated documentation,FAB-1584,13995,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jjjjibm,jjjjibm,10/Jan/17 4:12 PM,05/Apr/17 6:42 PM,26/Apr/18 6:50 AM,05/Apr/17 6:42 PM,,,,,,,,,,fabric-sdk-node,,,,0,help-wanted,,,,,,,,"1.cd fabric-sdk-node
2.gulp doc to generate documentation
3.python -m SimpleHTTPServer

4.In a browser, navigate to <ip>:8000->docs/gen/
5.From Modules pulldown menu, select hfc

This displays a page with this text:
Module: hfc

This is the main module for the ""hfc"" (Hyperledger Fabric Client) package. It provides the convenience APIs to the classes of the package including* Chain*

where* Chain *is a link.
6.Click *Chain*

See this: 
Error response

Error code 404.

Message: File not found.

Error code explanation: 404 = Nothing matches the given URI. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00lzt:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Proto files out of sync with generated code,FAB-1572,13982,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,sanchezl,sanchezl,09/Jan/17 10:03 PM,11/Jan/17 4:19 PM,26/Apr/18 6:50 AM,11/Jan/17 4:18 PM,,,,,,,,,,,,,,0,,,,,,,,,"After {{make protos}}:
{{
	modified:   protos/common/chain-config.pb.go
	modified:   protos/common/common.pb.go
	modified:   protos/common/configuration.pb.go
}}",,,,,,,,,,,,,,,,FAB-1468,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00lwx:,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Need to take away and consolidate crypto primitives form core/util/utils.go,FAB-1569,13979,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,adc,C0rWin,C0rWin,09/Jan/17 7:47 PM,18/Apr/17 7:53 AM,26/Apr/18 6:50 AM,11/Apr/17 4:57 AM,,,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,,"This item created basically to capture [~binhn] comments from https://gerrit.hyperledger.org/r/#/c/3595/3/core/util/utils.go

See screenshot:

 !Screen Shot 2017-01-09 at 21.45.50.png|thumbnail! 

Per [~binhn] advice assigning issue to [~adc]",,,,,,,,,,,,,,,,,,,,09/Jan/17 7:47 PM;C0rWin;Screen Shot 2017-01-09 at 21.45.50.png;https://jira.hyperledger.org/secure/attachment/10373/Screen+Shot+2017-01-09+at+21.45.50.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00udk:w,,Sprint 16 - Crypto,,,,,,angelo.decaro,C0rWin,ChristopherFerris,elli-androulaki,,,,,,,,,,,"10/Jan/17 8:09 AM;angelo.decaro;[~C0rWin][~binhn][~ellaki][~ales] To consolidate such things, we need:
1. Identify where the hash is used,
2. Decide what it means to have that specific hash function there. 

This is important to understand where the configuration is taken from. We cannot use the same hash function everywhere because it depends on the context. 
For example, hash functions are used for the ledger, for the endorsement, to compute digest to be signed and so. Let's consider the case of signing a message. If we use ECDSA with curve P256 we cannot use SHA-128 or SHA-384, we have to use SHA-256. This should be taken care by the local MSP configuration, for example.

I think we need a call here to clarify these aspects :)


","10/Apr/17 6:54 PM;elli-androulaki;[~adc] have we resolved this? Can i ""close"" this item? Thanks!",12/Apr/17 6:56 PM;ChristopherFerris;How was it resolved? [~ellaki] [~adc],,,,,,,,,,,,,,,,,,,,,
SHA3 Python module used for Behave Tests does not support the z platform,FAB-1567,13977,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,SriramaSharma,harrijk,harrijk,09/Jan/17 6:45 PM,11/Apr/17 9:36 PM,26/Apr/18 6:50 AM,11/Apr/17 9:36 PM,,,,,,,v1.0.0,,,fabric-peer,,,,0,build-system,,,,,,,,"CR 3665 ( https://gerrit.hyperledger.org/r/#/c/3665/ ) introduced some additional python modules required to run the Behave tests.

One of these modules sha3 (v0.2.1) does not support z Systems.  The module contains three functions that are not yet implemented for Big Endian machines (e.g., z Systems).

Within one of the sha3's source files, KeccakF-1600-opt64.c, the following functions are not yet implemented for z:
1. KeccakF1600_StateOverwriteBytesInLane
2. KeccakF1600_StateOverwriteLanes
3. KeccakF1600_StateOverwriteWithZeroes
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00lvt:,,,,,,,,harrijk,silliman,SriramaSharma,,,,,,,,master,,,true,"07/Mar/17 2:39 PM;SriramaSharma;Have pushed CR 6415 - https://gerrit.hyperledger.org/r/6415 to fix this issue and also to update the devenv scripts for Power, system z  and x86_64 platforms.",,,,,,,,,,,,,,,,,,,,,,,
path names in COP config file are not processed correctly,FAB-1549,13959,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,smithbk,smithbk,08/Jan/17 10:39 AM,10/Mar/17 3:54 PM,26/Apr/18 6:50 AM,10/Mar/17 3:54 PM,,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"All non-absolute file names or path names listed in the COP config file should be made into absolute file paths by looking relative to the location of the config file itself, not relative to the current working directory.
For example, the following is currently in fabric-cop/testdata/testconfig.json:
{code}
""ca_cert"":""../testdata/ec.pem"",
{code}
This should simply be:
{code}
""ca_cert"": ""ec.pem"",
{code}
and since ""ec.pem"" is not an absolute path, it is located by looking relative to the location of the config file; therefore, it will be found in the fabric-cop/testdata also, not matter which directory you invoke ""cop server start -config ..."" from.

Note that file names listed on the command line via arguments are different and must continue to be process relative to the current working directory.   For example, if the -ca option is used as shown below from the fabric-cop directory, then the ec.pem file must be located in the fabric-cop directory, which is the current working directory.
{code}
cop server start -ca ec.pem -config testdata/testconfig.json
{code}

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00lt5:,,Sprint 9 - Membership Services,,,,,,smithbk,,,,,,,,,,master,,,true,08/Jan/17 5:44 PM;smithbk;See http://gerrit.hyperledger.org/r/3749,"08/Jan/17 5:51 PM;smithbk;Saad, I've fixed this for the server config file.  I'm assigning to you to fix for the client file which you introduced for TLS configuration.   See cop_client.json and cop_client2.json in testdata.  We should only need a cop_client.json and can delete cop_client2.json once that is done.  See  http://gerrit.hyperledger.org/r/3749 for how this is solved for the server.  You can reuse the util.MakeFileAbs function for this.",,,,,,,,,,,,,,,,,,,,,,
"""make ldap-tests"" fails due to test code bug",FAB-1546,13956,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yuki-kon,yuki-kon,yuki-kon,07/Jan/17 7:43 AM,23/Apr/17 1:20 PM,26/Apr/18 6:50 AM,23/Apr/17 1:20 PM,v1.0.0,,,,,,v1.0.0,,,fabric-ca,,,,0,MembershipServices,,,,,,,,"The following error occurs when running ""make ldap-tests"".
In detail, runnning ""fabric-cop/cli/server/ldap/client_test.go"" fails.
The reason is that data type doesn't meet the requirement.
Data type shoud be changed from string to []srting.

{noformat}Downloading and starting openldap-cop ...
openldap-cop has been started
adding new entry ""cn=jsmith,dc=example,dc=org""

adding new entry ""uid=jsmith,dc=example,dc=org""

Running LDAP test cases ...
# github.com/hyperledger/fabric-cop/cli/server/ldap
./client_test.go:48: cannot use ""mail"" (type string) as type []string in argument to c.GetUser
FAIL    github.com/hyperledger/fabric-cop/cli/server/ldap [build failed]
LDAP test cases are complete
Stopping openldap-cop ...
10fb1fc6d5ec
10fb1fc6d5ec
Stopped openldap-cop
*** BEGIN FAILURES ***
FAIL    github.com/hyperledger/fabric-cop/cli/server/ldap [build failed]
*** END FAILURES ***
Makefile:134: recipe for target 'ldap-tests' failed
make: *** [ldap-tests] Error 1{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00lsh:,,,,,,,,harsha544,smithbk,yuki-kon,,,,,,,,master,,,true,"06/Apr/17 1:43 AM;smithbk;Yuki, this works for me.  Are you still able to reproduce?   Thanks","06/Apr/17 2:21 AM;yuki-kon;Smith, this issue is resolved by this patch, https://gerrit.hyperledger.org/r/#/c/4431/ . Thanks.",,,,,,,,,,,,,,,,,,,,,,
End-to-end test fails partially,FAB-1530,13939,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,AdnanChoudhury,AdnanChoudhury,05/Jan/17 10:02 PM,07/Mar/17 8:45 AM,26/Apr/18 6:50 AM,08/Feb/17 1:15 PM,,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"Following Jim's Sprint7 node js SDK video (https://www.youtube.com/watch?v=t7PcpkIoGAc), the attached script goes through the setup etc. and runs the end-to-end test step 1.  It runs 3 tests, and 2 of them fail.

Here is the output:


{code:java}
info: [Chain.js]: Constructed Chain instance: name - testChain-e2e, securityEnabled: true, TCert download batch size: 10, network mode: true
info: [Peer.js]: Peer.const - url: grpc://localhost:7051 options  grpc.ssl_target_name_override=tlsca, grpc.default_authority=tlsca
info: [Peer.js]: Peer.const - url: grpc://localhost:7056 options  grpc.ssl_target_name_override=tlsca, grpc.default_authority=tlsca
[2017-01-05 16:49:48.935] [INFO] E2E - Found steps: step1
TAP version 13
# End-to-end flow of chaincode deploy, transaction invocation, and query
[2017-01-05 16:49:48.941] [INFO] E2E - Executing step1
info: [Client.js]: Failed to load user ""admin"" from local key value store
[2017-01-05 16:49:48.945] [INFO] E2E - [crypto_ecdsa_aes]: This class requires a KeyValueStore to save keys, no store was passed in, using the default store
[2017-01-05 16:49:48.946] [DEBUG] E2E - [crypto_ecdsa_aes]: Hash algorithm: SHA2, hash output size: 256
[2017-01-05 16:49:48.946] [INFO] E2E - [FabricCOPImpl.js]: Successfully constructed Fabric COP service client: endpoint - {""protocol"":""http"",""hostname"":""localhost"",""port"":8888}
[2017-01-05 16:49:48.987] [DEBUG] E2E - [ecdsa/key.js]: ECDSA curve param X: 3561bf3953c987fb10c40b2123b400f4bab1e7edce4ea9d94e143be8b3d46f8f
[2017-01-05 16:49:48.987] [DEBUG] E2E - [ecdsa/key.js]: ECDSA curve param Y: 679a7d5f3f74396f0ce4466e24348c398d660331cd3f73b529fdceddb9b5e35c
not ok 1 Error: Enrollment failed with errors [[{""code"":400,""message"":""100001: failed in Sign%!(EXTRA []interface {}=[]) [{\""code\"":11000,\""message\"":\""attempt to write a readonly database\""}]""}]] at IncomingMessage.<anonymous> (/home/adnan/work/src/github.com/hyperledger/fabric-sdk-node/node_modules/hfc-cop/lib/FabricCOPImpl.js:287:22) at emitNone (events.js:91:20) at IncomingMessage.emit (events.js:185:7) at endReadableNT (_stream_readable.js:974:12) at _combinedTickCallback (internal/process/next_tick.js:74:11) at process._tickCallback (internal/process/next_tick.js:98:9)
  ---
    operator: fail
    at: process._tickCallback (internal/process/next_tick.js:103:7)
  ...
ok 2 Successfully enrolled user 'admin'
error: [Chain.js]: Sending the deployment proposal failed. Error: TypeError: Cannot read property 'getIdentity' of null
    at /home/adnan/work/src/github.com/hyperledger/fabric-sdk-node/node_modules/hfc/lib/Chain.js:381:49
error: [Chain.js]: Building the deployment proposal failed. Error: TypeError: Cannot read property 'getIdentity' of null
    at /home/adnan/work/src/github.com/hyperledger/fabric-sdk-node/node_modules/hfc/lib/Chain.js:381:49
not ok 3 TypeError: Cannot read property 'getIdentity' of null at /home/adnan/work/src/github.com/hyperledger/fabric-sdk-node/node_modules/hfc/lib/Chain.js:381:49
  ---
    operator: fail
  ...

1..3
# tests 3
# pass  1
# fail  2

{code}
",,,,,,,,,,,,,,,,,,,,05/Jan/17 9:58 PM;AdnanChoudhury;testscript.sh;https://jira.hyperledger.org/secure/attachment/10367/testscript.sh,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00lpd:,,,,,,,,AbhilekhSingh,AdnanChoudhury,ibmamnt,ishihara.shun,jimthematrix,Komhar,mastersingh24,,,,,,,,05/Feb/17 8:53 PM;mastersingh24;[~jimthematrix] - is this still an issue?,"08/Feb/17 1:16 PM;jimthematrix;[~AdnanChoudhury] if you can still reproduce this please re-open and add the conditions that makes the error happen (native process or docker for fabric-ca, what parameters are used)","10/Feb/17 4:04 AM;Komhar;Also happening with prod scripts at getting started link https://hyperledger-fabric.readthedocs.io/en/latest/gettingstarted/  on deployment of chaincode (16.10 Ubuntu).

**nfo: Returning a new winston logger with default configurations
info: [Chain.js]: Constructed Chain instance: name - fabric-client1, securityEnabled: true, TCert download batch size: 10, network mode: true
info: [Peer.js]: Peer.const - url: grpc://localhost:8051 options  grpc.ssl_target_name_override=tlsca, grpc.default_authority=tlsca
info: [Peer.js]: Peer.const - url: grpc://localhost:8055 options  grpc.ssl_target_name_override=tlsca, grpc.default_authority=tlsca
info: [Peer.js]: Peer.const - url: grpc://localhost:8056 options  grpc.ssl_target_name_override=tlsca, grpc.default_authority=tlsca
info: [Client.js]: Failed to load user ""admin"" from local key value store
info: [FabricCAClientImpl.js]: Successfully constructed Fabric CA service client: endpoint - {""protocol"":""http"",""hostname"":""localhost"",""port"":8054}
info: [crypto_ecdsa_aes]: This class requires a KeyValueStore to save keys, no store was passed in, using the default store /home/montoo/.hfc-key-store**
","07/Mar/17 8:45 AM;AbhilekhSingh;Still happening on
{code:none}
No LSB modules are available.
Distributor ID:	Ubuntu
Description:	Ubuntu 16.04.2 LTS
Release:	16.04
Codename:	xenial
{code}


{code:none}
info: Returning a new winston logger with default configurations
info: [Chain.js]: Constructed Chain instance: name - fabric-client1, securityEnabled: true, TCert download batch size: 10, network mode: true
info: [Peer.js]: Peer.const - url: grpc://localhost:8051 options  grpc.ssl_target_name_override=tlsca, grpc.default_authority=tlsca
info: [Peer.js]: Peer.const - url: grpc://localhost:8055 options  grpc.ssl_target_name_override=tlsca, grpc.default_authority=tlsca
info: [Peer.js]: Peer.const - url: grpc://localhost:8056 options  grpc.ssl_target_name_override=tlsca, grpc.default_authority=tlsca
info: [Client.js]: Failed to load user ""admin"" from local key value store
info: [FabricCAClientImpl.js]: Successfully constructed Fabric CA service client: endpoint - {""protocol"":""http"",""hostname"":""localhost"",""port"":8054}
info: [crypto_ecdsa_aes]: This class requires a KeyValueStore to save keys, no store was passed in, using the default store /home/ubuntu/.hfc-key-store
{code}",,,,,,,,,,,,,,,,,,,,
A logic bug in Commercial Paper Demo,FAB-1513,13922,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,hydrachain,hydrachain,04/Jan/17 7:57 AM,13/Apr/17 11:41 PM,26/Apr/18 6:50 AM,13/Apr/17 11:41 PM,,,,,,,WON'T FIX,,,fabric-samples,,,,0,,,,,,,,,"In the Commercial Paper Demo(https://github.com/IBM-Blockchain/cp-web), there is a logic bug to cp-web/src/chaincode/cp_cc.go in the 698 lines.
The correct code here is “toCompany.AssetsIds = append(toCompany.AssetsIds, tr.CUSIP)” rather than 'fromCompany.AssetsIds = append(fromCompany.AssetsIds, tr.CUSIP)'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00llt:,,,,,,,,ChristopherFerris,hydrachain,,,,,,,,,,,,,13/Apr/17 11:41 PM;ChristopherFerris;commercial paper is not a Hyperledger project... please file the bug with ibm-blockchain repo.,,,,,,,,,,,,,,,,,,,,,,,
Update node.js SDK's sample docker-compose.yml,FAB-1499,13908,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yuki-kon,jimthematrix,jimthematrix,03/Jan/17 1:19 AM,03/Jan/17 3:04 PM,26/Apr/18 6:50 AM,03/Jan/17 3:04 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"it's broken due to a change in orderer.yaml, that changed ""general/batchsize"" from a simple integer property to an object with a sub-property ""maxmessagecount"". as a result, the docker-compose needs to have the following change:

-      - ORDERER_GENERAL_BATCHSIZE=10
+      - ORDERER_GENERAL_BATCHSIZE_MAXMESSAGECOUNT=10
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzpm:zzz,,Sprint 8 - nodeSDK,,,,,,jimthematrix,,,,,,,,,,,,,,"03/Jan/17 3:04 PM;jimthematrix;[~yuki-kon] has already fixed this during the holiday break, thanks Yuki!",,,,,,,,,,,,,,,,,,,,,,,
Client.getUserContext() should resolve null when user was not found,FAB-1491,13900,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,inatatsu,inatatsu,30/Dec/16 8:19 AM,08/Feb/17 1:20 PM,26/Apr/18 6:50 AM,08/Feb/17 1:20 PM,v1.0.0,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,quality,,,,,,,Client.getUserContext() should resolve null when the given user name was not found in the local state store.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00lhl:,,,,,,,,inatatsu,jimthematrix,,,,,,,,,,,,,08/Feb/17 1:20 PM;jimthematrix;[~inatatsu] please review the latest code and let us know if there are still situations where proper values are not returned,,,,,,,,,,,,,,,,,,,,,,,
Transaction ID should be generated randomly,FAB-1490,13899,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,dianfu,dianfu,dianfu,30/Dec/16 1:10 AM,05/Jan/17 12:46 AM,26/Apr/18 6:50 AM,05/Jan/17 12:46 AM,,,,,,,,,,fabric-sdk-java,,,,0,,,,,,,,,Transaction ID should be generated randomly.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00lhd:,,,,,,,,dianfu,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
end-to-end.js fails due to duplicated transaction,FAB-1486,13895,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,inatatsu,inatatsu,29/Dec/16 12:11 PM,10/Jan/17 1:45 AM,26/Apr/18 6:50 AM,10/Jan/17 1:45 AM,v1.0.0,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,quality,,,,,,,,"end-to-end.js fails at step2 with the following GRPC error:
{code:java}
[2016-12-29 11:44:46.672] [INFO] E2E - Executing step2
debug: [Chain.js]: Chain.sendTransactionProposal - start
debug: [Chain.js]: Chain.sendTransactionProposal - adding function arg:invoke
debug: [Chain.js]: Chain.sendTransactionProposal - adding arg:move
debug: [Chain.js]: Chain.sendTransactionProposal - adding arg:a
debug: [Chain.js]: Chain.sendTransactionProposal - adding arg:b
debug: [Chain.js]: Chain.sendTransactionProposal - adding arg:100
[2016-12-29 11:44:46.679] [DEBUG] E2E - [crypto_ecdsa_aes]: ecdsa signature:  Signature {
  r: <BN: f163b5aa4d91abd33a24a116b52610123624ee2b2a346c07b714556b6a6bec03>,
  s: <BN: e8ef01bf336b37e52bb32bf8becac1be7bee5e3e61a72557c6390297908201d7>,
   recoveryParam: 0 }
debug: [Chain.js]: _signProposal - signature::{""type"":""Buffer"",""data"":[48,70,2,33,0,241,99,181,170,77,145,171,211,58,36,161,22,181,38,16,18,54,36,238,43,42,52,108,7,183,20,85,107,106,107,236,3,2,33,0,232,239,1,191,51,107,55,229,43,179,43,248,190,202,193,190,123,238,94,62,97,167,37,87,198,57,2,151,144,130,1,215]}
debug: [Peer.js]: Peer.sendProposal - Start
debug: [Peer.js]: Peer.sendProposal - Start
debug: [Peer.js]: Peer.sendProposal - Start
debug: [Peer.js]: Peer.sendProposal - Start
error: [Peer.js]: GRPC client got an error response from the peer. Error: failed to obtain cds for mycc - Error executing chaincode: Failed to execute transaction (Error sending TRANSACTION: txid:%EF%BF%BD%EF%BF%BD%07%EF%BF%BD%1F8%EF%BF%BD%EF%BF%BD%EF%BF%BDx exists)
    at /fabric-sdk-node/node_modules/grpc/src/node/src/client.js:417:17
error: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: failed to obtain cds for mycc - Error executing chaincode: Failed to execute transaction (Error sending TRANSACTION: txid:%EF%BF%BD%EF%BF%BD%07%EF%BF%BD%1F8%EF%BF%BD%EF%BF%BD%EF%BF%BDx exists)
    at Object.callback (/fabric-sdk-node/node_modules/hfc/lib/Peer.js:191:13)
    at /fabric-sdk-node/node_modules/grpc/src/node/src/client.js:420:14
{code}

While the direct problem is a duplicated transaction, the root cause is that peer0 and peer1 are added to the chain multiple times since both step1 and step2 call chain.addPeer() for the validating peers.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00lgp:,,,,,,,,inatatsu,,,,,,,,,,master,,,true,29/Dec/16 4:41 PM;inatatsu;https://gerrit.hyperledger.org/r/#/c/3569/,,,,,,,,,,,,,,,,,,,,,,,
LDAP tests for fabric-cop fail on z and p platforms due to use of an x86 Docker image,FAB-1485,13894,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harsha544,harrijk,harrijk,29/Dec/16 3:31 AM,12/May/17 4:55 PM,26/Apr/18 6:50 AM,02/Apr/17 1:52 PM,,,,,,,v1.0.0,,,fabric-membersrvc,,,,0,MembershipServices,,,,,,,,"The *run_ldap_tests* script contained in the fabric-cop codebase uses an x86-based Docker image: osixia/openldap.  The LDAP tests fail on both z and p platforms due to the use of this x86-based Docker image.

The script could be changed to select the appropriate LDAP Docker image based on the detected architecture.  If there are currently no LDAP Docker images for z and p on Docker Hub, perhaps the images can be built upon the hyperledger/fabric-baseimage.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00lgh:,,,,,,,,greg.haskins,harrijk,harsha544,mastersingh24,smithbk,SriramaSharma,vpaprots,,,,master,,,true,"31/Dec/16 12:32 PM;mastersingh24;[~harrijk] Do you know if there are openldap distributions for Linux for p and z?

If not, we can look at moving to something like ApacheDS (which is Java-based)","03/Jan/17 5:34 PM;harrijk;[~mastersingh24], I have not taken a look out on Docker Hub to see if there are openldap distributions for Linux on z or p.  There have been an increasing number of fabric and fabric-cop unit tests that require external Docker images.  

In addition to openldap for fabric-cop, Kafka and Zookeeper are required for the Kafka Orderer unit tests and these tests use x86_64 Docker images as well.  I have opened up issue, [https://jira.hyperledger.org/browse/FAB-1413], regarding the use of x86_64 Docker images for the Kafka Orderer tests.

Just recently, a change, [https://gerrit.hyperledger.org/r/#/c/3161/], was submitted that proposed using x86_64 Docker images for Postgres and haproxy.

I wonder if it would make sense to come up with a plan to implement our own set of Docker images for all three platforms, if there are no publicly available OpenLDAP, Kafka, Zookeeper, Postgres and Haproxy Docker images for z and p.","17/Jan/17 10:33 AM;SriramaSharma;[~mastersingh24], openldap distribution for Linux on POWER (ppc64le) is available at https://hub.docker.com/r/dockerppc64le/docker-openldap/ ","17/Jan/17 4:52 PM;smithbk;Is there a platform env variable I can key off of, and if so, what are the values of the var for X, P, and Z?","17/Jan/17 5:04 PM;smithbk;No env var, but use 'uname -m' to get the platform and check for:
X is ""x86_64"", P is ""ppcle64"", and Z is ""s390x""","20/Jan/17 12:02 PM;mastersingh24;[~harrijk] RE:  Kafka, Zookeeper - we should be able to take the images a few folks are building internally for the IBM offerings (at least for Z) and publish them externally if we need to",20/Mar/17 12:41 PM;harsha544;Pushed CR via https://gerrit.hyperledger.org/r/#/c/6899/4 ,,,,,,,,,,,,,,,,,
Make SBFT network test clean up the files it created,FAB-1481,13890,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,hgabre,hgabre,hgabre,28/Dec/16 6:52 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,03/Feb/17 9:11 AM,,,,,,,,,,fabric-orderer,,,,0,sbft,,,,,,,,"SBFT network test (stress test) calls the sbft app using the command line, that's why it also builds it. This executable needs to be removed after the test finishes.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00lfl:,,,,,,,,hgabre,vukolic,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
make behave (Running Behave BDD Tests) generate errors and skipping tests,FAB-1480,13889,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,dragon82,dragon82,26/Dec/16 7:28 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,13/Apr/17 12:53 PM,,,,,,,v1.0.0,,,fabric-orderer,,,,0,behave,build-system,chaincode,fabric05,fabric06,help-wanted,Ledger,quality,"Hello People,

I tried to make behave which running the behave BDD tests and it generate the following errors and skipping tests as well:

make behave >> behave_log.txt
zookeeper uses an image, skipping
Building kafka
zookeeper uses an image, skipping
Building kafka0
orderer0 uses an image, skipping
zookeeper uses an image, skipping
Building kafka2
Building kafka1
Building kafka0
orderer0 uses an image, skipping

You can implement step definitions for undefined steps with these snippets:

@given(u'user requests role of peer admin by creating a key and csr for peer and acquires signed certificate from organization')
def step_impl(context):
    raise NotImplementedError(u'STEP: Given user requests role of peer admin by creating a key and csr for peer and acquires signed certificate from organization')

@given(u'user requests role of peer signer by creating a key and csr for peer and acquires signed certificate from organization')
def step_impl(context):
    raise NotImplementedError(u'STEP: Given user requests role of peer signer by creating a key and csr for peer and acquires signed certificate from organization')

@given(u'peer admins get the genesis block for chain \'chain1\' from chainBoostrapAdmin')
def step_impl(context):
    raise NotImplementedError(u'STEP: Given peer admins get the genesis block for chain \'chain1\' from chainBoostrapAdmin')

@given(u'the peer admins inspect and approve the genesis block for chain \'chain1\'')
def step_impl(context):
    raise NotImplementedError(u'STEP: Given the peer admins inspect and approve the genesis block for chain \'chain1\'')

@given(u'the peer admins use the genesis block for chain \'chain1\' to configure peers')
def step_impl(context):
    raise NotImplementedError(u'STEP: Given the peer admins use the genesis block for chain \'chain1\' to configure peers')

@given(u'user ""binhn"" registers with peer organization ""peerOrg0""')
def step_impl(context):
    raise NotImplementedError(u'STEP: Given user ""binhn"" registers with peer organization ""peerOrg0""')

make: *** [behave] Error 1

For more information, please refer to the attached log as well.","Linux OS: Ubuntu Intel 64bits version 16.04.1
go version go1.6.2 linux/amd64
Python Version: 2.7.12
PIP: 9.0.1
behave (1.2.5)",,,,,,,,,,,,,,,,,,,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_kafka0_1_Basic_orderer_function_--_@2.1_1_Kafka_Orderer_and_1_Kafka_Broker.log;https://jira.hyperledger.org/secure/attachment/10354/a74ec6fecb3b11e6a7380016eae48524_kafka0_1_Basic_orderer_function_--_%402.1_1_Kafka_Orderer_and_1_Kafka_Broker.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_kafka0_1_Basic_orderer_function_--_@2.2_1_Kafka_Orderer_and_1_Kafka_Broker.log;https://jira.hyperledger.org/secure/attachment/10353/a74ec6fecb3b11e6a7380016eae48524_kafka0_1_Basic_orderer_function_--_%402.2_1_Kafka_Orderer_and_1_Kafka_Broker.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_kafka0_1_Basic_orderer_function_--_@2.3_1_Kafka_Orderer_and_1_Kafka_Broker.log;https://jira.hyperledger.org/secure/attachment/10352/a74ec6fecb3b11e6a7380016eae48524_kafka0_1_Basic_orderer_function_--_%402.3_1_Kafka_Orderer_and_1_Kafka_Broker.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_kafka0_1_Basic_orderer_function_using_oldest_seek_target_--_@2.1_1_Kafka_Orderer_and_1_Kafka_Broker.log;https://jira.hyperledger.org/secure/attachment/10351/a74ec6fecb3b11e6a7380016eae48524_kafka0_1_Basic_orderer_function_using_oldest_seek_target_--_%402.1_1_Kafka_Orderer_and_1_Kafka_Broker.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_kafka0_1_Basic_seek_orderer_function_(Utilizing_properties_for_atomic_broadcast)_--_@2.3_1_Kafka_Orderer_and_1_Kafka_Broker.log;https://jira.hyperledger.org/secure/attachment/10350/a74ec6fecb3b11e6a7380016eae48524_kafka0_1_Basic_seek_orderer_function_%28Utilizing_properties_for_atomic_broadcast%29_--_%402.3_1_Kafka_Orderer_and_1_Kafka_Broker.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_deploy_endorsement_for_chaincode_through_GRPC_to_multiple_endorsers_--_@1.1_Orderer_Options.log;https://jira.hyperledger.org/secure/attachment/10349/a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_deploy_endorsement_for_chaincode_through_GRPC_to_multiple_endorsers_--_%401.1_Orderer_Options.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_orderer_function_--_@1.1_Solo_Orderer.log;https://jira.hyperledger.org/secure/attachment/10348/a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_orderer_function_--_%401.1_Solo_Orderer.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_orderer_function_--_@1.2_Solo_Orderer.log;https://jira.hyperledger.org/secure/attachment/10347/a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_orderer_function_--_%401.2_Solo_Orderer.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_orderer_function_--_@1.3_Solo_Orderer.log;https://jira.hyperledger.org/secure/attachment/10346/a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_orderer_function_--_%401.3_Solo_Orderer.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_orderer_function_--_@2.1_1_Kafka_Orderer_and_1_Kafka_Broker.log;https://jira.hyperledger.org/secure/attachment/10345/a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_orderer_function_--_%402.1_1_Kafka_Orderer_and_1_Kafka_Broker.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_orderer_function_--_@2.2_1_Kafka_Orderer_and_1_Kafka_Broker.log;https://jira.hyperledger.org/secure/attachment/10344/a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_orderer_function_--_%402.2_1_Kafka_Orderer_and_1_Kafka_Broker.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_orderer_function_--_@2.3_1_Kafka_Orderer_and_1_Kafka_Broker.log;https://jira.hyperledger.org/secure/attachment/10343/a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_orderer_function_--_%402.3_1_Kafka_Orderer_and_1_Kafka_Broker.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_orderer_function_using_oldest_seek_target_--_@1.1_Solo_Orderer.log;https://jira.hyperledger.org/secure/attachment/10342/a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_orderer_function_using_oldest_seek_target_--_%401.1_Solo_Orderer.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_orderer_function_using_oldest_seek_target_--_@2.1_1_Kafka_Orderer_and_1_Kafka_Broker.log;https://jira.hyperledger.org/secure/attachment/10341/a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_orderer_function_using_oldest_seek_target_--_%402.1_1_Kafka_Orderer_and_1_Kafka_Broker.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_seek_orderer_function_(Utilizing_properties_for_atomic_broadcast)_--_@1.1_Solo_Orderer.log;https://jira.hyperledger.org/secure/attachment/10340/a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_seek_orderer_function_%28Utilizing_properties_for_atomic_broadcast%29_--_%401.1_Solo_Orderer.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_seek_orderer_function_(Utilizing_properties_for_atomic_broadcast)_--_@1.2_Solo_Orderer.log;https://jira.hyperledger.org/secure/attachment/10339/a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_seek_orderer_function_%28Utilizing_properties_for_atomic_broadcast%29_--_%401.2_Solo_Orderer.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_seek_orderer_function_(Utilizing_properties_for_atomic_broadcast)_--_@1.3_Solo_Orderer.log;https://jira.hyperledger.org/secure/attachment/10338/a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_seek_orderer_function_%28Utilizing_properties_for_atomic_broadcast%29_--_%401.3_Solo_Orderer.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_seek_orderer_function_(Utilizing_properties_for_atomic_broadcast)_--_@2.3_1_Kafka_Orderer_and_1_Kafka_Broker.log;https://jira.hyperledger.org/secure/attachment/10337/a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Basic_seek_orderer_function_%28Utilizing_properties_for_atomic_broadcast%29_--_%402.3_1_Kafka_Orderer_and_1_Kafka_Broker.log,"26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Bootstrap_a_development_network_with_1_peer_and_1_orderer,_each_having_a_single_independent_root_of_trust_(No_COP)_--_@1.1_Orderer_Options.log;https://jira.hyperledger.org/secure/attachment/10336/a74ec6fecb3b11e6a7380016eae48524_orderer0_1_Bootstrap_a_development_network_with_1_peer_and_1_orderer%2C_each_having_a_single_independent_root_of_trust_%28No_COP%29_--_%401.1_Orderer_Options.log",26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_vp0_1_Basic_deploy_endorsement_for_chaincode_through_GRPC_to_multiple_endorsers_--_@1.1_Orderer_Options.log;https://jira.hyperledger.org/secure/attachment/10335/a74ec6fecb3b11e6a7380016eae48524_vp0_1_Basic_deploy_endorsement_for_chaincode_through_GRPC_to_multiple_endorsers_--_%401.1_Orderer_Options.log,"26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_vp0_1_Bootstrap_a_development_network_with_1_peer_and_1_orderer,_each_having_a_single_independent_root_of_trust_(No_COP)_--_@1.1_Orderer_Options.log;https://jira.hyperledger.org/secure/attachment/10334/a74ec6fecb3b11e6a7380016eae48524_vp0_1_Bootstrap_a_development_network_with_1_peer_and_1_orderer%2C_each_having_a_single_independent_root_of_trust_%28No_COP%29_--_%401.1_Orderer_Options.log",26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_vp1_1_Basic_deploy_endorsement_for_chaincode_through_GRPC_to_multiple_endorsers_--_@1.1_Orderer_Options.log;https://jira.hyperledger.org/secure/attachment/10333/a74ec6fecb3b11e6a7380016eae48524_vp1_1_Basic_deploy_endorsement_for_chaincode_through_GRPC_to_multiple_endorsers_--_%401.1_Orderer_Options.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_vp2_1_Basic_deploy_endorsement_for_chaincode_through_GRPC_to_multiple_endorsers_--_@1.1_Orderer_Options.log;https://jira.hyperledger.org/secure/attachment/10332/a74ec6fecb3b11e6a7380016eae48524_vp2_1_Basic_deploy_endorsement_for_chaincode_through_GRPC_to_multiple_endorsers_--_%401.1_Orderer_Options.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_vp3_1_Basic_deploy_endorsement_for_chaincode_through_GRPC_to_multiple_endorsers_--_@1.1_Orderer_Options.log;https://jira.hyperledger.org/secure/attachment/10331/a74ec6fecb3b11e6a7380016eae48524_vp3_1_Basic_deploy_endorsement_for_chaincode_through_GRPC_to_multiple_endorsers_--_%401.1_Orderer_Options.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_zookeeper_1_Basic_orderer_function_--_@2.1_1_Kafka_Orderer_and_1_Kafka_Broker.log;https://jira.hyperledger.org/secure/attachment/10330/a74ec6fecb3b11e6a7380016eae48524_zookeeper_1_Basic_orderer_function_--_%402.1_1_Kafka_Orderer_and_1_Kafka_Broker.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_zookeeper_1_Basic_orderer_function_--_@2.2_1_Kafka_Orderer_and_1_Kafka_Broker.log;https://jira.hyperledger.org/secure/attachment/10329/a74ec6fecb3b11e6a7380016eae48524_zookeeper_1_Basic_orderer_function_--_%402.2_1_Kafka_Orderer_and_1_Kafka_Broker.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_zookeeper_1_Basic_orderer_function_--_@2.3_1_Kafka_Orderer_and_1_Kafka_Broker.log;https://jira.hyperledger.org/secure/attachment/10328/a74ec6fecb3b11e6a7380016eae48524_zookeeper_1_Basic_orderer_function_--_%402.3_1_Kafka_Orderer_and_1_Kafka_Broker.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_zookeeper_1_Basic_orderer_function_using_oldest_seek_target_--_@2.1_1_Kafka_Orderer_and_1_Kafka_Broker.log;https://jira.hyperledger.org/secure/attachment/10327/a74ec6fecb3b11e6a7380016eae48524_zookeeper_1_Basic_orderer_function_using_oldest_seek_target_--_%402.1_1_Kafka_Orderer_and_1_Kafka_Broker.log,26/Dec/16 7:27 AM;dragon82;a74ec6fecb3b11e6a7380016eae48524_zookeeper_1_Basic_seek_orderer_function_(Utilizing_properties_for_atomic_broadcast)_--_@2.3_1_Kafka_Orderer_and_1_Kafka_Broker.log;https://jira.hyperledger.org/secure/attachment/10326/a74ec6fecb3b11e6a7380016eae48524_zookeeper_1_Basic_seek_orderer_function_%28Utilizing_properties_for_atomic_broadcast%29_--_%402.3_1_Kafka_Orderer_and_1_Kafka_Broker.log,26/Dec/16 6:41 AM;dragon82;behave_log.txt;https://jira.hyperledger.org/secure/attachment/10355/behave_log.txt,,0|i00lfd:,,,,,,,,ChristopherFerris,dragon82,,,,,,,,,,,,,13/Apr/17 12:55 PM;ChristopherFerris;The bddtests are no longer broken. See the README.md in the bddtests folder for complete setup instructions for running behave tests. ,,,,,,,,,,,,,,,,,,,,,,,
Unresovled variable,FAB-1471,13880,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,grapebaba,grapebaba,grapebaba,22/Dec/16 7:56 AM,23/Dec/16 4:41 AM,26/Apr/18 6:50 AM,23/Dec/16 4:41 AM,,,,,,,v1.0.0,,,fabric-sdk-node,,,,0,,,,,,,,,"line227 in FabricCOPImpl.js
    this._ca = (connect_opts.ca) ? ca : null;",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00le9:,,,,,,,,grapebaba,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"""make clean"" fails using fabric-cop makefile",FAB-1470,13879,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,ishihara.shun,ishihara.shun,22/Dec/16 4:18 AM,07/Jan/17 6:51 PM,26/Apr/18 6:50 AM,07/Jan/17 6:51 PM,v1.0.0,,,,,,v1.0.0,,,fabric-membersrvc,,,,0,build-system,,,,,,,,"Makefile creates COP docker image as name of ""docker-cop"", but tries to remove it as name of ""docker-cop-cop"".

{quote}
$ make clean

docker images -q hyperledger/fabric-cop-cop | xargs -I '{}' docker rmi -f '{}'

docker images -q hyperledger/fabric-cop-runtime | xargs -I '{}' docker rmi -f '{}'
{quote}",,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00le1:,,,,,,,,ishihara.shun,mastersingh24,,,,,,,,,master,,,true,31/Dec/16 7:43 PM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/3581/,,,,,,,,,,,,,,,,,,,,,,,
make protos doesn't work,FAB-1468,13877,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,greg.haskins,kchristidis,kchristidis,21/Dec/16 11:10 PM,11/Jan/17 4:19 PM,26/Apr/18 6:50 AM,10/Jan/17 9:51 PM,,,,,,,,,,fabric-baseimage,,,,0,,,,,,,,,"I destroy my Vagrant environment, rebuild it, and proceed to ""make protos"". Here's its output:

{code}
vagrant@hyperledger-devenv:v0.2.2-5adaef7:/opt/gopath/src/github.com/hyperledger/fabric$ make protos
Unable to find image 'hyperledger/fabric-baseimage:x86_64-0.2.2' locally
x86_64-0.2.2: Pulling from hyperledger/fabric-baseimage

af49a5ceb2a5: Pull complete
8f9757b472e7: Pull complete
e931b117db38: Pull complete
47b5e16c0811: Pull complete
9332eaf1a55b: Pull complete
95bdd37821eb: Pull complete
2af301fab12e: Pull complete
Digest: sha256:b701179a194d9b3a92ec60c9c9eab0bb780c6b1f2c4f6ebf838e1ad351fc9052
Status: Downloaded newer image for hyperledger/fabric-baseimage:x86_64-0.2.2
make[1]: Entering directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools'
Building github.com/golang/lint/golint -> golint
make[1]: Leaving directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools'
make[1]: Entering directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools'
Building github.com/kardianos/govendor -> govendor
make[1]: Leaving directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools'
make[1]: Entering directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools'
Building golang.org/x/tools/cmd/goimports -> goimports
make[1]: Leaving directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools'
make[1]: Entering directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools'
Building github.com/golang/protobuf/protoc-gen-go -> protoc-gen-go
make[1]: Leaving directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools'
make[1]: Entering directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools'
Building github.com/onsi/ginkgo/ginkgo -> ginkgo
make[1]: Leaving directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools'
make[1]: Entering directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools'
Building github.com/axw/gocov/... -> gocov
make[1]: Leaving directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools'
make[1]: Entering directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools'
Building github.com/AlekSi/gocov-xml -> gocov-xml
make[1]: Leaving directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools'
cp /opt/gotools/obj/gopath/bin/golint /opt/gotools/obj/gopath/bin/govendor /opt/gotools/obj/gopath/bin/goimports /opt/gotools/obj/gopath/bin/protoc-gen-go /opt/gotools/obj/gopath/bin/ginkgo /opt/gotools/obj/gopath/bin/gocov /opt/gotools/obj/gopath/bin/gocov-xml /opt/gotools/bin
(cd build/docker/gotools/bin && tar -jc *) > build/gotools.tar.bz2
mkdir -p build/image/testenv/payload
cp build/gotools.tar.bz2 build/image/testenv/payload
Building docker testenv-image
docker build  -t hyperledger/fabric-testenv build/image/testenv
Sending build context to Docker daemon 11.95 MB
Step 1 : FROM hyperledger/fabric-baseimage:x86_64-0.2.2
 ---> 4ac07a26ca7a
Step 2 : ADD payload/gotools.tar.bz2 /usr/local/bin/
 ---> 264ee103c8f5
Removing intermediate container 2bf9f79e6f4c
Step 3 : WORKDIR /opt/gopath/src/github.com/hyperledger/fabric
 ---> Running in 8936a80006d9
 ---> 4a09d8201354
Removing intermediate container 8936a80006d9
Successfully built 4a09d8201354
docker tag hyperledger/fabric-testenv hyperledger/fabric-testenv:x86_64-0.7.0-snapshot-2ff045d
++ find . -name .protoroot -exec readlink -f '{}' ';'
+ PROTO_ROOT_FILES='/opt/gopath/src/github.com/hyperledger/fabric/orderer/sbft/.protoroot
/opt/gopath/src/github.com/hyperledger/fabric/protos/.protoroot'
++ dirname /opt/gopath/src/github.com/hyperledger/fabric/orderer/sbft/.protoroot /opt/gopath/src/github.com/hyperledger/fabric/protos/.protoroot
+ PROTO_ROOT_DIRS='/opt/gopath/src/github.com/hyperledger/fabric/orderer/sbft
/opt/gopath/src/github.com/hyperledger/fabric/protos'
+++ for dir in '$PROTO_ROOT_DIRS'
+++ echo '-path /opt/gopath/src/github.com/hyperledger/fabric/orderer/sbft -prune -o '
+++ for dir in '$PROTO_ROOT_DIRS'
+++ echo '-path /opt/gopath/src/github.com/hyperledger/fabric/protos -prune -o '
++ find /opt/gopath/src/github.com/hyperledger/fabric -path /opt/gopath/src/github.com/hyperledger/fabric/orderer/sbft -prune -o -path /opt/gopath/src/github.com/hyperledger/fabric/protos -prune -o -path /opt/gopath/src/github.com/hyperledger/fabric/vendor -prune -o -path /opt/gopath/src/github.com/hyperledger/fabric/gotools -prune -o -path /opt/gopath/src/github.com/hyperledger/fabric/build -prune -o -name '*.proto' -exec readlink -f '{}' ';'
+ ROOTLESS_PROTO_FILES='/opt/gopath/src/github.com/hyperledger/fabric/accesscontrol/attributes/proto/attributes.proto
/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim/table.proto
/opt/gopath/src/github.com/hyperledger/fabric/core/comm/testdata/grpc/test.proto
/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode/go/utxo/util/dah.proto
/opt/gopath/src/github.com/hyperledger/fabric/gossip/proto/message.proto
/opt/gopath/src/github.com/hyperledger/fabric/msp/identities.proto'
++ dirname /opt/gopath/src/github.com/hyperledger/fabric/accesscontrol/attributes/proto/attributes.proto /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim/table.proto /opt/gopath/src/github.com/hyperledger/fabric/core/comm/testdata/grpc/test.proto /opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode/go/utxo/util/dah.proto /opt/gopath/src/github.com/hyperledger/fabric/gossip/proto/message.proto /opt/gopath/src/github.com/hyperledger/fabric/msp/identities.proto
++ sort
++ uniq
+ ROOTLESS_PROTO_DIRS='/opt/gopath/src/github.com/hyperledger/fabric/accesscontrol/attributes/proto
/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim
/opt/gopath/src/github.com/hyperledger/fabric/core/comm/testdata/grpc
/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode/go/utxo/util
/opt/gopath/src/github.com/hyperledger/fabric/gossip/proto
/opt/gopath/src/github.com/hyperledger/fabric/msp'
Working on dir /opt/gopath/src/github.com/hyperledger/fabric/accesscontrol/attributes/proto
+ for dir in '$ROOTLESS_PROTO_DIRS' '$PROTO_ROOT_DIRS'
+ echo Working on dir /opt/gopath/src/github.com/hyperledger/fabric/accesscontrol/attributes/proto
++ sort
++ uniq
++ find /opt/gopath/src/github.com/hyperledger/fabric/accesscontrol/attributes/proto -name '*.proto' -exec dirname '{}' ';'
+ for protos in '$(find ""$dir"" -name '\''*.proto'\'' -exec dirname {} \; | sort | uniq)'
+ protoc --proto_path=/opt/gopath/src/github.com/hyperledger/fabric/accesscontrol/attributes/proto --go_out=plugins=grpc:/opt/gopath/src /opt/gopath/src/github.com/hyperledger/fabric/accesscontrol/attributes/proto/attributes.proto
+ for dir in '$ROOTLESS_PROTO_DIRS' '$PROTO_ROOT_DIRS'
+ echo Working on dir /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim
Working on dir /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim
++ find /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim -name '*.proto' -exec dirname '{}' ';'
++ uniq
++ sort
+ for protos in '$(find ""$dir"" -name '\''*.proto'\'' -exec dirname {} \; | sort | uniq)'
+ protoc --proto_path=/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim --go_out=plugins=grpc:/opt/gopath/src /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim/table.proto
+ for dir in '$ROOTLESS_PROTO_DIRS' '$PROTO_ROOT_DIRS'
+ echo Working on dir /opt/gopath/src/github.com/hyperledger/fabric/core/comm/testdata/grpc
Working on dir /opt/gopath/src/github.com/hyperledger/fabric/core/comm/testdata/grpc
++ find /opt/gopath/src/github.com/hyperledger/fabric/core/comm/testdata/grpc -name '*.proto' -exec dirname '{}' ';'
++ uniq
++ sort
+ for protos in '$(find ""$dir"" -name '\''*.proto'\'' -exec dirname {} \; | sort | uniq)'
+ protoc --proto_path=/opt/gopath/src/github.com/hyperledger/fabric/core/comm/testdata/grpc --go_out=plugins=grpc:/opt/gopath/src /opt/gopath/src/github.com/hyperledger/fabric/core/comm/testdata/grpc/test.proto
/opt/gopath/src/test.pb.go: Permission deniedMakefile:223: recipe for target 'protos' failed
make: *** [protos] Error 1
vagrant@hyperledger-devenv:v0.2.2-5adaef7:/opt/gopath/src/github.com/hyperledger/fabric$
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ldl:,,,,,,,,jyellick,kchristidis,sanchezl,,,,,,,,master,,,true,"21/Dec/16 11:14 PM;kchristidis;Just to add a few more details to this.

I've tried `make clean && make dist-clean && make protos` but I get the same error.

Colleagues have been unable to reproduce this on their machines, so my theory is:

An unsuccessful run on my machine has created artifacts that (1) prevent `make protos` from completing successfully, and that (2) `make clean` and/or `make dist-clean` fail to remove.","09/Jan/17 9:48 PM;sanchezl;I am running into this issue also when running make protos in the vagrant dev env. If I run {{./scripts/compile_protos.sh}} script directly, it works, otherwise when running the script in docker (via `make protos`) It fails on when processing `fabric/core/comm/testdata/grpc/test.proto`. 

The problem is that there is no {{option go_package}} statement, so it's trying to generate the go files into the output directory root, {{/opt/gopath/src}}, a directory that in the docker container is only writeable by root, but the command is run under a non-root user (user with id=1000).

[~mastersingh24] should provide some guidance on what the appropriate action should be. We can either make {{make protos}} ignore the problem proto, or maybe the proto can use a {{go_package}} statement.","10/Jan/17 6:16 PM;jyellick;Coming to this issue late, had put together a quick changeset which adds the `go_package` statement to the proto file and submitted it before actually reading these comments https://gerrit.hyperledger.org/r/#/c/3827/",,,,,,,,,,,,,,,,,,,,,
[fabric-cop]Makefile check docker only when necessary,FAB-1467,13876,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,tcz001,tcz001,21/Dec/16 10:34 PM,12/May/17 4:55 PM,26/Apr/18 6:50 AM,21/Apr/17 5:39 PM,v1.0.0,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"The latest makefile require to have docker in path. It will block the task if we just need to run `make cop`.
It will be good to make this check only when necessary.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ldd:,,,,,,,,smithbk,tcz001,,,,,,,,,master,,,true,"06/Apr/17 1:46 AM;smithbk;Hi, is this still a problem?  Thanks.",13/Apr/17 4:24 PM;smithbk;http://gerrit.hyperledger.org/r/8017,,,,,,,,,,,,,,,,,,,,,,
Ensure mock consumer is set up before accessing its disk,FAB-1452,13861,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,kchristidis,kchristidis,20/Dec/16 4:38 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,25/Dec/16 7:00 PM,,,,,,,,,,fabric-orderer,,,,0,kafka,,,,,,,,"Consider this:

# Before we bring up a mock producer and mock consumer we need to initialize them so that they output the right offsets. We do this via a process where we add fill-in blocks until we get them to the desired offset.
# We move messages between the mock producer to the mock consumer via goroutine that fetches a message from the producer's disk (an unbuffered channel) and places it into the consumer's disk (another unbuffered channel).

Up until now, before proceeding to step 2, we would only make sure that the producer was set-up. The goroutine then would add a message to the consumer's disk before the consumer was set-up. As a result, the first message we would receive past the setup process would sometimes be the last fill-in message (instead of the first, regular test message).",,,,120,120,,0%,120,120,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00la9:,,Sprint 9 - consensus,,,,,,kchristidis,,,,,,,,,,master,,,true,21/Dec/16 4:54 PM;kchristidis;https://gerrit.hyperledger.org/r/#/c/3465/,,,,,,,,,,,,,,,,,,,,,,,
Broadcaster should exit normally at EOF,FAB-1447,13856,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,inatatsu,inatatsu,19/Dec/16 9:05 AM,29/Dec/16 4:47 PM,26/Apr/18 6:50 AM,29/Dec/16 4:47 PM,,,,,,,v1.0.0,,,fabric-orderer,,,,0,quality,,,,,,,,"When I deploy large chaincode with about 3.7K lines by using a Node SDK client, I observe the following error at closing the connection between the SDK and the orderer:
{code:java}
debug: [Orderer.js]: Orderer.sendBroadcast - on end:
  Error: Error: EOF
      at ClientDuplexStream.<anonymous> (/fabric-sdk-node/hfc/lib/Orderer.js:128:19)
      at emitOne (events.js:96:13)
      at ClientDuplexStream.emit (events.js:188:7)
      at ClientDuplexStream._emitStatusIfDone (/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:192:12)      at ClientDuplexStream._readsDone (/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:158:8)
      at readCallback (/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:229:12)
{code}
When I modify broadcast.(*broadcaster).queueEnvelopes() to exit normally at io.EOF, sendBroadcast() successfully ends.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00l95:,,,,,,,,inatatsu,,,,,,,,,,master,,,true,19/Dec/16 9:50 AM;inatatsu;https://gerrit.hyperledger.org/r/#/c/3391/,,,,,,,,,,,,,,,,,,,,,,,
COP createMySQLTables creates too small serial_number column,FAB-1427,13836,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,dknochen,dknochen,16/Dec/16 12:37 PM,01/May/17 2:12 PM,26/Apr/18 6:50 AM,01/May/17 2:12 PM,v1.0.0,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"In MySQL there are two columns {{serial_number varbinary(20)}} which are too small. When enrolling I get:

{{Error 1406: Data too long for column 'serial_number' at row 1}}

The columns are created here:

https://github.com/hyperledger/fabric-cop/blob/35ee241d7dca2e5d71b8891c72013aab99a14331/cli/server/dbutil/dbutil.go#L247
and
https://github.com/hyperledger/fabric-cop/blob/35ee241d7dca2e5d71b8891c72013aab99a14331/cli/server/dbutil/dbutil.go#L255

changing it to varbinary(128) fixes the issue.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00l55:,,,,,,,,dknochen,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Invetigate ZooKeeper user-level KeeperException,FAB-1423,13832,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,kchristidis,kchristidis,16/Dec/16 4:34 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,17/Dec/16 5:55 PM,,,,,,,,,,fabric-orderer,,,,0,kafka,,,,,,,,"This shows up before the creation of every chain (incl. the system chain):

{noformat}
orderer0_1   | [04:01:45.584]        main.go:142: [DEBUG] Posting the CONNECT message...
zookeeper_1  | 2016-12-16 04:01:45,589 [myid:] - INFO  [ProcessThread(sid:0 cport:2181)::PrepRequestProcessor@649] - Got user-level KeeperException when processing sessionid:0x15905ca7c170000 type:setData cxid:0x51 zxid:0x21 txntype:-1 reqpath:n/a Error Path:/config/topics/6b6f737461735f636861696e Error:KeeperErrorCode = NoNode for /config/topics/6b6f737461735f636861696e
zookeeper_1  | 2016-12-16 04:01:45,602 [myid:] - INFO  [ProcessThread(sid:0 cport:2181)::PrepRequestProcessor@649] - Got user-level KeeperException when processing sessionid:0x15905ca7c170000 type:create cxid:0x52 zxid:0x22 txntype:-1 reqpath:n/a Error Path:/config/topics Error:KeeperErrorCode = NodeExists for /config/topics
kafka0_1     | [2016-12-16 04:01:45,631] INFO Topic creation {""version"":1,""partitions"":{""0"":[0]}} (kafka.admin.AdminUtils$)
kafka0_1     | [2016-12-16 04:01:45,645] INFO [KafkaApi-0] Auto creation of topic 6b6f737461735f636861696e with 1 partitions and replication factor 1 is successful! (kafka.server.KafkaApis)
zookeeper_1  | 2016-12-16 04:01:45,663 [myid:] - INFO  [ProcessThread(sid:0 cport:2181)::PrepRequestProcessor@649] - Got user-level KeeperException when processing sessionid:0x15905ca7c170000 type:create cxid:0x5a zxid:0x25 txntype:-1 reqpath:n/a Error Path:/brokers/topics/6b6f737461735f636861696e/partitions/0 Error:KeeperErrorCode = NoNode for /brokers/topics/6b6f737461735f636861696e/partitions/0
zookeeper_1  | 2016-12-16 04:01:45,678 [myid:] - INFO  [ProcessThread(sid:0 cport:2181)::PrepRequestProcessor@649] - Got user-level KeeperException when processing sessionid:0x15905ca7c170000 type:create cxid:0x5b zxid:0x26 txntype:-1 reqpath:n/a Error Path:/brokers/topics/6b6f737461735f636861696e/partitions Error:KeeperErrorCode = NoNode for /brokers/topics/6b6f737461735f636861696e/partitions
kafka0_1     | [2016-12-16 04:01:45,748] INFO [ReplicaFetcherManager on broker 0] Removed fetcher for partitions [6b6f737461735f636861696e,0] (kafka.server.ReplicaFetcherManager)
kafka0_1     | [2016-12-16 04:01:45,756] INFO Completed load of log 6b6f737461735f636861696e-0 with log end offset 0 (kafka.log.Log)
kafka0_1     | [2016-12-16 04:01:45,759] INFO Created log for partition [6b6f737461735f636861696e,0] in /tmp/kafka-logs with properties {compression.type -> producer, file.delete.delay.ms -> 60000, max.message.bytes -> 1000012, min.insync.replicas -> 1, segment.jitter.ms -> 0, preallocate -> false, min.cleanable.dirty.ratio -> 0.5, index.interval.bytes -> 4096, unclean.leader.election.enable -> true, retention.bytes -> -1, delete.retention.ms -> 86400000, cleanup.policy -> delete, flush.ms -> 9223372036854775807, segment.ms -> 604800000, segment.bytes -> 1073741824, retention.ms -> 604800000, segment.index.bytes -> 10485760, flush.messages -> 9223372036854775807}. (kafka.log.LogManager)
kafka0_1     | [2016-12-16 04:01:45,760] INFO Partition [6b6f737461735f636861696e,0] on broker 0: No checkpointed highwatermark is found for partition [6b6f737461735f636861696e,0] (kafka.cluster.Partition)
orderer0_1   | [04:01:45.912]     producer.go:78: [DEBUG] Forwarded blob with offset number 0 to chain partition 6b6f737461735f636861696e/0 on the Kafka cluster
{noformat}

On the positive side, this doesn't seem to affect the operation of the orderer and chains are created and can be appended to normally. I'd still like to know what's going on though.",,,,60,60,,0%,60,60,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00l49:,,Sprint 7 - consensus,,,,,,kchristidis,,,,,,,,,,,,,,"17/Dec/16 5:55 PM;kchristidis;Turns out this is a completely normal INFO message from ZK (as its log level) implies, i.e not a bug.",,,,,,,,,,,,,,,,,,,,,,,
Orderer Kafka Behave tests fail for z and p architectures,FAB-1413,13822,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,harrijk,harrijk,15/Dec/16 3:48 PM,15/Jan/17 2:34 AM,26/Apr/18 6:50 AM,15/Jan/17 2:30 AM,,,,,,,v1.0.0,,,fabric-orderer,,,,0,,,,,,,,,"The behave tests for the Orderer Kafka service use x86 docker images for both Kafka and Zookeeper, both of which are needed to test the Kafka ordering service.  

As a result the behave tests associated the the Kafka ordering service fail for z and p.

I would suggest building upon existing arch-specific docker images that are built during the fabric build process.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00l2h:,,,,,,,,bsmita,greg.haskins,harrijk,harsha544,kchristidis,silliman,SriramaSharma,,,,master,,,true,"15/Jan/17 2:34 AM;kchristidis;This got merged already [1] but broke the Kafka orderer-related Docker Compose files.

[FAB-1656] will fix the errors that came up.

[1] https://gerrit.hyperledger.org/r/#/c/3923/1",,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] Headless test fails when not ran from the project root folder,FAB-1387,13796,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jjjjibm,jjjjibm,13/Dec/16 8:20 PM,08/Mar/17 4:51 AM,26/Apr/18 6:50 AM,08/Mar/17 4:51 AM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"I built fabric, fabric cop and node sdk at the commit levels described in Environment. One of the headless.js tests fails:

not ok 5 checking that able to test-2 value from an additional configuration file
  ---
    operator: equal
    expected: 'local'
    actual:   'notfound'
    at: Test.<anonymous> (/home/ibmadmin/work/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape-promise/index.es5.js:21:13)
  ...

I have captured the output of export and attached it to this issue.

How to recreate: 
1.Build fabric, fabric-cop, and fabric-sdk-node, at the commit levels I specify
2. cd $GOPATH/src/github.com/hyperledger/fabric-sdk-node/test/unit
3.node headless.js ","Ubuntu vlaunch VM  
fabric commit level 
10:50:59 AM: fe6be016b671f5b3fdfe860eda3b54ac067f69aa 

http://stackoverflow.com/questions/3489173/how-to-clone-git-repository-with-specific-revision-changeset 

 cop commit level: 

 be0ffbb564e954c1d4aa8e28138e4e1146f58764 

fabric sdk node commit level 

a522e22d5d73ab8646cf4b566313aa1eda85df60 

Follow the readme's that are copied into your directories to build and start fabric, fabric cop, and nodejs tests.",,,,,,,,,,,,,,,,,,,13/Dec/16 8:20 PM;jjjjibm;my.envvars;https://jira.hyperledger.org/secure/attachment/10312/my.envvars,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00kwp:,,,,,,,,jimthematrix,jjjjibm,,,,,,,,,,,,,08/Feb/17 1:25 PM;jimthematrix;This only happens when not running the test at the project root folder. help-wanted label added,08/Mar/17 4:51 AM;jimthematrix;taken care of because we are using `gulp test-headless` to launch headless tests now,,,,,,,,,,,,,,,,,,,,,,
Add orderer/peer binaries to fabric-testenv,FAB-1370,13777,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,sanchezl,sanchezl,12/Dec/16 3:37 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,20/Jan/17 5:33 PM,,,,,,,,,,fabric-orderer,,,,0,kafka,,,,,,,,"The official orderer and peer images have been stripped to a bare minimum. Add orderer and peer binaries to the hyperledger/fabric-testenv image to be used as a base for running bddtests.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ksp:,,,,,,,,kchristidis,sanchezl,,,,,,,,,master,,,true,13/Dec/16 6:49 PM;kchristidis;https://gerrit.hyperledger.org/r/#/c/3261/,,,,,,,,,,,,,,,,,,,,,,,
"The ""errors"" unit test fails on both the z and p architectures",FAB-1307,13714,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,harrijk,harrijk,08/Dec/16 2:31 PM,11/Apr/17 9:19 PM,26/Apr/18 6:50 AM,11/Apr/17 9:19 PM,v1.0.0,,,,,,v1.0.0,,,fabric-peer,,,,0,build-system,,,,,,,,"Ever since CR  2685, https://gerrit.hyperledger.org/r/#/c/2685/, was merged into the fabric code base, the *github.com/hyperledger/fabric/core/errors* unit test fails on both the z and p architectures.

When I checkout the commit (ae9f2f2 FAB-816 Clean multichain integration interfaces) before the commit mentioned in CR 2685 , all unit tests pass on all architectures.

When I checkout the commit (2dc82e0 Enhance and begin using error handling framework) mentioned in CR 2865, the *github.com/hyperledger/fabric/core/errors* unit test fails on both the z and p architectures.

Unit Test Output is attached.

",,,,,,,,,,,,,,,,,,,,08/Dec/16 2:27 PM;harrijk;errors-unit-test-failure.txt;https://jira.hyperledger.org/secure/attachment/10305/errors-unit-test-failure.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00khd:,,,,,,,,denyeart,harrijk,,,,,,,,,,,,,08/Dec/16 3:43 PM;harrijk;Duplicate of FAB-1307.  Had issues with JIRA.,11/Apr/17 9:18 PM;denyeart;I believe this has been fixed.  Please re-open if you still see the issue.,,,,,,,,,,,,,,,,,,,,,,
testing JIRA,FAB-1282,13616,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,muralisr,muralisr,05/Dec/16 11:30 PM,05/Dec/16 11:32 PM,26/Apr/18 6:50 AM,05/Dec/16 11:32 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,ust a test,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00kch:,,,,,,,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
peer does not stop after receiving SIGINT signal,FAB-1275,13609,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,xixuejia,xixuejia,xixuejia,05/Dec/16 2:41 PM,08/Dec/16 12:49 AM,26/Apr/18 6:50 AM,08/Dec/16 12:49 AM,,,,,,,,,,,,,,0,,,,,,,,,"after starting a new peer with command `peer node start` and then I want to stop peer process by pressing 'ctrl+C', the logger for GossipStateProvider still prints out logs and peer process doesn't stop

How to reproduce this bug?
issue `peer node start` without starting orderer, and then press 'ctrl+C'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00kbd:,,,,,,,,xixuejia,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
ChancodeID inconsistent types,FAB-1258,13592,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,rickr,rickr,03/Dec/16 6:14 PM,03/Dec/16 6:33 PM,26/Apr/18 6:50 AM,03/Dec/16 6:33 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"ChaincodeID was changed from bytes that were a  ChaincodeID object serialzied to a String in common.proto.

In chaincode_proposal.proto and in chaincode_proposal.proto ChainCodeID object is still referenced.  This seems to be an unneeded  inconsistency.  ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00k81:,,,,,,,,rickr,,,,,,,,,,,,,,03/Dec/16 6:33 PM;rickr;Found they are different. ,,,,,,,,,,,,,,,,,,,,,,,
Currently system chaincode does support security,FAB-1251,13585,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,tanykj,tanykj,02/Dec/16 4:33 AM,11/Apr/17 9:17 PM,26/Apr/18 6:50 AM,11/Apr/17 9:17 PM,,,,,,,v0.6,,,fabric-peer,,,,0,,,,,,,,,"Seeing the below warning when peers are starting even though I am using consensus/PBFT :

04:12:36.694 [sysccapi] RegisterSysCC -> WARN 00d Currently system chaincode does support security(noop,github.com/hyperledger/fabric/bddtests/syschaincode/noop)

Using the IBM docker peer and membersrvc images (Fabric 0.6.1)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00k6p:,,,,,,,,denyeart,py,tanykj,,,,,,,,,,,,11/Apr/17 9:17 PM;denyeart;Resolved in v1.,,,,,,,,,,,,,,,,,,,,,,,
Solo orderer requires default **TEST_CHAINID** while multichain work is in progress,FAB-1230,13564,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,muralisr,muralisr,29/Nov/16 11:56 PM,01/Dec/16 4:09 AM,26/Apr/18 6:50 AM,30/Nov/16 10:32 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,Solo orderer is initialized with a default **TEST_CHAINID** while multichain work is being built around it. Proposals and Gossip need to use that chain for the end-end flows.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00k29:,,,,,,,,muralisr,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
server auth debug print wrongly without formating,FAB-1226,13560,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,tcz001,tcz001,tcz001,29/Nov/16 6:12 PM,28/Jan/17 9:27 AM,26/Apr/18 6:50 AM,31/Dec/16 8:21 PM,v1.0.0,,,,,,v1.0.0,,,fabric-ca,,,,0,,,,,,,,,"The debug print of server/auth in fabric-cop is not using Debugf in log,
2016/11/28 23:34:16 [DEBUG] Incorrect password for '%s'; received %s but expected %sadminadminpwVzMhqeWZBMqG

Fix here https://gerrit.hyperledger.org/r/#/c/2845/",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzrt:,,,,,,,,tcz001,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
node sdk fails to install on Windows,FAB-1215,13549,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,kletkeman,kletkeman,28/Nov/16 10:49 PM,31/Dec/16 8:24 PM,26/Apr/18 6:50 AM,31/Dec/16 8:24 PM,v1.0.0,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"I am using a Windows machine for v1 development (my Mac is otherwise occupied), and I need to test my contracts. Since REST is no longer supported, I am trying out the node sdk. Unfortunately, both ""npm install"" and ""npm install -g hfc"" fail, but with slightly different issues. See below for both listings.

Error encountered for ""npm install"":

``` bash
kletkeman@tp-letkemank  /c/blockchain/src/github.com/hyperledger/fabric-sdk-node (master)
$ npm install
npm WARN deprecated node-uuid@1.4.7: use uuid module instead
npm WARN deprecated minimatch@2.0.10: Please update to minimatch 3.0.2 or higher to avoid a RegExp DoS issue
npm WARN deprecated minimatch@0.2.14: Please update to minimatch 3.0.2 or higher to avoid a RegExp DoS issue
npm WARN deprecated graceful-fs@1.2.3: graceful-fs v3.0.0 and before will fail on node releases >= v7.0. Please update to graceful-fs@^4.0.0 as soon as possible. Use 'npm ls graceful-fs' to find it in the tree.
npm WARN prefer global marked@0.3.6 should be installed with -g

> dtrace-provider@0.8.0 install C:\blockchain\src\github.com\hyperledger\fabric-sdk-node\node_modules\dtrace-provider
> node scripts/install.js


> grpc@1.0.1 install C:\blockchain\src\github.com\hyperledger\fabric-sdk-node\node_modules\grpc
> node-pre-gyp install --fallback-to-build

[grpc] Success: ""C:\blockchain\src\github.com\hyperledger\fabric-sdk-node\node_modules\grpc\src\node\extension_binary\grpc_node.node"" is installed via remote

> sleep@3.0.1 install C:\blockchain\src\github.com\hyperledger\fabric-sdk-node\node_modules\sleep
> node-gyp rebuild


C:\blockchain\src\github.com\hyperledger\fabric-sdk-node\node_modules\sleep>if not defined npm_config_node_gyp (node ""C:\Program Files\nodejs\node_modules\npm\bin\node-gyp-bin\\..\..\node_modules\node-gyp\bin\node-gyp.js"" rebuild )  else (node """" rebuild )
gyp ERR! configure error
gyp ERR! stack Error: Can't find Python executable ""python"", you can set the PYTHON env variable.
gyp ERR! stack     at failNoPython (C:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\configure.js:449:14)
gyp ERR! stack     at C:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\configure.js:404:11
gyp ERR! stack     at FSReqWrap.oncomplete (fs.js:123:15)
gyp ERR! System Windows_NT 6.1.7601
gyp ERR! command ""C:\\Program Files\\nodejs\\node.exe"" ""C:\\Program Files\\nodejs\\node_modules\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js"" ""rebuild""
gyp ERR! cwd C:\blockchain\src\github.com\hyperledger\fabric-sdk-node\node_modules\sleep
gyp ERR! node -v v6.9.1
gyp ERR! node-gyp -v v3.4.0
gyp ERR! not ok
hfc@0.0.2 C:\blockchain\src\github.com\hyperledger\fabric-sdk-node
+-- aes-js@1.0.0
+-- asn1@0.2.3  (git+https://github.com/mcavage/node-asn1.git#2c2a19e285a609adfca36a0114bb5b86cf4ac61b)
+-- asn1js@1.2.12
+-- bn.js@4.11.6
+-- bunyan@1.8.5
| +-- dtrace-provider@0.8.0
| +-- moment@2.17.0
| +-- mv@2.1.1
| | +-- ncp@2.0.0
| | `-- rimraf@2.4.5
| |   `-- glob@6.0.4
| `-- safe-json-stringify@1.0.3
+-- crypto@0.0.3
+-- elliptic@6.3.2
| +-- brorand@1.0.6
| +-- hash.js@1.0.3
| `-- inherits@2.0.3
+-- events@1.1.1
+-- fs@0.0.2
+-- fs-extra@0.30.0
| +-- graceful-fs@4.1.11
| +-- jsonfile@2.4.0
| +-- klaw@1.3.1
| +-- path-is-absolute@1.0.1
| `-- rimraf@2.5.4
+-- grpc@1.0.1
| +-- arguejs@0.2.3
| +-- nan@2.4.0
| +-- node-pre-gyp@0.6.31
| | +-- mkdirp@0.5.1
| | | `-- minimist@0.0.8
| | +-- nopt@3.0.6
| | | `-- abbrev@1.0.9
| | +-- npmlog@4.0.0
| | | +-- are-we-there-yet@1.1.2
| | | | +-- delegates@1.0.0
| | | | `-- readable-stream@2.1.5
| | | |   +-- buffer-shims@1.0.0
| | | |   +-- core-util-is@1.0.2
| | | |   +-- inherits@2.0.3
| | | |   +-- isarray@1.0.0
| | | |   +-- process-nextick-args@1.0.7
| | | |   +-- string_decoder@0.10.31
| | | |   `-- util-deprecate@1.0.2
| | | +-- console-control-strings@1.1.0
| | | +-- gauge@2.6.0
| | | | +-- aproba@1.0.4
| | | | +-- has-color@0.1.7
| | | | +-- has-unicode@2.0.1
| | | | +-- object-assign@4.1.0
| | | | +-- signal-exit@3.0.1
| | | | +-- string-width@1.0.2
| | | | | +-- code-point-at@1.0.1
| | | | | | `-- number-is-nan@1.0.1
| | | | | `-- is-fullwidth-code-point@1.0.0
| | | | |   `-- number-is-nan@1.0.1
| | | | +-- strip-ansi@3.0.1
| | | | | `-- ansi-regex@2.0.0
| | | | `-- wide-align@1.1.0
| | | `-- set-blocking@2.0.0
| | +-- rc@1.1.6
| | | +-- deep-extend@0.4.1
| | | +-- ini@1.3.4
| | | +-- minimist@1.2.0
| | | `-- strip-json-comments@1.0.4
| | +-- request@2.76.0
| | | +-- aws-sign2@0.6.0
| | | +-- aws4@1.5.0
| | | +-- caseless@0.11.0
| | | +-- combined-stream@1.0.5
| | | | `-- delayed-stream@1.0.0
| | | +-- extend@3.0.0
| | | +-- forever-agent@0.6.1
| | | +-- form-data@2.1.1
| | | | `-- asynckit@0.4.0
| | | +-- har-validator@2.0.6
| | | | +-- chalk@1.1.3
| | | | | +-- ansi-styles@2.2.1
| | | | | +-- escape-string-regexp@1.0.5
| | | | | +-- has-ansi@2.0.0
| | | | | | `-- ansi-regex@2.0.0
| | | | | +-- strip-ansi@3.0.1
| | | | | | `-- ansi-regex@2.0.0
| | | | | `-- supports-color@2.0.0
| | | | +-- commander@2.9.0
| | | | | `-- graceful-readlink@1.0.1
| | | | +-- is-my-json-valid@2.15.0
| | | | | +-- generate-function@2.0.0
| | | | | +-- generate-object-property@1.2.0
| | | | | | `-- is-property@1.0.2
| | | | | +-- jsonpointer@4.0.0
| | | | | `-- xtend@4.0.1
| | | | `-- pinkie-promise@2.0.1
| | | |   `-- pinkie@2.0.4
| | | +-- hawk@3.1.3
| | | | +-- boom@2.10.1
| | | | +-- cryptiles@2.0.5
| | | | +-- hoek@2.16.3
| | | | `-- sntp@1.0.9
| | | +-- http-signature@1.1.1
| | | | +-- assert-plus@0.2.0
| | | | +-- jsprim@1.3.1
| | | | | +-- extsprintf@1.0.2
| | | | | +-- json-schema@0.2.3
| | | | | `-- verror@1.3.6
| | | | `-- sshpk@1.10.1
| | | |   +-- asn1@0.2.3
| | | |   +-- assert-plus@1.0.0
| | | |   +-- bcrypt-pbkdf@1.0.0
| | | |   +-- dashdash@1.14.0
| | | |   +-- ecc-jsbn@0.1.1
| | | |   +-- getpass@0.1.6
| | | |   +-- jodid25519@1.0.2
| | | |   +-- jsbn@0.1.0
| | | |   `-- tweetnacl@0.14.3
| | | +-- is-typedarray@1.0.0
| | | +-- isstream@0.1.2
| | | +-- json-stringify-safe@5.0.1
| | | +-- mime-types@2.1.12
| | | | `-- mime-db@1.24.0
| | | +-- node-uuid@1.4.7
| | | +-- oauth-sign@0.8.2
| | | +-- qs@6.3.0
| | | +-- stringstream@0.0.5
| | | +-- tough-cookie@2.3.2
| | | | `-- punycode@1.4.1
| | | `-- tunnel-agent@0.4.3
| | +-- rimraf@2.5.4
| | | `-- glob@7.1.1
| | |   +-- fs.realpath@1.0.0
| | |   +-- inflight@1.0.6
| | |   | `-- wrappy@1.0.2
| | |   +-- inherits@2.0.3
| | |   +-- minimatch@3.0.3
| | |   | `-- brace-expansion@1.1.6
| | |   |   +-- balanced-match@0.4.2
| | |   |   `-- concat-map@0.0.1
| | |   +-- once@1.4.0
| | |   | `-- wrappy@1.0.2
| | |   `-- path-is-absolute@1.0.1
| | +-- semver@5.3.0
| | +-- tar@2.2.1
| | | +-- block-stream@0.0.9
| | | +-- fstream@1.0.10
| | | | `-- graceful-fs@4.1.9
| | | `-- inherits@2.0.3
| | `-- tar-pack@3.3.0
| |   +-- debug@2.2.0
| |   | `-- ms@0.7.1
| |   +-- fstream@1.0.10
| |   | +-- graceful-fs@4.1.9
| |   | `-- inherits@2.0.3
| |   +-- fstream-ignore@1.0.5
| |   | +-- inherits@2.0.3
| |   | `-- minimatch@3.0.3
| |   |   `-- brace-expansion@1.1.6
| |   |     +-- balanced-match@0.4.2
| |   |     `-- concat-map@0.0.1
| |   +-- once@1.3.3
| |   | `-- wrappy@1.0.2
| |   +-- readable-stream@2.1.5
| |   | +-- buffer-shims@1.0.0
| |   | +-- core-util-is@1.0.2
| |   | +-- inherits@2.0.3
| |   | +-- isarray@1.0.0
| |   | +-- process-nextick-args@1.0.7
| |   | +-- string_decoder@0.10.31
| |   | `-- util-deprecate@1.0.2
| |   `-- uid-number@0.0.6
| `-- protobufjs@5.0.1
|   +-- ascli@1.0.1
|   | +-- colour@0.7.1
|   | `-- optjs@3.2.2
|   +-- bytebuffer@5.0.1
|   | `-- long@3.2.0
|   `-- glob@5.0.15
+-- gulp@3.9.1
| +-- archy@1.0.0
| +-- chalk@1.1.3
| | +-- ansi-styles@2.2.1
| | +-- escape-string-regexp@1.0.5
| | +-- has-ansi@2.0.0
| | | `-- ansi-regex@2.0.0
| | +-- strip-ansi@3.0.1
| | `-- supports-color@2.0.0
| +-- deprecated@0.0.1
| +-- gulp-util@3.0.7
| | +-- array-differ@1.0.0
| | +-- array-uniq@1.0.3
| | +-- beeper@1.1.1
| | +-- dateformat@1.0.12
| | | +-- get-stdin@4.0.1
| | | `-- meow@3.7.0
| | |   +-- camelcase-keys@2.1.0
| | |   +-- loud-rejection@1.6.0
| | |   | +-- currently-unhandled@0.4.1
| | |   | | `-- array-find-index@1.0.2
| | |   | `-- signal-exit@3.0.1
| | |   +-- map-obj@1.0.1
| | |   +-- minimist@1.2.0
| | |   +-- normalize-package-data@2.3.5
| | |   | +-- hosted-git-info@2.1.5
| | |   | +-- is-builtin-module@1.0.0
| | |   | | `-- builtin-modules@1.1.1
| | |   | `-- validate-npm-package-license@3.0.1
| | |   |   +-- spdx-correct@1.0.2
| | |   |   | `-- spdx-license-ids@1.2.2
| | |   |   `-- spdx-expression-parse@1.0.4
| | |   +-- object-assign@4.1.0
| | |   +-- read-pkg-up@1.0.1
| | |   | +-- find-up@1.1.2
| | |   | | `-- path-exists@2.1.0
| | |   | `-- read-pkg@1.1.0
| | |   |   +-- load-json-file@1.1.0
| | |   |   | +-- parse-json@2.2.0
| | |   |   | | `-- error-ex@1.3.0
| | |   |   | |   `-- is-arrayish@0.2.1
| | |   |   | `-- strip-bom@2.0.0
| | |   |   `-- path-type@1.1.0
| | |   +-- redent@1.0.0
| | |   | +-- indent-string@2.1.0
| | |   | | `-- repeating@2.0.1
| | |   | |   `-- is-finite@1.0.2
| | |   | `-- strip-indent@1.0.1
| | |   `-- trim-newlines@1.0.0
| | +-- fancy-log@1.2.0
| | | `-- time-stamp@1.0.1
| | +-- gulplog@1.0.0
| | | `-- glogg@1.0.0
| | +-- has-gulplog@0.1.0
| | | `-- sparkles@1.0.0
| | +-- lodash._reescape@3.0.0
| | +-- lodash._reevaluate@3.0.0
| | +-- lodash._reinterpolate@3.0.0
| | +-- lodash.template@3.6.2
| | | +-- lodash._basecopy@3.0.1
| | | +-- lodash._basetostring@3.0.1
| | | +-- lodash._isiterateecall@3.0.9
| | | +-- lodash.escape@3.2.0
| | | | `-- lodash._root@3.0.1
| | | +-- lodash.restparam@3.6.1
| | | `-- lodash.templatesettings@3.1.1
| | +-- minimist@1.2.0
| | +-- multipipe@0.1.2
| | | `-- duplexer2@0.0.2
| | |   `-- readable-stream@1.1.14
| | |     `-- isarray@0.0.1
| | +-- object-assign@3.0.0
| | +-- replace-ext@0.0.1
| | `-- vinyl@0.5.3
| |   +-- clone@1.0.2
| |   `-- clone-stats@0.0.1
| +-- interpret@1.0.1
| +-- liftoff@2.3.0
| | +-- extend@3.0.0
| | +-- findup-sync@0.4.3
| | | +-- detect-file@0.1.0
| | | | `-- fs-exists-sync@0.1.0
| | | +-- is-glob@2.0.1
| | | | `-- is-extglob@1.0.0
| | | +-- micromatch@2.3.11
| | | | +-- arr-diff@2.0.0
| | | | | `-- arr-flatten@1.0.1
| | | | +-- array-unique@0.2.1
| | | | +-- braces@1.8.5
| | | | | +-- expand-range@1.8.2
| | | | | | `-- fill-range@2.2.3
| | | | | |   +-- is-number@2.1.0
| | | | | |   +-- isobject@2.1.0
| | | | | |   +-- randomatic@1.1.6
| | | | | |   `-- repeat-string@1.6.1
| | | | | +-- preserve@0.2.0
| | | | | `-- repeat-element@1.1.2
| | | | +-- expand-brackets@0.1.5
| | | | | `-- is-posix-bracket@0.1.1
| | | | +-- extglob@0.3.2
| | | | +-- filename-regex@2.0.0
| | | | +-- kind-of@3.0.4
| | | | | `-- is-buffer@1.1.4
| | | | +-- normalize-path@2.0.1
| | | | +-- object.omit@2.0.1
| | | | | +-- for-own@0.1.4
| | | | | | `-- for-in@0.1.6
| | | | | `-- is-extendable@0.1.1
| | | | +-- parse-glob@3.0.4
| | | | | +-- glob-base@0.3.0
| | | | | | `-- glob-parent@2.0.0
| | | | | `-- is-dotfile@1.0.2
| | | | `-- regex-cache@0.4.3
| | | |   +-- is-equal-shallow@0.1.3
| | | |   `-- is-primitive@2.0.0
| | | `-- resolve-dir@0.1.1
| | |   `-- global-modules@0.2.3
| | |     +-- global-prefix@0.1.4
| | |     | `-- osenv@0.1.3
| | |     `-- is-windows@0.2.0
| | +-- fined@1.0.2
| | | +-- expand-tilde@1.2.2
| | | +-- lodash.assignwith@4.2.0
| | | +-- lodash.isempty@4.4.0
| | | +-- lodash.pick@4.4.0
| | | `-- parse-filepath@1.0.1
| | |   +-- is-absolute@0.2.6
| | |   | `-- is-relative@0.2.1
| | |   |   `-- is-unc-path@0.1.1
| | |   |     `-- unc-path-regex@0.1.2
| | |   +-- map-cache@0.2.2
| | |   `-- path-root@0.1.1
| | |     `-- path-root-regex@0.1.2
| | +-- flagged-respawn@0.3.2
| | +-- lodash.isplainobject@4.0.6
| | +-- lodash.isstring@4.0.1
| | +-- lodash.mapvalues@4.6.0
| | `-- rechoir@0.6.2
| +-- minimist@1.2.0
| +-- orchestrator@0.3.8
| | +-- end-of-stream@0.1.5
| | | `-- once@1.3.3
| | +-- sequencify@0.0.7
| | `-- stream-consume@0.1.0
| +-- pretty-hrtime@1.0.3
| +-- semver@4.3.6
| +-- tildify@1.2.0
| | `-- os-homedir@1.0.2
| +-- v8flags@2.0.11
| | `-- user-home@1.1.1
| `-- vinyl-fs@0.3.14
|   +-- defaults@1.0.3
|   +-- glob-stream@3.1.18
|   | +-- glob@4.5.3
|   | +-- glob2base@0.0.12
|   | | `-- find-index@0.1.1
|   | +-- minimatch@2.0.10
|   | +-- ordered-read-streams@0.1.0
|   | +-- through2@0.6.5
|   | | `-- readable-stream@1.0.34
|   | |   `-- isarray@0.0.1
|   | `-- unique-stream@1.0.0
|   +-- glob-watcher@0.0.6
|   | `-- gaze@0.5.2
|   |   `-- globule@0.1.0
|   |     +-- glob@3.1.21
|   |     | +-- graceful-fs@1.2.3
|   |     | `-- inherits@1.0.2
|   |     +-- lodash@1.0.2
|   |     `-- minimatch@0.2.14
|   |       +-- lru-cache@2.7.3
|   |       `-- sigmund@1.0.1
|   +-- graceful-fs@3.0.11
|   | `-- natives@1.1.0
|   +-- strip-bom@1.0.0
|   | +-- first-chunk-stream@1.0.0
|   | `-- is-utf8@0.2.1
|   +-- through2@0.6.5
|   | `-- readable-stream@1.0.34
|   |   `-- isarray@0.0.1
|   `-- vinyl@0.4.6
|     `-- clone@0.2.0
+-- gulp-eslint@3.0.1
| +-- bufferstreams@1.1.1
| | `-- readable-stream@2.2.2
| |   +-- buffer-shims@1.0.0
| |   +-- isarray@1.0.0
| |   +-- process-nextick-args@1.0.7
| |   `-- util-deprecate@1.0.2
| `-- eslint@3.11.1
|   +-- babel-code-frame@6.16.0
|   | `-- js-tokens@2.0.0
|   +-- concat-stream@1.5.2
|   | +-- readable-stream@2.0.6
|   | `-- typedarray@0.0.6
|   +-- doctrine@1.5.0
|   +-- escope@3.6.0
|   | +-- es6-map@0.1.4
|   | | +-- d@0.1.1
|   | | +-- es5-ext@0.10.12
|   | | +-- es6-iterator@2.0.0
|   | | +-- es6-set@0.1.4
|   | | +-- es6-symbol@3.1.0
|   | | `-- event-emitter@0.3.4
|   | +-- es6-weak-map@2.0.1
|   | `-- esrecurse@4.1.0
|   |   +-- estraverse@4.1.1
|   |   `-- object-assign@4.1.0
|   +-- espree@3.3.2
|   | +-- acorn@4.0.3
|   | `-- acorn-jsx@3.0.1
|   |   `-- acorn@3.3.0
|   +-- estraverse@4.2.0
|   +-- esutils@2.0.2
|   +-- file-entry-cache@2.0.0
|   | +-- flat-cache@1.2.1
|   | | +-- circular-json@0.3.1
|   | | +-- del@2.2.2
|   | | | +-- globby@5.0.0
|   | | | | +-- array-union@1.0.2
|   | | | | +-- arrify@1.0.1
|   | | | | `-- object-assign@4.1.0
|   | | | +-- is-path-cwd@1.0.0
|   | | | +-- is-path-in-cwd@1.0.0
|   | | | | `-- is-path-inside@1.0.0
|   | | | +-- object-assign@4.1.0
|   | | | +-- pify@2.3.0
|   | | | `-- pinkie-promise@2.0.1
|   | | |   `-- pinkie@2.0.4
|   | | `-- write@0.2.1
|   | `-- object-assign@4.1.0
|   +-- globals@9.14.0
|   +-- ignore@3.2.0
|   +-- imurmurhash@0.1.4
|   +-- inquirer@0.12.0
|   | +-- ansi-escapes@1.4.0
|   | +-- cli-cursor@1.0.2
|   | | `-- restore-cursor@1.0.1
|   | |   `-- exit-hook@1.1.1
|   | +-- cli-width@2.1.0
|   | +-- figures@1.7.0
|   | | `-- object-assign@4.1.0
|   | +-- readline2@1.0.1
|   | | `-- mute-stream@0.0.5
|   | +-- run-async@0.1.0
|   | `-- rx-lite@3.1.2
|   +-- is-my-json-valid@2.15.0
|   | +-- generate-function@2.0.0
|   | +-- generate-object-property@1.2.0
|   | | `-- is-property@1.0.2
|   | `-- jsonpointer@4.0.0
|   +-- is-resolvable@1.0.0
|   | `-- tryit@1.0.3
|   +-- js-yaml@3.7.0
|   | `-- argparse@1.0.9
|   |   `-- sprintf-js@1.0.3
|   +-- json-stable-stringify@1.0.1
|   | `-- jsonify@0.0.0
|   +-- levn@0.3.0
|   | +-- prelude-ls@1.1.2
|   | `-- type-check@0.3.2
|   +-- natural-compare@1.4.0
|   +-- optionator@0.8.2
|   | +-- deep-is@0.1.3
|   | `-- fast-levenshtein@2.0.5
|   +-- path-is-inside@1.0.2
|   +-- pluralize@1.2.1
|   +-- progress@1.1.8
|   +-- shelljs@0.7.5
|   +-- strip-bom@3.0.0
|   +-- strip-json-comments@1.0.4
|   +-- table@3.8.3
|   | +-- ajv@4.9.0
|   | | `-- co@4.6.0
|   | +-- ajv-keywords@1.1.1
|   | +-- slice-ansi@0.0.4
|   | `-- string-width@2.0.0
|   |   `-- is-fullwidth-code-point@2.0.0
|   +-- text-table@0.2.0
|   `-- user-home@2.0.0
+-- gulp-istanbul@1.1.1
| +-- istanbul@0.4.5
| | +-- abbrev@1.0.9
| | +-- escodegen@1.8.1
| | | +-- estraverse@1.9.3
| | | `-- source-map@0.2.0
| | |   `-- amdefine@1.0.1
| | +-- esprima@2.7.3
| | +-- glob@5.0.15
| | +-- handlebars@4.0.6
| | | +-- optimist@0.6.1
| | | | `-- wordwrap@0.0.3
| | | +-- source-map@0.4.4
| | | `-- uglify-js@2.7.4
| | |   +-- async@0.2.10
| | |   +-- source-map@0.5.6
| | |   +-- uglify-to-browserify@1.0.2
| | |   `-- yargs@3.10.0
| | |     +-- camelcase@1.2.1
| | |     +-- cliui@2.1.0
| | |     | +-- center-align@0.1.3
| | |     | | +-- align-text@0.1.4
| | |     | | | `-- longest@1.0.1
| | |     | | `-- lazy-cache@1.0.4
| | |     | +-- right-align@0.1.3
| | |     | `-- wordwrap@0.0.2
| | |     `-- window-size@0.1.0
| | +-- nopt@3.0.6
| | +-- once@1.4.0
| | | `-- wrappy@1.0.2
| | +-- supports-color@3.1.2
| | | `-- has-flag@1.0.0
| | +-- which@1.2.12
| | | `-- isexe@1.1.2
| | `-- wordwrap@1.0.0
| +-- istanbul-threshold-checker@0.1.0
| | +-- istanbul@0.3.22
| | | +-- escodegen@1.7.1
| | | | +-- esprima@1.2.5
| | | | +-- estraverse@1.9.3
| | | | `-- optionator@0.5.0
| | | |   +-- fast-levenshtein@1.0.7
| | | |   +-- levn@0.2.5
| | | |   `-- wordwrap@0.0.3
| | | +-- esprima@2.5.0
| | | +-- fileset@0.2.1
| | | | +-- glob@5.0.15
| | | | `-- minimatch@2.0.10
| | | `-- supports-color@3.1.2
| | `-- lodash@3.6.0
| +-- through2@2.0.2
| | `-- xtend@4.0.1
| `-- vinyl-sourcemaps-apply@0.2.1
|   `-- source-map@0.5.6
+-- gulp-jsdoc3@0.3.0
| +-- bluebird@3.4.6
| +-- debug@2.3.3
| | `-- ms@0.7.2
| +-- ink-docstrap@1.3.0
| | `-- sanitize-html@1.13.0
| |   +-- htmlparser2@3.9.2
| |   | +-- domelementtype@1.3.0
| |   | +-- domhandler@2.3.0
| |   | +-- domutils@1.5.1
| |   | | `-- dom-serializer@0.1.0
| |   | |   `-- domelementtype@1.1.3
| |   | `-- entities@1.1.1
| |   `-- regexp-quote@0.0.0
| +-- jsdoc@3.4.3
| | +-- catharsis@0.8.8
| | | `-- underscore-contrib@0.3.0
| | |   `-- underscore@1.6.0
| | +-- espree@3.1.7
| | | `-- acorn@3.3.0
| | +-- js2xmlparser@1.0.0
| | +-- marked@0.3.6
| | +-- requizzle@0.2.1
| | | `-- underscore@1.6.0
| | +-- strip-json-comments@2.0.1
| | +-- taffydb@2.6.2
| | `-- underscore@1.8.3
| +-- map-stream@0.0.6
| `-- tmp@0.0.28
|   `-- os-tmpdir@1.0.2
+-- gulp-tape@0.0.9
| `-- require-uncached@1.0.3
|   +-- caller-path@0.1.0
|   | `-- callsites@0.2.0
|   `-- resolve-from@1.0.1
+-- intercept-stdout@0.1.2
| `-- lodash.toarray@3.0.2
|   +-- lodash._arraycopy@3.0.0
|   +-- lodash._basevalues@3.0.0
|   `-- lodash.keys@3.1.2
|     +-- lodash._getnative@3.9.1
|     +-- lodash.isarguments@3.1.0
|     `-- lodash.isarray@3.0.4
+-- js-sha3@0.5.5
+-- json-stringify-safe@5.0.1
+-- jsrsasign@6.2.2
+-- jssha@2.2.0
+-- lodash@4.17.2
+-- log4js@0.6.38
| `-- readable-stream@1.0.34
|   +-- core-util-is@1.0.2
|   +-- isarray@0.0.1
|   `-- string_decoder@0.10.31
+-- nconf@0.8.4
| +-- async@1.5.2
| +-- ini@1.3.4
| +-- secure-keys@1.0.0
| `-- yargs@3.32.0
|   +-- camelcase@2.1.1
|   +-- cliui@3.2.0
|   | `-- wrap-ansi@2.0.0
|   +-- decamelize@1.2.0
|   +-- os-locale@1.4.0
|   | `-- lcid@1.0.0
|   |   `-- invert-kv@1.0.0
|   +-- string-width@1.0.2
|   | +-- code-point-at@1.1.0
|   | `-- is-fullwidth-code-point@1.0.0
|   |   `-- number-is-nan@1.0.1
|   +-- window-size@0.1.4
|   `-- y18n@3.2.1
+-- node-uuid@1.4.7
+-- node.extend@1.1.6
| `-- is@3.2.0
+-- path@0.12.7
| `-- process@0.11.9
+-- pkijs@1.3.33
+-- promise-settle@0.3.0
+-- require-dir@0.3.1
+-- sjcl@1.0.3
+-- sjcl-codec@0.1.1
+-- tap-colorize@1.2.0
| +-- colornames@0.0.2
| +-- minimist@0.2.0
| +-- quotemeta@0.0.0
| +-- split@0.3.3
| +-- stream-combiner@0.2.2
| | `-- duplexer@0.1.1
| +-- through2@1.0.0
| | +-- readable-stream@1.1.14
| | | `-- isarray@0.0.1
| | `-- xtend@2.1.2
| |   `-- object-keys@0.4.0
| `-- x256@0.0.2
+-- tape@4.6.3
| +-- deep-equal@1.0.1
| +-- defined@1.0.0
| +-- for-each@0.3.2
| | `-- is-function@1.0.1
| +-- function-bind@1.1.0
| +-- glob@7.1.1
| | +-- fs.realpath@1.0.0
| | +-- inflight@1.0.6
| | `-- minimatch@3.0.3
| |   `-- brace-expansion@1.1.6
| |     +-- balanced-match@0.4.2
| |     `-- concat-map@0.0.1
| +-- has@1.0.1
| +-- minimist@1.2.0
| +-- object-inspect@1.2.1
| +-- resolve@1.1.7
| +-- resumer@0.0.0
| +-- string.prototype.trim@1.1.2
| | +-- define-properties@1.1.2
| | | +-- foreach@2.0.5
| | | `-- object-keys@1.0.11
| | `-- es-abstract@1.6.1
| |   +-- es-to-primitive@1.1.1
| |   | +-- is-date-object@1.0.1
| |   | `-- is-symbol@1.0.1
| |   +-- is-callable@1.1.3
| |   `-- is-regex@1.0.3
| `-- through@2.3.8
+-- tape-promise@1.1.0
| `-- onetime@1.1.0
+-- tar-fs@1.14.0
| +-- mkdirp@0.5.1
| | `-- minimist@0.0.8
| +-- pump@1.0.1
| | `-- end-of-stream@1.1.0
| |   `-- once@1.3.3
| `-- tar-stream@1.5.2
|   `-- bl@1.1.2
|     `-- readable-stream@2.0.6
+-- url@0.11.0
| +-- punycode@1.3.2
| `-- querystring@0.2.0
+-- util@0.10.3
| `-- inherits@2.0.1
+-- uuidv4@0.3.1
`-- winston@2.3.0
  +-- async@1.0.0
  +-- colors@1.0.3
  +-- cycle@1.0.3
  +-- eyes@0.1.8
  +-- isstream@0.1.2
  `-- stack-trace@0.0.9

npm ERR! Windows_NT 6.1.7601
npm ERR! argv ""C:\\Program Files\\nodejs\\node.exe"" ""C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js"" ""install""
npm ERR! node v6.9.1
npm ERR! npm  v3.10.8
npm ERR! code ELIFECYCLE

npm ERR! sleep@3.0.1 install: `node-gyp rebuild`
npm ERR! Exit status 1
npm ERR!
npm ERR! Failed at the sleep@3.0.1 install script 'node-gyp rebuild'.
npm ERR! Make sure you have the latest version of node.js and npm installed.
npm ERR! If you do, this is most likely a problem with the sleep package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-gyp rebuild
npm ERR! You can get information on how to open an issue for this project with:
npm ERR!     npm bugs sleep
npm ERR! Or if that isn't available, you can get their info via:
npm ERR!     npm owner ls sleep
npm ERR! There is likely additional logging output above.

npm ERR! Please include the following file with any support request:
npm ERR!     C:\blockchain\src\github.com\hyperledger\fabric-sdk-node\npm-debug.log
```

Errors encountered for ""npm install -g hfc"":

``` bash
kletkeman@tp-letkemank  /c/blockchain/src/github.com/hyperledger/fabric-sdk-node (master)
$ npm install -g hfc
npm WARN deprecated node-uuid@1.4.7: use uuid module instead
C:\Users\IBM_ADMIN\AppData\Roaming\npm\hfc -> C:\Users\IBM_ADMIN\AppData\Roaming\npm\node_modules\hfc\bin\main.js

> grpc@1.0.0 install C:\Users\IBM_ADMIN\AppData\Roaming\npm\node_modules\hfc\node_modules\grpc
> node-pre-gyp install --fallback-to-build

[grpc] Success: ""C:\Users\IBM_ADMIN\AppData\Roaming\npm\node_modules\hfc\node_modules\grpc\src\node\extension_binary\grpc_node.node"" is installed via remote

> hashtable@2.0.2 install C:\Users\IBM_ADMIN\AppData\Roaming\npm\node_modules\hfc\node_modules\hashtable
> node-gyp configure build


C:\Users\IBM_ADMIN\AppData\Roaming\npm\node_modules\hfc\node_modules\hashtable>if not defined npm_config_node_gyp (node ""C:\Program Files\nodejs\node_modules\npm\bin\node-gyp-bin\\..\..\node_modules\node-gyp\bin\node-gyp.js"" configure build )  else (node """" configure build )
gyp ERR! configure error
gyp ERR! stack Error: Can't find Python executable ""python"", you can set the PYTHON env variable.
gyp ERR! stack     at failNoPython (C:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\configure.js:449:14)
gyp ERR! stack     at C:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\configure.js:404:11
gyp ERR! stack     at FSReqWrap.oncomplete (fs.js:123:15)
gyp ERR! System Windows_NT 6.1.7601
gyp ERR! command ""C:\\Program Files\\nodejs\\node.exe"" ""C:\\Program Files\\nodejs\\node_modules\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js"" ""configure"" ""build""
gyp ERR! cwd C:\Users\IBM_ADMIN\AppData\Roaming\npm\node_modules\hfc\node_modules\hashtable
gyp ERR! node -v v6.9.1
gyp ERR! node-gyp -v v3.4.0
gyp ERR! not ok
C:\Users\IBM_ADMIN\AppData\Roaming\npm
`-- (empty)

npm ERR! Windows_NT 6.1.7601
npm ERR! argv ""C:\\Program Files\\nodejs\\node.exe"" ""C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js"" ""install"" ""-g"" ""hfc""
npm ERR! node v6.9.1
npm ERR! npm  v3.10.8
npm ERR! code ELIFECYCLE

npm ERR! hashtable@2.0.2 install: `node-gyp configure build`
npm ERR! Exit status 1
npm ERR!
npm ERR! Failed at the hashtable@2.0.2 install script 'node-gyp configure build'.
npm ERR! Make sure you have the latest version of node.js and npm installed.
npm ERR! If you do, this is most likely a problem with the hashtable package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-gyp configure build
npm ERR! You can get information on how to open an issue for this project with:
npm ERR!     npm bugs hashtable
npm ERR! Or if that isn't available, you can get their info via:
npm ERR!     npm owner ls hashtable
npm ERR! There is likely additional logging output above.

npm ERR! Please include the following file with any support request:
npm ERR!     C:\blockchain\src\github.com\hyperledger\fabric-sdk-node\npm-debug.log
npm ERR! code 1
```",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jzd:,,,,,,,,isramos,kletkeman,mastersingh24,py,,,,,,,,,,,"31/Dec/16 8:24 PM;mastersingh24;[~kim@letkeman.net] Not sure if this has been resolved?   I believe the resolution for this is to make sure you have the Windows build tools installed:    https://github.com/felixrieseberg/windows-build-tools

I'm going to close this but feel free to re-open if there is still an issue",,,,,,,,,,,,,,,,,,,,,,,
end-to-end.js should use new COP server's admin credentials,FAB-1208,13542,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,28/Nov/16 9:07 PM,01/Dec/16 3:51 AM,26/Apr/18 6:50 AM,01/Dec/16 3:51 AM,,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"now that the SDK has been updated to talk to fabric COP server for user enroll, it needs to be updated to use the admin/adminpw credentials that the COP server default configuration uses.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jxt:,,Sprint 6 - nodeSDK,,,,,,jimthematrix,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
typo in core.yaml for peer.gossip.bootstrap,FAB-1207,13541,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,28/Nov/16 7:42 PM,09/Dec/16 1:11 PM,26/Apr/18 6:50 AM,09/Dec/16 1:11 PM,,,,,,,,,,,,,,0,,,,,,,,,"{quote}
\# Gossip related configuration
    gossip:
        boostrap: 0.0.0.0:7051
{quote}

should be

{quote}
\# Gossip related configuration
    gossip:
        bootstrap: 0.0.0.0:7051
{quote}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jxl:,,,,,,,,mastersingh24,,,,,,,,,,master,,,true,09/Dec/16 1:11 PM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/2811/,,,,,,,,,,,,,,,,,,,,,,,
running 4peers + CA on PBFT fails if we change PEER_ID ,FAB-1203,13537,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,bfuentes@fr.ibm.com,bfuentes@fr.ibm.com,28/Nov/16 9:22 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,03/Dec/16 10:12 PM,,,,,,,v0.6,,,fabric-orderer,,,,0,consensus,pbft,,,,,,,"I have changed PEER_ID in the compose files, then I tried to run with PBFT.

While deploying a chaincode on *node1*, the nodes do not synchronized.
Here is the WARN message i see on logs :

*node1_1* | 08:56:35.018 [consensus/pbft] recvViewChange -> WARN 7eb Replica 0 found incorrect signature in view-change message: Could not verify message from *vp0* (unknown peer)

I do not have any *vp0* anymore in my config files. Actually, *node1* is the new name of *vp0*

If I run the network on NOOPS consensus , I have no problem

Here is the config of peer-secure-pbft-base.yaml :

version: '2'
services:
  peer-secure-pbft-base:
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      - CORE_PEER_DISCOVERY_PERIOD=60s
      - CORE_PEER_DISCOVERY_TOUCHPERIOD=61s
      - CORE_PEER_ADDRESSAUTODETECT=true
      - CORE_VM_ENDPOINT=unix:///var/run/docker.sock
      - CORE_LOGGING_LEVEL=DEBUG
      - CORE_PEER_PKI_ECA_PADDR=membersrvc:7054
      - CORE_PEER_PKI_TCA_PADDR=membersrvc:7054
      - CORE_PEER_PKI_TLSCA_PADDR=membersrvc:7054
      - CORE_SECURITY_ENABLED=true
      - CORE_PEER_VALIDATOR_CONSENSUS_PLUGIN=pbft 
      - CORE_PBFT_GENERAL_N=4
      - CORE_PBFT_GENERAL_K=1
      - CORE_PBFT_GENERAL_BATCHSIZE=1

    command: sh -c ""sleep 10; peer node start""
and full-peer-ca.yaml :

version: '2'
services:
  baseimage:
    build: ./baseimage
    image: hyperledger/fabric-baseimage:latest

  membersrvc:
    image: hyperledger/fabric-membersrvc:${ARCH_TAG}-0.6.1-preview
    extends:
      file: base/membersrvc.yaml
      service: membersrvc

  node1:
    image: hyperledger/fabric-peer:${ARCH_TAG}-0.6.1-preview
    extends:
      file: base/peer-secure-pbft-base.yaml
      service: peer-secure-pbft-base
    ports:
      - ""7050:7050""
      - ""7051:7051""
      - ""7053:7053""
    environment:
      - CORE_PEER_ID=node1
      - CORE_SECURITY_ENROLLID=test_vp0
      - CORE_SECURITY_ENROLLSECRET=MwYpmSRjupbT
    links:
      - membersrvc
...",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00k8h:,,,,,,,,bfuentes@fr.ibm.com,mastersingh24,,,,,,,,,,,,,"03/Dec/16 10:08 PM;mastersingh24;out of interest, why did you want to change the name?

the problem is that in v0.6 when using PBFT PEER_IP must must start or end with {{vpX}}, e.g. {{vp0, vp1, vp2, vp3 ... vpX}}","05/Dec/16 9:04 AM;bfuentes@fr.ibm.com;On a network launched by docker-compose, is quite convenient on the logs to distinguish the peers using other names 
Nevermind :)",,,,,,,,,,,,,,,,,,,,,,
range query asserting panic,FAB-1200,13534,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,muralisr,muralisr,27/Nov/16 11:47 PM,30/Nov/16 10:34 PM,26/Apr/18 6:50 AM,30/Nov/16 10:34 PM,,,,,,,,,,fabric-peer,,,,0,chaincode,,,,,,,,"When using Tables, getting assertion 

{quote}
*panic: interface conversion: interface is *ledger.KV, not ledger.KV*
        panic: runtime error: invalid memory address or nil pointer dereference

goroutine 6147:
panic(0xa3a0e0, 0xc4200100b0)
        /opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/core/chaincode.(*Handler).handleRangeQueryState.func1.1(0xc420282180, 0xc420d64ec0, 0xc4200c0e40)
        /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:598 +0x4e
panic(0xa3f3a0, 0xc420b9a740)
        /opt/go/src/runtime/panic.go:458 +0x243
github.com/hyperledger/fabric/core/chaincode.(*Handler).handleRangeQueryState.func1(0xc420282180, 0xc420d64ec0)
        /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:640 +0x32f
created by github.com/hyperledger/fabric/core/chaincode.(*Handler).handleRangeQueryState
        /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:666 +0x49
{quote}


core/chaincode/handler.go needs to assert *ledger.KV",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jw9:,,,,,,,,muralisr,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Solo orderer test case fails,FAB-1196,13530,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,muralisr,muralisr,25/Nov/16 2:56 AM,30/Nov/16 10:35 PM,26/Apr/18 6:50 AM,30/Nov/16 10:35 PM,,,,,,,,,,,,,,0,,,,,,,,,Change to ramledger API ramledger.New needs to be reflected in orderer/consensus/consensus_test.go,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jvd:,,,,,,,,inatatsu,muralisr,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
CLI solo orderer broadcast fails sporadically ,FAB-1195,13529,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,muralisr,muralisr,24/Nov/16 11:35 PM,30/Nov/16 10:34 PM,26/Apr/18 6:50 AM,30/Nov/16 10:34 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"The CLI broadcast client implemented for sending deploy and invoke transactions does not receive acknowledgement to Sends. This seems to trip up the orderer which seems to expect broadcast clients to be well behaved. Make the CLI orderer to be wellbehaved by receiving the ACK.

As a side note we need to look at the assumption on the part of the orderer which expects the broadcast client that called Send to Recv acks.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jv5:,,,,,,,,inatatsu,muralisr,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Solo orderer not cutting blocks after first batch,FAB-1192,13526,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,muralisr,muralisr,23/Nov/16 9:01 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,23/Nov/16 10:23 PM,,,,,,,,,,fabric-orderer,,,,0,consensus,,,,,,,,A missing timer reset is stopping a batch from getting triggered.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jup:,,,,,,,,kchristidis,muralisr,,,,,,,,,master,,,true,24/Nov/16 1:33 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/2741/,,,,,,,,,,,,,,,,,,,,,,,
Behave test failures in v1.0,FAB-1191,13525,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,latitiah,rameshthoomu,rameshthoomu,23/Nov/16 2:25 PM,13/Apr/17 11:40 PM,26/Apr/18 6:50 AM,13/Apr/17 11:40 PM,v1.0.0,,,,,,DUPLICATE,v1.0.0,,fabric-quality,,,,0,,,,,,,,,"Observed below behave test cases are failing consistently in v1.0 (fabric master branch)

features/endorser.feature:37  Basic deploy endorsement for chaincode through GRPC to multiple endorsers -- @1.1 Orderer Options
features/orderer.feature:29  Basic orderer function -- @1.5 Orderer Options

Below are the build references:

https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-behave-x86_64/254/
or check any verify or merge behave builds

",Jenkins ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00juh:,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ChaincodeSpec  attributes are not passed to QueryChaincode  and InvokeChaincode methods,FAB-1189,13523,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,vineet.timble,vineet.timble,23/Nov/16 1:12 PM,24/Apr/17 7:22 AM,26/Apr/18 6:50 AM,24/Apr/17 7:22 AM,v0.6,,,,,,WON'T FIX,,,fabric-crypto,,,,0,Security,,,,,,,,"I have implemented a chaincode. I am trying to implement functionality where deployment of new version of chaincode migrates the ledger data from old version of chaincode. It does so by calling QueryChaincode method of ChaincodeStub and passing chaincodeID of old version. I have built the access control in all query and invoke function which uses securitycontext and metadata. However I found that QueryChaincode method does not pass attributes of ChaincodeSpec like SecureContext, ConfidentialityLevel, Metadata and Attributes. Due to this QueryChaincode is failing the access control implemented in old version of chaincode.
I think it is necessary that above attributes should be passed to QueryChaincode  and InvokeChaincode",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzbt:l0hv,,,,,,,,ChristopherFerris,elli-androulaki,vineet.timble,,,,,,,,,,,,"10/Apr/17 6:52 PM;elli-androulaki;Hi, does this bug refer to 0.6?",11/Apr/17 8:59 AM;vineet.timble;Yes this was raised for 0.6. haven't got chance to verify if same issue is present in 1.0.0 preview,"14/Apr/17 12:38 AM;ChristopherFerris;[~ellaki] Please verify that this is either specific to v0.6 or relevant for v1.0.0 and add affectedVersion accordingly. If v0.6 only, please mark fixVersion WON'T FIX and close it.",,,,,,,,,,,,,,,,,,,,,
CORE_SECURITY_ENABLED variable is not passed to chaincode container,FAB-1188,13522,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,vineet.timble,vineet.timble,23/Nov/16 1:09 PM,15/Apr/17 11:07 AM,26/Apr/18 6:50 AM,15/Apr/17 11:07 AM,v1.0.0,,,,,,WON'T FIX,,,fabric-crypto,,,,0,chaincode,Security,,,,,,,"I have chaincode which does security checks when security is enabled. It checks if security is enabled through core.SecurityEnabled() api. I enable / disable security using docker-compose env. variable CORE_SECURITY_ENABLED.

This works fine in dev mode. However when I deploy chaincode in non-dev mode, I get core.SecurityEnabled() as false although my env variable is passed as true. I examined the docker containers. Docker container running peer, returns env variable CORE_SECURITY_ENABLED=true on env command. However docker container running chaincode does not have env variable CORE_SECURITY_ENABLED. It would be picking up value from core.yaml which is set as false.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jtt:,,,,,,,,elli-androulaki,mastersingh24,vineet.timble,,,,,,,,,,,,"10/Apr/17 6:51 PM;elli-androulaki;Hi, does this refer to 0.6 ?",15/Apr/17 11:07 AM;mastersingh24;no longer valid as security is always enabled and this config parameter has been removed,,,,,,,,,,,,,,,,,,,,,,
add query checking as the last step in marbles.js test script,FAB-1186,13520,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,22/Nov/16 9:50 PM,01/Dec/16 3:50 AM,26/Apr/18 6:50 AM,01/Dec/16 3:50 AM,,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,so that the test script can verify that the previous transactions were successful,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jtd:,,Sprint 6 - nodeSDK,,,,,,jimthematrix,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
cop unit-tests are failing with timeout issue,FAB-1183,13516,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,skarim,rameshthoomu,rameshthoomu,22/Nov/16 4:36 PM,04/Jan/17 7:13 PM,26/Apr/18 6:50 AM,04/Jan/17 7:13 PM,,,,,,,,,,fabric-membersrvc,,,,0,MembershipServices,,,,,,,,"Observed fabric-cop tests are failing with timeout issue. Need to increase timeout in cli/server/server_test.go

https://gerrit.hyperledger.org/r/gitweb?p=fabric-cop.git;a=blob;f=cli/server/server_test.go;h=f3d7046b3dc5edc4c6446f97105a7f80f2cc38e2;hb=refs/heads/master#l58

00:02:25.746 2016/11/21 22:01:48 [DEBUG] failed POST: Post http://127.0.0.1:8888/api/v1/cfssl/enroll: dial tcp 127.0.0.1:8888: getsockopt: connection refused
00:02:25.746 2016/11/21 22:01:48 [ERROR] 100001: failed POST: Post http://127.0.0.1:8888/api/v1/cfssl/enroll: dial tcp 127.0.0.1:8888: getsockopt: connection refused
00:02:25.746 --- FAIL: TestEnrollBootstrapUser (0.03s)
00:02:25.746 	cop_test.go:98: Error:  100001: failed POST: Post http://127.0.0.1:8888/api/v1/cfssl/enroll: dial tcp 127.0.0.1:8888: getsockopt: connection refused",Jenkins CI and Vagrant,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jsx:,,,,,,,,rameshthoomu,skarim,,,,,,,,,,,,,22/Nov/16 4:41 PM;skarim;Seems to be a timing issue. Last discussion with Keith he said he had found the issue. Will discuss with him further. [~keithsmith],22/Nov/16 5:01 PM;rameshthoomu;thanks [~skarim]: As this is timeout issue we can re-trigger Jenkins job with *reverify* in reply or let me know I will re-trigger from Jenkins,"04/Jan/17 7:13 PM;skarim;Marking this as Done. Increased waiting time between starting server and executing test cases against. The sleep is now for 10 seconds, that should be sufficient amount of time to prevent this issue from occurring on Jenkins. ",,,,,,,,,,,,,,,,,,,,,
end-to-end.js needs to use SHA256 to match the peer,FAB-1182,13515,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,22/Nov/16 3:58 PM,27/Nov/16 12:57 PM,26/Apr/18 6:50 AM,27/Nov/16 12:57 PM,,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,without the change the signature in the Proposal will fail to verify due to different hashing output b/w the peer and SDK,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jsp:,,Sprint 6 - nodeSDK,,,,,,jimthematrix,mastersingh24,,,,,,,,,master,,,true,27/Nov/16 12:57 PM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/2713/,,,,,,,,,,,,,,,,,,,,,,,
MSP peer config file should be read from a global config path,FAB-1162,13495,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,muralisr,muralisr,muralisr,20/Nov/16 8:01 PM,30/Nov/16 10:34 PM,26/Apr/18 6:50 AM,30/Nov/16 10:34 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,Currently peer-config.json is being read from GOPATH. This will break environments where GOPATH is not the root of the fabric. One option is to use PEER_CFG_PATH which has been used to deal with similar issue with core.yaml.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jop:,,,,,,,,muralisr,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Push genesis block upon setting up broadcaster,FAB-1161,13494,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,kchristidis,kchristidis,20/Nov/16 5:08 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,23/Nov/16 7:42 AM,,,,,,,,,,fabric-orderer,,,,0,consensus,,,,,,,,"Current logic: hold off on pushing genesis block until first broadcast request comes in.

New logic: push genesis block as soon as orderer is brought up. The side-effect of this is that any deliver requests that come up now won't panic, because they will reach an existing topic.

Related: https://hyperledgerproject.slack.com/archives/fabric-consensus-dev/p1479533150004175",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-32,0|hzzzza:6wqoi9,,Sprint 5 - Consensus,Sprint 6 - consensus,,,,,kchristidis,,,,,,,,,,master,,,true,"20/Nov/16 10:17 PM;kchristidis;https://gerrit.hyperledger.org/r/2657

Proof: https://hyperledgerproject.slack.com/archives/fabric-consensus-dev/p1479680213004224

Can be tested with this docker-compose file https://hyperledgerproject.slack.com/archives/fabric-consensus-dev/p1479533769004179 by doing a simple docker-compose up.",,,,,,,,,,,,,,,,,,,,,,,
GossipStateProvider unit test case is failing with timeout message,FAB-1158,13491,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,rameshthoomu,rameshthoomu,19/Nov/16 3:26 PM,08/Apr/17 9:29 AM,26/Apr/18 6:50 AM,08/Apr/17 9:29 AM,,,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,,"Master build is broken with one of the unit-test case failure. Change has been implemented in this patch set https://gerrit.hyperledger.org/r/#/c/2505/

gossip/state/state_test.go

case <-time.After(timeout):
		t.Fatal(""Timeout has expired"")
		break",Jenkins CI,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jnt:,,,,,,,,rameshthoomu,,,,,,,,,,,,,,"19/Nov/16 7:42 PM;rameshthoomu;@yacovm mentioned in slack channel that this test ""TestNewGossipStateProvider_GossipingOneMessage"" test has been disabled in patch: https://gerrit.hyperledger.org/r/#/c/2575 but we observed this test still running and failing with timeout.",,,,,,,,,,,,,,,,,,,,,,,
end-to-end.js fails due to key size mismatch with member service,FAB-1148,13481,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jimthematrix,jimthematrix,18/Nov/16 7:20 PM,20/Nov/16 11:15 PM,26/Apr/18 6:50 AM,20/Nov/16 11:15 PM,,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"this wasn't caught earlier because when running ""gulp test"" the key size was set to the right level (256) from an earlier test suite.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jm1:,,Sprint 5 - nodeSDK,,,,,,jimthematrix,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"Peer ""cant find snapshot-xxxxx"" while deploying chaincode",FAB-1145,13477,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,greg.haskins,pmullaney,pmullaney,18/Nov/16 2:22 AM,02/Dec/16 2:18 PM,26/Apr/18 6:50 AM,02/Dec/16 2:18 PM,,,,,,,,,,fabric-devenv,,,,0,,,,,,,,,"Peer returns the following error at times while deploying chaincode:

""vp1_1     | 01:41:42.880 [peer] beforePeers -> DEBU 8c3 Received PeersMessage with Peers: peers:<ID:<name:""vp1"" > address:""172.17.0.4:7051"" type:VALIDATOR > 
vp0_1     | 01:41:43.117 [dockercontroller] deployImage -> ERRO b15 Error building images: Tag x86_64-0.7.0-snapshot-8c2064e not found in repository docker.io/hyperledger/fabric-ccenv
vp0_1     | 01:41:43.117 [dockercontroller] deployImage -> ERRO b16 Image Output:
""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jl5:,,,,,,,,greg.haskins,pmullaney,,,,,,,,,master,,,true,02/Dec/16 2:18 PM;greg.haskins;Fixed with CR 2895: https://gerrit.hyperledger.org/r/#/c/2895/,,,,,,,,,,,,,,,,,,,,,,,
endorser-tests.js needs to print out error response,FAB-1143,13475,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,17/Nov/16 10:00 PM,06/Dec/16 2:21 PM,26/Apr/18 6:50 AM,20/Nov/16 11:15 PM,,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"it tried to print out ""status"" which is an invalid variable",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jkp:,,Sprint 5 - nodeSDK,,,,,,jimthematrix,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
ca-tests.js failed in the last step,FAB-1137,13469,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jimthematrix,jimthematrix,17/Nov/16 5:04 AM,20/Nov/16 11:15 PM,26/Apr/18 6:50 AM,20/Nov/16 11:15 PM,,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"not ok 10 Error: admin should not be allowed to re-enroll

This is because the intention is to call MemberService backend to enroll a user that's already been enrolled, but the code called Chain.enroll() which can succeed as long as the enrollment is loaded successfully from kvs",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jjl:,,Sprint 5 - nodeSDK,,,,,,jimthematrix,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
vi is not available in the peer image for v1.0,FAB-1136,13468,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,greg.haskins,bmos299,bmos299,16/Nov/16 5:13 PM,06/Jan/17 3:08 PM,26/Apr/18 6:50 AM,06/Jan/17 3:08 PM,v1.0.0,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"I built the images via the make images.  I then deploy a container and get into the container with docker exec -it name /bin/bash.   I then try to vi the core.yaml file and receive:
bash: vi: command not found.

Do we need small editor in the image?

Barry",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jjd:,,,,,,,,bmos299,greg.haskins,,,,,,,,,,,,,"06/Jan/17 3:08 PM;greg.haskins;This was fixed, inadvertently I should add, by https://github.com/hyperledger/fabric/commit/b61723f9ddcc91cafd4f3a8c3634bd8d32388b32

vi seems to be included with busybox, so we have it now.",,,,,,,,,,,,,,,,,,,,,,,
sbft needs to retransmit view change message on reconnect,FAB-1131,13463,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,corecode,corecode,16/Nov/16 11:47 AM,17/Nov/16 1:28 PM,26/Apr/18 6:50 AM,17/Nov/16 9:09 AM,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jih:,,,,,,,,corecode,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
sbft orderer must not block when sending a message to a peer,FAB-1097,13428,Bug,Invalid,FAB,Fabric,software,ChristopherFerris,,,Medium,,,corecode,corecode,14/Nov/16 1:21 PM,05/Apr/18 5:14 PM,26/Apr/18 6:50 AM,,,,,,,,Future,,,fabric-orderer,,,,0,bft,,,,,,,,"Currently the sbft orderer backend will block if the channel to a peer is full.  This can be exploited by a byzantine network or byzantine peers.

The backend should disconnect the peer when its channel fills up.  The channel capacity needs to be selected so that this happens only under adverse conditions and not during normal operation.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00jax:,,,,,,,,ChristopherFerris,corecode,vukolic,,,,,,,,,,,,05/Apr/18 5:14 PM;ChristopherFerris;no longer valid,,,,,,,,,,,,,,,,,,,,,,,
Hyperledger CI fails to complete goimports verification due to recent SBFT changes.,FAB-1056,13387,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,C0rWin,C0rWin,C0rWin,09/Nov/16 7:54 PM,09/Nov/16 8:37 PM,26/Apr/18 6:50 AM,09/Nov/16 8:37 PM,,,,,,,,,,,,,,0,,,,,,,,,"While running verification on CI for my recent CR: https://gerrit.hyperledger.org/r/#/c/2369/ it appears to fail due to: 
{code}
19:16:25 orderer/sample_clients/single_tx_client/single_tx_client.go orderer/sbft/backend/backend.go orderer/sbft/backend/events.go orderer/sbft/main.go
19:16:25 The goimports command must be run for these files
19:16:25 make: *** [linter] Error 1
{code}

While CR has nothing to do with these files.
These files need to be reformatted to enable CR verification path. 

PS. Same problem appears here: https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2577/console",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00j2p:,,,,,,,,C0rWin,,,,,,,,,,master,,,true,09/Nov/16 7:59 PM;C0rWin;https://gerrit.hyperledger.org/r/#/c/2375/,,,,,,,,,,,,,,,,,,,,,,,
peer container is exiting after executing docker-compose,FAB-1037,13368,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,rameshthoomu,rameshthoomu,08/Nov/16 6:09 PM,08/Feb/17 4:08 PM,26/Apr/18 6:50 AM,08/Feb/17 3:10 PM,,,,,,,,,,fabric-sdk-node,,,,1,node-SDK,,,,,,,,"Followed the instructions mentioned in fabric/sdk-node README document, observed peer container is exiting after executing docker-compose.yml file.

Branch: fabric/master
Commit# 216ae65 (gossip discovery tests improvements)

Working as expected on this commit # 0edd927

Log file:

17:28:04.235 [nodeCmd] serve -> CRIT 0bc Failed creating new peer with handler Security helper not provided
vagrant@ubuntu-1404:~$ docker ps
CONTAINER ID        IMAGE                           COMMAND             CREATED             STATUS              PORTS                    NAMES
cd586fad9d51        hyperledger/fabric-membersrvc   ""membersrvc""        36 seconds ago      Up 36 seconds       0.0.0.0:7054->7054/tcp   fabric_membersrvc_1
a1bf25c275de        hyperledger/fabric-orderer      ""orderer""           37 seconds ago      Up 36 seconds       0.0.0.0:5151->5005/tcp   fabric_orderer_1
vagrant@ubuntu-1404:~$ docker ps -a
CONTAINER ID        IMAGE                           COMMAND                  CREATED             STATUS                      PORTS                    NAMES
d635b29e76fb        hyperledger/fabric-peer         ""sh -c 'sleep 10; pee""   39 seconds ago      Exited (1) 27 seconds ago                            fabric_vp0_1
cd586fad9d51        hyperledger/fabric-membersrvc   ""membersrvc""             39 seconds ago      Up 38 seconds               0.0.0.0:7054->7054/tcp   fabric_membersrvc_1
a1bf25c275de        hyperledger/fabric-orderer      ""orderer""                40 seconds ago      Up 38 seconds               0.0.0.0:5151->5005/tcp   fabric_orderer_1

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00iyx:,,,,,,,,jimthematrix,rameshthoomu,vdods,,,,,,,,,,,,17/Nov/16 11:21 PM;vdods;Is there any word on this?,08/Feb/17 3:11 PM;jimthematrix;[~rameshthoomu] [~vdods] if you still can reproduce this please re-open,08/Feb/17 4:08 PM;rameshthoomu;Issue is fixed and not seeing this on latest commits.,,,,,,,,,,,,,,,,,,,,,
NodeSDK docker-compose issue : there should be some delay before starting peer,FAB-1028,13359,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,Ratnakar,Ratnakar,08/Nov/16 4:12 AM,08/Feb/17 3:13 PM,26/Apr/18 6:50 AM,08/Feb/17 3:12 PM,,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"peer is crashing when used docker compose file provided herehere https://raw.githubusercontent.com/hyperledger/fabric-sdk-node/master/test/fixtures/docker-compose.yml.

seems memberservice is not started and peer is getting starter even before causes this issue
Gist of logs


{code}
vp0_1        | 04:02:35.190 [crypto] Errorf -> ERRO 01e [validator.test_vp0] Failed requesting read certificate [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure].
vp0_1        | 04:02:35.190 [crypto] Errorf -> ERRO 01f [validator.test_vp0] Failed requesting ECA certificate [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure].
vp0_1        | 2016/11/08 04:02:35 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = ""transport: dial tcp 172.17.0.3:7054: getsockopt: connection refused""; Reconnecting to {""membersrvc:7054"" <nil>}
vp0_1        | 2016/11/08 04:02:35 Failed to dial membersrvc:7054: grpc: the connection is closing; please retry.
vp0_1        | 04:02:35.190 [crypto] Errorf -> ERRO 020 [validator.test_vp0] Failed getting ECA certificate [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure].
vp0_1        | 04:02:35.191 [crypto] Errorf -> ERRO 021 [validator.test_vp0] Failed retrieving ECA certs chain [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure].
vp0_1        | 04:02:35.191 [crypto] Errorf -> ERRO 022 [validator.test_vp0] Failed registering node crypto engine [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure].
vp0_1        | 04:02:35.191 [crypto] Errorf -> ERRO 023 [validator.test_vp0] Failed registering peer [test_vp0]: [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure]
vp0_1        | 04:02:35.191 [crypto] Errorf -> ERRO 024 [validator.test_vp0] Failed registering [test_vp0]: [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure]
vp0_1        | 04:02:35.191 [crypto] RegisterValidator -> ERRO 025 Failed registering validator [test_vp0] with name [test_vp0] [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure].
vp0_1        | Error: rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure

{code}

Complete logs attached.

Introducing a delay before launching the peer resolves the issue.

{panel}

  *command: sh -c ""sleep 10; peer node start""*

{panel}

Please refer the attached docker-compose file",,,,,,,,,,,,,,,,,,,,08/Nov/16 4:08 AM;Ratnakar;docker-compose-issue.txt;https://jira.hyperledger.org/secure/attachment/10222/docker-compose-issue.txt,08/Nov/16 4:11 AM;Ratnakar;docker-compose.yml;https://jira.hyperledger.org/secure/attachment/10221/docker-compose.yml,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ix5:,,,,,,,,jimthematrix,Ratnakar,,,,,,,,,,,,,08/Feb/17 3:13 PM;jimthematrix;[~Ratnakar] currently using `depends-on` but if the problem can still be observed please re-open,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK doc issue : wrong keyValStore folder is referred in README,FAB-1027,13358,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,Ratnakar,Ratnakar,08/Nov/16 1:25 AM,08/Mar/17 4:49 AM,26/Apr/18 6:50 AM,08/Mar/17 4:49 AM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"As per the README (https://github.com/hyperledger/fabric-sdk-node#build-and-test) Doc it says to delete the keyValStore folder

{code:java}
Clear out your previous keyvalue store if needed (rm -fr /tmp/KeyValStore*)
{code}

However in the code test/util/utils.js it is hard coded with a different folder

{code:java}

module.exports.KVS = '/tmp/hfc-test-kvs';
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00iwx:,,,,,,,,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK doc issue : node and npm versions should be corrected,FAB-1026,13357,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,Ratnakar,Ratnakar,08/Nov/16 1:10 AM,08/Feb/17 3:13 PM,26/Apr/18 6:50 AM,08/Feb/17 3:13 PM,,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"Node and npm versions mentioned in the *README* under *build-and-test* (https://github.com/hyperledger/fabric-sdk-node#build-and-test) are wrong. It should be corrected as per the package.json , else tests are failing.

{code:java}
 ""node"": "">=6.7.0"",
 ""npm"": "">=3.0.0""
{code}

Logs for reference.

It is good to have *Troubleshoot section* :
In some cases the npm installed using apt-get could be an older version than what is required and normally installed along with Node. To resolve this version compatibility issue,
Download and extarct the nodejs tar from here https://nodejs.org/dist/v6.9.1 and set *bin* to your PATH
",,,,,,,,,,,,,,,,,,,,08/Nov/16 1:08 AM;Ratnakar;unit-tests-failure.txt;https://jira.hyperledger.org/secure/attachment/10220/unit-tests-failure.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00iwp:,,,,,,,,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
gopath and goroot errors while executing make cop in fabric-cop repository,FAB-1014,13345,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,smithbk,rameshthoomu,rameshthoomu,07/Nov/16 6:12 PM,07/Nov/16 6:54 PM,26/Apr/18 6:50 AM,07/Nov/16 6:47 PM,,,,,,,,,,,,,,0,,,,,,,,,"I have followed the cop readme documentation and executed `make cop`. Observed below error from fabric-cop repository.

vagrant@hyperledger-devenv:v0.1.0-8e94f33:/opt/gopath/src/github.com/hyperledger/fabric/fabric-cop$ make
Checking go files for license headers ...
All go files have license headers
Building cop in bin directory ...
cop.go:43:2: cannot find package ""github.com/hyperledger/fabric-cop/cli/cop/client/enroll"" in any of:
        /opt/gopath/src/github.com/hyperledger/fabric/fabric-cop/vendor/github.com/hyperledger/fabric-cop/cli/cop/client/enroll (vendor tree)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-cop/cli/cop/client/enroll
        /opt/go/src/github.com/hyperledger/fabric-cop/cli/cop/client/enroll (from $GOROOT)
        /opt/gopath/src/github.com/hyperledger/fabric-cop/cli/cop/client/enroll (from $GOPATH)
cop.go:44:2: cannot find package ""github.com/hyperledger/fabric-cop/cli/cop/client/register"" in any of:
        /opt/gopath/src/github.com/hyperledger/fabric/fabric-cop/vendor/github.com/hyperledger/fabric-cop/cli/cop/client/register (vendor tree)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-cop/cli/cop/client/register
        /opt/go/src/github.com/hyperledger/fabric-cop/cli/cop/client/register (from $GOROOT)
        /opt/gopath/src/github.com/hyperledger/fabric-cop/cli/cop/client/register (from $GOPATH)
cop.go:45:2: cannot find package ""github.com/hyperledger/fabric-cop/cli/cop/server"" in any of:
        /opt/gopath/src/github.com/hyperledger/fabric/fabric-cop/vendor/github.com/hyperledger/fabric-cop/cli/cop/server (vendor tree)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-cop/cli/cop/server
        /opt/go/src/github.com/hyperledger/fabric-cop/cli/cop/server (from $GOROOT)
        /opt/gopath/src/github.com/hyperledger/fabric-cop/cli/cop/server (from $GOPATH)
cop.go:46:2: cannot find package ""github.com/hyperledger/fabric-cop/cli/cop/server/tcert"" in any of:
        /opt/gopath/src/github.com/hyperledger/fabric/fabric-cop/vendor/github.com/hyperledger/fabric-cop/cli/cop/server/tcert (vendor tree)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-cop/cli/cop/server/tcert
        /opt/go/src/github.com/hyperledger/fabric-cop/cli/cop/server/tcert (from $GOROOT)
        /opt/gopath/src/github.com/hyperledger/fabric-cop/cli/cop/server/tcert (from $GOPATH)
make: *** [cop] Error 1",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00iuh:,,,,,,,,mastersingh24,rameshthoomu,,,,,,,,,,,,,07/Nov/16 6:38 PM;mastersingh24;I think this assumes you already have GOPATH and GOROOT set and that the code has been cloned properly into GOPATH/src.  {{make}} and {{make cop}} both seem to work for me,"07/Nov/16 6:54 PM;rameshthoomu;[~keithsmith] fabric-cop repository should be in hyperledger directory. I have cloned this in fabric directory and observed the mentioned error. So, we have to clone fabric-cop in hyperledger directory. Closing this issue",,,,,,,,,,,,,,,,,,,,,,
pbft will drop tx messages when tx load is high,FAB-990,13321,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,frankylu,frankylu,06/Nov/16 5:55 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,12/Apr/17 3:32 AM,,,,,,,v0.6,WON'T FIX,,fabric-orderer,,,,0,,,,,,,,,"Some tx messages will get dropped when tx load is high and CPU resources are fully occupied. the result is serious since you don't get noticed that your message was never processed.

this is because broadcaster queue is too small (currently hard coded to 10), should be a quick and easy fix though, ideally should be a config param.

func newBroadcaster(self uint64, N int, f int, broadcastTimeout time.Duration, c communicator) *broadcaster {
	queueSize := *{color:red}10{color}* // XXX increase after testing


I also wonder if it is better to just block the thread instead of discarding messages when channel is full

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00iq1:,,,,,,,,denyeart,frankylu,jyellick,,,,,,,,,,,,"07/Nov/16 10:00 PM;jyellick;The queue size is intended to be configurable, and ultimately, we will coalesce the broadcast server paths to share this sort of configuration.

I do not however agree that we should turn this into a blocking all.  Making this a blocking call simply pushes the buffering into gRPC, so the gRPC must maintain a queue, and then block or fail.  By specifying the queue size in the application, the client can appropriately implement flow control.

If the client knows the queue size is set to 10 for instance, it can make sure that it sends only 10 requests, then sends only one request per ack it receives.  In this way, the client throttles itself to keep from overloading the server, dependent on the server's load.","08/Nov/16 5:33 AM;frankylu;[~jyellick] I hope this will be done for v0.6, which is enough for a lot of people, otherwise the problem this causes is actually pretty serious. for financial records, randomly dropping txs can be as bad as crushing the server ","08/Nov/16 2:09 PM;jyellick;Ah, I had assumed that this was v1 code, sorry for not following.

In general, the idea behind the broadcaster stuff in 0.5/0.6 is that if a peer stops acknowledging messages, the gRPC queue can back up and the sender ultimately blocks on the attempted send, which prevents his thread from doing any work.  We must drop in this case, because otherwise, one bad node can prevent all the other nodes from getting any work done.  But, the queue size could definitely be larger, and configurable.  If you can confirm this is causing problems for you in 0.6, let me know, and I will put a patch together.","20/Nov/16 3:10 AM;frankylu;yah, it would be good to add a fix to FAB990, for the time being just increase the hard coded queue size (i.e. 500) would solve the problem for most people, if adding to config is too troublesome ",11/Apr/17 9:03 PM;denyeart;[~kchristidis]If there is no intent to enhance 0.6 please close.,,,,,,,,,,,,,,,,,,,
start new view timer only after receiving a quorum of view change messages,FAB-967,13298,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,corecode,corecode,corecode,04/Nov/16 3:38 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,16/Nov/16 11:24 AM,,,,,,,,,,fabric-orderer,,,,0,consensus,,,,,,,,"Right now we start the new view timer as soon as we send our own view change message.  Per PBFT, we should only start the new view timer once we have received a quorum of view change messages.  Related to that, we probably should resend our most recent view change message on Connection, if we are still in view change.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-378,0|i00imh:,,,,,,,,corecode,vukolic,,,,,,,,,,,,,16/Nov/16 8:58 AM;corecode;Turns out this uncovered a set of new view processing issues that need to be addressed first.,16/Nov/16 11:20 AM;corecode;Addressed in https://gerrit.hyperledger.org/r/#/c/2511,,,,,,,,,,,,,,,,,,,,,,
Hyperledger Fabric deployment (net mode) issue,FAB-951,13282,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,dipankar1biswas,dipankar1biswas,03/Nov/16 6:24 PM,11/Apr/17 9:00 PM,26/Apr/18 6:50 AM,11/Apr/17 9:00 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"I am trying to create a network environment with 3 peers running in different physical system with the following commands.
1) docker run --rm -it --network host -e CORE_VM_ENDPOINT=http://100.200.250.68:2375 -e CORE_LOGGING_LEVEL=DEBUG -e CORE_PEER_ID=vp1 -e CORE_PEER_ADDRESSAUTODETECT=true hyperledger/fabric-peer peer node start
2) docker run --rm -it -e CORE_VM_ENDPOINT=http://100.200.250.69:2375 -e CORE_PEER_ID=vp2 -e CORE_PEER_ADDRESSAUTODETECT=true -e CORE_PEER_DISCOVERY_ROOTNODE=100.200.250.68:7051 hyperledger/fabric-peer peer node start
3) docker run --rm -it -e CORE_VM_ENDPOINT=http://100.200.250.67:2375 -e CORE_PEER_ID=vp3 -e CORE_PEER_ADDRESSAUTODETECT=true -e CORE_PEER_DISCOVERY_ROOTNODE=100.200.250.68:7051 hyperledger/fabric-peer peer node start
 
Here I could see all the peers available in the environment using REST API '/network/peers'.
Next I executed the Deploy using REST API '/chaincode', which returns the success message also.
But when I execute the Query command, it is returning the error code '32003' with following message.
'LedgerError - ResourceNotFound: ledger: resource not found'
 
Deploy Request message:
{""jsonrpc"":""2.0"", ""method"":""deploy"", ""params"":{""type"":1, ""chaincodeID"":{""path"":""github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02""}, ""ctorMsg"": {""function"":""init"", ""args"":[""a"", ""150"", ""b"", ""250""]}},""id"":""1"" }'
 
Query Request message:
{""jsonrpc"": ""2.0"",""method"": ""query"",""params"": {""type"": 1,""chaincodeID"":{""name"":""1cad6f2cacf3fa17a794853c44f5b58eddaf2715d71c41298a99f9d812e014df9c64cab7fe9a84b5946c067c9ac76145d96df6f7aafa458a2d176d1fddb3c7a3""},""ctorMsg"": {""function"":""query"",""args"":[""a""]}},""id"": ""1""}

Please guide me to implement
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ij5:,,,,,,,,denyeart,dipankar1biswas,mastersingh24,,,,,,,,,,,,05/Nov/16 11:03 AM;mastersingh24;it's likely that your chaincode never actually deployed.  Can you post any logs?,11/Apr/17 9:00 PM;denyeart;This looks like a question rather than a bug.  Please use rocket.chat #fabric-questions.,,,,,,,,,,,,,,,,,,,,,,
protoc-gen-go is not appropriately regenerated,FAB-947,13278,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,jyellick,jyellick,03/Nov/16 3:27 PM,11/May/17 10:00 PM,26/Apr/18 6:50 AM,11/May/17 9:59 PM,v1.0.0-alpha1,,,,,,DUPLICATE,,,fabric-build,,,,0,help-wanted,,,,,,,,"When protobuf is upgraded to a new level (say v3.0.0 to v3.1.0) protoc-gen-go will produce incorrect and unreliable output until it is rebuilt.

{{make protos}} will automatically generate protoc-gen-go if it is missing, but if it is back-leveled, then no update will be made, and the resulting proto output will be subtly invalid.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00iih:,,,,,,,,ChristopherFerris,jyellick,,,,,,,,,,,,,"13/Apr/17 11:17 PM;ChristopherFerris;is this still an issue [~jyellick]?
",11/May/17 10:00 PM;ChristopherFerris;already fixed,,,,,,,,,,,,,,,,,,,,,,
PreviousHash of one block does not match the StateHash of it's previous block literally,FAB-940,13271,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,azaleta,azaleta,03/Nov/16 1:51 PM,11/Apr/17 8:56 PM,26/Apr/18 6:50 AM,11/Apr/17 8:56 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"the enviroment is fabric( v0.6) with single peer node , get block infomation from rest service (7050)
PreviousHash of one block does not match the StateHash of it's previous block literally
for example:
block 3 has a previousBlockHash ""LONqFDCzSBbAJWXejefpJnR70rmGaQtnms3yvIBTfyMzZyWDBZ4p6cBR+UVMUDp8EhmmTYMKYYjMupXjI9+Yzw==""

while block 2 has a stateHash ""u9Oc98t4jNniDSF5j+6K+V1UW/wD8dr709kwSU8DxlGrfZljwWa0g0HAa5cvyRiqjCkaxnu5FfcxzYShvEXKpg==""

Does it make sense ?

Another problem is that the block 1 does not have stateHash field.
It does not make any sense either.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00igx:,,,,,,,,azaleta,mastersingh24,,,,,,,,,,,,,"05/Nov/16 11:10 AM;mastersingh24;block hash and state hash are not the same thing.  the statehash is actually including in the blockhash - so previousBlockHash is actually the hash of the previous block including the stateHash of that block.

Not sure which block you were not seeing the stateHash for, but if it was block 0, that's the genesis block",,,,,,,,,,,,,,,,,,,,,,,
Gossip tests fixes,FAB-936,13267,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,03/Nov/16 12:01 PM,03/Nov/16 12:01 PM,26/Apr/18 6:50 AM,03/Nov/16 12:01 PM,,,,,,,,,,,,,,0,,,,,,,,,"* Had a bug in the gossip tests that made them fail on Mac computers due to different order of stack trace of the testing packages. 
* Also made the gossip and discovery tests faster by making the sleeps there sleep only until the next phase is ready instead of sleeping the whole time anyway. 
https://gerrit.hyperledger.org/r/#/c/2167/
2800ab9871adb9c83abe4d0a18239179cb44925e

* Also relaxes some timeouts of the tests because a developer complained they fail on his PC.
https://gerrit.hyperledger.org/r/#/c/2137/
5bf0eb18ec017a80852f6c7fd42821e5e3c68eb9

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00ig1:,,Sprint 4 - Gossip,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Error reading CORE_PBFT plugin config: Unsupported Config Type """"",FAB-935,13266,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,warm3snow,warm3snow,03/Nov/16 8:54 AM,01/Apr/17 9:32 AM,26/Apr/18 6:50 AM,01/Apr/17 9:32 AM,,,,,,,v0.6,,,fabric-peer,,,,0,,,,,,,,,"When I deploy chaincode, I got the below error
```
panic: Error reading CORE_PBFT plugin config: Unsupported Config Type """"

goroutine 1 [running]:
panic(0xd7d400, 0xc8201b2c40)
        /usr/lib/go-1.6/src/runtime/panic.go:481 +0x3e6
github.com/hyperledger/fabric/consensus/pbft.loadConfig(0xc820160c30)
        /home/opt/gopath/src/github.com/hyperledger/fabric/consensus/pbft/pbft.go:86 +0x7dd
github.com/hyperledger/fabric/consensus/pbft.init.4()
        /home/opt/gopath/src/github.com/hyperledger/fabric/consensus/pbft/pbft.go:39 +0x18
github.com/hyperledger/fabric/consensus/pbft.init()
        /home/opt/gopath/src/github.com/hyperledger/fabric/consensus/pbft/viewchange.go:668 +0xb2
github.com/hyperledger/fabric/consensus/controller.init()
        /home/opt/gopath/src/github.com/hyperledger/fabric/consensus/controller/controller.go:48 +0x54
github.com/hyperledger/fabric/consensus/helper.init()
        /home/opt/gopath/src/github.com/hyperledger/fabric/consensus/helper/helper.go:388 +0x58
github.com/hyperledger/fabric/peer/node.init()
        /home/opt/gopath/src/github.com/hyperledger/fabric/peer/node/stop.go:117 +0x83
main.init()
        /home/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:158 +0x8d
```",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ift:,,,,,,,,mastersingh24,warm3snow,zhenbin,,,,,,,,,,,,"05/Nov/16 11:27 AM;mastersingh24;not sure how you are running your peer(s), but looks like it cannot find the pbft config files","29/Nov/16 11:54 AM;zhenbin;hi, I met the same problem, but i solved it. In my case, i pull the hyperledger/fabric-peer docker image v0.6. but i didn't update the hyperledger source code(still maste version). when i update the source code to v0.6, the error has gone. I hope it's useful.",,,,,,,,,,,,,,,,,,,,,,
Update static bootstrapper to new block format ,FAB-933,13264,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,kchristidis,kchristidis,02/Nov/16 11:49 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,15/Nov/16 1:23 PM,,,,,,,,,,fabric-orderer,,,,0,consensus,,,,,,,,Also add tests.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzs1:i,,Sprint 4 - Consensus,Sprint 5 - Consensus,,,,,kchristidis,,,,,,,,,,,,,,"02/Nov/16 11:50 PM;kchristidis;New block: https://gerrit.hyperledger.org/r/2177
Tests: https://gerrit.hyperledger.org/r/2179",11/Nov/16 8:16 AM;kchristidis;Updated to match the latest proto changes (https://gerrit.hyperledger.org/r/#/c/2177/).,,,,,,,,,,,,,,,,,,,,,,
Make it easy to use the SDK to implement a REST API,FAB-930,13261,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jimthematrix,jimthematrix,02/Nov/16 3:47 PM,13/Dec/16 4:51 PM,26/Apr/18 6:50 AM,13/Dec/16 4:50 PM,,,,,,,,,,,,,,0,,,,,,,,,"The REST APIs have been removed form the Peers. The main reason is that the Peer (where the REST APIs were hosted) was really not in the ideal position to be performing the tasks, namely deploy, transaction invoke or query, because all of these requests must be done under an enrolled user identity.

a Peer’s role should be a stateless transaction processing engine

it shouldn’t be required to maintain an arbitrary number of user identities

that should be separated out to the application layer

node.js SDK should make it really simple to write a web application that hosts REST APIs for chaincode deploy, transaction invocation and queries.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzznv:,,,,,,,,jimthematrix,,,,,,,,,,,,,,13/Dec/16 4:51 PM;jimthematrix;This work is superseded by FAB-156,,,,,,,,,,,,,,,,,,,,,,,
Update README with instructions to setup v1.0 network with the latest fabric code,FAB-927,13258,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,02/Nov/16 2:26 AM,03/Nov/16 9:01 PM,26/Apr/18 6:50 AM,03/Nov/16 9:01 PM,,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"- add docker-compose content
- add steps to map ports in vagrant",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ie1:,,Sprint 4 - nodeSDK,,,,,,jimthematrix,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Headless-tests.js does not finish due to grpc client not returning,FAB-926,13257,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,02/Nov/16 2:04 AM,03/Nov/16 9:00 PM,26/Apr/18 6:50 AM,03/Nov/16 9:00 PM,,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"there's a call to Peer.sendProposal() in this test suite that's meant to test for error condition, but the grpc client call does not thrown an error, causing the promise to never resolve or reject. as a result the test never completes.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00idt:,,Sprint 4 - nodeSDK,,,,,,jimthematrix,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Change orderer listening port,FAB-923,13254,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,tuand,jimthematrix,jimthematrix,01/Nov/16 3:35 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,23/Nov/16 7:35 AM,,,,,,,,,,fabric-orderer,,,,1,consensus,,,,,,,,"i noticed that orderer.yaml defaults the listening port to `5151`, but the docker-compose overrides it to `5005`, is there a reason for this? why not decide on one of them and go with it everywhere? from SDK point of view we’d like to decide on which one to use for the test cases. right now our tests are set up with docker-compose so it makes sense to use 5005. but having 5151 as default can break contributors who fire up SOLO orderer as native process.

discussed with Jason/Kostas/Chris on slack, should pick 5151 as it's not likely going to conflict with existing services.",,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzza:6wqom,,Sprint 5 - Consensus,Sprint 6 - consensus,,,,,jimthematrix,kchristidis,rickr,,,,,,,,master,,,true,"01/Nov/16 3:38 PM;kchristidis;Update: 7050 seems to be the right pick, as we're working with the 7050-7060 range.

https://github.com/hyperledger-archives/fabric/pull/2286",21/Nov/16 6:14 PM;kchristidis;In review: https://gerrit.hyperledger.org/r/#/c/2687/,,,,,,,,,,,,,,,,,,,,,,
Gossip layer implementation,FAB-922,13253,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,01/Nov/16 3:30 PM,06/Dec/16 9:25 PM,26/Apr/18 6:50 AM,01/Nov/16 3:30 PM,,,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,,"Code the implementation of the gossip layer itself, that connects between the comm layer and the various gossip data structs (pull, forwarding, discovery)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00icx:,,Sprint 4 - Gossip,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Failure during 'make all': recipe for target 'linter' failed,FAB-920,13251,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jyellick,angelo.decaro,angelo.decaro,01/Nov/16 1:52 PM,09/Nov/16 9:34 PM,26/Apr/18 6:50 AM,09/Nov/16 9:34 PM,,,,,,,,,,,,,,0,,,,,,,,,"I have cloned the current master and tried 'make all'.
This is the error: ""recipe for target 'linter' failed""

Here is the stacktrace:

go vet ./orderer/...
orderer/solo/broadcast.go:175: github.com/hyperledger/fabric/orderer/atomicbroadcast.BroadcastResponse composite literal uses unkeyed fields
orderer/solo/broadcast.go:177: github.com/hyperledger/fabric/orderer/atomicbroadcast.BroadcastResponse composite literal uses unkeyed fields
orderer/solo/broadcast.go:182: github.com/hyperledger/fabric/orderer/atomicbroadcast.BroadcastResponse composite literal uses unkeyed fields
orderer/solo/broadcast_test.go:211: github.com/hyperledger/fabric/orderer/atomicbroadcast.BroadcastMessage composite literal uses unkeyed fields
orderer/solo/broadcast_test.go:251: github.com/hyperledger/fabric/orderer/atomicbroadcast.BroadcastMessage composite literal uses unkeyed fields
orderer/solo/broadcast_test.go:252: github.com/hyperledger/fabric/orderer/atomicbroadcast.BroadcastMessage composite literal uses unkeyed fields
orderer/solo/broadcast_test.go:253: github.com/hyperledger/fabric/orderer/atomicbroadcast.BroadcastMessage composite literal uses unkeyed fields
orderer/solo/broadcast_test.go:254: github.com/hyperledger/fabric/orderer/atomicbroadcast.BroadcastMessage composite literal uses unkeyed fields
orderer/solo/broadcast_test.go:283: github.com/hyperledger/fabric/orderer/atomicbroadcast.BroadcastMessage composite literal uses unkeyed fields
orderer/solo/broadcast_test.go:284: github.com/hyperledger/fabric/orderer/atomicbroadcast.BroadcastMessage composite literal uses unkeyed fields
orderer/solo/broadcast_test.go:285: github.com/hyperledger/fabric/orderer/atomicbroadcast.BroadcastMessage composite literal uses unkeyed fields
orderer/solo/broadcast_test.go:314: github.com/hyperledger/fabric/orderer/atomicbroadcast.BroadcastMessage composite literal uses unkeyed fields
orderer/solo/broadcast_test.go:315: github.com/hyperledger/fabric/orderer/atomicbroadcast.BroadcastMessage composite literal uses unkeyed fields
orderer/solo/broadcast_test.go:316: github.com/hyperledger/fabric/orderer/atomicbroadcast.BroadcastMessage composite literal uses unkeyed fields
exit status 1
Makefile:107: recipe for target 'linter' failed
make: *** [linter] Error 1",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ich:,,,,,,,,angelo.decaro,jyellick,mastersingh24,,,,,,,,,,,,05/Nov/16 11:16 AM;mastersingh24;I guess we don't run this test in CI?  The failure is easy to fix but wondering why it made it through CI in the first place,06/Nov/16 1:59 AM;jyellick;Fix incorporated into: https://gerrit.hyperledger.org/r/#/c/2257/,,,,,,,,,,,,,,,,,,,,,,
A minor bug with CA API--ReadCertificatePair(ECertReadReq) returns (CertPair);,FAB-919,13250,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,Hangyu_FJH,Hangyu_FJH,Hangyu_FJH,01/Nov/16 2:52 AM,08/Feb/17 12:26 PM,26/Apr/18 6:50 AM,08/Feb/17 6:12 AM,,,,,,,v0.6,,,fabric-membersrvc,,,,0,MembershipServices,,,,,,,,"When trying to read certificatepare using the API ReadCertificatePair, nothing can be pulled out from the database. The function ""ReadCertificatePair"" in fabric/membersrvc/ca/ecap.go indicates that only one columns-- ""cert"" should be returned, but instead, there are two columns-- ""cert, kdfkey"" being read out at function ""readCertificates"" of fabric/membersrvc/ca/ca.go. This results an error in the rows.Scan(&raw) which led to the results described in the beginning. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ic9:,,,,,,,,Hangyu_FJH,,,,,,,,,,v0.6,,,true,,,,,,,,,,,,,,,,,,,,,,,,
"Tx lost from all peers after stop vp1 vp2 vp3, deploy, restart vp1 vp2, invokes",FAB-912,13243,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,scottz,scottz,31/Oct/16 3:02 PM,29/Jun/17 12:47 PM,26/Apr/18 6:50 AM,07/Apr/17 8:06 PM,v0.6,,,,,,WON'T FIX,,,fabric-orderer,,,,0,0.6,,,,,,,,"Transactions that are sent to all active peers after restart and deployment are lost. 

Found in v0.6 testing. Similar to FAB-333 and FAB-335, but not same. This is similar to FAB-911, but here, vp0 is not one of the stopped peers, as was done in FAB-911.

Scenario:
CAT_409_S1S2S3_D_I_R1R2_IQ.go
Bring up a 4 peer network with security using example02.
Stop peers vp1 vp2 vp3.
100 Invokes to vp0.
Deploy new instance of chaincode, to vp0. a=b=10000
Wait over 5 minutes.
Start peers vp1 vp2.
Send 7 Invokes: 1 to vp0, 2 to vp1, 4 to vp2.Scenario:
Query, Request another 100 Invokes.
Those first 7 invokes sent to vp0,vp1,vp2 were lost.

We realize all transactions are not guaranteed to be processed, and observed the network peers did keep consensus, but some other scenarios do not exhibit the problem. In future we can enhance test case to check for event notification to confirm whether or not the fabric knew they were being dropped, but nevertheless it seems odd that the first groups of transactions were dropped, so long after the restarts happened.
",,,,,,,,,,,,,,,,FAB-334,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00iap:,,,,,,,,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Tx lost from vp0 after stop vp0 vp1 vp2, deploy, restart vp0 vp1, invokes",FAB-911,13242,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,scottz,scottz,31/Oct/16 2:05 PM,29/Jun/17 12:47 PM,26/Apr/18 6:50 AM,07/Apr/17 8:06 PM,,,,,,,WON'T FIX,,,fabric-orderer,,,,0,0.6,,,,,,,,"Transactions that are sent to vp0 are lost. Some other scenarios, and other peers, do not exhibit the problem.

Found in v0.6 testing. Similar to FAB-333 and FAB-335, but not same.

CAT_407_S0S1S2_D_I_R0R1_IQ.go
Scenario:
Bring up a 4 peer network with security using example02.
Stop peers vp0 vp1 vp2.
100 Invokes to vp3.
Deploy new instance of chaincode, to vp3. a=b=10000
Wait over 6 minutes.
Start peers vp0 vp1.
Invokes:  77 to vp0,  2 to vp1,  8 to vp3.
Query: 
EXPECTED A/B:      9813     10187.
ACTUALs:
Peer 0             9890     10110
Peer 1             9890     10110
Peer 3             9890     10110

Those 77 invokes sent to vp0 were lost.
In future we can enhance test case to check for event notification to confirm whether or not the fabric knew they were being dropped, but nevertheless it seems odd that only those that were sent to vp0 were dropped.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ilu:i,,,,,,,,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CI unit-tests fail in crypto with panic from github.com/spf13/viper,FAB-910,13241,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,adc,muralisr,muralisr,30/Oct/16 4:23 PM,11/Apr/17 8:55 PM,26/Apr/18 6:50 AM,11/Apr/17 8:55 PM,,,,,,,,,,fabric-crypto,,,,0,,,,,,,,,"
{code:java}
11:48:22 Cleanup...done!
11:48:22 === End tests for scenario 'Using SHA2-256'  ===
11:48:22 === Start tests for scenario 'Using SHA2-384' ===
11:48:22 11:48:22.094 [ca] NewCA -> INFO 257[0m Fresh start; creating databases, key pairs, and certificates.
11:48:22 fatal error: concurrent map read and map write
11:48:22 
11:48:22 goroutine 9085 [running]:
11:48:22 runtime.throw(0xd3a460, 0x21)
11:48:22 	/opt/go/go1.6.linux.amd64/src/runtime/panic.go:530 +0x90 fp=0xc82097ba98 sp=0xc82097ba80
11:48:22 runtime.mapaccess2_faststr(0xa66980, 0xc820010f60, 0xd10870, 0x14, 0x12b5ac0, 0xd10800)
11:48:22 	/opt/go/go1.6.linux.amd64/src/runtime/hashmap_fast.go:307 +0x5b fp=0xc82097baf8 sp=0xc82097ba98
11:48:22 github.com/hyperledger/fabric/vendor/github.com/spf13/viper.(*Viper).find(0xc8200e4000, 0xd10870, 0x14, 0x0, 0x0)
11:48:22 	/w/workspace/fabric-verify-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/viper/viper.go:628 +0x3f0 fp=0xc82097bc60 sp=0xc82097baf8

{code}

unit-test fails in crypto with that panic from viper and sometimes takes severy reverify's to pass. For example https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2160/console.

Will be good to address this for quicker changeset turnaround.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ia9:,,,,,,,,angelo.decaro,ashutosh_kumar,denyeart,muralisr,smithbk,,,,,,,,,,"31/Oct/16 1:58 PM;ashutosh_kumar;[~muralisr] , which branch this code is in ? Can you provide steps to recreate the problem ? ",31/Oct/16 2:47 PM;smithbk;Assigning to Angelo as it is in crypto test,31/Oct/16 3:45 PM;angelo.decaro;This error comes from github.com/hyperledger/fabric/core/crypto.startPKI(). Who is in charge of the membership services should take care of this.,"02/Nov/16 7:34 AM;angelo.decaro;So, anyway, I have tried to replicate the scenario but nothing I don't see the error happening :(","11/Apr/17 8:55 PM;denyeart;Have not seen recently, closing...",,,,,,,,,,,,,,,,,,,
"Inconsistent ""cryto_test.go"" unit test case failure in Jenkins CI",FAB-909,13240,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,adc,rameshthoomu,rameshthoomu,30/Oct/16 2:59 PM,14/Feb/17 3:57 AM,26/Apr/18 6:50 AM,14/Feb/17 3:57 AM,,,,,,,,,,fabric-quality,,,,0,build-system,quality,,,,,,,"Inconsistent unit-test case failure in Jenkins environment. Below is the error description and Jenkins console output.

Commit# b4473da
Branch: Master
Repository: Fabric

18:27:26 --- FAIL: TestParallelInitClose (0.00s)
18:27:26 	crypto_test.go:172: Failed registerting userthread.
18:27:26 2016/10/29 18:27:21 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = ""transport: dial tcp 127.0.0.1:50541: getsockopt: connection refused""; Reconnecting to {""localhost:50541"" <nil>}
18:27:26 2016/10/29 18:27:21 Failed to dial localhost:50541: grpc: the connection is closing; please retry.
18:27:26 open socket...done

https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-x86_64/292/",Jenkins CI Environment,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ia1:,,,,,,,,angelo.decaro,rameshthoomu,,,,,,,,,,,,,"31/Oct/16 3:16 PM;rameshthoomu;Above reported issues reproducing in Production origin/master merges. here is the latest build from Jenkins https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-x86_64/293/console

Similar ""cypto"" issue observed by Murali and the bug is tracked here: https://jira.hyperledger.org/browse/FAB-910. ","06/Dec/16 4:38 PM;angelo.decaro;Hi [~rameshthoomu], I'm not able to access the link you posted. I get HTTP ERROR 404. What's wrong?",06/Dec/16 4:40 PM;angelo.decaro;Are we talking about 0.6 or the current master?,14/Feb/17 3:57 AM;rameshthoomu;Issue is now fixed on latest commits.. Closing this issue,,,,,,,,,,,,,,,,,,,,
Ledger corrupt when start peer then stop peer without processing blocks,FAB-903,13234,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,manish-sethi,denyeart,denyeart,28/Oct/16 8:26 PM,06/Dec/16 1:46 PM,26/Apr/18 6:50 AM,02/Nov/16 8:28 PM,,,,,,,,,,fabric-ledger,,,,0,Ledger,,,,,,,,"I am running the end-to-end v1 trial with CLI (and RocksDB), see the attachment in Binh's forum email:
https://lists.hyperledger.org/pipermail/hyperledger-fabric/2016-October/000421.html

The attachment at the bottom is:
http://lists.hyperledger.org/pipermail/hyperledger-fabric/attachments/20161022/d3860afb/attachment.obj

When I deploy chaincode and invoke chaincode all is good.
I stop peer server with Ctrl-C.
I re-start peer with:
CORE_PEER_COMMITTER_LEDGER_ORDERER=0.0.0.0:5151 CORE_LOGGING_LEVEL=DEBUG peer node start

Everything works fine if I do at least one invoke.  If I do no invokes and stop the peer, the ledger appears to get corrupt.  I cannot start the peer again.  Upon peer start I get error in stdout:

...
20:14:38.596 [kvledger] indexBlock -> DEBU 0a1 Indexing block [blockNum=43, blockHash=[]byte{0xac, 0x4a, 0xe3, 0xd3, 0xf4, 0x99, 0xcc, 0xec, 0x74, 0x70, 0x51, 0x7a, 0xae, 0x88, 0xe3, 0xe2, 0x88, 0xe1, 0x9, 0x82, 0x89, 0xa9, 0xc8, 0xe7, 0x96, 0x52, 0x26, 0x60, 0xeb, 0xd5, 0x7a, 0x4e, 0xc2, 0x96, 0x2, 0xf3, 0xdf, 0xd2, 0x27, 0x53, 0xcc, 0xd3, 0x5f, 0xdb, 0xb2, 0x83, 0xa2, 0x66, 0x22, 0xc8, 0x8, 0x12, 0x5d, 0x4c, 0x94, 0x37, 0x4a, 0x4b, 0x60, 0xd1, 0xf6, 0x39, 0xf5, 0xd4}]
20:14:38.596 [kvledger] nextBlockBytesAndPlacementInfo -> DEBU 0a2 current file [0]
20:14:38.596 [kvledger] nextBlockBytesAndPlacementInfo -> DEBU 0a3 blockbytes [0]. Err:unexpected end of blockfile
20:14:38.596 [kvledger] retrieveSerBlockByNumber -> DEBU 0a4 retrieveSerBlockByNumber() - blockNum = [44]
panic: Could not retrieve last block form file: Entry not found in index

Full stdout for working scenarios and then broken scenario is attached.

Ledger in corrupt state from /var/hyperledger/production dir is too large to attach, find it here:
https://drive.google.com/file/d/0B-qNtwPcxZjPTGxEdS1CN3hsb3M/view?usp=sharing",,,,,,,,,,,,,,,,,,,,28/Oct/16 8:18 PM;denyeart;PeerDebug.rtf;https://jira.hyperledger.org/secure/attachment/10208/PeerDebug.rtf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-758,0|i00dzq:m6qi,,Sprint 4 -xxxxx,,,,,,denyeart,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
deploy endorsement for chaincode through GRPC is failing in behave,FAB-898,13229,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,latitiah,rameshthoomu,rameshthoomu,28/Oct/16 3:37 PM,11/Apr/17 7:06 PM,26/Apr/18 6:50 AM,11/Apr/17 7:06 PM,,,,,,,,,,fabric-endorser,,,,0,Endorser,,,,,,,,"Observed deploy endorsement for chaincode through GRPC is failing in behave. FAB-184

Environment: Jenkins
Commit# 1928035
Branch# fabric master

Attached is the log file: https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-behave-x86_64/113/testReport/junit/features.endorser/Endorser/Basic_deploy_endorsement_for_chaincode_through_GRPC_to_multiple_endorsers_____1_1_Orderer_Options/",Jenkins CI,,,,,,,,,,,,,,,FAB-1191,,,,28/Oct/16 3:32 PM;rameshthoomu;FAB-184.txt;https://jira.hyperledger.org/secure/attachment/10207/FAB-184.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhy:zz9xp,,,,,,,,C0rWin,denyeart,latitiah,muralisr,rameshthoomu,Ratnakar,tuand,,,,master,,,true,"30/Oct/16 4:01 PM;C0rWin;Experience similar problem, please see here: https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1055/console","31/Oct/16 4:34 PM;Ratnakar;Ran this behave scenario locally and observed issue in behave tests but not in core componnent

{code:java}

$behave -n ""Basic deploy endorsement for chaincode through GRPC to multiple endorsers

      Traceback (most recent call last):
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1456, in run
          match.run(runner.context)
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1903, in run
          self.func(context, *args, **kwargs)
        File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/peer_basic_impl.py"", line 677, in step_impl
          resp = requests.post(request_url, headers={'Content-type': 'application/json'}, data=json.dumps(secretMsg), verify=False)
        File ""/usr/local/lib/python2.7/dist-packages/requests/api.py"", line 94, in post
          return request('post', url, data=data, json=json, **kwargs)
        File ""/usr/local/lib/python2.7/dist-packages/requests/api.py"", line 49, in request
          return session.request(method=method, url=url, **kwargs)
        File ""/usr/local/lib/python2.7/dist-packages/requests/sessions.py"", line 443, in request
          prep = self.prepare_request(req)
        File ""/usr/local/lib/python2.7/dist-packages/requests/sessions.py"", line 374, in prepare_request
          hooks=merge_hooks(request.hooks, self.hooks),
        File ""/usr/local/lib/python2.7/dist-packages/requests/models.py"", line 304, in prepare
          self.prepare_url(url, params)
        File ""/usr/local/lib/python2.7/dist-packages/requests/models.py"", line 361, in prepare_url
          raise InvalidURL(""Invalid URL %r: No host supplied"" % url)
      InvalidURL: Invalid URL u'http://:7050/registrar': No host supplied
      
      Captured stdout:
      16:07:32 POSTing path = http://:7050/registrar


{code}


`InvalidURL: Invalid URL u'http://:7050/registrar': No host supplied`

Contructor  *ContainerData* is not intialized any where with the required IP from the docker containers which causes the above failure

Behave test has to be changed to resolve the above error",31/Oct/16 4:37 PM;latitiah;I've discussed this issue with Ratnakar and work on fixing this.,"01/Nov/16 6:36 PM;latitiah;Now, the error for this is:

{code:none}
And I register with CA supplying username ""binhn"" and secret ""7avZQLwcUe9q"" on peers                                                                                    # steps/peer_basic_impl.py:658 0.020s
      | vp0 |
      Traceback (most recent call last):
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1456, in run
          match.run(runner.context)
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1903, in run
          self.func(context, *args, **kwargs)
        File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/peer_basic_impl.py"", line 677, in step_impl
          resp = requests.post(request_url, headers={'Content-type': 'application/json'}, data=json.dumps(secretMsg), verify=False)
        File ""/usr/local/lib/python2.7/dist-packages/requests/api.py"", line 109, in post
          return request('post', url, data=data, json=json, **kwargs)
        File ""/usr/local/lib/python2.7/dist-packages/requests/api.py"", line 50, in request
          response = session.request(method=method, url=url, **kwargs)
        File ""/usr/local/lib/python2.7/dist-packages/requests/sessions.py"", line 465, in request
          resp = self.send(prep, **send_kwargs)
        File ""/usr/local/lib/python2.7/dist-packages/requests/sessions.py"", line 573, in send
          r = adapter.send(request, **kwargs)
        File ""/usr/local/lib/python2.7/dist-packages/requests/adapters.py"", line 415, in send
          raise ConnectionError(err, request=request)
      ConnectionError: ('Connection aborted.', error(111, 'Connection refused'))
      
      Captured stdout:
      14:53:52 POSTing path = http://172.17.0.4:7050/registrar
{code}

This is the IP address for vp0. It looks like there is a separate problem.",07/Nov/16 9:02 PM;muralisr;thanks [~latitiah] .. moved the defect to your name.,08/Nov/16 2:15 PM;rameshthoomu;Still I could see scenario is failing with the same error reported earlier. [~latitiah] Could you please check this error https://jenkins.hyperledger.org/view/fabric/job/fabric-verify-behave-x86_64/1382/testReport/junit/features.endorser/Endorser/Basic_deploy_endorsement_for_chaincode_through_GRPC_to_multiple_endorsers_____1_1_Orderer_Options/,16/Nov/16 2:26 PM;tuand;seeing this error on verify of changeset https://gerrit.hyperledger.org/r/#/c/2451,11/Apr/17 7:05 PM;denyeart;I believe this has been resolved. Please re-open if not.,,,,,,,,,,,,,,,,
packageChaincode() in Member.js does not compute the 'correct' hash value,FAB-882,13213,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,kh2se2013,kh2se2013,26/Oct/16 4:47 PM,17/Nov/16 9:10 PM,26/Apr/18 6:50 AM,17/Nov/16 9:10 PM,,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"simply, we say 'github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02' with 2 code files as chaincodePath.

after first invoke, there are 3 files now, and Dockerfile in the path with hash 'xxx' inside

in second invoking, we got 3 file's hash now, and overwrite the Dockerfile with  hash 'yyy'

then we will always get new version image with code file unmodified

tar the Dockerfile outside may be more properly or delete it after packaged
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00iqd:,,Sprint 5 - nodeSDK,,,,,,jimthematrix,kh2se2013,,,,,,,,,,,,,"17/Nov/16 9:10 PM;jimthematrix;this is NOOP because after the chaincode custom name work, the SDK is not calculating the has any longer.",,,,,,,,,,,,,,,,,,,,,,,
self._chain.cryptoPrimitives.generateNonce is not a function,FAB-880,13211,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,kh2se2013,kh2se2013,26/Oct/16 4:13 PM,28/Oct/16 12:16 PM,26/Apr/18 6:50 AM,28/Oct/16 12:16 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,, !image-2016-10-27-00-13-09-352.png|thumbnail! ,,,,,,,,,,,,,,,,,,,,26/Oct/16 4:13 PM;kh2se2013;image-2016-10-27-00-13-09-352.png;https://jira.hyperledger.org/secure/attachment/10202/image-2016-10-27-00-13-09-352.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00i4h:,,,,,,,,kh2se2013,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use transactions to deploy/build/invoke chain code,FAB-870,13201,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,malik-altaf,malik-altaf,malik-altaf,26/Oct/16 6:51 AM,31/Oct/16 12:36 AM,26/Apr/18 6:50 AM,31/Oct/16 12:36 AM,,,,,,,,,,fabric-sdk-java,,,,0,,,,,,,,,"Currently, deploy/invoke/query functions are using DevOpsClient instead of peer.sendTransaction. SDKs should not use this approach as DevOpsClient is deprecated",,,,144000,144000,,0%,144000,144000,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00i2h:,,,,,,,,malik-altaf,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Consensus continues when failure expected with docker compose,FAB-866,13171,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,latitiah,latitiah,25/Oct/16 4:54 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,13/Apr/17 11:39 PM,v0.6,,,,,,WON'T FIX,,,fabric-orderer,,,,0,,,,,,,,,"Given the following behave Scenario:
```
  Scenario: 10 peer network - basic consensus
    Given we compose ""docker-compose-10-consensus.yml""
    And I register with CA supplying username ""binhn"" and secret ""7avZQLwcUe9q"" on peers:
                                 | vp0  |
    And I use the following credentials for querying peers:
                                 | peer  |   username   |    secret    |
                                 | vp0   |  test_user0  | MS9qrN8hFjlE |
                                 | vp1   |  test_user1  | jGlNl6ImkuDo |
                                 | vp2   |  test_user2  | zMflqOKezFiA |
                                 | vp3   |  test_user3  | vWdLCE00vJy0 |
                                 | vp4   |  test_user4  | 4nXSrfoYGFCP |
                                 | vp5   |  test_user5  | yg5DVhm0er1z |
                                 | vp6   |  test_user6  | b7pmSxzKNFiw |
                                 | vp7   |  test_user7  | YsWZD4qQmYxo |
                                 | vp8   |  test_user8  | W8G0usrU7jRk |
                                 | vp9   |  test_user9  | H80SiB5ODKKQ |

    When requesting ""/network/peers"" from ""vp0""
    Then I should get a JSON response with array ""peers"" contains ""10"" elements

    # Deploy
    When I deploy chaincode ""github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02"" with ctor ""init"" to ""vp0""
                                            | arg1 |  arg2 | arg3 | arg4 |
                                            |  a   |  200  |  b   |  300 |
    Then I should have received a chaincode name
    Then I wait up to ""480"" seconds for transaction to be committed to peers:
           | vp1 | vp2 | vp3 | vp4 | vp5 | vp6 | vp7 | vp8 | vp9 |

    When I invoke chaincode ""example2"" function name ""invoke"" on ""vp0"" ""10"" times
                       |arg1|arg2|arg3|
                       | b  | a  | 1  |
    Then I should have received a transactionID
    Then I wait up to ""480"" seconds for transaction to be committed to peers:
           | vp1 | vp2 | vp3 | vp4 | vp5 | vp6 | vp7 | vp8 | vp9 |

    When I query chaincode ""example2"" function name ""query"" with value ""a"" on peers:
           | vp0  | vp1 | vp2 | vp3 |
    Then I should get a JSON response from peers with ""result.message"" = ""210""
           | vp0  | vp1 | vp2 | vp3 |
    And I wait ""60"" seconds

    When requesting ""/chain"" from ""vp0""
    Then I should ""store"" the ""height"" from the JSON response
    Given I stop peers:
            | vp1 | vp2 | vp3 | vp4 | vp5 |

    And I wait ""30"" seconds

    When I invoke chaincode ""example2"" function name ""invoke"" on ""vp0"" ""1"" times
            |arg1|arg2|arg3|
            | a  | b  | 5 |
    And I wait ""60"" seconds

    When requesting ""/chain"" from ""vp0""
    Then I should get a JSON response with ""height"" = ""previous""

    When I query chaincode ""example2"" function name ""query"" with value ""a"" on peers:
            | vp0 | vp7 | vp8 | vp9 |
    Then I should get a JSON response from peers with ""result.message"" = ""210""
            | vp0 | vp7 | vp8 | vp9 |

    Given I start peers:
            | vp3 |
    And I wait ""30"" seconds

    When I invoke chaincode ""example2"" function name ""invoke"" on ""vp0""
            |arg1|arg2|arg3|
            | a  | b  | 10 |
    Then I should have received a transactionID
    Then I wait up to ""480"" seconds for transaction to be committed to peers:
           | vp3 | vp5 | vp6 | vp7 | vp8 | vp9 |
    When I query chaincode ""example2"" function name ""query"" with value ""a"" on peers:
           | vp0  | vp3 | vp8 | vp9 |
    Then I should get a JSON response from peers with ""result.message"" = ""200""
           | vp0  | vp3 | vp8 | vp9 |

    When requesting ""/chain"" from ""vp0""
    Then I should get a JSON response with ""height"" > ""previous""

```
After stopping 4 peers, it was expected that consensus will fail F=(N-1)/3. Consensus continues. (N=10, F=3, K=2)

When N=16 and F=5 (K=2), consensus breaks as expected when 6 peers are stopped.
When N=16, F=2 (K=2), consensus continues even after stopping 15 peers.

Accompanying docker files have been attached.

",,,,,,,,,,,,,,,,,,,,25/Oct/16 4:53 PM;latitiah;docker-compose-10-consensus-base.yml;https://jira.hyperledger.org/secure/attachment/10145/docker-compose-10-consensus-base.yml,25/Oct/16 4:53 PM;latitiah;docker-compose-10-consensus.yml;https://jira.hyperledger.org/secure/attachment/10146/docker-compose-10-consensus.yml,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00hg4:i,,,,,,,,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Missing type check for Deploy Request fields in NodeSdk,FAB-856,13161,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,Ratnakar,Ratnakar,25/Oct/16 12:56 PM,08/Feb/17 3:17 PM,26/Apr/18 6:50 AM,08/Feb/17 3:17 PM,,,,,,,,,,fabric-quality,fabric-sdk-node,,,0,quality,,,,,,,,"There should be type check for Deploy Request  in NodeSdk and throw an error accordinly tinstead of sending marshaled values to Fabric and fail/crash it there.

Example:
NodeSdk end users are mistakenly sending strings instead of arrays for arguments and attributes, which inturn shows failures in Fabric",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00hzt:,,,,,,,,angrbrd,mastersingh24,Ratnakar,,,,,,,,,,,,"01/Nov/16 8:32 PM;angrbrd;Hi [~Ratnakar],

Can you please give some concrete examples you are using to reproduce this failure? I would like to know:

(1) Which version of the fabric you are running to reproduce this. Which branch? Which commit level?
(2) Which version of the SDK (which branch) you're reproducing this on. Otherwise, I do know where the fix would go.
(3) Example deploy requests with associated errors that cause the failure.

Then reassign back to me please.

Thanks!","01/Nov/16 10:30 PM;Ratnakar;
1) & 2)  I think The problem is reproducible on almost all the branches with all versions of hfc
3) Please refer this for more details - https://hyperledgerproject.slack.com/archives/fabric-sdk-node/p1477221876000288
*Reiterating here:*
when deploy/invoke request expects an array and passed as string, then NodeSDk ignored to check the same for the correct type and passes the same to Fabric and hence it fails somewhere in Fabric.
For example here is an invoke request:
{code:javascript}
var invokeRequest = {
       // Name (hash) required for invoke
       chaincodeID: testChaincodeID,
       // Function to trigger
       //fcn: config.invokeRequest.functionName,
       fcn: ""newSecuritySetup"",
       // Parameters for the invoke function
       args: args1,
       attrs: ""EQTY_licence""
   };
{code}



here attrs should be an array instead of a string , as a result client program throws the below error

*Error: Error fetching attributes = BAD_REQUEST*
this error is thrown from ""*RequestAttributes*"" function in *acap.go*.

This can be avoided by checking for type of some of the params like args, attrs etc.,



","02/Nov/16 3:53 PM;angrbrd;[~Ratnakar],

Thank you for clarifying and pointing to the Slack conversation! I appreciate it.

OK, once the deploy/invoke/query transaction path goes into the v1.0 sdk code base (fabric-sdk-node repository), I will make sure that checks for arrays on ""args"" and ""attrs"" are added. Right now, the transaction path is still being worked on. I do not think this is a critical issue to be fixed for v0.6, therefore I don't believe it will be allowed to merge to the v0.6 branch as the release is already completed.

Thanks,
Anya
","31/Dec/16 8:33 PM;mastersingh24;[~jimthematrix] Don't think this is still an issue with v1, but can you confirm and close this if it's no longer an issue?",,,,,,,,,,,,,,,,,,,,
Gossip pull algorithm fix,FAB-855,13160,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,25/Oct/16 11:33 AM,25/Oct/16 1:36 PM,26/Apr/18 6:50 AM,25/Oct/16 1:36 PM,,,,,,,,,,,,,,0,,,,,,,,," Had a bug in the pull algorithm: 
The NONCE set was actually needed to be split into 2 diff sets, because servicing sync requests has nothing to do with initiating them, and the cleanup of initiated sync requests effected sync requets that were serviced. 

Added a unit test that successfully reproduced the bug, and after I fixed it it always succeeds.

Ie99f41485a41ddb46e99d8fa7d8db408f669b20c
https://gerrit.hyperledger.org/r/#/c/1975/",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00hzl:,,Sprint 4 - Gossip,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
DeleteTable doesn't delete rows have keys begin with an empty string,FAB-822,13127,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,zanejia,zanejia,zanejia,24/Oct/16 8:26 AM,02/Apr/17 12:28 PM,26/Apr/18 6:50 AM,02/Apr/17 12:28 PM,v0.6,,,,,,WON'T FIX,,,fabric-peer,,,,0,,,,,,,,,"Since the InsertRow operation does not prevent the length of a string (or bytes) type column's value being zero.

Suppose there is a table looks like this:

tableName: MyTable
|| _ROW-DEFINITION_ || string, key=true || int, key=false ||
| _ROW-VALUE_ | """" | 47 |

table key: 7MyTable
row key: 7MyTable0

The DeleteTable operation just delete rows searched by RangeStateQuery(tableKey + ""1"", tableKey + "":"").
So the row {"""", 47} won't be deleted.

Similarly, the GetRows operation won't get some rows contain empty strings.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00hsp:,,,,,,,,mastersingh24,zanejia,,,,,,,,,,,,,24/Oct/16 10:05 AM;zanejia;https://gerrit.hyperledger.org/r/#/c/1907/,02/Apr/17 12:28 PM;mastersingh24;This was filed against v0.6 which is no longer in active development and this issue is no longer relevant in v1.0.0 since we no longer have the table API,,,,,,,,,,,,,,,,,,,,,,
Intermittent failure in TestClassicBackToBackStateTransfer on convergence branch,FAB-755,13060,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,greg.haskins,greg.haskins,19/Oct/16 4:59 PM,11/Apr/17 8:53 PM,26/Apr/18 6:50 AM,11/Apr/17 8:53 PM,,,,,,,,,,fabric-peer,,,,0,,,,,,,,,"Various unit-test runs intermittently fail in both local and CI environments with the following report:

--- FAIL: TestClassicBackToBackStateTransfer (60.37s)
panic: Test network took more than 60 seconds to resolve requests, this usually indicates a hang [recovered]
	panic: Test network took more than 60 seconds to resolve requests, this usually indicates a hang

goroutine 222 [running]:
panic(0xb17d80, 0xc8202f56e0)
	/opt/go/go1.6.linux.amd64/src/runtime/panic.go:464 +0x3e6
testing.tRunner.func1(0xc82043d4d0)
	/opt/go/go1.6.linux.amd64/src/testing/testing.go:467 +0x192
panic(0xb17d80, 0xc8202f56e0)
	/opt/go/go1.6.linux.amd64/src/runtime/panic.go:426 +0x4e9
github.com/hyperledger/fabric/consensus/pbft.(*testnet).process(0xc8202c0dc0, 0x0, 0x0)
	/w/workspace/fabric-verify-x86_64/gopath/src/github.com/hyperledger/fabric/consensus/pbft/mock_network_test.go:230 +0x33e
github.com/hyperledger/fabric/consensus/pbft.TestClassicBackToBackStateTransfer(0xc82043d4d0)
	/w/workspace/fabric-verify-x86_64/gopath/src/github.com/hyperledger/fabric/consensus/pbft/batch_test.go:364 +0x3c3
testing.tRunner(0xc82043d4d0, 0x1407dd0)
	/opt/go/go1.6.linux.amd64/src/testing/testing.go:473 +0x98
created by testing.RunTests
	/opt/go/go1.6.linux.amd64/src/testing/testing.go:582 +0x892
FAIL	github.com/hyperledger/fabric/consensus/pbft	62.447s
error: exit status 1
panic: EOF

goroutine 1 [running]:
panic(0x544960, 0xc82000a150)
	/opt/go/go1.6.linux.amd64/src/runtime/panic.go:464 +0x3e6
main.main()
	/w/workspace/fabric-verify-x86_64/gopath/src/github.com/AlekSi/gocov-xml/gocov-xml.go:60 +0x177
Stopping peer..
make: *** [unit-test] Error 2

Examples:

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/1866/console",feature/convergence branch,,,,,,,,,,,,,,,,,,,19/Oct/16 4:57 PM;greg.haskins;crash.txt;https://jira.hyperledger.org/secure/attachment/10142/crash.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00hhd:,,,,,,,,denyeart,greg.haskins,,,,,,,,,feature/convergence,master,,true,"19/Oct/16 5:02 PM;greg.haskins;This has been seeing in at least two different CRs on convergence:

https://gerrit.hyperledger.org/r/#/c/1839/
https://gerrit.hyperledger.org/r/#/c/1669/

leading me to conclude that there is a latent bug in the branch, not a new problem introduced by the respective CRs.",11/Apr/17 8:53 PM;denyeart;Looks like this is no longer a test.,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] gulp fails with 4 errors,FAB-750,13054,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,cdaughtr,jjjjibm,jjjjibm,18/Oct/16 7:16 PM,07/Nov/16 3:29 PM,26/Apr/18 6:50 AM,24/Oct/16 3:03 PM,,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,Usability,,,,,,,"I cloned fabric-sdk-node today.  When I ran gulp, it produced this output:

 gulp
[15:08:11] Using gulpfile ~/work/src/github.com/hyperledger/fabric-sdk-node/gulpfile.js
[15:08:11] Starting 'lint'...
[15:08:15]
/home/ibmadmin/work/src/github.com/hyperledger/fabric-sdk-node/test/unit/headless-tests.js
  378:21  error  Trailing spaces not allowed  no-trailing-spaces
  417:1   error  Trailing spaces not allowed  no-trailing-spaces
  476:76  error  Trailing spaces not allowed  no-trailing-spaces
  488:76  error  Trailing spaces not allowed  no-trailing-spaces

✖ 4 problems (4 errors, 0 warnings)

[15:08:15] 'lint' errored after 3.23 s
[15:08:15] ESLintError in plugin 'gulp-eslint'
Message:
    Failed with 4 errors
ibmadmin@jcwNodeSDK:~/work/src/github.com/hyperledger/fabric-sdk-node$

How to recreate:

How to recreate:
 1.cd $GOPATH/src/github.com/hyperledger
 2.git clone http://gerrit.hyperledger.org/r/fabric-sdk-node
 3.cd fabric-sdk-node
 4.npm install 
 5.gulp 
",Vlaunch vm running Ubuntu 14 (Trusty).  No vagrant is involved.  I did not try this in a vagrant session.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00hg1:,,,,,,,,cdaughtr,jjjjibm,,,,,,,,,,,,,20/Oct/16 2:48 PM;cdaughtr;fixed by https://gerrit.hyperledger.org/r/#/c/1861/,24/Oct/16 3:02 PM;cdaughtr;1861 is now merged.,,,,,,,,,,,,,,,,,,,,,,
Disk Full when running a longrun test,FAB-727,13031,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,Nishi,Nishi,17/Oct/16 3:13 PM,24/Oct/16 3:36 PM,26/Apr/18 6:50 AM,24/Oct/16 3:36 PM,,,,,,,,,,,,,,0,,,,,,,,,"Scheduled a longrun test for 3days to find that test exited with following message:

""POST /chaincode returned code =-32002 message=Invocation failure data=Error when invoking chaincode: database or disk is full""

Checked for disk space inside docker container on a peer, and also space on vagrant, it was found that there was enough space on both container inside docker and vagrant systems.

Ran:
vagrant@hyperledger-devenv:v0.0.11-a80038d:/opt/gopath/src/github.com/hyperledger/fabric/vendor/release-criteria/svt/longruns$ docker exec -it PEER0 bash

Issued a Query from inside docker container:
root@37544e83a44a:/opt/gopath/src/github.com/hyperledger/fabric# peer chaincode query -n -u test_user0 e383d45384dce3722b9e38c07637f0f7a8ac743ce30bb959ff9f5b025ffd9297ab67dbc78e03a165b3059580bfde4e6fafc7856a6484f1f4c5d6c4ed34f2dcf4

Result from above command:
14:38:41.058 [chaincodeCmd] getChaincodeSpecification -> INFO 002 Local user 'test_user0' is already logged in. Retrieving login token.
14:38:41.058 [chaincodeCmd] getChaincodeSpecification -> INFO 003 Set confidentiality level to CONFIDENTIAL.
14:38:41.202 [chaincodeCmd] chaincodeInvokeOrQuery -> INFO 004 Successfully queried transaction: chaincodeSpec:<type:GOLANG chaincodeID:<name:""e383d45384dce3722b9e38c07637f0f7a8ac743ce30bb959ff9f5b025ffd9297ab67dbc78e03a165b3059580bfde4e6fafc7856a6484f1f4c5d6c4ed34f2dcf4"" > ctorMsg:<args:""query"" args:""counter"" > secureContext:""test_user0"" confidentialityLevel:CONFIDENTIAL > 
Query Result: 8000

Looks like program exited only after 8000 tx in long run, which does not seem right.

Issuing df -h from docker container:

root@37544e83a44a:/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com# df -h
Filesystem      Size  Used Avail Use% Mounted on
none             39G   11G   27G  29% /
tmpfs           2.0G     0  2.0G   0% /dev
tmpfs           2.0G     0  2.0G   0% /sys/fs/cgroup
/dev/sda1        39G   11G   27G  29% /etc/hosts
shm              64M     0   64M   0% /dev/shm

Displayed that there was enough disk space inside docker container:

From outside docker container:

vagrant@hyperledger-devenv:v0.0.11-a80038d:/opt/gopath/src/github.com/hyperledger/fabric/vendor/release-criteria/svt/longruns$ df -h
Filesystem      Size  Used Avail Use% Mounted on
udev            2.0G  4.0K  2.0G   1% /dev
tmpfs           396M  664K  395M   1% /run
/dev/sda1        39G   11G   27G  29% /
none            4.0K     0  4.0K   0% /sys/fs/cgroup
none            5.0M     0  5.0M   0% /run/lock
none            2.0G  956K  2.0G   1% /run/shm
none            100M     0  100M   0% /run/user
none            443G  212G  232G  48% /vagrant
none            443G  212G  232G  48% /local-dev
none            443G  212G  232G  48% /hyperledger
none            443G  212G  232G  48% /opt/gopath/src/github.com/hyperledger/fabric


Not sure how the test program ran into disk space full error.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00hcp:,,,,,,,,Nishi,,,,,,,,,,,,,,"24/Oct/16 3:36 PM;Nishi;After updating logs to write only when critical we observed docker ""/dev/sda1"" was not being used as earlier when we had logs@debug level",,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] class EventHub documentation needs to clarify which methods are meant to be consumed by nodejs client,FAB-709,13013,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,pmullaney,jjjjibm,jjjjibm,13/Oct/16 6:53 PM,08/Feb/17 3:19 PM,26/Apr/18 6:50 AM,08/Feb/17 3:19 PM,,,,,,,,,,fabric-sdk-node,,,,0,Documentation,node-SDK,,,,,,,"I compared the unit-test coverage in event-tests.js to the EventHub methods,  as listed in the generated documentation.  Certain calls are not covered: connect(), disconnect(), isConnected(), setPeerAddr(), [un]registerTxEvent(), 

Upon study and discussion, it so happens certain methods such as [un]registerTxEventt() are not meant to be used by the nodejs client.   They support other event hub calls. 

None of this is mentioned in the generated documentation.   

(1) Could we have information  for certain methods in the generated documentation?  Here are some ideas to get started: 
-  Restriction:  Nodejs clients do not invoke this method directly.  The SDK invokes it as needed. 
-  Tip:  A nodejs client does not invoke this function directly.  It is used internally by the nodejs SDK. 
-  Tip:  Most Nodejs clients can use EventHub{Connect|Disconnect] instead of this method.  The advantage of calling EventHub{Connect|Disconnect] is <provide advantage>
-  Tip:  Most nodejs clients can ignore this function.  It is only needed when <provide reason>

","Vlaunch VM running Ubuntu 'Trusty'. 

How to recreate:
1.cd $FABRIC/sdk/node
2.make doc to create a subdirectory called doc with html in it
3.use browser to open globals.html.  
4.Click on src/hfc on the right side of the browser window
5.Inspect classes such as member, chain, and eventHub to compare.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00h8x:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deploy/Invoke/Query do not return anything,FAB-700,13002,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,malik-altaf,malik-altaf,malik-altaf,13/Oct/16 12:17 PM,31/Oct/16 4:23 AM,26/Apr/18 6:50 AM,31/Oct/16 4:23 AM,,,,,,,,,,fabric-sdk-java,,,,0,,,,,,,,,Current implementation of deploy/invoke/query print the result but do not return anything which is of no use to the caller. They should transmit the outcome of the deploy/invoke/query so that caller application can get the results and make decision based on these results,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00h7d:,,,,,,,,malik-altaf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
headless-tests.js when testing FileKeyValueStore needs to be updated w.r.t relative path conventinos,FAB-685,12987,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,12/Oct/16 5:30 PM,06/Dec/16 2:21 PM,26/Apr/18 6:50 AM,20/Oct/16 3:43 PM,,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"The FileKeyValueStore implementation follows the convention that when a relative path is passed in, it's relative to where the node process is running (which is different than what ""__dirname"" points to). the headless-tests.js has a couple of test cases around this area that didn't follow this same convention. they should be updated.

as a side-effect, you should be able to run the headless-test.js from any directory. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00h4h:,,Sprint 3,,,,,,jimthematrix,,,,,,,,,,,,,,18/Oct/16 4:12 AM;jimthematrix;[~cdaughtr] I included the fix to this in https://gerrit.hyperledger.org/r/#/c/1821/,,,,,,,,,,,,,,,,,,,,,,,
Docs home page has some broken markup,FAB-651,12953,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lehors,lehors,lehors,11/Oct/16 10:06 AM,13/Oct/16 6:17 PM,26/Apr/18 6:50 AM,13/Oct/16 6:17 PM,,,,,,,,,,,,,,0,,,,,,,,,"The developer guides section is broken and renders as follows:

Application developer guide

     - [APIs - CLI, REST, and Node.js](API/CoreAPI.md)
       - [CLI](API/CoreAPI.md#cli): working with the command-line interface.
       - [REST](API/CoreAPI.md#rest-api): working with the REST API (*deprecated*).
       - [Node.js SDK](nodeSDK/node-sdk-guide.md): working with the Node.js SDK.
Fabric developer guide

     - [Making code contributions](CONTRIBUTING.md): First, you'll want to familiarize
     yourself with the project's contribution guidelines.
     - [Setting up the development environment](dev-setup/devenv.md): after that, you
     will want to set up your development environment.
     - [Building the fabric core](dev-setup/build.md): next, try building the project
     in your local development environment to ensure that everything is set up
     correctly.
     - [Building outside of Vagrant](dev-setup/build.md#building-outside-of-vagrant):
     for the *adventurous*, you might try to build outside of the standard Vagrant
     development environment.
     - [Logging control](Setup/logging-control.md): describes how to tweak the logging
     levels of various components within the fabric.
     - [License header](dev-setup/headers.txt): every source file must include this
     license header modified to include a copyright statement for the principle
     author(s).
Operations guide

      - [Setting Up a Network](Setup/Network-setup.md): instructions for setting up a
      network of fabric peers.
      - [Certificate Authority (CA) Setup](Setup/ca-setup.md): setting up a CA to
      support identity, security (authentication/authorization), privacy and
      confidentiality.
      - [Application ACL](tech/application-ACL.md): working with access control lists.
",,,,,,,,,,,,,,,,,,,,11/Oct/16 10:22 AM;lehors;Fabric docs home page.png;https://jira.hyperledger.org/secure/attachment/10116/Fabric+docs+home+page.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00gxt:,,,,,,,,lehors,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
Starter Kit documentation is confusing,FAB-643,12945,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,lehors,lehors,lehors,10/Oct/16 8:37 PM,13/Oct/16 6:17 PM,26/Apr/18 6:50 AM,13/Oct/16 6:17 PM,,,,,,,,,,,,,,0,,,,,,,,,"The second paragraph of the Starter Kit page reads:

Further exploration

If you wish, there are a number of chaincode examples near by.

   cd ../../chaincode

At that point in the page this command makes no sense whatsoever
At the minimum this section needs to be moved further down where it makes sense and be given some context so that the user knows in which terminal window and from which directory to type this command. It's probably better to give an absolute path in this case.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00gw1:,,,,,,,,lehors,,,,,,,,,,master,,,true,,,,,,,,,,,,,,,,,,,,,,,,
update hfc v0.6.2 in npm for the latest changes for FAB-392,FAB-641,12943,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,angrbrd,jimthematrix,jimthematrix,10/Oct/16 6:24 PM,06/Dec/16 2:21 PM,26/Apr/18 6:50 AM,17/Oct/16 3:46 PM,,,,,,,v0.6,,,fabric-sdk-node,,,,0,.6,node-SDK,,,,,,,fixes for this defect had changes in node.js SDK code. so need to update the npm package.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00gvl:,,Sprint 3,,,,,,angrbrd,jimthematrix,,,,,,,,,,,,,"17/Oct/16 2:13 PM;jimthematrix;[~angrbrd] now that v0.6 branch was finalized, please start working on updating the npm. thanks!","17/Oct/16 3:42 PM;angrbrd;This change needs to be merged into v0.6 to keep the package version in sync with npm.
https://gerrit.hyperledger.org/r/#/c/1815/1",17/Oct/16 3:46 PM;angrbrd;hfc version 0.6.3 is now published. Closing this bug.,,,,,,,,,,,,,,,,,,,,,
Peer binary does not build using homebrew version of RocksDB on OS X,FAB-640,12942,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,donovanhide,donovanhide,10/Oct/16 1:51 PM,31/Dec/16 8:35 PM,26/Apr/18 6:50 AM,31/Dec/16 8:35 PM,v0.6,,,,,,,,,fabric-peer,,,,0,wont't-fix,,,,,,,,"RocksDB had a public API change:

https://github.com/facebook/rocksdb/blob/master/HISTORY.md#public-api-change-3

which was fixed in gorocksdb here:

https://github.com/tecbot/gorocksdb/issues/63

This fixes the issue:
{code}
govendor update github.com/tecbot/gorocksdb
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00gvd:,,,,,,,,ChristopherFerris,donovanhide,stevenroose,,,,,,,,master,,,true,"10/Oct/16 6:09 PM;ChristopherFerris;We are currently using v4.1 of RocksDB. As we progress towards v1.0 we will be updating our dependencies. For now, you need to build RocksDB v4.1 locally on MacOSX.

http://hyperledger-fabric.readthedocs.io/en/latest/dev-setup/build/#building-natively-on-osx

The instructions are a little confusing, but basically follow the directions for building 4.1 of RocksDB

brew install go rocksdb snappy gnu-tar
cd /tmp
git clone https://github.com/facebook/rocksdb.git
cd rocksdb
git checkout v4.1
PORTABLE=1 make shared_lib
INSTALL_PATH=/usr/local make install-shared

","10/Oct/16 6:28 PM;donovanhide;That's a lot of hoops to jump through to build a year old version of RocksDB :D
Was there any particular issue with a version of RocksDB between 4.1.0 and 4.12.0?

I guess in an ideal world we could just do:

{code}
brew update && brew install hyperledger-fabric
{code}",02/Nov/16 2:15 PM;stevenroose;This CR should fix this: https://gerrit.hyperledger.org/r/#/c/2181/,02/Nov/16 2:36 PM;stevenroose;It might be good to change the topic of the issue to not be specific to Homebrew. It fails to build against the [latest version in Arch](https://aur.archlinux.org/packages/rocksdb/) too.,"23/Nov/16 3:46 PM;ChristopherFerris;[~stevenroose] that changeset does not build (sorry for not following up... been on holiday). As to why we use the older version of RocksDB this is mostly just anachronism and not a high priority. If we do update RocksDB, then the corresponding code in Fabric that calls the relevant APIs that have changed will need to be addressed as part of this changeset.",,,,,,,,,,,,,,,,,,,
hfc module needs access to create a Dockerfile in the chaincode directory,FAB-638,12940,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,sstone1,sstone1,10/Oct/16 10:43 AM,08/Feb/17 3:23 PM,26/Apr/18 6:50 AM,08/Feb/17 3:22 PM,v0.6,v1.0.0,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"As part of a deploy() call, the hfc module creates a Dockerfile in the the specified chaincode directory. This causes the deploy() call to fail when the chaincode is stored in a directory that the running user does not have access to. If the deploy() call needs to write files to the file system, that should always be done in a temporary directory that the running user can definitely access.

My scenario is that I have two npm modules:
* my-module, which is a module that uses hfc, and contains the chaincode
* my-cli, which is a CLI application for working my-module

my-cli calls my-module, which then attempts to deploy the chaincode that is stored in the my-module directory (in the root owned, global node.js module directory). That fails because the user does not have access to write to that directory.

{noformat}
Error: Error writing file [/usr/local/lib/node_modules/my-cli/node_modules/my-module/chaincode/src/mycc/Dockerfile]: Error: EACCES: permission denied, open '/usr/local/lib/node_modules/my-cli/node_modules/my-module/chaincode/src/mycc/Dockerfile'
    at TransactionContext.<anonymous> (/usr/local/lib/node_modules/my-cli/node_modules/my-module/lib/util.js:165:28)
    at emitOne (events.js:96:13)
    at TransactionContext.emit (events.js:188:7)
    at Timeout._onTimeout (/usr/local/lib/node_modules/my-cli/node_modules/hfc/lib/hfc.js:970:22)
    at tryOnTimeout (timers.js:232:11)
    at Timer.listOnTimeout (timers.js:202:5)
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00gux:,,,,,,,,Clayton Sims,jimthematrix,sstone1,,,,,,,,,,,,"10/Oct/16 1:59 PM;jimthematrix;[~sstone1] thanks for raising this defect, if it's OK with you can we document this as v0.6 limitation and fix in v1.0? trying to minimize changes to v0.6 to only crashing or blocking defects. please let us know.","08/Feb/17 1:35 AM;Clayton Sims;Per email.   Simon said this is failing on Hackfest driver.   Can you take a look. 
","08/Feb/17 3:23 PM;jimthematrix;[~sstone1] as discussed earlier, now that the docker file content has been removed from the deploy API (it'll be generated by the peers on the fly), this is fixed indirectly",,,,,,,,,,,,,,,,,,,,,
build error,FAB-632,12934,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,xuxinlai,xuxinlai,09/Oct/16 12:49 AM,02/Apr/17 12:38 PM,26/Apr/18 6:50 AM,02/Apr/17 12:38 PM,v0.6,,,,,,WON'T FIX,,,fabric-devenv,,,,0,,,,,,,,,"xuxinlai@xuxinlai-Aspire-TC-705:~/envH$ sudo docker build -t hyperledger/fabric-starter-kit:latest .
[sudo] password for xuxinlai: 
Sending build context to Docker daemon  5.12 kB
Step 1 : FROM hyperledger/fabric-peer:latest
 ---> 05989d10c6e1
Step 2 : WORKDIR $GOPATH/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02
 ---> Using cache
 ---> f48fcfc6df63
Step 3 : RUN go build
 ---> Using cache
 ---> c8919de6ff38
Step 4 : WORKDIR $GOPATH/src/github.com/hyperledger/fabric/sdk/node
 ---> Using cache
 ---> 6804811e3daf
Step 5 : RUN make all
 ---> Running in 0af7caea3dc8
[INSTALL] node_modules/.bin/typings
npm install typings
npm WARN package.json hfc@0.0.2 No repository field.
npm WARN package.json hfc@0.0.2 No license field.
npm ERR! Linux 4.4.0-38-generic
npm ERR! argv ""/usr/local/bin/node"" ""/usr/local/bin/npm"" ""install"" ""typings""
npm ERR! node v0.12.7
npm ERR! npm  v2.11.3
npm ERR! code ENOTFOUND
npm ERR! errno ENOTFOUND
npm ERR! syscall getaddrinfo

npm ERR! network getaddrinfo ENOTFOUND registry.npmjs.org
npm ERR! network This is most likely not a problem with npm itself
npm ERR! network and is related to network connectivity.
npm ERR! network In most cases you are behind a proxy or have bad network settings.
npm ERR! network 
npm ERR! network If you are behind a proxy, please make sure that the
npm ERR! network 'proxy' config is set properly.  See: 'npm help config'

npm ERR! Please include the following file with any support request:
npm ERR!     /opt/gopath/src/github.com/hyperledger/fabric/sdk/node/npm-debug.log
make: *** [node_modules/.bin/typings] Error 1
The command '/bin/sh -c make all' returned a non-zero code: 2",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00gu1:,,,,,,,,mastersingh24,xuxinlai,,,,,,,,,,,,,02/Apr/17 12:38 PM;mastersingh24;No longer relevant in the transition to v1.0.0,,,,,,,,,,,,,,,,,,,,,,,
SBFT unit test TestRestartAfterCheckpoint sometimes fails,FAB-624,12926,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,hgabre,hgabre,hgabre,07/Oct/16 1:21 PM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,01/Nov/16 10:05 AM,,,,,,,,,,fabric-orderer,,,,0,consensus,,,,,,,,"A bug of SBFT implementation: https://gerrit.hyperledger.org/r/#/c/1467/

TestRestartAfterCheckpoint sometimes (every 6th-7th test) fails with the following error message:
--- FAIL: TestRestartAfterCheckpoint (0.15s)
panic: runtime error: index out of range [recovered]
        panic: runtime error: index out of range

The error is caused by an uint64 overflow in calendarqueue. The root cause behind this might be that the primary node falls into an infinite loop of view changes resulting in a very high view change timeout.

The problem can be solved by making connectAll's (simplebft_test.go) adapter map (sys.adapters) iteration (for .. range) deterministic (go map iteration is non-deterministic). E.g.:
     keys := uint64slicetype{}
     for k, _ := range sys.adapters { keys = append(keys,uint64(k)) }
     sort.Sort(keys)",,,,57600,57600,,0%,57600,57600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-378,0|hzzzza:6wt,,,,,,,,corecode,hgabre,jyellick,v_thirugnanam,vukolic,,,,,,feature/convergence,master,,true,"07/Oct/16 8:43 PM;jyellick;I was unable to reproduce this with the changeset you linked to (tried with -{{go test -count 2000}} but it still passes), however, I am able to reproduce this with https://gerrit.hyperledger.org/r/#/c/1467/ .  The view change message should only be being sent once, and should not be being resent (especially not incremented) unless the new view becomes active.  I'll be planning to investigate further.","10/Oct/16 7:08 AM;hgabre;Sorry, you are right, the 'problematic' patchset is https://gerrit.hyperledger.org/r/#/c/1467/ I will update the issue.","13/Oct/16 10:27 AM;hgabre;Solution:{color:#707070}
First, sbft used to send change view messages periodically, using a doubling behavior. A timer was started in sendViewChange and a next sendViewChange call was made after some time. It was found out that this was erroneous, and instead of this{color} {color:#333333}a timer should be started when the (non-primary) node supposes that the primary has enough view change messages to send a new view (this happens at 2f+1). The timer waits for some time, giving some time to the primary to send out a new view. If it does not send it and the timer times out, a new `view change` message is sent using the next view number.{color}",27/Oct/16 9:37 AM;corecode;fixed in https://gerrit.hyperledger.org/r/#/c/2061/,,,,,,,,,,,,,,,,,,,,
Need to wait more before broadcasting in BDD orderer tests,FAB-612,12914,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,kchristidis,kchristidis,kchristidis,06/Oct/16 12:22 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,10/Oct/16 1:53 PM,,,,,,,,,,fabric-orderer,,,,0,Consensus,,,,,,,,"The Docker Compose file for the BDD tests for Kafka brings up two containers:

# The Kafka orderer and
# The Kafka broker + ZK ensemble.

The orderer process in container 1 always comes up faster than the Kafka process in container 2, so I have added logic that attempts to establish a connection between the two every 3 seconds. (This reconnection period is configurable, and it usually takes just 1 or 2 efforts for a proper link to be established.)

As things stand today, the BDD tests wait for .5 seconds (""And I wait .5 seconds""), then an attempt is made to start broadcasting.

However, given that the orderer hasn't been set up yet (remember that the connection with the broker is still pending), the tests fails with an error of type ""AbortionError (service unavailable)"".

The problem can be solved if we have each BDD test wait for, say, 5 seconds.

This seems rather flaky though. I am wondering whether we can change something in the code, whether that's on the orderer's side or the BDD implementation side (orderer_util.py or orderer_impl.py) to fix it.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-32,0|hzzzza:6wm,,Sprint 2,,,,,,jeffgarratt,kchristidis,,,,,,,,,,,,,"06/Oct/16 12:37 AM;jeffgarratt;It would be trivial to add another 'Given' condition of say:

Given we compose...
And...
And I am willing to wait for up to 'X' seconds for the orderer service to be available on orderers:
|orderer0| ordererX...|

We can discuss at your convenience [~kchristidis]","07/Oct/16 11:44 PM;kchristidis;Discussed with with [~jeffgarratt] earlier today. Following his suggestion, I will make wait time a parameter, and set it to ""5"" seconds for Kafka. Later on we can add the ""wait for up to X seconds"" clause. ",08/Oct/16 11:06 PM;kchristidis;https://gerrit.hyperledger.org/r/#/c/1627/1,,,,,,,,,,,,,,,,,,,,,
invalid memory address or nil pointer dereference when run asset_management02 test code,FAB-579,12880,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,genggjh,genggjh,genggjh,02/Oct/16 10:08 AM,11/Oct/16 6:21 AM,26/Apr/18 6:50 AM,11/Oct/16 6:21 AM,v0.6,,,,,,,,,fabric-devenv,,,,0,,,,,,,,,"Fail to run the `go test` under both asset_management02 and asset_management_with_roles with following error:

--- FAIL: TestChaincodeDeploy (0.01s)
panic: runtime error: invalid memory address or nil pointer dereference [recovered]
       	panic: runtime error: invalid memory address or nil pointer dereference
[signal 0xb code=0x1 addr=0x0 pc=0x834eac]

goroutine 213 [running]:
panic(0xd2e9a0, 0xc82000a110)
       	/opt/go/src/runtime/panic.go:464 +0x3e6
testing.tRunner.func1(0xc82043f8c0)
       	/opt/go/src/testing/testing.go:467 +0x192
panic(0xd2e9a0, 0xc82000a110)
       	/opt/go/src/runtime/panic.go:426 +0x4e9
github.com/hyperledger/fabric/vendor/github.com/tecbot/gorocksdb.(*DB).GetCF(0x0, 0xc82011a368, 0x0, 0x14fbab0, 0xa, 0xa, 0x0, 0x0, 0x0)
       	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/tecbot/gorocksdb/db.go:258 +0xcc
github.com/hyperledger/fabric/core/db.(*OpenchainDB).Get(0xc8201964e0, 0x0, 0x14fbab0, 0xa, 0xa, 0x0, 0x0, 0x0, 0x0, 0x0)
       	/opt/gopath/src/github.com/hyperledger/fabric/core/db/db.go:229 +0xd4
github.com/hyperledger/fabric/core/db.(*OpenchainDB).GetFromBlockchainCF(0xc8201964e0, 0x14fbab0, 0xa, 0xa, 0x0, 0x0, 0x0, 0x0, 0x0)
       	/opt/gopath/src/github.com/hyperledger/fabric/core/db/db.go:81 +0x75
github.com/hyperledger/fabric/core/ledger.fetchBlockchainSizeFromDB(0xa1, 0x0, 0x0)
       	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/blockchain.go:278 +0x57
github.com/hyperledger/fabric/core/ledger.newBlockchain(0x0, 0x0, 0x0)
       	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/blockchain.go:49 +0x2e
github.com/hyperledger/fabric/core/ledger.GetNewLedger(0xc820477c70, 0x0, 0x0)
       	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledger.go:101 +0x28
github.com/hyperledger/fabric/core/ledger.GetLedger.func1()
       	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledger.go:94 +0x1c
sync.(*Once).Do(0x15339f8, 0xfeb170)
       	/opt/go/src/sync/once.go:44 +0xe4
github.com/hyperledger/fabric/core/ledger.GetLedger(0xc8202fb5c0, 0x0, 0x0)
       	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledger.go:95 +0x3b
github.com/hyperledger/fabric/examples/chaincode/go/asset_management02.deploy(0x7fa687244f08, 0xc8203da7c0, 0x0, 0x0)
       	/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode/go/asset_management02/asset_management02_test.go:353 +0x4a0
github.com/hyperledger/fabric/examples/chaincode/go/asset_management02.TestChaincodeDeploy(0xc82043f8c0)
       	/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode/go/asset_management02/asset_management02_test.go:108 +0x16e
testing.tRunner(0xc82043f8c0, 0x14f3a00)
       	/opt/go/src/testing/testing.go:473 +0x98
created by testing.RunTests
       	/opt/go/src/testing/testing.go:582 +0x892
exit status 2
FAIL   	github.com/hyperledger/fabric/examples/chaincode/go/asset_management02 	11.478s",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzxr:r,,,,,,,,genggjh,,,,,,,,,,master,,,true,02/Oct/16 10:10 AM;genggjh;I run this test in my vagrant env with latest code from github master branch.,"02/Oct/16 11:43 AM;genggjh;I got the root case, will fix it.",02/Oct/16 12:35 PM;genggjh;Fix is here: https://gerrit.hyperledger.org/r/#/c/1399/,11/Oct/16 6:21 AM;genggjh;Code has been merged. So we can close it.,,,,,,,,,,,,,,,,,,,,
CoreAPI.md has incorrect description of REST api calls,FAB-578,12879,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,01/Oct/16 12:42 PM,03/Oct/16 7:35 PM,26/Apr/18 6:50 AM,02/Oct/16 1:20 PM,,,,,,,v0.6,,,,,,,0,Documentation,,,,,,,,CoreAPI.md REST API has incorrect signature for chaincode calls,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00gl5:,,,,,,,,ChristopherFerris,,,,,,,,,,v0.6,feature/convergence,master,true,,,,,,,,,,,,,,,,,,,,,,,,
go-logging concurrency bug fix,FAB-573,12874,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,30/Sep/16 5:17 PM,02/Oct/16 1:54 PM,26/Apr/18 6:50 AM,02/Oct/16 1:54 PM,,,,,,,,,,,,,,0,,,,,,,,,"Fix go-logging concurrent map read-write bug

This bug sometimes fails unit tests because logging are sometimes set up
in parallel.

Added a RWLock to op/go-logging/level.go's moduleLeveled struct
and it RLocks in GetLevel and WLocks at SetLevel

https://gerrit.hyperledger.org/r/#/c/1379/
commit 8c2566635c35abe74f27d3596621daf85d4ac901",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00gk9:,,Sprint 2,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode migration from 0.5 to 0.6,FAB-543,12844,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nickgaski,Ratnakar,Ratnakar,30/Sep/16 2:49 PM,09/Dec/16 6:56 PM,26/Apr/18 6:50 AM,09/Dec/16 6:56 PM,,,,,,,,,,fabric-devenv,,,,0,0.6,Documentation,,,,,,,"Need some documentation updates for the below items

Refer to - http://hyperledger-fabric.readthedocs.io/en/v0.6/v0.6_migration/

#  Replace ""**ChaincodeStub*"" with ""*ChaincodeStubInterface*"" for invoke, deploy, query
#  Chaincode calling chaincode using the APIs *InvokeChaincode* and *Querychaincode* doesn't take a function and takes data as bytes not a string
# Protocol spec still is inconsistent with the latest chaincode

{code:java}
https://github.com/hyperledger/fabric/blob/v0.6/docs/protocol-spec.md
https://github.com/hyperledger/fabric/blob/master/docs/protocol-spec.md

type Chaincode interface {
   Init(stub *ChaincodeStub, function string, args []string) ([]byte, error)
    Invoke(stub *ChaincodeStub, function string, args []string) ([]byte, error)
    Query(stub *ChaincodeStub, function string, args []string) ([]byte, error)
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00gdl:,,,,,,,,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Crash when run chaincode with pbft on 4 nodes.,FAB-538,12839,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,mqshen,mqshen,30/Sep/16 2:15 AM,31/May/17 1:58 PM,26/Apr/18 6:50 AM,13/Apr/17 11:39 PM,v0.6,,,,,,WON'T FIX,,,fabric-orderer,,,,0,,,,,,,,,"I run 4 vp nodes on one machine, and it crash when run for a while.
Node3's error log:


{code:none}
09:56:27.704 [consensus/pbft] execDoneSync -> INFO 093^[[0m Replica 2 finished execution 49, trying next
09:56:29.828 [consensus/pbft] executeOne -> INFO 094^[[0m Replica 2 executing/committing request batch for view=0/seqNo=50 and digest 27Z2b2ltYurwlR5fEeiNiUGZcgdyfE9pCmk45ktEFHGCMAx1oNEesjrntZZlHffzObXLv93ZVo6KYNFv0c0mzA==
fatal error: unexpected signal during runtime execution
[signal 0xb code=0x80 addr=0x0 pc=0x7f6d299a9618]

runtime stack:
runtime.throw(0x1028f80, 0x2a)
        /usr/local/go/src/runtime/panic.go:547 +0x90
runtime.sigpanic()
        /usr/local/go/src/runtime/sigpanic_unix.go:12 +0x5a

goroutine 12 [syscall, locked to thread]:
runtime.cgocall(0xbec3bd, 0xc8200c78b8, 0x100000000000000)
        /usr/local/go/src/runtime/cgocall.go:123 +0x11b fp=0xc8200c7880 sp=0xc8200c7850
github.com/hyperledger/fabric/vendor/github.com/tecbot/gorocksdb._Cfunc_rocksdb_write(0x2f54128, 0x3012a80, 0x2fff180, 0xc82013c5d8)
        github.com/hyperledger/fabric/vendor/github.com/tecbot/gorocksdb/_obj/_cgo_gotypes.go:2903 +0x3a fp=0xc8200c78b8 sp=0xc8200c7880
github.com/hyperledger/fabric/vendor/github.com/tecbot/gorocksdb.(*DB).Write(0xc820255440, 0xc82013c5d0, 0xc82013c5c0, 0x0, 0x0)
        /home/nginx/go/src/github.com/hyperledger/fabric/vendor/github.com/tecbot/gorocksdb/db.go:358 +0x2ed fp=0xc8200c79a0 sp=0xc8200c78b8
github.com/hyperledger/fabric/core/ledger.(*Ledger).CommitTxBatch(0xc820464160, 0xe72920, 0xc82045eeb0, 0x0, 0x0, 0x0, 0xc8208926a0, 0x4, 0x4, 0xc8203fba88, ...)
        /home/nginx/go/src/github.com/hyperledger/fabric/core/ledger/ledger.go:196 +0x5d1 fp=0xc8200c7b08 sp=0xc8200c79a0
github.com/hyperledger/fabric/consensus/helper.(*Helper).CommitTxBatch(0xc820468480, 0xe72920, 0xc82045eeb0, 0xc8203fba88, 0x2, 0x8, 0x0, 0x0, 0x0)
        /home/nginx/go/src/github.com/hyperledger/fabric/consensus/helper/helper.go:215 +0x236 fp=0xc8200c7c10 sp=0xc8200c7b08
github.com/hyperledger/fabric/consensus/executor.(*coordinatorImpl).ProcessEvent(0xc82045eeb0, 0xdd8680, 0xc820453bc0, 0x0, 0x0)
        /home/nginx/go/src/github.com/hyperledger/fabric/consensus/executor/executor.go:93 +0x9e4 fp=0xc8200c7df8 sp=0xc8200c7c10
github.com/hyperledger/fabric/consensus/util/events.SendEvent(0x7f6d2a77da90, 0xc82045eeb0, 0xdd8680, 0xc820453bc0)
        /home/nginx/go/src/github.com/hyperledger/fabric/consensus/util/events/events.go:113 +0x45 fp=0xc8200c7e38 sp=0xc8200c7df8
github.com/hyperledger/fabric/consensus/util/events.(*managerImpl).Inject(0xc8204652a0, 0xdd8680, 0xc820453bc0)
        /home/nginx/go/src/github.com/hyperledger/fabric/consensus/util/events/events.go:123 +0x4f fp=0xc8200c7e60 sp=0xc8200c7e38
github.com/hyperledger/fabric/consensus/util/events.(*managerImpl).eventLoop(0xc8204652a0)
        /home/nginx/go/src/github.com/hyperledger/fabric/consensus/util/events/events.go:132 +0xdb fp=0xc8200c7f88 sp=0xc8200c7e60
runtime.goexit()
        /usr/local/go/src/runtime/asm_amd64.s:1998 +0x1 fp=0xc8200c7f90 sp=0xc8200c7f88
created by github.com/hyperledger/fabric/consensus/util/events.(*managerImpl).Start
        /home/nginx/go/src/github.com/hyperledger/fabric/consensus/util/events/events.go:100 +0x35 
{code}

Node4'e error log:

{code:none}
09:56:27.704 [consensus/pbft] execDoneSync -> INFO 092^[[0m Replica 3 finished execution 49, trying next
09:56:29.833 [consensus/pbft] executeOne -> INFO 093^[[0m Replica 3 executing/committing request batch for view=0/seqNo=50 and digest 27Z2b2ltYurwlR5fEeiNiUGZcgdyfE9pCmk45ktEFHGCMAx1oNEesjrntZZlHffzObXLv93ZVo6KYNFv0c0mzA==
fatal error: unexpected signal during runtime execution
[signal 0xb code=0x80 addr=0x0 pc=0x7f5f2184a618]

runtime stack:
runtime.throw(0x1028f80, 0x2a)
        /usr/local/go/src/runtime/panic.go:547 +0x90
runtime.sigpanic()
        /usr/local/go/src/runtime/sigpanic_unix.go:12 +0x5a

goroutine 89 [syscall, locked to thread]:
runtime.cgocall(0xbec3bd, 0xc82012f8b8, 0x100000000000000)
        /usr/local/go/src/runtime/cgocall.go:123 +0x11b fp=0xc82012f880 sp=0xc82012f850
github.com/hyperledger/fabric/vendor/github.com/tecbot/gorocksdb._Cfunc_rocksdb_write(0x3622128, 0x36e0a60, 0x36cd180, 0xc820144588)
        github.com/hyperledger/fabric/vendor/github.com/tecbot/gorocksdb/_obj/_cgo_gotypes.go:2903 +0x3a fp=0xc82012f8b8 sp=0xc82012f880
github.com/hyperledger/fabric/vendor/github.com/tecbot/gorocksdb.(*DB).Write(0xc820251820, 0xc820144580, 0xc820144570, 0x0, 0x0)
        /home/nginx/go/src/github.com/hyperledger/fabric/vendor/github.com/tecbot/gorocksdb/db.go:358 +0x2ed fp=0xc82012f9a0 sp=0xc82012f8b8
github.com/hyperledger/fabric/core/ledger.(*Ledger).CommitTxBatch(0xc82046cd20, 0xe72920, 0xc820012550, 0x0, 0x0, 0x0, 0xc8202f14e0, 0x4, 0x4, 0xc820278e20, ...)
        /home/nginx/go/src/github.com/hyperledger/fabric/core/ledger/ledger.go:196 +0x5d1 fp=0xc82012fb08 sp=0xc82012f9a0
github.com/hyperledger/fabric/consensus/helper.(*Helper).CommitTxBatch(0xc820253100, 0xe72920, 0xc820012550, 0xc820278e20, 0x2, 0x8, 0x0, 0x0, 0x0)
        /home/nginx/go/src/github.com/hyperledger/fabric/consensus/helper/helper.go:215 +0x236 fp=0xc82012fc10 sp=0xc82012fb08
github.com/hyperledger/fabric/consensus/executor.(*coordinatorImpl).ProcessEvent(0xc820012550, 0xdd8680, 0xc8202f3aa0, 0x0, 0x0)
        /home/nginx/go/src/github.com/hyperledger/fabric/consensus/executor/executor.go:93 +0x9e4 fp=0xc82012fdf8 sp=0xc82012fc10
github.com/hyperledger/fabric/consensus/util/events.SendEvent(0x7f5f22661340, 0xc820012550, 0xdd8680, 0xc8202f3aa0)
        /home/nginx/go/src/github.com/hyperledger/fabric/consensus/util/events/events.go:113 +0x45 fp=0xc82012fe38 sp=0xc82012fdf8
github.com/hyperledger/fabric/consensus/util/events.(*managerImpl).Inject(0xc82000e420, 0xdd8680, 0xc8202f3aa0)
        /home/nginx/go/src/github.com/hyperledger/fabric/consensus/util/events/events.go:123 +0x4f fp=0xc82012fe60 sp=0xc82012fe38
github.com/hyperledger/fabric/consensus/util/events.(*managerImpl).eventLoop(0xc82000e420)
        /home/nginx/go/src/github.com/hyperledger/fabric/consensus/util/events/events.go:132 +0xdb fp=0xc82012ff88 sp=0xc82012fe60
runtime.goexit()
        /usr/local/go/src/runtime/asm_amd64.s:1998 +0x1 fp=0xc82012ff90 sp=0xc82012ff88
created by github.com/hyperledger/fabric/consensus/util/events.(*managerImpl).Start
        /home/nginx/go/src/github.com/hyperledger/fabric/consensus/util/events/events.go:100 +0x35
{code}
","OS:Ubuntu 16.04 LTS
fabric version: git commit 42ca84b78b9bb9fa29ea8008a7e53a7b01420591",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00gcx:,,,,,,,,mqshen,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Disable debug log for deploy transaction,FAB-510,12811,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jimthematrix,Ratnakar,Ratnakar,28/Sep/16 10:47 PM,28/Oct/16 3:51 AM,26/Apr/18 6:50 AM,28/Oct/16 3:51 AM,v0.5-developer-preview,v0.6,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"Deploy transaction content is too huge (about 13 MB) to display in debug logs.

Please avoid this for chaincode deploy

{code:java}

    /**
     * Execute a transaction
     * @param tx {Transaction} The transaction.
     */
    private execute(tx:Transaction):TransactionContext {
        debug('Executing transaction [%j]', tx);
        ...
    }

{code}

https://github.com/hyperledger/fabric/blob/master/sdk/node/src/hfc.ts#L1389


Below snippet should fix the problem


{code:java}
if (tx.pb.getType() != _fabricProto.Transaction.Type.CHAINCODE_DEPLOY) {
	debug('Executing transaction [%j]', tx);
}

{code}

NOTE : attached logs for reference.",,,,,,,,,,,,,,,,,,,,28/Sep/16 10:45 PM;Ratnakar;nodeapp_logs.txt.zip;https://jira.hyperledger.org/secure/attachment/10097/nodeapp_logs.txt.zip,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00gah:,,Sprint 4 - nodeSDK,,,,,,bmos299,Clayton Sims,mastersingh24,Ratnakar,,,,,,,,,,,29/Sep/16 12:47 PM;Clayton Sims;I took off fix version.  Gari should make this decision - run it by him to get agreement to fix in 0.6,29/Sep/16 6:10 PM;bmos299;This is the node sdk log when DEBUG=hfc is set.,"30/Sep/16 9:38 AM;mastersingh24;[~jimthematrix] - what's your take on this?  not hard to ""fix"" but I wonder if there is value in printing out the bytes of the deploy transaction?",,,,,,,,,,,,,,,,,,,,,
Fabric doc build failed with page not found error,FAB-506,12807,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,28/Sep/16 2:13 PM,29/Sep/16 7:32 PM,26/Apr/18 6:50 AM,29/Sep/16 7:32 PM,,,,,,,,,,,,,,0,Documentation,,,,,,,,"Fabric doc failed with below errors:

WARNING -  The page ""index.md"" contained a hyperlink to ""releases.md"" which is not listed in the ""pages"" configuration. 
WARNING -  The page ""index.md"" contained a hyperlink to ""Starter/fabric-starter-kit.md"" which is not listed in the ""pages"" configuration. 
ERROR   -  file not found: /home/docs/checkouts/readthedocs.org/user_builds/hyperledger-fabric/checkouts/latest/docs/SystemChaincodes/noop.md 
ERROR   -  Error building page SystemChaincodes/noop.md 
Traceback (most recent call last):",readthedocs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00g9t:,,,,,,,,rameshthoomu,,,,,,,,,,v0.6,feature/convergence,master,true,29/Sep/16 7:32 PM;rameshthoomu;fix has been submitted and merged,,,,,,,,,,,,,,,,,,,,,,,
Gossip discovery bug - resurrected member isn't added to alive list,FAB-482,12783,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,27/Sep/16 2:43 PM,06/Dec/16 9:25 PM,26/Apr/18 6:50 AM,10/Oct/16 1:09 PM,,,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,," Fixes a scenario in which a node is resurrected, but isn't found in the dead list. Then it needs to be added to the alive list regardless.

https://gerrit.hyperledger.org/r/#/c/1265/
101da5f79c93d02ee5d4047b0e1a8cc8b9ba3bbc",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|hzzzvx:,,Sprint 2,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Logging fix for gossip component,FAB-481,12782,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,yacovm,yacovm,yacovm,27/Sep/16 2:37 PM,06/Dec/16 9:25 PM,26/Apr/18 6:50 AM,27/Sep/16 2:37 PM,,,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,,"This is an urgent logging fix to a bug that might break gossip tests. 
in op/go-logging/backend.go, the log invokes IsEnabledFor which goes to a global field defaultBackend that IsEnabledFor method for that global field invokes GetLevel which reads from a map. If a logger is initalized at the same time another goroutine reads from the map, a concurrent read-write would occur and will result in panic.


https://gerrit.hyperledger.org/r/#/c/1261/
9617a6ec3c4d1ab4978cc6f823a38bfc5a7c43df",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,0|i00g73:,,Sprint 2,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
enroll member issue with grpc interfaces,FAB-471,12772,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,shimron,shimron,27/Sep/16 7:03 AM,02/Apr/17 12:40 PM,26/Apr/18 6:51 AM,02/Apr/17 12:40 PM,v0.6,,,,,,WON'T FIX,,,fabric-membersrvc,,,,0,,,,,,,,,"I was trying to register new users with CA's grpc interfaces using golang. When I tried to enroll the ""admin"" user, I got an error ""Signature verification failed."" from  ECA . 
I was confused, because the enrollUser function I used was copied from the ""eca_test.go"" file, and when I run the command ""go test"" under membersrvc/ca package, those tests passed without any errors.
 I googled a lot about this issue, but not found anything useful. So I create this here, hope someone can give some tips.
 BTW, I also posted this issue on stackoverflow. [http://stackoverflow.com/questions/39701198/enroll-member-request-fails-with-signature-verification/39701671?noredirect=1#comment66723076_39701671]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00kkp:,,,,,,,,mastersingh24,shimron,,,,,,,,,,,,,02/Apr/17 12:40 PM;mastersingh24;We've moved away from the GRPC-based APIs provided by membersrvs in v0.6 to HTTP/RESTful interfaces in fabric-ca.,,,,,,,,,,,,,,,,,,,,,,,
node-sdk build fails on Fabric V0.6 ,FAB-438,12739,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,angrbrd,Ratnakar,Ratnakar,25/Sep/16 3:39 PM,04/Nov/16 4:27 PM,26/Apr/18 6:51 AM,01/Nov/16 9:24 PM,v0.6,,,,,,v0.6,,,fabric-sdk-node,,,,0,0.6,node-SDK,,,,,,,"node-sdk build fails with below error on on Fabric V0.6 


{code:java}
src/hfc.ts(2411,24): error TS2339: Property 'notBefore' does not exist on type 'Attribute'.
src/hfc.ts(2411,59): error TS2339: Property 'notBefore' does not exist on type 'Attribute'.
src/hfc.ts(2412,24): error TS2339: Property 'notAfter' does not exist on type 'Attribute'.
src/hfc.ts(2412,57): error TS2339: Property 'notAfter' does not exist on type 'Attribute'.
typings/globals/node/index.d.ts(415,11): error TS2430: Interface 'NodeBuffer' incorrectly extends interface 'Uint8Array'.
  Types of property 'fill' are incompatible.
    Type '(value: any, offset?: number, end?: number) => Buffer' is not assignable to type '(value: number, start?: number, end?: number) => this'.
      Type 'Buffer' is not assignable to type 'this'.
make[1]: *** [lib/hfc.js] Error 2
make[1]: Leaving directory `/opt/gopath/src/github.com/hyperledger/fabric/sdk/node'
make: *** [sdk/node] Error 2

{code}

",,,,,,,,,,,,,,,,,,,,01/Nov/16 9:19 PM;angrbrd;FAB-438_1;https://jira.hyperledger.org/secure/attachment/10210/FAB-438_1,04/Nov/16 3:54 PM;devchaud;log.txt;https://jira.hyperledger.org/secure/attachment/10216/log.txt,25/Sep/16 3:38 PM;Ratnakar;node_sdk_err_logs.txt;https://jira.hyperledger.org/secure/attachment/10093/node_sdk_err_logs.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzza:d,,,,,,,,angrbrd,chenhong8010,devchaud,rain8010,Ratnakar,,,,,,,,,,26/Sep/16 3:09 PM;angrbrd;I have already root caused this issue and will put in a fix today. Thanks!,26/Sep/16 4:34 PM;angrbrd;Patch set is on master branch: http://gerrit.hyperledger.org/r/1241,"26/Sep/16 4:49 PM;angrbrd;Patch set is on v0.6 branch: https://gerrit.hyperledger.org/r/#/c/1243
Change must be merged into both branches, otherwise v0.6 is also broken with same errors.","26/Sep/16 6:30 PM;angrbrd;Commit c7963ea7ebafff2c49353b54c138a027f6996986 on master
Commit cd0c5dd89e23a75d826d8136d1235ab215c11657 on v0.6

Closing.",01/Nov/16 11:39 AM;devchaud;Is this bug fixed as mentioned in the comments.. The resolution status still reads as unresolved.,"01/Nov/16 11:40 AM;devchaud;Get below error:
$ make all
[BUILD] SDK documentation
node_modules/.bin/typedoc -m amd \
                --name 'Node.js Hyperledger Fabric SDK' \
                --includeDeclarations \
                --excludeExternals \
                --excludeNotExported \
                --out doc \
                src/hfc.ts typedoc-special.d.ts

Using TypeScript 2.0.6 from /opt/gopath/src/github.com/hyperledger/fabric/sdk/node/node_modules/typedoc/node_modules/typescript/lib
Error: /opt/gopath/src/github.com/hyperledger/fabric/sdk/node/src/hfc.ts(2410)
 Property 'notBefore' does not exist on type 'Attribute'.
Error: /opt/gopath/src/github.com/hyperledger/fabric/sdk/node/src/hfc.ts(2410)
 Property 'notBefore' does not exist on type 'Attribute'.
Error: /opt/gopath/src/github.com/hyperledger/fabric/sdk/node/src/hfc.ts(2411)
 Property 'notAfter' does not exist on type 'Attribute'.
Error: /opt/gopath/src/github.com/hyperledger/fabric/sdk/node/src/hfc.ts(2411)
 Property 'notAfter' does not exist on type 'Attribute'.
Error: /opt/gopath/src/github.com/hyperledger/fabric/sdk/node/typings/globals/node/index.d.ts(414)
 Interface 'NodeBuffer' incorrectly extends interface 'Uint8Array'.
  Types of property 'fill' are incompatible.
    Type '(value: any, offset?: number, end?: number) => Buffer' is not assignable to type '(value: number, start?: number, end?: number) => this'.
      Type 'Buffer' is not assignable to type 'this'.
make: *** [doc/index.html] Error 4
","01/Nov/16 12:24 PM;chenhong8010;I have the same issue. It seems adding the ""typescript:1.8.10"" in the sdk/node/pakage.json does not work, since ""typescript:2.0.6"" is specified in the package.json in  the 'typing' subdirection of 'node_modules'.   ","01/Nov/16 9:23 PM;angrbrd;I am on Fabric branch v0.6 commit b111ac5e112dc2a4b5840780426a3a7646d278a2 (latest commit).

The node sdk build (make node-sdk) works for me inside Vagrant. I am attaching the log here. All the sdk unit tests (make node-sdk-unit-tests) also pass for me inside Vagrant. I am closing this issue now, as it should have been closed some time ago when the referenced fixes went in. If you are still seeing this on the latest version of the v0.6 branch, please give me the exact recreate steps you are following and the system you are running on.

Thanks!

[^FAB-438_1] ",02/Nov/16 4:00 AM;devchaud;How can I find out which version of fabric branch I am on. I had checked out the code on 10 Oct and hence sure that I am on version 0.6 as this version was released on 16 sept.,"02/Nov/16 4:04 AM;devchaud;I am following below steps:
1. vagrant up
2. vagrant ssh
3.  cd /opt/gopath/src/github.com/hyperledger/fabric/sdk/node
4. make all, which gives below error

vagrant@hyperledger-devenv:v0.1.0-e8b1513:/opt/gopath/src/github.com/hyperledger/fabric/sdk/node$ make all
[BUILD] SDK documentation
node_modules/.bin/typedoc -m amd \
                --name 'Node.js Hyperledger Fabric SDK' \
                --includeDeclarations \
                --excludeExternals \
                --excludeNotExported \
                --out doc \
                src/hfc.ts typedoc-special.d.ts

Using TypeScript 2.0.6 from /opt/gopath/src/github.com/hyperledger/fabric/sdk/node/node_modules/typedoc/node_modules/typescript/lib
Error: /opt/gopath/src/github.com/hyperledger/fabric/sdk/node/src/hfc.ts(2410)
 Property 'notBefore' does not exist on type 'Attribute'.
Error: /opt/gopath/src/github.com/hyperledger/fabric/sdk/node/src/hfc.ts(2410)
 Property 'notBefore' does not exist on type 'Attribute'.
Error: /opt/gopath/src/github.com/hyperledger/fabric/sdk/node/src/hfc.ts(2411)
 Property 'notAfter' does not exist on type 'Attribute'.
Error: /opt/gopath/src/github.com/hyperledger/fabric/sdk/node/src/hfc.ts(2411)
 Property 'notAfter' does not exist on type 'Attribute'.
Error: /opt/gopath/src/github.com/hyperledger/fabric/sdk/node/typings/globals/node/index.d.ts(414)
 Interface 'NodeBuffer' incorrectly extends interface 'Uint8Array'.
  Types of property 'fill' are incompatible.
    Type '(value: any, offset?: number, end?: number) => Buffer' is not assignable to type '(value: number, start?: number, end?: number) => this'.
      Type 'Buffer' is not assignable to type 'this'.
make: *** [doc/index.html] Error 4

","02/Nov/16 3:31 PM;angrbrd;Hi [~devchaud],

If you could please verify for me which fabric branch you are on by checking which branch you had checked out from Gerrit. You should be on the latest commit of the v0.6 branch.

$  git branch -vv

master 18a44d0 [origin/master: behind 4] Merge ""[FAB-702] - Add gossip node metastate object""
--> v0.6   b111ac5 [origin/v0.6] Merge ""Merge busywork master into v0.6"" into v0.6

When you are on the v0.6 branch, if you would please follow these steps:

1. Start up vagrant:
cd /fabric/devenv
vagrant up

2. Change to the /fabric directory
cd /opt/gopath/src/github.com/hyperledger/fabric

3. Make sure you do not have node_modules folder as it may have newer version of typescript inside
make node-sdk clean

4. Build the sdk from the fabric directory
make node-sdk

I just confirmed that this works with no errors on the v0.6 branch.

Thanks!","03/Nov/16 3:40 AM;devchaud;vagrant@hyperledger-devenv:v0.1.0-e8b1513:/opt/gopath/src/github.com/hyperledger/fabric$ git branch -vv
* master e8b1513 [origin/master] Merge ""Modified Dockerfile for the SDK sample""

Not sure which version this is..",03/Nov/16 3:41 AM;devchaud;I guess this is master branch ,"03/Nov/16 11:07 AM;devchaud;I took the latest code for v0.6 from git and now I have to reconfigure vagrant and docker images which is a lengthy process. Is there any way to just update the hyperledger code without the need for reconfiguring vagrant and docker?

I will let you know once my VM is up and running.","03/Nov/16 2:56 PM;angrbrd;[~devchaud],

It looks like you are on the master branch, instead of the v0.6 branch. The Node.js sdk tests do not run on master, as this code is now being split out into its own repository for the v1.0 work. There are no plans to make this code ever run on master. In fact, if you sync up to the latest state on master, this code is no longer in there, it's already been removed from master. You need to switch to the v0.6 branch. Unfortunately, you need to switch to the v0.6 branch and rebuild. There is no other way to do that, as the Docker images are being built from the version of the code that you have locally.

Let me know if following my steps above after switching to the v0.6 branch resolves your issue.

Thanks.","04/Nov/16 10:17 AM;devchaud;Thanks Anna. I will let you know. 

Setting up the vagrant boxes and docker images is a huge task, as from my office network there are many network errors related to authorization, SSL and blocked URL's. Will keep you posted once I am done with the installation.",04/Nov/16 3:54 PM;devchaud;Anna: I think it worked fine. See the attached log.txt. Thanks for your help in this regards,04/Nov/16 4:27 PM;angrbrd;Great! Thank you for letting me know :-].,,,,,,
Sending an invoke transaction with confidentiality enabled to a chaincode without it enabled cause the chaincode to exit.,FAB-435,12736,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,zmanian,zmanian,24/Sep/16 4:45 PM,11/Apr/17 7:04 PM,26/Apr/18 6:51 AM,11/Apr/17 7:04 PM,,,,,,,,,,fabric-endorser,,,,0,,,,,,,,,"Documenting observed and partially investigated behavior.

1. Launch a fabric network with confidentiality disabled.

2. Deploy chaincode

3. Invoke the chaincode from the SDK with confidentiality enabled.

4. the chaincode process exits with ErrDifferrentConfidentialityProtocolVersion.

What I suspect should have happened is that the invoke tx should never have been submitted to the chaincode process with the confidentiality mismatch.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhy:zz9xn,,,,,,,,denyeart,mastersingh24,muralisr,zmanian,,,,,,,,,,,"24/Sep/16 5:37 PM;muralisr;[~zmanian] Agreed. Ideally, there should be a mechanism to compare and stop on breaking config changes. 

[~binhn], [~ChristopherFerris], [~mastersingh24], [~zmanian] 
Should this be considered in master or as part of new work in the convergence branch ?  ","25/Sep/16 9:56 AM;mastersingh24;I would defer this at this point.  It's a bit ugly and inconvenient, but given things will be changing in V1 I suspect this is not worth fixing on the v0.6 release stream","11/Apr/17 7:04 PM;denyeart;Not applicable in v1 - will not be fixed, closing.",,,,,,,,,,,,,,,,,,,,,
"when i docker-compose  up,i have get some error (Peer FSM cannot handle message)",FAB-428,12729,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,zhangzhen30,zhangzhen30,23/Sep/16 6:24 AM,02/Apr/17 12:42 PM,26/Apr/18 6:51 AM,02/Apr/17 12:42 PM,v0.6,,,,,,WON'T FIX,,,fabric-peer,,,,0,,,,,,,,,"vp1_1  | 06:04:41.607 [peer] handleChat -> ERRO 057 Error handling message: Peer FSM cannot handle message (DISC_GET_PEERS) with payload size (0) while in state: created
vp1_1  | 06:04:46.607 [peer] handleChat -> ERRO 058 Error handling message: Peer FSM cannot handle message (DISC_GET_PEERS) with payload size (0) while in state: created


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00g2f:,,,,,,,,altharp,mastersingh24,ShenthilkumarCK,zhangzhen30,,,,,,,,,,,"26/Oct/16 6:46 PM;altharp;Repeating error messages such as the following are extremely prevalent in validating peer logs.  This accounts for many of the messages in the peer logs when using Hyperledger Fabric V0.5.3.

ERRO 02b[0m Error handling message: Peer FSM cannot handle message (DISC_GET_PEERS) with payload size (0) while in state: created 

The message appears to be written to the log once a minute.

All of these peer FSM messages make it hard to distinguish other messages which might be just as important or more important.  Eliminating this type of repeating message would make the peer logs more readable. ",02/Apr/17 12:42 PM;mastersingh24;The peer to peer discovery / communication in v0.6 has been replaced with a new gossip layer in v1.0.0 so this is no longer relevant as we are no longer actively developing v0.6,,,,,,,,,,,,,,,,,,,,,,
[node - SDK] member.*etRoles() Not enough information to set or interpret roles,FAB-422,12723,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jjjjibm,jjjjibm,21/Sep/16 6:45 PM,03/Apr/17 3:48 PM,26/Apr/18 6:51 AM,03/Apr/17 3:48 PM,,,,,,,WON'T FIX,,,fabric-sdk-node,,,,0,v0.6,,,,,,,,"Description: 
Here is the documentation for member.setRoles()

setRoles

    setRoles(roles: string[]): void

        Defined in src/hfc.ts:807

    Set the roles.
    Parameters
      *  roles: string[]

        The roles.
*    Returns void
There's not enough information to set roles to a useful value. 
",Vlaunch VM running Ubuntu 14 and building fabric and node SDK from master.   Neither vagrant nor virtualbox are involved.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00g1r:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
broken links in Node-sdk docs,FAB-411,12712,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,19/Sep/16 4:46 PM,24/Sep/16 8:08 PM,26/Apr/18 6:51 AM,24/Sep/16 8:08 PM,,,,,,,,,,,,,,0,Documentation,,,,,,,,"Observed few broken links in node-sdk docs and grpc port number is not correct in the below document.

http://hyperledger-fabric.readthedocs.io/en/latest/nodeSDK/sample-standalone-app/
Below are the broken links: 
seems Memebership-service.md document is removed but still referring to the doc and app-developer-overview have to rename  to app-overview.md

WARNING -  The page ""nodeSDK/app-overview.md"" contained a hyperlink to ""nodeSDK/membership-services.md"" which is not listed in the ""pages"" configuration. 
WARNING -  The page ""nodeSDK/node-sdk-indepth.md"" contained a hyperlink to ""nodeSDK/app-developer-overview.md"" which is not listed in the ""pages"" configuration",readthedocs and markdown,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fzb:,,,,,,,,rameshthoomu,,,,,,,,,,,,,,24/Sep/16 8:08 PM;rameshthoomu;Bret harrison fixed this in commit https://gerrit.hyperledger.org/r/#/c/1195/,,,,,,,,,,,,,,,,,,,,,,,
recreate v0.6 branch,FAB-405,12706,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,ChristopherFerris,ChristopherFerris,15/Sep/16 4:25 PM,15/Sep/16 4:26 PM,26/Apr/18 6:51 AM,15/Sep/16 4:26 PM,,,,,,,v0.6,,,,,,,0,build-system,,,,,,,,recreate v0.6 branch after all of the identified patches have been merged.,,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fy7:,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The chaincode log level cannot be changed,FAB-394,12695,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,wlahti,altharp,altharp,14/Sep/16 5:18 PM,05/Apr/17 2:21 PM,26/Apr/18 6:51 AM,16/Sep/16 6:18 PM,,,,,,,,,,fabric-endorser,,,,0,,,,,,,,,"Chaincode logs become large since the debug level of logging is enabled.  When attempting to change the chaincode log level by updating the logging.chaincode parameter in the core.yaml file to warning, no difference in logging is observed and there are still debug level log entries.  There is not a way to control the content of chaincode logs by either environment variables or the core.yaml file.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fw7:,,,,,,,,altharp,wlahti,,,,,,,,,v0.6,feature/convergence,master,true,20/Sep/16 3:24 PM;wlahti;The fix was checked in at the end of last week and is now available in master.,,,,,,,,,,,,,,,,,,,,,,,
Search is not working in fabric project documentation (readthedocs),FAB-385,12686,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,13/Sep/16 2:20 PM,26/Oct/16 2:11 PM,26/Apr/18 6:51 AM,19/Sep/16 5:56 PM,,,,,,,,,,,,,,0,build-system,,,,,,,,If I try to search for something under project (http://hyperledger-fabric.readthedocs.io/en/latest/?badge=latest) but nothing is found regardless of the word I enter. ,readthedocs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fun:,,,,,,,,ChristopherFerris,rameshthoomu,,,,,,,,,v0.6,feature/convergence,master,true,19/Sep/16 5:56 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/1103/,19/Sep/16 5:56 PM;ChristopherFerris;verified it seems to have been fixed. Thanks!,,,,,,,,,,,,,,,,,,,,,,
docs out of synch with new chaincode api,FAB-366,12667,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,nickgaski,ChristopherFerris,ChristopherFerris,13/Sep/16 12:02 AM,04/Oct/16 9:41 AM,26/Apr/18 6:51 AM,04/Oct/16 9:41 AM,,,,,,,v0.6,,,,,,,0,chaincode,Documentation,,,,,,,"http://hyperledger-fabric.readthedocs.io/en/latest/Setup/Chaincode-setup/#running-the-cli-or-rest-api

uses dated signature",,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00frr:,,,,,,,,bmos299,ChristopherFerris,nickgaski,,,,,,,,,,,,29/Sep/16 6:04 PM;nickgaski;chris can you elaborate on this please.  The rest calls haven't changed.  what needs to be fixed here for v.6,"30/Sep/16 3:48 PM;bmos299;Please see https://jira.hyperledger.org/browse/FAB-543.  This one is some work.
","04/Oct/16 9:41 AM;ChristopherFerris;All, I fixed this over the weekend.",,,,,,,,,,,,,,,,,,,,,
shout from the mountaintops when non-deterministic chaincode triggers network failure,FAB-339,12640,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,scottz,scottz,09/Sep/16 9:36 PM,27/Oct/17 2:33 PM,26/Apr/18 6:51 AM,06/Oct/16 12:29 AM,,,,,,,,,,fabric-orderer,,,,0,0.6,Usability,,,,,,,"Efforts to debug customer issues have uncovered a need for additional capabilities in order to support the product. Currently it takes much longer than it should, in many circumstances.

For example, in one scenario, a real problem is that a major assumption of the hyperledger fabric could be broken by customers writing chaincode: that is, the network assumes the chaincode is deterministic, which means all ""good"" validating peers will reach the same results with the same inputs. A customer could run non-deterministic chaincode, which breaks that assumption, and can lead to undesirable behavior such as a halting consensus network!

The community may still suggest that chaincode to be deterministic in the next architectural release for the network and chaincode to work most smoothly - although mechanisms are expected to be put in place in the fabric to prevent any customers' non-deterministic chaincode from corrupting the ledger. In the meantime, we can help ourselves and our customers by slightly changing a few things once this situation is discovered. This issue is to request:

Raise the visibility by changing the detail level of any log that does get printed when these circumstances are reached, so it gets printed at ALL log settings, instead of being printed only at the debug level. This is a critical log: the peer is effectively inoperable, and the network could also be inoperable.

Change the log message to more clearly state the critical nature of the problem: that the network has halted because the ledgers have diverged - as a result of the user's non-deterministic chaincode. When a peer cannot obtain a new sequence number, as can happen in this situation, it means that the peer's ledger copy has diverged and the peer can no longer participate in the consensus network. And once the ledger copies diverge on enough (F+1) peers, then the network effectively halts. Once one drops out, then it is very likely that others will drop out too (possibly simultaneously although it could depend on the external inputs), since the same chaincode instance is deployed throughout the network. It was observed that the chaincode ledgers diverged as a result of the chaincodes reaching different results, and committing those variations to their own ledgers.

Do anything else that can be done to raise visibility immediately once any peer realizes that it has effectively dropped out - and especially once there are no longer enough participating peers in the network for consensus to be reached and proceed.

Today, all deployments on a given peer network share the same ledger and thus would be affected. However, it seems best that we do not make the peers intentionally crash, because with just some minor changes the same peers conceivably could be used to provide a service for several networks - each having their own separate ledgers. Separating the ledger behavior from the peer behavior would mean that one customer network chaincode deployment would not totally take down the peers and affect other deployments.

The upcoming release in several months of the new architecture, specifically the endorsers, should prevent such a divergence of the ledgers. But until that time, fixing this issue will reduce the support efforts and help to educate users of the fabric about eliminating any non-deterministic behavior in their chaincode.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00dvq:t,,,,,,,,kchristidis,kletkeman,scottz,,,,,,,,,,,,"13/Sep/16 6:30 AM;kchristidis;Scott, can you tell me whether the solution outlined here would cover you or not?

https://jira.hyperledger.org/browse/FAB-189

I have submitted two patches for this (and I'll adjust them so that a ""network can no longer make progress"" message is printed before panicking, according to Gari's request):

https://gerrit.hyperledger.org/r/#/c/985/
https://gerrit.hyperledger.org/r/#/c/989/","13/Sep/16 4:08 PM;scottz;Yes, those planned commits would appear to address this issue, as long as they include log messages requested by reviewers for every instance where we decide to panic. The additional logs must:
# share the reason for the panic,
# suggest the probable causes, where possible, and how to resolve and prevent,
# be customer-friendly.
","13/Sep/16 4:40 PM;kchristidis;Scott, the problem is we shouldn't be too verbose with our logs. Check this one for instance and look into review #1: https://gerrit.hyperledger.org/r/#/c/585/

I'll gladly take suggestions for what to put in there, but it has to be succinct.","15/Sep/16 1:32 PM;scottz;I understand that generally we don't want verbose logs filling up disk space. But they must be as useful as possible to the intended user. Is there an operations guide published and maintained where we provide more verbose information that is more useful to operations folks? Assuming not, then I see more benefit than harm in adding information useful for operators and support personnel, who are the intended users of the logs. One could easily argue that the log should be MORE verbose, at least in this type of circumstance. The network is halting! What is the operator supposed to do next? What is the recovery action? Am I correct in believing that this particular log will be printed once and only once (per peer), followed by a panic and all processing will stop? It's not going to fill up any disks.","28/Sep/16 3:38 PM;scottz;FAB-189 provided a new message with a panic and the peer halts:
""Network unable to find stable certificate for seqNo %d (%d different values observed already)""

I think this could be made more clear by adding that the likely cause is that the client chaincode is non-deterministic. That way the customers know what to do next. A little more text here shouldn't cause a problem with disk space, since the network is halting anyways.

On the other hand, since our v0.5 or v0.6 support people will be involved and reading the logs, I suppose they should know what that message implies, so maybe this is sufficient. I am ok with closing this issue if there are no other plans in the works to enhance this further.","14/Oct/16 8:18 PM;kletkeman;Perhaps customers should be encouraged to test locally with a rudimentary tool to signal divergence immediately ... I've put something together that is trivial to set up on node-red and talks to 4 peer networks. While this does not eliminate the risk, it would help to raise awareness.

https://github.com/ibm-watson-iot/blockchain-samples/tree/master/testing/node-red/fabricDivergenceMonitor
","31/May/17 2:14 PM;kletkeman;I'm curious as to why this bug is still around? In Fabric v1, the chaincode is executed on a set of endorsers and the read / write sets are compared by the client SDK or the client itself. The decision to proceed with the transaction is made at that point depending on the local policy. The network does not care what the policy is, and is perfectly happy to commit a flawed read / write set into the chain.

In other words, the system should be designed to prevent non-determinism of state written to the database, but letting it through has no effect on the operation of the network itself.","31/May/17 3:11 PM;kchristidis;This is a leftover from 0.6 and is indeed no longer relevant.

Was bumped because of some mass editing. Thanks for the heads up, closing.",,,,,,,,,,,,,,,,
"transactions processed more than once, after stop and start peers 2,1,0,2,1,0 sequentially in decreasing order twice",FAB-337,12638,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,scottz,scottz,09/Sep/16 8:50 PM,29/Jun/17 12:47 PM,26/Apr/18 6:51 AM,07/Apr/17 8:06 PM,,,,,,,WON'T FIX,,,fabric-orderer,,,,0,0.6,,,,,,,,"Problem Summary

This issue is a port to Jira from GitHub hyperledger fabric issue #2376 https://github.com/hyperledger-archives/fabric/issues/2376 

The problem was originally found in master image 346f9fb, as well as v0.5 image 3e0e80a, in July. Sometimes transactions are processed more than once, after stopping and starting peers 2,1,0,2,1,0 sequentially in decreasing order twice. In the attached logs with a vagrant env with 4 peers in docker containers, the problem can be seen after the 2nd cycle, after peer0 is stopped the 2nd time. I collected debug logs; hopefully someone can determine which peer(s) submitted duplicate transactions. Blocksize is 2. This and other parameters are captured in the attached script output file GO_TEST__CAT_03_SnIQRnIQ_cycleDown.go__Aug092016 
The entire zipfile including logs is attached to the github issue: https://github.com/hyperledger-archives/fabric/files/409933/dupTx_v05_3e0e80a.tar.gz. 
(Note that testcase has since been renamed in the currently maintained test suite as CAT_111_SnIQRnIQ_cycleDownLoop.go.)

In this scenario, some transactions are processed more than once. The test script counts the transactions it sends, and the values for A & B are affected more than they should be. The duplicated processing of some invokes transactions (which I had sent only once into the network) occurs after stopping and then restarting peer 1 and then peer 0. After that, the value of B is higher than it should be.


How To Reproduce

Refer to attached stdout file for full details. The test executes the following. Between each step, we sleep several seconds (between 30 and 60, usually) and send 100 invokes and query each running peer.

Stop Peer 2
Start Peer 2
Stop Peer 1
Start Peer 1
Stop Peer 0
Start Peer 0
Stop Peer 2
Start Peer 2
Stop Peer 1
Start Peer 1
Stop Peer 0

Note: before stopping peer 0, we see these query results:

PASSED QUERY TEST: Expected A/B (997996/1002004) MATCHED on enough/appropriate Peers. ACTUALs (node:A/B): 0:997996/1002004 1:998059/1001941 2:997996/1002004 3:997996/1002004
PASSED CHAIN HEIGHT TEST: matches on enough/appropriate Peers. Expected CH (1021). Actual CHs: PEER0(1019) PEER1(986) PEER2(1019) PEER3(1019)

After stopping peer 0, and sending another 100 invoke requests, observe that the value of B (in all consensus peers) is greater than the expected value by 32! And the chainheight also is much higher than expected; instead of being 2 less than the expected value, the CH is 14 higher (a difference of +16). Clearly, some transactions were processed multiple times.

POST/Chaincode: QUERY all running peers for a and b, and chainheight
STEP 3, cycle 2/2 after STOP PEER 0 and Invokes
FAILED QUERY TEST: the required peers do NOT match!!!!!!!!!!
EXPECTED A/B: 997896 1002104.
ACTUALs:
PEER 1 997864 1002136
PEER 2 997864 1002136
PEER 3 997864 1002136
PASSED CHAIN HEIGHT TEST: matches on enough/appropriate Peers. Expected CH (1072). Actual CHs: PEER1(1086) PEER2(1086) PEER3(1086)
",,,,,,,,,,,,,,,,,,,,09/Sep/16 8:49 PM;scottz;GO_TEST__CAT_03_SnIQRnIQ_cycleDown.go__Aug092016;https://jira.hyperledger.org/secure/attachment/10081/GO_TEST__CAT_03_SnIQRnIQ_cycleDown.go__Aug092016,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fnb:,,,,,,,,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"no http response from Peer0 after deploy and invoke, when peers 1 and 2 are docker paused",FAB-336,12637,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,scottz,scottz,09/Sep/16 8:30 PM,29/Jun/17 12:47 PM,26/Apr/18 6:51 AM,07/Apr/17 8:06 PM,,,,,,,WON'T FIX,,,fabric-orderer,,,,0,0.6,,,,,,,,"Problem Summary

This issue is a port to Jira from GitHub hyperledger fabric issue #2357 https://github.com/hyperledger-archives/fabric/issues/2357

* GO SDK Testcase hangs when it gets no http response from peer0 during processing of invoke after sending a Deploy. This only happens when I have executed ""docker pause"" on two peers (leaving only 2 running, so not enough for consensus). 
* When rerun test with just one paused, there is no problem.
* When using Stop/Restart instead of Pause/Unpause, there is no problem even with two peers.
* (I could add an http timeout to the testcase code, but that would not change the peers' behavior when all peers in the network cannot receive messages from each other).
* Attached testcase, testcase output file, and DEBUG Logs for all 4 peers:  failCAT11pause.tar.gz

Here is the snippet of code from peerrest/rest.go. It hangs, waiting for the ""client.Do()"" to return:

    if verbose { fmt.Println(""PostChainAPI() call http.Client.Do"") }
    client := &http.Client{}
    resp, err := client.Do(req)
    if verbose { fmt.Println(""PostChainAPI() AFTER call http.Client.Do"") }

How to Reproduce

Detailed steps of testcase CAT_11_S2S1_IQDIQ.go (aka  CAT_201_S2S1_IQDIQ.go  in new test suite):
# Establish vagrant/docker network with security and 4 validating peers.
# Pause Peers(  2, 1  )
# Invoke On Peer 0
# Invoke On Peer 3
# QueryAllPeers( ""STEP 3, after STOP PEERS 2 and 1, and Invokes"" )
# Deploy (5000,5000) to Peer3
# Invoke On Peer 0    <------------------- testcase gets stuck here
# Invoke On Peer 3
# QueryAllPeers(""STEP 6"")

Note: this is a key section of LOGFILE_PEER0 when the invoke is being processed and the test hangs, while peers 1 and 2 are paused.

15:28:27.883 [rest] ProcessChaincode -> INFO d6d^[[0m REST processing chaincode request...
15:28:27.883 [rest] processChaincodeInvokeOrQuery -> INFO d6e^[[0m REST invoke chaincode...
15:28:27.884 [rest] processChaincodeInvokeOrQuery -> INFO d6f^[[0m Local user 'test_user0' is already logged in. Retrieving login token.
^[[36m15:28:27.884 [devops] invokeOrQuery -> DEBU d70^[[0m Initializing secure devops using context test_user0
15:28:27.884 [crypto] invokeOrQuery -> INFO d71^[[0m Initializing client [test_user0]...
15:28:27.950 [crypto] invokeOrQuery -> INFO d72^[[0m Initializing client [test_user0]...done!
^[[36m15:28:27.950 [devops] createExecTx -> DEBU d73^[[0m Creating secure invocation transaction 925e3e47-f699-4851-9123-464789decf8c
^[[36m15:28:27.950 [devops] invokeOrQuery -> DEBU d74^[[0m Sending invocation transaction (925e3e47-f699-4851-9123-464789decf8c) to validator
^[[36m15:28:27.951 [peer] sendTransactionsToLocalEngine -> DEBU d75^[[0m Marshalling transaction CHAINCODE_INVOKE to send to local engine
^[[36m15:28:27.951 [peer] sendTransactionsToLocalEngine -> DEBU d76^[[0m Sending message CHAIN_TRANSACTION with timestamp seconds:1470151707 nanos:951055649 to local engine

+++ This is where the test script hangs. the SDK never gets a response for the invoke transaction to peer 0 (when peers 1 & 2 are paused).
 
 
Below is a similar section of logs for comparison, from a successful testcase when peers 1 and 2 are stopped (instead of paused, all else being equal). Observe at the end: REST successfully submitted invoke transaction.

15:56:22.513 [rest] ProcessChaincode -> INFO 138c^[[0m REST processing chaincode request...
15:56:22.513 [rest] processChaincodeInvokeOrQuery -> INFO 138d^[[0m REST invoke chaincode...
15:56:22.515 [rest] processChaincodeInvokeOrQuery -> INFO 138e^[[0m Local user 'test_user0' is already logged in. Retrieving login token.
^[[36m15:56:22.517 [devops] invokeOrQuery -> DEBU 138f^[[0m Initializing secure devops using context test_user0
15:56:22.517 [crypto] invokeOrQuery -> INFO 1390^[[0m Initializing client [test_user0]...
15:56:22.596 [crypto] invokeOrQuery -> INFO 1391^[[0m Initializing client [test_user0]...done!
^[[36m15:56:22.596 [devops] createExecTx -> DEBU 1392^[[0m Creating secure invocation transaction 31883cd9-7fe3-44d0-be43-a93f678481fb
^[[36m15:56:22.597 [devops] invokeOrQuery -> DEBU 1393^[[0m Sending invocation transaction (31883cd9-7fe3-44d0-be43-a93f678481fb) to validator
^[[36m15:56:22.597 [peer] sendTransactionsToLocalEngine -> DEBU 1394^[[0m Marshalling transaction CHAINCODE_INVOKE to send to local engine
^[[36m15:56:22.597 [peer] sendTransactionsToLocalEngine -> DEBU 1395^[[0m Sending message CHAIN_TRANSACTION with timestamp seconds:1470153382 nanos:597205991 to local engine
15:56:22.597 [crypto] CloseClient -> INFO 1396^[[0m Closing client [test_user0]...
^[[36m15:56:22.597 [consensus/obcpbft] ProcessEvent -> DEBU 1397^[[0m Replica 0 batch main thread looping
^[[36m15:56:22.598 [peer] SendMessage -> DEBU 1398^[[0m Sending message to stream of type: CONSENSUS
^[[36m15:56:22.600 [consensus/obcpbft] logAddTxFromRequest -> DEBU 1399^[[0m Replica 0 adding request from 0 with transaction 31883cd9-7fe3-44d0-be43-a93f678481fb into outstandingReqs
^[[36m15:56:22.600 [consensus/obcpbft] startTimerIfOutstandingRequests -> DEBU 139a^[[0m Replica 0 not starting timer because skip in progress or current exec or in view change
15:56:22.612 [rest] processChaincodeInvokeOrQuery -> INFO 139b^[[0m Successfully submitted invoke transaction with txuuid (31883cd9-7fe3-44d0-be43-a93f678481fb)
15:56:22.612 [rest] ProcessChaincode -> INFO 139c^[[0m REST successfully submitted invoke transaction: {""jsonrpc"":""2.0"",""result"":{""status"":""OK"",""message"":""31883cd9-7fe3-44d0-be43-a93f678481fb""},""id"":22}

 
Important Note: I also reproduced the stuck condition with another testcase once, where we paused VP2 and VP1 separately, then send 100 Invoke requests. (Without any new deployment request when only two nodes running, as in previous testcase.) This time, after sending about 20 Invokes to VP0, it got stuck when PostChainAPI() call http.Client.Do

CAT_16_S2_IQ_S1_IQ_R1_IQ.go  (aka  CAT_207_S2_IQ_S1_R1_IQ.go)
# Stop VP2, and sleep 15 secs
# Send 11 Invokes.
# Query all running peers
# Stop VP1, and sleep 15 secs
# Send 50 invokes to VP0
# Stuck on the 21st one
",,,,,,,,,,,,,,,,,,,,09/Sep/16 8:25 PM;scottz;CAT_201_S2S1_IQDIQ.go;https://jira.hyperledger.org/secure/attachment/10078/CAT_201_S2S1_IQDIQ.go,09/Sep/16 8:16 PM;scottz;CAT_207_S2_IQ_S1_IQ_R1_IQ.go;https://jira.hyperledger.org/secure/attachment/10079/CAT_207_S2_IQ_S1_IQ_R1_IQ.go,09/Sep/16 8:14 PM;scottz;failCAT11pause.tar.gz;https://jira.hyperledger.org/secure/attachment/10080/failCAT11pause.tar.gz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fn3:,,,,,,,,corecode,mastersingh24,scottz,,,,,,,,,,,,10/Sep/16 1:39 PM;mastersingh24;I am not sure what you are really asking for here?,"10/Sep/16 2:56 PM;scottz;Tuan and Luis had started investigations, but I am not sure how far they got. 

My theory: when I docker pause two of the four peers, and send invokes to the ""good"" peers, it seems the good peers get stuck waiting for responses from the paused peers to reach consensus (which, as far as they know, are not stopped but rather still operational - basically we have simply cut off communications link between them) and they get stuck somehow and never respond to the chaincode client.

After further consideration, I am not sure if that is the exact situation. The only thing the client code is waiting for is a transaction ID acknowledgement of the invoke request. It is not waiting for an event or any other confirmation that the Tx has been committed to the ledger. Nevertheless, the lack of any response from the peer might indicate that it has somehow reached a state of confusion and is stuck; this must be a direct effect of docker pausing f+1 peers, since that is the key differentiator between this and other tests that do things like stop 2 peers instead of pause, or pause only one peer.",13/Sep/16 2:29 PM;corecode;why is this consensus?,,,,,,,,,,,,,,,,,,,,,
"When 3 of 4 peers are stopped, deploy fails when subsequently start 3 peers together",FAB-335,12636,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,scottz,scottz,09/Sep/16 8:03 PM,29/Jun/17 12:47 PM,26/Apr/18 6:51 AM,07/Apr/17 8:06 PM,,,,,,,WON'T FIX,,,fabric-orderer,,,,0,0.6,,,,,,,,"Problem Summary

Start 4 peers in a secure docker network and deploy and send invoke(s) to each peer and query to confirm operational.
Deploy after stopping 3 of 4 peers. Then start the 3 peers again together. All queries subsequently fail. 
Note: Instead, if restart just two of the three stopped peers, with ample delays, then the deploy works and the network generally works (although there are minor problems in that scenario too, such as FAB-334). Note: Reproduced with NULLREQUEST=0 and with  NULLREQUEST=1 and batchsize=1.

This issue is a port to Jira from GitHub hyperledger fabric issue #2313 https://github.com/hyperledger-archives/fabric/issues/2313

How to Reproduce

Originally found using testcase CAT_37_S0S1S2_D_I_R0R1R2_IQ.go, using v0.5 IMAGE=3e0e80a. That testcase has been renamed in current test suite to CAT_408_S0S1S2_D_I_R0R1R2_IQ.go, which is attached for reference.

# Start a new pbft batch network.
# Stop VP0 VP1 VP2
# Send request for new deployment to VP3, and receive a transaction ID (70dfc8e6...)
# Send Invokes.
# Restart the 3 peers all at once.
# Send Invokes.
# Query. All queries to the new deployment hash always fail. The deploy never worked. Here is my testcase error message:
Error extracted from json: res.Error.Message Query failure
POST /chaincode returned code =-32003 message=Query failure
data=Error when querying chaincode: Error:Failed to launch chaincode spec(Could not get deployment transaction for 70dfc8e6... - LedgerError - ResourceNotFound: ledger: resource not found)
",,,,,,,,,,,,,,,,,,,,09/Sep/16 7:58 PM;scottz;CAT_408_S0S1S2_D_I_R0R1R2_IQ.go;https://jira.hyperledger.org/secure/attachment/10077/CAT_408_S0S1S2_D_I_R0R1R2_IQ.go,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fmv:,,,,,,,,mastersingh24,scottz,,,,,,,,,,,,,28/Sep/16 6:36 PM;mastersingh24;not for .6,,,,,,,,,,,,,,,,,,,,,,,
"CH correct, but A/B values do not reflect early invokes, 3-4 minutes after new deployment",FAB-334,12635,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,scottz,scottz,09/Sep/16 7:50 PM,29/Jun/17 12:47 PM,26/Apr/18 6:51 AM,07/Apr/17 8:06 PM,,,,,,,WON'T FIX,,,fabric-orderer,,,,0,0.6,,,,,,,,"Problem Summary
In a pbft batch network, after stop 3 of the 4 peers, send Deploy (which gets queued), and then restart 2 of the 3 stopped peers and wait 3 minutes. Any new invokes appear to get dropped if they are sent within first couple minutes. More precisely, the blockchain contains blocks for those invokes, but the A & B values do NOT reflect them being processed.

This issue is a port to Jira from GitHub hyperledger fabric issue #2309 https://github.com/hyperledger-archives/fabric/issues/2309 

The Deploy is processed, and then (just for those 11 invokes in the first few minutes) the chainheight increases but the values for A & B are unchanged. Then other invokes transactions are processed ok. When and what is the trigger that starts allowing the later transactions to be processed?

Interesting note: a similar testcase, where I stopped 2 nodes, deploy, and restarted one (instead of stop 3 nodes, deploy, and restart two) PASSES with consistency.


How To Reproduce

Start 4 node security network using vagrant with docker containers running chaincode_example02. This was originally found using IMAGE=3e0e80a (july 19) and IMAGE=5efed61 (june 27) on v0.5 branch, using testcase  CAT_36_S0S1S2_D_I_R0R1_IQshort.go (which has since been revised and renamed as CAT_403_S0S1S2_D_I_R0R1_IQ.go, which is attached).

# STOP PEER0 PEER1 PEER2
# Sleep 30 secs
# DEPLOY chaincode via any available peer node (VP3), A=10000 B=10000
# Sleep 120 secs
# INVOKEs total (100) spread among all 1 running peers (VP3)
# RESTART PEER0 PEER1
# Sleep 60 secs
# Sleep extra 120 secs
# INVOKEs (1) using peer 0
# INVOKEs (2) using peer 1
# INVOKEs (8) using peer 3
# Sleep extra 120 secs
# QUERY all running peers for a and b, and chainheight. All 3 running peers query results show that we processed the 100 transactions which had been sent to VP3 immediately after the deploy to VP3, but we did not process the 11 sent to VP0/1/3 a bit later. What is concerning is that the expected chainheight seems correct, indicating having processed all 11, but the query values for A & B appear to have lost all 11 transactions:

FAILED QUERY TEST: the required peers do NOT match!!!!!!!!!!
EXPECTED A/B: 9889 10111.
ACTUALs:
PEER 0 9900 10100
PEER 1 9900 10100
PEER 3 9900 10100
PASSED CHAIN HEIGHT TEST: at least this matches on all Peers. Expected CH (111). Actual CHs: PEER0(111) PEER1(111) PEER3(111)

Also, soon afterwards, I sent INVOKEs total (5080) spread among all 3 running peers, and they were all processed correctly.
",,,,,,,,,,,,,,,,,,,,09/Sep/16 7:44 PM;scottz;CAT_407_S0S1S2_D_I_R0R1_IQ.go;https://jira.hyperledger.org/secure/attachment/10076/CAT_407_S0S1S2_D_I_R0R1_IQ.go,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fmn:,,,,,,,,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
transactions queued while only one peer running are lost when restarting all three other peers,FAB-333,12634,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,scottz,scottz,09/Sep/16 7:01 PM,29/Jun/17 12:47 PM,26/Apr/18 6:51 AM,07/Apr/17 8:06 PM,,,,,,,WON'T FIX,,,fabric-orderer,,,,0,0.6,,,,,,,,"Problem Summary

The network loses any Invoke requests sent to the single running peer node, after stopping the other 3 peers of a 4 node network. The problem is observed in both testcase variations whether the VP0 is the only running node, or when VP3 is the only running node.

The problem is observed ONLY when we restart the other 3 nodes ALL AT THE SAME TIME. In contrast, running a similar testcase, if we stop 3, send invokes, and restart only 2 (so there are exactly 3 peers running now), then the transactions are processed ok (as expected).

This issue is a port to Jira from GitHub hyperledger fabric issue #2308 https://github.com/hyperledger-archives/fabric/issues/2308

How To Reproduce

Set up a 4 peer network, pbft batch (batchsize 2) with security using docker containers in vagrant environment, running chaincode-example02. For reference, I can reproduce using my GO SDK testcase called CAT_305_S1S2S3_IQ_R1R2R3_IQ.go, attached. 

# Start 4 peers running
# invokes
# query
# stop 3 peers
# invokes 50 to the only running peer
# restart 3 peers, so all 4 are running again
# invokes, queries, sleeps
# confirm the 50 invokes are never processed by examining chainheight and query results from all 4 peers
",,,,,,,,,,,,,,,,,,,,09/Sep/16 7:01 PM;scottz;CAT_305_S1S2S3_IQ_R1R2R3_IQ.go;https://jira.hyperledger.org/secure/attachment/10075/CAT_305_S1S2S3_IQ_R1R2R3_IQ.go,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fmf:,,,,,,,,mastersingh24,scottz,,,,,,,,,,,,,28/Sep/16 6:36 PM;mastersingh24;this is not for .6,,,,,,,,,,,,,,,,,,,,,,,
single-client-single-peer transaction sequencing,FAB-332,12633,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,scottz,scottz,09/Sep/16 6:45 PM,27/Oct/17 2:34 PM,26/Apr/18 6:51 AM,28/Sep/16 10:57 AM,,,,,,,,,,fabric-orderer,,,,0,0.6,consensus,won't-fix,,,,,,"Problem Summary
It seems transactions are processed out of order, which would impact user use-cases. Invokes that are received by a specific peer node (while not enough nodes for consensus are running) from single chaincode client are queued and processed eventually after the other nodes recover and consensus resumes - BUT not until a few minutes later. In the meantime, the network processes some new invoke transactions received by all the peer nodes (including the one that had not dropped and that had received and queued a backlog, as well as the newly recovered nodes).

This issue is a port to Jira from GitHub hyperledger fabric issue #2265 https://github.com/hyperledger-archives/fabric/issues/2265

Description How To Reproduce
My GO SDK testcases use a docker network of 4 peers running in batch mode with security, using exampe02. This was originally found using v0.5 commit image  5efed61, but can be reproduced using later releases. (My testcase has since been renamed to CAT_302_S0S1S2_IQ_R0R1_IQIQ.go, which is attached for reference).
The actual GO testcase and script output and debug logfiles are attached to the archived github issue.
Search for the string ""+++"" for key steps in the file: GO_TEST__CAT_31A_S0S1S2_IQ_R0R1s_IQsQIQ.go__WedJul2022:09:13UTC2016 in the zipfile QdTransOutOfOrder2.tar.gz

Here is the basic idea:

Start 4 node security network using vagrant with docker containers running chaincode_example02.
Stop VP0, VP1, VP2.
Send 50 invokes to VP3.
Restart VP0, VP1.
Send 1 Invoke to VP0.
Send 2 Invokes to VP1.
Send 8 Invokes to VP3.
Query all peers and see that 11 were processed (instead of 61).
Wait 2 or 3 more minutes, and query again and observe that 61 were processed.
Expectations: Once peers restart and consensus resumes, I think that that any queued transactions on VP3 should be processed before new ones, not 3 minutes later.

An analogy: With $5 in my bank account, if I deposited $50 into my account, and then later go to the same bank teller to make an $11 withdrawal, I would expect the $50 to be available for withdrawal. I would not want to be charged an overdraft fee by the bank if the bank teller has set aside or misplaced my cash deposit (which they acknowledged receiving by giving me a receipt). If the bank rejects or delays processing my newer withdrawal request, then that is OK. But it would not be right if they process it and send my account balance below zero (and thus charge me an overdraft fee) before the previously deposited money is actually put into my account.

Some comments on the github issue history indicate it may not be a guarantee we can provide in an asynchronous system - and thus is an invalid expectation. Please confirm if this is true in the new architecture, and if the chaincode client could or should manage the sequencing itself by monitoring event notifications for the earlier transactions - so it could delay submitting any of the later transactions that happen to be dependent upon the completion of an earlier one.",,,,,,,,,,,,,,,,,,,,09/Sep/16 6:45 PM;scottz;CAT_302_S0S1S2_IQ_R0R1_IQIQ.go;https://jira.hyperledger.org/secure/attachment/10074/CAT_302_S0S1S2_IQ_R0R1_IQIQ.go,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fm7:,,,,,,,,mastersingh24,scottz,,,,,,,,,,,,,28/Sep/16 10:56 AM;mastersingh24;The guarantee is that all transactions will be processed in the same order by all well-behaving nodes.  There is no order guaranteed in terms of when the transaction was submitted,,,,,,,,,,,,,,,,,,,,,,,
acknowledged Invokes can sometimes be lost,FAB-331,12632,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,scottz,scottz,09/Sep/16 6:15 PM,27/Oct/17 2:40 PM,26/Apr/18 6:51 AM,26/May/17 5:52 PM,v0.6,,,,,,WON'T FIX,,,fabric-orderer,,,,0,0.6,qa,,,,,,,"Problem Summary
Invoke transactions submitted by chaincode clients, which are acknowledged with a transaction ID, should not get lost or dropped. 
Also, I would hope that an event notification would provide an indication when the invoke transaction is either processed or dropped/rejected, should the client wish to monitor events.

This issue is a port to Jira from GitHub hyperledger fabric issue #2148 https://github.com/hyperledger-archives/fabric/issues/2148

Description How To Reproduce
This problem can be reproduced using my GO SDK testcase CRT_502_StopAndRestart1or2_10Hrs.go. This testcase uses a docker network of 4 peers running in batch mode with security, using exampe02. It cycles through 4 peers, sequentially stopping and restarting them via REST calls, and occasionally stopping two peers at once. It sends invokes and queries requests throughout the testcase. Two Invoke transactions, which are queued during the time when only 2 peers are operating, appear to be lost, permanently. Network nodes do resume consensus and catch up with each other, but sometimes the network loses invoke transactions.

STOP PEERS(): PEER0
START PEERS(): PEER0
STOP PEERS(): PEER0 PEER1
START PEERS(): PEER0 PEER1
STOP PEERS(): PEER2
START PEERS(): PEER2
STOP PEERS(): PEER3
START PEERS(): PEER3
STOP PEERS(): PEER0
START PEERS(): PEER0
STOP PEERS(): PEER1
START PEERS(): PEER1
STOP PEERS(): PEER2 PEER3
START PEERS(): PEER2 PEER3
QUERY RESULTS: 
FAIL on PEER0: EXPECTED/ACTUAL: A=999894/999896, B=1000106/1000104. **FAIL**
FAIL on PEER1: EXPECTED/ACTUAL: A=999894/999900, B=1000106/1000100. **FAIL**
FAIL on PEER2: EXPECTED/ACTUAL: A=999894/999896, B=1000106/1000104. **FAIL**
FAIL on PEER3: EXPECTED/ACTUAL: A=999894/999896, B=1000106/1000104. **FAIL**",,,,,,,,,,,,,,,,,,,,09/Sep/16 6:15 PM;scottz;CRT_502_StopAndRestart1or2_10Hrs.go;https://jira.hyperledger.org/secure/attachment/10073/CRT_502_StopAndRestart1or2_10Hrs.go,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00i7t:,,,,,,,,ChristopherFerris,mastersingh24,scottz,vukolic,,,,,,,,,,,28/Sep/16 6:34 PM;mastersingh24;removing .6 label.  this is not simply a bug fix,"28/Oct/16 4:57 PM;scottz;Acknowledged invokes can be lost in other test scenarios too. For example, it is seen in v0.6 testing occasionally using these concurrency tests:
* run_conc4p1min400Thrd_LOCAL.sh
* run_conc4p1min1000Thrd1TxPerLoop_LOCAL.sh
and always using these tests involving certain restart scenarios:
* CAT_407_S0S1S2_D_I_R0R1_IQ.go
* CAT_409_S1S2S3_D_I_R1R2_IQ.go
* CAT_412_S0S1S2_D_I_R1R2_IQ.go
Reference: release_criteria tests and documentation, planned to be published soon to folders hyperledger/fabric/bddtests/regression/go/obcsdk/CAT/ and ../ledgerstresstest/ ",19/Dec/16 10:21 AM;vukolic;related to https://jira.hyperledger.org/browse/FAB-474,01/May/17 10:44 PM;ChristopherFerris;can we confirm that this is still a bug?,03/May/17 12:53 PM;scottz;The entire ordering service has changed. This bug applies to the v0.6 implementation only.,,,,,,,,,,,,,,,,,,,
JIRA places in-progress status items into 'Done' resolution state,FAB-330,12631,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ryjones,ChristopherFerris,ChristopherFerris,09/Sep/16 4:58 PM,19/Sep/16 3:11 PM,26/Apr/18 6:51 AM,19/Sep/16 3:11 PM,,,,,,,,,,,,,,0,build-system,,,,,,,,JIRA incorrectly places in-progress status items into 'Done' resolution state,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00dw8:,,Sprint 1,,,,,,ChristopherFerris,ryjones,,,,,,,,,,,,,11/Sep/16 7:51 PM;ryjones;example issue?,"11/Sep/16 8:02 PM;ryjones;ah ha, I see",11/Sep/16 9:03 PM;ChristopherFerris;#allofthem :-),19/Sep/16 12:55 PM;ChristopherFerris;I believe I have figured this out. I just transitioned this to in-progress without it setting resolution. There was a checkbox in Kanban view that was ticked that 'set resolution'. I unchecked it. Seems to have solved the issue.,,,,,,,,,,,,,,,,,,,,
core/comm/connection_test.go TestConnection_Correct fails with TLS enabled,FAB-329,12630,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,bgorman,bgorman,09/Sep/16 8:21 AM,07/Apr/17 12:49 PM,26/Apr/18 6:51 AM,07/Apr/17 12:49 PM,,,,,,,v0.6,WON'T FIX,,,,,,0,,,,,,,,,"With peer/core.yaml modified to contain
security:
    enabled: true
    privacy: true

The unit test core/comm/connection_test.go TestConnection_Correct fails:

2016/09/09 07:58:20 setting Number of procs to -1, was 2
2016/09/09 07:58:21 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = ""transport: dial tcp 0.0.0.0:7051: getsockopt: connection refused""; Reconnecting to {""0.0.0.0:7051"" <nil>}
2016/09/09 07:58:23 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = ""transport: dial tcp 0.0.0.0:7051: getsockopt: connection refused""; Reconnecting to {""0.0.0.0:7051"" <nil>}
2016/09/09 07:58:23 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = ""transport: dial tcp 0.0.0.0:7051: getsockopt: connection refused""; Reconnecting to {""0.0.0.0:7051"" <nil>}
--- FAIL: TestConnection_Correct (3.01s)
        connection_test.go:23: error connection to server at host:port = 0.0.0.0:7051
2016/09/09 07:58:23 setting Number of procs to -1, was 2
2016/09/09 07:58:24 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = ""transport: dial tcp 0.0.0.0:7052: getsockopt: connection refused""; Reconnecting to {""0.0.0.0:7052"" <nil>}
2016/09/09 07:58:26 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = ""transport: dial tcp 0.0.0.0:7052: getsockopt: connection refused""; Reconnecting to {""0.0.0.0:7052"" <nil>}
FAIL

I find it somewhat concerning that the configuration files affect the unit tests. Typically I'd expect the unit tests to dictate configuration options, testing each in turn.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00flj:,,,,,,,,bgorman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittant Concurrent Read/Write during Unit tests,FAB-316,12617,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,juliancarrivick,juliancarrivick,07/Sep/16 3:01 AM,01/May/17 7:40 PM,26/Apr/18 6:51 AM,01/May/17 7:40 PM,,,,,,,WON'T FIX,,,fabric-crypto,,,,0,,,,,,,,,"During Unit tests very occasionally there will be a {{concurrent map read and map write
}} during the crypto tests causing a failure unrelated to the original change.

A copy of associated logs is attached.",,,,,,,,,,,,,,,,,,,,07/Sep/16 2:59 AM;juliancarrivick;consoleText.log;https://jira.hyperledger.org/secure/attachment/10064/consoleText.log,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzh6:zwhyi,,,,,,,,elli-androulaki,juliancarrivick,,,,,,,,,,,,,"10/Apr/17 6:49 PM;elli-androulaki;Hi, [~juliancarrivick],
Is this bug still valid?
",,,,,,,,,,,,,,,,,,,,,,,
Unable to create invoke request with arguments,FAB-310,12611,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,vzhou,vzhou,06/Sep/16 4:05 PM,29/Sep/16 3:54 PM,26/Apr/18 6:51 AM,29/Sep/16 3:54 PM,,,,,,,,,,,,,,0,node-SDK,,,,,,,,"I've set up my peer and member services, and I have a Node application using the Hyper Ledger SDK to connect to my peer. I've been able to set up enrollment, registration and chaincode initialization, but I can't get invoking to work. Specifically, the arguments that I pass in the Javascript won't get to the Chaincode.

I've attached the relevant chaincode (mailbox.go) and Javascript app code (app.js) in the attached files. Any help in getting it to work would be appreciated; thanks!",,,,,,,,,,,,,,,,,,,,06/Sep/16 4:04 PM;vzhou;app.js;https://jira.hyperledger.org/secure/attachment/10060/app.js,06/Sep/16 4:04 PM;vzhou;mailbox.go;https://jira.hyperledger.org/secure/attachment/10061/mailbox.go,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fif:,,,,,,,,vzhou,,,,,,,,,,,,,,29/Sep/16 3:54 PM;vzhou;Looks like this fixed itself when I cleared everything and updated to the 0.6 branch.,,,,,,,,,,,,,,,,,,,,,,,
Gradle javaenv build hangs in a proxy environment,FAB-308,12609,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,bgorman,bgorman,06/Sep/16 5:58 AM,15/Dec/16 12:50 PM,26/Apr/18 6:51 AM,15/Dec/16 12:50 PM,,,,,,,,,,,,,,0,build-system,,,,,,,,"Gradle does not use the system $http_proxy value. When trying to `make images` it hangs indefinitely. It would be good if we could make gradle uses the system proxy setting or at least not hang indefinitely.

Instructions to get it working with a proxy would also be appreciated.
{quote}
vagrant@hyperledger-devenv:v0.0.10-84431e3:/hyperledger$ echo $http_proxy
http://1.2.3.4:3128/

vagrant@hyperledger-devenv:v0.0.10-84431e3:/hyperledger$ make images
Building docker src-image
docker build -t hyperledger/fabric-src build/image/src
Sending build context to Docker daemon  11.4 MB
Step 1 : FROM hyperledger/fabric-baseimage:latest
 ---> 656f46457a5e
Step 2 : ADD gopath.tar.bz2 $GOPATH/src/github.com/hyperledger/fabric
 ---> 7e174a22511d
Removing intermediate container 00839e52f50d
Successfully built 7e174a22511d
docker tag hyperledger/fabric-src hyperledger/fabric-src:x86_64-0.6.0-SNAPSHOT-0f959c0
Building build/image/ccenv/bin/protoc-gen-go
Installing chaintool
curl -L https://github.com/hyperledger/fabric-chaintool/releases/download/v0.9.0/chaintool > build/bin/chaintool
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   582    0   582    0     0    421      0 --:--:--  0:00:01 --:--:--   422
100 14.4M  100 14.4M    0     0   244k      0  0:01:00  0:01:00 --:--:--  286k
chmod +x build/bin/chaintool
Building docker ccenv-image
docker build -t hyperledger/fabric-ccenv build/image/ccenv
Sending build context to Docker daemon 20.45 MB
Step 1 : FROM hyperledger/fabric-src:x86_64-0.6.0-SNAPSHOT-0f959c0
 ---> 7e174a22511d
Step 2 : COPY bin/* /usr/local/bin/
 ---> 3093df9a8aba
Removing intermediate container 26485d45c249
Successfully built 3093df9a8aba
docker tag hyperledger/fabric-ccenv hyperledger/fabric-ccenv:x86_64-0.6.0-SNAPSHOT-0f959c0
Building build/docker/bin/peer
Building docker javaenv-image
# Following items are packed and sent to docker context while building image
# 1. Java shim layer source code
# 2. Proto files used to generate java classes
# 3. Gradle settings file
docker build -t hyperledger/fabric-javaenv build/image/javaenv
Sending build context to Docker daemon 37.89 kB
Step 1 : FROM java:openjdk-8
 ---> ea40c858f006
Step 2 : RUN wget https://services.gradle.org/distributions/gradle-2.12-bin.zip -P /tmp --quiet
 ---> Running in d52f1b73ff1e
<< hang for 30+ minutes >>
^Cmake: *** [build/image/javaenv/.dummy] Interrupt
{quote}",,,,28800,28800,,0%,28800,28800,,,,,,,,FAB-1411,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzvq:z,,Sprint 1,Sprint 2,Sprint 3,,,,bgorman,ynamiki,,,,,,,,,master,,,true,"15/Sep/16 6:56 AM;ynamiki;I am working on this issue:
https://gerrit.hyperledger.org/r/#/c/971/","02/Dec/16 2:37 AM;ynamiki;The patch has been merged.
Now we can make behind a proxy with setting http_proxy and https_proxy environment values.",,,,,,,,,,,,,,,,,,,,,,
swagger generated client code can't fit fabric proto enum,FAB-307,12608,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,mintzhao,mintzhao,06/Sep/16 2:24 AM,07/Apr/17 12:50 PM,26/Apr/18 6:51 AM,07/Apr/17 12:50 PM,,,,,,,v0.6,WON'T FIX,,,,,,0,rest,swaggerAPI,,,,,,,"hi, everyone, I have a question. We know that fabric rest api is based on swagger. And so I am using swagger client generator to generate client sdk for golang. The generated code looks seems good, but can't be use.
```""ConfidentialityLevel"":{
            ""type"": ""string"",
            ""default"": ""PUBLIC"",
            ""example"": ""PUBLIC"",
            ""enum"":[
                ""PUBLIC"",
                ""CONFIDENTIAL""
              ],
            ""description"": ""Confidentiality level of the Chaincode.""
        },```

ConfidentialityLevel will be generated as
``` 
/*ConfidentialityLevel Confidentiality level of the Chaincode.

swagger:model ConfidentialityLevel
*/
type ConfidentialityLevel string

// for schema
var confidentialityLevelEnum []interface{}

func (m ConfidentialityLevel) validateConfidentialityLevelEnum(path, location string, value ConfidentialityLevel) error {
    if confidentialityLevelEnum == nil {
        var res []ConfidentialityLevel
        if err := json.Unmarshal([]byte(`[""PUBLIC"",""CONFIDENTIAL""]`), &res); err != nil {
            return err
        }
        for _, v := range res {
            confidentialityLevelEnum = append(confidentialityLevelEnum, v)
        }
    }
    if err := validate.Enum(path, location, value, confidentialityLevelEnum); err != nil {
        return err
    }
    return nil
}

// Validate validates this confidentiality level
func (m ConfidentialityLevel) Validate(formats strfmt.Registry) error {
    var res []error

    // value enum
    if err := m.validateConfidentialityLevelEnum("""", ""body"", m); err != nil {
        return err
    }

    if len(res) > 0 {
        return errors.CompositeValidationError(res...)
    }
    return nil
}
```
but vp will get
```[rest] ProcessChaincode -> ERRO 04f Error unmarshalling chaincode request payload: json: cannot unmarshal string into Go value of type protos.ConfidentialityLevel ```
Is there a solution to avoid the bug?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-105,0|i00fhz:,,,,,,,,mastersingh24,mintzhao,,,,,,,,,,,,,28/Sep/16 11:00 AM;mastersingh24;setting priority to medium given the plans for the REST API moving forward,,,,,,,,,,,,,,,,,,,,,,,
Users are unable to get TxID from stub,FAB-306,12607,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,hgabre,hgabre,hgabre,05/Sep/16 11:05 AM,07/Apr/17 12:50 PM,26/Apr/18 6:51 AM,07/Apr/17 12:50 PM,,,,,,,v0.6,WON'T FIX,,,,,,0,chaincode,,,,,,,,"ChaincodeStubInterface does not provide any function to get the Transaction ID. UUID is a public field of ChaincodeStub but there should be a getter of it in the interface.
The issue was originally reported on Slack #fabric by multiple users.",,,,10800,10800,,0%,10800,10800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fhr:,,,,,,,,bgorman,hgabre,,,,,,,,,feature/convergence,master,,true,05/Sep/16 11:06 AM;hgabre;Solution proposal: https://gerrit.hyperledger.org/r/#/c/841/,"06/Sep/16 1:47 AM;bgorman;[~ChristopherFerris] I don't think adding functions to the ChaincodeStubInterface would interfere with existing user-written chaincode. As long as the interface is implemented correctly in ChaincodeStub and MockStub, then it should be transparent to the users code. Careful consideration is of course needed with respect to what functions are added, as removing or modifying functions will break anyone's code that utilises them.

There are a couple of additional complications though. The fabric-chaintool and fabric-test-resources github projects may need to move in lock step for certain changes.","06/Sep/16 2:37 AM;bgorman;Also there is a workaround to this issue. The user could cast their ChaincodeStubInterface to a ChaincodeStub, then directly access the UUID member. Something like this:

var csi ChaincodeStubInterface
cs := ChaincodeStub(csi)
println(cs.UUID)",,,,,,,,,,,,,,,,,,,,,
[java-chaincode] Current java samples will create transaction even on unsuccessful invocation,FAB-304,12605,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,sanchezl,oiakovlev,oiakovlev,03/Sep/16 4:11 PM,03/Oct/17 11:58 AM,26/Apr/18 6:51 AM,12/May/17 5:58 PM,,,,,,,DUPLICATE,v1.0.0-alpha2,,fabric-chaincode-java,,,,1,chaincode,java-chaincode,,,,,,,"h3. Description
With the current [SimpleSample|https://github.com/hyperledger/fabric/blob/master/examples/chaincode/java/SimpleSample/src/main/java/example/SimpleSample.java] java even if there was no changes to the key-value storage and it is considered that code returned an error (like, for example, [incorrect number of arguments|https://github.com/hyperledger/fabric/blob/master/examples/chaincode/java/SimpleSample/src/main/java/example/SimpleSample.java#L62-L64]) transaction is still stored to the ledger.
h3. Steps to reproduce
It is quite simple to reproduce - just deploy [SimpleSample|https://github.com/hyperledger/fabric/blob/master/examples/chaincode/java/SimpleSample/src/main/java/example/SimpleSample.java] and invoke it with incorrect number of arguments or invoke it with incorrect amount, for example. Result will return txID. Query transactions using this txID - it is expected that transaction will not be present in the ledger, but it is (actually it is included in next block). 
With go examples it works correctly.
h3. Current implementations and possible solutions
h5. Current Implementation
The reason for this seems to be the difference in syntax (returned results) in go and java: Go method returns a tuple of result: the first one is string and the second one is list of errors, then [go handler code checks the list of errors|https://github.com/hyperledger/fabric/blob/master/core/chaincode/shim/handler.go#L295-L306] and if it is empty it marks transaction as completed, otherwise marks transaction execution failed. 
[Java handler|https://github.com/hyperledger/fabric/blob/master/core/chaincode/shim/java/src/main/java/org/hyperledger/java/shim/Handler.java#L313-L329] acts in the same way but it expects chaincode to throw an error upon unsuccessfull execution, but current examples always catch an error and simply return not null (non empty) string, so with current examples transaction is always stored to the ledger, which seems to be incorrect.
h5. Possible solution
Update java examples to throw exceptions instead of returning exception text as a result. This is `java` way of what currently go examples do. Also I propose to have some generic ChaincodeExecutionException which normally will be thrown upon error in chaincode, which normally will be part of [ChaincodeBase run method|https://github.com/hyperledger/fabric/blob/master/core/chaincode/shim/java/src/main/java/org/hyperledger/java/shim/ChaincodeBase.java#L48]?

If such approach looks ok I can take this task and submit PR for review? Any other thoughts ideas? ","Environment mode (dev or prod) or consensus type actually doesn't matter, the reason seems to be in java implementation. 
So the issue can be reproduced on any env.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzhy:zz9xmi,,,,,,,,ChristopherFerris,denyeart,oiakovlev,sanchezl,satheeshk,,,,,,,,,,17/Sep/16 3:40 PM;satheeshk;Java shim needs to define exceptions to be used in the chaincode development. I would agree with you on the chaincode's throwing runtime exception on error scenarios for the handler to catch.,11/Apr/17 7:00 PM;denyeart;[~sanchezl]Please assess asap and close or clarify what needs to be done.,"14/Apr/17 6:13 PM;sanchezl;I think this will be fixed as a side effect of fixing FAB-2852 (see https://gerrit.hyperledger.org/r/#/c/8033/) and some other changes made in for FAB-2718. 

Basically Java chaincode init() and invoke() return a Respose object, whose Status field is checked for SUCCESS.

I'll test it soon and see if it's still a problem.","11/May/17 4:52 PM;ChristopherFerris;the JIRA items referenced by [~sanchezl] are merged, is this still a bug? If it cannot be reproduced, please mark fixVersion as DUPLICATE and close.

 

Thanks",,,,,,,,,,,,,,,,,,,,
ERROR: function declared but not used in asset_management.go,FAB-303,12604,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,hgabre,rameshthoomu,rameshthoomu,02/Sep/16 5:16 PM,05/Sep/16 10:25 AM,26/Apr/18 6:51 AM,05/Sep/16 10:25 AM,,,,,,,,,,,,,,0,node-SDK,,,,,,,,"observed below error while running *node-sdk-unit-tests* in convergence branch.

01:04:23.764 # github.com/hyperledger/fabric/examples/chaincode/go/asset_management
01:04:23.764 ./asset_management.go:42: function declared and not used

attached Jenkins build log: https://jenkins.hyperledger.org/job/fabric-verify-x86_64/857/console",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fhb:,,,,,,,,mastersingh24,rameshthoomu,,,,,,,,,,,,,05/Sep/16 10:25 AM;mastersingh24;fixed by https://gerrit.hyperledger.org/r/#/c/885/,,,,,,,,,,,,,,,,,,,,,,,
Event block-listener panic when receive rejection event,FAB-302,12603,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jiangyaoguo,jiangyaoguo,jiangyaoguo,02/Sep/16 11:14 AM,01/Dec/16 6:48 AM,26/Apr/18 6:51 AM,01/Dec/16 6:48 AM,,,,,,,,,,,,,,0,,,,,,,,,"Listen events with ""./block-listener -events-address=172.17.0.2:7053"". If a rejection event occur, the block-listener will panic like below:
 panic: runtime error: invalid memory address or nil pointer dereference
[signal 0xb code=0x1 addr=0x0 pc=0x401eaf]

goroutine 1 [running]:
panic(0x94e120, 0xc82000c0c0)
	/gopath/src/runtime/panic.go:481 +0x3e6
main.main()
	/git/src/github.com/hyperledger/fabric/examples/events/block-listener/block-listener.go:118 +0x48f
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fh3:,,,,,,,,ChristopherFerris,jiangyaoguo,,,,,,,,,feature/convergence,master,,true,10/Sep/16 8:00 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/903,,,,,,,,,,,,,,,,,,,,,,,
ignore this ,FAB-299,12600,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jjjjibm,jjjjibm,01/Sep/16 6:04 PM,01/Sep/16 6:14 PM,26/Apr/18 6:51 AM,01/Sep/16 6:14 PM,,,,,,,,,,,,,,0,,,,,,,,,"Environment is Win7 laptop running Vagrant/Ubuntu   using Fabric05 driver and hfc 0.0.2

This one should have gone into github/Fabric05, not Jira.  I will see if I can cancel this one. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00fgf:,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
node SDK tests leave behind some binaries in example dirs,FAB-296,12597,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,angrbrd,hgabre,ChristopherFerris,01/Sep/16 5:35 PM,06/Dec/16 2:21 PM,26/Apr/18 6:51 AM,01/Sep/16 10:29 PM,,,,,,,,,,fabric-sdk-node,,,,0,build-system,node-SDK,,,,,,,"node SDK tests leave behind some binaries in example dirs

see comment in https://gerrit.hyperledger.org/r/#/c/673/8/Makefile",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ffr:,,,,,,,,angrbrd,ChristopherFerris,,,,,,,,,,,,,01/Sep/16 10:29 PM;angrbrd;This issue is a duplicate of FAB-287. Closing.,,,,,,,,,,,,,,,,,,,,,,,
TLS environment variables not propagated to membersrc,FAB-295,12596,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,rennman,rennman,01/Sep/16 3:01 PM,02/Sep/16 11:35 PM,26/Apr/18 6:51 AM,02/Sep/16 11:35 PM,,,,,,,,,,,,,,0,,,,,,,,,"I have a 4-peer network with membersrvc. I haven't systematically checked all the environment variables against the config, so I'm concerned there may be others. However, I'm sure that at least these two are problematic:

CORE_SERVER_TLS_CERT_FILE 
   and
CORE_SERVER_TLS_KEY_FILE
are not getting picked up by membersrvc. I am forced to code
        # TLS certificate and key file paths
        tls:
            cert:
                file: /var/hyperledger/production/.membersrvc/tlsca.cert
            key:
                file: /var/hyperledger/production/.membersrvc/tlsca.priv
in the membersrvc.yaml file

Note that this seems only affect membersrcv. The TLS environment variables for the peer apparently work fine.

If I start with only the TLS environment variables set in membersrvc.yaml, the peers are enabled for TLS, but membersrvc is not. membersrvc generates errors like the following when the peers try to connect:
2016/09/01 14:38:09 transport: http2Server.HandleStreams received bogus greeting from client: ""\x16\x03\x01\x00\x9a\x01\x00\x00\x96\x03\x03\xc2'\xc6\x12/֠\xc1\x04N\xe6B\x8c""

and the peer complains:
2016/09/01 14:57:10 grpc: ClientConn.resetTransport failed to create client transport: connection error: desc = ""transport: tls: first record does not look like a TLS handshake""; Reconnecting to ""9.42.103.39:30112""



However if I start with the corresponding TLS parms in the membersrvc.yaml file (the single delta) the peers register successfully.
14:49:32.731 [crypto] Debugf -> DEBU 037 [validator.test_vp0] Registration of node [%!s(crypto.NodeType=2)] with name [test_vp0] completed

For completeness sake, here are all of the start parameters for membersrcv and the peers.
The locally built docker images are 'ca' and 'peer'.

In the startup script, membersrvc is started with:

docker -H 9.42.103.17:3376 run --name=vpca --restart=unless-stopped -d -it -p 7054 -p 7051 \
-e CORE_PEER_ID=vpca \
-e CORE_SERVER_TLS_CERT_FILE=/var/hyperledger/production/.membersrvc/tlsca.cert \
-e CORE_SERVER_TLS_KEY_FILE=/var/hyperledger/production/.membersrvc/tlsca.priv \
-e CONFIG_URL=9.42.103.17/config \
-e OBCCA_SERVER_VERSION=1.1 ca start.sh 

and the peers:

docker -H 9.42.103.17:3376 run --name=vp0 --restart=unless-stopped -d -it -p 7050 -p 7051 \
-e CORE_OBCPBFT_GENERAL_N=4 \
-e CONFIG_URL=9.42.103.17/config \
-e CORE_VM_ENDPOINT=tcp://9.42.103.17:3376 \
-e CORE_PEER_ID=vp0 \
-e CORE_PEER_ADDRESSAUTODETECT=false \
-e CORE_PEER_LISTENADDRESS=0.0.0.0:7051 \
-e CORE_SECURITY_ENABLED=true \
-e CORE_SECURITY_ENROLLID=test_vp0 \
-e CORE_SECURITY_ENROLLSECRET=MwYpmSRjupbT\
-e CORE_PEER_PKI_ECA_PADDR=9.42.103.39:30100 \
-e CORE_PEER_PKI_TCA_PADDR=9.42.103.39:30100 \
-e CORE_PEER_PKI_TLSCA_PADDR=9.42.103.39:30100 \
-e CORE_VM_DOCKER_TLS_ENABLED=true \
-e CORE_VM_DOCKER_TLS_CA_FILE=/certs/ca.pem \
-e CORE_VM_DOCKER_TLS_CERT_FILE=/certs/cert.pem \
-e CORE_VM_DOCKER_TLS_KEY_FILE=/certs/key.pem \
-e CORE_PEER_TLS=true -e CORE_PEER_TLS_ENABLED=true \
-e CORE_PEER_TLS_CERT_FILE=/certs/tlsca.cert \
-e CORE_PEER_TLS_KEY_FILE=/certs/tlsca.priv \
-e CORE_PEER_PKI_TLS_ENABLED=true \
-e CORE_PEER_PKI_TLS_ROOTCERT_FILE=/certs/tlsca.cert \
-e CORE_PEER_TLS_SERVERHOSTOVERRIDE=tlsca \
-e CORE_PEER_PKI_TLS_SERVERHOSTOVERRIDE=tlsca \-e CORE_SECURITY_PRIVACY=true peer start.sh",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ffj:,,,,,,,,mastersingh24,rennman,,,,,,,,,,,,,02/Sep/16 11:34 PM;mastersingh24;The environment variable prefix for membersrvcs is not *CORE* but rather *MEMBERSRVC_CA* ,,,,,,,,,,,,,,,,,,,,,,,
"[node-SDK] chain.addPeers() lets me add the same peer to its chain, 9 times",FAB-264,12565,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,jjjjibm,jjjjibm,29/Aug/16 2:36 PM,08/Sep/16 3:13 PM,26/Apr/18 6:51 AM,03/Sep/16 11:04 AM,,,,,,,,,,,,,,0,Fabric05,node-SDK,,,,,,,"Description:
(1) This unit test: 

//
// Test chain.getPeers()
//
test('Get peers', function(t) {
	
	for (var i = 0; i < 9; i++) {
		chain.addPeer(""grpc://localhost:30303"");
	}
	var peers = chain.getPeers();
	console.log(""chain peers"", peers)
	if (peers) {
		console.log(""Peers: "", peers)
		pass(t, ""getPeers"");
	}
	else {
		console.log(""get peers: no peers found"");
		fail(t, ""getPeers"", new Error(""No peers""));
		process.exit(1);
	}
		
});

allows me to add the identical peer to the chain, nine times.    This isn't logical and should not be permitted 
    
(2) Here is the generated documentation for addPeer:
addPeer

    addPeer(url: string, pem?: string): Peer

        Defined in src/hfc.ts:456

    Add a peer given an endpoint specification.
    Parameters
        url: string
        Optional pem: string
    Returns Peer

    Returns a new peer.

Since we know of at least one reason addPeer() could fail, the documentation needs to indicate how the caller would know the addPeer() method failed.  Return 'unknown'?","win7 laptop, hfc 0.0.2",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00f8n:,,,,,,,,jjjjibm,mastersingh24,,,,,,,,,feature/convergence,master,,true,08/Sep/16 3:13 PM;mastersingh24;closed via https://gerrit.hyperledger.org/r/#/c/897/,,,,,,,,,,,,,,,,,,,,,,,
git plugin for jira reports license expired,FAB-259,12560,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,28/Aug/16 9:17 PM,19/Sep/16 4:54 PM,26/Apr/18 6:51 AM,19/Sep/16 4:53 PM,,,,,,,,,,,,,,0,build-system,,,,,,,,"Plugin license has expired
",,,,57600,57600,,0%,57600,57600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00dwi:x,,Sprint 1,,,,,,ChristopherFerris,ryjones,,,,,,,,,,,,,19/Sep/16 4:54 PM;ryjones;New license applied,,,,,,,,,,,,,,,,,,,,,,,
"[node-SDK] chain.addPeer(""www.amazon.com"") crashes SDK",FAB-256,12557,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,mastersingh24,jjjjibm,jjjjibm,27/Aug/16 1:05 AM,02/Sep/16 7:08 PM,26/Apr/18 6:51 AM,02/Sep/16 7:08 PM,,,,,,,,,,,,,,0,Fabric05,node-SDK,,,,,,,"Description:

I added this code to my test case:

*console.log(""Now try to add invalid peer"");
chain.addPeer(""www.amazon.com"");
*
Here is the output: 
_# Add and get peers
Now try to add invalid peer
/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/lib/hfc.js:2168
    return str.length >= suffix.length && str.substr(str.length - suffix.lengt
              ^
TypeError: Cannot read property 'length' of null
    at endsWith (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/lib/hfc.js:2168:15)
    at parseUrl (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/lib/hfc.js:2137:9)
    at new Endpoint (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/lib/hfc.js:1775:20)
    at new Peer (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/lib/hfc.js:1718:19)
    at Chain.addPeer (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/lib/hfc.js:255:20)
    at Test.<anonymous> (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/test/unit/chain-tests.js:798:8)
    at Test.bound [as _cb] (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/node_modules/tape/lib/test.js:63:32)
    at Test.run (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/node_modules/tape/lib/test.js:82:10)
    at Test.bound [as run] (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/node_modules/tape/lib/test.js:63:32)
    at Immediate.next [as _onImmediate] (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/node_modules/tape/lib/results.js:70:15)
ERROR running chain-tests!

(1) Entering an invalid url should not crash the SDK.  Instead, it should return an error to the application. 
(2) addPeer() probably needs a callback so it can return an err.  The callback could return the peer object when the call succeeds. 
_
How to recreate:
1.Edit chain-tests.js and add this code to a test case:
console.log(""Now try to add invalid peer"");
chain.addPeer(""www.amazon.com"");

 2.Run make node-sdk-unit-tests as usual. 
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00f6v:,,,,,,,,jjjjibm,mastersingh24,,,,,,,,,feature/convergence,master,,true,30/Aug/16 10:43 AM;mastersingh24;It looks like the code actually checks to see if the URL starts with `grpc` or `grpcs` and will return an error if it does not.  But this error comes from the fact that the code tries to extract the protocol while parsing the URL.  This is actually not necessary as we can defer that until the code which checks for a valid prefix.,02/Sep/16 12:14 PM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/883/,,,,,,,,,,,,,,,,,,,,,,
fabric-baseimage is cleaned in the jenkins build unnecessarily,FAB-255,12556,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,27/Aug/16 12:59 AM,12/Sep/16 2:18 AM,26/Apr/18 6:51 AM,12/Sep/16 2:18 AM,,,,,,,,,,,,,,0,build-system,,,,,,,,"fabric-baseimage is cleaned in the jenkins build unnecessarily

in 
line 8 in ci-management/jjb/fabric/include-raw-fabric-clean-environment.sh we call dist-clean which will remove all images. We don't really want it to remove fabric-baseimage except when something changes in there.",,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00dwi:r,,Sprint 1,,,,,,ChristopherFerris,,,,,,,,,,feature/convergence,master,,true,27/Aug/16 9:02 PM;ChristopherFerris;Fixed in https://gerrit.hyperledger.org/r/#/c/721/,,,,,,,,,,,,,,,,,,,,,,,
"Updating discovery node after some node leaves, and some node joins the network.",FAB-245,12546,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,stylix,stylix,25/Aug/16 2:28 AM,07/Apr/17 12:50 PM,26/Apr/18 6:51 AM,07/Apr/17 12:50 PM,,,,,,,v0.6,WON'T FIX,,,,,,0,communication,discovery,,,,,,,"Hi,

I managed to run Hyperledger/Fabric at scale with docker swarm on the cluster.
In this scenario, the new node can join the network when we scale up,
and some will leave when we scale down.

*Thing is that*
The running nodes have it list of ""Discovery nodes"", which is never be updated (if I'm right).
Since the peer know the full list, then it try to communicate to the other nodes on the list, at which some may not come back anymore.
Even this shows the annoying ERROR on the log, but it has no problem with any later invokes.

Please see the attached file.
I'm running with DEBUG mode, that's why I can see this message.

*Questions*
Should we still keep the full discovery list?
Should we update the list for keeping only it's active member?
Is this the issue?, please let me know.
",,,,,,,,,,,,,,,,,,,,25/Aug/16 2:18 AM;stylix;discovery_list.png;https://jira.hyperledger.org/secure/attachment/10044/discovery_list.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00f4f:,,,,,,,,stylix,yacovm,,,,,,,,,,,,,"25/Aug/16 2:33 AM;stylix;BTW, this question can be regarded as a fail-over/recovery when some node crash,
and we need to connect a new node from another machine (another IP).

So, the new IP is added to the discover list of the new node, but the old IP is still there on all old nodes.",,,,,,,,,,,,,,,,,,,,,,,
Vagrant build is not detecting previously built artifacts.,FAB-243,12544,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,ryjones,ryjones,ryjones,24/Aug/16 8:46 PM,25/Aug/16 12:50 PM,26/Apr/18 6:51 AM,25/Aug/16 3:41 AM,,,,,,,,,,,,,,0,build-system,,,,,,,,"For example, in this [logfile|https://jenkins.hyperledger.org/job/fabric-verify-x86_64/523/consoleText], you will see the following builds run twice:

search for “docker peer-image”, “docker src-image” and “docker ccenv-image""

the second instance should not rebuild the image, but should consume the image from the previous build",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00f3z:,,,,,,,,greg.haskins,ryjones,,,,,,,,,feature/ca,feature/convergence,master,true,"25/Aug/16 12:50 PM;greg.haskins;Fix merged to master

https://gerrit.hyperledger.org/r/gitweb?p=fabric.git;a=commitdiff;h=1e7030a8869ad093abb38027175e3b001648505a",,,,,,,,,,,,,,,,,,,,,,,
"[node-SDK] setHashAlgorithm description says it sets security level, not hash algorithm",FAB-238,12539,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,bryanhuang,jjjjibm,jjjjibm,23/Aug/16 9:05 PM,05/Sep/16 6:04 AM,26/Apr/18 6:51 AM,23/Aug/16 9:09 PM,,,,,,,,,,,,,,0,node-SDK,,,,,,,,"Description: 
+SetHashAlgorithm+ description in + Interface MemberServices +section references *securityLevel.
*
Here is the documentation for setHashAlgorithm: 

_setHashAlgorithm

    setHashAlgorithm(hashAlgorithm: string): void

        Defined in src/hfc.ts:123

    Set the *security level*

    params

        *securityLevel The security level
*
    Parameters
        hashAlgorithm: string
    Returns void
_",win7 vagrant hfc 0.0.2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00f2v:,,,,,,,,bryanhuang,jjjjibm,,,,,,,,,,,,,05/Sep/16 6:04 AM;bryanhuang;Changes committed: https://gerrit.hyperledger.org/r/#/c/905/,,,,,,,,,,,,,,,,,,,,,,,
[Node-SDK]: chain.getUser() returns a member object for an invalid user,FAB-237,12538,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,2020Nishi,2020Nishi,23/Aug/16 5:56 PM,08/Feb/17 3:31 PM,26/Apr/18 6:51 AM,08/Feb/17 3:31 PM,,,,,,,,,,fabric-sdk-node,,,,0,",6",,,,,,,,"""AAA12345"" does not exist in membersrvc.yaml

But chain.getUser(""AAA12345"", function (err, user) {..}

returned a member object in 'user'
    ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00f2n:,,,,,,,,2020Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] Peer constructor url description is incomplete ,FAB-233,12534,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,cdaughtr,jjjjibm,jjjjibm,22/Aug/16 11:33 PM,06/Dec/16 2:21 PM,26/Apr/18 6:51 AM,29/Aug/16 2:08 PM,,,,,,,,,,fabric-sdk-node,,,,1,node-SDK,,,,,,,,"
Description

The constructor description for the peer object has a couple problems:
 1.config --> did you mean 'configuration'?
 2.Parameter 'url' is described as 'the url of'. The url of what? Not very helpful!

Here is an excerpt from the generated documentation

_constructor
 new Peer(url: string, chain: Chain, pem: string): Peer

Defined in src/hfc.ts:2042

Constructor for a peer given the endpoint config for the peer.

Parameters

:black_medium_small_square:url: string

The URL of_

Describe How to Reproduce

1,From fabric directory, run make node-sdk-unit-tests
 2.In a web browser, navigate to file:///C:/go/src/github.com/hyperledger/fabric/sdk/node/doc/classes/src_hfc.peer.html which describes class peer.
 3.Scroll down to Constructor then inspect new Peer(...
",Win7 vagrant hfc 0.0.2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00f1r:,,,,,,,,cdaughtr,jjjjibm,,,,,,,,,feature/convergence,master,,true,29/Aug/16 2:08 PM;cdaughtr;Patch set merged: https://gerrit.hyperledger.org/r/715,,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] getNextTCert API in member class in Node SDK fetched tcert even when we pass a non-exiting attibute,FAB-219,12519,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,Nishi,Nishi,22/Aug/16 1:32 PM,08/Feb/17 3:31 PM,26/Apr/18 6:51 AM,08/Feb/17 3:31 PM,,,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,"Passed in a non-existing attribute for user alice to getNextTCert by calling
alice.getNextTCert(['fail'],function(err, tcert) in the test.

Expected Result:

Test to fail since 'fail' is not an attribute defined for alice in membersrvc.yaml

Actual Result:

Test passed and generated a TCert.

commit 346f9fb",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00eyn:,,,,,,,,jimthematrix,Nishi,,,,,,,,,,,,,08/Feb/17 3:31 PM;jimthematrix;closing off v0.6-only issues,,,,,,,,,,,,,,,,,,,,,,,
getAffiliation API in member class in Node SDK fails to fetch affiliation of a user,FAB-218,12518,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,Nishi,Nishi,22/Aug/16 1:30 PM,03/Apr/17 3:44 PM,26/Apr/18 6:51 AM,03/Apr/17 3:44 PM,,,,,,,WON'T FIX,,,fabric-sdk-node,,,,0,,,,,,,,,"Call alice.getAffiliation() in my test to verify getAffiliation for user alice failed.

Expected Result:

getAffiliation to return 'bank_a' for user alice as in membersrvc.yaml

Actual Result:

Test failed returned [undefined]

commit level on fabric source code: 346f9fb",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00eyf:,,,,,,,,ChristopherFerris,Nishi,,,,,,,,,,,,,03/Apr/17 3:44 PM;ChristopherFerris;closing this because it pertains to v0.6,,,,,,,,,,,,,,,,,,,,,,,
getRoles API in member class in Node SDK fails to fetch getRoles of a user,FAB-217,12517,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,Nishi,Nishi,22/Aug/16 1:29 PM,08/Mar/17 4:46 AM,26/Apr/18 6:51 AM,08/Mar/17 4:46 AM,,,,,,,WON'T FIX,,,,,,,0,,,,,,,,,"Call alice.getRoles() in my test to verify roles for user alice retrieved successfully from membersrv.yaml failed.

Expected Result:

attributes as defined in membersrvc.yaml
""attribute-entry-7: alice;bank_a;role;client;2016-01-01T00:00:00-03:00;;
attribute-entry-8: alice;bank_a;account;12345-56789;2016-01-01T00:00:00-03:00;;""

getRoles to return attribute keys: 'role' and 'account' for user alice as in membersrvc.yaml

Actual Result:

Test failed returned [undefined]

commit level on fabric source code: 346f9fb",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ey7:,,,,,,,,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Certificates for BDD Tests have expired,FAB-213,12513,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,juliancarrivick,juliancarrivick,22/Aug/16 5:48 AM,02/Apr/17 12:36 PM,26/Apr/18 6:51 AM,02/Apr/17 12:36 PM,,,,,,,WON'T FIX,,,fabric-membersrvc,,,,0,,,,,,,,,"The certificate for used in the BDD Tests has expired (in April 2016), not allowing tests which utilise them to run as the peers are unable to talk to each other.

To verify, manually run {{docker-compose -f docker-compose-2-tls-basic.yml up}} in {{bddtests/}}

You will see the certificate errors.",,,,,,,,,,,,,,,,,,,,23/Aug/16 3:20 AM;JonathanLevi;2016-08-22_fabric-dev.png;https://jira.hyperledger.org/secure/attachment/10037/2016-08-22_fabric-dev.png,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-10,0|i00exj:,,,,,,,,JonathanLevi,juliancarrivick,mastersingh24,satheeshk,,,,,,,,,,,"23/Aug/16 3:05 AM;JonathanLevi;Yes, this is the current certificate that is checked it. AFAICT, the related TLS tests could not have run successfully/or passed.

{{Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number: 1 (0x1)
    Signature Algorithm: ecdsa-with-SHA384
        Issuer: C=US, O=IBM, CN=OBC
        Validity
            Not Before: Jan 21 22:49:51 2016 GMT
            Not After : Apr 20 22:49:51 2016 GMT
        Subject: C=US, O=IBM, CN=OBC
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (384 bit)
                pub: 
                    04:7a:60:0a:0f:3b:03:33:21:58:be:3f:cd:d5:ef:
                    d2:3a:05:e2:32:25:e6:8c:99:ea:96:6e:6c:10:b1:
                    34:65:28:3e:a0:d0:bd:18:bd:cc:d0:3b:6b:e9:f8:
                    36:f1:44:dd:75:a2:41:aa:dc:ef:dc:b5:c3:f3:bc:
                    f5:ef:9b:b3:1c:6d:bd:f0:86:05:d6:46:36:ec:5f:
                    ac:27:db:9b:45:db:f8:54:e9:f4:2c:c9:02:cf:88:
                    9b:8d:8f:fc:b1:92:74
                ASN1 OID: secp384r1
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Certificate Sign
            X509v3 Basic Constraints: critical
                CA:TRUE
            X509v3 Subject Key Identifier: 
                01:02:03:04
            X509v3 Authority Key Identifier: 
                keyid:01:02:03:04

    Signature Algorithm: ecdsa-with-SHA384
         30:65:02:31:00:84:c6:9a:af:b1:e4:de:d0:d6:3a:cb:b7:74:
         05:46:d4:ca:b2:e3:48:a2:c9:e5:57:82:d1:e7:89:77:cb:20:
         e8:d7:b4:ec:d1:82:f2:0b:4a:59:40:57:7e:19:44:52:39:02:
         30:3f:f5:c0:c2:83:1c:6c:92:6d:39:57:96:fd:42:f6:10:ea:
         a6:28:0d:b2:82:65:97:e6:4b:5e:f4:b9:e0:7f:9e:74:4b:a8:
         0f:11:6b:83:40:e7:18:f7:90:7e:c7:77:87
}}","23/Aug/16 3:06 AM;JonathanLevi;As a matter of fact, had the TLS tests run successfully, one would argue that it is even worse!",23/Aug/16 3:20 AM;JonathanLevi; !2016-08-22_fabric-dev.png|thumbnail! ,17/Mar/17 6:16 PM;mastersingh24;this is no longer relevant so closing,,,,,,,,,,,,,,,,,,,,
member.isRegistered() API returned 'true' even for an invalid user,FAB-153,12452,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,harrisob@us.ibm.com,Nishi,Nishi,17/Aug/16 4:13 PM,27/Sep/16 7:44 PM,26/Apr/18 6:51 AM,23/Aug/16 5:22 PM,,,,,,,,,,fabric-sdk-node,,,,0,.6,node-SDK,,,,,,,"Following is a snippet of code which returned 'true' for a non-existing user neither in membersrvc.yaml  nor registered using API.

test('Is Registered NOT OK', function (t) {
  getUser('XYZ123', function (err, user) {
  if (user.isRegistered()) {
    console.log("" How can this user be registered??? "")
    fail(t, ""passed isReg how?"");
  }else {
      console.log(""from isReg failed, it is OK"")
      pass(t, ""Since 'XYZ123' is an invalid user. Test case fail OK"");
  }
  })
});",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ek7:,,,,,,,,2020Nishi,Nishi,smithbk,,,,,,,,,,,,"18/Aug/16 1:32 PM;smithbk;This is a node SDK issue, not membersrvc.  So I changed the tag and assignee.","23/Aug/16 5:22 PM;2020Nishi;isRegistered() API returns false for an invalid user.
This was a mistake in the test case.

Hence closing the issue

Thanks!",,,,,,,,,,,,,,,,,,,,,,
was able to set a user without registrar metadata as registrar using chain.setRegistar API.,FAB-152,12451,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,Nishi,Nishi,17/Aug/16 3:01 PM,05/Sep/16 10:36 AM,26/Apr/18 6:51 AM,05/Sep/16 10:36 AM,,,,,,,,,,,,,,0,,,,,,,,,"Was trying a -ve test to enroll a user without optional metadata for being a 'registrar' as registrar. Expected my test to fail.

But call chain.setRegistar with this user was successful.

From membersrvc.yaml metadata:
""test_user0: 1 MS9qrN8hFjlE bank_a""

Here is a snippet from my test program:
----------------------------------

var badRegistrar = {
    name : 'test_user0',
    secret: 'MS9qrN8hFjlE'
};

test('-Ve Test Enroll the registrar', function (t) {
       //get 'test_user0'
        chain.getUser(badRegistrar.name, function (err, user) {
        if (err) {
            fail(t, ""-ve Test get registrar"", err);
         }
        // Enroll 'test_user0'
        user.enroll(badRegistrar.secret, function (err) {
            if (err) {
                fail(t, ""-ve Test enroll registrar"", err);
             }
            try {
              //set test_user0 as registrar even membersrvc.yaml does Not have right metadata                          
              //for being a registrar
              chain.setRegistrar(user);
            }catch (e) {
              console.log(e);
            }
        });
    });
});

P.S. Subsequent calls to enroll other users failed after setting 'test_user0' as registrar. With an appropriate error message:
[Error: member test_user0 is not a registrar]

But wouldn't it be better if chain.setRegistrar() itself identified that 'test_user0' is missing right metadata required for registrar?  Instead of a failing during enrollment of users?

Thanks!",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ejz:,,,,,,,,mastersingh24,Nishi,smithbk,,,,,,,,,,,,"02/Sep/16 11:46 PM;mastersingh24;[~smithbk] [~jimthematrix] While I don't disagree that this would be a nice to have, I am not sure you can actually do this since the SDK can;t know whether or not you have been assigned the (correct) registrar role until it actually tries to enroll a user 

I am going to close this can't / won't fix unless anyone objects (or I missed something)",03/Sep/16 12:29 PM;smithbk;Agreed.,05/Sep/16 10:36 AM;mastersingh24;can't / won't fix,,,,,,,,,,,,,,,,,,,,,
"[node-SDK] hfc.getChain(<brand new name>, create=yes) fails with ReferenceError: name is not defined",FAB-128,12427,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,cdaughtr,jjjjibm,jjjjibm,16/Aug/16 9:35 PM,06/Dec/16 2:21 PM,26/Apr/18 6:51 AM,01/Sep/16 1:23 PM,,,,,,,,,,fabric-sdk-node,,,,0,Fabric05,node-SDK,,,,,,,"
My program calls hfc.getChain with a new chain name and the create flag.

GetChain calls hfc.newChain() because the chain has not been allocated yet.

The call fails like this:
setChainFields: calling getChain() <--- message from my program

The rest is from node.js:
/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/lib/hfc.js:2194
chain = newChain(name);
^
ReferenceError: name is not defined
at Object.getChain (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/lib/hfc.js:2194:26)
at setChainFields (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/test/unit/registrar2.js:88:18)
at Test. (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/test/unit/registrar2.js:65:5)
at Test.bound as _cb
at Test.run (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/node_modules/tape/lib/test.js:82:10)
at Test.bound as run
at Immediate.next as _onImmediate
at processImmediate as _immediateCallback

Looking at the getChain function in hfc.ts

export function getChain(chainName, create) {
let chain = _chains[chainName];
if (!chain && create) {
chain = newChain(name);
}
return chain;
}:

we notice getChain() takes the parameter chainName and looks up chainName, but when it creates a new chain, it passes a new variable, name. Could it be newChain should have been called like this?
chain = newChain(chainName)
Describe How to Reproduce

Add this to register.js or to a similar program:
var create = true;
var chain = hfc.getChain(""testChain3"", create);

where ""testChain3"" has not been allocated yet.
",win7 hfc 0.0.2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00eev:,,,,,,,,cdaughtr,ChristopherFerris,jjjjibm,,,,,,,,feature/convergence,master,,true,"31/Aug/16 9:45 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/819
",,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] newChain(42) breaks registrar.js test,FAB-127,12426,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,jjjjibm,jjjjibm,16/Aug/16 9:32 PM,02/Apr/17 12:24 PM,26/Apr/18 6:51 AM,02/Apr/17 12:24 PM,v0.6,,,,,,WON'T FIX,,,,,,,0,Fabric05,node-SDK,,,,,,,"Description

HFC version 0.0.2
#This error occurs while running make node-sdk-unit-tests:

enroll again
enrollAgain
enrollAgain: calling newChain(42)
enrollAgain: back from newChain()
/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/test/unit/registrar.js:134
chain.setKeyValStore(hfc.newFileKeyValStore('/tmp/keyValStore'));
^
ReferenceError: chain is not defined
at enrollAgain (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/test/unit/registrar.js:134:4)
at Test. (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/test/unit/registrar.js:48:5)
at Test.bound as _cb
at Test.run (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/node_modules/tape/lib/test.js:82:10)
at Test.bound as run
at Immediate.next as _onImmediate
at processImmediate as _immediateCallback
ERROR running registrar tests!
END running registrar tests

Here is the documentation for getChain() function:

newChain

newChain(name: **any**): any

    Defined in src/hfc.ts:2669

Create a new chain. If it already exists, throws an Error.
Parameters
    name: **any**

    Name of the chain. It can be any name and has value only for the client.
Returns any

I reckoned 'name:any' means any value, so I tried value 42 and got this error.
Describe How to Reproduce

1.make node-sdk-unit-tests to establish baseline success
2.Edit sdk/node/test/unit/registrar.js, function enrollAgain(cb)
3.Change hfc.newChain(""testChain2"") to hfc.newChain(42)

For example,
/var chain = hfc.newChain(""testChain2"");
//var chain = hfc.newChain("""");
var chain2 = hfc.newChain(42)

4.Save registrar.js
5.make node-sdk-unit-tests
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00een:,,,,,,,,cdaughtr,jjjjibm,,,,,,,,,,,,,"06/Sep/16 9:12 PM;cdaughtr;I was not able to reproduce this issue on current gerrit master, so it appears to be a Fabric v0.5 specific problem.  Need to setup a Fabric v0.5 dev env.",,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] chain.deployWaitTime() -- any value works ,FAB-126,12425,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,cdaughtr,jjjjibm,jjjjibm,16/Aug/16 9:19 PM,06/Dec/16 2:21 PM,26/Apr/18 6:51 AM,06/Sep/16 1:32 PM,,,,,,,,,,fabric-sdk-node,,,,0,Fabric05,node-SDK,,,,,,," called chain.setDeployWaitTime() to set the wait time to various values: 0, 6000, -1. The sdk accepted
these values. A value of 6000 (seconds) is acceptable I suppose but the meanings of 0 and -1
are not described in the documentation.

I then called chain.setDeployWaitTime(""as long as it takes"") in the test case
...sdk/node/test/unit/chain-test.js ""Deploy a chaincode by enrolled user"".

""as long as it takes"" is not a number as required in the documentation:
setDeployWaitTime(secs: number): void

and yet the call succeeded. Not only did the call succeed, the value did not impact
the deploy:
# Deploy a chaincode by enrolled user
setting bogus wait time prior to deploy
deploy results: {""uuid"":""mycc1"",""chaincodeID"":""mycc1"",""result"":""TODO: get actual results; waited as long as it takes seconds and assumed deploy was successful""}

Here it is again using -1 as the value:

# Deploy a chaincode by enrolled user
setting bogus wait time prior to deploy
deploy results: {""uuid"":""mycc1"",""chaincodeID"":""mycc1"",""result"":""T ODO: get actual results; waited -1 seconds and assumed deploy was successful""}
Describe How to Reproduce

In vagrant,
1.Edit fabric/sdk/node/test/unit/chain-tests.js
2.Add this call before a valid deploy: chain.setDeployWaitTime(""as long as it takes"")
3.Run 'make node-sdk-unit-tests'. ","Win 7,  hfc 0.0.2",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00eef:,,,,,,,,cdaughtr,jimthematrix,jjjjibm,,,,,,,,feature/convergence,master,,true,"31/Aug/16 7:50 PM;cdaughtr;Without validation of the number of seconds entered, the code works as described in the Node.js doc:
https://nodejs.org/api/timers.html#timers_settimeout_callback_delay_arg
When delay is larger than 2147483647(ms) or less than 1, the delay will be set to 1.

I could not find any functions that validated input, except those with error callbacks.  So my assumption is that as long as an unexpected exception does not occur with any kind of input and the setTimeout function actually works, this function is working as designed.

Will check to see if we should add to the doc to indicate the Node.js defaults that are used when a value is entered outside of it's lower and upper limits.

",31/Aug/16 8:51 PM;jimthematrix;i agree to follow the node.js setTime() design and solve this by adding documentation to make it clear how different kinds of input values will be handled.,06/Sep/16 1:33 PM;cdaughtr;merged: https://gerrit.hyperledger.org/r/#/c/861/1,,,,,,,,,,,,,,,,,,,,,
[node-SDK] chain.getMember(<undefined user>) returns member,FAB-125,12424,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,cdaughtr,jjjjibm,jjjjibm,16/Aug/16 9:11 PM,06/Dec/16 2:21 PM,26/Apr/18 6:51 AM,30/Aug/16 4:36 PM,,,,,,,,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,,"To drive an error case, I added the following call to my node.js program:

chain.getMember(""Pope Francis"", function(err, member) {
			if (err) {
				console.log(""could not get member for "", name, err);
				return cb(err);
			}
			console.log(""I did find this member"", member)
			chain.setRegistrar(member);
		});

Since ""Pope Francis"" isn't a defined user, I expected the callback function to be driven with an error to the effect ""Pope Francis"" was not defined.

Instead I got this: 
~I did find this member { tcertGetterMap: {},
  name: 'Pope Francis',
  chain:
   { peers: [],
     securityEnabled: true,
     members: {},
     tcertBatchSize: 200,
     devMode: false,
     preFetchMode: true,
     deployWaitTime: 20,
     invokeWaitTime: 5,
     name: 'testChain',
     keyValStore: { setValue: [Function], dir: '/tmp/keyValStore' },
     memberServices:
      { ecaaClient: [Object],
        ecapClient: [Object],
        tcapClient: [Object],
        tlscapClient: [Object],
        cryptoPrimitives: [Object] },
     cryptoPrimitives:
      { hashAlgorithm: 'SHA3',
        securityLevel: 256,
        suite: 'sha3-256',
        curveName: 'secp256r1',
        hashFunction: [Object],
        hashFunctionKeyDerivation: [Object],
        hashOutputSize: 32,
        ecdsaCurve: [Object] },
     registrar:
      { tcertGetterMap: {},
        name: 'admin',
        chain: [Circular],
        memberServices: [Object],
        keyValStore: [Object],
        keyValStoreName: 'member.admin',
        tcertBatchSize: 200,
        enrollment: [Object] } },
  memberServices:
   { ecaaClient: { '$channel': {} },
     ecapClient: { '$channel': {} },
     tcapClient: { '$channel': {} },
     tlscapClient: { '$channel': {} },
     cryptoPrimitives:
      { hashAlgorithm: 'SHA3',
        securityLevel: 256,
        suite: 'sha3-256',
        curveName: 'secp256r1',
        hashFunction: [Object],
        hashFunctionKeyDerivation: [Object],
        hashOutputSize: 32,
        ecdsaCurve: [Object] } },
  keyValStore: { setValue: [Function], dir: '/tmp/keyValStore' },
  keyValStoreName: 'member.Pope Francis',
  tcertBatchSize: 200 ~}

The documentation says nothing about chain.getMember() creating members for nonexistent users:

_getMember

    getMember(name: string, cb: GetMemberCallback): void

        Defined in src/hfc.ts:609

    Get the user member named 'name'.
    Parameters
        name: string
        cb: GetMemberCallback

        Callback of form ""function(err,Member)""
    Returns void


_

Either getMember() should have returned with an error, or else the documentation must change to indicate chain.getMember() will always return a member, even for undefined users. 

How to reproduce:
1.In vagrant, in your fabric directory, cd to .../fabric/sdk/node/test/unit
2.Edit registrar.js  (for example)
3.Add this code to one of the existing functions:

{code:java}
chain.getMember(""Pope Francis"", function(err, member) {
			if (err) {
				console.log(""could not get member for "", name, err);
				return cb(err);
			}
			console.log(""I did find this member"", member)
			chain.setRegistrar(member);
		});
{code}
4.Run 'make node-sdk-unit-tests' as usual. ",Laptop = Win 7 hfc = 0.0.2 Still using Github until I'm told sdk/node works on Gerrit. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ee7:,,,,,,,,cdaughtr,jimthematrix,jjjjibm,,,,,,,,feature/convergence,master,,true,"25/Aug/16 7:39 PM;cdaughtr;I was able to reproduce this issue.

If we assume that chain.getMember from 
hfc.ts getMember(name:string, cb:GetMemberCallback), should return an existing member or an error, then there appears to be a gap in the logic between 

private getMemberHelper(name:string, cb:GetMemberCallback), which returns a member or an error

and

restoreState(cb:ErrorCallback) which is documented as ""Restore the state of this member from the key value store (if found).  If not found, do nothing.""

So still need to find out if this is working as designed and needs a documentation update or if this is an actual bug.","25/Aug/16 9:14 PM;jimthematrix;from API design point of view, having the getMember() method return an error on non-existent names would be a more intuitive design.

but at this point we are minimizing the changes to the existing SDK implementation and should start working on a new design that are driven by two forces:
- all the changes brought about by the new architecture (proposal vs. transaction, endorsers and orderers, etc.)
- we should have aligned API designs across all SDKs for node.js, python and Java

So what I recommend is leave the current implementation as-is, and update the documentation to make this behavior clearly spelled out.",30/Aug/16 4:36 PM;cdaughtr;merged: http://gerrit.hyperledger.org/r/733,,,,,,,,,,,,,,,,,,,,,
deploy transaction performance issue,FAB-120,12419,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,ChristopherFerris,ChristopherFerris,16/Aug/16 6:46 PM,02/Apr/17 12:34 PM,26/Apr/18 6:51 AM,02/Apr/17 12:34 PM,v0.6,v1.0.0,,,,,v1.0.0,,,,,,,0,chaincode,performance,,,,,,,"Compared to invoke transactions (but also in absolute terms), deploy transactions take a very long time (many seconds).

With the sieve (non-deterministic) consensus protocol, we need to execute all transactions (and wait for their result) before the protocol can move on. However, to prevent against a malicious leader, the protocol also needs to use timeouts to ensure progress.

This timeout needs to accommodate the duration of deploy transactions (or at least the variation of the duration). Sizing this timeout conservatively means that faulty leaders will be detected more slowly.

Alternatively, we could split deploy transactions into a hint, which will initiate the deployment, and a final transaction, which will record the deployment on the ledger.

(see https://github.com/hyperledger/fabric/issues/452)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00ed3:,,,,,,,,ChristopherFerris,mastersingh24,,,,,,,,,,,,,02/Apr/17 12:33 PM;mastersingh24;We no longer have deploy transactions but rather install and instantiate.  This makes things more efficient execution wise (although a little more complicated process-wise),,,,,,,,,,,,,,,,,,,,,,,
[node-SDK] Incorrect npm hfc package version in package.json file ,FAB-102,12401,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,angrbrd,rameshthoomu,rameshthoomu,15/Aug/16 8:21 PM,06/Dec/16 2:21 PM,26/Apr/18 6:51 AM,04/Oct/16 11:31 PM,,,,,,,,,,fabric-sdk-node,,,,0,help-wanted,node-SDK,,,,,,,"npm hfc package version mismatch in fabric/sdk/node/package.json. Observed 0.6.0 is the latest version in npm hfc repo (https://www.npmjs.com/package/hfc) but I could see 0.0.2 in fabric/sdk/node/package.json file.

verify latest version number in https://www.npmjs.com/package/hfc and sdk/node/package.json in gerrit.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00e93:,,,,,,,,angrbrd,rameshthoomu,,,,,,,,,,,,,"27/Sep/16 7:49 PM;angrbrd;On master: https://gerrit.hyperledger.org/r/#/c/1107/
On v0.6: https://gerrit.hyperledger.org/r/#/c/1277/1",,,,,,,,,,,,,,,,,,,,,,,
"panic: Test network took more than 60 seconds to resolve requests, this usually indicates a hang",FAB-101,12400,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,rameshthoomu,rameshthoomu,15/Aug/16 8:15 PM,02/Apr/17 12:32 PM,26/Apr/18 6:51 AM,02/Apr/17 12:32 PM,v0.6,,,,,,WON'T FIX,,,,,,,0,chaincode,,,,,,,,"Observed panic error in one of the jenkins build while running unit-tests. This issue is not always reproducing.
```
--- FAIL: TestClassicBackToBackStateTransfer (60.17s)
00:09:35.222 panic: Test network took more than 60 seconds to resolve requests, this usually indicates a hang [recovered]
00:09:35.222    panic: Test network took more than 60 seconds to resolve requests, this usually indicates a hang
00:09:35.222 
00:09:35.222 goroutine 226 [running]:
00:09:35.222 panic(0xaa4160, 0xc820580960)
00:09:35.222    /opt/go/go1.6.linux.amd64/src/runtime/panic.go:464 +0x3e6
00:09:35.222 testing.tRunner.func1(0xc8203685a0)
00:09:35.222    /opt/go/go1.6.linux.amd64/src/testing/testing.go:467 +0x192
00:09:35.222 panic(0xaa4160, 0xc820580960)
00:09:35.222    /opt/go/go1.6.linux.amd64/src/runtime/panic.go:426 +0x4e9
00:09:35.222 github.com/hyperledger/fabric/consensus/pbft.(*testnet).process(0xc820316040, 0x0, 0x0)
00:09:35.222    /w/workspace/fabric-verify-x86_64/gopath/src/github.com/hyperledger/fabric/consensus/pbft/mock_network_test.go:230 +0x33e
00:09:35.222 github.com/hyperledger/fabric/consensus/pbft.TestClassicBackToBackStateTransfer(0xc8203685a0)
00:09:35.222    /w/workspace/fabric-verify-x86_64/gopath/src/github.com/hyperledger/fabric/consensus/pbft/batch_test.go:334 +0x3c3
00:09:35.222 testing.tRunner(0xc8203685a0, 0x1303bd0)
00:09:35.222    /opt/go/go1.6.linux.amd64/src/testing/testing.go:473 +0x98
00:09:35.222 created by testing.RunTests
00:09:35.222    /opt/go/go1.6.linux.amd64/src/testing/testing.go:582 +0x892
00:09:35.222 FAIL   github.com/hyperledger/fabric/consensus/pbft    61.923s
```
Below is the jenkins build reference:

https://jenkins.hyperledger.org/view/fabric/job/fabric-verify-x86_64/74/consoleFull
",Jenkins build environment (Outside vagrant),,,,,,,,,,,,,,,,FAB-346,,,09/Sep/16 1:44 AM;juliancarrivick;fabric-merge-137.log;https://jira.hyperledger.org/secure/attachment/10072/fabric-merge-137.log,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00e8v:,,,,,,,,rameshthoomu,,,,,,,,,,master,,,true,19/Aug/16 1:14 PM;rameshthoomu;Observed same error in one of the recent builds. Below is the reference: https://jenkins.hyperledger.org/view/fabric/job/fabric-verify-x86_64/445/consoleFull,06/Sep/16 10:32 PM;rameshthoomu;recent build: https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-x86_64/137/consoleFull,14/Sep/16 8:21 PM;rameshthoomu;Here is the recent build log file: https://jenkins.hyperledger.org/view/fabric/job/fabric-verify-x86_64/1166/console,,,,,,,,,,,,,,,,,,,,,
Chaincode deploy is not working on commit#fd498d2,FAB-82,12381,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,hgabre,rameshthoomu,rameshthoomu,15/Aug/16 3:04 PM,02/Sep/16 9:36 AM,26/Apr/18 6:51 AM,28/Aug/16 10:55 PM,,,,,,,,,,,,,,0,chaincode,,,,,,,,"Observed below error message while deploying chaincode on commit# fd498d2

*""Error unmarshalling chaincode request payload: illegal base64 data at input byte 0""
*
Below are steps followed:
* 
* pull commit#master-fd498d2 from hyperledger docker hub
* launch 4 peer network with security enabled 
* use *post man* to send registrar and deploy transaction requests

After deploy chaincode with below payload observed above said error message:
{
  ""jsonrpc"": ""2.0"",
  ""method"": ""deploy"",
  ""params"": {
    ""type"": 1,
    ""chaincodeID"":{
        ""path"":""github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02""
    },
    ""ctorMsg"": {
        ""function"":""init"",
        ""args"":[""a"", ""100"", ""b"", ""200""]
    },
    ""secureContext"": ""test_user0""
  },
  ""id"": 1
}",,,,,,,,,,,,,,,,,,,,15/Aug/16 3:04 PM;rameshthoomu;Capture.PNG;https://jira.hyperledger.org/secure/attachment/10003/Capture.PNG,15/Aug/16 3:04 PM;rameshthoomu;deploy_log.txt;https://jira.hyperledger.org/secure/attachment/10004/deploy_log.txt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00e53:,,,,,,,,hgabre,inatatsu,rameshthoomu,,,,,,,,,,,,"15/Aug/16 3:39 PM;rameshthoomu;deploy transaction is working as expected using below payload

{
  ""jsonrpc"": ""2.0"",
  ""method"": ""deploy"",
  ""params"": {
    ""type"": 1,
    ""chaincodeID"":{
        ""path"":""github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02""
    },
    ""ctorMsg"": {
        ""args"":[""aW5pdA=="", ""YQ=="", ""MTAwMA=="", ""Yg=="", ""MjAwMA==""]
    }
  },
  ""id"": 1
}
API documentation is not updated as per the code changes.. 
Below gerrit request is in review. Will re-test this issue after merge the below patch set.
https://gerrit.hyperledger.org/r/#/c/499/",02/Sep/16 8:39 AM;hgabre;I will have to update the docs for the current (and hopefully 'final') state.,02/Sep/16 9:36 AM;hgabre;https://gerrit.hyperledger.org/r/#/c/875/ this updates the docs. 499 won't be merged.,,,,,,,,,,,,,,,,,,,,,
"Node SDK: after chain.registerAndEnroll a user, record inserted in eca.db shows registrar",FAB-54,12353,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,,Nishi,Nishi,12/Aug/16 7:18 PM,06/Dec/16 9:45 PM,26/Apr/18 6:51 AM,12/Aug/16 10:34 PM,,,,,,,,,,fabric-membersrvc,,,,0,MembershipServices,,,,,,,,"Following request was sent  to register a new user (non-existing in membersrvc.yaml):

 var registrationRequest = {
           enrollmentID: ""Insurer2"",
           attributeName: ""auctionRole"",
           attributeValue: ""IN"",
           affiliation: ""AuctionTrade""
   };
                          
chain.registerAndEnroll(registrationRequest,function(err, user) {
       if (err) throw Error("" Failed to register and enrol: ""+err);
       console.log(""Register And Enroll Insurer:"", user)
  })       

Expected Result:
-------------------
User to be created  and record inserted in eca.db with all the attributes from registration request above, for this new user.

Actual Result:
----------------------
Record created in eca.db has ""registrar"" in it as follows:
42|Insurer2|Insurer2\AuctionTrade|1|{""registrar"":{}}|tzVQGmMlIwnJ|2|0Y0*▒H▒*▒H▒=B",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|i00e0n:,,,,,,,,Nishi,smithbk,,,,,,,,,,,,,"12/Aug/16 10:34 PM;smithbk;This is working as designed currently.  Note that the value of the registrar attribute is {}, which means the user does NOT have registrar authority.  Also, we do not support dynamic registration of users with attributes today. ",,,,,,,,,,,,,,,,,,,,,,,
"During BDD Tests, occassionally when peers get stopped and started they get new IPs",FAB-5,12303,Bug,Done,FAB,Fabric,software,ChristopherFerris,,,Medium,Done,jeffgarratt,juliancarrivick,juliancarrivick,10/Aug/16 12:52 AM,09/Mar/17 10:51 PM,26/Apr/18 6:51 AM,09/Mar/17 10:51 PM,,,,,,,,,,,,,,0,build-system,discovery,,,,,,,"Every now and then the BDD tests will fail for seemingly unknown reasons that are not related to the delivered patch set. It usually takes the form of a timeout when attempting to verify a transaction occurred after taking down some peers and bring them back up. The test which seems to exhibit it the most is {{@issue 1000 - chaincode example02 with 4 peers and 1 membersrvc, test crash fault}}.

After adding some extra debug statements to the tests it seems the peers, when brought back up get new IP addresses however the old IPs are still retained which means that consensus cannot be reached:
33m04:26:42.673 [peer] ensureConnected -> WARN 6e95[0m Touch service indicates dropped connections, attempting to reconnect...
[36m04:26:42.674 [peer] ensureConnected -> DEBU 6e96[0m Connected to: [172.17.0.40:7051 172.17.0.41:7051]
[36m04:26:42.674 [peer] ensureConnected -> DEBU 6e97[0m Discovery knows about: [172.17.0.34:7051 172.17.0.35:7051 172.17.0.40:7051 172.17.0.41:7051 172.17.0.33:7051]
[36m04:26:42.674 [peer] chatWithPeer -> DEBU 6e98[0m Initiating Chat with peer address: 172.17.0.33:7051
[36m04:26:42.675 [peer] chatWithPeer -> DEBU 6e99[0m Initiating Chat with peer address: 172.17.0.34:7051
[36m04:26:42.675 [peer] chatWithPeer -> DEBU 6e9a[0m Initiating Chat with peer address: 172.17.0.35:7051
...
2016/08/09 04:26:45 grpc: ClientConn.resetTransport failed to create client transport: connection error: desc = ""transport: dial tcp 172.17.0.34:7051: getsockopt: no route to host""; Reconnecting to ""172.17.0.34:7051""
2016/08/09 04:26:45 grpc: ClientConn.resetTransport failed to create client transport: connection error: desc = ""transport: dial tcp 172.17.0.35:7051: getsockopt: no route to host""; Reconnecting to ""172.17.0.35:7051""
2016/08/09 04:26:45 grpc: ClientConn.resetTransport failed to create client transport: connection error: desc = ""transport: dial tcp 172.17.0.33:7051: getsockopt: no route to host""; Reconnecting to ""172.17.0.33:7051""
[31m04:26:45.675 [peer] chatWithPeer -> ERRO 6efd[0m Error creating connection to peer address 172.17.0.33:7051: grpc: timed out trying to connect
[31m04:26:45.675 [peer] chatWithPeer -> ERRO 6efe[0m Error creating connection to peer address 172.17.0.34:7051: grpc: timed out trying to connect
[31m04:26:45.675 [peer] chatWithPeer -> ERRO 6eff[0m Error creating connection to peer address 172.17.0.35:7051: grpc: timed out trying to connect
...
[36m04:26:43.225 [consensus/pbft] ProcessEvent -> DEBU 6ebd[0m Replica 0 view change resend timer expired before view change quorum was reached, resending

Logs from failing scenario attached (compressed because too large).

Ideally, the peers would connect and register using their new IPs, the old ones would be discarded and execution could continue as normal.",Jenkins x86_64 Host,,,57600,57600,,0%,57600,57600,,,,,,,,,,,10/Aug/16 12:51 AM;juliancarrivick;Logs.tar.gz;https://jira.hyperledger.org/secure/attachment/10000/Logs.tar.gz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0|hzzzvp:,,Sprint 1,Sprint 2,Sprint 3,,,,ChristopherFerris,jeffgarratt,juliancarrivick,rameshthoomu,,,,,,,,,,,"10/Aug/16 2:17 PM;rameshthoomu;We had similar issue tracked in github https://github.com/hyperledger/fabric/issues/2346. [~tuand27613] noticed same root cause. Please see his comments in ([https://[github.com/hyperledger/fabric/issues/2346]]). As suggested by Tuan, possible fix is to upgrade docker version to 1.12 in Jenkins otherwise we have to increase the timeout after start peers and invoke transactions.

[~ryjones]: Could you please upgrade docker version to 1.11 or 1.12 in Jenkins build machines?

Docker Version in Jenkins:

13:05:12 + docker version
13:05:12 Client:
13:05:12  Version:      1.8.2
13:05:12  API version:  1.20
13:05:12  Go version:   go1.4.2
13:05:12  Git commit:   0a8c2e3
13:05:12  Built:        Wed Oct  7 17:48:28 UTC 2015
13:05:12  OS/Arch:      linux/amd64
13:05:12 
13:05:12 Server:
13:05:12  Version:      1.8.2
13:05:12  API version:  1.20
13:05:12  Go version:   go1.4.2
13:05:12  Git commit:   0a8c2e3
13:05:12  Built:        Wed Oct  7 17:48:28 UTC 2015
13:05:12  OS/Arch:      linux/amd64",12/Sep/16 4:59 PM;ChristopherFerris;related to FAB-268,09/Mar/17 10:51 PM;jeffgarratt;Marking as done as new behave if coming online shortly.,,,,,,,,,,,,,,,,,,,,,
